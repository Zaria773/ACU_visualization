import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_compare_versions_esm_4fbc8a69__ from "https://testingcf.jsdelivr.net/npm/compare-versions/+esm";

import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_json5_esm_143ca249__ from "https://testingcf.jsdelivr.net/npm/json5/+esm";

import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_jsonrepair_esm_703c329d__ from "https://testingcf.jsdelivr.net/npm/jsonrepair/+esm";

import * as __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_zod_v4_core_esm_e929c490__ from "https://testingcf.jsdelivr.net/npm/zod/v4/core/+esm";

var __webpack_modules__ = {
  "./util/common.ts"(__unused_webpack_module, __webpack_exports__, __webpack_require__) {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assignInplace: () => (/* binding */ assignInplace),\n/* harmony export */   checkAndUpdateCharacter: () => (/* binding */ checkAndUpdateCharacter),\n/* harmony export */   checkMinimumVersion: () => (/* binding */ checkMinimumVersion),\n/* harmony export */   chunkBy: () => (/* binding */ chunkBy),\n/* harmony export */   literalYamlify: () => (/* binding */ literalYamlify),\n/* harmony export */   parseString: () => (/* binding */ parseString),\n/* harmony export */   prettifyErrorWithInput: () => (/* binding */ prettifyErrorWithInput),\n/* harmony export */   regexFromString: () => (/* binding */ regexFromString),\n/* harmony export */   uuidv4: () => (/* binding */ uuidv4)\n/* harmony export */ });\n/* harmony import */ var compare_versions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! compare-versions */ \"compare-versions\");\n/* harmony import */ var json5__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! json5 */ \"json5\");\n/* harmony import */ var jsonrepair__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonrepair */ \"jsonrepair\");\n/* harmony import */ var zod_v4_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod/v4/core */ \"zod/v4/core\");\n\n\n\n\nfunction assignInplace(destination, new_array) {\n    destination.length = 0;\n    destination.push(...new_array);\n    return destination;\n}\nfunction chunkBy(array, predicate) {\n    if (array.length === 0) {\n        return [];\n    }\n    const chunks = [[array[0]]];\n    for (const [lhs, rhs] of _.zip(_.dropRight(array), _.drop(array))) {\n        if (predicate(lhs, rhs)) {\n            chunks[chunks.length - 1].push(rhs);\n        }\n        else {\n            chunks.push([rhs]);\n        }\n    }\n    return chunks;\n}\nfunction regexFromString(input, replace_macros) {\n    if (!input) {\n        return null;\n    }\n    const makeRegex = (pattern, flags) => {\n        if (replace_macros) {\n            pattern = substitudeMacros(pattern);\n        }\n        return new RegExp(pattern, flags);\n    };\n    try {\n        const match = input.match(/\\/(.+)\\/([a-z]*)/i);\n        if (!match) {\n            return makeRegex(_.escapeRegExp(input), 'i');\n        }\n        if (match[2] && !/^(?!.*?(.).*?\\1)[gmixXsuUAJ]+$/.test(match[3])) {\n            return makeRegex(input, 'i');\n        }\n        let flags = match[2] ?? '';\n        _.pull(flags, 'g');\n        if (flags.indexOf('i') === -1) {\n            flags = flags + 'i';\n        }\n        return makeRegex(match[1], flags);\n    }\n    catch {\n        return null;\n    }\n}\nfunction uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0;\n        const v = c === 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nasync function checkMinimumVersion(expected, title) {\n    if ((0,compare_versions__WEBPACK_IMPORTED_MODULE_0__.compare)(await getTavernHelperVersion(), expected, '<')) {\n        toastr.error(`'${title}' 需要酒馆助手版本 >= '${expected}'`, '版本不兼容');\n    }\n}\nfunction prettifyErrorWithInput(error) {\n    return _([...error.issues])\n        .sortBy(issue => issue.path?.length ?? 0)\n        .flatMap(issue => {\n        const lines = [`✖ ${issue.message}`];\n        if (issue.path?.length) {\n            lines.push(`  → 路径: ${(0,zod_v4_core__WEBPACK_IMPORTED_MODULE_3__.toDotPath)(issue.path)}`);\n        }\n        if (issue.input !== undefined) {\n            lines.push(`  → 输入: ${JSON.stringify(issue.input)}`);\n        }\n        return lines;\n    })\n        .join('\\n');\n}\nfunction literalYamlify(value) {\n    return YAML.stringify(value, { blockQuote: 'literal' });\n}\nfunction parseString(content) {\n    let parsed;\n    try {\n        parsed = YAML.parseDocument(content, { merge: true }).toJS();\n    }\n    catch (yaml_error) {\n        try {\n            // eslint-disable-next-line import-x/no-named-as-default-member\n            parsed = json5__WEBPACK_IMPORTED_MODULE_1__[\"default\"].parse(content);\n        }\n        catch (json5_error) {\n            try {\n                parsed = JSON.parse((0,jsonrepair__WEBPACK_IMPORTED_MODULE_2__.jsonrepair)(content));\n            }\n            catch (json_error) {\n                const toError = (error) => (error instanceof Error ? error.message : String(error));\n                throw new Error(literalYamlify({\n                    ['要解析的字符串不是有效的 YAML/JSON 格式']: {\n                        字符串内容: content,\n                        YAML错误信息: toError(yaml_error),\n                        JSON5错误信息: toError(json5_error),\n                        尝试修复JSON时的错误信息: toError(json_error),\n                    },\n                }));\n            }\n        }\n    }\n    return parsed;\n}\nasync function checkAndUpdateCharacter(name, latest_version, png_url) {\n    const current_version = (await getCharacter(name)).version.trim() || '0.0.0';\n    if ((0,compare_versions__WEBPACK_IMPORTED_MODULE_0__.compare)(current_version, latest_version, '>=')) {\n        return;\n    }\n    await importRawCharacter(name, await fetch(png_url).then(response => response.blob()));\n    replaceCharacter(name, { version: latest_version });\n    toastr.success(`角色卡已自动更新到 '${latest_version.startsWith('v') ? latest_version : `v${latest_version}`}'`, name);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bGF0ZS91dGlsL2NvbW1vbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb21wYXJlIH0gZnJvbSAnY29tcGFyZS12ZXJzaW9ucyc7XG5pbXBvcnQgSlNPTjUgZnJvbSAnanNvbjUnO1xuaW1wb3J0IHsganNvbnJlcGFpciB9IGZyb20gJ2pzb25yZXBhaXInO1xuaW1wb3J0IHsgdG9Eb3RQYXRoIH0gZnJvbSAnem9kL3Y0L2NvcmUnO1xuXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduSW5wbGFjZTxUPihkZXN0aW5hdGlvbjogVFtdLCBuZXdfYXJyYXk6IFRbXSk6IFRbXSB7XG4gIGRlc3RpbmF0aW9uLmxlbmd0aCA9IDA7XG4gIGRlc3RpbmF0aW9uLnB1c2goLi4ubmV3X2FycmF5KTtcbiAgcmV0dXJuIGRlc3RpbmF0aW9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2h1bmtCeTxUPihhcnJheTogVFtdLCBwcmVkaWNhdGU6IChsaHM6IFQsIHJoczogVCkgPT4gYm9vbGVhbik6IFRbXVtdIHtcbiAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGNvbnN0IGNodW5rczogVFtdW10gPSBbW2FycmF5WzBdXV07XG4gIGZvciAoY29uc3QgW2xocywgcmhzXSBvZiBfLnppcChfLmRyb3BSaWdodChhcnJheSksIF8uZHJvcChhcnJheSkpKSB7XG4gICAgaWYgKHByZWRpY2F0ZShsaHMhLCByaHMhKSkge1xuICAgICAgY2h1bmtzW2NodW5rcy5sZW5ndGggLSAxXS5wdXNoKHJocyEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjaHVua3MucHVzaChbcmhzIV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gY2h1bmtzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVnZXhGcm9tU3RyaW5nKGlucHV0OiBzdHJpbmcsIHJlcGxhY2VfbWFjcm9zPzogYm9vbGVhbik6IFJlZ0V4cCB8IG51bGwge1xuICBpZiAoIWlucHV0KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgbWFrZVJlZ2V4ID0gKHBhdHRlcm46IHN0cmluZywgZmxhZ3M6IHN0cmluZykgPT4ge1xuICAgIGlmIChyZXBsYWNlX21hY3Jvcykge1xuICAgICAgcGF0dGVybiA9IHN1YnN0aXR1ZGVNYWNyb3MocGF0dGVybik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVnRXhwKHBhdHRlcm4sIGZsYWdzKTtcbiAgfTtcbiAgdHJ5IHtcbiAgICBjb25zdCBtYXRjaCA9IGlucHV0Lm1hdGNoKC9cXC8oLispXFwvKFthLXpdKikvaSk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuIG1ha2VSZWdleChfLmVzY2FwZVJlZ0V4cChpbnB1dCksICdpJyk7XG4gICAgfVxuICAgIGlmIChtYXRjaFsyXSAmJiAhL14oPyEuKj8oLikuKj9cXDEpW2dtaXhYc3VVQUpdKyQvLnRlc3QobWF0Y2hbM10pKSB7XG4gICAgICByZXR1cm4gbWFrZVJlZ2V4KGlucHV0LCAnaScpO1xuICAgIH1cbiAgICBsZXQgZmxhZ3MgPSBtYXRjaFsyXSA/PyAnJztcbiAgICBfLnB1bGwoZmxhZ3MsICdnJyk7XG4gICAgaWYgKGZsYWdzLmluZGV4T2YoJ2knKSA9PT0gLTEpIHtcbiAgICAgIGZsYWdzID0gZmxhZ3MgKyAnaSc7XG4gICAgfVxuICAgIHJldHVybiBtYWtlUmVnZXgobWF0Y2hbMV0sIGZsYWdzKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHV1aWR2NCgpOiBzdHJpbmcge1xuICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xuICAgIGNvbnN0IHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDA7XG4gICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrTWluaW11bVZlcnNpb24oZXhwZWN0ZWQ6IHN0cmluZywgdGl0bGU6IHN0cmluZykge1xuICBpZiAoY29tcGFyZShhd2FpdCBnZXRUYXZlcm5IZWxwZXJWZXJzaW9uKCksIGV4cGVjdGVkLCAnPCcpKSB7XG4gICAgdG9hc3RyLmVycm9yKGAnJHt0aXRsZX0nIOmcgOimgemFkummhuWKqeaJi+eJiOacrCA+PSAnJHtleHBlY3RlZH0nYCwgJ+eJiOacrOS4jeWFvOWuuScpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmV0dGlmeUVycm9yV2l0aElucHV0KGVycm9yOiB6LlpvZEVycm9yKSB7XG4gIHJldHVybiBfKFsuLi5lcnJvci5pc3N1ZXNdKVxuICAgIC5zb3J0QnkoaXNzdWUgPT4gaXNzdWUucGF0aD8ubGVuZ3RoID8/IDApXG4gICAgLmZsYXRNYXAoaXNzdWUgPT4ge1xuICAgICAgY29uc3QgbGluZXMgPSBbYOKcliAke2lzc3VlLm1lc3NhZ2V9YF07XG4gICAgICBpZiAoaXNzdWUucGF0aD8ubGVuZ3RoKSB7XG4gICAgICAgIGxpbmVzLnB1c2goYCAg4oaSIOi3r+W+hDogJHt0b0RvdFBhdGgoaXNzdWUucGF0aCl9YCk7XG4gICAgICB9XG4gICAgICBpZiAoaXNzdWUuaW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsaW5lcy5wdXNoKGAgIOKGkiDovpPlhaU6ICR7SlNPTi5zdHJpbmdpZnkoaXNzdWUuaW5wdXQpfWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxpbmVzO1xuICAgIH0pXG4gICAgLmpvaW4oJ1xcbicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGl0ZXJhbFlhbWxpZnkodmFsdWU6IGFueSkge1xuICByZXR1cm4gWUFNTC5zdHJpbmdpZnkodmFsdWUsIHsgYmxvY2tRdW90ZTogJ2xpdGVyYWwnIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTdHJpbmcoY29udGVudDogc3RyaW5nKTogYW55IHtcbiAgbGV0IHBhcnNlZDogdW5rbm93bjtcbiAgdHJ5IHtcbiAgICBwYXJzZWQgPSBZQU1MLnBhcnNlRG9jdW1lbnQoY29udGVudCwgeyBtZXJnZTogdHJ1ZSB9KS50b0pTKCk7XG4gIH0gY2F0Y2ggKHlhbWxfZXJyb3IpIHtcbiAgICB0cnkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC14L25vLW5hbWVkLWFzLWRlZmF1bHQtbWVtYmVyXG4gICAgICBwYXJzZWQgPSBKU09ONS5wYXJzZShjb250ZW50KTtcbiAgICB9IGNhdGNoIChqc29uNV9lcnJvcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcGFyc2VkID0gSlNPTi5wYXJzZShqc29ucmVwYWlyKGNvbnRlbnQpKTtcbiAgICAgIH0gY2F0Y2ggKGpzb25fZXJyb3IpIHtcbiAgICAgICAgY29uc3QgdG9FcnJvciA9IChlcnJvcjogdW5rbm93bikgPT4gKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBsaXRlcmFsWWFtbGlmeSh7XG4gICAgICAgICAgICBbJ+imgeino+aekOeahOWtl+espuS4suS4jeaYr+acieaViOeahCBZQU1ML0pTT04g5qC85byPJ106IHtcbiAgICAgICAgICAgICAg5a2X56ym5Liy5YaF5a65OiBjb250ZW50LFxuICAgICAgICAgICAgICBZQU1M6ZSZ6K+v5L+h5oGvOiB0b0Vycm9yKHlhbWxfZXJyb3IpLFxuICAgICAgICAgICAgICBKU09ONemUmeivr+S/oeaBrzogdG9FcnJvcihqc29uNV9lcnJvciksXG4gICAgICAgICAgICAgIOWwneivleS/ruWkjUpTT07ml7bnmoTplJnor6/kv6Hmga86IHRvRXJyb3IoanNvbl9lcnJvciksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0pLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcGFyc2VkO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tBbmRVcGRhdGVDaGFyYWN0ZXIobmFtZTogc3RyaW5nLCBsYXRlc3RfdmVyc2lvbjogc3RyaW5nLCBwbmdfdXJsOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgY3VycmVudF92ZXJzaW9uID0gKGF3YWl0IGdldENoYXJhY3RlcihuYW1lKSkudmVyc2lvbi50cmltKCkgfHwgJzAuMC4wJztcbiAgaWYgKGNvbXBhcmUoY3VycmVudF92ZXJzaW9uLCBsYXRlc3RfdmVyc2lvbiwgJz49JykpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgYXdhaXQgaW1wb3J0UmF3Q2hhcmFjdGVyKG5hbWUsIGF3YWl0IGZldGNoKHBuZ191cmwpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuYmxvYigpKSk7XG4gIHJlcGxhY2VDaGFyYWN0ZXIobmFtZSwgeyB2ZXJzaW9uOiBsYXRlc3RfdmVyc2lvbiB9KTtcbiAgdG9hc3RyLnN1Y2Nlc3MoXG4gICAgYOinkuiJsuWNoeW3suiHquWKqOabtOaWsOWIsCAnJHtsYXRlc3RfdmVyc2lvbi5zdGFydHNXaXRoKCd2JykgPyBsYXRlc3RfdmVyc2lvbiA6IGB2JHtsYXRlc3RfdmVyc2lvbn1gfSdgLFxuICAgIG5hbWUsXG4gICk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./util/common.ts\n\n}");
  },
  "./示例/角色卡示例/脚本/自动更新角色卡/index.ts"(__unused_webpack_module, __webpack_exports__, __webpack_require__) {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _util_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @util/common */ \"./util/common.ts\");\n\n$(async () => {\n    await (0,_util_common__WEBPACK_IMPORTED_MODULE_0__.checkAndUpdateCharacter)('呕吐内心的少女', await fetch('https://testingcf.jsdelivr.net/gh/StageDog/tavern_helper_template/dist/角色卡示例/index.yaml')\n        .then(response => response.text())\n        .then(text => _.get(YAML.parse(text), '版本', '0.0.0'))\n        .catch(() => '0.0.0'), 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_helper_template/dist/角色卡示例/角色卡示例.png');\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi/npLrkvosv6KeS6Imy5Y2h56S65L6LL+iEmuacrC/oh6rliqjmm7TmlrDop5LoibLljaEvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7QUFBdUQ7QUFFdkQsQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFFO0lBQ1gsTUFBTSxxRUFBdUIsQ0FDM0IsU0FBUyxFQUNULE1BQU0sS0FBSyxDQUFDLHlGQUF5RixDQUFDO1NBQ25HLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUNqQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1NBQ3BELEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFDdkIsd0ZBQXdGLENBQ3pGLENBQUM7QUFDSixDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS/npLrkvosv6KeS6Imy5Y2h56S65L6LL+iEmuacrC/oh6rliqjmm7TmlrDop5LoibLljaEvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY2hlY2tBbmRVcGRhdGVDaGFyYWN0ZXIgfSBmcm9tICdAdXRpbC9jb21tb24nO1xuXG4kKGFzeW5jICgpID0+IHtcbiAgYXdhaXQgY2hlY2tBbmRVcGRhdGVDaGFyYWN0ZXIoXG4gICAgJ+WRleWQkOWGheW/g+eahOWwkeWlsycsXG4gICAgYXdhaXQgZmV0Y2goJ2h0dHBzOi8vdGVzdGluZ2NmLmpzZGVsaXZyLm5ldC9naC9TdGFnZURvZy90YXZlcm5faGVscGVyX3RlbXBsYXRlL2Rpc3Qv6KeS6Imy5Y2h56S65L6LL2luZGV4LnlhbWwnKVxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UudGV4dCgpKVxuICAgICAgLnRoZW4odGV4dCA9PiBfLmdldChZQU1MLnBhcnNlKHRleHQpLCAn54mI5pysJywgJzAuMC4wJykpXG4gICAgICAuY2F0Y2goKCkgPT4gJzAuMC4wJyksXG4gICAgJ2h0dHBzOi8vdGVzdGluZ2NmLmpzZGVsaXZyLm5ldC9naC9TdGFnZURvZy90YXZlcm5faGVscGVyX3RlbXBsYXRlL2Rpc3Qv6KeS6Imy5Y2h56S65L6LL+inkuiJsuWNoeekuuS+iy5wbmcnLFxuICApO1xufSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./示例/角色卡示例/脚本/自动更新角色卡/index.ts\n\n}");
  },
  "compare-versions"(module) {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_compare_versions_esm_4fbc8a69__;
  },
  json5(module) {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_json5_esm_143ca249__;
  },
  jsonrepair(module) {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_jsonrepair_esm_703c329d__;
  },
  "zod/v4/core"(module) {
    module.exports = __WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_zod_v4_core_esm_e929c490__;
  }
};

var __webpack_module_cache__ = {};

function __webpack_require__(moduleId) {
  var cachedModule = __webpack_module_cache__[moduleId];
  if (cachedModule !== undefined) {
    return cachedModule.exports;
  }
  if (__webpack_modules__[moduleId] === undefined) {
    var e = new Error("Cannot find module '" + moduleId + "'");
    e.code = "MODULE_NOT_FOUND";
    throw e;
  }
  var module = __webpack_module_cache__[moduleId] = {
    exports: {}
  };
  __webpack_modules__[moduleId](module, module.exports, __webpack_require__);
  return module.exports;
}

(() => {
  __webpack_require__.d = (exports, definition) => {
    for (var key in definition) {
      if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
        Object.defineProperty(exports, key, {
          enumerable: true,
          get: definition[key]
        });
      }
    }
  };
})();

(() => {
  __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
})();

(() => {
  __webpack_require__.r = exports => {
    if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
      Object.defineProperty(exports, Symbol.toStringTag, {
        value: "Module"
      });
    }
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
  };
})();

var __webpack_exports__ = __webpack_require__("./示例/角色卡示例/脚本/自动更新角色卡/index.ts");
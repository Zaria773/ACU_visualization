{"version":3,"file":"index.js","mappings":"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4BAEb,CACE15B,GAAI,kBACJqjB,MAAO,KACPohB,WAAY,kBACZC,eAAgB,oBAChBhL,UAAW,4BAEb,CACE15B,GAAI,eACJqjB,MAAO,KACPohB,WAAY,kBACZC,eAAgB,qBAChBhL,UAAW,4BAEb,CACE15B,GAAI,eACJqjB,MAAO,KACPohB,WAAY,kBACZC,eAAgB,mBAChBhL,UAAW,4BAIb,CACE15B,GAAI,gBACJqjB,MAAO,KACPohB,WAAY,mBACZC,eAAgB,qBAChBhL,UAAW,4BAEb,CACE15B,GAAI,iBACJqjB,MAAO,KACPohB,WAAY,mBACZC,eAAgB,oBAChBhL,UAAW,4BAEb,CACE15B,GAAI,kBACJqjB,MAAO,KACPohB,WAAY,mBACZC,eAAgB,qBAChBhL,UAAW,4BAIb,CACE15B,GAAI,gBACJqjB,MAAO,KACPohB,WAAY,oBACZC,eAAgB,mBAChBC,cAAc,EACdjL,UAAW,4BAEb,CACE15B,GAAI,kBACJqjB,MAAO,KACPohB,WAAY,oBACZC,eAAgB,kBAChBhL,UAAW,4BAEb,CACE15B,GAAI,eACJqjB,MAAO,KACPohB,WAAY,oBACZC,eAAgB,qBAChBhL,UAAW,4BAEb,CACE15B,GAAI,gBACJqjB,MAAO,OACPohB,WAAY,oBACZC,eAAgB,uBAChBhL,UAAW,4BAIb,CACE15B,GAAI,eACJqjB,MAAO,KACPohB,WAAY,WACZC,eAAgB,kBAChBhL,UAAW,4BAEb,CACE15B,GAAI,iBACJqjB,MAAO,KACPohB,WAAY,WACZC,eAAgB,6BAChBhL,UAAW,4BAEb,CACE15B,GAAI,gBACJqjB,MAAO,KACPohB,WAAY,WACZC,eAAgB,kBAChBC,cAAc,EACdjL,UAAW,4BAEb,CACE15B,GAAI,gBACJqjB,MAAO,KACPohB,WAAY,WACZC,eAAgB,oBAChBhL,UAAW,4BAIb,CACE15B,GAAI,oBACJqjB,MAAO,KACPohB,WAAY,YACZC,eAAgB,qCAChBhL,UAAW,4BAEb,CACE15B,GAAI,iBACJqjB,MAAO,OACPohB,WAAY,YACZC,eAAgB,wBAChBhL,UAAW,4BAEb,CACE15B,GAAI,i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AGJ,CACEuzB,MAAO,IACPh0C,KAAM,WACN4M,MAAO,UACP6T,SAAU,CACR,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAGJ,CACEuzB,MAAO,IACPh0C,KAAM,OACN4M,MAAO,UACP6T,SAAU,CACR,KACA,KACA,KACA,KACA,KACA,KACA,MACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAGJ,CACEuzB,MAAO,IACPh0C,KAAM,OACN4M,MAAO,UACP6T,SAAU,CACR,IACA,IACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,KACA,KACA,QAMAwzB,EACG,IADHA,EAEE,QAFFA,EAGG,UAUT,SAASC,EAAYzlB,EAAcl1B,GACjC,OAAOA,EAAKknB,SAASxL,KAAK0iB,GAAMlJ,EAAKptB,SAASs2B,GAChD,CAqBO,SAASwc,EAAiBC,EAAuBC,GAEtD,MAAM3+B,EAAQ0+B,EACX1tB,MAAM,YACN/yB,IAAIgN,GAAKA,EAAE+P,QACX1L,OAAOrE,GAAKA,EAAE3M,OAAS,GAE1B,GAAqB,IAAjB0hB,EAAM1hB,OACR,MAAO,CACL4Y,MAAOmnC,EAAe7yC,KAAKuvB,GAAiB,MAAZA,EAAEujB,OAAgBpnC,MAClDonC,MAAO,IACPM,SAAU,OACVC,WAAW,GAKf,GAAIF,GAAqBA,EAAkBrgD,OAAS,EAClD,IAAK,MAAMJ,KAAQygD,EACjB,GAAIzgD,EAAK6sB,UAAY7sB,EAAK6sB,SAASzsB,OAAS,EAC1C,IAAK,MAAMy6B,KAAQ/Y,EACjB,GAAI9hB,EAAK6sB,SAASxL,KAAK0iB,GAAMlJ,EAAKptB,SAASs2B,IACzC,MAAO,CACL/qB,MAAOhZ,EAAKgZ,MACZonC,MAAO,IACPM,SAAU1gD,EAAK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A,MAAO,kBACPyQ,QAASqoD,GACV,IAAKhpD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,SAAU,QAEnC,wBAAoB,SAAU,CAC1BA,MAAO,eACPyQ,QAASmhD,GACV,IAAK9hD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,IAC3D,qBAAiB,OAAQ,UAGtC,MAwGP,wBAAoB,YACpB,iBAAa,aAAa,CAAE59C,KAAM,gBAAkB,CAChDy9C,SAAS,aAAS,IAAM,CACnBm4D,EAAkB,QACZ,kBAAc,wBAAoB,MAAOL,GAAa,EACrD,iBAAavF,GAAU,CACnB76G,KAAMihH,EAA0Bl5G,MAChC,aAAcohD,EAAQh1C,UACtB,WAAYg1C,EAAQ3pC,QACpB,YAAa,OACb,eAAe,EACf,cAAc,EACd,uBAAuB,EACvB,kBAAmBohG,EAAsB74G,OAC1C,KAAM,EAAe,CAAC,OAAQ,aAAc,WAAY,wBAE7D,wBAAoB,QAAQ,KAEtC4tB,EAAG,KAER,IACJ,OAEL,wBAAoB,QAAQ,EAE1C,ICjwBJ,GAFoB,GCAPusF,GAAa,CACxB,KACA,MACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,IACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,QACA,QACA,QACA,QACA,KACA,QACA,QACA,QACA,QACA,QACA,QACA,KACA,KACA,KACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,KACA,QACA,QACA,MACA,SACA,SACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,KACA,KACA,QACA,QACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,KACA,MACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,QACA,QACA,KACA,MACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MAIWC,GAAW,CACtB,cACA,cACA,eACA,eACA,cACA,cACA,eACA,eACA,cACA,eACA,aACA,cACA,gBACA,kBACA,kBACA,cACA,cACA,kBACA,kBACA,eACA,eACA,gBACA,eACA,eACA,eACA,eACA,oBACA,oBACA,cACA,kBACA,kBACA,gBACA,gBACA,qBACA,qBACA,cACA,cACA,kBACA,kBACA,kBACA,gBACA,eACA,iBACA,iBACA,kBACA,kBACA,oBACA,qBACA,aACA,cACA,cACA,eACA,mBACA,cACA,cACA,eACA,mBACA,eACA,iBACA,cACA,iBACA,iBACA,YACA,iBACA,cACA,oBACA,oBACA,qBACA,oBACA,kBACA,oBACA,uBACA,sBACA,oBACA,sBACA,qBACA,oBACA,kBACA,oBACA,qBACA,oBACA,kBACA,oBACA,cACA,eACA,cACA,iBACA,kBACA,sBACA,uBACA,sBACA,uBACA,qBACA,yBACA,4BACA,8BACA,cACA,gBACA,aACA,oBACA,aACA,cACA,kBACA,kBACA,gBACA,uBACA,cACA,gBACA,sBACA,mBACA,iBACA,gBACA,oBACA,oBACA,iBACA,kBACA,eACA,eACA,cACA,eACA,sBACA,mBACA,mBACA,eACA,eACA,aACA,aACA,cACA,gBACA,eACA,qBACA,wBACA,aACA,aACA,wBACA,iBACA,iBACA,eACA,wBACA,cACA,cACA,eACA,aACA,aACA,eACA,iBACA,iBACA,iBACA,oBACA,uBACA,sBACA,qBACA,qBACA,yBACA,aACA,cACA,oBACA,eACA,sBACA,mBACA,oBACA,oBACA,oBACA,qBACA,qBACA,iBACA,iBACA,sBACA,sBACA,sBACA,sBACA,eACA,eACA,eACA,eACA,aACA,aACA,oBACA,oBACA,mBACA,mBACA,qBACA,qBACA,aACA,aACA,cACA,cACA,mBACA,oBACA,kBACA,mBACA,mBACA,cACA,eACA,cACA,kBACA,cACA,aACA,aACA,aACA,cACA,gBACA,iBACA,sBCnkBI,GAAa,CAAE15D,MAAO,mCACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,iBACtB,GAAa,CAAEA,MAAO,uBACtB,GAAa,CAAEA,MAAO,4BACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,2BACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,iBAEL,GAAc,CAAC,QAAS,WACxB,GAAc,CAAE37C,IAAK,GACrB,GAAc,CAChBA,IAAK,EACL27C,MAAO,gBAEL,GAAc,CAAEA,MAAO,yBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAE37C,IAAK,GClB3B,IDqB6B,qBAAiB,CAC1Ci8C,OAAQ,mBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjBgrB,YAAa,CAAEoX,QAAS,KAE5BW,MAAO,CAAC,iBAAkB,SAAU,SACpC,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EAERG,EAAOC,EAEPtoD,GAAY,IAAAkF,KAAI,SAChBmmC,GAAa,IAAAnmC,KAAI,IACjBi8G,GAAc,IAAAj8G,KAAI,IAgBxB,SAASqqG,EAAclvF,GACnB,OAAOA,EAAK3P,WAAW,OAAS2P,EAAKpV,SAAS,OAClD,EAhBA,IAAAwY,OAAM,IAAMqoB,EAAMluB,QAASA,IACnBA,IACAujG,EAAYr6G,MAAQglC,EAAMmE,YAC1B5E,EAAWvkC,MAAQ,GAEfglC,EAAMmE,aAAes/D,EAAczjE,EAAMmE,aACzCjwC,EAAU8G,MAAQ,KAGlB9G,EAAU8G,MAAQ,WAS9B,MAAMs6G,GAAgB,IAAAzsG,UAAS,KAC3B,MAAMk+B,EAAOxH,EAAWvkC,MAAMoF,cAAcoO,OACtCld,EAA2B,UAApB4C,EAAU8G,MAAoBm6G,GAAaC,GACxD,OAAKruE,EAEEz1C,EAAKwR,OAAOyR,GAAQA,EAAKnU,cAAcjB,SAAS4nC,IAD5Cz1C,IAIf,SAASg8G,IACL/wD,EAAK,kBAAkB,GACvBA,EAAK,QACT,CACA,SAASg5D,EAAahhG,GAClBgoC,EAAK,SAAUhoC,GACf+4F,GACJ,CACA,SAASkI,IAET,CACA,SAASC,IACL,MAAMlhG,EAAO8gG,EAAYr6G,MAAMwT,OAC3B+F,GACAghG,EAAahhG,EAErB,CACA,MAAO,CAACg3C,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,uCACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,QAAS,KAC7F,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,WAGX,wBAAoB,eACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,CACvB5xD,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAA4B,UAApBh4D,EAAU8G,SAC5DmxD,QAASX,EAAO,KAAOA,EAAO,GAAMK,GAAY33D,EAAU8G,MAAQ,UACnE,aAAc,IACjB,wBAAoB,MAAO,CACvB0gD,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAA4B,OAApBh4D,EAAU8G,SAC5DmxD,QAASX,EAAO,KAAOA,EAAO,GAAMK,GAAY33D,EAAU8G,MAAQ,OACnE,cAAe,MAEtB,wBAAoB,UACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,CACnCwwD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,KACtF,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAa7wD,MAAQ6wD,GACnFx0D,KAAM,OACNy0D,YAAa,UACb6yC,QAAS6W,GACV,KAAM,KAAuC,CAC5C,CAAC,aAAaj2E,EAAWvkC,cAIrC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,CAClCs6G,EAAct6G,MAAMlJ,OAAS,IACvB,kBAAc,wBAAoB,MAAO,GAAY,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYwjH,EAAct6G,MAAQuZ,KAC9E,kBAAc,wBAAoB,MAAO,CAC7CxU,IAAKwU,EACLmnC,OAAO,oBAAgB,CAAC,gBAAiB,CAAEg6D,SAAUt5D,EAAQjY,cAAgB5vB,KAC7E+J,MAAO/J,EACP43C,SAAS,mBAAgBN,GAAY0pD,EAAahhG,GAAQ,CAAC,UAC5D,CACsB,OAApBrgB,EAAU8G,QACJ,kBAAc,wBAAoB,IAAK,CACtC+E,IAAK,EACL27C,OAAO,oBAAgBnnC,IACxB,KAAM,MACN,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiBA,GAAO,KACvF,GAAuB,MAC1B,WAEL,kBAAc,wBAAoB,MAAO,GAAa,IAAKi3C,EAAO,KAAOA,EAAO,GAAK,EAChF,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,IAC5D,wBAAoB,OAAQ,KAAM,WAAY,WAG9D,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,oBAAsB,SAAU,KAC/F,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACnC+nD,EAAc4R,EAAYr6G,SACpB,kBAAc,wBAAoB,IAAK,CACtC+E,IAAK,EACL27C,OAAO,oBAAgB25D,EAAYr6G,QACpC,KAAM,MACN,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiBq6G,EAAYr6G,OAAQ,OAEvG,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBwwD,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAc7wD,MAAQ6wD,GACpFx0D,KAAM,OACNy0D,YAAa,sBACb6pD,SAAS,cAAUF,EAAqB,CAAC,WAC1C,KAAM,KAAuC,CAC5C,CAAC,aAAaJ,EAAYr6G,YAGlC,wBAAoB,SAAU,CAC1B0gD,MAAO,eACPyQ,SAAS,mBAAespD,EAAqB,CAAC,UAC/C,IAAKjqD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,iBAMjF,wBAAoB,QAAQ,EAE1C,IEzLE,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,qBACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,cAEL,GAAa,CACf37C,IAAK,EACL27C,MAAO,eAEL,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAC,YCRpB,IDW6B,qBAAiB,CAC1CM,OAAQ,mBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjBy8F,iBAAkB,CAAEr6D,QAAS,IAC7B7Y,SAAU,CAAE6Y,QAAS,MAEzBW,MAAO,CAAC,iBAAkB,WAC1B,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EACRG,EAAOC,EACPszD,GAAY,IAAA12G,OACZmzD,GAAW,IAAAnzD,OACXkqB,GAAa,IAAAlqB,KAAI,MAEjBy8G,GAAe,IAAAhtG,UAAS,KAC1B,GAAyB,OAArBya,EAAWtoB,YAAuC1I,IAArBgxB,EAAWtoB,MACxC,OAAO,EACX,MAAMkS,EAAQoW,EAAWtoB,MAEzB,OAAOqL,OAAOyvG,UAAU5oG,IAAoB,IAAVA,IAGhC6oG,GAAkB,IAAAltG,UAAS,IACJ,OAArBya,EAAWtoB,YAAuC1I,IAArBgxB,EAAWtoB,MACjC,GACc,IAArBsoB,EAAWtoB,MACJ,YACNqL,OAAOyvG,UAAUxyF,EAAWtoB,OAE7BiS,KAAKmxE,IAAI96D,EAAWtoB,OAASglC,EAAM0C,SAC5B,cAAc1C,EAAM0C,YAExB,GAJI,UAOf,IAAA/qB,OAAM,IAAMqoB,EAAMluB,QAASA,IACnBA,IACAwR,EAAWtoB,MAAQ,MACnB,IAAAs+D,UAAS,KACL/M,EAASvxD,OAAOmqD,cAK5B,UAAe2qD,EAAW,KACtBkG,MAGJ,MAAM3F,EAAgB,KACdwF,EAAa76G,OAA8B,OAArBsoB,EAAWtoB,QACjCuhD,EAAK,UAAWj5B,EAAWtoB,OAC3BuhD,EAAK,kBAAkB,KAIzBy5D,EAAe,KACjBz5D,EAAK,kBAAkB,IAE3B,MAAO,CAACgP,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,uCACPyQ,SAAS,mBAAe6pD,EAAc,CAAC,UACxC,EACC,wBAAoB,MAAO,CACvBtqD,QAAS,YACTtyD,IAAK02G,EACLp0D,MAAO,mCACR,EACC,wBAAoB,SACpB,wBAAoB,MAAO,CAAEA,MAAO,oBAAsB,CACtD8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,KAAM,KAAM,EACtD,wBAAoB,IAAK,CAAE9P,MAAO,wBAClC,qBAAiB,cACjB,KACJ,wBAAoB,SAAU,CAC1BA,MAAO,kBACPyQ,QAAS6pD,GACV,IAAKxqD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,UAGvE,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,cAAgB,0CAA2C,KACvH,qBAAgB,wBAAoB,QAAS,CACzCgQ,QAAS,WACTtyD,IAAKmzD,EACL,sBAAuBf,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAa7wD,MAAQ6wD,GACnFx0D,KAAM,SACNqkD,MAAO,cACPoQ,YAAa,aACbmB,UAAW,EACP,cAAUojD,EAAe,CAAC,WAC1B,cAAU2F,EAAc,CAAC,aAE9B,KAAM,KAAuC,CAC5C,CACI,aACA1yF,EAAWtoB,WACN,EACL,CAAEm8D,QAAQ,MAGjB/a,EAAwB,mBAClB,kBAAc,wBAAoB,MAAO,GAAY,CACpDoP,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,KAC3F,wBAAoB,OAAQ,KAAM,cAAe,qBAAiBU,EAAQw5D,kBAAmB,OAE/F,wBAAoB,QAAQ,GACjCG,EAAqB,QACf,kBAAc,wBAAoB,MAAO,GAAY,CACpDvqD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,6BAA+B,MAAO,KAClG,wBAAoB,OAAQ,MAAM,qBAAiBq6D,EAAgB/6G,OAAQ,OAE7E,wBAAoB,QAAQ,QAG1C,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1B0gD,MAAO,0BACPyQ,QAAS6pD,GACV,OACH,wBAAoB,SAAU,CAC1Bt6D,MAAO,wBACPgf,UAAWm7C,EAAa76G,MACxBmxD,QAASkkD,GACV,IAAK7kD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,YAAa,MAC5B,EAAe,OAE9B,SAEL,wBAAoB,QAAQ,EAE1C,IE1JE,GAAa,CAAEA,MAAO,kBACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,qBAEL,GAAa,CAAEA,MAAO,qBACtB,GAAa,CAAEA,MAAO,mBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,2CACtB,GAAa,CAAC,SACd,GAAa,CAAEA,MAAO,oBACtB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAC,SACf,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,6CACvB,GAAc,CAAEA,MAAO,0BACvB,GAAc,CAAEA,MAAO,6BACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,cACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,oBAEL,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,cACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,wBAEL,GAAc,CAAEA,MAAO,oCACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,mBAEL,GAAc,CAAEA,MAAO,2BACvB,GAAc,CAAC,YACf,GAAc,CAChB37C,IAAK,EACL27C,MAAO,0BAEL,GAAc,CAChB37C,IAAK,EACL27C,MAAO,wBAYX,IAA6B,qBAAiB,CAC1CM,OAAQ,qBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,UAErB+iC,MAAO,CAAC,kBACR,KAAAC,CAAMC,GAAWG,KAAMC,IAYnB,MAAMxc,EAAQoc,EACRG,EAAOC,EAIPszD,GAAY,IAAA12G,OACZwS,GAAY,IAAAxS,MAAI,GAChB68G,GAAa,IAAA78G,MAAI,GAEjBqyE,GAAgB,IAAApyE,UAAS,CAC3B4yE,yBAAqB35E,EACrB85E,yBAAqB95E,EACrB45E,qBAAiB55E,EACjB65E,sBAAkB75E,IAGhB4jH,GAAmB,IAAA98G,KAAI,IACvBi4E,GAAkB,IAAAj4E,KAAI,IAEtBqjD,GAAU,EAAA5d,EAAA,MAEVs3E,GAAqB,IAAA/8G,MAAI,GACzBg9G,GAAqB,IAAAh9G,MAAI,GAEzBixG,GAAkB,IAAAjxG,KAAI,IACtBi9G,GAAqB,IAAAj9G,KAAI,IACzBk9G,GAAwB,IAAAl9G,MAAI,GAE5Bm9G,GAAmB,IAAAn9G,KAAI,IACvBo9G,GAA4B,IAAAp9G,KAAI,KAIhC,SAAEm3C,EAAQ,aAAEi7B,EAAY,aAAEN,EAAY,oBAAEI,EAAmB,aAAEK,EAAY,kBAAEE,GAAsBZ,IACjGqI,EAAiBzB,KACjBwB,GAAY,EAAA/xD,EAAA,KAKZrsB,GAAU,IAAA4T,UAAS,IAAMyqE,EAAer+E,QAAQ+F,OAEhDgnB,GAAqB,IAAAnZ,UAAS,IAAMwqE,EAAUrxD,oBAE9Cy0F,GAAmB,IAAA5tG,UAAS,IAAMwqE,EAAUrpD,uBAiB5C0sF,IAfgB,IAAA7tG,UAAS,IACU,IAAjCwhG,EAAgBrvG,MAAMlJ,QAEnBukH,EAAmBr7G,MAAMlJ,SAAWu4G,EAAgBrvG,MAAMlJ,SAGvC,IAAA+W,UAAS,KACnC,MAAM8tG,EAAgBtM,EAAgBrvG,MAAM8H,OAAOyrB,GAAKA,EAAEq9C,oBAC1D,OAA6B,IAAzB+qC,EAAc7kH,SAEdukH,EAAmBr7G,MAAMlJ,SAAW6kH,EAAc7kH,QAE/C6kH,EAAchuF,MAAM4F,GAAK8nF,EAAmBr7G,MAAMmE,SAASovB,EAAEzwB,WAGhD,IAAA+K,UAAS,IACtB0tG,EAAiBv7G,MAAMvJ,IAAIyyG,IAAU,CACxCnkG,IAAKmkG,EACL1vF,MAAO0vF,OAIT2M,GAAiB,IAAAhoG,UAAS,IACrBwhG,EAAgBrvG,MAAMvJ,IAAIu6B,IAAS,CACtCjsB,IAAKisB,EAAMluB,KACX0W,MAAOwX,EAAMluB,KACb2xG,MAAOzjF,EAAM4/C,mBAAqB,SAAMt5E,OAInB,IAAAuW,UAAS,IACI,IAAlC0tG,EAAiBv7G,MAAMlJ,QAEpB0kH,EAA0Bx7G,MAAMlJ,SAAWykH,EAAiBv7G,MAAMlJ,QAuD7E,SAASw7G,IACL/wD,EAAK,kBAAkB,EAC3B,CAIA9iD,eAAem9G,EAAoB72G,EAAK/E,GACpC,QAAc1I,IAAV0I,IAAuBwsB,MAAMxsB,GAEjC,UACUkwE,EAAa,CAAE,CAACnrE,GAAM/E,IAC5BhB,QAAQe,KAAK,aAAagF,UAAa/E,EAC3C,CACA,MAAOf,GACHD,QAAQC,MAAM,eAAe8F,QAAW9F,GACxC,EAAAsY,MAAMtY,MAAM,SAChB,CACJ,CAIAR,eAAeo9G,IACX,IAAKX,EAAiBl7G,MAClB,OACJ,MAAM4vB,EAAS31B,EAAQ+F,MAAMgE,KAAM0xB,GAAMA,EAAEv/B,KAAO+kH,EAAiBl7G,OAC/D4vB,IAEAvwB,OAAOC,OAAOmxE,EAAe7gD,EAAO2lB,UAEpC8lE,EAAmBr7G,MAAQ4vB,EAAOqmD,YAAYF,oBAAsB,SAE9D7F,EAAatgD,EAAO2lB,UAC1B+iC,EAAeb,gBAAgByjC,EAAiBl7G,OAChD,EAAAuX,MAAM7W,QAAQ,WAEtB,CAIA,SAASo7G,IACLxjC,EAAeZ,iBAAiBrB,EAAgBr2E,OAAS,MACzD,EAAAuX,MAAMxX,KAAKs2E,EAAgBr2E,MAAQ,YAAc,UACrD,CAIA,SAAS+7G,IACL,MAAMxzE,EAAe,CACjB,UAAUkoC,EAAcQ,sBACxB,WAAWR,EAAcW,wBACzB,SAASX,EAAcS,kBACvB,SAAST,EAAcU,mBACvB,SAASkqC,EAAmBr7G,MAAMlJ,OAASukH,EAAmBr7G,MAAMjJ,KAAK,MAAQ,UAErF0qD,EAAQzP,qBAAqB,CACzB1J,WAAY,gBACZC,eACAC,YAAa,GACbwzE,eAAiBl5G,GAAmD,OAA1Cw1E,EAAejB,iBAAiBv0E,IAC3D,CACCmvC,OAASnvC,IACL,MAAM,OAAE8sB,EAAM,MAAE4nD,GAAUc,EAAef,qBAAqBz0E,EAAM,CAChEmuE,oBAAqBR,EAAcQ,oBACnCC,gBAAiBT,EAAcS,gBAC/BC,iBAAkBV,EAAcU,iBAChCC,oBAAqBX,EAAcW,qBACpC,CACCp2E,QAASmgH,EAAmBn7G,MAC5B41E,aAAa,EACbC,YAAY,EACZC,aAAc,CAAC,MAAO,OACtBC,mBAAoBslC,EAAmBr7G,MACvCoT,kBAAmBooG,EAA0Bx7G,QAE7Cw3E,EACA,EAAAjgE,MAAM7W,QAAQ,MAAMoC,SAGpB,EAAAyU,MAAM7W,QAAQ,MAAMoC,WAIpC,CAIA,SAASm5G,IACL,IAAKf,EAAiBl7G,MAClB,OACJ,MAAMmrD,EAAW+vD,EAAiBl7G,MAC5B4vB,EAAS31B,EAAQ+F,MAAMgE,KAAM0xB,GAAMA,EAAEv/B,KAAOg1D,GAC7Cv7B,GAEDmzE,QAAQ,UAAUnzE,EAAO9sB,aACzBw1E,EAAe1iD,aAAaslF,EAAiBl7G,OAC7Ck7G,EAAiBl7G,MAAQ,GACzB,EAAAuX,MAAM7W,QAAQ,SAEtB,CAIA,SAASw7G,IAEL5jC,EAAeP,qBAAqBojC,EAAmBn7G,OAEnDk7G,EAAiBl7G,OACjBs4E,EAAe/2C,aAAa25E,EAAiBl7G,MAAO,CAChDi2E,YAAa,CACTj7E,QAASmgH,EAAmBn7G,MAC5B41E,aAAa,EACbC,YAAY,EACZC,aAAc,CAAC,MAAO,OACtBC,mBAAoBslC,EAAmBr7G,MACvCoT,kBAAmBooG,EAA0Bx7G,SAKpDm7G,EAAmBn7G,QACpBo7G,EAAmBp7G,OAAQ,EAC3Bs4E,EAAeZ,iBAAiB,MAEhCW,EAAUppD,uBAElB,CAIA,SAASktF,IAGL,GADA7jC,EAAeN,qBAAqBojC,EAAmBp7G,OACnDo7G,EAAmBp7G,MAEnB,IAAKq2E,EAAgBr2E,OAAS/F,EAAQ+F,MAAMlJ,OAAS,EAEjDu/E,EAAgBr2E,MAAQ/F,EAAQ+F,MAAM,GAAG7J,GACzCmiF,EAAeZ,iBAAiBrB,EAAgBr2E,OAChD,EAAAuX,MAAMxX,KAAK,WAAW9F,EAAQ+F,MAAM,GAAG8C,mBAEtC,IAA6B,IAAzB7I,EAAQ+F,MAAMlJ,OAInB,OAHA,EAAAygB,MAAMF,QAAQ,mBACd+jG,EAAmBp7G,OAAQ,OAC3Bs4E,EAAeN,sBAAqB,GAIpCM,EAAeZ,iBAAiBrB,EAAgBr2E,MACpD,MAIAs4E,EAAeZ,iBAAiB,MAChCrB,EAAgBr2E,MAAQ,EAEhC,CAiBA,SAASo8G,EAA2BC,GAE5BnB,EAAiBl7G,OACjBs4E,EAAe/2C,aAAa25E,EAAiBl7G,MAAO,CAChDi2E,YAAa,CACTj7E,QAASmgH,EAAmBn7G,MAC5B41E,aAAa,EACbC,YAAY,EACZC,aAAc,CAAC,MAAO,OACtBC,mBAAoBsmC,EACpBjpG,kBAAmBooG,EAA0Bx7G,QAI7D,CA2FA,SAASs8G,IACDpB,EAAiBl7G,OACjBs4E,EAAe/2C,aAAa25E,EAAiBl7G,MAAO,CAChDi2E,YAAa,CACTj7E,QAASmgH,EAAmBn7G,MAC5B41E,aAAa,EACbC,YAAY,EACZC,aAAc,CAAC,MAAO,OACtBC,mBAAoBslC,EAAmBr7G,MACvCoT,kBAAmBooG,EAA0Bx7G,QAI7D,CAIAvB,eAAe89G,IACX,IAAItB,EAAWj7G,MAAf,CAEAi7G,EAAWj7G,OAAQ,EACnB,IAEI,MAAM8B,QAAe+uE,EAAkB,CACnCI,oBAAqBR,EAAcQ,oBACnCC,gBAAiBT,EAAcS,gBAC/BC,iBAAkBV,EAAcU,iBAChCC,oBAAqBX,EAAcW,qBACpCiqC,EAAmBr7G,OAClB8B,EAAOpB,QACP,EAAA6W,MAAM7W,QAAQ,aAGd,EAAA6W,MAAMF,QAAQ,OAASvV,EAAOnB,SAAW,gBAEjD,CACA,MAAO1B,GACHD,QAAQC,MAAM,kBAAmBA,GACjC,EAAAsY,MAAMtY,MAAM,WAChB,CACA,QACIg8G,EAAWj7G,OAAQ,CACvB,CAvBU,CAwBd,CACA,OAlXA,IAAA2c,OAAM,IAAMqoB,EAAMluB,QAASrY,MAAOqY,IAC9B,GAAIA,EAAS,CACTlG,EAAU5Q,OAAQ,EAClB,UACUwwE,IAENnxE,OAAOC,OAAOmxE,EAAe,CACzBQ,oBAAqB17B,EAASv1C,MAAMixE,oBACpCG,oBAAqB77B,EAASv1C,MAAMoxE,oBACpCF,gBAAiB37B,EAASv1C,MAAMkxE,gBAChCC,iBAAkB57B,EAASv1C,MAAMmxE,mBAGrCmH,EAAetB,cACf,MAAMwlC,EAAYlkC,EAAexB,cAAc92E,OAAO7J,GACtDkgF,EAAgBr2E,MAAQw8G,GAAa,GAErCrB,EAAmBn7G,MAAQs4E,EAAehC,yBAAyBt2E,MACnEo7G,EAAmBp7G,MAAQs4E,EAAe/B,yBAAyBv2E,MAEnE,MAAM+gC,EAAeu3C,EAAev3C,aAAa/gC,MAC7C+gC,IACAs6E,EAAmBr7G,MAAQ+gC,EAAak1C,YAAYF,oBAAsB,GAC1EylC,EAA0Bx7G,MAAQ+gC,EAAak1C,YAAY7iE,mBAAqB,IAGpFi8F,EAAgBrvG,MAAQ2wE,IAyOpC,WACI,MAAMgrC,EAAgBtM,EAAgBrvG,MAAM8H,OAAOyrB,GAAKA,EAAEq9C,oBAC1D,GAA6B,IAAzB+qC,EAAc7kH,OAEd,YADAykH,EAAiBv7G,MAAQ,IAG7B,IACI,MAAM2E,EAAMjB,OAAOC,QAAQiB,oBAAsBlB,OAAOkB,mBACxD,IAAKD,GAAKE,kBAEN,YADA02G,EAAiBv7G,MAAQ,IAG7B,MAAM/H,EAAO0M,EAAIE,oBACX43G,EAAa,IAAI3qG,IACvB,IAAK,MAAMkf,KAAS2qF,EAAe,CAC/B,MAAM32G,EAAQ/M,EAAK+4B,EAAMjsB,KACrBC,GAAOrO,UAAU,IACjBqO,EAAMrO,QAAQ,GAAGiQ,QAAS0H,IACtB,MAAMuG,EAAahJ,OAAOyC,GAAGkF,OACzBqB,GACA4nG,EAAWzsG,IAAI6E,IAG/B,CACA0mG,EAAiBv7G,MAAQ4I,MAAMC,KAAK4zG,EACxC,CACA,MAAO19G,GACHC,QAAQc,KAAK,iBAAkBf,GAC/Bw8G,EAAiBv7G,MAAQ,EAC7B,CACJ,CArQY08G,EACJ,CACA,MAAOz9G,GACHD,QAAQC,MAAM,gBAAiBA,GAC/B,EAAAsY,MAAMtY,MAAM,SAChB,CACA,QACI2R,EAAU5Q,OAAQ,CACtB,CACJ,GACD,CAAE63B,WAAW,KAEhB,UAAei9E,EAAW,KACtBxC,MAyUG,CAAC/hD,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,uCACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,CACvB5hD,QAAS,YACTtyD,IAAK02G,EACLp0D,MAAO,qCACR,EACC,wBAAoB,SACpB,wBAAoB,MAAO,CAAEA,MAAO,oBAAsB,EACtD,wBAAoB,WACpB,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,QAASmhD,GACV,IAAK9hD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,qBAAuB,MAAO,OAExE8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,UAAW,KACjG,wBAAoB,cACpB,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,QAASmhD,GACV,SAEP,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,UACnB1hG,EAAe,QACT,kBAAc,wBAAoB,MAAO,GAAY,IAAK4/C,EAAO,MAAQA,EAAO,IAAM,EACjF,wBAAoB,IAAK,CAAE9P,MAAO,0BAA4B,MAAO,IACrE,wBAAoB,OAAQ,KAAM,YAAa,UAEpD,kBAAc,wBAAoB,WAAW,CAAE37C,IAAK,GAAK,EACxD,wBAAoB,UACpB,wBAAoB,cACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,cACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,CACnCyrD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,qBAClC,qBAAiB,YACjB,KACJ,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,eAC/C,KACJ,wBAAoB,MAAO,GAAY,EACnC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAmB7wD,MAAQ6wD,GACzFnQ,MAAO,oBACP2tD,SAAUwN,GACX,CACCrrD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,SAAU,CAAExwD,MAAO,IAAM,cAAe,MACvF,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY/F,EAAQ+F,MAAQ4vB,KACxE,kBAAc,wBAAoB,SAAU,CAChD7qB,IAAK6qB,EAAOz5B,GACZ6J,MAAO4vB,EAAOz5B,KACf,qBAAiBy5B,EAAO9sB,MAAO,EAAqB,MACvD,OACL,KAAuC,CACtC,CAAC,eAAeo4G,EAAiBl7G,UAErC,wBAAoB,SAAU,CAC1B0gD,MAAO,eACPp9B,MAAO,SACP6tC,QAAS4qD,GACV,IAAKvrD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,OAEjEw6D,EAAsB,QAChB,kBAAc,wBAAoB,SAAU,CAC3Cn2G,IAAK,EACL27C,MAAO,8BACPp9B,MAAO,OACP6tC,QAAS8qD,GACV,IAAKzrD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,SAEjE,wBAAoB,QAAQ,QAG1C,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,cACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,mBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAkB7wD,MAAQ6wD,GACxFnQ,MAAO,oBACP2tD,SAAUyN,GACX,CACCtrD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,SAAU,CAAExwD,MAAO,IAAM,YAAa,MACrF,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY/F,EAAQ+F,MAAQ4vB,KACxE,kBAAc,wBAAoB,SAAU,CAChD7qB,IAAK6qB,EAAOz5B,GACZ6J,MAAO4vB,EAAOz5B,KACf,qBAAiBy5B,EAAO9sB,MAAO,EAAqB,MACvD,OACL,KAAuC,CACtC,CAAC,eAAeuzE,EAAgBr2E,gBAKhD,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,CACpCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,sBAClC,qBAAiB,cACjB,KACJ,wBAAoB,gBACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,gBACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,oBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAa4f,EAAiC,oBAAI5f,GACpGx0D,KAAM,SACNqkD,MAAO,mBACPhoC,IAAK,IACL+I,IAAK,MACL4sF,SAAU79C,EAAO,KAAOA,EAAO,GAAMK,GAAY+qD,EAAoB,sBAAuBnrC,EAAcQ,uBAC3G,KAAM,KAAuC,CAC5C,CACI,aACAR,EAAcQ,yBACT,EACL,CAAE9U,QAAQ,WAK1B,wBAAoB,gBACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,gBACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,mBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAa4f,EAAiC,oBAAI5f,GACpGx0D,KAAM,SACNqkD,MAAO,mBACPhoC,IAAK,IACL+I,IAAK,MACL4sF,SAAU79C,EAAO,KAAOA,EAAO,GAAMK,GAAY+qD,EAAoB,sBAAuBnrC,EAAcW,uBAC3G,KAAM,KAAuC,CAC5C,CACI,aACAX,EAAcW,yBACT,EACL,CAAEjV,QAAQ,WAK1B,wBAAoB,eACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,eACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,kBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAa4f,EAA6B,gBAAI5f,GAChGx0D,KAAM,SACNqkD,MAAO,mBACPhoC,IAAK,IACL+I,IAAK,KACL4sF,SAAU79C,EAAO,KAAOA,EAAO,GAAMK,GAAY+qD,EAAoB,kBAAmBnrC,EAAcS,mBACvG,KAAM,KAAuC,CAC5C,CACI,aACAT,EAAcS,qBACT,EACL,CAAE/U,QAAQ,WAK1B,wBAAoB,eACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,eACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,gBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAa4f,EAA8B,iBAAI5f,GACjGx0D,KAAM,SACNqkD,MAAO,mBACPhoC,IAAK,IACL+I,IAAK,KACL4sF,SAAU79C,EAAO,KAAOA,EAAO,GAAMK,GAAY+qD,EAAoB,mBAAoBnrC,EAAcU,oBACxG,KAAM,KAAuC,CAC5C,CACI,aACAV,EAAcU,sBACT,EACL,CAAEhV,QAAQ,aAM9B,wBAAoB,4BACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,CACvBzb,OAAO,oBAAgB,CAAC,qCAAsC,CAAE,cAAe46D,EAAsBt7G,SACrGmxD,QAASX,EAAO,MAAQA,EAAO,IAAOK,GAAYyqD,EAAsBt7G,OAASs7G,EAAsBt7G,QACxG,CACCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,IACvF8P,EAAO,MAAQA,EAAO,KAAM,qBAAiB,YAAa,KAC1D,wBAAoB,OAAQ,IAAa,qBAAiB8qD,EAAsBt7G,MAAQ,IAAM,KAAM,IACrG,IACH,qBAAgB,wBAAoB,MAAO,GAAa,EACpD,kBAAa,WAAOw1G,IAAa,CAC7B5kD,WAAYyqD,EAAmBr7G,MAC/B,sBAAuB,CACnBwwD,EAAO,MAAQA,EAAO,IAAOK,GAAY,EAAqB7wD,MAAQ6wD,GACtEurD,GAEJj2G,MAAO0vG,EAAe71G,MACtB,aAAc,SACd,kBAAmB,8BACnB,aAAc,UACf,KAAM,EAAe,CAAC,aAAc,WACxC,KAAuB,CACtB,CAAC,QAAQs7G,EAAsBt7G,YAGvC,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,CACpCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,kBAClC,qBAAiB,YACjB,KACJ,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,eACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,wBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,QAAS,GAAa,EACtC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,MAAQA,EAAO,IAAOK,GAAY,EAAqB7wD,MAAQ6wD,GAC7Fx0D,KAAM,WACNgyG,SAAU6N,GACX,KAAM,KAAuC,CAC5C,CAAC,iBAAiBf,EAAmBn7G,SAEzCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,UAAY,MAAO,WAIhG,wBAAoB,YACnBy6D,EAAwB,QAClB,kBAAc,wBAAoB,MAAO,GAAa,CACrD3qD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,iBACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,mBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,QAAS,GAAa,EACtC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,MAAQA,EAAO,IAAOK,GAAY,EAAqB7wD,MAAQ6wD,GAC7Fx0D,KAAM,WACNgyG,SAAU8N,GACX,KAAM,KAAuC,CAC5C,CAAC,iBAAiBf,EAAmBp7G,SAEzCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,UAAY,MAAO,YAI9F,wBAAoB,QAAQ,MAEtC,wBAAoB,0BACnBy6D,EAAwB,QAClB,kBAAc,wBAAoB,MAAO,GAAa,CACrD3qD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,oBAClC,qBAAiB,aACjB,KACJ,kBAAa,WAAO80D,IAAa,CAC7B5kD,WAAY4qD,EAA0Bx7G,MACtC,sBAAuB,CACnBwwD,EAAO,MAAQA,EAAO,IAAOK,GAAY,EAA4B7wD,MAAQ6wD,GAC7EyrD,GAEJn2G,MAAOu1G,EAAgB17G,MACvB,aAAc,qBACd,kBAAmB,4BACnB,aAAc,UACf,KAAM,EAAe,CAAC,aAAc,cAEzC,wBAAoB,QAAQ,MAEtC,wBAAoB,sBACpB,wBAAoB,MAAO,GAAa,EACpC,kBAAa,WAAOw1G,IAAa,CAC7B5kD,WAAYyqD,EAAmBr7G,MAC/B,sBAAuB,CACnBwwD,EAAO,MAAQA,EAAO,IAAOK,GAAY,EAAqB7wD,MAAQ6wD,GACtEurD,GAEJj2G,MAAO0vG,EAAe71G,MACtB,aAAc,SACd,kBAAmB,8BACnB,aAAc,UACf,KAAM,EAAe,CAAC,aAAc,eAG/C,wBAAoB,UACnBgnB,EAAwB,QAClB,kBAAc,wBAAoB,MAAO,GAAa,CACrDwpC,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,+BAAiC,MAAO,KACtG,wBAAoB,OAAQ,MAAM,qBAAiB+6D,EAAiBz7G,OAAQ,OAE9E,wBAAoB,QAAQ,IAClC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1B0gD,OAAO,oBAAgB,CAAC,iBAAkB,CAAE,cAAeu6D,EAAWj7G,SACtE0/D,SAAUu7C,EAAWj7G,MACrBmxD,QAASorD,GACV,CACEtB,EAAgB,QACV,kBAAc,wBAAoB,IAAK,OACvC,kBAAc,wBAAoB,IAAK,MAC9C,wBAAoB,OAAQ,MAAM,qBAAiBA,EAAWj7G,MAAQ,UAAY,YAAa,IAChG,GAAuB,OAE/B,QAEZ,MACH,wBAAoB,gCAEtB,wBAAoB,QAAQ,EAE1C,I,QCv3BJ,MAEA,IAFiC,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBCJjE,GAAa,CAAE0gD,MAAO,mCACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,sBAEL,GAAa,CACf37C,IAAK,EACL27C,MAAO,sBAEL,GAAa,CAAEA,MAAO,2BACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAC,YAEpB,IAA6B,qBAAiB,CAC1CM,OAAQ,mBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjBmqB,WAAY,CAAEiY,QAAS,iBACvBhY,aAAc,CAAEgY,QAAS,IAAM,IAC/B/X,YAAa,CAAE+X,QAAS,IACxBy7D,eAAgB,CAAE3/G,KAAMsgH,SAAUp8D,QAAS,KAAM,IAErDW,MAAO,CAAC,iBAAkB,QAC1B,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EACRG,EAAOC,EAIP+P,GAAW,IAAAnzD,KAAI,MACfq5G,GAAa,IAAAr5G,KAAI,IAKjBw+G,GAAU,IAAA/uG,UAAS,IAAM4pG,EAAWz3G,MAAMwT,OAAO1c,OAAS,GAE1D+lH,GAAc,IAAAhvG,UAAS,KACzB,MAAM/K,EAAO20G,EAAWz3G,MAAMwT,OAC9B,QAAK1Q,IAEEkiC,EAAMg3E,iBAAiBl5G,KAAS,KAkB3C,SAASwvG,IACL/wD,EAAK,kBAAkB,EAC3B,CACA,SAASk0C,IACL,MAAM3yF,EAAO20G,EAAWz3G,MAAMwT,OACzB1Q,IAELy+C,EAAK,OAAQz+C,GACby+C,EAAK,kBAAkB,GAC3B,CACA,OAtBA,IAAA5kC,OAAM,IAAMqoB,EAAMluB,QAASA,IACnBA,IACA2gG,EAAWz3G,MAAQglC,EAAMwD,aAAe,IAExC,IAAA81B,UAAS,KACL/M,EAASvxD,OAAOmqD,YAGzB,CAAEtyB,WAAW,IAcT,CAAC04B,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,uCACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,SAAU,KAC9F,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,SAEP,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,EACnC,qBAAgB,wBAAoB,QAAS,CACzC5hD,QAAS,WACTtyD,IAAKmzD,EACL,sBAAuBf,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAa7wD,MAAQ6wD,GACnFx0D,KAAM,OACNqkD,MAAO,qBACPoQ,YAAa,SACb6pD,SAAS,cAAUllB,EAAY,CAAC,WACjC,KAAM,KAAuC,CAC5C,CAAC,aAAagiB,EAAWz3G,YAGjC,wBAAoB,UACnB68G,EAAiB,QACX,kBAAc,wBAAoB,MAAO,GAAY,IAAKrsD,EAAO,KAAOA,EAAO,GAAK,EAC/E,wBAAoB,IAAK,CAAE9P,MAAO,6BAA+B,MAAO,IACxE,qBAAiB,uBAAwB,SAE/C,wBAAoB,QAAQ,IAClC,wBAAoB,YACnBU,EAAQ7Y,aAAazxC,OAAS,IACxB,kBAAc,wBAAoB,MAAO,GAAY,CACpD05D,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,4BAA8B,YAAa,KACzG,wBAAoB,KAAM,GAAY,GACjC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYU,EAAQ7Y,aAAc,CAAC7xC,EAAM6U,MACrF,kBAAc,wBAAoB,KAAM,CAAExG,IAAKwG,IAAS,qBAAiB7U,GAAO,KACxF,YAGV,wBAAoB,QAAQ,MAEtC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1BgqD,MAAO,0BACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,OACH,wBAAoB,SAAU,CAC1B5xD,MAAO,wBACPgf,UAAWk9C,EAAQ58G,MACnBmxD,SAAS,mBAAeskC,EAAY,CAAC,WACtC,qBAAiBonB,EAAY78G,MAAQ,OAAS,MAAO,EAAqB,YAIvF,wBAAoB,QAAQ,EAE1C,I,QCvIJ,MAEA,IAFiC,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBCJjE,GAAa,CAAE0gD,MAAO,qBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAC,YCDpB,IDM6B,qBAAiB,CAC1CM,OAAQ,mBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjBupB,SAAU,CAAE6Y,QAAS,MAEzBW,MAAO,CAAC,iBAAkB,UAAW,oBACrC,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EACRG,EAAOC,EACPszD,GAAY,IAAA12G,OACZs3G,GAAgB,IAAAt3G,OAChBu3G,GAAc,IAAAv3G,OACd+tB,GAAa,IAAA/tB,KAAI,MACjBguB,GAAW,IAAAhuB,KAAI,MACf0+G,GAAgB,IAAA1+G,MAAI,GACpB2+G,GAAqB,IAAA3+G,MAAI,GAyC/B,MAAM03G,GAAa,IAAAjoG,UAAS,IACC,OAArBse,EAAWnsB,OAAqC,OAAnBosB,EAASpsB,SAEtCwsB,MAAML,EAAWnsB,SAAUwsB,MAAMJ,EAASpsB,WAE1CmsB,EAAWnsB,MAAQ,GAAKosB,EAASpsB,MAAQ,MAEzCmsB,EAAWnsB,MAAQosB,EAASpsB,WAKpC,IAAA2c,OAAM,IAAMqoB,EAAMluB,QAASA,IACvB,GAAIA,EAAS,CAET,MAAMm/F,EAnDd,WACI,IAAI3xG,EAAKZ,OAAO/E,cAAgB+E,OAAOC,OAASD,OAAOC,OAAOhF,YAAc,OACvE2F,GAAMZ,OAAOwM,KAAOxM,OAAOwM,IAAIvR,cAChC2F,EAAKZ,OAAOwM,IAAIvR,aAEpB,IAAIs7C,GAAa,EACbi8D,EAAU,EACd,GAAI5xG,GAAMA,EAAG6L,KAAM,CACf+lG,EAAUjkG,KAAKwP,IAAI,EAAGnd,EAAG6L,KAAKrZ,OAAS,GAEvC,IAAK,IAAIE,EAAIsN,EAAG6L,KAAKrZ,OAAS,EAAGE,GAAK,EAAGA,IAAK,CAC1C,MAAM40B,EAAMtnB,EAAG6L,KAAKnZ,GACpB,IAAK40B,EAAIC,SAAWD,EAAInD,0BAA2B,CAE/C,MAAM5qB,EAAOwB,OAAOiN,KAAKsf,EAAInD,2BAC7B,IAAI0tF,GAAc,EAClB,IAAK,MAAMj6E,KAAOr+B,EAAM,CACpB,MAAMirB,EAAU8C,EAAInD,0BAA0ByT,GAC9C,GAAIpT,GAAWA,EAAQH,iBAAmBtpB,OAAOiN,KAAKwc,EAAQH,iBAAiB7xB,OAAS,EAAG,CACvFq/G,GAAc,EACd,KACJ,CACJ,CACA,GAAIA,EAAa,CACbl8D,EAAYjjD,EACZ,KACJ,CACJ,CACJ,CACJ,CAIA,MAAO,CAAEokE,OAF2B,IAAfnhB,EAAmBA,EAAYi8D,EAEtBh2C,KADI,IAAfjmB,EAAmBA,EAAYi8D,EAEtD,CAiB6BE,GACrBjqF,EAAWnsB,MAAQi2G,EAAa76C,MAChChvC,EAASpsB,MAAQi2G,EAAa/1C,IAC9B48C,EAAc98G,OAAQ,CAE1B,KAGJ,UAAe80G,EAAW,KACtBkG,MAGJ,MAAMhF,EAAgB,KAClBL,EAAY31G,OAAOmqD,SAGjBkrD,EAAgB,KACdS,EAAW91G,OAA8B,OAArBmsB,EAAWnsB,OAAqC,OAAnBosB,EAASpsB,OAC1DuhD,EAAK,UAAWp1B,EAAWnsB,MAAOosB,EAASpsB,OAC3CuhD,EAAK,kBAAkB,KAIvBu7D,EAAc98G,OAAQ,EACtBmX,WAAW,KACP2lG,EAAc98G,OAAQ,GACvB,KACH,EAAAuX,MAAMF,QAAQ,+BAIhB2jG,EAAe,KACjBz5D,EAAK,kBAAkB,IAGrBy7D,EAAqB,KACvBD,EAAmB/8G,OAAQ,GAGzBi9G,EAAyBn7G,IAE3By/C,EAAK,mBAAoBz/C,GAEzBy/C,EAAK,kBAAkB,IAE3B,MAAO,CAACgP,EAAMC,MACF,kBAAc,wBAAoB,WAAW,KAAM,CACtDpP,EAAe,UACT,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,wCACPyQ,SAAS,mBAAe6pD,EAAc,CAAC,UACxC,EACC,wBAAoB,MAAO,CACvBtqD,QAAS,YACTtyD,IAAK02G,EACLp0D,MAAO,mCACR,EACC,wBAAoB,SACpB8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,mBAAqB,UAAW,KAC9F,wBAAoB,UACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,UACpB8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,kBAAoB,EAC9E,wBAAoB,IAAK,CAAEA,MAAO,yBAClC,KACJ,wBAAoB,UACpB8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,kBAAoB,EAC5E,qBAAiB,mBACjB,wBAAoB,OACpB,wBAAoB,OAAQ,CAAEA,MAAO,sBAAwB,mBAC7D,KACJ,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,qBAAgB,wBAAoB,QAAS,CACzCgQ,QAAS,gBACTtyD,IAAKs3G,EACL,sBAAuBllD,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAa7wD,MAAQ6wD,GACnFx0D,KAAM,SACNqkD,MAAO,kBACPoQ,YAAa,QACbp4C,IAAK,IACLu5C,WAAW,cAAU+jD,EAAe,CAAC,WACtC,KAAM,KAAuC,CAC5C,CACI,aACA7pF,EAAWnsB,WACN,EACL,CAAEm8D,QAAQ,MAGlB3L,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,uBAAyB,KAAM,KAC9F,qBAAgB,wBAAoB,QAAS,CACzCgQ,QAAS,cACTtyD,IAAKu3G,EACL,sBAAuBnlD,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAW7wD,MAAQ6wD,GACjFx0D,KAAM,SACNqkD,MAAO,kBACPoQ,YAAa,MACbp4C,IAAK,IACLu5C,WAAW,cAAUojD,EAAe,CAAC,WACtC,KAAM,KAAuC,CAC5C,CACI,aACAjpF,EAASpsB,WACJ,EACL,CAAEm8D,QAAQ,WAK1B,wBAAoB,UACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1Bzb,MAAO,uCACPyQ,QAAS6rD,GACV,IAAKxsD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,QAAS,QAElC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1BA,MAAO,qCACPyQ,QAAS6pD,GACV,OACH,wBAAoB,SAAU,CAC1Bt6D,MAAO,sCACPgf,UAAWo2C,EAAW91G,MACtBmxD,QAASkkD,GACV,SAAU,EAAe,SAGrC,SAEL,wBAAoB,QAAQ,IAClC,wBAAoB,aACpB,iBAAa6H,GAAqB,CAC9BpmG,QAASimG,EAAmB/8G,MAC5B,mBAAoBwwD,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAqB7wD,MAAQ6wD,GACxF,sBAAuB1kC,EAAWnsB,YAAS1I,EAC3C,oBAAqB80B,EAASpsB,YAAS1I,EACvC04C,UAAWitE,GACZ,KAAM,EAAe,CAAC,UAAW,sBAAuB,uBAC5D,IAEX,IEvNSE,GAAU,QA8BQA,GAAQ3zF,MAAM,KAAK,GCzClD,MAAM,GAAa,CAAEk3B,MAAO,6BACtB,GAAa,CAAEA,MAAO,0BACtB,GAAa,CAAC,OACd,GAAa,CACf37C,IAAK,EACL27C,MAAO,qBAEL,GAAa,CAAEA,MAAO,2BACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,0BACtB,GAAa,CAAEA,MAAO,uBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAc,CAAEA,MAAO,cACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,gDACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,gDACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,qBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,uBAEL,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,uBAEL,GAAc,CAAEA,MAAO,mBACvB,GAAc,CAAEA,MAAO,uBACvB,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,wBACPlV,MAAO,CAAE,aAAc,SAErB,GAAc,CAAEkV,MAAO,qBACvB,GAAc,CAAEA,MAAO,uBACvB,GAAc,CAAEA,MAAO,yBACvB,GAAc,CAAEA,MAAO,qBCtD7B,ID6D6B,qBAAiB,CAC1CM,OAAQ,sBACR,KAAAG,CAAMC,GACF,MAAMlgB,GAAY,WACZugB,GAAU,WAIV27D,GAAkB,IAAA/+G,UAAS,IAAK6iC,EAAU9kC,aAE1CihH,GAAqB,IAAAj/G,MAAI,GACzBk/G,GAAkB,IAAAl/G,MAAI,GAEtBm/G,GAAgB,IAAAn/G,OAEhBo/G,GAAkB,IAAAp/G,KAAI,SAEtBq/G,GAAgB,IAAAr/G,KAAI,IAEpBs/G,GAAa,IAAA7vG,UAAS,IACQ,UAAzBuvG,EAAgB/gH,MAA8C,QAA1BmhH,EAAgBx9G,OAGlC,UAAzBo9G,EAAgB/gH,MAAoB+gH,EAAgBzmH,SAASiT,WAAW,UACxE4zG,EAAgBx9G,MAAQ,MACxBy9G,EAAcz9G,MAAQo9G,EAAgBzmH,UAK1C,IAAAgmB,OAAMygG,EAAiBtkC,IACnB53C,EAAU5f,iBAAiBw3D,IAC5B,CAAEl8D,MAAM,IAIX,MAAM+gG,GAAiB,IAAA9vG,UAAS,KAAM,CAClC,gBAAiBwvG,EAAmBr9G,OAA6C,WAApCo9G,EAAgB7gH,gBAC7D,aAAc8gH,EAAmBr9G,OAA6C,QAApCo9G,EAAgB7gH,gBAC1D,WAAY+gH,EAAgBt9G,SAE1B49G,GAAe,IAAA/vG,UAAS,KAAM,CAChC,cAAe,GAAGuvG,EAAgB9gH,SAClC,sBAAuB8gH,EAAgB5gH,YACvC,4BAA4B,QAAU4gH,EAAgB5gH,YAAa4gH,EAAgB3gH,eACnF,mBAAmB,QAAU2gH,EAAgB1gH,QAAS0gH,EAAgBzgH,cAGpEkhH,GAAoB,IAAAhwG,UAAS,IAC1BuvG,EAAgBzmH,QAEd,CACHstD,gBAAiB,QAAQm5D,EAAgBzmH,YACzCutD,mBAAoB,GAAGk5D,EAAgB/zB,cAAgB,OAAO+zB,EAAgB9zB,cAAgB,MAC9FnlC,eAAgB,GAAGi5D,EAAgB7zB,YAAc,OACjDnlC,iBAAkB,aALX,CAAC,GAWhB,SAAS05D,IACLT,EAAmBr9G,OAAQ,EAC3Bs9G,EAAgBt9G,OAAQ,EACxBmX,WAAW,KACPkmG,EAAmBr9G,OAAQ,GAC5B,IACP,CACA,SAAS+9G,IACLT,EAAgBt9G,OAAQ,EACxBq9G,EAAmBr9G,OAAQ,EAC3BmX,WAAW,KACPmmG,EAAgBt9G,OAAQ,GACzB,IACP,CAKA,SAASg+G,IACLZ,EAAgB/gH,KAAO,QACvBmhH,EAAgBx9G,MAAQ,QACxBu9G,EAAcv9G,OAAOw/E,OACzB,CAEA,SAASy+B,IACLb,EAAgB/gH,KAAO,QACvBmhH,EAAgBx9G,MAAQ,MAEpBo9G,EAAgBzmH,UAAYymH,EAAgBzmH,QAAQiT,WAAW,UAC/DwzG,EAAgBzmH,QAAU,IAG1BymH,EAAgBzmH,SAASiT,WAAW,UACpC6zG,EAAcz9G,MAAQo9G,EAAgBzmH,QAE9C,CAEA,SAASunH,IACL,MAAMr3G,EAAM42G,EAAcz9G,MAAMwT,OAC5B3M,GAAOA,EAAI+C,WAAW,UACtBwzG,EAAgBzmH,QAAUkQ,EAE1Bu2G,EAAgB/zB,aAAe,GAC/B+zB,EAAgB9zB,aAAe,GAC/B8zB,EAAgB7zB,WAAa,IAErC,CACA9qF,eAAe0/G,EAAkBn8G,GAC7B,MAAMw/D,EAAQx/D,EAAMC,OACdyH,EAAO83D,EAAM2zC,QAAQ,GAC3B,GAAKzrG,EAAL,CAEA,IACI,IAAI9R,QAAe,QAAa8R,GAEhC9R,QAAe,QAAcA,EAAQ,IAAK,IAC1CwlH,EAAgBzmH,QAAUiB,EAE1BwlH,EAAgB/zB,aAAe,GAC/B+zB,EAAgB9zB,aAAe,GAC/B8zB,EAAgB7zB,WAAa,IAE7B60B,GACJ,CACA,MAAOr/G,GACHC,QAAQC,MAAM,gBAAiBF,EACnC,CAEAyiE,EAAMxhE,MAAQ,EAjBJ,CAkBd,CAKA,SAASo+G,IACDhB,EAAgBzmH,SAChB8qD,EAAQxS,qBAAqB,CACzB5N,SAAU+7E,EAAgBzmH,QAC1BmM,KAAM,QACN0iC,eAAgB43E,EAAgB/zB,cAAgB,GAChD5jD,eAAgB23E,EAAgB9zB,cAAgB,GAChD5jD,aAAc03E,EAAgB7zB,YAAc,IAC5C5jD,cAAey3E,EAAgBxgH,cAAe,EAC9CgpC,kBAAkB,GACnB,CACCuJ,QAAUl3C,IACNmlH,EAAgB/zB,aAAepxF,EAAKoP,QACpC+1G,EAAgB9zB,aAAerxF,EAAKqP,QACpC81G,EAAgB7zB,WAAatxF,EAAKsP,WACdjQ,IAAhBW,EAAKomH,SACLjB,EAAgBxgH,YAAc3E,EAAKomH,SAG3CjvE,SAAU3wC,MAAOiL,IACb,IACI,IAAI9R,QAAe,QAAa8R,GAChC9R,QAAe,QAAcA,EAAQ,IAAK,IAC1CwlH,EAAgBzmH,QAAUiB,EAE1BwlH,EAAgB/zB,aAAe,GAC/B+zB,EAAgB9zB,aAAe,GAC/B8zB,EAAgB7zB,WAAa,GACjC,CACA,MAAOxqF,GACHC,QAAQC,MAAM,gBAAiBF,EACnC,IAIhB,CAEA,SAASu/G,IACLlB,EAAgBzmH,QAAU,GAC1BymH,EAAgB/zB,aAAe,GAC/B+zB,EAAgB9zB,aAAe,GAC/B8zB,EAAgB7zB,WAAa,GACjC,CAIA,SAAS3oF,IACLvB,OAAOC,OAAO89G,EAAiB,MACnC,CACA,MAAO,CAAC7sD,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,0CACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1B9P,MAAO,6BACPp9B,MAAO,QACP6tC,SAAS,mBAAevwD,EAAgB,CAAC,UAC1C,IAAK4vD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,QAElE,wBAAoB,MAAO,CACvBA,OAAO,oBAAgB,CAAC,mBAAoBi9D,EAAe39G,QAC3DwrC,OAAO,oBAAgBoyE,EAAa59G,QACrC,CAC2B,SAAzBo9G,EAAgB/gH,OACV,kBAAc,wBAAoB,IAAK,CACtC0I,IAAK,EACL27C,OAAO,oBAAgB,CAAC,WAAY08D,EAAgBzmH,WACrD,KAAM,IACmB,UAAzBymH,EAAgB/gH,OACZ,kBAAc,wBAAoB,WAAW,CAAE0I,IAAK,GAAK,EACxD,sBAAiB,qBAAiBq4G,EAAgBzmH,SAAU,IAC7D,KACyB,UAAzBymH,EAAgB/gH,MAAoB+gH,EAAgBzmH,UAChD,kBAAc,wBAAoB,MAAO,CACxCoO,IAAK,EACLb,IAAKk5G,EAAgBzmH,QACrB4nH,IAAK,IACN,KAAM,EAAe,OACrB,kBAAc,wBAAoB,IAAK,MACvD,MAEP,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,uBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,CACnC/tD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,iBACjB,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1BA,MAAO,eACPyQ,SAAS,mBAAe2sD,EAAiB,CAAC,UAC3C,UACH,wBAAoB,SAAU,CAC1Bp9D,MAAO,eACPyQ,SAAS,mBAAe4sD,EAAkB,CAAC,UAC5C,YAEP,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,QAAS,GAAa,EACtC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBvtD,EAAO,KAAOA,EAAO,GAAMK,GAAausD,EAAqC,sBAAIvsD,GACxGx0D,KAAM,YACP,KAAM,KAAuB,CAC5B,CAAC,iBAAiB+gH,EAAgB/jG,yBAEtCm3C,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,UAAY,MAAO,WAIhG,wBAAoB,MAAO,CACvBA,OAAO,oBAAgB,CAAC,gBAAiB,CAAEgf,UAAW09C,EAAgB/jG,0BACvE,EACC,wBAAoB,MAAO,CACvBqnC,OAAO,oBAAgB,CAAC,kBAAmB,CAAEwQ,OAA4C,WAApCksD,EAAgB7gH,mBACrE40D,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYusD,EAAgB7gH,gBAAkB,SAAW,CAAC,WAC9G,IAAKi0D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,OAAQ,CAAE9P,MAAO,iBAAmB,MAAO,IAC/D,wBAAoB,OAAQ,CAAEA,MAAO,iBAAmB,QAAS,MAC/D,IACV,wBAAoB,MAAO,CACvBA,OAAO,oBAAgB,CAAC,kBAAmB,CAAEwQ,OAA4C,QAApCksD,EAAgB7gH,mBACrE40D,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYusD,EAAgB7gH,gBAAkB,MAAQ,CAAC,WAC3G,IAAKi0D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,OAAQ,CAAE9P,MAAO,iBAAmB,KAAM,IAC9D,wBAAoB,OAAQ,CAAEA,MAAO,iBAAmB,QAAS,MAC/D,IACX,MAEP,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,oBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,MAAO,KAC/F,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAausD,EAA2B,YAAIvsD,GAC9Fx0D,KAAM,OACNqkD,MAAO,kBACPoQ,YAAa,WACd,KAAM,KAAuB,CAC5B,CAAC,aAAassD,EAAgB5gH,gBAElC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBg0D,EAAO,KAAOA,EAAO,GAAMK,GAAausD,EAA2B,YAAIvsD,GAC9Fx0D,KAAM,QACNqkD,MAAO,+BACR,KAAM,KAAuB,CAC5B,CAAC,aAAa08D,EAAgB5gH,oBAI1C,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpCg0D,EAAO,MAAQA,EAAO,KAAM,qBAAiB,SAAU,KACvD,wBAAoB,OAAQ,IAAa,qBAAiB4sD,EAAgB3gH,eAAiB,IAAK,MAEpG,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB+zD,EAAO,KAAOA,EAAO,GAAMK,GAAausD,EAA6B,cAAIvsD,GAChGx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,MACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,aACAiP,EAAgB3gH,mBACX,EACL,CAAE0/D,QAAQ,eAOlC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,sBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,MAAO,KAC/F,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAausD,EAAuB,QAAIvsD,GAC1Fx0D,KAAM,OACNqkD,MAAO,kBACPoQ,YAAa,WACd,KAAM,KAAuB,CAC5B,CAAC,aAAassD,EAAgB1gH,YAElC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8zD,EAAO,KAAOA,EAAO,GAAMK,GAAausD,EAAuB,QAAIvsD,GAC1Fx0D,KAAM,QACNqkD,MAAO,oBACR,KAAM,KAAuB,CAC5B,CAAC,aAAa08D,EAAgB1gH,gBAI1C,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC8zD,EAAO,MAAQA,EAAO,KAAM,qBAAiB,SAAU,KACvD,wBAAoB,OAAQ,IAAa,qBAAiB4sD,EAAgBzgH,WAAa,IAAK,MAEhG,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB6zD,EAAO,KAAOA,EAAO,GAAMK,GAAausD,EAAyB,UAAIvsD,GAC5Fx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,MACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,aACAiP,EAAgBzgH,eACX,EACL,CAAEw/D,QAAQ,eAOlC,wBAAoB,SACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,8BAClC,qBAAiB,UACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,qBAAiB,UAAW,KACxD,wBAAoB,OAAQ,IAAa,qBAAiB4sD,EAAgB9gH,MAAQ,KAAM,MAE5F,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBk0D,EAAO,KAAOA,EAAO,GAAMK,GAAausD,EAAoB,KAAIvsD,GACvFx0D,KAAM,QACNqc,IAAK,KACL+I,IAAK,MACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,aACAiP,EAAgB9gH,UACX,EACL,CAAE6/D,QAAQ,eAOlC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,kBAClC,qBAAiB,UACjB,KACJ,wBAAoB,uBACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,QAAS,CACzBA,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAAiC,SAAzBksD,EAAgB/gH,SACnE,EACC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBm0D,EAAO,MAAQA,EAAO,IAAOK,GAAausD,EAAoB,KAAIvsD,GACzFx0D,KAAM,QACN2D,MAAO,QACR,KAAM,KAAuB,CAC5B,CAAC,cAAco9G,EAAgB/gH,QAEnCm0D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,qBAAuB,MAAO,IAC5F8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,KAAM,QAAS,KACxE,IACH,wBAAoB,QAAS,CACzB9P,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAAiC,UAAzBksD,EAAgB/gH,SACnE,EACC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBm0D,EAAO,MAAQA,EAAO,IAAOK,GAAausD,EAAoB,KAAIvsD,GACzFx0D,KAAM,QACN2D,MAAO,SACR,KAAM,KAAuB,CAC5B,CAAC,cAAco9G,EAAgB/gH,QAEnCm0D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,cAAgB,MAAO,IACxF8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,KAAM,SAAU,KACzE,IACH,wBAAoB,sBACpB,wBAAoB,MAAO,CACvB9P,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAAiC,UAAzBksD,EAAgB/gH,OAAqBqhH,EAAW19G,SAClGmxD,SAAS,mBAAe6sD,EAAqB,CAAC,UAC/C,EACC,wBAAoB,QAAS,CACzBttD,QAAS,gBACTtyD,IAAKm/G,EACLlhH,KAAM,OACNk5G,OAAQ,UACRl3F,OAAQ,GACRgwF,SAAU8P,GACX,KAAM,KACT3tD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,qBAAuB,MAAO,IAC5F8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,KAAM,MAAO,KACtE,IACH,wBAAoB,eACpB,wBAAoB,QAAS,CACzB9P,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAAiC,UAAzBksD,EAAgB/gH,MAAoBqhH,EAAW19G,UAClG,EACC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBwwD,EAAO,MAAQA,EAAO,IAAOK,GAAY,EAAkB7wD,MAAQ6wD,GAC1Fx0D,KAAM,QACN2D,MAAO,MACPquG,SAAU4P,GACX,KAAM,KAAuC,CAC5C,CAAC,cAAcT,EAAgBx9G,SAEnCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,oBAAsB,MAAO,IAC3F8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,KAAM,OAAQ,KACvE,MAEP,wBAAoB,wCACM,SAAzB4sD,EAAgB/gH,OACV,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBm0D,EAAO,MAAQA,EAAO,IAAOK,GAAausD,EAAuB,QAAIvsD,GAC5FC,YAAa,kBACd,KAAM,KAAuB,CAC5B,CAAC,aAAassD,EAAgBzmH,WAElC65D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,kBAAoB,uBAAwB,SAGzF,UAAzB08D,EAAgB/gH,OACZ,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBm0D,EAAO,MAAQA,EAAO,IAAOK,GAAausD,EAAuB,QAAIvsD,GAC5FC,YAAa,MACd,KAAM,KAAuB,CAC5B,CAAC,aAAassD,EAAgBzmH,WAElC65D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,kBAAoB,eAAgB,SAGjF,UAAzB08D,EAAgB/gH,MAAoBqhH,EAAW19G,QAC3C,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,0BACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuByrD,EAAO,MAAQA,EAAO,IAAOK,GAAY,EAAgB7wD,MAAQ6wD,GACxFC,YAAa,gCACbkB,OAAQksD,EACRvD,SAAS,cAAUuD,EAAe,CAAC,WACpC,KAAM,KAAuC,CAC5C,CAAC,aAAaT,EAAcz9G,YAGpC,wBAAoB,qBACnBo9G,EAAgBzmH,SAAWymH,EAAgBzmH,QAAQiT,WAAW,UACxD,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,CACvB82C,MAAO,4BACPlV,OAAO,oBAAgBqyE,EAAkB79G,OACzCmxD,SAAS,mBAAeitD,EAAgB,CAAC,UAC1C,IAAK5tD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,OAAQ,CAAE9P,MAAO,iBAAmB,EACpD,wBAAoB,IAAK,CAAEA,MAAO,yBAClC,MACF,IACV,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAeitD,EAAgB,CAAC,UAC1C,IAAK5tD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,IACjE,qBAAiB,QAAS,QAElC,wBAAoB,SAAU,CAC1BA,MAAO,iBACPlV,MAAO,CAAE,cAAe,OACxB2lB,SAAS,mBAAemtD,EAAY,CAAC,UACtC,IAAK9tD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,IAC3D,qBAAiB,QAAS,aAIxC,wBAAoB,QAAQ,MAEvC,OACyB,UAAzB08D,EAAgB/gH,MAAoB+gH,EAAgBzmH,UAChD,kBAAc,wBAAoB,WAAW,CAAEoO,IAAK,GAAK,EACxD,wBAAoB,2BACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,CACvB27C,MAAO,4BACPlV,OAAO,oBAAgBqyE,EAAkB79G,OACzCmxD,SAAS,mBAAeitD,EAAgB,CAAC,UAC1C,IAAK5tD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,OAAQ,CAAE9P,MAAO,iBAAmB,EACpD,wBAAoB,IAAK,CAAEA,MAAO,yBAClC,MACF,IACV,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAeitD,EAAgB,CAAC,UAC1C,IAAK5tD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,IACjE,qBAAiB,QAAS,QAElC,wBAAoB,SAAU,CAC1BA,MAAO,iBACPlV,MAAO,CAAE,cAAe,OACxB2lB,SAAS,mBAAemtD,EAAY,CAAC,UACtC,IAAK9tD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,IAC3D,qBAAiB,QAAS,cAK/C,QACD,wBAAoB,QAAQ,SAKlE,IEjoBE,GAAa,CAAEA,MAAO,2BACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,uCACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,wBAEL,GAAa,CAAC,QAAS,UAAW,cAAe,aAAc,UAC/D,GAAa,CACf37C,IAAK,EACL27C,MAAO,gBAEL,GAAa,CAAC,QAAS,WACvB,GAAa,CAAC,WACd,GAAc,CAChB37C,IAAK,EACL27C,MAAO,kBAEL,GAAc,CAAEA,MAAO,sCACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,uBAEL,GAAc,CAAC,QAAS,WACxB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,kBAEL,GAAc,CAAEA,MAAO,iBACvB,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAAEA,MAAO,eACvB,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAAC,WAMrB,IAA6B,qBAAiB,CAC1CM,OAAQ,uBACR,KAAAG,CAAMC,GAcF,MAAM1gB,GAAc,EAAAxkB,EAAA,MAEdkwE,EAAiBoyB,IACnB,MAAMpgG,EAAM,KAAYpa,KAAKwM,GAAKA,EAAEra,KAAOqoH,GAC3C,OAAOpgG,GAAK7E,MAAQ,aAKlB8yE,EAAkBmyB,IACpB,MAAMpgG,EAAM,KAAYpa,KAAKwM,GAAKA,EAAEra,KAAOqoH,GAC3C,OAAOpgG,GAAK5E,OAASglG,GAKnBC,GAAqB,IAAA5wG,UAAS,KAChC,MAAMkQ,EAAQ2iB,EAAYniB,cAAc1kB,YAClCid,EAAU4pB,EAAYniB,cAAc3kB,eACpCsmB,EAASwgB,EAAYniB,cAAczkB,cAAgB,GAGzD,OADsBikB,EAAMjW,OAAQ3R,GAAO2gB,EAAQ3S,SAAShO,IACvCM,IAAKN,IACtB,MAAMioB,EAAM,KAAYpa,KAAKwM,GAAKA,EAAEra,KAAOA,GACrCoqB,EAAQL,EAAOlc,KAAMoZ,GAAMA,EAAEgD,YAAcjqB,GACjD,MAAO,CACHA,KACAojB,KAAM6E,GAAK7E,MAAQ,YACnBC,MAAO4E,GAAK5E,OAASrjB,EACrB+nB,YAAaqC,GAAOrC,aAAe,UASzCF,GAAgB,IAAAnQ,UAAS,KAC3B,MAAMiJ,EAAU4pB,EAAYniB,cAAc3kB,eAEpCqkB,GADSyiB,EAAYniB,cAAczkB,cAAgB,IAC1BrD,IAAK2mB,GAAMA,EAAEc,aAAapW,OAAOqW,SAChE,OAAO,KAAYrW,OAAOsW,IAAQA,EAAIC,SAAWvH,EAAQ3S,SAASia,EAAIjoB,MAAQ8nB,EAAgB9Z,SAASia,EAAIjoB,OAOzGuoH,GAA4B,IAAA7wG,UAAS,KACvC,MACMoQ,GADSyiB,EAAYniB,cAAczkB,cAAgB,IAC1BrD,IAAK2mB,GAAMA,EAAEc,aAAapW,OAAOqW,SAChE,OAAO,KAAYrW,OAAOsW,GAElBA,EAAIjoB,KAAOwoH,EAAoB3+G,QAG/Bie,EAAgB9Z,SAASia,EAAIjoB,OAQnCyoH,GAAe,IAAAxgH,KAAI,MAoCnB21F,EAAiBh1F,IACnBA,EAAEkD,OAAO2sE,UAAU3kB,OAAO,YACZrd,SAASyrB,iBAAiB,oBAClCzxD,QAAQlQ,GAAQA,EAAKk4E,UAAU3kB,OAAO,gBAC5C20D,EAAa5+G,MAAQ,MAuCnB6+G,GAA0B,IAAAzgH,MAAI,GAC9BugH,GAAsB,IAAAvgH,KAAI,IAK1B0gH,EAAwB,KAC1BD,EAAwB7+G,OAAQ,EAChC2+G,EAAoB3+G,MAAQ,IAY1B++G,EAAc,KAChBr+E,EAAY/f,qBAEhB,MAAO,CAAC4vC,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,8BACpB,wBAAoB,MAAO,GAAY,CACnCA,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,qBAAiB,aACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,4BAC/C,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,QAAQ,WAAOxwB,GAAa3mC,uBACpEo3D,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,IAAY,WAAOnwB,GAAajgB,4BAA8B,CAAC,WACnH,KAAM,QAGjB,wBAAoB,qBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,KAAM,KAAM,CAC5B+vC,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,mBAAqB,MAAO,KACxF,qBAAiB,UAAW,qBAAiB+9D,EAAmBz+G,MAAMlJ,QAAU,KAAM,IACtF,wBAAoB,SAAU,CAC1B4pD,MAAO,6BACPyQ,SAAS,mBAAe4tD,EAAa,CAAC,UACvC,IAAKvuD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,OAAQ,SAGpC+9D,EAAmBz+G,MAAMlJ,OAAS,IAC5B,kBAAc,wBAAoB,MAAO,GAAY,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY2nH,EAAmBz+G,MAAO,CAAC4xF,EAAMrmF,MACzF,kBAAc,wBAAoB,MAAO,CAC7CxG,IAAK6sF,EAAKz7F,GACVuqD,OAAO,oBAAgB,CAAC,sBAAuB,CAAE,cAA2B,aAAZkxC,EAAKz7F,MACrEmtB,MAAOsuE,EAAKp4E,OAAqB,aAAZo4E,EAAKz7F,GAAoB,QAAU,WACxD+9F,UAAW,OACX/iC,SAAS,mBAAgBN,GAxE5B,CAAC2tD,IACtB,GAAc,aAAVA,EACA,OACJ,MAAM1+F,EAAU,IAAI4gB,EAAYniB,cAAc3kB,gBACxC2R,EAAQuU,EAAQrU,QAAQ+yG,GAC1BjzG,GAAS,IACTuU,EAAQC,OAAOxU,EAAO,GACtBm1B,EAAYjhB,kBAAkBK,KAiE0B,CAAkB8xE,EAAKz7F,IAAM,CAAC,SAClEg+F,YAActjC,GA1IlB,EAAC9xD,EAAGwM,KACxBqzG,EAAa5+G,MAAQuL,EACjBxM,EAAEq1F,eACFr1F,EAAEq1F,aAAaC,cAAgB,OAC/Bt1F,EAAEq1F,aAAaE,QAAQ,aAAczoF,OAAON,KAEhDxM,EAAEkD,OAAO2sE,UAAU5+D,IAAI,aAoI0B,CAAiB6gD,EAAQtlD,GAClDgpF,YAAY,mBAAgB1jC,GAnIjC,EAAC9xD,EAAGwM,KAEvB,GADAxM,EAAE0/D,iBACyB,OAAvBmgD,EAAa5+G,OAAkB4+G,EAAa5+G,QAAUuL,EACtD,OACUqhC,SAASyrB,iBAAiB,oBAClCzxD,QAAQlQ,GAAQA,EAAKk4E,UAAU3kB,OAAO,gBAC5ClrD,EAAEs8F,cAAczsB,UAAU5+D,IAAI,gBA6HiC,CAAgB6gD,EAAQtlD,GAAS,CAAC,YACzEipF,OAAS3jC,GA5HlB,EAAC9xD,EAAGm3B,KAEnB,GADAn3B,EAAE0/D,iBACyB,OAAvBmgD,EAAa5+G,OAAkB4+G,EAAa5+G,QAAUk2B,EACtD,OAEJ,MAAMiY,EAAe,IAAIzN,EAAYniB,cAAc1kB,aAC7CyxF,EAAa5qD,EAAYniB,cAAc3kB,eAEvColH,EAAiB7wE,EAAarmC,OAAQ3R,GAAOm1F,EAAWnnF,SAAShO,KAChEw+F,GAAWqqB,EAAej/F,OAAO6+F,EAAa5+G,MAAO,GAC5Dg/G,EAAej/F,OAAOmW,EAAa,EAAGy+D,GAEtC,MAAMsqB,EAAgB9wE,EAAarmC,OAAQ3R,IAAQm1F,EAAWnnF,SAAShO,IACvEuqC,EAAYhhB,eAAe,IAAIs/F,KAAmBC,IAEpCryE,SAASyrB,iBAAiB,oBAClCzxD,QAAQlQ,GAAQA,EAAKk4E,UAAU3kB,OAAO,gBAC5C20D,EAAa5+G,MAAQ,MA2GuB,CAAY6wD,EAAQtlD,GACxCqpF,UAAWb,GACZ,EACC,wBAAoB,YACpB,wBAAoB,IAAK,CACrBrzC,OAAO,oBAAgB,CAAC,CAAC,MAAOkxC,EAAKr4E,MAAO,cAC7C,KAAM,IACT,wBAAoB,UACP,aAAZq4E,EAAKz7F,KACC,kBAAc,wBAAoB,OAAQ,MAC3C,wBAAoB,QAAQ,IAClC,wBAAoB,kBACnBy7F,EAAgB,cACV,kBAAc,wBAAoB,MAAO,CACxC7sF,IAAK,EACL27C,MAAO,uBACPp9B,MAAO,SAAW+oE,EAAeuF,EAAK1zE,aAAe,UACrDizC,SAAS,mBAAgBN,IAAW,OAjEzCzwC,EAiEgEwxE,EAAKz7F,QAhEhGuqC,EAAYrgB,2BAA2BD,GADb,IAACA,GAiE2E,CAAC,UACxE,EACC,wBAAoB,IAAK,CACrBsgC,OAAO,oBAAgB,CAAC,MAAO0rC,EAAcwF,EAAK1zE,gBACnD,KAAM,IACV,EAAe,OACf,kBAAc,wBAAoB,SAAU,CAC3CnZ,IAAK,EACL27C,MAAO,qBACPp9B,MAAO,SACP6tC,SAAS,mBAAgBN,IAAW,OAvF1CzwC,EAuFgEwxE,EAAKz7F,GAtF/FwoH,EAAoB3+G,MAAQogB,OAC5By+F,EAAwB7+G,OAAQ,GAFP,IAACogB,GAuF2E,CAAC,UACvE,IAAKowC,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,MACxD,EAAe,MAC9B,GAAuC,MAC1C,WAEL,kBAAc,wBAAoB,MAAO,GAAa,IAAK8P,EAAO,KAAOA,EAAO,GAAK,EAChF,wBAAoB,IAAK,CAAE9P,MAAO,+BAAiC,MAAO,IAC1E,wBAAoB,OAAQ,KAAM,aAAc,WAGhE,wBAAoB,eACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,KAAM,KAAM,CAC5B8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,oBAAsB,MAAO,KACzF,qBAAiB,UAAW,qBAAiB1iC,EAAche,MAAMlJ,QAAU,KAAM,KAEpFknB,EAAche,MAAMlJ,OAAS,IACvB,kBAAc,wBAAoB,MAAO,GAAa,GACpD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYknB,EAAche,MAAQoe,KAC9E,kBAAc,wBAAoB,SAAU,CAChDrZ,IAAKqZ,EAAIjoB,GACTuqD,MAAO,sBACPp9B,MAAOlF,EAAI5E,MAAQ,UACnB23C,SAAS,mBAAgBN,GApJ5B,CAAC2tD,IACtB,MAAMU,EAAiB,IAAIx+E,EAAYniB,cAAc3kB,gBAC/Cu0C,EAAe,IAAIzN,EAAYniB,cAAc1kB,aAOnD,GALKqlH,EAAe/6G,SAASq6G,KACzBU,EAAejpH,KAAKuoH,GACpB99E,EAAYjhB,kBAAkBy/F,KAG7B/wE,EAAahqC,SAASq6G,GAAQ,CAE/B,MAAMjzB,EAAgBp9C,EAAa1iC,QAAQ,YACvC8/E,GAAiB,EACjBp9C,EAAapuB,OAAOwrE,EAAe,EAAGizB,GAGtCrwE,EAAal4C,KAAKuoH,GAEtB99E,EAAYhhB,eAAeyuB,EAC/B,GAiI4D,CAAkB/vB,EAAIjoB,IAAM,CAAC,UAClE,EACC,wBAAoB,IAAK,CACrBuqD,OAAO,oBAAgB,CAAC,MAAOtiC,EAAI7E,QACpC,KAAM,IACV,EAAe,MAClB,WAEL,kBAAc,wBAAoB,MAAO,GAAa,IAAKi3C,EAAO,KAAOA,EAAO,GAAK,EAChF,wBAAoB,IAAK,CAAE9P,MAAO,uBAAyB,MAAO,IAClE,wBAAoB,OAAQ,KAAM,YAAa,WAG/D,wBAAoB,cACnBm+D,EAA6B,QACvB,kBAAc,wBAAoB,MAAO,CACxC95G,IAAK,EACL27C,MAAO,gCACPyQ,SAAS,mBAAe2tD,EAAuB,CAAC,UACjD,EACC,wBAAoB,MAAO,CACvBp+D,MAAO,wBACPyQ,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAe,OAAW,CAAC,WAC/D,EACC,wBAAoB,MAAO,GAAa,CACpCA,EAAO,MAAQA,EAAO,KAAM,wBAAoB,KAAM,KAAM,YAAa,KACzE,wBAAoB,SAAU,CAC1B9P,MAAO,YACPyQ,SAAS,mBAAe2tD,EAAuB,CAAC,UACjD,IAAKtuD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,UAGvE,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,IAAK,GAAa,cAAgB,qBAAiB2rC,EAAesyB,EAAoB3+G,QAAU,aAAe,IACnI,wBAAoB,MAAO,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY0+G,EAA0B1+G,MAAQoe,KAC1F,kBAAc,wBAAoB,SAAU,CAChDrZ,IAAKqZ,EAAIjoB,GACTuqD,MAAO,gBACPyQ,SAAS,mBAAgBN,IAAW,OAhJzC3yC,EAgJgEE,EAAIjoB,GA/I/FuqC,EAAYvgB,eAAew+F,EAAoB3+G,MAAOke,QACtD4gG,IAF0B,IAAC5gG,GAgJ0E,CAAC,UACvE,EACC,wBAAoB,IAAK,CACrBwiC,OAAO,oBAAgB,CAAC,MAAOtiC,EAAI7E,QACpC,KAAM,IACT,wBAAoB,OAAQ,MAAM,qBAAiB6E,EAAI5E,OAAQ,IAChE,EAAe,MAClB,gBAKlB,wBAAoB,QAAQ,IAClC,wBAAoB,iBACpBg3C,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,yCAA2C,EACvG,wBAAoB,IAAK,CAAEA,MAAO,wBAClC,wBAAoB,OAAQ,KAAM,4BAClC,MAGhB,I,OCjXJ,MAEA,IAFiC,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBCJjE,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,uCACtB,GAAa,CAAC,UAAW,cAAe,aAAc,UACtD,GAAa,CACf37C,IAAK,EACL27C,MAAO,uBAEL,GAAa,CACf37C,IAAK,EACL27C,MAAO,kBAEL,GAAa,CAAEA,MAAO,sCACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,uBAEL,GAAa,CAAC,QAAS,WACvB,GAAa,CAAEA,MAAO,YACtB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,kBAEL,GAAc,CAChB37C,IAAK,EACL27C,MAAO,kBAWX,IAA6B,qBAAiB,CAC1CM,OAAQ,iBACR,KAAAG,CAAMC,GAgBF,MAAM1gB,GAAc,EAAAxkB,EAAA,MAOdijG,GAAY,IAAAtxG,UAAS,KACvB,MAAMX,EAAOwzB,EAAY3lC,OAAOwf,YAChC,OAAa,IAATrN,EAEO,CAAEkyG,oBAAqB,wCAG3B,CAAEA,oBAAqB,UAAUlyG,aAEtCu0C,GAAU,EAAA5d,EAAA,MACVw0C,GAAY,EAAA/xD,EAAA,KAElB,SAAS+4F,EAAc5rB,GACnB,MAAiB,cAAbA,EAAIp3F,MAAqC,UAAbo3F,EAAIp3F,MAAiC,YAAbo3F,EAAIp3F,KACjDo3F,EAAIt9F,GAERs9F,EAAI3wF,IACf,CAMA,MAAMw8G,GAAU,IAAAzxG,UAAS,KACrB,MAAM1Q,EAAO,GAETujC,EAAY3lC,OAAOof,eACnBhd,EAAKlH,KAAK,CACNE,GAAI,KACJ2M,KAAM,MACNyW,KAAM,cACNld,KAAM,cAId,MAAMkjH,EAASlnC,EAAU9xD,WACzB,GAAIg5F,EAAQ,CACR,MAAM70F,GAAY,QAAgB60F,GAClC,GAAI70F,EACA,IAAK,MAAOte,EAAWF,KAAc7M,OAAOsN,QAAQ+d,GAAY,CAC5D,MAAM3W,EAAU7H,EAAUnH,IACpBy6G,EAAYpzG,EAAUjI,SAAS,MACrChH,EAAKlH,KAAK,CACNE,GAAI4d,EACJjR,KAAMsJ,EACNmN,KAAMimG,EAAY,wBAAqBloH,EACvC+E,KAAMmjH,EAAY,UAAY,UAEtC,CAER,CAE2BriH,EAAK4a,KAAKwb,GAAgB,WAAXA,EAAEl3B,OAAqB,QAAiBk3B,EAAEzwB,KAAMywB,EAAEp9B,MAExFgH,EAAKlH,KAAK,CACNE,GAAI,KACJ2M,KAAM,MACNyW,KAAM,yBACNld,KAAM,UAad,OATyBc,EAAK4a,KAAKwb,GAAgB,YAAXA,EAAEl3B,OAEtCc,EAAKlH,KAAK,CACNE,GAAI,KACJ2M,KAAM,OACNyW,KAAM,mBACNld,KAAM,YAGPc,IAOLsiH,GAAkB,IAAA5xG,UAAS,KAC7B,MAAM6xG,EAAcj+D,EAAQpoD,YAE5B,OAAKqmH,GAAsC,IAAvBA,EAAY5oH,OAIzB4oH,EACFjpH,IAAIsO,GAAOu6G,EAAQt/G,MAAMgE,KAAKyvF,GAAO4rB,EAAc5rB,KAAS1uF,IAC5D+C,OAAQ2rF,QAAgBn8F,IAARm8F,GALV,KAYTksB,GAAiB,IAAA9xG,UAAS,KAC5B,MAAM6xG,EAAcj+D,EAAQpoD,YAE5B,OAAKqmH,GAAsC,IAAvBA,EAAY5oH,OAIzBwoH,EAAQt/G,MAAM8H,OAAO2rF,IAAQisB,EAAYv7G,SAASk7G,EAAc5rB,KAH5D6rB,EAAQt/G,QAYjB4/G,EAAkBvjH,GACJ,cAATA,GAAiC,UAATA,GAA6B,YAATA,EAKjDwjH,EAAgBxjH,IAClB,OAAQA,GACJ,IAAK,YACD,MAAO,KACX,IAAK,QACD,MAAO,KACX,IAAK,UACD,MAAO,KACX,QACI,MAAO,KAMbuiH,GAAe,IAAAxgH,KAAI,MAiCnB21F,EAAgB,KAClB6qB,EAAa5+G,MAAQ,MAsDnB++G,EAAc,KAEhB,MAAMe,EAAUR,EAAQt/G,MAAMvJ,IAAI88B,GAAK8rF,EAAc9rF,IACrDkuB,EAAQ/T,eAAeoyE,IAMrBC,EAAiB,KACnBt+D,EAAQ/T,eAAe,KAE3B,MAAO,CAAC6iB,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,kCACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,KAAM,KAAM,CAC5BA,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,cAAgB,MAAO,KACnF,qBAAiB,UAAW,qBAAiB++D,EAAgBz/G,MAAMlJ,QAAU,KAAM,IACnF,wBAAoB,SAAU,CAC1B4pD,MAAO,6BACPyQ,SAAS,mBAAe4tD,EAAa,CAAC,UACvC,IAAKvuD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,OAAQ,SAGpC++D,EAAgBz/G,MAAMlJ,OAAS,IACzB,kBAAc,wBAAoB,MAAO,CACxCiO,IAAK,EACL27C,MAAO,uBACPlV,OAAO,oBAAgB2zE,EAAUn/G,QAClC,GACE,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYy/G,EAAgBz/G,MAAO,CAACyzF,EAAKloF,MACrF,kBAAc,wBAAoB,SAAU,CAChDxG,IAAK0uF,EAAIt9F,GACTuqD,OAAO,oBAAgB,CAAC,iCAAkC,CAClDs/D,SAAUpB,EAAa5+G,QAAUuL,KAEzC2oF,UAAW,OACX5wE,MAAO,YACP6tC,SAAS,mBAAgBN,GAtElC,CAAC/iB,IAChB,MAAM2lD,EAAM6rB,EAAQt/G,MAAMgE,KAAKuvB,GAAKA,EAAEp9B,KAAO23C,GAC7C,IAAK2lD,EACD,OACJ,MAAMwsB,EAAaZ,EAAc5rB,GAC3ByrB,EAAiB,IAAIz9D,EAAQpoD,aAEnC,GAA8B,IAA1B6lH,EAAepoH,OAAc,CAC7B,MACMopH,EADUZ,EAAQt/G,MAAMvJ,IAAI88B,GAAK8rF,EAAc9rF,IAC5BzrB,OAAO/C,GAAOA,IAAQk7G,GAK/C,YAHIC,EAASppH,OAAS,GAClB2qD,EAAQ/T,eAAewyE,GAG/B,CACA,MAAM30G,EAAQ2zG,EAAezzG,QAAQw0G,GACjC10G,GAAS,GAEL2zG,EAAepoH,OAAS,IACxBooH,EAAen/F,OAAOxU,EAAO,GAC7Bk2C,EAAQ/T,eAAewxE,KAiD6B,CAAYzrB,EAAIt9F,IAAM,CAAC,SAC3Dg+F,YAActjC,GAjIlB,EAAC9xD,EAAGwM,KACxBqzG,EAAa5+G,MAAQuL,EACjBxM,EAAEq1F,eACFr1F,EAAEq1F,aAAaC,cAAgB,OAC/Bt1F,EAAEq1F,aAAaE,QAAQ,aAAczoF,OAAON,MA6HC,CAAiBslD,EAAQtlD,GAClDgpF,YAAY,mBAAgB1jC,IAA2BA,EAzH7E4N,sBACyB,OAAvBmgD,EAAa5+G,OAAkB4+G,EAAa5+G,QAwHgD,CAAC,YACzEw0F,OAAS3jC,GArHlB,EAAC9xD,EAAGm3B,KAEnB,GADAn3B,EAAE0/D,iBACyB,OAAvBmgD,EAAa5+G,OAAkB4+G,EAAa5+G,QAAUk2B,EACtD,OAEJ,IAAIiY,EAAe,IAAIsT,EAAQpoD,aACH,IAAxB80C,EAAar3C,SACbq3C,EAAemxE,EAAQt/G,MAAMvJ,IAAI88B,GAAK8rF,EAAc9rF,KAGxD,MAAOohE,GAAWxmD,EAAapuB,OAAO6+F,EAAa5+G,MAAO,GAC1DmuC,EAAapuB,OAAOmW,EAAa,EAAGy+D,GACpClzC,EAAQ/T,eAAeS,GAETvB,SAASyrB,iBAAiB,uBAClCzxD,QAAQlQ,GAAQA,EAAKk4E,UAAU3kB,OAAO,gBAC5C20D,EAAa5+G,MAAQ,MAqGuB,CAAY6wD,EAAQtlD,GACxCqpF,UAAWb,GACZ,CACEN,EAAQ,OACF,kBAAc,wBAAoB,IAAK,CACtC1uF,IAAK,EACL27C,OAAO,oBAAgB+yC,EAAIl6E,OAC5B,KAAM,KACP,wBAAoB,QAAQ,IAClC,wBAAoB,OAAQ,MAAM,qBAAiBk6E,EAAI3wF,MAAO,GAC7D88G,EAAensB,EAAIp3F,QACb,kBAAc,wBAAoB,OAAQ,IAAY,qBAAiBwjH,EAAapsB,EAAIp3F,OAAQ,KACjG,wBAAoB,QAAQ,IACnC,GAAuC,MAC1C,OACL,MACA,kBAAc,wBAAoB,MAAO,GAAY,IAAKm0D,EAAO,KAAOA,EAAO,GAAK,EAC/E,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,IACjE,wBAAoB,OAAQ,KAAM,0BAA2B,WAG7E,wBAAoB,mBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,KAAM,KAAM,CAC5B8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,oBAAsB,MAAO,KACzF,qBAAiB,UAAW,qBAAiBi/D,EAAe3/G,MAAMlJ,QAAU,KAAM,IAClF,wBAAoB,SAAU,CAC1B4pD,MAAO,6BACPp9B,MAAO,kBACP6tC,SAAS,mBAAe4uD,EAAgB,CAAC,UAC1C,IAAKvvD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,4BAA8B,MAAO,IACvE,qBAAiB,UAAW,SAGvCi/D,EAAe3/G,MAAMlJ,OAAS,IACxB,kBAAc,wBAAoB,MAAO,GAAY,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY6oH,EAAe3/G,MAAQyzF,KAC/E,kBAAc,wBAAoB,SAAU,CAChD1uF,IAAK0uF,EAAIt9F,GACTuqD,OAAO,oBAAgB,CAAC,sBAAuB,CAAE,aAAck/D,EAAensB,EAAIp3F,SAClFinB,MAAO,MAAQmwE,EAAI3wF,KACnBquD,SAAS,mBAAgBN,GAnIlC,CAAC/iB,IAChB,MAAM2lD,EAAM6rB,EAAQt/G,MAAMgE,KAAKuvB,GAAKA,EAAEp9B,KAAO23C,GAC7C,IAAK2lD,EACD,OACJ,MAAMwsB,EAAaZ,EAAc5rB,GAC3ByrB,EAAiB,IAAIz9D,EAAQpoD,aAC9B6lH,EAAe/6G,SAAS87G,KAEzBf,EAAejpH,KAAKgqH,GACpBx+D,EAAQ/T,eAAewxE,KA0HiC,CAAYzrB,EAAIt9F,IAAM,CAAC,UAC5D,CACEs9F,EAAQ,OACF,kBAAc,wBAAoB,IAAK,CACtC1uF,IAAK,EACL27C,OAAO,oBAAgB,CAAC+yC,EAAIl6E,KAAM,cACnC,KAAM,KACP,wBAAoB,QAAQ,IAClC,wBAAoB,OAAQ,IAAY,qBAAiBk6E,EAAI3wF,MAAO,GACnE88G,EAAensB,EAAIp3F,QACb,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiBwjH,EAAapsB,EAAIp3F,OAAQ,KAClG,wBAAoB,QAAQ,GAClCm0D,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,wBAA0B,MAAO,KAC9F,GAAuB,MAC1B,WAEL,kBAAc,wBAAoB,MAAO,GAAa,IAAK8P,EAAO,KAAOA,EAAO,GAAK,EAChF,wBAAoB,IAAK,CAAE9P,MAAO,uBAAyB,MAAO,IAClE,wBAAoB,OAAQ,KAAM,YAAa,WAG/D,wBAAoB,iBACpB8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,yCAA2C,EACrG,wBAAoB,IAAK,CAAEA,MAAO,wBAClC,wBAAoB,OAAQ,KAAM,kCAClC,MAGhB,I,QCrYJ,MAEA,IAFiC,QAAgB,GAAQ,CAAC,CAAC,YAAY,qB,eCJvE,MAAM,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,cACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,iCAEL,GAAa,CAAEA,MAAO,oCACtB,GAAa,CAAEA,MAAO,0BACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,sCAEL,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBAIvBy/D,GAAiB,QAEvB,IAA6B,qBAAiB,CAC1Cn/D,OAAQ,wBACRhc,MAAO,CACHo7E,WAAY,CAAC,EACbxvD,WAAY,CAAC,GAEjB1P,MAAO,CAAC,qBACR,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EAGRO,GAAa,EAAAvhB,EAAA,KACbigF,GAAmB,IAAAxyG,UAAS,IAEvB8zC,EAAWznD,gBAAkB8qC,EAAMo7E,YAExC7+D,EAAOC,EAEP8+D,GAAc,IAAAjiH,UAAS,IAAK2mC,EAAM4rB,aAElC2vD,GAAqB,IAAAniH,KAAIkiH,EAAYj/E,UAAY,IAEjDm/E,GAAe,IAAApiH,KAAI,MAEnBqiH,GAAe,IAAAriH,MAAI,GAEnBsiH,GAAa,IAAAtiH,KAAI,MAEjBuiH,GAAoB,IAAAviH,MAAI,GACxBwiH,EAAe,CAAEhoH,EAAG,EAAGC,EAAG,GAC1BgoH,EAAkB,CAAEjoH,EAAG,EAAGC,EAAG,GAE7BioH,GAAiB,IAAA1iH,KAAI,MAErB2iH,GAAoB,IAAAlzG,UAAS,KAC/B,IAAKyyG,EAAYj/E,SACb,MAAO,CAAC,EACZ,MAAMh6B,EAAUi5G,EAAYj5G,SAAW,EACjCC,EAAUg5G,EAAYh5G,SAAW,EACjCC,GAAS+4G,EAAY/4G,OAAS,KAAO,IAC3C,MAAO,CACH08C,gBAAiB,OAAOq8D,EAAYj/E,YACpC6iB,mBAAoB,gBACpBC,eAAqC,SAArBm8D,EAAYhkH,KAAkB,OAASgkH,EAAYhkH,KACnE+nD,UAAW,aAAah9C,OAAaC,aAAmBC,KACxD+8C,gBAAiB,gBACjBF,iBAAkB,eAkF1B,SAAS48D,IACLz/D,EAAK,oBAAqB,IAAK++D,GACnC,CAIA,SAASW,IACLD,GACJ,CAIA,SAASE,EAAiBniH,GACtB,MAAI,YAAaA,EACN,CAAEnG,EAAGmG,EAAEy8F,QAAQ,GAAG17B,QAASjnE,EAAGkG,EAAEy8F,QAAQ,GAAGx7B,SAE/C,CAAEpnE,EAAGmG,EAAE+gE,QAASjnE,EAAGkG,EAAEihE,QAChC,CAIA,SAASmhD,EAAuBpiH,GAC5B,IAAKuhH,EAAYj/E,SACb,OACJs/E,EAAkB3gH,OAAQ,EAC1B,MAAM+sD,EAAMm0D,EAAiBniH,GAC7B6hH,EAAahoH,EAAIm0D,EAAIn0D,EACrBgoH,EAAa/nH,EAAIk0D,EAAIl0D,EACrBgoH,EAAgBjoH,EAAI0nH,EAAYj5G,SAAW,EAC3Cw5G,EAAgBhoH,EAAIynH,EAAYh5G,SAAW,EAE3C,MAAMm6E,EAAM/9E,OAAOC,OAAOipC,SAC1B60C,EAAIvqB,iBAAiB,YAAakqD,GAClC3/B,EAAIvqB,iBAAiB,UAAWmqD,GAChC5/B,EAAIvqB,iBAAiB,YAAakqD,EAAuB,CAAEppD,SAAS,IACpEypB,EAAIvqB,iBAAiB,WAAYmqD,EACrC,CAIA,SAASD,EAAsBriH,GAC3B,IAAK4hH,EAAkB3gH,MACnB,OACJjB,EAAE0/D,iBACF,MAAM1R,EAAMm0D,EAAiBniH,GACvBuiH,EAAYZ,EAAW1gH,MAC7B,IAAKshH,EACD,OACJ,MAAM76C,EAAO66C,EAAU1hD,wBACjB87B,GAAW3uC,EAAIn0D,EAAIgoH,EAAahoH,GAAK6tE,EAAK3tE,MAAS,IACnD6iG,GAAW5uC,EAAIl0D,EAAI+nH,EAAa/nH,GAAK4tE,EAAKt7B,OAAU,IAE1Dm1E,EAAYj5G,QAAU4K,KAAKwP,KAAK,GAAIxP,KAAKyG,IAAI,GAAImoG,EAAgBjoH,EAAI8iG,IACrE4kB,EAAYh5G,QAAU2K,KAAKwP,KAAK,GAAIxP,KAAKyG,IAAI,GAAImoG,EAAgBhoH,EAAI8iG,GACzE,CAIA,SAAS0lB,IACL,IAAKV,EAAkB3gH,MACnB,OACJ2gH,EAAkB3gH,OAAQ,EAE1B,MAAMyhF,EAAM/9E,OAAOC,OAAOipC,SAC1B60C,EAAItqB,oBAAoB,YAAaiqD,GACrC3/B,EAAItqB,oBAAoB,UAAWkqD,GACnC5/B,EAAItqB,oBAAoB,YAAaiqD,GACrC3/B,EAAItqB,oBAAoB,WAAYkqD,GAEpCJ,GACJ,CAIA,SAASM,IACLf,EAAaxgH,OAAOw/E,OACxB,CAIA,SAAS01B,EAAiBlzG,GACtB,MAAMC,EAASD,EAAMC,OACfyH,EAAOzH,EAAOkzG,QAAQ,GACxBzrG,GASRjL,eAAgCiL,GAG5B,IADqB,CAAC,aAAc,YAAa,YAAa,cAC5CvF,SAASuF,EAAKrN,MAE5B,YADAmlH,MAAM,oCAIV,GAAI93G,EAAKpN,KAAO6jH,GAEZ,YADAqB,MAAM,oBAGV,IAGI,MAAM,KAAEj7G,EAAI,SAAE6C,SAAmB,SAAWM,SAEtC,KAAAR,gBAAem3G,EAAiBrgH,MAAOuG,EAAM6C,GAE/Ci3G,EAAiBrgH,QAAUglC,EAAMo7E,kBAC3B,KAAAl3G,gBAAe87B,EAAMo7E,WAAY75G,EAAM6C,GAG7C03G,EAAe9gH,QACf,SAAc8gH,EAAe9gH,OAGjC,MAAMuJ,QAAgB,SAAe82G,EAAiBrgH,OAClDuJ,IACAu3G,EAAe9gH,MAAQuJ,EACvB+2G,EAAYj/E,SAAW93B,GAG3B+2G,EAAYp+E,mBAAoB,EAChCo+E,EAAYh+E,iBAAchrC,EAC1BipH,EAAmBvgH,MAAQ,GAC3BghH,IACAhiH,QAAQe,KAAK,6CACjB,CACA,MAAOhB,GACHC,QAAQC,MAAM,oCAAqCF,GACnDyiH,MAAM,WACV,CACJ,CAnDQC,CAAiB/3G,GAGrBzH,EAAOjC,MAAQ,EACnB,CAmDAvB,eAAeijH,IACX,MAAM76G,EAAM05G,EAAmBvgH,MAAMwT,OACrC,GAAK3M,GAAOA,IAAQy5G,EAAYj/E,SAAhC,CAGA,GAAIx6B,EAAI+C,WAAW,YAAc/C,EAAI+C,WAAW,YAW5C,OATIk3G,EAAe9gH,SACf,SAAc8gH,EAAe9gH,OAC7B8gH,EAAe9gH,MAAQ,MAE3BsgH,EAAYj/E,SAAWx6B,EACvBy5G,EAAYh+E,YAAcz7B,EAC1By5G,EAAYp+E,mBAAoB,EAChC8+E,SACAhiH,QAAQe,KAAK,oCAAqC8G,GAItD,GAAIA,EAAI+C,WAAW,SACf,IACI,MAAM,KAAErD,EAAI,SAAE6C,SAAmB,SAAUvC,SAErC,KAAAqC,gBAAem3G,EAAiBrgH,MAAOuG,EAAM6C,GAE/Ci3G,EAAiBrgH,QAAUglC,EAAMo7E,kBAC3B,KAAAl3G,gBAAe87B,EAAMo7E,WAAY75G,EAAM6C,GAG7C03G,EAAe9gH,QACf,SAAc8gH,EAAe9gH,OAGjC,MAAMuJ,QAAgB,SAAe82G,EAAiBrgH,OAClDuJ,IACAu3G,EAAe9gH,MAAQuJ,EACvB+2G,EAAYj/E,SAAW93B,GAE3B+2G,EAAYp+E,mBAAoB,EAChCo+E,EAAYh+E,iBAAchrC,EAC1B0pH,IACAhiH,QAAQe,KAAK,kDACjB,CACA,MAAOhB,GACHC,QAAQC,MAAM,0CAA2CF,GACzDyiH,MAAM,SACV,CA3CM,CA6Cd,CAIA/iH,eAAekjH,IAEPb,EAAe9gH,SACf,SAAc8gH,EAAe9gH,OAC7B8gH,EAAe9gH,MAAQ,MAG3B,UACU,SAAiBqgH,EAAiBrgH,MAG5C,CACA,MAAOjB,GACHC,QAAQc,KAAK,oCAAqCf,EACtD,CACAuhH,EAAYj/E,SAAW,GACvBi/E,EAAYp+E,mBAAoB,EAChCo+E,EAAYh+E,iBAAchrC,EAC1BipH,EAAmBvgH,MAAQ,GAC3BghH,GACJ,CACA,OAlSA,IAAArkG,OAAM,IAAMqoB,EAAM4rB,WAAYkoB,IAC1Bz5E,OAAOC,OAAOghH,EAAaxnC,GACvBA,EAAOx2C,cACPi+E,EAAmBvgH,MAAQ84E,EAAOx2C,cAEvC,CAAE1lB,MAAM,KAGX,IAAAD,OAAM,IAAMqoB,EAAM4rB,WAAWvvB,SAAUsuB,IAE/BA,IAAW2wD,EAAYj/E,WAEnBy/E,EAAe9gH,OAAS8gH,EAAe9gH,QAAU2vD,KACjD,SAAcmxD,EAAe9gH,OAC7B8gH,EAAe9gH,MAAQ,MAE3BsgH,EAAYj/E,SAAWsuB,GAAU,GAE7BA,GAAUA,EAAO/lD,WAAW,WAC5Bk3G,EAAe9gH,MAAQ2vD,GAE3B3wD,QAAQe,KAAK,wCAAyC4vD,EAAS,MAAQ,WA4C/E,IAAAK,WAAU,MArCVvxD,iBAGI,GAAI6hH,EAAYj/E,SACRi/E,EAAYj/E,SAASz3B,WAAW,WAChCk3G,EAAe9gH,MAAQsgH,EAAYj/E,eAI3C,GAAIi/E,EAAYh+E,YACZg+E,EAAYj/E,SAAWi/E,EAAYh+E,YACnCi+E,EAAmBvgH,MAAQsgH,EAAYh+E,iBAEtC,GAAIg+E,EAAYp+E,kBACjB,IAEI,IAAI34B,QAAgB,SAAe82G,EAAiBrgH,OAE/CuJ,GAAW82G,EAAiBrgH,QAAUglC,EAAMo7E,aAC7C72G,QAAgB,SAAey7B,EAAMo7E,aAErC72G,IAEIu3G,EAAe9gH,QACf,SAAc8gH,EAAe9gH,OAEjC8gH,EAAe9gH,MAAQuJ,EACvB+2G,EAAYj/E,SAAW93B,EAG/B,CACA,MAAOxK,GACHC,QAAQc,KAAK,oCAAqCf,EACtD,CAER,CAGI8wD,MAGJ,IAAAI,iBAAgB,KACR6wD,EAAe9gH,SACf,SAAc8gH,EAAe9gH,OAC7B8gH,EAAe9gH,MAAQ,QA0NxB,CAACuwD,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,CACzDA,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,kBAClC,qBAAiB,WACjB,wBAAoB,OAAQ,CAAElV,MAAO,CAAE,cAAe,MAAO,YAAa,OAAQ,MAAS,sBAAuB,cAAe,SAAY,eAC7I,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnCglB,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,eAC/C,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,QAAS,GAAY,EACrC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAmB,QAAIzvD,GACtFx0D,KAAM,WACNgyG,SAAU4S,GACX,KAAM,KAAuC,CAC5C,CAAC,iBAAiBX,EAAYtlH,WAElCw1D,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,UAAY,MAAO,aAKlG,wBAAoB,YACnB4/D,EAAmB,UACb,kBAAc,wBAAoB,MAAO,GAAY,EACpD,wBAAoB,qBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,CACvB5vD,QAAS,aACTtyD,IAAKsiH,EACLhgE,OAAO,oBAAgB,CAAC,yBAA0B,CAAEs/D,SAAUW,EAAkB3gH,MAAO,cAAesgH,EAAYj/E,YAClHsxD,aAAa,mBAAewuB,EAAwB,CAAC,YACrDnrB,cAAc,mBAAemrB,EAAwB,CAAC,aACvD,EACC,wBAAoB,cACnBb,EAAoB,WACd,kBAAc,wBAAoB,MAAO,CACxCv7G,IAAK,EACL27C,MAAO,oBACPlV,OAAO,oBAAgBu1E,EAAkB/gH,QAC1C,KAAM,MACN,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,cACpByrD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,qBAAuB,EACjF,wBAAoB,IAAK,CAAEA,MAAO,kBAClC,wBAAoB,OAAQ,KAAM,YAClC,KACL,MACR,OAEP,wBAAoB,YACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAeowD,EAAkB,CAAC,UAC5C,IAAK/wD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,IAC5D,qBAAiB,UAAW,QAEpC,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAY4vD,EAAazgH,OAASygH,EAAazgH,MAAQ,CAAC,WAC5G,IAAKwwD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,WAAY,QAErC,wBAAoB,SAAU,CAC1BA,MAAO,uCACPyQ,SAAS,mBAAewwD,EAAuB,CAAC,UACjD,IAAKnxD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,IAC3D,qBAAiB,QAAS,QAElC,wBAAoB,cACpB,wBAAoB,QAAS,CACzBgQ,QAAS,eACTtyD,IAAKoiH,EACLnkH,KAAM,OACNk5G,OAAQ,4CACR/pE,MAAO,CAAE,QAAW,QACpB6iE,SAAU6G,GACX,KAAM,QAEb,wBAAoB,kBACnBuL,EAAkB,QACZ,kBAAc,wBAAoB,MAAO,GAAY,EACpD,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBjwD,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAqB7wD,MAAQ6wD,GAC3Fx0D,KAAM,OACNy0D,YAAa,wBACbpQ,MAAO,2BACPsR,OAAQ0vD,EACR/G,SAAS,cAAU+G,EAAoB,CAAC,WACzC,KAAM,KAAuC,CAC5C,CAAC,aAAanB,EAAmBvgH,aAGvC,wBAAoB,QAAQ,IAClC,wBAAoB,SACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpCwwD,EAAO,MAAQA,EAAO,KAAM,qBAAiB,QAAS,KACtD,wBAAoB,OAAQ,IAAa,qBAAiB8vD,EAAY/4G,OAAS,IAAK,MAExF,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBipD,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAiB,MAAIzvD,GACpFx0D,KAAM,QACNqc,IAAK,KACL+I,IAAK,MACL0sF,KAAM,IACNE,SAAU4S,GACX,KAAM,KAAuC,CAC5C,CACI,aACAX,EAAY/4G,WACP,EACL,CAAE40D,QAAQ,WAK1B,wBAAoB,UACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,qBAAiB,SAAU,KACvD,wBAAoB,OAAQ,IAAa,qBAAiB8vD,EAAYp/F,SAAW,IAAK,MAE1F,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBsvC,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAmB,QAAIzvD,GACtFx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,MACL0sF,KAAM,IACNE,SAAU4S,GACX,KAAM,KAAuC,CAC5C,CACI,aACAX,EAAYp/F,aACP,EACL,CAAEi7C,QAAQ,WAK1B,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,cAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAgB,KAAIzvD,GACnFnQ,MAAO,aACP2tD,SAAU4S,GACX,IAAKzwD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,SAAU,CAAExwD,MAAO,SAAW,MAAO,IACzD,wBAAoB,SAAU,CAAEA,MAAO,QAAU,MAAO,MACtD,KAAuC,CAC7C,CAAC,eAAesgH,EAAYhkH,aAIxC,wBAAoB,UACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpCk0D,EAAO,MAAQA,EAAO,KAAM,qBAAiB,SAAU,KACvD,wBAAoB,OAAQ,IAAa,qBAAiB8vD,EAAY1+E,MAAQ,KAAM,MAExF,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB4uB,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAgB,KAAIzvD,GACnFx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,KACL0sF,KAAM,IACNE,SAAU4S,GACX,KAAM,KAAuC,CAC5C,CACI,aACAX,EAAY1+E,UACP,EACL,CAAEu6B,QAAQ,cAM5B,wBAAoB,QAAQ,KAG9C,I,QCzjBJ,MAEA,IAFiC,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBCJjE,GAAa,CAAEzb,MAAO,qBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,QACtB,GAAa,CAAEA,MAAO,2CACtB,GAAa,CAAEA,MAAO,4BACtB,GAAa,CAAEA,MAAO,4BACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,oBAEL,GAAa,CAAC,WACd,GAAc,CAAEA,MAAO,0BACvB,GAAc,CAAC,WACf,GAAc,CAAC,WACf,GAAc,CAChB37C,IAAK,EACL27C,MAAO,oBAEL,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,yBAEL,GAAc,CAAC,SACf,GAAc,CAChB37C,IAAK,EACL27C,MAAO,iBCxBX,ID2B6B,qBAAiB,CAC1CM,OAAQ,sBACRhc,MAAO,CACH/qC,QAAS,CAAC,EACVC,eAAgB,CAAC,EACjBopB,MAAO,CAAC,EACRs+F,KAAM,CAAC,EACPC,YAAa,CAAExlH,KAAM8hB,QAASoiC,SAAS,GACvCuhE,YAAa,CAAEzlH,KAAM8hB,QAASoiC,SAAS,GACvCwhE,cAAe,CAAExhE,QAAS,IAE9BW,MAAO,CAAC,SAAU,kBAAmB,SAAU,OAAQ,UAAW,eAAgB,aAAc,SAAU,iBAAkB,aAAc,iBAAkB,cAC5J,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EACRG,EAAOC,EACPwgE,GAAiB,IAAA5jH,MAAI,GACrB6jH,GAAqB,IAAAp0G,UAAS,KAChC,IAAKm3B,EAAM9qC,eACP,MAAO,OACX,MAAM01B,EAASoV,EAAM/qC,QAAQ+J,KAAK0xB,GAAKA,EAAEv/B,KAAO6uC,EAAM9qC,gBACtD,OAAO01B,EAASA,EAAO9sB,KAAO,SAElC,SAASo/G,IACLF,EAAehiH,OAASgiH,EAAehiH,KAC3C,CAcA,SAASmiH,EAAmBpjH,GACTA,EAAEkD,OACLo+E,QAAQ,0BAChB2hC,EAAehiH,OAAQ,EAE/B,CAOA,OANA,IAAAgwD,WAAU,KACNpjB,SAASsqB,iBAAiB,QAASirD,MAEvC,IAAA1yC,aAAY,KACR7iC,SAASuqB,oBAAoB,QAASgrD,KAEnC,CAAC5xD,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,EACnC,sBAAiB,qBAAiBpP,EAAQ99B,OAAS,QAAU,IAAK,IAClE,wBAAoB,OAAQ,IAAY,qBAAiB89B,EAAQwgE,MAAQ,WAAY,MAEzF,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,YACpB,wBAAoB,MAAO,CACvBlhE,OAAO,oBAAgB,CAAC,sBAAuB,CAAEh/C,KAAMsgH,EAAehiH,UACvE,EACC,wBAAoB,SAAU,CAC1B0gD,MAAO,0BACPyQ,SAAS,mBAAe+wD,EAAgB,CAAC,UAC1C,EACC,wBAAoB,OAAQ,IAAY,qBAAiBD,EAAmBjiH,OAAQ,GACpFwwD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,uBAAyB,MAAO,OAEhG,qBAAgB,wBAAoB,MAAO,GAAY,EACnD,wBAAoB,WACpB,wBAAoB,MAAO,CACvBA,OAAO,oBAAgB,CAAC,oBAAqB,CAAEwQ,QAAS9P,EAAQlnD,eAAgB,mBAAoBknD,EAAQ0gE,eAC5G3wD,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,IAAazP,EAAQ0gE,cA/ChGvgE,EAAK,wBACLygE,EAAehiH,OAAQ,IA8CgH,CAAC,WACjH,CACCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,0BAA4B,QAAS,IACrGU,EAAmB,cACb,kBAAc,wBAAoB,OAAQ,GAAY,UACvD,wBAAoB,QAAQ,IACnC,IACH,wBAAoB,YACnB,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYA,EAAQnnD,QAAU21B,KAC1E,kBAAc,wBAAoB,MAAO,CAC7C7qB,IAAK6qB,EAAOz5B,GACZuqD,OAAO,oBAAgB,CAAC,oBAAqB,CACrCwQ,OAAQ9P,EAAQlnD,iBAAmB01B,EAAOz5B,GAC1C,iBAAkBirD,EAAQ0gE,aAAe1gE,EAAQlnD,iBAAmB01B,EAAOz5B,GAC3E,mBAAoBirD,EAAQ0gE,aAAe1gE,EAAQlnD,iBAAmB01B,EAAOz5B,MAErFg7D,SAAS,mBAAgBN,IAAW,OAAEzP,EAAQ0gE,cA5DxD3rH,EA4DoFy5B,EAAOz5B,GA3D7GorD,EAAK,SAAUprD,QACf6rH,EAAehiH,OAAQ,IAF3B,IAAsB7J,GA4DiG,CAAC,UACzF,EACC,wBAAoB,OAAQ,IAAa,qBAAiBy5B,EAAO9sB,MAAO,IACxE,wBAAoB,eAClBs+C,EAAQ0gE,aAAgBlyF,EAAOwyF,WAS3B,wBAAoB,QAAQ,KAR3B,kBAAc,wBAAoB,SAAU,CAC3Cr9G,IAAK,EACL27C,MAAO,wBACPp9B,MAAO,KACP6tC,SAAS,mBAAgBN,IAAW,OAjEtD16D,EAiEoEy5B,EAAOz5B,QAhE7ForD,EAAK,SAAUprD,GADnB,IAAsBA,GAiEiF,CAAC,UACjE,IAAKq6D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,MACzD,EAAe,MAE7B,wBAAoB,0BACnBU,EAAQ0gE,aAAe1gE,EAAQlnD,iBAAmB01B,EAAOz5B,KACnD,kBAAc,wBAAoB,SAAU,CAC3C4O,IAAK,EACL27C,MAAO,0BACPp9B,MAAO,cACP6tC,SAAS,mBAAgBN,GAAYN,EAAK8xD,MAAM,aAAczyF,EAAOz5B,IAAM,CAAC,UAC7E,IAAKq6D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,qBAAuB,MAAO,MAC9D,EAAe,MACvB,wBAAoB,QAAQ,IAClC,wBAAoB,iBACnBU,EAAQ0gE,aAAe1gE,EAAQlnD,iBAAmB01B,EAAOz5B,KACnD,kBAAc,wBAAoB,OAAQ,GAAa,QACxD,wBAAoB,QAAQ,IACnC,GAAuB,MAC1B,OACL,KAAuB,CACtB,CAAC,QAAQ6rH,EAAehiH,UAE7B,IACH,wBAAoB,YACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,UACpB,wBAAoB,SAAU,CAC1B0gD,MAAO,eACPp9B,MAAO,SACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYN,EAAK8xD,MAAM,WAAa,CAAC,WACzF,IAAK7xD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,QAElE,wBAAoB,SACpB,wBAAoB,SAAU,CAC1BA,MAAO,eACPp9B,MAAO,SACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYN,EAAK8xD,MAAM,QAAU,CAAC,WACtF,IAAK7xD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,QAElE,wBAAoB,qBACpB,gBAAY6P,EAAKmiC,OAAQ,kBAIrC,wBAAoB,eACnBtxC,EAAmB,cACb,kBAAc,wBAAoB,MAAO,GAAa,CACrDoP,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,iBAAmB,MAAO,IAC3F8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,kBAAoB,MAAO,KAC5F,wBAAoB,SAAU,CAC1BA,MAAO,eACPp9B,MAAO,OACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYN,EAAK8xD,MAAM,gBAAkB,CAAC,WAC9F,IAAK7xD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,uBAAyB,MAAO,QAE1E,wBAAoB,SAAU,CAC1BA,MAAO,eACPp9B,MAAO,OACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYN,EAAK8xD,MAAM,cAAgB,CAAC,WAC5F,IAAK7xD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,qBAAuB,MAAO,OAExE8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,MAAO,KAC7F,wBAAoB,SAAU,CAC1BA,MAAO,eACPp9B,MAAO,OACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYN,EAAK8xD,MAAM,UAAY,CAAC,WACxF,IAAK7xD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,QAEzE,wBAAoB,SAAU,CAC1BA,MAAO,eACPp9B,MAAO,SACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYN,EAAK8xD,MAAM,kBAAoB,CAAC,WAChG,IAAK7xD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,QAEzE,wBAAoB,SAAU,CAC1BA,MAAO,eACPp9B,MAAO,SACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYN,EAAK8xD,MAAM,cAAgB,CAAC,WAC5F,IAAK7xD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,kBAAoB,MAAO,OAErE8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,MAAO,KAC7F,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAAQ9P,EAAQ0gE,eAC1Dx+F,MAAO89B,EAAQ0gE,YAAc,WAAW1gE,EAAQ2gE,kBAAoB,OACpE5wD,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYN,EAAK8xD,MAAM,kBAAoB,CAAC,WAChG,IAAK7xD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,uBAAyB,MAAO,MAChE,GAAuB,IAChCU,EAAmB,cACb,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiBA,EAAQ2gE,eAAgB,KACjG,wBAAoB,QAAQ,OAEpC,wBAAoB,QAAQ,KAG9C,IEzOE,GAAa,CAAErhE,MAAO,mBACtB,GAAa,CAAEA,MAAO,4BACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAC,SACd,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,gDACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,gDACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,gDACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,4BACvB,GAAc,CAAC,WACf,GAAc,CAAEA,MAAO,iBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,iBACvB,GAAc,CAAEA,MAAO,qBACvB,GAAc,CAAC,WACf,GAAc,CAAC,QAAS,YACxB,GAAc,CAAC,QAAS,YACxB,GAAc,CAAEA,MAAO,0BACvB,GAAc,CAAEA,MAAO,gBACvB,GAAc,CAAEA,MAAO,uBACvB,GAAc,CAAC,QAAS,WACxB,GAAc,CAAEA,MAAO,qBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wCAe7B,IAA6B,qBAAiB,CAC1CM,OAAQ,aACR,KAAAG,CAAMC,GACF,MAAMO,GAAa,EAAAvhB,EAAA,KACbM,GAAc,EAAAxkB,EAAA,MACdulC,GAAU,EAAA5d,EAAA,MACVtsB,GAAQ,EAAAD,EAAA,KAKd,SAASgrG,IACL,OAAO3gE,EAAW1nD,SAAW,EACjC,CACA,SAASsoH,IACL,OAAO5gE,EAAWznD,cACtB,CAIA,SAASsoH,IACL,OAAO7gE,EAAWthB,kBAAoB,CAAC,CAC3C,CACA,SAASoiF,IACL,OAAO9gE,EAAWphB,gBACtB,CACA,SAASmiF,IACL,OAAO/gE,EAAW9mD,WAAa,EACnC,CACA,SAAS8nH,IACL,OAAOhhE,EAAWrhB,0BAA4B,CAAC,CACnD,CACA,SAAS8C,IACL,OAAOue,EAAWve,qBACtB,CAKA,MAAMw/E,GAAiB,IAAAxkH,KAAI,WACrBykH,GAAa,IAAAzkH,KAAI,WACjB0kH,GAAgB,IAAA1kH,KAAI,WAEpB2kH,GAAgB,IAAA3kH,KAAI,SAEpB4kH,GAAiB,IAAA5kH,KAAI,IAErB6kH,GAAgB,IAAA7kH,KAAI,IAEpBoiH,GAAe,IAAApiH,QAKM,IAAAyP,UAAS,KAChC,MAAMm0B,EAAWugF,IACjB,IAAKvgF,EACD,MAAO,OACX,MAAMpS,EAAS0yF,IAAgBt+G,KAAK0xB,GAAKA,EAAEv/B,KAAO6rC,GAClD,OAAOpS,GAAQ9sB,MAAQ,SAuB3B,SAASogH,IACLN,EAAe5iH,MAAQ2hD,EAAW/gB,qBAClCiiF,EAAW7iH,MAAQ2hD,EAAW9gB,iBAC9BiiF,EAAc9iH,MAAQ2hD,EAAWjnD,UACrC,CAIA,SAASyoH,IAzET,IAA2BhtH,IA0EL,KAzElBwrD,EAAWznD,eAAiB/D,EA2E5BwrD,EAAW7e,iBACX6e,EAAWze,yBACXggF,IACAD,EAAcjjH,MAAQ,GACtB2hD,EAAWre,iBACX/rB,EAAM7W,QAAQ,UAClB,CACA,SAAS0iH,EAAavtF,GAClB8rB,EAAW7rB,YAAYD,GACvBqtF,IACAD,EAAcjjH,MAAQ0iH,IACtBK,EAAc/iH,MAAQ0gC,EAAY3lC,OAAOsC,OAAS,QAClDka,EAAM7W,QAAQ,QAClB,CACA,SAAS2iH,EAAoBxtF,GACzB,MAAMjG,EAAS0yF,IAAgBt+G,KAAK0xB,GAAKA,EAAEv/B,KAAO0/B,GAC7CjG,GAEDmzE,QAAQ,WAAWnzE,EAAO9sB,aAC1B6+C,EAAW/rB,aAAaC,GACxBte,EAAMxX,KAAK,SAEnB,CAIA,SAASujH,IACL,IACI,MAAMthF,EAAWugF,IACjB,GAAIvgF,EAAU,CAEV,MAAMpS,EAAS0yF,IAAgBt+G,KAAK0xB,GAAKA,EAAEv/B,KAAO6rC,GAClD,GAAIpS,EAGA,OAFA+xB,EAAWpsB,oBAAoB3F,EAAO9sB,WACtCyU,EAAM7W,QAAQ,MAAMkvB,EAAO9sB,WAGnC,CAEAygH,GACJ,CACA,MAAOtkH,GACHD,QAAQC,MAAM,QAASA,GACvBsY,EAAMtY,MAAM,cAChB,CACJ,CACA,SAASskH,IACL9hE,EAAQzP,qBAAqB,CACzB1J,WAAY,QACZC,aAAc,GACdC,YAAa,GACbwzE,eAAiBl5G,GAASw/G,IAAgBvqG,KAAK2d,GAAKA,EAAE5yB,OAASA,IAChE,CACCmvC,OAASnvC,IACL6+C,EAAWpsB,oBAAoBzyB,GAC/ByU,EAAM7W,QAAQ,MAAMoC,WAGhC,CAIA,SAAS0gH,IACL9iF,EAAY/hB,SAASokG,EAAc/iH,OAEnCmX,WAAW,KAEP,MAAMssG,EAAOb,EAAe5iH,MAC5B4iH,EAAe5iH,MAAQyjH,GACxB,IACP,CAIA,SAASC,IACL/hE,EAAWlf,wBAAwB,SAAUmgF,EAAe5iH,MAChE,CACA,SAAS2jH,IACLhiE,EAAWjf,oBAAoB,SAAUmgF,EAAW7iH,MACxD,CACA,SAAS4jH,IACLjiE,EAAWziC,cAAc,SAAU4jG,EAAc9iH,MACrD,CAaA,SAAS6jH,EAAsBtjG,GAC3B,MAAMw0B,EAAOytE,IACb,OAAOjiG,EAAMw0B,KAAKjtC,OAAOk0D,GAAKjnB,EAAKinB,EAAEj3D,MAAMjO,MAC/C,CAKA,SAASgtH,EAAY/+G,GAEjB,OADay9G,IACDz9G,IAAQ,EACxB,CACA,SAASg/G,EAAiBh/G,GACtB,MAAM/E,EAAQ8jH,EAAY/+G,GAE1B,OAAI/E,GAASA,EAAM4J,WAAW,OAA0B,IAAjB5J,EAAMlJ,QAAiC,IAAjBkJ,EAAMlJ,QACxDkJ,EAKJ,SACX,CACA,SAASgkH,EAAOj/G,EAAK/E,GACbA,EAAMwT,OACNmuC,EAAWhf,YAAY59B,EAAK/E,EAAMwT,QAGlCmuC,EAAW/e,eAAe79B,EAElC,CAQA,SAASk/G,EAAcl/G,GACnB,MAAMm/G,EAAYvB,IAClB,YAA0BrrH,IAAnB4sH,EAAUn/G,IAAyC,MAAnBm/G,EAAUn/G,EACrD,CACA,SAASo/G,EAAcp/G,GAEnB,OADkB49G,IACD59G,IAAQ,GAC7B,CAOA,SAASq/G,IACLziE,EAAWte,aAAa4/E,EAAcjjH,MAC1C,CACA,SAASqkH,IACDthB,QAAQ,qBACRkgB,EAAcjjH,MAAQ,GACtB2hD,EAAWre,iBAEnB,CACA,SAASghF,IACL,MAAMrsH,EAAO,CACToE,KAAM,mBACNU,QAAS,MACTsM,WAAW,IAAIpM,MAAO6yB,cACtBzyB,MAAO0lH,EAAc/iH,MACrB3F,UAAWooH,IACXtoH,UAAWqoH,IACXpoH,kBAAmBuoH,IACnB/nH,iBAAkBwoC,IAClBvoC,UAAW6nH,KAETn8G,EAAO,IAAIq8F,KAAK,CAAC7qG,KAAKC,UAAUC,EAAM,KAAM,IAAK,CAAEoE,KAAM,qBACzDwK,EAAM9D,IAAIiE,gBAAgBT,GAC1BwB,EAAI6kC,SAAS8J,cAAc,KACjC3uC,EAAEmnE,KAAOroE,EACTkB,EAAE86F,SAAW,aAAa5lG,KAAKC,aAC/B6K,EAAEy3E,QACFz8E,IAAIC,gBAAgB6D,GACpB0Q,EAAM7W,QAAQ,QAClB,CACA,SAAS6jH,IACL/D,EAAaxgH,OAAOw/E,OACxB,CAIA,SAASglC,EAAgBxkH,GAErB,MAAMykH,EAAYzkH,EAAMyT,MAAM,sDAC9B,GAAIgxG,EAAW,CACX,MAAMtnG,EAAIhS,SAASs5G,EAAU,IACvBrnG,EAAIjS,SAASs5G,EAAU,IACvBj0G,EAAIrF,SAASs5G,EAAU,IACvB18G,EAAI08G,EAAU,GAAKr2D,WAAWq2D,EAAU,IAAM,EAE9CC,EAAS95D,IACX,MAAM3tC,EAAM2tC,EAAEr0D,SAAS,IACvB,OAAsB,IAAf0mB,EAAInmB,OAAe,IAAMmmB,EAAMA,GAG1C,MAAO,CAAEA,IADG,IAAIynG,EAAMvnG,KAAKunG,EAAMtnG,KAAKsnG,EAAMl0G,KAC9B0Q,QAASjP,KAAKy1C,MAAU,IAAJ3/C,GACtC,CAEA,GAAI/H,EAAM4J,WAAW,MAAyB,IAAjB5J,EAAMlJ,OAAc,CAC7C,MAAMmmB,EAAMjd,EAAMkR,MAAM,EAAG,GACrByzG,EAAW3kH,EAAMkR,MAAM,EAAG,GAC1B+uB,EAAQ90B,SAASw5G,EAAU,IAAM,IACvC,MAAO,CAAE1nG,MAAKiE,QAASjP,KAAKy1C,MAAc,IAARznB,GACtC,CACA,OAAO,IACX,CAIA,SAAS2kF,IACL,IAAK3B,EAAcjjH,MAAMwT,OAErB,YADA+D,EAAMxX,KAAK,YAIf,MAAM8kH,EAAc,CAAC,EACrB,IAAK,MAAOrtH,EAAGwkE,KAAM38D,OAAOsN,QAAQ,OAChCk4G,EAAY7oD,GAAKxkE,EAGrB,IAAIstH,EAAS7B,EAAcjjH,MACvB+kH,EAAiB,EAErB,MAAM1mB,EAAQ,4DACd,IAAI5qF,EACJ,KAAqD,QAA7CA,EAAQ4qF,EAAMl9E,KAAK8hG,EAAcjjH,SAAkB,CACvD,MAAM0hC,EAASjuB,EAAM,GACfzT,EAAQyT,EAAM,GAAGD,OACjBzO,EAAM8/G,EAAYnjF,GACxB,GAAI38B,EAAK,CAEL,MAAMigH,EAAahlH,EAEbiL,EAASu5G,EAAgBQ,GAC3B/5G,GACA02C,EAAWhf,YAAY59B,EAAKkG,EAAOgS,KACnC0kC,EAAW5e,mBAAmBh+B,EAAKkG,EAAOiW,WAG1CygC,EAAWhf,YAAY59B,EAAKigH,GAE5BrjE,EAAW5e,mBAAmBh+B,EAAK,MAEvCggH,GACJ,CACJ,CACA,GAAIA,EAAiB,EAAG,CAGpB,IAAK,MAAOvtH,EAAGwkE,KAAM38D,OAAOsN,QAAQ,OAAoB,CAEpD,MAAMs4G,EAAc,IAAInoE,OAAO,GAAGkf,oBAAqB,MACvD8oD,EAASA,EAAOltG,QAAQqtG,EAAa,GACzC,CAIAH,EAASA,EAAOltG,QAAQ,gBAAiB,QAAQpE,OACjDyvG,EAAcjjH,MAAQ8kH,EACtBnjE,EAAWte,aAAayhF,GAExB5B,IACA3rG,EAAM7W,QAAQ,QAAQqkH,aAC1B,MAEIxtG,EAAMxX,KAAK,cAEnB,CACA,SAASmlH,EAAiBljH,GACtB,MAAM0H,EAAO1H,EAAMC,OAAOkzG,QAAQ,GAClC,IAAKzrG,EACD,OACJ,MAAMssC,EAAS,IAAIC,WACnBD,EAAOG,OAASp3C,IACZ,IACI,MAAMpI,EAAUoI,EAAEkD,QAAQH,OAE1B,GAAI4H,EAAK5G,KAAKqiH,SAAS,SAAU,CAC7B,MAAMltH,EAAOF,KAAKwH,MAAM5I,GACxB,GAAkB,qBAAdsB,EAAKoE,KAqCL,MAAM,IAAI4N,MAAM,aA9BhB,GALIhS,EAAKoF,QACL0lH,EAAc/iH,MAAQ/H,EAAKoF,MAC3BqjC,EAAY/hB,SAAS1mB,EAAKoF,QAG1BpF,EAAKoC,UAAW,CAChB,MAAMA,EAAYooH,IAClBpoH,EAAUC,YAAcrC,EAAKoC,UAAUC,aAAe,SACtDD,EAAUE,UAAYtC,EAAKoC,UAAUE,UACrCF,EAAUG,QAAUvC,EAAKoC,UAAUG,SAAW,SAC9CH,EAAUI,MAAQxC,EAAKoC,UAAUI,MACjCJ,EAAUK,WAAazC,EAAKoC,UAAUK,YAAc,SACpDL,EAAUM,SAAW1C,EAAKoC,UAAUM,QACxC,CACA,GAAI1C,EAAKkC,UAAW,CAChB,MAAM46C,EAAOytE,IACbnjH,OAAOC,OAAOy1C,EAAM98C,EAAKkC,UAC7B,CAEA,GAAIlC,EAAKmC,kBAAmB,CACxB,MAAM8pH,EAAYvB,IAClBtjH,OAAOC,OAAO4kH,EAAWjsH,EAAKmC,kBAClC,CAEInC,EAAK2C,kBACL+mD,EAAWxe,oBAAoBlrC,EAAK2C,kBAEpC3C,EAAK4C,YACLooH,EAAcjjH,MAAQ/H,EAAK4C,UAC3B8mD,EAAWte,aAAaprC,EAAK4C,YAEjCqoH,IACA3rG,EAAM7W,QAAQ,UAKtB,MAGIuiH,EAAcjjH,MAAQrJ,EACtBgrD,EAAWte,aAAa1sC,GACxB4gB,EAAM7W,QAAQ,UAEtB,CACA,MAAOgtB,GACH1uB,QAAQC,MAAM,qBAAsByuB,GACpCnW,EAAMtY,MAAM,eAChB,GAEJ+2C,EAAOo/D,WAAW1rG,GAElB1H,EAAMC,OAAOjC,MAAQ,EACzB,CACA,OA9WA,IAAAgwD,WAAUvxD,gBAEAkjD,EAAW7f,kBAEjBohF,IAEAH,EAAc/iH,MAAQ0gC,EAAY3lC,OAAOsC,OAAS,QAElD4lH,EAAcjjH,MAAQ0iH,OAG1B,IAAA/lG,OAAM,IAAM8lG,IAAuB,IAAMS,IAAmB,CAAEtmG,MAAM,KACpE,IAAAD,OAAM,IAAM+jB,EAAY3lC,OAAOsC,MAAO+nH,IAClCrC,EAAc/iH,MAAQolH,GAAY,UAiW/B,CAAC70D,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,gBACpB,iBAAa60D,GAAqB,CAC9BprH,QAASqoH,IACT,mBAAoBC,IACpBj/F,MAAO,OACPs+F,KAAM,YACNhvE,SAAUwwE,EACVkC,iBAAkBnC,EAClBoC,SAAUlC,EACVpxE,OAAQqxE,EACRkC,SAAUjC,GACX,KAAM,EAAe,CAAC,UAAW,sBACpC,wBAAoB,YACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,CACnC/yD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,oBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,cAC/C,KACJ,wBAAoB,MAAO,GAAY,EACnC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAgB7wD,MAAQ6wD,GACtFnQ,MAAO,aACP2tD,SAAUmV,GACX,GACE,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAO,MAAUnmH,KACzE,kBAAc,wBAAoB,SAAU,CAChD0H,IAAK1H,EAAMlH,GACX6J,MAAO3C,EAAMlH,KACd,qBAAiBkH,EAAMyF,MAAO,EAAqB,MACtD,OACL,KAAuC,CACtC,CAAC,eAAeigH,EAAc/iH,kBAMlD,wBAAoB,WACpB,iBAAaylH,GAAuB,CAChC,eAAe,WAAO,OACtB,cAAeriF,IACf,sBAAuBotB,EAAO,KAAOA,EAAO,GAAKt1C,IAAO,WAAOymC,GAAYxe,oBAAoBjoB,KAChG,KAAM,EAAe,CAAC,cAAe,iBACxC,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,CACnCs1C,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,wBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,eACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,aACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,iBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAiB7wD,MAAQ6wD,GACvFx0D,KAAM,OACNqkD,MAAO,kBACPoQ,YAAa,UACbu9C,SAAUqV,GACX,KAAM,KAAuC,CAC5C,CAAC,aAAad,EAAe5iH,UAEjC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBwwD,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAiB7wD,MAAQ6wD,GACvFx0D,KAAM,QACNqkD,MAAO,mBACP2tD,SAAUqV,GACX,KAAM,KAAuC,CAC5C,CAAC,aAAad,EAAe5iH,cAIzC,wBAAoB,gBACpB,wBAAoB,MAAO,GAAa,CACpCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,cACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,oBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAa7wD,MAAQ6wD,GACnFx0D,KAAM,OACNqkD,MAAO,kBACPoQ,YAAa,UACbu9C,SAAUsV,GACX,KAAM,KAAuC,CAC5C,CAAC,aAAad,EAAW7iH,UAE7B,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBwwD,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAa7wD,MAAQ6wD,GACnFx0D,KAAM,QACNqkD,MAAO,mBACP2tD,SAAUsV,GACX,KAAM,KAAuC,CAC5C,CAAC,aAAad,EAAW7iH,cAIrC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,aAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAgB7wD,MAAQ6wD,GACtFx0D,KAAM,OACNqkD,MAAO,kBACPoQ,YAAa,UACbu9C,SAAUuV,GACX,KAAM,KAAuC,CAC5C,CAAC,aAAad,EAAc9iH,UAEhC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBwwD,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAgB7wD,MAAQ6wD,GACtFx0D,KAAM,QACNqkD,MAAO,mBACP2tD,SAAUuV,GACX,KAAM,KAAuC,CAC5C,CAAC,aAAad,EAAc9iH,kBAMhD,wBAAoB,cACpB,wBAAoB,MAAO,GAAa,CACpCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,wBAClC,qBAAiB,cACjB,wBAAoB,OAAQ,CACxBA,MAAO,OACPlV,MAAO,CAAE,cAAe,OAAQ,cAAe,WAChD,oBACH,KACJ,wBAAoB,cACpB,wBAAoB,MAAO,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAO,OAAmB,CAACjrB,EAAOhV,MAC1F,kBAAc,wBAAoB,MAAO,CAC7CxG,IAAKwb,EAAMpqB,GACXuqD,OAAO,oBAAgB,CAAC,gBAAiB,CAAEr8C,MAAiB,IAAVkH,EAAaxH,KAAMwH,KAAU,WAAO,OAAkBzU,OAAS,MAClH,EACC,wBAAoB,MAAO,CACvB4pD,MAAO,uBACPyQ,SAAS,mBAAgBN,GA1ZzD,SAAqB60D,GACjB,MAAMn6G,EAAQy3G,EAAehjH,MAAMyL,QAAQi6G,GACvCn6G,GAAS,EACTy3G,EAAehjH,MAAM+f,OAAOxU,EAAO,GAGnCy3G,EAAehjH,MAAM/J,KAAKyvH,EAElC,CAkZoE,CAAanlG,EAAMpqB,IAAM,CAAC,UAC/D,EACC,wBAAoB,IAAK,CACrBuqD,OAAO,oBAAgB,CAAC,MAAOngC,EAAMhH,QACtC,KAAM,IACT,wBAAoB,OAAQ,MAAM,qBAAiBgH,EAAMzd,MAAO,IAChE,wBAAoB,OAAQ,IAAa,qBAAiB+gH,EAAsBtjG,IAAU,KAAM,qBAAiBA,EAAMw0B,KAAKj+C,QAAS,IACrI,wBAAoB,IAAK,CACrB4pD,OAAO,oBAAgB,CAAC,MAAOsiE,EAAehjH,MAAMmE,SAASoc,EAAMpqB,IAAM,gBAAkB,qBAC5F,KAAM,IACV,EAAe,KAClB,qBAAgB,wBAAoB,MAAO,GAAa,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYoqB,EAAMw0B,KAAOinB,IAC7E,OAAQ,kBAAc,wBAAoB,MAAO,CAC7Cj3D,IAAKi3D,EAAEj3D,IACP27C,MAAO,gCACR,EACC,wBAAoB,oBACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,IAAa,qBAAiBsb,EAAExiD,OAAQ,IACnE,wBAAoB,MAAO,GAAa,EAja/DzU,EAkawCi3D,EAAEj3D,IAja9Cy9G,IACCz9G,IAgaqDk/G,EAAcjoD,EAAEj3D,OAChC,kBAAc,wBAAoB,SAAU,CAC3CA,IAAK,EACL27C,MAAO,gBACPp9B,MAAO,OACP6tC,SAAS,mBAAgBN,GA5YjF,SAAkB9rD,GACd48C,EAAW/e,eAAe79B,GAC1B48C,EAAW3e,sBAAsBj+B,EACrC,CAyY4F,CAAUi3D,EAAEj3D,KAAO,CAAC,UACzD,IAAKyrD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,MACxD,EAAe,MACvB,wBAAoB,QAAQ,KAClC,wBAAoB,QAAS,CACzB1gD,MAAO8jH,EAAY9nD,EAAEj3D,KACrB1I,KAAM,OACNqkD,MAAO,kBACPoQ,YAAa,UACbu9C,SAAUtvG,GAAKilH,EAAOhoD,EAAEj3D,IAAKhG,EAAEkD,OAAOjC,QACvC,KAAM,GAAgC,KACzC,wBAAoB,QAAS,CACzBA,MAAO+jH,EAAiB/nD,EAAEj3D,KAC1B1I,KAAM,QACNqkD,MAAO,mBACP2tD,SAAUtvG,GAAKilH,EAAOhoD,EAAEj3D,IAAKhG,EAAEkD,OAAOjC,QACvC,KAAM,GAAgC,SAGjD,wBAAoB,sBACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,OAAQ,IAAa,sBAAiB,WAAO,OAAmBg8D,EAAEj3D,MAAO,IAC7F,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,QAAS,CACzB1I,KAAM,QACNqkD,MAAO,kBACPhoC,IAAK,IACL+I,IAAK,MACLzhB,MAAOmkH,EAAcnoD,EAAEj3D,KACvB4+F,QAAS5kG,GA3Z7D,SAAuBgG,EAAKmc,GACxBygC,EAAW5e,mBAAmBh+B,EAAKmc,EACvC,CAyZkEykG,CAAc3pD,EAAEj3D,IAAKsG,OAAOtM,EAAEkD,OAAOjC,SACpD,KAAM,GAAgC,KACzC,wBAAoB,OAAQ,IAAa,qBAAiBmkH,EAAcnoD,EAAEj3D,MAAO,SAvcjI,IAAqBA,IA2ce,OACL,KAAuB,CACtB,CAAC,QAAQi+G,EAAehjH,MAAMmE,SAASoc,EAAMpqB,QAElD,KACH,WAGZ,wBAAoB,cACpB,wBAAoB,MAAO,GAAa,CACpCq6D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,eACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,qBAAiB,YAAa,KAC1D,wBAAoB,OAAQ,IAAa,qBAAiByyD,EAAcjjH,MAAMlJ,QAAU,MAAO,MAEnG,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1B4pD,MAAO,eACPyQ,SAAS,mBAAemzD,EAAW,CAAC,UACrC,IAAK9zD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,mBAAqB,MAAO,IAC9D,qBAAiB,QAAS,QAElC,wBAAoB,SAAU,CAC1BA,MAAO,eACPyQ,SAAS,mBAAeozD,EAAW,CAAC,UACrC,IAAK/zD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,IAC5D,qBAAiB,QAAS,QAElC,wBAAoB,SAAU,CAC1BA,MAAO,eACPp9B,MAAO,gCACP6tC,SAAS,mBAAeyzD,EAAkB,CAAC,UAC5C,IAAKp0D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,IAC3D,qBAAiB,UAAW,QAEpC,wBAAoB,SAAU,CAC1BA,MAAO,8BACPyQ,SAAS,mBAAekzD,EAAU,CAAC,UACpC,IAAK7zD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,IAC3D,qBAAiB,QAAS,WAI1C8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,gBAAkB,EAC9E,wBAAoB,IAAK,KAAM,WAC/B,wBAAoB,OAAQ,KAAM,2BAClC,wBACA,wBAAoB,OAAQ,KAAM,uBAClC,wBAAoB,OAAQ,KAAM,oBAClC,KACJ,qBAAgB,wBAAoB,WAAY,CAC5C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAgB7wD,MAAQ6wD,GACtFnQ,MAAO,iBACPoQ,YAAa,oBACb7jD,KAAM,IACNohG,SAAU+V,GACX,KAAM,KAAuC,CAC5C,CAAC,aAAanB,EAAcjjH,gBAK5C,wBAAoB,6BACpB,wBAAoB,cACpB,wBAAoB,QAAS,CACzB0wD,QAAS,eACTtyD,IAAKoiH,EACLnkH,KAAM,OACNk5G,OAAQ,kBACR/pE,MAAO,CAAE,QAAW,QACpB6iE,SAAU6W,GACX,KAAM,OAGrB,IC9wBJ,GAFoB,GCDd,GAAa,CAAExkE,MAAO,yBACtB,GAAa,CAAC,WACd,GAAa,CAAC,WACd,GAAa,CAAEA,MAAO,eACtB,GAAa,CAAC,uBACd,GAAa,CAAEA,MAAO,gBACtB,GAAa,CAAC,uBACd,GAAa,CAAC,WAAY,QAAS,WACnC,GAAa,CAAEA,MAAO,qBACtB,GAAc,CAAEA,MAAO,aACvB,GAAc,CAAEA,MAAO,uBACvB,GAAc,CAAEA,MAAO,qBACvB,GAAc,CAAC,uBACf,GAAc,CAAC,uBACf,GAAc,CAAC,WACf,GAAc,CAAEA,MAAO,2BACvB,GAAc,CAAC,uBACf,GAAc,CAAEA,MAAO,aACvB,GAAc,CAAEA,MAAO,0BACvB,GAAc,CAAC,uBACf,GAAc,CAAC,WACf,GAAc,CAAEA,MAAO,0CACvB,GAAc,CAAEA,MAAO,8CACvB,GAAc,CAAEA,MAAO,0BACvB,GAAc,CAAEA,MAAO,uBACvB,GAAc,CAAEA,MAAO,qBACvB,GAAc,CAAEA,MAAO,qBAS7B,IAA6B,qBAAiB,CAC1CM,OAAQ,wBACR,KAAAG,CAAMC,GACF,MAAMhO,GAAkB,EAAA5jB,GAAA,KAClBiyB,GAAU,EAAA5d,EAAA,MACVtsB,GAAQ,EAAAD,EAAA,KAERsuG,GAAsB,IAAAxnH,KAAI,CAAC,GAC3BoiH,GAAe,IAAApiH,KAAI,MACnBynH,GAAmB,IAAAznH,KAAI,MACvB0nH,GAAW,IAAA1nH,MAAI,GAEf0jH,GAAc,IAAA1jH,MAAI,GAClB2nH,GAAuB,IAAA3nH,KAAI,IAAI0T,KAE/Bk0G,GAAoB,IAAAx9C,OAAMp1B,EAAgBr4C,OAAQ,mBACxD,UAAoB,CAAEwmE,QAASskD,EAAkBrkD,MAAOwkD,IACxD,MAAMC,EAAa,KACfH,EAAS9lH,OAAS8lH,EAAS9lH,OAW/B,SAASkmH,EAAmB/vH,GACxBi9C,EAAgBtd,YAAY3/B,GAC5BohB,EAAM7W,QAAQ,UAClB,CACA,SAASylH,IACDpjB,QAAQ,+BACR3vD,EAAgBrd,2BAChBxe,EAAM7W,QAAQ,aAEtB,CACA,SAASu7G,EAAmB9lH,GACxB,MAAMy5B,EAASwjB,EAAgBn5C,QAAQ+J,KAAM0xB,GAAMA,EAAEv/B,KAAOA,GACvDy5B,GAEDmzE,QAAQ,WAAWnzE,EAAO9sB,aAC1BswC,EAAgBxd,aAAaz/B,GAC7BohB,EAAMxX,KAAK,SAEnB,CACA,SAASujH,IACL,MAAMthF,EAAWoR,EAAgBl5C,eACjC,GAAI8nC,EAAU,CACV,MAAMpS,EAASwjB,EAAgBn5C,QAAQ+J,KAAM0xB,GAAMA,EAAEv/B,KAAO6rC,GAC5D,GAAIpS,EAGA,OAFAwjB,EAAgB7d,oBAAoB3F,EAAO9sB,WAC3CyU,EAAM7W,QAAQ,MAAMkvB,EAAO9sB,WAGnC,CAEAygH,GACJ,CACA,SAASA,IACL9hE,EAAQzP,qBAAqB,CACzB1J,WAAY,aACZC,aAAc,GACdC,YAAa,GACbwzE,eAAiBl5G,GAASswC,EAAgBn5C,QAAQ8d,KAAM2d,GAAMA,EAAE5yB,OAASA,IAC1E,CACCmvC,OAASnvC,IACLswC,EAAgB7d,oBAAoBzyB,GACpCyU,EAAM7W,QAAQ,MAAMoC,WAGhC,CAEA,SAASsjH,IACL,MAAMpkF,EAAWoR,EAAgBl5C,eACjC,IAAK8nC,EAED,YADAzqB,EAAMF,QAAQ,YAGlB,MAAMuY,EAASwjB,EAAgBn5C,QAAQ+J,KAAM0xB,GAAMA,EAAEv/B,KAAO6rC,GAC5D,IAAKpS,EACD,OAOJy2F,EANa,CACThqH,KAAM,yBACNU,QAAS,MACTsM,WAAW,IAAIpM,MAAO6yB,cACtB71B,QAAS,CAAC21B,IAEK,cAAcA,EAAO9sB,QAAQ7F,KAAKC,cACrDqa,EAAM7W,QAAQ,MAAMkvB,EAAO9sB,WAC/B,CAEA,SAASwjH,IAOLD,EANa,CACThqH,KAAM,yBACNU,QAAS,MACTsM,WAAW,IAAIpM,MAAO6yB,cACtB71B,QAASm5C,EAAgBn5C,SAEV,yBAAyBgD,KAAKC,cACjDqa,EAAM7W,QAAQ,UAClB,CACA,SAAS2lH,EAAapuH,EAAMsuH,GACxB,MAAMhgH,EAAO,IAAIq8F,KAAK,CAAC7qG,KAAKC,UAAUC,EAAM,KAAM,IAAK,CAAEoE,KAAM,qBACzDwK,EAAM9D,IAAIiE,gBAAgBT,GAC1BwB,EAAI6kC,SAAS8J,cAAc,KACjC3uC,EAAEmnE,KAAOroE,EACTkB,EAAE86F,SAAW0jB,EACbx+G,EAAEy3E,QACFz8E,IAAIC,gBAAgB6D,EACxB,CAEA,SAAS2/G,IACLhG,EAAaxgH,OAAOw/E,OACxB,CAEA,SAASinC,EAAoBzkH,GACzB,MAAM0H,EAAO1H,EAAMC,OAAOkzG,QAAQ,GAClC,IAAKzrG,EACD,OACJ,MAAMssC,EAAS,IAAIC,WACnBD,EAAOG,OAASp3C,IACZ,IACI,MAAMpI,EAAUoI,EAAEkD,QAAQH,OACpB7J,EAAOF,KAAKwH,MAAM5I,GACxB,GAAkB,2BAAdsB,EAAKoE,MAAqCuM,MAAMwL,QAAQnc,EAAKgC,SAAU,CACvE,IAAIysH,EAAgB,EACpBzuH,EAAKgC,QAAQ2M,QAAS+/G,IAGlB,GADiBvzE,EAAgBn5C,QAAQ+J,KAAM0xB,GAAMA,EAAEv/B,KAAOwwH,EAAexwH,IAC/D,CAGV,MAAMoV,EAAQ6nC,EAAgBn5C,QAAQya,UAAWghB,GAAMA,EAAEv/B,KAAOwwH,EAAexwH,IAC/Ei9C,EAAgBn5C,QAAQsR,GAASo7G,CACrC,MAEIvzE,EAAgBn5C,QAAQhE,KAAK0wH,GAEjCD,MAGJtzE,EAAgB10C,aAChB6Y,EAAM7W,QAAQ,QAAQgmH,QAC1B,MAEInvG,EAAMtY,MAAM,YAEpB,CACA,MAAOyuB,GACH1uB,QAAQC,MAAM,QAASyuB,GACvBnW,EAAMtY,MAAM,cAChB,GAEJ+2C,EAAOo/D,WAAW1rG,GAElB1H,EAAMC,OAAOjC,MAAQ,EACzB,EA1IA,IAAAgwD,WAAU,KACD5c,EAAgBr4C,OAAOW,iBACxB03C,EAAgBr4C,OAAOW,eAAiBiqF,MA8IhD,SAASihC,IACLxzE,EAAgBr4C,OAAOU,WAAWmL,QAASysB,IACvCuyF,EAAoB5lH,MAAMqzB,EAAIl9B,KAAM,GAE5C,CAEA,SAAS0wH,IACLzzE,EAAgBr4C,OAAOU,WAAWmL,QAASysB,IACvCuyF,EAAoB5lH,MAAMqzB,EAAIl9B,KAAM,GAE5C,CAEA,SAAS2wH,IACLhF,EAAY9hH,OAAS8hH,EAAY9hH,MAC7B8hH,EAAY9hH,OACZ+lH,EAAqB/lH,MAAM8G,QAC3ByQ,EAAMxX,KAAK,6BAGXgmH,EAAqB/lH,MAAM8G,OAEnC,CAaA,SAASigH,EAAgB9wF,GACrB,GAAwC,IAApC8vF,EAAqB/lH,MAAM1D,KAE3B,YADAib,EAAMF,QAAQ,cAGlB,MAAM2vG,EAAe5zE,EAAgBn5C,QAAQ+J,KAAM0xB,GAAMA,EAAEv/B,KAAO8/B,GAClE,IAAK+wF,EACD,OAEJ,MAAMC,EAAe7zE,EAAgBr4C,OAAOU,WAAWqM,OAAQquB,GAAM4vF,EAAqB/lH,MAAM6C,IAAIszB,EAAEhgC,KACtGi9C,EAAgBpd,0BAA0BixF,EAAchxF,GACxD1e,EAAM7W,QAAQ,OAAOumH,EAAanwH,eAAekwH,EAAalkH,SAE9Dg/G,EAAY9hH,OAAQ,EACpB+lH,EAAqB/lH,MAAM8G,OAC/B,CAEA,MAAMogH,EAAqB,KACvB,MAAM9wF,EAAS,CACXjgC,GAAI,IACJ2M,KAAM,MACN9H,SAAS,EACTo0B,MAAO,CACH,CACIj5B,GAAI,IACJ2M,KAAM,OACN2M,OAAQ,GACRE,OAAQ,MAIpByjC,EAAgBve,aAAauB,GAE7BwvF,EAAoB5lH,MAAMo2B,EAAOjgC,KAAM,GAwBrCgxH,EAA6Br2D,IAC/B,MAAMhxC,EAAUszB,EAAgBr4C,OAAOW,gBAAkB,GACzD03C,EAAgBr4C,OAAOW,eAAiBokB,EAAUgxC,EAElD,MAAMwQ,EAAWukD,EAAiB7lH,MAC9BshE,GACAnqD,WAAW,KACPmqD,EAASnX,QACTmX,EAAS98B,UAAY88B,EAASn0B,aAE9B,MAAMqa,EAAMpU,EAAgBr4C,OAAOW,eAAe5E,OAClDwqE,EAAS0e,kBAAkBx4B,EAAKA,IACjC,IAGX,MAAO,CAAC+I,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,aACpB,iBAAa60D,GAAqB,CAC9BprH,SAAS,WAAOm5C,GAAiBn5C,QACjC,oBAAoB,WAAOm5C,GAAiBl5C,eAC5C,gBAAgB,EAChB,eAAgB4nH,EAAY9hH,MAC5B,iBAAkB+lH,EAAqB/lH,MAAM1D,KAC7CgnB,MAAO,OACPs+F,KAAM,YACNhvE,SAAUszE,EACVZ,iBAAkBa,EAClBZ,SAAUtJ,EACVhqE,OAAQqxE,EACRkC,SAAUjC,EACV6D,cAAeR,EACfS,YAAaR,EACbS,SAAUd,EACVe,gBAAiBnB,EACjBoB,YAAalB,EACbmB,gBAAiBX,EACjBY,YAAaX,GACd,KAAM,EAAe,CAAC,UAAW,mBAAoB,eAAgB,oBACxE,wBAAoB,YACnB,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAO3zE,GAAiBr4C,OAAOU,WAAY,CAAC43B,EAAKs0F,MACzG,kBAAc,wBAAoB,MAAO,CAC7C5iH,IAAKsuB,EAAIl9B,GACTuqD,OAAO,oBAAgB,CAAC,2CAA4C,CAC5D,eAAgBklE,EAAoB5lH,MAAMqzB,EAAIl9B,IAC9C,cAAe2rH,EAAY9hH,OAAS+lH,EAAqB/lH,MAAM6C,IAAIwwB,EAAIl9B,OAE/Eg7D,QAAUN,IAAW,OAACixD,EAAY9hH,OAnHhB4nH,EAmHiDv0F,EAAIl9B,GAlH/E4vH,EAAqB/lH,MAAM6C,IAAI+kH,GAC/B7B,EAAqB/lH,MAAMkD,OAAO0kH,GAGlC7B,EAAqB/lH,MAAMgQ,IAAI43G,QAGnC7B,EAAqB/lH,MAAQ,IAAI8R,IAAIi0G,EAAqB/lH,SA2G+B,KAnH7F,IAAkC4nH,IAoHnB,EACC,wBAAoB,YACpB,wBAAoB,MAAO,CACvBlnE,MAAO,sCACPyQ,QAAUN,IAAW,OAAEixD,EAAY9hH,QAnJ/B7J,EAmJuDk9B,EAAIl9B,QAlJ/EyvH,EAAoB5lH,MAAM7J,IAAOyvH,EAAoB5lH,MAAM7J,KADxC,IAACA,IAoJL,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,IAAK,CACrBuqD,OAAO,oBAAgB,CAAC,qCAAsC,CAAE,eAAgBklE,EAAoB5lH,MAAMqzB,EAAIl9B,QAC/G,KAAM,IACT,qBAAgB,wBAAoB,QAAS,CACzC,sBAAwB06D,GAAax9B,EAAQ,KAAIw9B,EACjDnQ,MAAO,yCACPoQ,YAAa,OACbK,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAe,OAAW,CAAC,WAC/D,KAAM,EAAe,IAAa,CACjC,CAAC,aAAan9B,EAAIvwB,WAG1B,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,QAAS,CACzB49C,MAAO,aACPyQ,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAe,OAAW,CAAC,WAC/D,EACC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAwBK,GAAax9B,EAAW,QAAIw9B,EACpDx0D,KAAM,YACP,KAAM,EAAe,IAAa,CACjC,CAAC,iBAAiBg3B,EAAIr4B,WAE1Bw1D,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,UAAY,MAAO,OAEtF,wBAAoB,SAAU,CAC1BA,MAAO,sBACPgf,SAAqB,SAAXrsC,EAAIl9B,GACdmtB,MAAkB,SAAX+P,EAAIl9B,GAAgB,WAAa,OACxCg7D,SAAS,mBAAgBN,IAAW,OAzGjCtlD,EAyGwDo8G,OAxG/E5kB,QAAQ,wBACR3vD,EAAgBpe,gBAAgBzpB,IAFV,IAACA,GAyGoE,CAAC,UACzE,IAAKilD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,MACzD,EAAe,OAE9B,EAAe,KAClB,wBAAoB,kBACpB,qBAAgB,wBAAoB,MAAO,GAAY,EACnD,wBAAoB,MAAO,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYrtB,EAAIjE,MAAO,CAACsE,EAAMm0F,MAC1E,kBAAc,wBAAoB,MAAO,CAC7C9iH,IAAK2uB,EAAKv9B,GACVuqD,MAAO,aACR,EACC,wBAAoB,gBACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAwBmQ,GAAan9B,EAAS,KAAIm9B,EAClDnQ,MAAO,oCACPoQ,YAAa,QACd,KAAM,EAAe,IAAc,CAClC,CAAC,aAAap9B,EAAK5wB,SAEvB,wBAAoB,qBACR,SAAXuwB,EAAIl9B,IACC,sBAAiB,kBAAc,wBAAoB,QAAS,CAC1D4O,IAAK,EACL,sBAAwB8rD,GAAan9B,EAAU,MAAIm9B,EACnDx0D,KAAM,QACNqkD,MAAO,wBACPp9B,MAAO,QACR,KAAM,EAAe,KAAe,CACnC,CAAC,aAAaoQ,EAAKhkB,UAErB,wBAAoB,QAAQ,MAEtC,wBAAoB,SAAU,CAC1BgxC,MAAO,4BACPp9B,MAAO,OACP6tC,QAAUN,GAhI/B,EAAC82D,EAAUE,KAC1Bz0E,EAAgBr4C,OAAOU,WAAWksH,GAAUv4F,MAAMrP,OAAO8nG,EAAW,IA+HX,CAAYF,EAAUE,IAC5C,IAAKr3D,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,MACzD,EAAe,OAE7B,wBAAoB,gBACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,SAAW,MAAO,KACjF,qBAAgB,wBAAoB,QAAS,CACzC,sBAAwBmQ,GAAan9B,EAAW,OAAIm9B,EACpDx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,MACL0sF,KAAM,IACNztD,MAAO,mBACR,KAAM,EAAe,IAAc,CAClC,CACI,aACAhtB,EAAKjkB,YACA,EACL,CAAE0sD,QAAQ,OAGlB,wBAAoB,OAAQ,IAAa,qBAAiBzoC,EAAKjkB,QAAS,MAE5E,wBAAoB,eACpB,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,WAAY,CAC5C,sBAAwBohD,GAAan9B,EAAW,OAAIm9B,EACpDnQ,MAAO,kCACPoQ,YAAa,iBACb7jD,KAAM,KACP,KAAM,EAAe,IAAc,CAClC,CAAC,aAAaymB,EAAK/jB,gBAI/B,SAER,wBAAoB,aACpB,wBAAoB,SAAU,CAC1B+wC,MAAO,4BACPyQ,QAAUN,GArLlB,CAAC82D,IACb,MAAMG,EAAU,CACZ3xH,GAAI,IACJ2M,KAAM,MACN2M,OAAQ,GACRE,OAAQ,GACRD,MAAO,WAEX0jC,EAAgBr4C,OAAOU,WAAWksH,GAAUv4F,MAAMn5B,KAAK6xH,IA6Kd,CAASH,IAC/B,IAAKn3D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,WAAY,MAC3B,EAAe,KAC1B,KAAuB,CACtB,CAAC,SAASklE,EAAoB5lH,MAAMqzB,EAAIl9B,QAE7C,GAAuB,MAC1B,OACJ,wBAAoB,aACpB,wBAAoB,SAAU,CAC1BuqD,MAAO,8CACPyQ,QAAS+1D,GACV,IAAK12D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,IACjE,qBAAiB,UAAW,QAEpC,wBAAoB,iBACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,MAAO,CAAEA,MAAO,eAAiB,EACjD,wBAAoB,IAAK,CAAEA,MAAO,qBAClC,qBAAiB,eAErB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,eACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,QAAU,SAAU,KACrF,wBAAoB,SAAU,CAC1BA,MAAO,mBACPyQ,QAASX,EAAO,KAAOA,EAAO,GAAMK,GAAYs2D,EAA0B,cAC3E,IAAK32D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,OAAQ,MAAM,qBAAiB,aAAkB,QAE7E,wBAAoB,SAAU,CAC1B9P,MAAO,mBACPyQ,QAASX,EAAO,KAAOA,EAAO,GAAMK,GAAYs2D,EAA0B,eAC3E,IAAK32D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,OAAQ,MAAM,qBAAiB,cAAmB,QAE9E,wBAAoB,SAAU,CAC1B9P,MAAO,mBACPyQ,QAASX,EAAO,KAAOA,EAAO,GAAMK,GAAYs2D,EAA0B,oBAC3E,IAAK32D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,OAAQ,MAAM,qBAAiB,mBAAwB,UAGvF,wBAAoB,cACpB,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,WAAY,CAC5CE,QAAS,mBACTtyD,IAAKynH,EACL,sBAAuBr1D,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAOzd,GAAiBr4C,OAAqB,eAAI81D,GAChHnQ,MAAO,sCACPoQ,YAAa,eACb7jD,KAAM,KACP,KAAM,KAAuB,CAC5B,CAAC,cAAa,WAAOmmC,GAAiBr4C,OAAOW,qBAGrD,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,CACvBglD,MAAO,kBACPyQ,QAAS80D,GACV,CACCz1D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,oBAAsB,MAAO,IAC3F8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,SAAU,KAAM,SAAU,KAC1E,wBAAoB,IAAK,CACrB9P,OAAO,oBAAgB,CAAC,MAAOolE,EAAS9lH,MAAQ,gBAAkB,qBACnE,KAAM,MAEb,qBAAgB,wBAAoB,KAAM,KAAM,IAAKwwD,EAAO,MAAQA,EAAO,IAAM,EACzE,wBAAoB,KAAM,KAAM,EAC5B,wBAAoB,OAAQ,MAAM,qBAAiB,cACnD,qBAAiB,uBACjB,IACJ,wBAAoB,KAAM,KAAM,EAC5B,wBAAoB,OAAQ,MAAM,qBAAiB,eACnD,qBAAiB,wBACjB,IACJ,wBAAoB,KAAM,KAAM,EAC5B,wBAAoB,OAAQ,MAAM,qBAAiB,oBACnD,qBAAiB,kBACjB,MACF,KAAuB,CAC7B,CAAC,QAAQs1D,EAAS9lH,kBAMtC,wBAAoB,cACpB,wBAAoB,QAAS,CACzB0wD,QAAS,eACTtyD,IAAKoiH,EACLnkH,KAAM,OACNk5G,OAAQ,QACR/pE,MAAO,CAAE,QAAW,QACpB6iE,SAAUoY,GACX,KAAM,OAGrB,I,QC/iBJ,MAEA,IAFiC,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBCJjE,GAAa,CAAE/lE,MAAO,oBACtB,GAAa,CAAC,OAEdqnE,GAAgB,0ECAtB,IDE6B,qBAAiB,CAC1C/mE,OAAQ,WACRhc,MAAO,CACH3D,SAAU,CAAEkf,QAAS,KAEzBW,MAAO,CAAC,QACR,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EACRG,EAAOC,EAEPwmE,GAAa,IAAAn6G,UAAS,IACjBm3B,EAAM3D,UAAsC,KAA1B2D,EAAM3D,SAAS7tB,OAAgBwxB,EAAM3D,SAAW0mF,IAE7E,SAASE,EAAgBlpH,GACrB,MAAMw3C,EAAMx3C,EAAEkD,OACd,GAAIs0C,EAAI2xE,cAAgB3xE,EAAIi7C,cAAe,CACvC,MAAM/pC,EAAQlR,EAAI2xE,aAAe3xE,EAAIi7C,cACrCjwC,EAAK,OAAQkG,EACjB,CACJ,CACA,SAAS0gE,EAAiBppH,GAEtB,MAAMw3C,EAAMx3C,EAAEkD,OACVs0C,EAAIryC,MAAQ6jH,KACZxxE,EAAIryC,IAAM6jH,GAElB,CACA,MAAO,CAACx3D,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,MAAO,CACvBtsD,IAAK8jH,EAAWhoH,MAChBu+G,IAAK,yBACL79D,MAAO,0BACP0nE,OAAQH,EACRjrD,QAASmrD,GACV,KAAM,GAAgC,KACzC,wBAAoB,UACpB33D,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,2BAA6B,MAAO,MAG9G,IE7CE,GAAa,CAAEA,MAAO,qBACtB,GAAa,CAAEA,MAAO,8BACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,8BAEL,GAAa,CAAEA,MAAO,4BACtB,GAAa,CAAEA,MAAO,gCACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,iCAEL,GAAa,CACf37C,IAAK,EACL27C,MAAO,iCAEL,GAAa,CAAEA,MAAO,kCACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,gCChBX,IDmB6B,qBAAiB,CAC1CM,OAAQ,YACRhc,MAAO,CACHqjF,SAAU,CAAC,EACXC,UAAW,CAAE/nE,QAAS,WACtB9kD,WAAY,CAAE8kD,QAAS,IAAM,IAC7B/nC,MAAO,CAAC,EACR+vG,QAAS,CAAElsH,KAAM8hB,QAASoiC,SAAS,GACnC/kD,SAAU,CAAEa,KAAM8hB,QAASoiC,SAAS,IAExC,KAAAY,CAAMC,GACF,MAAMpc,EAAQoc,EACRonE,GAAkB,IAAA36G,UAAS,IACxBm3B,EAAMxpC,SAEJ,MADIwpC,EAAMqjF,UAIrB,SAASI,EAASlwE,GACd,OAAKA,EAGEA,EACF/uB,MAAM,IACN/yB,IAAIiyH,GAED,aAAah/F,KAAKg/F,GACXA,EACJz2G,KAAKkH,SAAW,GAAM,MAAQuvG,GAEpC3xH,KAAK,IAVC,EAWf,CAEA,MAAM4xH,GAAe,IAAA96G,UAAS,IACrBm3B,EAAMxpC,SAEJwpC,EAAMxsB,MAAM/hB,IAAIgyH,GADZzjF,EAAMxsB,OAGrB,MAAO,CAAC+3C,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,aACpBA,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,8BAAgC,MAAO,KACrG,wBAAoB,UACpB8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,mCAAqC,MAAO,IAC1G8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,mCAAqC,MAAO,KAC1G,wBAAoB,wBACpB8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,2DAA6D,MAAO,IAClI8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,2DAA6D,MAAO,IAClI8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,2DAA6D,MAAO,IAClI8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,2DAA6D,MAAO,KACpI,wBAAoB,UACpB8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,2BAA6B,MAAO,KACpG,wBAAoB,UACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,YACpB8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,+BAAiC,EAC3F,wBAAoB,MAAO,CACvB5nD,MAAO,KACPqyC,OAAQ,KACRy9E,QAAS,YACTj7G,KAAM,gBACP,EACC,wBAAoB,OAAQ,CAAEwoB,EAAG,yEAErC,KACJ,wBAAoB,UACnBirB,EAAe,UACT,kBAAc,wBAAoB,MAAO,GAAY,IAAKoP,EAAO,KAAOA,EAAO,GAAK,EAC/E,wBAAoB,MAAO,CAAE9P,MAAO,8BAAgC,MAAO,IAC3E,wBAAoB,IAAK,CAAEA,MAAO,mCAAqC,YAAa,UAEzF,kBAAc,wBAAoB,WAAW,CAAE37C,IAAK,GAAK,EACxD,wBAAoB,SACpB,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,KAAM,IAAY,qBAAiByjH,EAAgBxoH,OAAQ,GAC/EwwD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,8BAAgC,MAAO,OAEzG,wBAAoB,WAClBU,EAAQ5lD,UAAY4lD,EAAQ3lD,WAAW3E,OAAS,IAC3C,kBAAc,wBAAoB,MAAO,GAAY,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYsqD,EAAQ3lD,WAAY,CAACotH,EAAU39G,MACvF,kBAAc,wBAAoB,OAAQ,CAC9CnG,IAAKmG,EACLw1C,MAAO,qCACR,qBAAiBmoE,GAAW,KAC/B,SAELznE,EAAQ5lD,UAAY4lD,EAAQ3lD,WAAW3E,OAAS,IAC5C,kBAAc,wBAAoB,MAAO,GAAY,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYsqD,EAAQ3lD,WAAY,CAACotH,EAAU39G,MACvF,kBAAc,wBAAoB,OAAQ,CAC9CnG,IAAKmG,EACLw1C,MAAO,oCACR,WACH,UAEN,wBAAoB,QAAQ,IACtC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CAClCioE,EAAa3oH,MAAMlJ,OAAS,IACtB,kBAAc,wBAAoB,MAAO,GAAY,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY6xH,EAAa3oH,MAAO,CAACuxB,EAAMrmB,MACnF,kBAAc,wBAAoB,MAAO,CAC7CnG,IAAKmG,EACLw1C,MAAO,iCACR,qBAAiBnvB,GAAO,KAC3B,UAEN,wBAAoB,QAAQ,MAEvC,MACP,wBAAoB,UACpBi/B,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,kCAAoC,EAC9F,wBAAoB,MAAO,CACvB5nD,MAAO,KACPqyC,OAAQ,KACRy9E,QAAS,YACTj7G,KAAM,gBACP,EACC,wBAAoB,OAAQ,CAAEwoB,EAAG,yEAErC,QAIpB,IEpJE,GAAa,CAAEuqB,MAAO,aACtB,GAAa,CAAC,OAEd,GAAgB,6CCAtB,IDE6B,qBAAiB,CAC1CM,OAAQ,WACRhc,MAAO,CACH3D,SAAU,CAAEkf,QAAS,KAEzBW,MAAO,CAAC,QACR,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EACRG,EAAOC,EACPwmE,GAAa,IAAAn6G,UAAS,IACjBm3B,EAAM3D,UAAsC,KAA1B2D,EAAM3D,SAAS7tB,OAAgBwxB,EAAM3D,SAAW,IAE7E,SAAS4mF,EAAgBlpH,GACrB,MAAMw3C,EAAMx3C,EAAEkD,OACd,GAAIs0C,EAAI2xE,cAAgB3xE,EAAIi7C,cAAe,CACvC,MAAM/pC,EAAQlR,EAAI2xE,aAAe3xE,EAAIi7C,cACrCjwC,EAAK,OAAQkG,EACjB,CACJ,CACA,SAAS0gE,EAAiBppH,GAEtB,MAAMw3C,EAAMx3C,EAAEkD,OACVs0C,EAAIryC,MAAQ,KACZqyC,EAAIryC,IAAM,GAElB,CACA,MAAO,CAACqsD,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,MAAO,CACvBtsD,IAAK8jH,EAAWhoH,MAChBu+G,IAAK,kBACL79D,MAAO,mBACP0nE,OAAQH,EACRjrD,QAASmrD,GACV,KAAM,GAAgC,IACzC33D,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,MAAO,MAGzG,IE3CE,GAAa,CACfkoE,QAAS,cACTj7G,KAAM,gBCCV,IDC6B,qBAAiB,CAC1CqzC,OAAQ,iBACRG,MAAMC,GAGK,CAACmP,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,IAAKA,EAAO,KAAOA,EAAO,GAAK,EACpF,wBAAoB,OAAQ,CACxBr6B,EAAG,uCACHjV,QAAS,OACV,MAAO,IACV,wBAAoB,OAAQ,CAAEiV,EAAG,gDAAkD,MAAO,IAC1F,wBAAoB,SAAU,CAC1B2yF,GAAI,KACJ9mE,GAAI,KACJ7kC,EAAG,IACHxP,KAAM,WACP,MAAO,UErBxB,GAAa,CAAE+yC,MAAO,cACtB,GAAa,CAAEA,MAAO,uBACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,0BAEL,GAAa,CACf37C,IAAK,EACL27C,MAAO,0BAEL,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,4BCqBfqoE,GAAyC,CACpDC,OArB6B,CAC7B7yH,GAAI,SACJ2M,KAAM,MACNkS,YAAa,kBACbi0G,iBAAkB,6CAClBC,WDH2B,qBAAiB,CAC1CloE,OAAQ,YACRhc,MAAO,CACHqjF,SAAU,CAAC,EACXC,UAAW,CAAE/nE,QAAS,WACtB9kD,WAAY,CAAE8kD,QAAS,IAAM,IAC7B/nC,MAAO,CAAC,EACRhd,SAAU,CAAEa,KAAM8hB,QAASoiC,SAAS,IAExC,KAAAY,CAAMC,GACF,MAAMpc,EAAQoc,EACRonE,GAAkB,IAAA36G,UAAS,IACxBm3B,EAAMxpC,SAEJ,MADIwpC,EAAMqjF,UAIrB,SAASI,EAASlwE,GACd,OAAKA,EAGEA,EACF/uB,MAAM,IACN/yB,IAAIiyH,GAED,aAAah/F,KAAKg/F,GACXA,EACJz2G,KAAKkH,SAAW,GAAM,MAAQuvG,GAEpC3xH,KAAK,IAVC,EAWf,CAEA,MAAM4xH,GAAe,IAAA96G,UAAS,IACrBm3B,EAAMxpC,SAEJwpC,EAAMxsB,MAAM/hB,IAAIgyH,GADZzjF,EAAMxsB,OAGrB,MAAO,CAAC+3C,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,EACzD,wBAAoB,SACpBA,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,uBAAyB,MAAO,KAC9F,wBAAoB,SACpB8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,4BAA8B,MAAO,IACnG8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,4BAA8B,MAAO,KACnG,wBAAoB,WACpB,iBAAayoE,GAAgB,CAAEzoE,MAAO,+CACtC,iBAAayoE,GAAgB,CAAEzoE,MAAO,+CACtC,iBAAayoE,GAAgB,CAAEzoE,MAAO,+CACtC,iBAAayoE,GAAgB,CAAEzoE,MAAO,+CACtC,wBAAoB,UACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,UACpB8P,EAAO,KAAOA,EAAO,IAAK,uBAAmB,0lBAAynB,KACtqB,wBAAoB,WACpB,wBAAoB,KAAM,CACtB9P,MAAO,wBACPlV,OAAO,oBAAgB,CAAE97B,MAAO0xC,EAAQknE,cACzC,qBAAiBE,EAAgBxoH,OAAQ,IAC5C,wBAAoB,aAClBohD,EAAQ5lD,UAAY4lD,EAAQ3lD,WAAW3E,OAAS,IAC3C,kBAAc,wBAAoB,MAAO,GAAY,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYsqD,EAAQ3lD,WAAY,CAACotH,EAAU39G,MACvF,kBAAc,wBAAoB,MAAO,CAC7CnG,IAAKmG,EACLw1C,MAAO,+BACR,qBAAiBmoE,GAAW,KAC/B,SAELznE,EAAQ5lD,UAAY4lD,EAAQ3lD,WAAW3E,OAAS,IAC5C,kBAAc,wBAAoB,MAAO,GAAY,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYsqD,EAAQ3lD,WAAY,CAACotH,EAAU39G,MACvF,kBAAc,wBAAoB,MAAO,CAC7CnG,IAAKmG,EACLw1C,MAAO,8BACR,SACH,UAEN,wBAAoB,QAAQ,IACtC,wBAAoB,YACpB,wBAAoB,MAAO,GAAY,GAClC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYioE,EAAa3oH,MAAO,CAACuxB,EAAMrmB,MACnF,kBAAc,wBAAoB,MAAO,CAC7CnG,IAAKmG,EACLw1C,MAAO,uBACR,EACC,wBAAoB,OAAQ,IAAY,qBAAiBnvB,GAAO,OAEpE,YAKxB,ICxFF63F,SAAU,IAgBVC,OAZ6B,CAC7BlzH,GAAI,SACJ2M,KAAM,OACNkS,YAAa,gBACbi0G,iBAAkB,0EAClBC,UAAW,GACXE,SAAU,KC5BZ,MAAM,GAAa,CAAE1oE,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAC,SACd,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,8BACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,yCACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,qBAEL,GAAc,CAAEA,MAAO,mBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,oBAEL,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAChB37C,IAAK,EACLymC,MAAO,CAAE,QAAW,qBClCxB,ID4C6B,qBAAiB,CAC1CwV,OAAQ,kBACR,KAAAG,CAAMC,GACF,MAAMkoE,GAAM,IAAAC,QAAO,sBAEb7mH,GAAQ,EAAA8sB,GAAA,MACR,OAAEz0B,IAAW,IAAAyuH,aAAY9mH,IACzB,KAAEsU,IAAS,EAAAM,EAAA,KAEXmyG,GAAoB,IAAArrH,MAAI,GACxBsrH,EAAsB,KACxBD,EAAkBzpH,OAASypH,EAAkBzpH,OAG3C2pH,GAAmB,IAAA97G,UAAS,KAC9B,MAAM8H,GAAS,UACf,IAAKA,EACD,MAAO,GACX,MAAMxP,EAAQ,GACd,IAAK,MAAMpB,KAAO4Q,EAAQ,CACtB,MAAMqb,EAAQrb,EAAO5Q,GACjBisB,EAAMluB,OAASkuB,EAAMluB,KAAKqB,SAAS,WAAa6sB,EAAMluB,KAAKqB,SAAS,QACpEgC,EAAMlQ,KAAK,CACP8O,IAAKisB,EAAM76B,IAAM4O,EACjByU,MAAOwX,EAAMluB,MAKzB,CACA,OAAOqD,IAKLyjH,GAAoB,IAAA/7G,UAAS,CAC/B,GAAA5K,GACI,MAAMy3G,EAAW,GAUjB,OARAiP,EAAiB3pH,MAAM4G,QAASlQ,IAC5B,MAAM+gB,EAAU/gB,EAAKqO,KAEyC,IAA5ChK,EAAOiF,MAAM9D,kBAAkBub,IAE7CijG,EAASzkH,KAAKwhB,KAGfijG,CACX,EACA,GAAAzzG,CAAI4iH,GAEK9uH,EAAOiF,MAAM9D,kBACdnB,EAAOiF,MAAM9D,gBAAkB,CAAC,GAGpCytH,EAAiB3pH,MAAM4G,QAASlQ,IAC5B,MAAM+gB,EAAU/gB,EAAKqO,IACA8kH,EAAe1lH,SAASsT,QAMKngB,IAA1CyD,EAAOiF,MAAM9D,gBAAgBub,WACtB1c,EAAOiF,MAAM9D,gBAAgBub,GAKxC1c,EAAOiF,MAAM9D,gBAAgBub,IAAW,GAGpD,IAGEqyG,GAAY,IAAAj8G,UAAS,IDvE1BxO,OAAOyO,OAAOi7G,KCyETgB,GAAe,IAAAl8G,UAAS,KAC1B,OAAQ9S,EAAOiF,MAAMlE,cACjB,IAAK,UACD,MAAO,gBACX,IAAK,SACD,MAAO,mBACX,IAAK,QACD,MAAO,YACX,QACI,MAAO,MAIbkuH,GAAY,IAAA5rH,KAAI,MAChB6rH,EAAgB,KAClBD,EAAUhqH,OAAOw/E,SAEf0qC,EAAmBzrH,MAAOuD,IAC5B,MAAMw/D,EAAQx/D,EAAMC,OACpB,GAAIu/D,EAAM2zC,OAAS3zC,EAAM2zC,MAAM,GAC3B,UACUzyG,EAAMuyB,eAAeusC,EAAM2zC,MAAM,IACvCn+F,EAAK,WAAY,UACrB,CACA,MAAOjY,GACHiY,EAAK,OAAQ,QACjB,CACA,QAEIwqD,EAAMxhE,MAAQ,EAClB,GAGR,MAAO,CAACuwD,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,CACzDA,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,cACjB,KACJ,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,aACpB,wBAAoB,MAAO,CACvBA,MAAO,+BACPyQ,QAASX,EAAO,KAAOA,EAAO,GAAMK,IAAY,WAAOy4D,GAAKa,WAAW,0BACxE,IAAK35D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACxD,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,iBAC/C,IACJ,wBAAoB,MAAO,CAAEA,MAAO,wBAA0B,EAC1D,wBAAoB,IAAK,CAAEA,MAAO,2BAClC,UAGhB,wBAAoB,UACpB8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CACnD9P,MAAO,qBACPlV,MAAO,CAAE,aAAc,SACxB,EACC,wBAAoB,IAAK,CAAEkV,MAAO,oBAClC,qBAAiB,aACjB,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,gBAC/C,KACJ,wBAAoB,MAAO,GAAY,EACnC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAO91D,GAAe,QAAI81D,GACzFnQ,MAAO,cACR,GACE,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYopE,EAAU9pH,MAAQ3C,KAC1E,kBAAc,wBAAoB,SAAU,CAChD0H,IAAK1H,EAAMlH,GACX6J,MAAO3C,EAAMlH,KACd,qBAAiBkH,EAAMyF,MAAO,EAAqB,MACtD,OACL,KAAuB,CACtB,CAAC,gBAAe,WAAO/H,GAAQO,gBAI3C,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnCk1D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,gBAC/C,KACJ,wBAAoB,MAAO,GAAY,EACnC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAO91D,GAAgB,SAAI81D,GAC1FnQ,MAAO,cACR,IAAK8P,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,SAAU,CAAExwD,MAAO,QAAU,QAAS,IAC1D,wBAAoB,SAAU,CAAEA,MAAO,UAAY,QAAS,IAC5D,wBAAoB,SAAU,CAAEA,MAAO,QAAU,QAAS,MACxD,KAAuB,CAC7B,CAAC,gBAAe,WAAOjF,GAAQQ,iBAI3C,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnCi1D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,eAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,QAAQ,WAAOn2D,GAAQS,YAC/D21D,QAASX,EAAO,KAAOA,EAAO,GAAMK,IAAY,WAAO91D,GAAQS,WAAY,WAAOT,GAAQS,WAC3F,KAAM,QAGjB,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpCg1D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,gBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,aACpB,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAO91D,GAAqB,cAAI81D,GAC/Fx0D,KAAM,OACNqkD,MAAO,qBACPoQ,YAAa,YACd,KAAM,KAAuB,CAC5B,CAAC,cAAa,WAAO/1D,GAAQK,kBAEjC,wBAAoB,WACpB,wBAAoB,SAAU,CAC1BslD,MAAO,eACPp9B,MAAO,OACP6tC,QAAS84D,GACV,IAAKz5D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,QAEpE,wBAAoB,cACpB,wBAAoB,QAAS,CACzBgQ,QAAS,YACTtyD,IAAK4rH,EACL3tH,KAAM,OACNk5G,OAAQ,UACR70D,MAAO,mBACP2tD,SAAU6b,GACX,KAAM,cAKzB,wBAAoB,UACpB15D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CACnD9P,MAAO,qBACPlV,MAAO,CAAE,aAAc,SACxB,EACC,wBAAoB,IAAK,CAAEkV,MAAO,iBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,YACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,YACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,iBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,QAAQ,WAAOn2D,GAAQa,oBAC/Du1D,QAASX,EAAO,KAAOA,EAAO,GAAMK,IAAY,WAAO91D,GAAQa,mBAAoB,WAAOb,GAAQa,mBACnG,KAAM,QAGjB,wBAAoB,YACpB,wBAAoB,MAAO,GAAa,CACpC40D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,YACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,eAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,QAAQ,WAAOn2D,GAAQc,kBAC/Ds1D,QAASX,EAAO,KAAOA,EAAO,GAAMK,IAAY,WAAO91D,GAAQc,iBAAkB,WAAOd,GAAQc,iBACjG,KAAM,QAGjB,wBAAoB,oBACnB,WAAOd,GAAQa,mBAAoB,WAAOb,GAAQc,iBAC5C,kBAAc,wBAAoB,WAAW,CAAEkJ,IAAK,GAAK,EACxD,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpCyrD,EAAO,MAAQA,EAAO,KAAM,qBAAiB,UAAW,KACxD,wBAAoB,OAAQ,IAAa,qBAAiBu5D,EAAa/pH,OAAQ,MAEnF,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuBwwD,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAO91D,GAAoB,aAAI81D,GAC9FnQ,MAAO,cACR,IAAK8P,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,SAAU,CAAExwD,MAAO,WAAa,WAAY,IAChE,wBAAoB,SAAU,CAAEA,MAAO,UAAY,OAAQ,IAC3D,wBAAoB,SAAU,CAAEA,MAAO,SAAW,MAAO,MACvD,KAAuB,CAC7B,CAAC,gBAAe,WAAOjF,GAAQe,iBAEnC,wBAAoB,wBACa,aAAhC,WAAOf,GAAQe,eACT,kBAAc,wBAAoB,MAAO,GAAa,EACrD,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB00D,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAO91D,GAAoB,aAAI81D,GAC9Fx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,KACL0sF,KAAM,IACNztD,MAAO,oBACR,KAAM,KAAuB,CAC5B,CACI,cACA,WAAO3lD,GAAQgB,kBACV,EACL,CAAEogE,QAAQ,OAGlB,wBAAoB,OAAQ,IAAa,sBAAiB,WAAOphE,GAAQgB,cAAe,OAE1F,wBAAoB,QAAQ,QAG1C,wBAAoB,wCACa,aAAhC,WAAOhB,GAAQe,eACT,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,GAAa,CACpC00D,EAAO,MAAQA,EAAO,KAAM,qBAAiB,UAAW,KACxD,wBAAoB,OAAQ,GAAa,SAAU,sBAAiB,WAAOz1D,GAAQE,WAAa,MAAO,MAE3G,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBu1D,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAO91D,GAAiB,UAAI81D,GAC3Fx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,KACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,cACA,WAAOpzG,GAAQE,eACV,EACL,CAAEkhE,QAAQ,YAKxB,wBAAoB,QAAQ,IAClC,wBAAoB,WACpB,wBAAoB,MAAO,CACvBzb,MAAO,mBACPyQ,QAASu4D,GACV,CACCl5D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,kBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,QAAQ,WAAOn2D,GAAQI,YAC/Dg2D,QAASX,EAAO,MAAQA,EAAO,KAAM,mBAAgBK,IAAY,WAAO91D,GAAQI,WAAY,WAAOJ,GAAQI,SAAW,CAAC,WACxH,KAAM,IACT,wBAAoB,IAAK,CACrBulD,OAAO,oBAAgB,CAAC,MAAO+oE,EAAkBzpH,MAAQ,gBAAkB,oBAC3EwrC,MAAO,CAAE,cAAe,MAAO,YAAa,OAAQ,MAAS,wBAC9D,KAAM,QAGjB,wBAAoB,kBACnBi+E,EAAuB,QACjB,kBAAc,wBAAoB,MAAO,GAAa,EACrD,iBAAajU,GAAY,CACrB5kD,WAAYg5D,EAAkB5pH,MAC9B,sBAAuBwwD,EAAO,MAAQA,EAAO,IAAOK,GAAY,EAAoB7wD,MAAQ6wD,GAC5F1qD,MAAOwjH,EAAiB3pH,MACxB,aAAc,kBACd,kBAAmB,gCACnB,aAAc,cACf,KAAM,EAAe,CAAC,aAAc,cAEzC,wBAAoB,QAAQ,IAClC,wBAAoB,aACpB,wBAAoB,MAAO,CACvB0gD,MAAO,+BACPyQ,QAASX,EAAO,MAAQA,EAAO,IAAOK,IAAY,WAAOy4D,GAAKa,WAAW,wBAC1E,IAAK35D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACxD,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,qBAC/C,IACJ,wBAAoB,MAAO,CAAEA,MAAO,wBAA0B,EAC1D,wBAAoB,IAAK,CAAEA,MAAO,2BAClC,QAEb,MACD,wBAAoB,QAAQ,OAIlD,IEjbE,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CACfA,MAAO,uBACPlV,MAAO,CAAE,MAAS,OAAQ,QAAW,SAEnC,GAAa,CACfzmC,IAAK,EACL27C,MAAO,iBACPlV,MAAO,CAAE,QAAW,OAAQ,aAAc,WAExC,GAAa,CACfzmC,IAAK,EACL27C,MAAO,sBAEL,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAElV,MAAO,CAAE,QAAW,OAAQ,cAAe,SAAU,IAAO,QAC3E,GAAc,CAChBzmC,IAAK,EACL27C,MAAO,+BAEL,GAAc,CAChB37C,IAAK,EACL27C,MAAO,8BAEL,GAAc,CAChB37C,IAAK,EACL27C,MAAO,iCAEL,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAC,WACf,GAAc,CAAC,WACf,GAAc,CAChB37C,IAAK,EACLymC,MAAO,CAAE,QAAW,gBAElB,GAAc,CAAC,sBAAuB,WACtC,GAAc,CAAEA,MAAO,CAAE,QAAW,OAAQ,kBAAmB,gBAAiB,aAAc,MAAO,YAAa,OAAQ,MAAS,wBAIzI,IAA6B,qBAAiB,CAC1CwV,OAAQ,gBACR,KAAAG,CAAMC,GACF,MAAMhO,GAAkB,EAAA5jB,GAAA,KAIlB46F,GAAc,IAAAhsH,KAAI,IAClBisH,GAAa,IAAAjsH,KAAI,MACjBksH,GAAiB,IAAAlsH,KAAI,CAAC,GACtBwoB,GAAW,IAAAxoB,KAAI,CAAC,GAIhBmsH,GAAqB,IAAA18G,UAAS,KAChC,MAAMy7C,EAAQ8gE,EAAYpqH,MAAMoF,cAAcoO,OAC9C,OAAK81C,EAEElW,EAAgBx1C,WAAWkK,OAAOoiB,GAAKA,EAAEpnB,KAAKsC,cAAcjB,SAASmlD,IAAUp/B,EAAE1R,MAAMT,KAAKtU,GAAKA,EAAE2B,cAAcjB,SAASmlD,KADtHlW,EAAgBx1C,aAqDzB4sH,GAAgB,SAAer0H,IArBjBsI,OAAOtI,IACvB,MAAMQ,EAAU2zH,EAAetqH,MAAM7J,GAC/Bi/B,EAAWge,EAAgBx1C,WAAWoG,KAAKkmB,GAAKA,EAAE/zB,KAAOA,GAC/D,GAAKi/B,QAAwB99B,IAAZX,EAAjB,CAEAiwB,EAAS5mB,MAAM7J,IAAM,EACrB,IACI,MAAMqiB,EAAQ7hB,EACT6yB,MAAM,WACN/yB,IAAIgN,GAAKA,EAAE+P,QACX1L,OAAOrE,GAAKA,GACXs4B,EAAc,IAAK3G,EAAU5c,eAC7B46B,EAAgBje,eAAe4G,EACzC,CACA,QAEI5kB,WAAW,KACPyP,EAAS5mB,MAAM7J,IAAM,GACtB,IACP,CAfU,GAkBVs0H,CAAYt0H,IACb,KAIH,MAAO,CAACo6D,EAAMC,MACF,kBAAc,wBAAoB,MAAO,GAAY,CACzDA,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,cACjB,KACJ,wBAAoB,YACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,EACnC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAc7wD,MAAQ6wD,GACpFx0D,KAAM,OACNqkD,MAAO,uBACPoQ,YAAa,YACbtlB,MAAO,CAAE,KAAQ,IAAK,MAAS,SAChC,KAAM,KAAuB,CAC5B,CAAC,aAAa4+E,EAAYpqH,gBAK1C,wBAAoB,UACiB,IAApCuqH,EAAmBvqH,MAAMlJ,SACnB,kBAAc,wBAAoB,MAAO,GAAY,eACrD,kBAAc,wBAAoB,MAAO,GAAY,GACnD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYyzH,EAAmBvqH,MAAQo1B,IAC3F,OAAQ,kBAAc,wBAAoB,MAAO,CAC7CrwB,IAAKqwB,EAASj/B,GACduqD,MAAO,qBACPlV,MAAO,CAAE,gBAAiB,8BAA+B,QAAW,WACrE,EACC,wBAAoB,eACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,OAAQ,MAAM,qBAAiBpW,EAAStyB,MAAO,IACnE,wBAAoB,UACD,aAAlBsyB,EAASlF,OACH,kBAAc,wBAAoB,OAAQ,GAAa,MACrC,aAAlBkF,EAASlF,OACL,kBAAc,wBAAoB,OAAQ,GAAa,OACxD,wBAAoB,QAAQ,IACtC,wBAAoB,YACnBkF,EAAStc,MAAQ,IACX,kBAAc,wBAAoB,OAAQ,GAAa,SAAU,qBAAiBsc,EAAStc,OAAQ,KACpG,wBAAoB,QAAQ,MAEtC,wBAAoB,OAAQ,IAAa,qBAAiBsc,EAAS5c,MAAM1hB,QAAU,OAAQ,MAE/F,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1B4pD,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,OAAQ97B,EAASp6B,WACzDm2D,QAAUN,GA1GxB,CAACz7B,IACnB,MAAM2G,EAAc,IAAK3G,EAAUp6B,SAAUo6B,EAASp6B,SACtDo4C,EAAgBje,eAAe4G,IAwGsB,CAAe3G,IACrC,KAAM,GAAuB,KAChC,wBAAoB,SAAU,CAC1BsrB,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAAQm5D,EAAWrqH,QAAUo1B,EAASj/B,MAChFq1C,MAAO,CAAE,cAAe,OACxB2lB,QAAUN,GA3GzB,CAAC16D,IAClB,GAAIk0H,EAAWrqH,QAAU7J,EACrBk0H,EAAWrqH,MAAQ,SAElB,CACDqqH,EAAWrqH,MAAQ7J,EAEnB,MAAMi/B,EAAWge,EAAgBx1C,WAAWoG,KAAKkmB,GAAKA,EAAE/zB,KAAOA,GAC3Di/B,IACAk1F,EAAetqH,MAAM7J,GAAMi/B,EAAS5c,MAAMzhB,KAAK,MAEvD,GAgGqD,CAAcq+B,EAASj/B,KAC7C,EACC,wBAAoB,IAAK,CACrBuqD,OAAO,oBAAgB,CAAC,MAAO2pE,EAAWrqH,QAAUo1B,EAASj/B,GAAK,gBAAkB,qBACrF,KAAM,IACV,GAAuB,SAGlC,wBAAoB,eACnBk0H,EAAWrqH,QAAUo1B,EAASj/B,KACxB,kBAAc,wBAAoB,MAAO,GAAa,EACrD,qBAAgB,wBAAoB,WAAY,CAC5C,sBAAwB06D,GAAay5D,EAAetqH,MAAMo1B,EAASj/B,IAAO06D,EAC1EnQ,MAAO,0BACPzzC,KAAM,IACN6jD,YAAa,gBACb6yC,QAAU9yC,IAAW,OA7E5B16D,EA6EiDi/B,EAASj/B,QA5EnFq0H,EAAcr0H,GADU,IAACA,IA8EM,KAAM,GAAgC,IAAc,CACnD,CAAC,aAAam0H,EAAetqH,MAAMo1B,EAASj/B,QAEhD,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,OAAQ,MAAM,qBAAiBywB,EAAS5mB,MAAMo1B,EAASj/B,IAAM,SAAW,QAAS,IACrG,wBAAoB,OAAQ,KAAM,UAAW,sBApH3DQ,EAoHyF2zH,EAAetqH,MAAMo1B,EAASj/B,IAnHpIQ,EAEEA,EACF6yB,MAAM,WACN/yB,IAAIgN,GAAKA,EAAE+P,QACX1L,OAAOrE,GAAKA,GAAG3M,OAJT,IAkHqI,SAGtH,wBAAoB,QAAQ,KAvHrC,IAACH,IAyHF,WAIxB,I,OC7MJ,MAEA,IAFiC,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBCJjE,GAAa,CAAE+pD,MAAO,oBACtB,GAAa,CAAEA,MAAO,mBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,yCACtB,GAAa,CAAC,SACd,GAAa,CAAEA,MAAO,oBACtB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,oBAEL,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,oBAEL,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvBgqE,GAAc,CAAEhqE,MAAO,wBACvBiqE,GAAc,CAAEjqE,MAAO,0BACvBkqE,GAAc,CAAElqE,MAAO,wBACvBmqE,GAAc,CAAEnqE,MAAO,iBACvBoqE,GAAc,CAAEpqE,MAAO,gBACvBqqE,GAAc,CAAErqE,MAAO,gBACvBsqE,GAAc,CAAEtqE,MAAO,0BACvBuqE,GAAc,CAAC,YACfC,GAAc,CAAExqE,MAAO,qBAgB7B,IAA6B,qBAAiB,CAC1CM,OAAQ,iBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,UAErB+iC,MAAO,CAAC,kBACR,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EACRG,EAAOC,EAIPszD,GAAY,IAAA12G,OACZsiC,GAAc,EAAAxkB,EAAA,MACdglB,GAAY,UACZ3pB,GAAQ,EAAAD,EAAA,KACRmqC,GAAU,EAAA5d,EAAA,MAGVsnF,IAFW,EAAA1gH,GAAA,MAES,IAAArM,MAAI,IACxBgtH,GAAc,IAAAhtH,KAAI,IAClBitH,GAAa,IAAAjtH,KAAI,IAEjBktH,GAAe,IAAAltH,KAAI,QAEnBmtH,GAAe,IAAAntH,KAAI,IAEnBotH,GAAe,IAAAptH,KAAI,CAAC,GAEpBkiH,GAAc,IAAAjiH,UAAS,IAAKqiC,EAAY3lC,UAE9C,IAAA4hB,OAAM2jG,EAAaxrF,IACf4L,EAAYliB,aAAasW,IAC1B,CAAElY,MAAM,IAKX,MAAM6uG,GAAa,IAAA59G,UAAS,KAExB,GAAI29G,EAAaxrH,MAAMsrH,EAAatrH,OAChC,OAAOwrH,EAAaxrH,MAAMsrH,EAAatrH,OAE3C,OAAQsrH,EAAatrH,OACjB,IAAK,YACD,MAAO,SACX,IAAK,eACD,MAAO,UACX,IAAK,iBACD,MAAO,QACX,IAAK,cACD,MAAO,YACX,IAAK,aACD,MAAO,SACX,IAAK,uBACD,MAAO,OACX,IAAK,qBACD,MAAO,SACX,QACI,MAAO,QAObmqH,EAAa,CAAC9/E,EAAO/mB,KACnBA,IACAkoG,EAAaxrH,MAAMqqC,GAAS/mB,GAEhCioG,EAAavrH,MAAM/J,KAAKq1H,EAAatrH,OACrCsrH,EAAatrH,MAAQqqC,GAGnBqhF,EAAa,KACf,MAAMC,EAAYJ,EAAavrH,MAAMilG,MAEjCqmB,EAAatrH,MADb2rH,GAIqB,QAIvBC,EAAkB,KACpBL,EAAavrH,MAAQ,GACrBsrH,EAAatrH,MAAQ,OACrBwrH,EAAaxrH,MAAQ,CAAC,GAGpB6rH,EAAaxhF,IACf8/E,EAAW9/E,KAGf,IAAAyhF,SAAQ,qBAAsB,CAC1B3B,aACA4B,OAAQL,KAmBZ,IAAA/uG,OAAM,IAAMqoB,EAAMluB,QAASA,IACnBA,IACAzX,OAAOC,OAAOghH,EAAa5/E,EAAY3lC,QAEnC0mD,EAAQ3c,sBACR8mF,IACAzB,EAAW1oE,EAAQ3c,sBACnB2c,EAAQ3c,qBAAuB,MAG/B8mF,QAKZ,UAAe9W,EAAW,KACtBkG,MAMJ,MAAM1I,EAAc,KAEhB,GAA2B,mBAAvBgZ,EAAatrH,MAA4B,CACzC,MAAM2hD,GAAa,EAAAvhB,EAAA,KACfuhB,EAAWznD,gBAAkBynD,EAAW5gB,eACxC4gB,EAAWpsB,oBAAoBosB,EAAW5gB,aAAaj+B,MACvDyU,EAAM7W,QAAQ,cAEtB,CACA6gD,EAAK,kBAAkB,IAGrBy5D,EAAe,KACjBz5D,EAAK,kBAAkB,IASrBvgC,GAAW,IAAAnT,UAAS,IAAMqzB,EAAUlgB,UAEpCgrG,GAAa,IAAAn+G,UAAS,IACjBu9G,EAAYprH,MAAMwT,QAAU63G,EAAWrrH,MAAMwT,QAGlDy4G,EAAgB,KAClB,IAAKD,EAAWhsH,MACZ,OACJ,MAAM4jD,EAAWwnE,EAAYprH,MAAMwT,OAE7BiG,EAAa,IAAImqC,iBACvB1iB,EAAUhf,QAAQ,CACdpf,KAAM8gD,EACNnqC,WAAYA,EACZsH,UAAWsqG,EAAWrrH,MAAMwT,SAGhC43G,EAAYprH,MAAQ,GACpBqrH,EAAWrrH,MAAQ,GACnBmrH,EAAkBnrH,OAAQ,GAE9B,MAAO,CAACuwD,EAAMC,MACF,kBAAc,iBAAa,aAAa,CAAE1tD,KAAM,SAAW,CAC/Dy9C,SAAS,aAAS,IAAM,CACnBa,EAAe,UACT,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,sBACPyQ,SAAS,mBAAe6pD,EAAc,CAAC,UACxC,EACC,wBAAoB,MAAO,CACvBtqD,QAAS,YACTtyD,IAAK02G,EACLp0D,MAAO,gCACR,EACC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,oBACnB6qE,EAAavrH,MAAMlJ,OAAS,IACtB,kBAAc,wBAAoB,SAAU,CAC3CiO,IAAK,EACL27C,MAAO,iBACPyQ,SAAS,mBAAeu6D,EAAY,CAAC,UACtC,IAAKl7D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,qBAAuB,MAAO,SAEtE,wBAAoB,QAAQ,IAClC,wBAAoB,OAAQ,IAAY,qBAAiB+qE,EAAWzrH,OAAQ,IAC5E,wBAAoB,cACpB,wBAAoB,SAAU,CAC1B0gD,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,WACvC,qBAAwC,mBAAvBgZ,EAAatrH,MAA6B,KAAO,MAAO,MAEhF,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,qCACI,SAAvBsrH,EAAatrH,QACP,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,eACpB,wBAAoB,MAAO,GAAY,CACnCyrD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,oBAClC,qBAAiB,aACjB,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,YAC/C,KACJ,wBAAoB,MAAO,GAAY,EACnC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAsB,WAAIzvD,IAC1F,GACE,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY7vC,EAAShhB,MAAQ8c,KACzE,kBAAc,wBAAoB,SAAU,CAChD/X,IAAK+X,EAAK3mB,GACV6J,MAAO8c,EAAK3mB,KACb,qBAAiB2mB,EAAKha,MAAO,EAAqB,MACrD,OACL,KAAuB,CACtB,CAAC,eAAew9G,EAAY7mG,eAEhC,wBAAoB,SAAU,CAC1BinC,MAAO,mBACPp9B,MAAO,UACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYs6D,EAAkBnrH,OAAQ,EAAO,CAAC,WAClG,IAAKwwD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,YAI1E,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,YAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAkB,OAAIzvD,IACtF,IAAKL,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,SAAU,CAAExwD,MAAO,YAAc,QAAS,IAC9D,wBAAoB,SAAU,CAAEA,MAAO,cAAgB,QAAS,MAC9D,KAAuB,CAC7B,CAAC,eAAesgH,EAAYnnH,eAIxC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpCq3D,EAAO,MAAQA,EAAO,KAAM,qBAAiB,UAAW,KACxD,wBAAoB,OAAQ,IAAa,qBAAiB8vD,EAAY3mG,UAAY,KAAM,MAE5F,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB62C,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAoB,SAAIzvD,GACvFx0D,KAAM,QACNqc,IAAK,KACL+I,IAAK,KACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,aACAmS,EAAY3mG,cACP,EACL,CAAEwiD,QAAQ,WAK1B,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,qBAAiB,UAAW,KACxD,wBAAoB,OAAQ,IAAa,qBAAiB8vD,EAAY5mG,WAAa,KAAM,MAE7F,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB82C,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAqB,UAAIzvD,GACxFx0D,KAAM,QACNqc,IAAK,MACL+I,IAAK,MACL0sF,KAAM,MACP,KAAM,KAAuB,CAC5B,CACI,aACAmS,EAAY5mG,eACP,EACL,CAAEyiD,QAAQ,WAK1B,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,qBAAiB,YAAa,KAC1D,wBAAoB,OAAQ,IAAa,qBAA6C,IAA5B8vD,EAAY/lG,YAAoB,MAAQ,GAAG+lG,EAAY/lG,iBAAkB,MAEvI,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBi2C,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAuB,YAAIzvD,GAC1Fx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,IACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,aACAmS,EAAY/lG,iBACP,EACL,CAAE4hD,QAAQ,WAK1B,wBAAoB,YACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,qBAAiB,YAAa,KAC1D,wBAAoB,OAAQ,IAAa,qBAAiB8vD,EAAY1mG,cAAgB,KAAM,MAEhG,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB42C,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAwB,aAAIzvD,GAC3Fx0D,KAAM,QACNqc,IAAK,KACL+I,IAAK,MACL0sF,KAAM,MACP,KAAM,KAAuB,CAC5B,CACI,aACAmS,EAAY1mG,kBACP,EACL,CAAEuiD,QAAQ,eAOlC,wBAAoB,oBACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,oBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,kBACpB,wBAAoB,MAAO,CACvBA,MAAO,+BACPyQ,QAASX,EAAO,KAAOA,EAAO,GAAMK,GAAYg7D,EAAU,iBAC3D,IAAKr7D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACxD,qBAAiB,gBACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,sBAC/C,IACJ,wBAAoB,MAAO,CAAEA,MAAO,wBAA0B,EAC1D,wBAAoB,IAAK,CAAEA,MAAO,2BAClC,QAEZ,wBAAoB,gBACpB,wBAAoB,MAAO,CACvBA,MAAO,+BACPyQ,QAASX,EAAO,KAAOA,EAAO,GAAMK,GAAYg7D,EAAU,oBAC3D,IAAKr7D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACxD,qBAAiB,YACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,uBAC/C,IACJ,wBAAoB,MAAO,CAAEA,MAAO,wBAA0B,EAC1D,wBAAoB,IAAK,CAAEA,MAAO,2BAClC,QAEZ,wBAAoB,eACpB,wBAAoB,MAAO,CACvBA,MAAO,+BACPyQ,QAASX,EAAO,KAAOA,EAAO,GAAMK,GAAYg7D,EAAU,eAC3D,IAAKr7D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACxD,qBAAiB,cACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,iBAC/C,IACJ,wBAAoB,MAAO,CAAEA,MAAO,wBAA0B,EAC1D,wBAAoB,IAAK,CAAEA,MAAO,2BAClC,QAEZ,wBAAoB,gBACpB,wBAAoB,MAAO,CACvBA,MAAO,+BACPyQ,QAASX,EAAO,MAAQA,EAAO,IAAOK,GAAYg7D,EAAU,kBAC7D,IAAKr7D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACxD,qBAAiB,iBACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,iBAC/C,IACJ,wBAAoB,MAAO,CAAEA,MAAO,wBAA0B,EAC1D,wBAAoB,IAAK,CAAEA,MAAO,2BAClC,QAEZ,wBAAoB,eACpB,wBAAoB,MAAO,CACvBA,MAAO,+BACPyQ,QAASX,EAAO,MAAQA,EAAO,IAAOK,GAAYg7D,EAAU,gBAC7D,IAAKr7D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACxD,qBAAiB,aACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,kBAC/C,IACJ,wBAAoB,MAAO,CAAEA,MAAO,wBAA0B,EAC1D,wBAAoB,IAAK,CAAEA,MAAO,2BAClC,YAIpB,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,sBAClC,qBAAiB,UACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,sBACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,YACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,cAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,OAAQovD,EAAYlmG,kBAC5D+2C,QAASX,EAAO,MAAQA,EAAO,IAAOK,GAAYyvD,EAAYlmG,gBAAkBkmG,EAAYlmG,iBAC7F,KAAM,QAGjB,wBAAoB,YACpB,wBAAoB,MAAO,GAAa,CACpCo2C,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,YACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,cAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,OAAQovD,EAAYpmG,iBAC5Di3C,QAASX,EAAO,MAAQA,EAAO,IAAOK,GAAYyvD,EAAYpmG,eAAiBomG,EAAYpmG,gBAC5F,KAAM,QAGjB,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,CACpCs2C,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,aACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,YAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,OAAQovD,EAAYjmG,aAC5D82C,QAASX,EAAO,MAAQA,EAAO,IAAOK,GAAYyvD,EAAYjmG,WAAaimG,EAAYjmG,YACxF,KAAM,QAGjB,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,CACpCm2C,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,aACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,mBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,OAAQovD,EAAY3lG,kBAC5Dw2C,QAASX,EAAO,MAAQA,EAAO,IAAOK,GAAYyvD,EAAY3lG,gBAAkB2lG,EAAY3lG,iBAC7F,KAAM,QAGjB,wBAAoB,+BACnB2lG,EAA0B,iBACpB,kBAAc,wBAAoB,MAAO,GAAa,CACrD9vD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,gBACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,sBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,QAA8C,IAAtCovD,EAAY1lG,yBAC5Du2C,QAASX,EAAO,MAAQA,EAAO,IAAOK,GAAYyvD,EAAY1lG,uBAA8D,IAAtC0lG,EAAY1lG,wBACnG,KAAM,SAGf,wBAAoB,QAAQ,IAClC,wBAAoB,uBACnB,WAAO6mC,GAAiB,WAClB,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,GAAa,CACpC+O,EAAO,MAAQA,EAAO,KAAM,qBAAiB,cAAe,KAC5D,wBAAoB,OAAQ,IAAa,qBAAiB8vD,EAAYzlG,sBAAwB,IAAM,KAAM,MAE9G,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB21C,EAAO,MAAQA,EAAO,IAAOK,GAAayvD,EAAgC,qBAAIzvD,GACrGx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,MACL0sF,KAAM,MACP,KAAM,KAAuB,CAC5B,CACI,aACAmS,EAAYzlG,0BACP,EACL,CAAEshD,QAAQ,YAKxB,wBAAoB,QAAQ,IAClC,wBAAoB,kBACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,iBACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,6BAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,OAAQovD,EAAY5lG,qBAC5Dy2C,QAASX,EAAO,MAAQA,EAAO,IAAOK,GAAYyvD,EAAY5lG,mBAAqB4lG,EAAY5lG,oBAChG,KAAM,QAGjB,wBAAoB,gBACpB,wBAAoB,MAAO,GAAa,CACpC81C,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,gBACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,8BAC/C,KACJ,wBAAoB,MAAOgqE,GAAa,EACpC,wBAAoB,SAAU,CAC1BhqE,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,OAAQovD,EAAYvlG,qBAC5Do2C,QAASX,EAAO,MAAQA,EAAO,IAAOK,GAAYyvD,EAAYvlG,mBAAqBulG,EAAYvlG,oBAChG,KAAM,YAK1B,KACuB,cAAvBuwG,EAAatrH,QACT,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,yCACpB,iBAAamnH,KACd,OACuB,iBAAvBZ,EAAatrH,QACT,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,0CACpB,iBAAaonH,KACd,OACuB,mBAAvBb,EAAatrH,QACT,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,0CACpB,iBAAaqnH,KACd,OACuB,gBAAvBd,EAAatrH,QACT,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,4CACpB,iBAAasnH,KACd,OACuB,eAAvBf,EAAatrH,QACT,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,yCACpB,iBAAaunH,KACd,OACuB,yBAAvBhB,EAAatrH,QACT,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,uCACpB,iBAAawnH,KACd,OACuB,uBAAvBjB,EAAatrH,QACT,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,uCACpB,iBAAaynH,KACd,QACD,wBAAoB,QAAQ,MAElE,wBAAoB,6DACpB,iBAAa,aAAa,CAAE1pH,KAAM,SAAW,CACzCy9C,SAAS,aAAS,IAAM,CACnB4qE,EAAuB,QACjB,kBAAc,wBAAoB,MAAO,CACxCpmH,IAAK,EACL27C,MAAO,0BACPyQ,QAASX,EAAO,MAAQA,EAAO,KAAM,mBAAgBK,GAAYs6D,EAAkBnrH,OAAQ,EAAQ,CAAC,WACrG,EACC,wBAAoB,MAAO,CACvB0gD,MAAO,sCACPyQ,QAASX,EAAO,MAAQA,EAAO,KAAM,mBAAe,OAAW,CAAC,WACjE,EACC,wBAAoB,MAAOm6D,GAAa,CACpCn6D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,KAAM,WAAY,KAC1E,wBAAoB,SAAU,CAC1B9P,MAAO,eACPyQ,QAASX,EAAO,MAAQA,EAAO,KAAM,mBAAgBK,GAAYs6D,EAAkBnrH,OAAQ,EAAQ,CAAC,WACrG,IAAKwwD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,UAGvE,wBAAoB,MAAOkqE,GAAa,EACpC,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,MAAOC,GAAa,CACpCt6D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,QAAS,KAAM,QAAS,KACxE,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBA,EAAO,MAAQA,EAAO,IAAOK,GAAY,EAAc7wD,MAAQ6wD,GACtFx0D,KAAM,OACNy0D,YAAa,WACd,KAAM,KAAuB,CAC5B,CAAC,aAAas6D,EAAYprH,YAGlC,wBAAoB,MAAO+qH,GAAa,CACpCv6D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,QAAS,KAAM,QAAS,KACxE,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBA,EAAO,MAAQA,EAAO,IAAOK,GAAY,EAAa7wD,MAAQ6wD,GACrFx0D,KAAM,OACNy0D,YAAa,wBACd,KAAM,KAAuB,CAC5B,CAAC,aAAau6D,EAAWrrH,gBAKzC,wBAAoB,MAAOgrH,GAAa,EACpC,wBAAoB,SAAU,CAC1BtqE,MAAO,0BACPyQ,QAASX,EAAO,MAAQA,EAAO,KAAM,mBAAgBK,GAAYs6D,EAAkBnrH,OAAQ,EAAQ,CAAC,WACrG,OACH,wBAAoB,SAAU,CAC1B0gD,MAAO,wBACPgf,UAAWssD,EAAWhsH,MACtBmxD,SAAS,mBAAe86D,EAAe,CAAC,UACzC,KAAM,EAAehB,YAIlC,wBAAoB,QAAQ,KAEtCr9F,EAAG,KAEP,wBAAoB,mBACpB,wBAAoB,MAAOs9F,GAAa,uBAAwB,sBAAiB,WAAO/N,KAAY,MAAO,IAC5G,SAEL,wBAAoB,QAAQ,KAEtCvvF,EAAG,IAGf,I,OC7uBJ,MAEA,IAFiC,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBCJjE,GAAa,CAAE8yB,MAAO,6BACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,mBACtB,GAAa,CAAEA,MAAO,gCACtB,GAAa,CAAEA,MAAO,4BACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,wBAEL,GAAa,CAAEA,MAAO,qBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAC,SACd,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAC,SACf,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAC,SACf,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,2BAEL,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,cACvB,GAAc,CAAEA,MAAO,2BACvB,GAAc,CAAEA,MAAO,oBCxB7B,ID0B6B,qBAAiB,CAC1CM,OAAQ,mBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,QAASoiC,SAAS,GACnClf,SAAU,CAAEkf,QAAS,IACrBz9C,KAAM,CAAEy9C,QAAS,IACjB/a,eAAgB,CAAE+a,QAAS,IAC3B9a,eAAgB,CAAE8a,QAAS,IAC3B7a,aAAc,CAAE6a,QAAS,KACzB5a,cAAe,CAAEtpC,KAAM8hB,QAASoiC,SAAS,GACzC3a,iBAAkB,CAAEvpC,KAAM8hB,QAASoiC,SAAS,IAEhDW,MAAO,CAAC,QAAS,QAAS,UAC1B,KAAAC,CAAMC,GAAWG,KAAMC,IASnB,MAAMxc,EAAQoc,EACRG,EAAOC,EAIPn6C,GAAU,IAAAjJ,KAAI4mC,EAAMQ,gBACpBl+B,GAAU,IAAAlJ,KAAI4mC,EAAMS,gBACpBl+B,GAAQ,IAAAnJ,KAAI4mC,EAAMU,cAClB24E,GAAS,IAAAjgH,KAAI4mC,EAAMW,eACnB66E,GAAe,IAAApiH,KAAI,MACnBsiH,GAAa,IAAAtiH,KAAI,MAEjB+hE,GAAa,IAAA/hE,MAAI,GACjB0kF,GAAa,IAAA1kF,KAAI,GACjB2kF,GAAa,IAAA3kF,KAAI,GACjBquH,GAAmB,IAAAruH,KAAI,GACvBsuH,GAAmB,IAAAtuH,KAAI,GAIvBw/G,GAAe,IAAA/vG,UAAS,KAC1B,IAAKm3B,EAAM3D,SACP,MAAO,CAAC,EACZ,MAAMmK,EAAQ,CACVyY,gBAAiB,QAAQjf,EAAM3D,aAC/B6iB,mBAAoB,GAAG78C,EAAQrH,UAAUsH,EAAQtH,SACjDmkD,eAAgB,GAAG58C,EAAMvH,UAM7B,OAHIq+G,EAAOr+G,OAASglC,EAAMY,mBACtB4F,EAAM1jC,OAAS,aAEZ0jC,IAKX,SAAS8mE,IACL/wD,EAAK,QACT,CACA,SAASorE,IACLprE,EAAK,QAAS,CACVl6C,QAASA,EAAQrH,MACjBsH,QAASA,EAAQtH,MACjBuH,MAAOA,EAAMvH,MACbq+G,OAAQr5E,EAAMY,iBAAmBy4E,EAAOr+G,WAAQ1I,GAExD,CACA,SAASs1H,IACLvlH,EAAQrH,MAAQ,GAChBsH,EAAQtH,MAAQ,GAChBuH,EAAMvH,MAAQ,IACdq+G,EAAOr+G,OAAQ,CACnB,CACA,SAASiqH,IACLzJ,EAAaxgH,OAAOw/E,OACxB,CACA,SAAS01B,EAAiBlzG,GACtB,MAAMw/D,EAAQx/D,EAAMC,OACdyH,EAAO83D,EAAM2zC,QAAQ,GACvBzrG,GACA63C,EAAK,SAAU73C,GAEnB83D,EAAMxhE,MAAQ,EAClB,CAKA,SAASwrG,EAAgBzsG,GACrB,IAAKimC,EAAM3D,SACP,OACJ8+B,EAAWngE,OAAQ,EACnB8iF,EAAW9iF,MAAQjB,EAAE+gE,QACrBijB,EAAW/iF,MAAQjB,EAAEihE,QACrBysD,EAAiBzsH,MAAQqH,EAAQrH,MACjC0sH,EAAiB1sH,MAAQsH,EAAQtH,MAEjC,MAAMojD,EAAY1/C,OAAOC,QAAQipC,UAAYA,SAC7CwW,EAAU8T,iBAAiB,YAAa21D,GACxCzpE,EAAU8T,iBAAiB,UAAW68B,EAC1C,CAEA,SAAS6B,EAAiB72F,GACtB,IAAKimC,EAAM3D,UAAiC,IAArBtiC,EAAEy8F,QAAQ1kG,OAC7B,OACJ,MAAMykG,EAAQx8F,EAAEy8F,QAAQ,GACxBr7B,EAAWngE,OAAQ,EACnB8iF,EAAW9iF,MAAQu7F,EAAMz7B,QACzBijB,EAAW/iF,MAAQu7F,EAAMv7B,QACzBysD,EAAiBzsH,MAAQqH,EAAQrH,MACjC0sH,EAAiB1sH,MAAQsH,EAAQtH,MAEjC,MAAMojD,EAAY1/C,OAAOC,QAAQipC,UAAYA,SAC7CwW,EAAU8T,iBAAiB,YAAa2+B,EAAiB,CAAE79B,SAAS,IACpE5U,EAAU8T,iBAAiB,WAAY8kC,EAC3C,CAEA,SAAS6wB,EAAe9tH,GACpB,IAAKohE,EAAWngE,MACZ,OAGJ8sH,EAFe/tH,EAAE+gE,QAAUgjB,EAAW9iF,MACvBjB,EAAEihE,QAAU+iB,EAAW/iF,MAE1C,CAEA,SAAS61F,EAAgB92F,GACrB,IAAKohE,EAAWngE,OAA8B,IAArBjB,EAAEy8F,QAAQ1kG,OAC/B,OACJiI,EAAE0/D,iBACF,MAAM88B,EAAQx8F,EAAEy8F,QAAQ,GAGxBsxB,EAFevxB,EAAMz7B,QAAUgjB,EAAW9iF,MAC3Bu7F,EAAMv7B,QAAU+iB,EAAW/iF,MAE9C,CAEA,SAAS8sH,EAAapxB,EAAQC,GAI1B,MAGMoxB,EAAaN,EAAiBzsH,MAAS07F,EAFzB,IAEiD,IAHjD,GAIdsxB,EAAaN,EAAiB1sH,MAAS27F,EAHzB,IAGiD,IAJjD,GAMpBt0F,EAAQrH,MAAQiS,KAAKwP,IAAI,EAAGxP,KAAKyG,IAAI,IAAKzG,KAAKy1C,MAAMqlE,KACrDzlH,EAAQtH,MAAQiS,KAAKwP,IAAI,EAAGxP,KAAKyG,IAAI,IAAKzG,KAAKy1C,MAAMslE,IACzD,CAEA,SAASj5B,IACL5zB,EAAWngE,OAAQ,EACnB,MAAMojD,EAAY1/C,OAAOC,QAAQipC,UAAYA,SAC7CwW,EAAU+T,oBAAoB,YAAa01D,GAC3CzpE,EAAU+T,oBAAoB,UAAW48B,EAC7C,CAEA,SAASiI,IACL77B,EAAWngE,OAAQ,EACnB,MAAMojD,EAAY1/C,OAAOC,QAAQipC,UAAYA,SAC7CwW,EAAU+T,oBAAoB,YAAa0+B,GAC3CzyC,EAAU+T,oBAAoB,WAAY6kC,EAC9C,CAaA,OARA,IAAAr/E,OAAM,IAAMqoB,EAAMluB,QAASA,IACnBA,IACAzP,EAAQrH,MAAQglC,EAAMQ,eACtBl+B,EAAQtH,MAAQglC,EAAMS,eACtBl+B,EAAMvH,MAAQglC,EAAMU,aACpB24E,EAAOr+G,MAAQglC,EAAMW,iBAGtB,CAAC4qB,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,6CACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,OAAQ,GAAY,CACpC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,KAC3F,qBAAiB,YAAa,qBAAiBU,EAAQt+C,MAAO,MAElE,wBAAoB,SAAU,CAC1B49C,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,IAAK9hD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,UAGvE,wBAAoB,UACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,iBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,CACvBgQ,QAAS,aACTtyD,IAAKsiH,EACLhgE,OAAO,oBAAgB,CAAC,mBAAoB,CAAE,cAAeyf,EAAWngE,SACxEwrC,OAAO,oBAAgBoyE,EAAa59G,OACpC2yF,YAAa6Y,EACbxV,cAAc,mBAAeJ,EAAkB,CAAC,aACjD,EACC,wBAAoB,cAClBx0C,EAAQ/f,UAKJ,wBAAoB,QAAQ,KAJ3B,kBAAc,wBAAoB,MAAO,GAAY,IAAKmvB,EAAO,KAAOA,EAAO,GAAK,EAC/E,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,IAC3D,wBAAoB,OAAQ,KAAM,QAAS,SAGxD,OAEP,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,QAAS,CAAE9P,MAAO,kBAAoB,EAChF,wBAAoB,IAAK,CAAEA,MAAO,8BAClC,qBAAiB,WACjB,KACJ,wBAAoB,QAAS,CACzBrkD,KAAM,QACNqkD,MAAO,kBACPhoC,IAAK,IACL+I,IAAK,MACLzhB,MAAOqH,EAAQrH,MACf2jG,QAASnzC,EAAO,KAAOA,EAAO,GAAMK,GAAYxpD,EAAQrH,MAAQqL,OAAOwlD,EAAO5uD,OAAOjC,SACtF,KAAM,GAAgC,KACzC,wBAAoB,OAAQ,IAAa,qBAAiBqH,EAAQrH,OAAS,IAAK,MAEpF,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpCwwD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,QAAS,CAAE9P,MAAO,kBAAoB,EAChF,wBAAoB,IAAK,CAAEA,MAAO,2BAClC,qBAAiB,WACjB,KACJ,wBAAoB,QAAS,CACzBrkD,KAAM,QACNqkD,MAAO,kBACPhoC,IAAK,IACL+I,IAAK,MACLzhB,MAAOsH,EAAQtH,MACf2jG,QAASnzC,EAAO,KAAOA,EAAO,GAAMK,GAAYvpD,EAAQtH,MAAQqL,OAAOwlD,EAAO5uD,OAAOjC,SACtF,KAAM,GAAgC,KACzC,wBAAoB,OAAQ,IAAa,qBAAiBsH,EAAQtH,OAAS,IAAK,MAEpF,wBAAoB,SACpB,wBAAoB,MAAO,GAAa,CACpCwwD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,QAAS,CAAE9P,MAAO,kBAAoB,EAChF,wBAAoB,IAAK,CAAEA,MAAO,kCAClC,qBAAiB,UACjB,KACJ,wBAAoB,QAAS,CACzBrkD,KAAM,QACNqkD,MAAO,kBACPhoC,IAAK,MACL+I,IAAK,MACLzhB,MAAOuH,EAAMvH,MACb2jG,QAASnzC,EAAO,KAAOA,EAAO,GAAMK,GAAYtpD,EAAMvH,MAAQqL,OAAOwlD,EAAO5uD,OAAOjC,SACpF,KAAM,GAAgC,KACzC,wBAAoB,OAAQ,IAAa,qBAAiBuH,EAAMvH,OAAS,IAAK,QAGtF,wBAAoB,2CACnBohD,EAAwB,mBAClB,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,GAAa,CACpCoP,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,mBAClC,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,aAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,QAAS,GAAa,EACtC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAS7wD,MAAQ6wD,GAC/Ex0D,KAAM,YACP,KAAM,KAAuB,CAC5B,CAAC,iBAAiBgiH,EAAOr+G,SAE7BwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,qBAAuB,MAAO,cAK7G,wBAAoB,QAAQ,IAClC,wBAAoB,cACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,MAAO,0BACPyQ,SAAS,mBAAe84D,EAAe,CAAC,UACzC,IAAKz5D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,IAC5D,qBAAiB,WAAY,QAErC,wBAAoB,QAAS,CACzBgQ,QAAS,eACTtyD,IAAKoiH,EACLnkH,KAAM,OACNk5G,OAAQ,UACR/pE,MAAO,CAAE,QAAW,QACpB6iE,SAAU6G,GACX,KAAM,UAGjB,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1Bx0D,MAAO,0BACPyQ,SAAS,mBAAey7D,EAAa,CAAC,UACvC,OACH,wBAAoB,SAAU,CAC1BlsE,MAAO,wBACPyQ,SAAS,mBAAew7D,EAAe,CAAC,UACzC,cAIb,wBAAoB,QAAQ,EAE1C,IEpWE,GAAa,CAAEjsE,MAAO,uCACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,yBACtB,GAAa,CAAC,eACd,GAAa,CAAEA,MAAO,kCACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,sBAEL,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAc,CAAC,WACf,GAAc,CAAEA,MAAO,qBACvB,GAAc,CAAC,WACf,GAAc,CAChB37C,IAAK,EACL27C,MAAO,sBAEL,GAAc,CAChB37C,IAAK,EACL27C,MAAO,wCAEL,GAAc,CAAEA,MAAO,mBACvB,GAAc,CAAEA,MAAO,uBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,mBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,4BAEL,GAAc,CAAEA,MAAO,yBACvB,GAAc,CAAC,WACf,GAAc,CAAEA,MAAO,uBACvB,GAAc,CAAC,WACf,GAAc,CAChB37C,IAAK,EACL27C,MAAO,qBAEL,GAAc,CAAC,WACf,GAAc,CAAC,WACf,GAAc,CAAC,WACf,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAC,QAAS,WAAY,UACpC,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAC,QAAS,WAAY,UACpC,GAAc,CAAEA,MAAO,qBACvB,GAAc,CAAEA,MAAO,mBACvB,GAAc,CAAC,YACf,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAC,YAQfK,GAAwB,mBAC9B,IAA6B,qBAAiB,CAC1CC,OAAQ,sBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,QAASoiC,SAAS,GACnCpa,MAAO,CAAEoa,QAAS,IAAM,IACxBna,SAAU,CAAEma,QAAS,IAAM,KAE/BW,MAAO,CAAC,QAAS,SAAU,gBAC3B,KAAAC,CAAMC,GAAWG,KAAMC,IAUnB,SAASc,IACL,IAEI,OADiBG,aAAa,CAAEpmD,KAAM,SACtB0kD,KAA0B,CAAC,CAC/C,CACA,MAAOhiD,GAEH,OADAC,QAAQc,KAAK,4BAA6Bf,GACnC,CAAC,CACZ,CACJ,CAEA,SAAS8jD,EAAgB9nD,GACrB,IACI+nD,wBAAwB,CAAE,CAAC/B,IAAwBhmD,GAAU,CAAEsB,KAAM,QACzE,CACA,MAAO0C,GACHC,QAAQc,KAAK,4BAA6Bf,EAC9C,CACJ,CAIA,MAAMimC,EAAQoc,EACRG,EAAOC,EAKPI,GAAgB,EAAA1gD,GAAA,KAChBqW,GAAQ,EAAAD,EAAA,KACRmqC,GAAU,EAAA5d,EAAA,MAEV3qC,GAAY,IAAAkF,KAAI,aAChBwS,GAAY,IAAAxS,MAAI,GAChB6uH,GAAa,IAAA7uH,KAAI,IACjBigD,GAAc,IAAAjgD,KAAI,IAClB8uH,GAAiB,IAAA9uH,KAAI,IAAI6C,KACzB4hB,GAAa,IAAAhV,UAAS,IAAMq/G,EAAeltH,MAAM1D,KAAO,GAExD8tH,GAAc,IAAAhsH,KAAI,IAElB+uH,GAAe,IAAA/uH,MAAI,GACnBgvH,GAAoB,IAAAhvH,KAAI,IAAI0T,KAE5Bu7G,GAAmB,IAAAjvH,KAAI,MACvBoiH,GAAe,IAAApiH,KAAI,MACnBkvH,GAAoB,IAAAlvH,KAAI,MAExBmvH,GAAmB,IAAAnvH,KAAI,MAEvBovH,GAAiB,IAAApvH,MAAI,GACrBqvH,GAAkB,IAAArvH,KAAI,MAKtB8lE,GAAc,IAAAr2D,UAAS,IACE,cAApB3U,EAAU8G,MAAwBitH,EAAWjtH,MAAQq+C,EAAYr+C,OAGtE0tH,GAAe,IAAA7/G,UAAS,KAC1B,IAAKu8G,EAAYpqH,MAAMwT,OACnB,OAAO0wD,EAAYlkE,MAEvB,MAAMspD,EAAQ8gE,EAAYpqH,MAAMoF,cAAcoO,OAC9C,OAAO0wD,EAAYlkE,MAAM8H,OAAOpR,KAExBA,EAAKoM,KAAKsC,cAAcjB,SAASmlD,OAGjC5yD,EAAK+O,QAAQsS,KAAKnQ,GAASA,EAAMxC,cAAcjB,SAASmlD,OAGxD5yD,EAAK05C,cAAchrC,cAAcjB,SAASmlD,OAMhDqkE,GAA2B,IAAA9/G,UAAS,MAAQ+zC,EAAcp6C,iCAC1DomH,GAAsB,IAAA//G,UAAS,MAAQ+zC,EAAcp+C,4BAK3D/E,eAAeovH,EAAiB13H,EAAI2M,EAAMzG,EAAMyxH,GAC5C,MAAMrrH,QAAem/C,EAAcv+C,UAAUP,GACvCokD,QAAkBtF,EAAc76C,aAAajE,GAC7CirH,IAAetrH,GAAQ8D,KAE7B,IAAIuK,EAAS,KACTi9G,EACAj9G,EAAS,QAEJrO,GAAQoE,IACbiK,EAAS,MAEJo2C,GAAatF,EAAc38C,aAAanC,GAC7CgO,EAAS,OAEK,YAATzU,GAAuB6qD,EAId,YAAT7qD,GAAsB6qD,IAE3Bp2C,EAAS,QAJTA,EAAS,KAOb,MAAMy8C,EAAcugE,EAAahrH,GAC3BstC,EAAemd,GAAand,aAC5B49E,EAAezgE,GAAa7mB,gBAE5BjhC,EAAUhD,GAAQgD,SAAW,GACnC,MAAO,CACHtP,KACA2M,OACA0W,MAAO42B,GAAgBttC,EACvBzG,OACA6qD,YACArgD,IAAKpE,GAAQoE,IACbQ,QAAS5E,GAAQ4E,SAAW,GAC5BC,QAAS7E,GAAQ6E,SAAW,GAC5BC,MAAO9E,GAAQ8E,OAAS,IACxBymH,eACA59E,eACAt/B,SACAi9G,eACAtoH,UACAwoH,YAAaxoH,EAAQ1O,KAAK,MAElC,CACA0H,eAAei4G,IACX9lG,EAAU5Q,OAAQ,EAClB,IACI,MAAMkuH,EAAU,GACV9nF,EAAW,GAEXzN,EAAe,IAAI7mB,IAAIkzB,EAAMoB,SAAS3vC,IAAIsmB,GAAKA,EAAEja,OAGjDgrH,EADcxrE,IACa+K,QAAU,CAAC,EAE5C,IAAK,MAAMlH,KAAQnhB,EAAMmB,MAAO,CAE5B,GAAIxN,EAAa91B,IAAIsjD,EAAKrjD,MACtB,SAEJ,MAAMpM,QAAam3H,EAAiB1nE,EAAKhwD,GAAIgwD,EAAKrjD,KAAMqjD,EAAK9pD,KAAMyxH,GACnEI,EAAQj4H,KAAKS,EACjB,CAEA,IAAK,MAAMmoD,KAAW7Z,EAAMoB,SAAU,CAElC,MAAM1vC,QAAam3H,EAAiBhvE,EAAQ1oD,GAAI0oD,EAAQ/7C,KAAM,UAAWgrH,GACzE1nF,EAASnwC,KAAKS,EAClB,CAGA,GAAIw2H,EAAeltH,MAAM1D,KAAO,EAC5B,IAAK,MAAOwG,EAAMqrH,KAAYjB,EAAeltH,MAAO,CAEhD,MAAMouH,EAAYF,EAAQx5G,UAAU1d,GAAKA,EAAE8L,OAASA,GACpD,IAAmB,IAAfsrH,EAAkB,CAElB,MAAM13H,EAAOw3H,EAAQE,GACrBF,EAAQE,GAAa,IACd13H,EACH2Q,QAAS8mH,EAAQ9mH,SAAW3Q,EAAK2Q,QACjCC,QAAS6mH,EAAQ7mH,SAAW5Q,EAAK4Q,QACjCC,MAAO4mH,EAAQ5mH,OAAS7Q,EAAK6Q,MAC7BV,IAAKsnH,EAAQtnH,KAAOnQ,EAAKmQ,IAEzBqgD,UAAWinE,EAAQtnH,KAAOnQ,EAAKwwD,UAC/Bp2C,OAAQq9G,EAAQtnH,IAAM,MAAQnQ,EAAKoa,OACnCs/B,aAAc+9E,EAAQ/9E,cAAgB15C,EAAK05C,aAC3C49E,aAAcG,EAAQH,cAAgBt3H,EAAKs3H,aAC3Cx0G,MAAO20G,EAAQ/9E,cAAgB15C,EAAK8iB,MACpC/T,QAAS0oH,EAAQ1oH,SAAW/O,EAAK+O,QACjCwoH,YAAaE,EAAQ1oH,QAAU0oH,EAAQ1oH,QAAQ1O,KAAK,MAAQL,EAAKu3H,YAEzE,CAEA,MAAMxvE,EAAarY,EAAS1xB,UAAU1d,GAAKA,EAAE8L,OAASA,GACtD,IAAoB,IAAhB27C,EAAmB,CACnB,MAAM/nD,EAAO0vC,EAASqY,GACtBrY,EAASqY,GAAc,IAChB/nD,EACH2Q,QAAS8mH,EAAQ9mH,SAAW3Q,EAAK2Q,QACjCC,QAAS6mH,EAAQ7mH,SAAW5Q,EAAK4Q,QACjCC,MAAO4mH,EAAQ5mH,OAAS7Q,EAAK6Q,MAC7BV,IAAKsnH,EAAQtnH,KAAOnQ,EAAKmQ,IACzBqgD,UAAWinE,EAAQtnH,KAAOnQ,EAAKwwD,UAC/Bp2C,OAAQq9G,EAAQtnH,IAAM,MAAQnQ,EAAKoa,OACnCs/B,aAAc+9E,EAAQ/9E,cAAgB15C,EAAK05C,aAC3C49E,aAAcG,EAAQH,cAAgBt3H,EAAKs3H,aAC3Cx0G,MAAO20G,EAAQ/9E,cAAgB15C,EAAK8iB,MACpC/T,QAAS0oH,EAAQ1oH,SAAW/O,EAAK+O,QACjCwoH,YAAaE,EAAQ1oH,QAAU0oH,EAAQ1oH,QAAQ1O,KAAK,MAAQL,EAAKu3H,YAEzE,CACJ,CAEJhB,EAAWjtH,MAAQkuH,EACnB7vE,EAAYr+C,MAAQomC,CACxB,CACA,MAAOrnC,GACHC,QAAQC,MAAM,0BAA2BF,GACzCwY,EAAMtY,MAAM,SAChB,CACA,QACI2R,EAAU5Q,OAAQ,CACtB,CACJ,CAIA,SAASquH,EAAU56B,GACfv6F,EAAU8G,MAAQyzF,EAClB22B,EAAYpqH,MAAQ,GACpBsuH,GACJ,CACA,SAAShc,IACDzvF,EAAW7iB,QACN+iG,QAAQ,qBAIjBmqB,EAAeltH,MAAM8G,QACrBy6C,EAAK,SACT,CACA,SAASgtE,EAAWzrH,GAChB,IAAKA,EACD,MAAO,IAGX,GADkB,kBAAkB4mB,KAAK5mB,IAASA,EAAKqB,SAAS,KACjD,CAEX,MAAMk1C,EAAYv2C,EAAK0mB,MAAM,KAAK,GAClC,OAAO6vB,EAAUviD,OAAS,EAAIuiD,EAAUnoC,MAAM,EAAG,GAAKmoC,CAC1D,CAEA,OAAOv2C,EAAKA,EAAKhM,OAAS,EAC9B,CACA,SAAS03H,EAAe19G,GACpB,OAAQA,GACJ,IAAK,QACD,MAAO,KACX,IAAK,MACD,MAAO,MACX,IAAK,OACD,MAAO,KACX,QACI,MAAO,GAEnB,CACA,SAAS29G,EAAe/3H,GACpB,OAAKA,EAAKwwD,UAEH,CACHjD,gBAAiB,QAAQvtD,EAAKwwD,cAC9BhD,mBAAoB,GAAGxtD,EAAK2Q,YAAY3Q,EAAK4Q,WAC7C68C,eAAgB,GAAGztD,EAAK6Q,UAJjB,CAAC,CAMhB,CAOA,SAASmnH,IACLrB,EAAiBrtH,MAAQ,IAC7B,CAsCAvB,eAAey2G,EAAiBlzG,GAC5B,MAAMw/D,EAAQx/D,EAAMC,OACdyH,EAAO83D,EAAM2zC,QAAQ,GAC3B,IAAKzrG,IAAS4jH,EAAkBttH,MAE5B,YADAwhE,EAAMxhE,MAAQ,IAGlB,MAAMtJ,EAAO42H,EAAkBttH,MAC/B,IAEI,MAAMpI,QAAe,QAAa8R,GAE5BilH,QAAyB,QAAc/2H,EAAQ,IAAK,KAEpDiS,QAAiBC,MAAM6kH,GACvBpoH,QAAasD,EAAStD,aAEtBq7C,EAAcp/C,WAAW,CAC3BM,KAAMpM,EAAKoM,KACXyD,KAAMA,EACNc,QAAS3Q,EAAK2Q,QACdC,QAAS5Q,EAAK4Q,QACdC,MAAO7Q,EAAK6Q,MACZ9B,QAAS,KAAI,IAAAs0D,OAAMrjE,EAAK+O,UACxBtC,UAAWlG,KAAKC,cAGdw5G,IACNn1D,EAAK,UACLhqC,EAAM7W,QAAQ,QAClB,CACA,MAAO3B,GACHC,QAAQC,MAAM,wBAAyBF,GACvCyiH,MAAM,OACV,CACAhgD,EAAMxhE,MAAQ,GACdstH,EAAkBttH,MAAQ,IAC9B,CAIA,SAAS4uH,EAAUl4H,EAAMmQ,GACrB,MAAMgoH,EAAahoH,EAAI2M,OACvBs7G,EAAiBp4H,EAAKoM,KAAM,CAAE+D,IAAKgoH,QAAcv3H,IACjDy3H,GAAer4H,EAAKP,GAAI,CACpB0Q,IAAKgoH,QAAcv3H,EACnB4vD,UAAW2nE,GAAcn4H,EAAKwwD,UAC9Bp2C,OAAQ+9G,EAAa,MAAQn4H,EAAKoa,QAE1C,CACA,SAASk+G,EAAct4H,EAAMu3H,GACzB,MAAMxoH,EAAUwoH,EACXzkG,MAAM,YACN/yB,IAAIsS,GAAKA,EAAEyK,QACX1L,OAAOqW,SACZ2wG,EAAiBp4H,EAAKoM,KAAM,CAAE2C,YAC9BspH,GAAer4H,EAAKP,GAAI,CACpBsP,UACAwoH,YAAaxoH,EAAQ1O,KAAK,OAElC,CAIA,SAASk4H,EAAgBv4H,GAErB,MAAMkhC,EAAc0qB,IACdiL,EAAc31B,EAAYy1B,SAAS32D,EAAKoM,MAExCosH,EAAc,IACbx4H,EACHs3H,aAAczgE,GAAa7mB,iBAAmB,GAC9C0J,aAAcmd,GAAand,aAC3B52B,MAAO+zC,GAAand,cAAgB15C,EAAKoM,MAE7CyqH,EAAiBvtH,MAAQkvH,EAEzBztE,EAAQlR,oBAAoB,CACxB/J,SAAU0oF,EAAYpsH,KACtBikC,eAAgBmoF,EAAYlB,cAAgB,IAC7C,CACC7+E,QAAUggF,IAEN,MAAM/+E,EAAe++E,EAChBn+G,KAAK,CAACjJ,EAAGyI,IAAMzI,EAAIyI,GACnB/Z,IAAIO,GAAKk4H,EAAYpsH,KAAK9L,IAC1BD,KAAK,KAQtB,SAAoBL,EAAMuB,GAEtB62H,EAAiBp4H,EAAKoM,KAAM,CACxBstC,aAAcn4C,EAAKm4C,aACnB49E,aAAc/1H,EAAKyuC,kBAGvBqoF,GAAer4H,EAAKP,GAAI,CACpBi6C,aAAcn4C,EAAKm4C,aACnB49E,aAAc/1H,EAAKyuC,gBACnBltB,MAAOvhB,EAAKm4C,cAEpB,CAnBYg/E,CAAWF,EAAa,CAAE9+E,eAAc1J,gBAAiByoF,KAE7D3+E,QAAS,MAkBjB,SAAoB95C,GAEhBo4H,EAAiBp4H,EAAKoM,KAAM,CACxBstC,kBAAc94C,EACd02H,kBAAc12H,IAGlBy3H,GAAer4H,EAAKP,GAAI,CACpBi6C,kBAAc94C,EACd02H,kBAAc12H,EACdkiB,MAAO9iB,EAAKoM,MAEpB,CA7BYusH,CAAWH,KAGvB,CAwCA,SAASI,IACL9B,EAAextH,OAAQ,EACvBytH,EAAgBztH,MAAQ,IAC5B,CACA,SAASuvH,EAAUt3H,GACf,IAAKw1H,EAAgBztH,MACjB,OACJ,MAAMtJ,EAAO+2H,EAAgBztH,MAC7B8uH,EAAiBp4H,EAAKoM,KAAM,CACxBuE,QAASpP,EAAKoP,QACdC,QAASrP,EAAKqP,QACdC,MAAOtP,EAAKsP,QAEhBwnH,GAAer4H,EAAKP,GAAI,CACpBkR,QAASpP,EAAKoP,QACdC,QAASrP,EAAKqP,QACdC,MAAOtP,EAAKsP,QAGhBkmH,EAAgBztH,MAAQ,IACjBtJ,EACH2Q,QAASpP,EAAKoP,QACdC,QAASrP,EAAKqP,QACdC,MAAOtP,EAAKsP,OAEhB+nH,GACJ,CACA7wH,eAAe+wH,EAAiB9lH,GAC5B,IAAK+jH,EAAgBztH,MACjB,OAEJstH,EAAkBttH,MAAQytH,EAAgBztH,MAE1C,MAAMo0F,EAAe,IAAIq7B,aACzBr7B,EAAajuF,MAAM6J,IAAItG,GACvB,MAAM1H,EAAQ,CAAEC,OAAQ,CAAEkzG,MAAO/gB,EAAa+gB,MAAOn1G,MAAO,WACtDk1G,EAAiBlzG,GACvBstH,GACJ,CAIA,SAASI,IACLvC,EAAantH,OAAQ,EACrBotH,EAAkBptH,MAAM8G,OAC5B,CACA,SAASwnH,IACLnB,EAAantH,OAAQ,EACrBotH,EAAkBptH,MAAM8G,OAC5B,CAWArI,eAAekxH,IACX,GAAqC,IAAjCvC,EAAkBptH,MAAM1D,KACxB,OACJ,MACMsJ,EADgBs+D,EAAYlkE,MAAM8H,OAAO9Q,GAAKo2H,EAAkBptH,MAAM6C,IAAI7L,EAAEb,KACtDM,IAAIO,GAAKA,EAAE8L,MACvC,GAAKigG,QAAQ,SAASn9F,EAAM9O,8CAG5B,UAEU8qD,EAAcj8C,cAAcC,GAElC,MAAM7K,EAASunD,IACf,GAAIvnD,EAAOsyD,OAAQ,CACf,IAAIuiE,GAAgB,EACpB,IAAK,MAAM9sH,KAAQ8C,EACX7K,EAAOsyD,OAAOvqD,YACP/H,EAAOsyD,OAAOvqD,GACrB8sH,GAAgB,GAGpBA,GACA/sE,EAAgB9nD,EAExB,OACM27G,IACN4X,IACA/sE,EAAK,UACLhqC,EAAM7W,QAAQ,OAClB,CACA,MAAO3B,GACHC,QAAQC,MAAM,wBAAyBF,GACvCwY,EAAMtY,MAAM,OAChB,CACJ,CAIA,SAAS6vH,EAAiBhsH,EAAMqrH,GAC5B,MAAMx4F,EAAWu3F,EAAeltH,MAAMiD,IAAIH,IAAS,CAAC,EACpDoqH,EAAeltH,MAAMiH,IAAInE,EAAM,IAAK6yB,KAAaw4F,GACrD,CAEA,SAASY,GAAe54H,EAAIg4H,GAExB,MAAMC,EAAYnB,EAAWjtH,MAAM0U,UAAU1d,GAAKA,EAAEb,KAAOA,IACxC,IAAfi4H,IACAnB,EAAWjtH,MAAMouH,GAAa,IAAKnB,EAAWjtH,MAAMouH,MAAeD,IAGvE,MAAM1vE,EAAaJ,EAAYr+C,MAAM0U,UAAU1d,GAAKA,EAAEb,KAAOA,IACzC,IAAhBsoD,IACAJ,EAAYr+C,MAAMy+C,GAAc,IAAKJ,EAAYr+C,MAAMy+C,MAAgB0vE,GAE/E,CACA1vH,eAAeoxH,KACX,GAAkC,IAA9B3C,EAAeltH,MAAM1D,KAEzB,IACI,MAAMvB,EAASunD,IACVvnD,EAAOsyD,SACRtyD,EAAOsyD,OAAS,CAAC,GACrB,IAAIuiE,GAAgB,EACpB,IAAK,MAAO9sH,EAAMqrH,KAAYjB,EAAeltH,MAiBzC,QAf6B1I,IAAzB62H,EAAQ/9E,mBAAuD94C,IAAzB62H,EAAQH,eAC1CG,EAAQ/9E,aACRr1C,EAAOsyD,OAAOvqD,GAAQ,CAClBstC,aAAc+9E,EAAQ/9E,aACtB1J,gBAAiBynF,EAAQH,cAAgB,SAGf12H,IAAzB62H,EAAQ/9E,mBAAuD94C,IAAzB62H,EAAQH,qBAE5CjzH,EAAOsyD,OAAOvqD,GAEzB8sH,GAAgB,QAIAt4H,IAAhB62H,EAAQtnH,UACYvP,IAApB62H,EAAQ9mH,cACY/P,IAApB62H,EAAQ7mH,cACUhQ,IAAlB62H,EAAQ5mH,YACYjQ,IAApB62H,EAAQ1oH,QAAuB,CAC/B,MAAMkwB,QAAiBisB,EAAcv+C,UAAUP,GAE/C,IAAI2C,EAAU,QACUnO,IAApB62H,EAAQ1oH,QACRA,EAAU,KAAI,IAAAs0D,OAAMo0D,EAAQ1oH,UAEvBkwB,GAAUlwB,UACfA,EAAU,IAAIkwB,EAASlwB,UAE3B,MAAMhD,EAAS,CACXK,OACAyD,KAAMovB,GAAUpvB,KAChBM,SAAqBvP,IAAhB62H,EAAQtnH,IAAoBsnH,EAAQtnH,IAAM8uB,GAAU9uB,IACzDQ,QAAS8mH,EAAQ9mH,SAAWsuB,GAAUtuB,SAAW,GACjDC,QAAS6mH,EAAQ7mH,SAAWquB,GAAUruB,SAAW,GACjDC,MAAO4mH,EAAQ5mH,OAASouB,GAAUpuB,OAAS,IAC3C9B,UACAtC,UAAWlG,KAAKC,aAEd0kD,EAAcp/C,WAAWC,EACnC,CAEAmtH,GACA/sE,EAAgB9nD,GAEpBmyH,EAAeltH,MAAM8G,QACrByQ,EAAM7W,QAAQ,QACd6gD,EAAK,UAELA,EAAK,eACT,CACA,MAAOxiD,GACHC,QAAQC,MAAM,wBAAyBF,GACvCwY,EAAMtY,MAAM,UAAYF,aAAakL,MAAQlL,EAAE4B,QAAUkL,OAAO9M,IACpE,CACJ,CAkCA,OA9BA,IAAAixD,WAAU,KACFhrB,EAAMluB,SACN4/F,OAGR,IAAA/5F,OAAM,IAAMqoB,EAAMluB,QAASA,IACnBA,EACA4/F,KAIAyW,EAAantH,OAAQ,EACrBotH,EAAkBptH,MAAM8G,QACxBumH,EAAiBrtH,MAAQ,KACzB9G,EAAU8G,MAAQ,YAClBktH,EAAeltH,MAAM8G,YAI7B,IAAA6V,OAAM0wG,EAAkBnyG,IACpB,GAAIA,EAAK,CACL,MAAMsvE,EAAc,KAChB6iC,EAAiBrtH,MAAQ,KACzB4sC,SAASuqB,oBAAoB,QAASqzB,IAE1CrzE,WAAW,KACPy1B,SAASsqB,iBAAiB,QAASszB,IACpC,EACP,IAEG,CAACj6B,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,iDACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,EAChF,wBAAoB,IAAK,CAAEA,MAAO,wBAClC,qBAAiB,YACjB,KACJ,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,SAEP,wBAAoB,cACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1B5xD,OAAO,oBAAgB,CAAC,qBAAsB,CAAEwQ,OAA4B,cAApBh4D,EAAU8G,SAClEmxD,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYw9D,EAAU,aAAe,CAAC,WAC1F,IAAK79D,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,UAAW,MAC1B,IACV,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,qBAAsB,CAAEwQ,OAA4B,YAApBh4D,EAAU8G,SAClEmxD,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYw9D,EAAU,WAAa,CAAC,WACxF,IAAK79D,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,IAC3D,qBAAiB,UAAW,MAC1B,MAEd,wBAAoB,UACpB,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,KACtF,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAc7wD,MAAQ6wD,GACpFx0D,KAAM,OACNqkD,MAAO,0BACPoQ,YAAiC,cAApB53D,EAAU8G,MAAwB,eAAiB,aACjE,KAAM,EAAe,IAAa,CACjC,CAAC,aAAaoqH,EAAYpqH,SAE7BoqH,EAAiB,QACX,kBAAc,wBAAoB,SAAU,CAC3CrlH,IAAK,EACL27C,MAAO,mBACPyQ,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYu5D,EAAYpqH,MAAQ,GAAK,CAAC,WAC1F,IAAKwwD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,SAEjE,wBAAoB,QAAQ,MAEtC,wBAAoB,gBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACnB9vC,EAAe,QACT,kBAAc,wBAAoB,MAAO,GAAY,IAAK4/C,EAAO,KAAOA,EAAO,GAAK,EAC/E,wBAAoB,IAAK,CAAE9P,MAAO,0BAA4B,MAAO,IACrE,wBAAoB,OAAQ,KAAM,UAAW,QAEpB,IAA9BgtE,EAAa1tH,MAAMlJ,SACf,kBAAc,wBAAoB,WAAW,CAAEiO,IAAK,GAAK,EACxD,wBAAoB,UACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,IAAK,CACrB27C,OAAO,oBAAoC,cAApBxnD,EAAU8G,MAAwB,oBAAsB,uBAChF,KAAM,IACT,wBAAoB,IAAK,MAAM,qBAAiBoqH,EAAYpqH,MAAQ,WAAiC,cAApB9G,EAAU8G,MAAwB,SAAW,UAAW,MAE9I,SACA,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,GAClC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY2oH,EAAa1tH,MAAQtJ,KAC7E,kBAAc,wBAAoB,MAAO,CAC7CqO,IAAKrO,EAAKP,GACVuqD,OAAO,oBAAgB,CAAC,kBAAmB,CAAEg6D,SAAU0S,EAAkBptH,MAAM6C,IAAInM,EAAKP,QACzF,EACC,wBAAoB,aACnBg3H,EAAkB,QACZ,kBAAc,wBAAoB,MAAO,CACxCpoH,IAAK,EACL27C,MAAO,sBACPyQ,SAAS,mBAAgBN,GA5P7E,SAA+Bi/D,GAC3B,MAAMC,EAAS,IAAIj+G,IAAIs7G,EAAkBptH,OACrC+vH,EAAOltH,IAAIitH,GACXC,EAAO7sH,OAAO4sH,GAGdC,EAAO//G,IAAI8/G,GAEf1C,EAAkBptH,MAAQ+vH,CAC9B,CAmPwF,CAAuBr5H,EAAKP,IAAM,CAAC,UACxE,EACC,wBAAoB,IAAK,CACrBuqD,OAAO,oBAAgB0sE,EAAkBptH,MAAM6C,IAAInM,EAAKP,IAAM,sBAAwB,kBACvF,KAAM,IACV,EAAe,MAChB,wBAAoB,QAAQ,IAClC,wBAAoB,oBACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,WACpB,wBAAoB,MAAO,CACvBuqD,OAAO,oBAAgB,CAAC,qBAAsB,CAAE,cAAehqD,EAAKwwD,aACpE1b,OAAO,oBAAgBijF,EAAe/3H,IACtCy6D,SAAS,mBAAgBN,GArU7E,SAAwBn6D,GACpB,IAAKA,EAAKwwD,UAIN,OAFAomE,EAAkBttH,MAAQtJ,OAC1B8pH,EAAaxgH,OAAOw/E,QAGxBiuC,EAAgBztH,MAAQtJ,EACxB82H,EAAextH,OAAQ,CAC3B,CA4TwF,CAAgBtJ,GAAQ,CAAC,UAC9D,CACGA,EAAKwwD,WAED,wBAAoB,QAAQ,KAD3B,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiBxwD,EAAK05C,cAAgBm+E,EAAW73H,EAAKoM,OAAQ,IAE1HpM,EAAKwwD,WAED,wBAAoB,QAAQ,KAD3B,kBAAc,wBAAoB,IAAK,MAE/C,GAA8B,KACjC,wBAAoB,UACnBxwD,EAAW,SACL,kBAAc,wBAAoB,OAAQ,CACzCqO,IAAK,EACL27C,OAAO,oBAAgB,CAAC,oBAAqB,cAAgBhqD,EAAKoa,WACnE,qBAAiB09G,EAAe93H,EAAKoa,SAAU,KAChD,wBAAoB,QAAQ,MAEtC,wBAAoB,UACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,UACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,mBACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,OAAQ,IAAa,qBAAiBpa,EAAKoM,MAAO,GACrEpM,EAAiB,eACX,kBAAc,wBAAoB,OAAQ,GAAa,KAAM,qBAAiBA,EAAK05C,cAAgB,IAAK,KACzG,wBAAoB,QAAQ,MAEtC,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,aACpB,wBAAoB,SAAU,CAC1BsQ,MAAO,sBACPp9B,MAAO,WACP6tC,SAAS,mBAAgBN,GAAYo+D,EAAgBv4H,GAAQ,CAAC,UAC/D,SAAU,EAAe,KAC5B,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BgqD,MAAO,wBACPp9B,MAAO,OACP6tC,SAAS,mBAAgBN,IAAW,OAphB1Ei/D,EAohB4Fp5H,EAAKP,QAnhBvHk3H,EAAiBrtH,MAAQqtH,EAAiBrtH,QAAU8vH,EAAS,KAAOA,GADxE,IAA0BA,GAohBuG,CAAC,UACnE,IAAKt/D,EAAO,MAAQA,EAAO,IAAM,EAC5B,qBAAiB,QAAS,IAC1B,wBAAoB,IAAK,CAAE9P,MAAO,qBAAuB,MAAO,MAC9D,EAAe,IACxB2sE,EAAiBrtH,QAAUtJ,EAAKP,KAC1B,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,CACvBuqD,MAAO,oBACPyQ,SAAS,mBAAgBN,GAvhBjG,SAAqBn6D,GACjBg4H,IACApB,EAAkBttH,MAAQtJ,EAC1B8pH,EAAaxgH,OAAOw/E,OACxB,CAmhB4G,CAAa9oF,GAAQ,CAAC,UAC3D,IAAK85D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,IAC5D,qBAAiB,UAAW,MAC1B,EAAe,KACzB,wBAAoB,mBACC,cAApBxnD,EAAU8G,QACJ,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,MAAO,CACvB27C,OAAO,oBAAgB,CAAC,oBAAqB,CAAEgf,UAAWiuD,EAAyB3tH,SACnFmxD,SAAS,mBAAgBN,GA3hBzG,SAA+Bn6D,GAC3Bg4H,IACA,MAAMsB,EAAYpuE,EAAcp6C,gCAC5BwoH,GACAlB,EAAiBp4H,EAAKoM,KAAM,CAAE+D,IAAKmpH,IACnCjB,GAAer4H,EAAKP,GAAI,CACpB0Q,IAAKmpH,EACL9oE,UAAW8oE,EACXl/G,OAAQ,SAIZ0wG,MAAM,WAEd,CA6gBoH,CAAuB9qH,GAAQ,CAAC,UACrE,IAAK85D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,IACjE,qBAAiB,WAAY,MAC3B,GAAuB,KACjC,wBAAoB,MAAO,CACvBA,OAAO,oBAAgB,CAAC,oBAAqB,CAAEgf,UAAWkuD,EAAoB5tH,SAC9EmxD,SAAS,mBAAgBN,GAlhBzG,SAA0Bn6D,GACtBg4H,IACA,MAAMsB,EAAYpuE,EAAcp+C,2BAC5BwsH,GACAlB,EAAiBp4H,EAAKoM,KAAM,CAAE+D,IAAKmpH,IACnCjB,GAAer4H,EAAKP,GAAI,CACpB0Q,IAAKmpH,EACL9oE,UAAW8oE,EACXl/G,OAAQ,SAIZ0wG,MAAM,UAEd,CAogBoH,CAAkB9qH,GAAQ,CAAC,UAChE,IAAK85D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,UAAW,MAC1B,GAAuB,KAClC,MACD,wBAAoB,QAAQ,OAEpC,wBAAoB,QAAQ,UAI9C,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,iBAAmB,QAAS,KAC7F,wBAAoB,QAAS,CACzBrkD,KAAM,OACNqkD,MAAO,uBACPoQ,YAAa,aACb9wD,MAAOtJ,EAAKmQ,KAAO,GACnBwnG,SAAWx9C,GAAY+9D,EAAUl4H,EAAMm6D,EAAO5uD,OAAOjC,OACrDgyD,OAASnB,GAAY+9D,EAAUl4H,EAAMm6D,EAAO5uD,OAAOjC,QACpD,KAAM,GAAgC,OAE7C,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,OAAQ,KAC9F,wBAAoB,QAAS,CACzBrkD,KAAM,OACNqkD,MAAO,yBACPoQ,YAAa,gBACb9wD,MAAOtJ,EAAKu3H,aAAe,GAC3B5f,SAAWx9C,GAAYm+D,EAAct4H,EAAMm6D,EAAO5uD,OAAOjC,OACzDgyD,OAASnB,GAAYm+D,EAAct4H,EAAMm6D,EAAO5uD,OAAOjC,QACxD,KAAM,GAAgC,SAGlD,KACH,SAET,UAEf,wBAAoB,YACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CAClCmtH,EAAantH,QASR,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,SAAU,CAC1B27C,MAAO,0BACPyQ,SAAS,mBAAem9D,EAAgB,CAAC,UAC1C,OACH,wBAAoB,SAAU,CAC1B5tE,MAAO,uBACPgf,SAA2C,IAAjC0tD,EAAkBptH,MAAM1D,KAClC60D,SAAS,mBAAew+D,EAAe,CAAC,UACzC,SAAU,qBAAiBvC,EAAkBptH,MAAM1D,MAAQ,KAAM,EAAqB,KAC1F,OAlBA,kBAAc,wBAAoB,SAAU,CAC3CyI,IAAK,EACL27C,MAAO,0BACPyQ,SAAS,mBAAeu+D,EAAiB,CAAC,UAC3C,IAAKl/D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,oBAAsB,MAAO,IAC/D,qBAAiB,UAAW,WAc5C,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,MAAO,wBACPgf,UAAW78C,EAAW7iB,MACtBmxD,SAAS,mBAAe0+D,GAAS,CAAC,UACnC,IAAKr/D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,QAAS,MACxB,EAAe,WAIrC,wBAAoB,cACpB,wBAAoB,QAAS,CACzBgQ,QAAS,eACTtyD,IAAKoiH,EACLnkH,KAAM,OACNk5G,OAAQ,UACR/pE,MAAO,CAAE,QAAW,QACpB6iE,SAAU6G,GACX,KAAM,MACT,wBAAoB,UACnBsY,EAAoB,QACd,kBAAc,iBAAayC,GAAkB,CAC5ClrH,IAAK,EACL+R,QAAS02G,EAAextH,MACxB,YAAaytH,EAAgBztH,OAAOknD,WAAa,GACjDpkD,KAAM2qH,EAAgBztH,OAAO8C,MAAQ,GACrC,mBAAoB2qH,EAAgBztH,OAAOqH,SAAW,GACtD,mBAAoBomH,EAAgBztH,OAAOsH,SAAW,GACtD,gBAAiBmmH,EAAgBztH,OAAOuH,OAAS,IACjD0rF,QAASq8B,EACTngF,QAASogF,EACTngF,SAAUogF,GACX,KAAM,EAAe,CAAC,UAAW,YAAa,OAAQ,mBAAoB,mBAAoB,oBAC/F,wBAAoB,QAAQ,OAEpC,wBAAoB,QAAQ,EAE1C,IC7+BJ,GAFoB,G,cCDpB,MAAM,GAAa,CAAE9uE,MAAO,wCACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,mBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,mCAG7B,IAA6B,qBAAiB,CAC1CM,OAAQ,wBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,QAASoiC,SAAS,GACnClnB,UAAW,CAAEknB,QAAS,IACtBpoB,YAAa,CAAEooB,QAAS,KAE5BW,MAAO,CAAC,QAAS,QACjB,KAAAC,CAAMC,GAAWG,KAAMC,IAWnB,MAAMxc,EAAQoc,EACRG,EAAOC,EAIPE,GAAmB,EAAA/pB,GAAA,MAInB2oF,GAAc,IAAAjiH,UAAS,CACzB7B,YAAa,MAAsB85B,OACnCK,gBAAiBu5F,EAAiB,MAAsB35F,YACxD45F,kBAAmB,MAAsBjvG,SAAW,GACpDotC,cAAe,MACfG,cAAe,KASnB,SAASyhE,EAAiBxgH,GACtB,GAAIA,EAAM9F,WAAW,KACjB,OAAO8F,EAGX,MAAM+D,EAAQ/D,EAAM+D,MAAM,8CAC1B,GAAIA,EAAO,CACP,MAAM0J,EAAIhS,SAASsI,EAAM,GAAI,IACvB2J,EAAIjS,SAASsI,EAAM,GAAI,IACvBjD,EAAIrF,SAASsI,EAAM,GAAI,IAC7B,MAAO,IAAI0J,EAAE5mB,SAAS,IAAI65H,SAAS,EAAG,OAAOhzG,EAAE7mB,SAAS,IAAI65H,SAAS,EAAG,OAAO5/G,EAAEja,SAAS,IAAI65H,SAAS,EAAG,MAC9G,CACA,MAAO,SACX,CA0BA,SAASvwH,IACL,MAAMy5B,EAAWooB,EAAiBnoB,mBAAmByL,EAAM3L,WACvDC,GACAgnF,EAAY9jH,YAAc88B,EAAShD,QAAU,MAAsBA,OACnEgqF,EAAY3pF,gBAAkBu5F,EAAiB52F,EAAS/C,YAAc,MAAsBA,YAC5F+pF,EAAY6P,kBAAoB72F,EAASpY,SAAW,MAAsBA,SAAW,GACrFo/F,EAAYhyD,cAAgBh1B,EAASg1B,eAAiB,MACtDgyD,EAAY7xD,cAAgBn1B,EAASm1B,eAAiB/M,EAAiB3mD,OAAOq8B,uBAI9EkpF,EAAY9jH,YAAc,MAAsB85B,OAChDgqF,EAAY3pF,gBAAkBu5F,EAAiB,MAAsB35F,YACrE+pF,EAAY6P,kBAAoB,MAAsBjvG,SAAW,GACjEo/F,EAAYhyD,cAAgB,MAC5BgyD,EAAY7xD,cAAgB/M,EAAiB3mD,OAAOq8B,qBAE5D,CAqBA,SAASk7E,IACL/wD,EAAK,QACT,CAEA,SAASw9D,IACLr9D,EAAiBloB,sBAAsBwL,EAAM3L,WAE7CinF,EAAY9jH,YAAc,MAAsB85B,OAChDgqF,EAAY3pF,gBAAkBu5F,EAAiB,MAAsB35F,YACrE+pF,EAAY6P,kBAAoB,MAAsBjvG,SAAW,GACjEo/F,EAAYhyD,cAAgB,MAC5BgyD,EAAY7xD,cAAgB/M,EAAiB3mD,OAAOq8B,oBACxD,CACA,OAhEA,IAAAza,OAAM,IAAMqoB,EAAMluB,QAAS+3C,IACnBA,GAAc7pB,EAAM3L,WACpBx5B,OAGR,IAAA8c,OAAM,IAAMqoB,EAAM3L,UAAWg3F,IACrBA,GAASrrF,EAAMluB,SACfjX,OA4BR,IAAAkvF,aAAY,KA5CZ,IAAmB9xE,EAAKiE,EA6Cf8jB,EAAMluB,SAAYkuB,EAAM3L,YAE7BqoB,EAAiBtoB,mBAAmB4L,EAAM3L,UAAW,CACjD/C,OAAQgqF,EAAY9jH,YACpB+5B,YAjDWtZ,EAiDWqjG,EAAY3pF,gBAjDlBzV,EAiDmCo/F,EAAY6P,kBA7C5D,QAHGhlH,SAAS8R,EAAI/L,MAAM,EAAG,GAAI,QAC1B/F,SAAS8R,EAAI/L,MAAM,EAAG,GAAI,QAC1B/F,SAAS8R,EAAI/L,MAAM,EAAG,GAAI,QACHgQ,EAAU,QA8CvCA,QAASo/F,EAAY6P,kBACrB7hE,cAAegyD,EAAYhyD,cAC3BG,cAAe6xD,EAAY7xD,gBAE/BlN,EAAK,WAmBF,CAACgP,EAAMC,MACF,kBAAc,iBAAa,aAAa,CAAE1tD,KAAM,SAAW,CAC/Dy9C,SAAS,aAAS,IAAM,CACnBa,EAAe,UACT,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,sBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,OAAQ,GAAY,WAAY,qBAAiBlxD,EAAQjpB,aAAc,IAC3F,wBAAoB,SAAU,CAC1BuoB,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,SAEP,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,wBAAoB,IAAK,CAAEA,MAAO,oBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,eACpB,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,qBAAiB,eACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,WAC/C,KACJ,wBAAoB,MAAO,GAAY,EACnC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAuB,YAAIzvD,GAC1Fx0D,KAAM,QACNqkD,MAAO,aACPp9B,MAAO,QACR,KAAM,KAAuB,CAC5B,CAAC,aAAag9F,EAAY9jH,oBAItC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnCg0D,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,WAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAA2B,gBAAIzvD,GAC9Fx0D,KAAM,QACNinB,MAAO,QACR,KAAM,KAAuB,CAC5B,CAAC,aAAag9F,EAAY3pF,wBAItC,wBAAoB,YACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC65B,EAAO,KAAOA,EAAO,IAAK,qBAAiB,WAAY,KACvD,wBAAoB,OAAQ,IAAa,qBAAiB8vD,EAAY6P,mBAAqB,IAAK,MAEpG,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB3/D,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAA6B,kBAAIzvD,GAChGx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,MACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,aACAmS,EAAY6P,uBACP,EACL,CAAEh0D,QAAQ,eAOlC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,gBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,cAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAyB,cAAIzvD,IAC7F,IAAKL,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,SAAU,CAAExwD,MAAO,OAAS,MAAO,IACvD,wBAAoB,SAAU,CAAEA,MAAO,UAAY,MAAO,IAC1D,wBAAoB,SAAU,CAAEA,MAAO,YAAc,QAAS,IAC9D,wBAAoB,SAAU,CAAEA,MAAO,aAAe,QAAS,IAC/D,wBAAoB,SAAU,CAAEA,MAAO,eAAiB,QAAS,IACjE,wBAAoB,SAAU,CAAEA,MAAO,gBAAkB,QAAS,IAClE,wBAAoB,SAAU,CAAEA,MAAO,QAAU,OAAQ,MACvD,KAAuB,CAC7B,CAAC,eAAesgH,EAAYhyD,sBAIxC,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpCkC,EAAO,MAAQA,EAAO,KAAM,qBAAiB,UAAW,KACxD,wBAAoB,OAAQ,IAAa,qBAAiB8vD,EAAY7xD,eAAiB,KAAM,MAEjG,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB+B,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAyB,cAAIzvD,GAC5Fx0D,KAAM,QACNqc,IAAK,KACL+I,IAAK,KACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,aACAmS,EAAY7xD,mBACP,EACL,CAAE0N,QAAQ,eAOlC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1Bzb,MAAO,0CACPyQ,SAAS,mBAAe4tD,EAAa,CAAC,UACvC,IAAKvuD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,WAAY,qBAQ3D,wBAAoB,QAAQ,KAEtC9yB,EAAG,IAGf,I,QC7TJ,MAEA,GAFoB,GCHd,GAAa,CAAE8yB,MAAO,sCACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,QACtB,GAAa,CAAEA,MAAO,wBACtB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,cACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,wBAEL,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAElV,MAAO,CAAE,cAAe,MAAO,YAAa,OAAQ,MAAS,sBAAuB,cAAe,SACnH,GAAc,CAAEkV,MAAO,wDACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,kDACvB,GAAc,CAAC,QAAS,WACxB,GAAc,CAAC,QAAS,WACxB,GAAc,CAAC,QAAS,QAAS,WACjC,GAAc,CAAEA,MAAO,qBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,cACvB,GAAc,CAAC,WACf,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,cACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,4BAEL,GAAc,CAAEA,MAAO,2BACvB,GAAc,CAAEA,MAAO,yBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,wBAEL,GAAc,CAAEA,MAAO,uBACvB4vE,GAAc,CAAE5vE,MAAO,uBACvB6vE,GAAc,CAAE7vE,MAAO,2BACvB8vE,GAAc,CAAE9vE,MAAO,2BACvB+vE,GAAc,CAAE/vE,MAAO,oBACvBgwE,GAAc,CAAEhwE,MAAO,oBACvBiwE,GAAc,CAAEjwE,MAAO,uBACvBkwE,GAAc,CAChB7rH,IAAK,EACL27C,MAAO,2BAELmwE,GAAc,CAAEnwE,MAAO,2BACvBowE,GAAc,CAAC,WACfC,GAAc,CAAC,WACfC,GAAc,CAChBjsH,IAAK,EACL27C,MAAO,oBAELuwE,GAAc,CAAEvwE,MAAO,4BACvBwwE,GAAc,CAAExwE,MAAO,wBACvBywE,GAAc,CAAEzwE,MAAO,sBACvB0wE,GAAc,CAAE1wE,MAAO,mCClF7B,IDsF6B,qBAAiB,CAC1CM,OAAQ,sBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjBioB,SAAU,CAAC,GAEf8a,MAAO,CAAC,QAAS,uBACjB,KAAAC,CAAMC,GAAWG,KAAMC,IAMnB,MAAMxc,EAAQoc,EACRG,EAAOC,EACPE,GAAmB,EAAA/pB,GAAA,MAGnB58B,IAFU,EAAA8oC,EAAA,OAED,IAAAh2B,UAAS,IAAM6zC,EAAiB3mD,SAEzCqrC,GAAW,IAAAv4B,UAAS,IAAMm3B,EAAMoB,UAAY,IAE5C1O,GAAe,IAAA7pB,UAAS,IAAM6zC,EAAiBrnB,mBAE/Cg3F,GAAkB,IAAAjzH,KAAI,MACtBkzH,GAAoB,IAAAjzH,UAAS,CAC/Bmb,MAAO,GACP9J,MAAO,UACPonB,MAAO,GACPy6F,YAAa,KAKjB,SAASC,EAAsBr5F,GAC3B,MAAMC,EAAcspB,EAAiB3mD,OAAOw8B,cAAcY,GAC1D,GAAIC,EACA,OAAOA,EAAY9B,OAGvB,MAAM/qB,EAAQ66B,EAASpmC,MAAMyL,QAAQ0sB,GACrC,OAAI5sB,GAAS,GAAKA,EAAQ,MAAsBzU,OACrC,MAAsByU,GAAO+qB,OAGjC,MAAsBA,MACjC,CAIA,SAASm7F,EAA0Bt5F,GAC/B,MAAMC,EAAcspB,EAAiB3mD,OAAOw8B,cAAcY,GAC1D,GAAIC,EAAa,CAEb,MAAM3kB,EAAQ2kB,EAAY7B,WAAW9iB,MAAM,kCAC3C,GAAIA,EAAO,CACP,MAAM0J,EAAIhS,SAASsI,EAAM,IACnB2J,EAAIjS,SAASsI,EAAM,IACnBjD,EAAIrF,SAASsI,EAAM,IACzB,MAAO,IAAI0J,EAAE5mB,SAAS,IAAI65H,SAAS,EAAG,OAAOhzG,EAAE7mB,SAAS,IAAI65H,SAAS,EAAG,OAAO5/G,EAAEja,SAAS,IAAI65H,SAAS,EAAG,MAC9G,CACA,OAAOh4F,EAAY7B,UACvB,CAEA,MAAMhrB,EAAQ66B,EAASpmC,MAAMyL,QAAQ0sB,GACrC,IAAIu5F,EAEAA,EADAnmH,GAAS,GAAKA,EAAQ,MAAsBzU,OAChC,MAAsByU,GAAOgrB,WAI7B,MAAsBA,WAEtC,MAAM9iB,EAAQi+G,EAAUj+G,MAAM,kCAC9B,GAAIA,EAAO,CACP,MAAM0J,EAAIhS,SAASsI,EAAM,IACnB2J,EAAIjS,SAASsI,EAAM,IACnBjD,EAAIrF,SAASsI,EAAM,IACzB,MAAO,IAAI0J,EAAE5mB,SAAS,IAAI65H,SAAS,EAAG,OAAOhzG,EAAE7mB,SAAS,IAAI65H,SAAS,EAAG,OAAO5/G,EAAEja,SAAS,IAAI65H,SAAS,EAAG,MAC9G,CACA,MAAO,SACX,CAIA,SAASuB,EAAkBx5F,GACvB,MAAMC,EAAcspB,EAAiB3mD,OAAOw8B,cAAcY,GAC1D,GAAIC,QAAuC9gC,IAAxB8gC,EAAYlX,QAC3B,OAAOkX,EAAYlX,QAGvB,MAAM3V,EAAQ66B,EAASpmC,MAAMyL,QAAQ0sB,GACrC,OAAI5sB,GAAS,GAAKA,EAAQ,MAAsBzU,OACrC,MAAsByU,GAAO2V,QAGjC,MAAsBA,SAAW,EAC5C,CAsDA,SAASD,EAAUhE,EAAKgjB,GAIpB,MAAO,QAHG90B,SAAS8R,EAAI/L,MAAM,EAAG,GAAI,QAC1B/F,SAAS8R,EAAI/L,MAAM,EAAG,GAAI,QAC1B/F,SAAS8R,EAAI/L,MAAM,EAAG,GAAI,QACH+uB,IACrC,CAIA,SAAS2xF,IAELrwE,EAAK,SAELA,EAAK,sBACT,CAIA,SAAS+wD,IAEL/wD,EAAK,QACT,CAIA,SAASw9D,IACLr9D,EAAiB9gD,gBACrB,CAOA,SAASixH,IACLnwE,EAAiB3nB,iBAAiBrC,EAAa13B,MAAMhF,QACzD,CAUA,SAAS82H,IAOLpwE,EAAiBznB,cAND,CACZzgB,MAAO,MACP9J,MAAO,UACPonB,MAAO,IACPvT,SAAU,KAId,MAAMpd,EAAQu7C,EAAiBrnB,kBAAkBl0B,MAC3C4rH,EAAY5rH,EAAMA,EAAMrP,OAAS,GACnCi7H,GACAC,EAAqBD,EAE7B,CAIA,SAASC,EAAqBt7H,GAC1B26H,EAAgBrxH,MAAQtJ,EAAKP,GAC7Bm7H,EAAkB93G,MAAQ9iB,EAAK8iB,MAC/B83G,EAAkB5hH,MAAQhZ,EAAKgZ,MAC/B4hH,EAAkBx6F,MAAQpgC,EAAKogC,OAAS,GACxCw6F,EAAkBC,YAAc76H,EAAK6sB,SAASxsB,KAAK,KACvD,CAIA,SAASk7H,IACL,IAAKZ,EAAgBrxH,MACjB,OACJ,MAAMujB,EAAW+tG,EAAkBC,YAC9B/nG,MAAM,QACN/yB,IAAIsS,GAAKA,EAAEyK,QACX1L,OAAOiB,GAAKA,EAAEjS,OAAS,GAC5B4qD,EAAiBvnB,iBAAiBk3F,EAAgBrxH,MAAO,CACrDwZ,MAAO83G,EAAkB93G,MACzB9J,MAAO4hH,EAAkB5hH,MACzBonB,MAAOw6F,EAAkBx6F,YAASx/B,EAClCisB,aAEJ8tG,EAAgBrxH,MAAQ,IAC5B,CAIA,SAASkyH,IACLb,EAAgBrxH,MAAQ,IAC5B,CAUA,SAASmyH,IACLzwE,EAAiBpnB,mBACrB,CACA,MAAO,CAACi2B,EAAMC,MACF,kBAAc,iBAAa,aAAa,CAAE1tD,KAAM,SAAW,CAC/Dy9C,SAAS,aAAS,IAAM,CACnBa,EAAe,UACT,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,sBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,SAAU,KAChG,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,SAEP,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,gBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,MAAQA,EAAO,KAAM,qBAAiB,UAAW,KACxD,wBAAoB,OAAQ,IAAY,qBAAiBz1D,EAAOiF,MAAMg3B,UAAY,KAAM,MAE5F,wBAAoB,MAAO,GAAY,EACnC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBw5B,EAAO,KAAOA,EAAO,GAAMK,GAAa91D,EAAOiF,MAAc,SAAI6wD,GACxFx0D,KAAM,QACNqc,IAAK,KACL+I,IAAK,KACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,aACApzG,EAAOiF,MAAMg3B,cACR,EACL,CAAEmlC,QAAQ,WAK1B,wBAAoB,UACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,qBAAiB,SAAU,KACvD,wBAAoB,OAAQ,IAAa,qBAAiBz1D,EAAOiF,MAAMi3B,UAAUvwB,QAAQ,IAAM,KAAM,MAEzG,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8pD,EAAO,KAAOA,EAAO,GAAMK,GAAa91D,EAAOiF,MAAe,UAAI6wD,GACzFx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,IACL0sF,KAAM,OACP,KAAM,KAAuB,CAC5B,CACI,aACApzG,EAAOiF,MAAMi3B,eACR,EACL,CAAEklC,QAAQ,WAK1B,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,YAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,QAAS,GAAa,EACtC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAa91D,EAAOiF,MAAgB,WAAI6wD,GAC1Fx0D,KAAM,YACP,KAAM,KAAuB,CAC5B,CAAC,iBAAiBtB,EAAOiF,MAAMq3B,cAEnCm5B,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,UAAY,MAAO,WAIhG,wBAAoB,aACpB,wBAAoB,MAAO,CACvBA,MAAO,+BACPyQ,SAAS,mBAAeygE,EAAyB,CAAC,UACnD,IAAKphE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACxD,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,YAC/C,IACJ,wBAAoB,MAAO,CAAEA,MAAO,wBAA0B,EAC1D,wBAAoB,IAAK,CAAEA,MAAO,2BAClC,YAIpB,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,qBAAiB,UAAW,KACxD,wBAAoB,OAAQ,IAAa,qBAAiBz1D,EAAOiF,MAAMk3B,uBAAyB,KAAM,MAE1G,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBs5B,EAAO,KAAOA,EAAO,GAAMK,GAAa91D,EAAOiF,MAA2B,sBAAI6wD,GACrGx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,KACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,aACApzG,EAAOiF,MAAMk3B,2BACR,EACL,CAAEilC,QAAQ,WAK1B,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,qBAAiB,UAAW,KACxD,wBAAoB,OAAQ,IAAa,qBAAiBz1D,EAAOiF,MAAMm3B,mBAAqB,KAAM,MAEtG,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBq5B,EAAO,KAAOA,EAAO,GAAMK,GAAa91D,EAAOiF,MAAuB,kBAAI6wD,GACjGx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,KACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,aACApzG,EAAOiF,MAAMm3B,uBACR,EACL,CAAEglC,QAAQ,WAK1B,wBAAoB,cACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,qBAAiB,WAAY,KACzD,wBAAoB,OAAQ,IAAa,qBAAiBz1D,EAAOiF,MAAMo3B,sBAAwB,KAAM,MAEzG,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBo5B,EAAO,KAAOA,EAAO,GAAMK,GAAa91D,EAAOiF,MAA0B,qBAAI6wD,GACpGx0D,KAAM,QACNqc,IAAK,KACL+I,IAAK,KACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,aACApzG,EAAOiF,MAAMo3B,0BACR,EACL,CAAE+kC,QAAQ,eAOlC,wBAAoB,YACnB/1B,EAASpmC,MAAMlJ,OAAS,IAClB,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,GAAa,CACpC05D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,kBAAoB,MAAO,IACzF8P,EAAO,MAAQA,EAAO,KAAM,qBAAiB,UAAW,KACxD,wBAAoB,OAAQ,IAAa,qBAAiBpqB,EAASpmC,MAAMlJ,QAAU,QAAS,MAEhG,wBAAoB,UACpB05D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,0BAA4B,EACxF,wBAAoB,OAAQ,CAAEA,MAAO,aAAe,EAChD,wBAAoB,OAAQ,CAAEA,MAAO,qBACrC,qBAAiB,YAErB,wBAAoB,OAAQ,CAAEA,MAAO,aAAe,EAChD,wBAAoB,OAAQ,CAAEA,MAAO,oBACrC,qBAAiB,YAErB,wBAAoB,OAAQ,CAAEA,MAAO,aAAe,EAChD,wBAAoB,IAAK,CACrBA,MAAO,gBACPlV,MAAO,CAAE,YAAa,OAAQ,eAAgB,UAElD,qBAAiB,aAErB,KACJ,wBAAoB,eACpB,wBAAoB,MAAO,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYpF,EAASpmC,MAAQ6+C,KACzE,kBAAc,wBAAoB,MAAO,CAC7C95C,IAAK85C,EACL6B,MAAO,0CACR,EACC,wBAAoB,MAAO,IAAa,qBAAiB7B,GAAU,IACnE,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,QAAS,CACzBxiD,KAAM,QACNqkD,MAAO,aACP1gD,MAAOwxH,EAAsB3yE,GAC7Bv7B,MAAO,YACPqgF,QAAU9yC,GA7XlE,SAAmC14B,EAAan2B,GAC5C,MACM2rD,EADS3rD,EAAMC,OACSjC,MACxB8tG,EAAgBpsD,EAAiB3mD,OAAOw8B,cAAcY,IAAgB,CACxE7B,OAAQk7F,EAAsBr5F,GAC9B5B,WAAYtV,EAAUwwG,EAA0Bt5F,GAAc,KAElEupB,EAAiBxpB,gBAAgBC,EAAa,IACvC21E,EACHx3E,OAAQq3B,GAEhB,CAkX6E,CAA2B9O,EAASgS,IAC1D,KAAM,GAAgC,KACzC,wBAAoB,QAAS,CACzBx0D,KAAM,QACN2D,MAAOyxH,EAA0B5yE,GACjCv7B,MAAO,OACPqgF,QAAU9yC,GApXlE,SAAuC14B,EAAan2B,GAChD,MACMowH,EADSpwH,EAAMC,OACGjC,MAClBqyH,EAAiBV,EAAkBx5F,GACnC21E,EAAgBpsD,EAAiB3mD,OAAOw8B,cAAcY,IAAgB,CACxE7B,OAAQk7F,EAAsBr5F,GAC9B5B,WAAYtV,EAAUmxG,EAAUC,EAAiB,KACjDnxG,QAASmxG,GAEb3wE,EAAiBxpB,gBAAgBC,EAAa,IACvC21E,EACHv3E,WAAYtV,EAAUmxG,EAAUC,EAAiB,MAEzD,CAuW6E,CAA+BxzE,EAASgS,IAC9D,KAAM,GAAgC,KACzC,wBAAoB,QAAS,CACzBx0D,KAAM,QACNqkD,MAAO,qBACP1gD,MAAO2xH,EAAkB9yE,GACzBnmC,IAAK,IACL+I,IAAK,MACL0sF,KAAM,IACN7qF,MAAO,QAAQquG,EAAkB9yE,MACjC8kD,QAAU9yC,GA7WlE,SAAoC14B,EAAan2B,GAC7C,MAAMC,EAASD,EAAMC,OACfif,EAAU/V,SAASlJ,EAAOjC,MAAO,IACjCoyH,EAAWX,EAA0Bt5F,GACrC21E,EAAgBpsD,EAAiB3mD,OAAOw8B,cAAcY,IAAgB,CACxE7B,OAAQk7F,EAAsBr5F,GAC9B5B,WAAYtV,EAAUmxG,EAAUlxG,EAAU,KAC1CA,QAASA,GAEbwgC,EAAiBxpB,gBAAgBC,EAAa,IACvC21E,EACHv3E,WAAYtV,EAAUmxG,EAAUlxG,EAAU,KAC1CA,QAASA,GAEjB,CA+V6E,CAA4B29B,EAASgS,IAC3D,KAAM,GAAgC,KACzC,wBAAoB,OAAQ,IAAa,qBAAiB8gE,EAAkB9yE,IAAY,IAAK,SAGrG,YAGV,wBAAoB,QAAQ,IAClC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC2R,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,kBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,aACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,cAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,QAAS,GAAa,EACtC,wBAAoB,QAAS,CACzB0tD,QAASrzG,EAAOiF,MAAMs3B,eACtBj7B,KAAM,WACNgyG,SAAU79C,EAAO,KAAOA,EAAO,GAAKzxD,IAAK,WAAO2iD,GAAkBhnB,kBAAkB37B,EAAEkD,OAAOmsG,WAC9F,KAAM,GAAgC,IACzC59C,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,UAAY,MAAO,UAIhG8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CACnD9P,MAAO,mBACPlV,MAAO,CAAE,kBAAmB,aAAc,cAAe,IAAK,iBAAkB,QACjF,EACC,wBAAoB,OAAQ,CAAEA,MAAO,CAAE,YAAa,OAAQ,MAAS,wBAA2B,EAC5F,wBAAoB,IAAK,CACrBkV,MAAO,qBACPlV,MAAO,CAAE,eAAgB,UAE7B,qBAAiB,iCAErB,SAGZ,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpCglB,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,oBAClC,qBAAiB,WACjB,wBAAoB,OAAQ,CAAElV,MAAO,CAAE,cAAe,MAAO,YAAa,OAAQ,MAAS,sBAAuB,cAAe,SAAY,eAC7I,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,cACpB,wBAAoB,MAAO,GAAa,CACpCglB,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,cACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,cAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,QAAS,GAAa,EACtC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAan5B,EAAa13B,MAAa,QAAI6wD,GAC7Fx0D,KAAM,WACNgyG,SAAUwjB,GACX,KAAM,KAAuC,CAC5C,CAAC,iBAAiBn6F,EAAa13B,MAAMhF,WAEzCw1D,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,UAAY,MAAO,aAKpG,wBAAoB,WACnBhpB,EAAa13B,MAAa,UACpB,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,GAAa,CACpCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,KAAM,OAAQ,KACtE,wBAAoB,SAAU,CAC1B9P,MAAO,sCACPyQ,SAAS,mBAAe2gE,EAAqB,CAAC,UAC/C,IAAKthE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,QAAS,UAGtC,wBAAoB,MAAO,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYhpB,EAAa13B,MAAMmG,MAAQzP,KACnF,kBAAc,wBAAoB,MAAO,CAC7CqO,IAAKrO,EAAKP,GACVuqD,MAAO,uBACR,EACC,wBAAoB,UACnB2wE,EAAgBrxH,QAAUtJ,EAAKP,KACzB,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBq6D,EAAO,KAAOA,EAAO,GAAMK,GAAaygE,EAAuB,MAAIzgE,GAC1Fx0D,KAAM,OACNy0D,YAAa,KACbpQ,MAAO,oBACR,KAAM,KAAuB,CAC5B,CAAC,aAAa4wE,EAAkB93G,UAEpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBg3C,EAAO,KAAOA,EAAO,GAAMK,GAAaygE,EAAuB,MAAIzgE,GAC1Fx0D,KAAM,QACNqkD,MAAO,yBACPp9B,MAAO,MACR,KAAM,KAAuB,CAC5B,CAAC,aAAaguG,EAAkB5hH,UAEpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8gD,EAAO,MAAQA,EAAO,IAAOK,GAAaygE,EAAuB,MAAIzgE,GAC5Fx0D,KAAM,OACNy0D,YAAa,QACbpQ,MAAO,yBACP4xE,UAAW,KACZ,KAAM,KAAuB,CAC5B,CAAC,aAAahB,EAAkBx6F,YAGxC,wBAAoB,MAAOw5F,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB9/D,EAAO,MAAQA,EAAO,IAAOK,GAAaygE,EAA6B,YAAIzgE,GAClGx0D,KAAM,OACNy0D,YAAa,YACbpQ,MAAO,6BACR,KAAM,KAAuB,CAC5B,CAAC,aAAa4wE,EAAkBC,kBAGxC,wBAAoB,MAAOhB,GAAa,EACpC,wBAAoB,SAAU,CAC1B7vE,MAAO,6DACPyQ,SAAS,mBAAe8gE,EAAsB,CAAC,UAChD,IAAKzhE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,QAEnE,wBAAoB,SAAU,CAC1BA,MAAO,sCACPyQ,SAAS,mBAAe+gE,EAA4B,CAAC,UACtD,IAAK1hE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,cAIxE,kBAAc,wBAAoB,WAAW,CAAE37C,IAAK,GAAK,EACxD,wBAAoB,WACpB,wBAAoB,MAAOyrH,GAAa,EACpC,wBAAoB,OAAQ,CACxB9vE,MAAO,uBACPlV,OAAO,oBAAgB,CAAE7U,gBAAiBjgC,EAAKgZ,SAChD,KAAM,IACT,wBAAoB,OAAQ+gH,IAAa,qBAAiB/5H,EAAKogC,OAAS,IAAK,IAC7E,wBAAoB,OAAQ45F,IAAa,qBAAiBh6H,EAAK8iB,OAAQ,IACvE,wBAAoB,MAAOm3G,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYj6H,EAAK6sB,SAASrS,MAAM,EAAG,GAAKupB,KACpF,kBAAc,wBAAoB,OAAQ,CAC9C11B,IAAK01B,EACLimB,MAAO,2BACR,qBAAiBjmB,GAAK,KACzB,MACH/jC,EAAK6sB,SAASzsB,OAAS,IACjB,kBAAc,wBAAoB,OAAQ85H,GAAa,MAAO,qBAAiBl6H,EAAK6sB,SAASzsB,OAAS,GAAI,KAC3G,wBAAoB,QAAQ,QAG1C,wBAAoB,MAAO+5H,GAAa,EACpC,wBAAoB,SAAU,CAC1BnwE,MAAO,wBACPp9B,MAAO,KACP6tC,SAAS,mBAAgBN,GAAYmhE,EAAqBt7H,GAAQ,CAAC,UACpE,IAAK85D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,MACxD,EAAeowE,KACzB,wBAAoB,SAAU,CAC1BpwE,MAAO,qDACPp9B,MAAO,KACP6tC,SAAS,mBAAgBN,IAAW,OA7axE16D,EA6agGO,EAAKP,QA5ajIurD,EAAiBtnB,iBAAiBjkC,GADtC,IAAgCA,GA6a2G,CAAC,UACzE,IAAKq6D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,MACzD,EAAeqwE,OAE9B,SAEX,MACiC,IAApCr5F,EAAa13B,MAAMmG,MAAMrP,SACnB,kBAAc,wBAAoB,MAAOk6H,GAAa,IAAKxgE,EAAO,MAAQA,EAAO,IAAM,EAClF,wBAAoB,OAAQ,KAAM,sBAAyB,SAEjE,wBAAoB,QAAQ,MAEtC,wBAAoB,cACpB,wBAAoB,MAAOygE,GAAa,EACpC,wBAAoB,SAAU,CAC1BvwE,MAAO,+DACPyQ,SAAS,mBAAeghE,EAAyB,CAAC,UACnD,IAAK3hE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,aAAc,aAI7C,wBAAoB,QAAQ,MAEtC,wBAAoB,WACpB,wBAAoB,MAAOwwE,GAAa,EACpC,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,MAAOC,GAAa,EACpC,wBAAoB,SAAU,CAC1B1wE,MAAO,0CACPyQ,SAAS,mBAAe4tD,EAAa,CAAC,UACvC,IAAKvuD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,UAAW,qBAQ1D,wBAAoB,QAAQ,KAEtC9yB,EAAG,IAGf,IEhzBE,GAAa,CAAE8yB,MAAO,mCACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,mBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,qBACtB,GAAa,CAAC,WACd,GAAa,CAAEA,MAAO,oBACtB,GAAc,CAAEA,MAAO,2BACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,QACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,mCAI7B,IAA6B,qBAAiB,CAC1CM,OAAQ,mBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,QAASoiC,SAAS,GACnC7mB,OAAQ,CAAE6mB,QAAS,IACnB/Z,SAAU,CAAE+Z,QAAS,IACrB9Z,aAAc,CAAE8Z,QAAS,IACzB7Z,gBAAiB,CAAE6Z,QAAS,IAAM,KAEtCW,MAAO,CAAC,QAAS,UAAW,qBAAsB,gBAClD,KAAAC,CAAMC,GAAWG,KAAMC,IAWnB,MAAMxc,EAAQoc,EACRG,EAAOC,EAIPE,GAAmB,EAAA/pB,GAAA,MAKnB46F,GAAuB,IAAAn0H,KAAI,IAAI0T,KAErC,SAAS0gH,IACL,IACI,MACMnvE,GADY3/C,OAAOC,QAAQipC,UAAYA,UACnB0W,cAAc,gBACxC,GAAID,EAAS,CACT,MAAMx1C,EAAW01C,iBAAiBF,GAASG,iBAAiB,mBAAmBhwC,OAC/E,GAAI3F,EACA,OAAOA,CACf,CACA,MAAO,SACX,CACA,MACI,MAAO,SACX,CACJ,CACA,MAAM4kH,GAAmB,IAAAp0H,UAAS,CAC9B/B,KAAM,MAAmBA,MAAQ,GACjCE,YAAag2H,IACb97F,YAAa,MAAmBA,aAAe,EAC/CE,MAAO,MAAmBA,OAAS,YA8BvC,SAAS87F,IACL,MAAMp5F,EAAWooB,EAAiB/nB,qBAAqBqL,EAAMtL,QACvDstB,EAAqBwrE,IACvBl5F,GACAm5F,EAAiBn2H,KAAOg9B,EAASh9B,MAAQ,MAAmBA,MAAQ,GACpEm2H,EAAiBj2H,YAAc88B,EAAS98B,aAAewqD,EACvDyrE,EAAiB/7F,YAAc4C,EAAS5C,aAAe,MAAmBA,aAAe,EACzF+7F,EAAiB77F,MACb0C,EAAS1C,OACL,MAAmBA,OACnB,YAIR67F,EAAiBn2H,KAAO,MAAmBA,MAAQ,GACnDm2H,EAAiBj2H,YAAcwqD,EAC/ByrE,EAAiB/7F,YAAc,MAAmBA,aAAe,EACjE+7F,EAAiB77F,MACb,MAAmBA,OAAS,UAExC,CAOA,SAASuiB,EAAcr2C,GACnB,MAAO,kBAAkB4mB,KAAK5mB,IAASA,EAAKqB,SAAS,IACzD,CAMA,SAASwuH,EAAwBnsF,GAC7B,OAAI2S,EAAc3S,GACPA,EAAShd,MAAM,KAAK1hB,OAAOqW,SAE/BqoB,EAAShd,MAAM,GAC1B,EAnEA,IAAA7M,OAAM,IAAMqoB,EAAM0B,gBAAiBksF,IAC/BL,EAAqBvyH,MAAQ,IAAI8R,IAAI8gH,IACtC,CAAE/6F,WAAW,KAEhB,IAAAlb,OAAM,IAAMqoB,EAAMluB,QAAS+3C,IACnBA,IAEI7pB,EAAM0B,gBAAgB5vC,OAAS,EAC/By7H,EAAqBvyH,MAAQ,IAAI8R,IAAIkzB,EAAM0B,iBAI3C6rF,EAAqBvyH,MAAQ,IAAI8R,IA2D7C,SAA2B00B,GACvB,MAAMkiB,EAAQiqE,EAAwBnsF,GACtC,GAAI2S,EAAc3S,GAEd,MAAO,CAAC,GAGZ,OAAOkiB,EAAM5xD,OAAS,EAAI,CAAC4xD,EAAM5xD,OAAS,GAAK,EACnD,CAnEiD6xD,CAAkB3jB,EAAMwB,WAGjEksF,QAIR,IAAA/1G,OAAM,IAAMqoB,EAAMtL,OAAQ22F,IAClBA,GAASrrF,EAAMluB,SACf47G,MAsER,MAAMG,GAAe,IAAAhlH,UAAS,IAAM8kH,EAAwB3tF,EAAMwB,WAE5DssF,GAAe,IAAAjlH,UAAS,KAC1B,IAAKm3B,EAAMwB,SACP,MAAO,GACX,MAAMkiB,EAAQmqE,EAAa7yH,MACrB+yH,EAAgBnqH,MAAMC,KAAK0pH,EAAqBvyH,OACjDgR,KAAK,CAACjJ,EAAGyI,IAAMzI,EAAIyI,GACnB/Z,IAAIO,GAAK0xD,EAAM1xD,IACf8Q,OAAOqW,SACZ,OAA6B,IAAzB40G,EAAcj8H,OAlBtB,SAAyB0vC,GACrB,GAAI2S,EAAc3S,GAAW,CACzB,MAAM6S,EAAY7S,EAAShd,MAAM,KAAK,GACtC,OAAO6vB,EAAUviD,OAAS,EAAIuiD,EAAUnoC,MAAM,EAAG,GAAKmoC,CAC1D,CACA,OAAO7S,EAAS1vC,OAAS,EAAI0vC,EAASA,EAAS1vC,OAAS,GAAK0vC,CACjE,CAae4S,CAAgBpU,EAAMwB,UAG7B2S,EAAcnU,EAAMwB,UACbusF,EAAch8H,KAAK,KAEvBg8H,EAAch8H,KAAK,MAiB9B,SAASu7G,IAEL,MAAM5rE,EAAkB99B,MAAMC,KAAK0pH,EAAqBvyH,OACxDuhD,EAAK,UAAWvc,EAAMtL,OAAQo5F,EAAa9yH,MAAO0mC,GAClD6a,EAAK,QACT,CAgBA,SAASyxE,IACLzxE,EAAK,qBAAsBvc,EAAMtL,OAAQsL,EAAMwB,SACnD,CAEA,SAASysF,IACLvxE,EAAiB9nB,wBAAwBoL,EAAMtL,QAE/C+4F,EAAiBn2H,KAAO,MAAmBA,MAAQ,GACnDm2H,EAAiBj2H,YAAcg2H,IAC/BC,EAAiB/7F,YAAc,MAAmBA,aAAe,EACjE+7F,EAAiB77F,MACb,MAAmBA,OAAS,UAChC2qB,EAAK,eAAgBvc,EAAMtL,OAC/B,CACA,OA5BA,IAAAq1D,aAAY,KACH/pD,EAAMluB,SAAYkuB,EAAMtL,SAG7BgoB,EAAiBjoB,qBAAqBuL,EAAMtL,OAAQ,CAChDp9B,KAAMm2H,EAAiBn2H,KACvBE,YAAai2H,EAAiBj2H,YAC9Bk6B,YAAa+7F,EAAiB/7F,YAC9BE,MAAO67F,EAAiB77F,QAG5B2qB,EAAK,eAAgBvc,EAAMtL,WAiBxB,CAAC62B,EAAMC,MACF,kBAAc,iBAAa,aAAa,CAAE1tD,KAAM,SAAW,CAC/Dy9C,SAAS,aAAS,IAAM,CACnBa,EAAe,UACT,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,sBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,OAAQ,GAAY,WAAY,qBAAiBlxD,EAAQ5a,UAAW,IACxF,wBAAoB,SAAU,CAC1Bka,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,SAEP,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,mBAAoB,KACnG,wBAAoB,MAAO,GAAY,GAClC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYmyE,EAAa7yH,MAAO,CAAC0oH,EAAMn9G,MACnF,kBAAc,wBAAoB,SAAU,CAChDxG,IAAKwG,EACLm1C,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAAQqhE,EAAqBvyH,MAAM6C,IAAI0I,MACjF4lD,SAAS,mBAAgBN,GA/EzE,SAA6BtlD,GACzB,MAAMwkH,EAAS,IAAIj+G,IAAIygH,EAAqBvyH,OACxC+vH,EAAOltH,IAAI0I,GACXwkH,EAAO7sH,OAAOqI,GAGdwkH,EAAO//G,IAAIzE,GAEfgnH,EAAqBvyH,MAAQ+vH,CACjC,CAsEoF,CAAqBxkH,GAAS,CAAC,WACpE,qBAAiBm9G,GAAO,GAA6B,MACxD,SAER,wBAAoB,IAAK,GAAY,OAAQ,qBAAiBoK,EAAa9yH,OAAQ,IACnF,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1B0gD,MAAO,2BACPyQ,SAAS,mBAAe6hE,EAAuB,CAAC,UACjD,eAIf,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpCxiE,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,oBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,KAAOA,EAAO,IAAK,qBAAiB,UAAW,KACtD,wBAAoB,OAAQ,IAAa,qBAAiBiiE,EAAiBn2H,MAAQ,KAAM,MAE7F,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuBk0D,EAAO,KAAOA,EAAO,GAAMK,GAAa4hE,EAAqB,KAAI5hE,GACxFx0D,KAAM,QACNqc,IAAK,KACL+I,IAAK,MACL0sF,KAAM,KACP,KAAM,KAAuB,CAC5B,CACI,aACAskB,EAAiBn2H,UACZ,EACL,CAAE6/D,QAAQ,WAK1B,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,WAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAa4hE,EAA4B,YAAI5hE,GAC/Fx0D,KAAM,QACNqkD,MAAO,aACPp9B,MAAO,QACR,KAAM,KAAuB,CAC5B,CAAC,aAAamvG,EAAiBj2H,oBAI3C,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpCg0D,EAAO,KAAOA,EAAO,IAAK,qBAAiB,UAAW,KACtD,wBAAoB,OAAQ,IAAa,qBAAiBiiE,EAAiB/7F,aAAe,KAAM,MAEpG,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB85B,EAAO,KAAOA,EAAO,GAAMK,GAAa4hE,EAA4B,YAAI5hE,GAC/Fx0D,KAAM,QACNqc,IAAK,IACL+I,IAAK,KACL0sF,KAAM,OACP,KAAM,KAAuB,CAC5B,CACI,aACAskB,EAAiB/7F,iBACZ,EACL,CAAEylC,QAAQ,WAK1B,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC3L,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,UAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAa4hE,EAAsB,MAAI5hE,IAC1F,IAAKL,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,SAAU,CAAExwD,MAAO,WAAa,MAAO,IAC3D,wBAAoB,SAAU,CAAEA,MAAO,mBAAqB,QAAS,IACrE,wBAAoB,SAAU,CAAEA,MAAO,aAAe,MAAO,IAC7D,wBAAoB,SAAU,CAAEA,MAAO,WAAa,OAAQ,MAC1D,KAAuB,CAC7B,CAAC,eAAeyyH,EAAiB77F,kBAMrD,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1B8pB,MAAO,0CACPyQ,SAAS,mBAAe8hE,EAAkB,CAAC,UAC5C,IAAKziE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,UAAW,qBAQ1D,wBAAoB,QAAQ,KAEtC9yB,EAAG,IAGf,I,QCjZJ,MAEA,GAFoB,GCHd,GAAa,CAAE8yB,MAAO,mCACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CACfA,MAAO,oBACPlV,MAAO,CAAE,gBAAiB,MAAO,cAAe,QAE9C,GAAa,CAAEkV,MAAO,qBACtB,GAAa,CAAC,WACd,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,2BCP5B,IDS6B,qBAAiB,CAC1CM,OAAQ,kBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,QAASoiC,SAAS,GACnC/Z,SAAU,CAAE+Z,QAAS,IACrBxZ,eAAgB,CAAEwZ,QAAS,IAAM,KAErCW,MAAO,CAAC,QAAS,QAAS,SAC1B,KAAAC,CAAMC,GAAWC,OAAQC,EAAUC,KAAMC,IAUrC,MAAMxc,EAAQoc,EACRG,EAAOC,EAKP9a,GAAkB,IAAAtoC,KAAI,IAAI0T,KAOhC,SAASqnC,EAAcr2C,GACnB,MAAO,kBAAkB4mB,KAAK5mB,IAASA,EAAKqB,SAAS,IACzD,CAMA,SAASwuH,EAAwBnsF,GAC7B,OAAKA,EAED2S,EAAc3S,GACPA,EAAShd,MAAM,KAAK1hB,OAAOqW,SAE/BqoB,EAAShd,MAAM,IAJX,EAKf,CAIA,SAAS0pG,EAA0B1sF,GAC/B,MAAMkiB,EAAQiqE,EAAwBnsF,GACtC,OAAI2S,EAAc3S,GAEP,CAAC,GAGLkiB,EAAM5xD,OAAS,EAAI,CAAC4xD,EAAM5xD,OAAS,GAAK,EACnD,CAIA,SAASsiD,EAAgB5S,GACrB,GAAI2S,EAAc3S,GAAW,CAEzB,MAAM6S,EAAY7S,EAAShd,MAAM,KAAK,GACtC,OAAO6vB,EAAUviD,OAAS,EAAIuiD,EAAUnoC,MAAM,EAAG,GAAKmoC,CAC1D,CAEA,OAAO7S,EAAS1vC,OAAS,EAAI0vC,EAASA,EAAS1vC,OAAS,GAAK0vC,CACjE,CAKA,MAAMqsF,GAAe,IAAAhlH,UAAS,IAAM8kH,EAAwB3tF,EAAMwB,WAE5DssF,GAAe,IAAAjlH,UAAS,KAC1B,IAAKm3B,EAAMwB,SACP,MAAO,GACX,MAAMkiB,EAAQmqE,EAAa7yH,MACrB+yH,EAAgBnqH,MAAMC,KAAK69B,EAAgB1mC,OAC5CgR,KAAK,CAACjJ,EAAGyI,IAAMzI,EAAIyI,GACnB/Z,IAAIO,GAAK0xD,EAAM1xD,IACf8Q,OAAOqW,SACZ,OAA6B,IAAzB40G,EAAcj8H,OACPsiD,EAAgBpU,EAAMwB,UAG7B2S,EAAcnU,EAAMwB,UACbusF,EAAch8H,KAAK,KAEvBg8H,EAAch8H,KAAK,MAiB9B,SAAS41H,IACLprE,EAAK,QAAS,CACVnR,aAAc0iF,EAAa9yH,MAC3B0mC,gBAAiB99B,MAAMC,KAAK69B,EAAgB1mC,SAEhDuhD,EAAK,QACT,CAEA,SAAS4xE,IACL5xE,EAAK,SACLA,EAAK,QACT,CAEA,SAAS+wD,IACL/wD,EAAK,QACT,CAwBA,OAnBA,IAAA5kC,OAAM,IAAM,CAACqoB,EAAMluB,QAASkuB,EAAMwB,SAAUxB,EAAM+B,gBAAiB,EAAEjwB,MAC7DA,IACIkuB,EAAM+B,gBAAkB/B,EAAM+B,eAAejwC,OAAS,EACtD4vC,EAAgB1mC,MAAQ,IAAI8R,IAAIkzB,EAAM+B,gBAGtCL,EAAgB1mC,MAAQ,IAAI8R,IAAIohH,EAA0BluF,EAAMwB,aAGzE,CAAE3O,WAAW,IAIhBypB,EAAS,CACLnI,gBACA5wC,gBAAiBoqH,EACjBhqE,kBAAmBuqE,EACnB95E,oBAEG,CAACmX,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,uCACPlV,MAAO,CAAE,UAAW,cACpB2lB,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,WAAY,KAChG,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,SAEP,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,IAAK,GAAY,OAAQ,qBAAiBlxD,EAAQ5a,UAAW,GACjFgqB,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,mBAAoB,KACnG,wBAAoB,MAAO,GAAY,GAClC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYmyE,EAAa7yH,MAAO,CAAC0oH,EAAMn9G,MACnF,kBAAc,wBAAoB,SAAU,CAChDxG,IAAKwG,EACLm1C,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAAQxqB,EAAgB1mC,MAAM6C,IAAI0I,MAC5E4lD,SAAS,mBAAgBN,GA1EzD,SAA6BtlD,GACzB,MAAMwkH,EAAS,IAAIj+G,IAAI40B,EAAgB1mC,OACnC+vH,EAAOltH,IAAI0I,GACXwkH,EAAO7sH,OAAOqI,GAGdwkH,EAAO//G,IAAIzE,GAEfm7B,EAAgB1mC,MAAQ+vH,CAC5B,CAiEoE,CAAqBxkH,GAAS,CAAC,WACpE,qBAAiBm9G,GAAO,GAA6B,MACxD,SAER,wBAAoB,IAAK,GAAY,OAAQ,qBAAiBoK,EAAa9yH,OAAQ,IACnF,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1B0gD,MAAO,2BACPyQ,SAAS,mBAAegiE,EAAiB,CAAC,UAC3C,SACH,wBAAoB,SAAU,CAC1BzyE,MAAO,yBACPyQ,SAAS,mBAAew7D,EAAe,CAAC,UACzC,gBAKjB,wBAAoB,QAAQ,EAE1C,IE5ME,GAAa,CAAEjsE,MAAO,gCACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,mBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,wBCD5B,IDK6B,qBAAiB,CAC1CM,OAAQ,gBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,QAASoiC,SAAS,GACnCn0C,UAAW,CAAC,EACZqL,QAAS,CAAC,EACV7K,SAAU,CAAC,EACXq4B,eAAgB,CAAEsb,QAAS,MAC3Bjb,cAAe,CAAEib,QAAS,IAE9BW,MAAO,CAAC,iBAAkB,QAAS,eACnC,KAAAC,CAAMC,GAAWG,KAAMC,IAUnB,MAAMxc,EAAQoc,EAER1gB,GAAc,EAAAxkB,EAAA,MACdk3G,GAAa,IAAAvlH,UAAS,IAAM,aAAa6yB,EAAYrjC,SACrDkkD,EAAOC,EAKPijD,GAAe,IAAA52F,UAAS,KAC1B,IAAKm3B,EAAMC,eACP,OAAOD,EAAM54B,UACjB,MAAM2sG,EAAW/zE,EAAMM,cACvB,GAAIyzE,GAAY,GAAK/zE,EAAMC,eAAe93B,MAAMrW,OAASiiH,EAAU,CAC/D,MAAM/4G,EAAQglC,EAAMC,eAAe93B,MAAM4rG,IAAW/4G,MACpD,GAAIA,EACA,MAAO,GAAGglC,EAAM54B,eAAepM,GAEvC,CACA,MAAO,GAAGglC,EAAM54B,iBAAiB44B,EAAMp4B,SAAW,QAMtD,SAAS0lG,IACL/wD,EAAK,kBAAkB,GACvBA,EAAK,QACT,CAEA,SAASk0C,IAEL6c,GACJ,CAEA,SAAS+gB,IACL9xE,EAAK,cACT,CAOA,OALA,IAAA5kC,OAAM,IAAMqoB,EAAMluB,QAASgiE,OAKpB,CAACvoB,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,OAAO,oBAAgB,CAAC,mDAAoD0yE,EAAWpzH,QACvFmxD,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,aACpB9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,mCAAqC,MAAO,KAC1G,wBAAoB,OAAQ,GAAY,CACpC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,KACpF,qBAAiB,UAAW,qBAAiB+jD,EAAazkG,OAAQ,MAEtE,wBAAoB,mBACpB,wBAAoB,SAAU,CAC1B0gD,MAAO,6BACPyQ,SAAS,mBAAeskC,EAAY,CAAC,UACtC,SAEP,wBAAoB,UACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,0BACnBr0C,EAAsB,iBAChB,kBAAc,iBAAa0xD,GAAU,CACpC/tG,IAAK,EACL9M,KAAMmpD,EAAQnc,eACd,aAAcmc,EAAQh1C,UACtB,WAAYg1C,EAAQ3pC,QACpB,YAAa,OACb,eAAe,EACf,cAAc,EACd,uBAAuB,EACvB,kBAAmB2pC,EAAQ9b,cAC3B2tE,cAAeogB,GAChB,KAAM,EAAe,CAAC,OAAQ,aAAc,WAAY,sBACzD,wBAAoB,QAAQ,QAG1C,wBAAoB,kBACpB7iE,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,qBAAuB,MAAO,OAEjG,KACD,wBAAoB,QAAQ,EAE1C,IEzHE,GAAa,CAAEA,MAAO,sCACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,QACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,cACtB,GAAc,CAAC,UAAW,YAC1B,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,kBAEL,GAAc,CAChB37C,IAAK,EACL27C,MAAO,6BAEL,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAC,WCpBrB,IDwB6B,qBAAiB,CAC1CM,OAAQ,sBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjB2G,SAAU,CAAC,EACXmhB,eAAgB,CAAEsa,QAAS,IAAM,KAErCW,MAAO,CAAC,iBAAkB,SAC1B,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EACRG,EAAOC,EACP8sD,GAAiB,EAAA/rF,GAAA,KAEjB+wG,GAAkB,IAAAl1H,KAAI,IAEtBm1H,GAAmB,IAAA1lH,UAAS,IACvBxO,OAAOyO,OAAO,OAAgBhG,OAAOq3F,GAAwB,aAAdA,EAAOhpG,IAAmC,cAAdgpG,EAAOhpG,KA+B7F,SAASs0G,EAAche,GACnB,OAAO,MAAeA,IAAWlzE,MAAQ,aAC7C,CAEA,SAASi6G,EAAe/mC,GACpB,OAAO,MAAeA,IAAWjzE,OAASizE,CAC9C,CAEA,SAAS6lB,IAEDttE,EAAMlgB,UACNwpF,EAAezpF,aAAamgB,EAAMlgB,SAAU,CAAET,QAASivG,EAAgBtzH,QAE3EuhD,EAAK,kBAAkB,GACvBA,EAAK,QACT,CACA,OA5CA,IAAA5kC,OAAM,IAAMqoB,EAAMluB,QAASA,IACnBA,IAEAw8G,EAAgBtzH,MAAQglC,EAAMiB,eAAen+B,OAAO3R,GAAa,aAAPA,GAA4B,cAAPA,KAEpF,CAAE0hC,WAAW,IAuCT,CAAC04B,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,uCACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,EAChF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,cACjB,KACJ,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,SAEP,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,eACjB,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,0BACnB,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY6yE,EAAiBvzH,MAAQm/F,IACzF,OAAQ,kBAAc,wBAAoB,MAAO,CAC7Cp6F,IAAKo6F,EAAOhpG,GACZuqD,MAAO,oBACR,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,OAAQ,KAAM,EAC9B,wBAAoB,IAAK,CACrBA,OAAO,oBAAgB,CAAC,MAAOy+C,EAAO5lF,OACtCiyB,MAAO,CAAE,eAAgB,MAAO,MAAS,2BAC1C,KAAM,IACT,qBAAiB,KAAM,qBAAiB2zD,EAAO3lF,OAAQ,MAE3D,wBAAoB,OAAQ,IAAY,qBAAiB2lF,EAAOhqD,SAAU,MAE9E,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,yBACpB,wBAAoB,QAAS,GAAY,EACrC,wBAAoB,QAAS,CACzB94C,KAAM,WACN+xG,SArFtB3hB,EAqFgD0S,EAAOhpG,GApFtEm9H,EAAgBtzH,MAAMmE,SAASsoF,IAqFM4hB,SAAWx9C,GAlF3D,SAAsB47B,GAClB,MAAMlhF,EAAQ+nH,EAAgBtzH,MAAMyL,QAAQghF,GACxClhF,GAAS,EACT+nH,EAAgBtzH,MAAM+f,OAAOxU,EAAO,GAGpC+nH,EAAgBtzH,MAAM/J,KAAKw2F,EAEnC,CA0EsE,CAAc0S,EAAOhpG,KAC5C,KAAM,GAAgC,IACzCq6D,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,UAAY,MAAO,UAxF9H,IAA0B+rC,IA4FM,WAGZ,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpCj8B,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,cAAgB,MAAO,KACnF,qBAAiB,WAAY,qBAAiB4yE,EAAgBtzH,MAAMlJ,QAAU,KAAM,MAExF,wBAAoB,MAAO,GAAa,CACF,IAAjCw8H,EAAgBtzH,MAAMlJ,SAChB,kBAAc,wBAAoB,MAAO,GAAa,iBACtD,kBAAc,wBAAoB,MAAO,GAAa,GACpD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYw8H,EAAgBtzH,MAAQysF,KAChF,kBAAc,wBAAoB,MAAO,CAC7C1nF,IAAK0nF,EACL/rC,MAAO,oBACR,EACC,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,OAAQ,KAAM,EAC9B,wBAAoB,IAAK,CACrBA,OAAO,oBAAgB,CAAC,MAAO+pD,EAAche,KAC7CjhD,MAAO,CAAE,eAAgB,MAAO,MAAS,2BAC1C,KAAM,IACT,qBAAiB,KAAM,qBAAiBgoF,EAAe/mC,IAAY,QAG3E,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1B/rC,MAAO,8BACPp9B,MAAO,KACP6tC,SAAS,mBAAgBN,GA7G7E,SAAsB47B,GAClB,MAAMlhF,EAAQ+nH,EAAgBtzH,MAAMyL,QAAQghF,GACxClhF,GAAS,GACT+nH,EAAgBtzH,MAAM+f,OAAOxU,EAAO,EAE5C,CAwGwF,CAAckhF,GAAY,CAAC,UAChE,IAAKj8B,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,MACzD,EAAe,UAGjC,qBAO9B,wBAAoB,QAAQ,EAE1C,IE/LE,GAAa,CACftiD,IAAK,YACLsiD,MAAO,uCAEL,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAC,SACd,GAAa,CAAEA,MAAO,wBACtB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAC,SACf,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAC,SACf,GAAc,CAChB37C,IAAK,EACL27C,MAAO,qBAEL,GAAc,CAAC,WACf,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,QAEL,GAAc,CAChB37C,IAAK,EACL27C,MAAO,QAEL,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBCnC7B,ID2C6B,qBAAiB,CAC1CM,OAAQ,uBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjB2G,SAAU,CAAC,EACXqgB,aAAc,CAAEob,QAAS,MACzBnb,aAAc,CAAEmb,QAAS,IAAM,KAEnCW,MAAO,CAAC,iBAAkB,SAC1B,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EACRG,EAAOC,EACP9gB,GAAc,EAAAxkB,EAAA,MACdoyF,GAAiB,EAAA/rF,GAAA,KACjBk/B,GAAU,EAAA5d,EAAA,MAKV4vF,GAAoB,IAAA5lH,UAAS,IACxByyG,EAAYt9F,iBAAiBC,iBAAiBnsB,QAAU,GAG7D48H,GAAyB,IAAA7lH,UAAS,IAC7ByyG,EAAYt9F,iBAAiBG,sBAAsBrsB,QAAU,GAGxE,SAAS68H,IACLlyE,EAAQhP,qBAAqB,CACzB3tB,SAAUkgB,EAAMlgB,SAChB7B,gBAAiBq9F,EAAYt9F,iBAAiBC,iBAAmB,GACjEE,qBAAsBm9F,EAAYt9F,iBAAiBG,sBAAwB,IAC5E,CAACywG,EAAWC,KAEXvT,EAAYt9F,gBAAkB,CAC1BC,gBAAiB2wG,EACjBzwG,qBAAsB0wG,IAGlC,CAIA,MAAMC,GAAwB,IAAA11H,KAAI,IAE5B21H,GAA0B,IAAAlmH,UAAS,IAC9Bm3B,EAAMI,aAAat9B,OAAOwG,IAAMgyG,EAAYrX,kBAAkB9kG,SAASmK,KAGlF,SAAS0lH,IACDF,EAAsB9zH,QACtBsgH,EAAYrX,kBAAkBhzG,KAAK69H,EAAsB9zH,OACzD8zH,EAAsB9zH,MAAQ,GAEtC,CAWA,MAAMsgH,GAAc,IAAAjiH,UAAS,CACzByqG,YAAa,GACbG,kBAAmB,GACnBjmF,gBAAiB,CACbC,gBAAiB,GACjBE,qBAAsB,IAE1BoB,aAAc,SAgDlB,SAAS+tF,IACL/wD,EAAK,kBAAkB,GACvBA,EAAK,QACT,CACA,OAjDA,IAAA5kC,OAAM,IAAMqoB,EAAMluB,QAASA,IACnBA,IAEIkuB,EAAMG,cACNm7E,EAAYxX,YAAc9jE,EAAMG,aAAa2jE,aAAe,GAC5DwX,EAAYrX,kBAAoB,IAAKjkE,EAAMG,aAAa8jE,mBAAqB,IAC7EqX,EAAY/7F,aAAeygB,EAAMG,aAAa5gB,cAAgB,OAE9D+7F,EAAYt9F,gBAAkB,CAC1BC,gBAAiB,IAAK+hB,EAAMG,aAAaniB,iBAAiBC,iBAAmB,IAC7EE,qBAAsB,IAAK6hB,EAAMG,aAAaniB,iBAAiBG,sBAAwB,OAK3Fm9F,EAAYxX,YAAc,GAC1BwX,EAAYrX,kBAAoB,GAChCqX,EAAY/7F,aAAe,OAC3B+7F,EAAYt9F,gBAAkB,CAC1BC,gBAAiB,GACjBE,qBAAsB,OAInC,CAAE0U,WAAW,KAEhB,IAAAlb,OAAM2jG,EAAa,KACXt7E,EAAMluB,SAAWkuB,EAAMlgB,UAK/B,WACI,IAAKkgB,EAAMlgB,SACP,OACJ,MAAMmvG,GAAgB3T,EAAYt9F,gBAAgBC,iBAAiBnsB,QAAU,GAAK,IAC7EwpH,EAAYt9F,gBAAgBG,sBAAsBrsB,QAAU,GAAK,EACtEw3G,EAAezpF,aAAamgB,EAAMlgB,SAAU,CACxCgkF,YAAawX,EAAYxX,kBAAexxG,EACxC2xG,kBAAmBqX,EAAYrX,kBAAkBnyG,OAAS,EAAIwpH,EAAYrX,uBAAoB3xG,EAC9F0rB,gBAAiBixG,EAAe3T,EAAYt9F,qBAAkB1rB,EAC9DitB,aAAc+7F,EAAY/7F,cAElC,CAfQ7lB,IAEL,CAAEke,MAAM,IAmBJ,CAAC2zC,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,uCACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,EAChF,wBAAoB,IAAK,CAAEA,MAAO,gBAClC,qBAAiB,YACjB,KACJ,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,SAEP,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,aACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,wBAAoB,IAAK,CAAEA,MAAO,wBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,eAC/C,KACJ,wBAAoB,MAAO,GAAY,EACnC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAwB,aAAIzvD,GAC3FnQ,MAAO,cACR,GACE,gBAAW,IAAO,wBAAoB,WAAW,MAAM,iBAAY,WAAO,OAAyBwzE,KACxF,kBAAc,wBAAoB,SAAU,CAChDnvH,IAAKmvH,EAAIl0H,MACTA,MAAOk0H,EAAIl0H,QACZ,qBAAiBk0H,EAAI16G,OAAQ,EAAqB,MACrD,OACL,KAAuB,CACtB,CAAC,eAAe8mG,EAAY/7F,yBAMhD,wBAAoB,YACpB,wBAAoB,MAAO,GAAY,CACnCisC,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,wBAAoB,IAAK,CAAEA,MAAO,oBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,qBAAiB,YACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,mBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAayvD,EAAuB,YAAIzvD,GAC1FnQ,MAAO,cACR,CACC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,SAAU,CAAExwD,MAAO,IAAM,WAAY,MAClF,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYohD,EAAQhc,aAAelU,KAC/E,kBAAc,wBAAoB,SAAU,CAChDnsB,IAAKmsB,EACLlxB,MAAOkxB,IACR,qBAAiBA,GAAS,EAAqB,MAClD,OACL,KAAuB,CACtB,CAAC,eAAeovF,EAAYxX,wBAMhD,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,CACpCt4C,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,YACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,0BAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,SAAU,CAC1C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAwB7wD,MAAQ6wD,GAC9FnQ,MAAO,aACP2tD,SAAU2lB,GACX,CACCxjE,EAAO,MAAQA,EAAO,KAAM,wBAAoB,SAAU,CAAExwD,MAAO,IAAM,cAAe,MACvF,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY+zH,EAAwB/zH,MAAQkxB,KACxF,kBAAc,wBAAoB,SAAU,CAChDnsB,IAAKmsB,EACLlxB,MAAOkxB,IACR,qBAAiBA,GAAS,EAAqB,MAClD,OACL,KAAuC,CACtC,CAAC,eAAe4iG,EAAsB9zH,cAIlD,wBAAoB,aACnBsgH,EAAYrX,kBAAkBnyG,OAAS,IACjC,kBAAc,wBAAoB,MAAO,GAAa,GACpD,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYwpH,EAAYrX,kBAAoBlI,KACxF,kBAAc,wBAAoB,OAAQ,CAC9Ch8F,IAAKg8F,EACLrgD,MAAO,oBACR,EACC,sBAAiB,qBAAiBqgD,GAAO,IAAK,IAC9C,wBAAoB,SAAU,CAC1BrgD,MAAO,iBACPyQ,SAAS,mBAAgBN,GA/LzE,SAA6BkwC,GACzB,MAAMx1F,EAAQ+0G,EAAYrX,kBAAkBx9F,QAAQs1F,GAChDx1F,GAAS,GACT+0G,EAAYrX,kBAAkBlpF,OAAOxU,EAAO,EAEpD,CA0LoF,CAAqBw1F,GAAO,CAAC,UAClE,IAAKvwC,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,MACzD,EAAe,QAE7B,UAEN,wBAAoB,QAAQ,QAG1C,wBAAoB,eACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,4BACpB,wBAAoB,MAAO,CACvBA,MAAO,+BACPyQ,SAAS,mBAAewiE,EAAgB,CAAC,UAC1C,EACC,wBAAoB,MAAO,GAAa,CACpCnjE,EAAO,MAAQA,EAAO,KAAM,qBAAiB,YAAa,IACzDijE,EAAkBzzH,MAAQ,GAAK0zH,EAAuB1zH,MAAQ,IACxD,kBAAc,wBAAoB,OAAQ,GAAa,SAAU,qBAAiByzH,EAAkBzzH,OAAS,SAAU,qBAAiB0zH,EAAuB1zH,OAAS,QAAS,MACjL,kBAAc,wBAAoB,OAAQ,GAAa,mBAElEwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,wBAA0B,EACtF,wBAAoB,IAAK,CAAEA,MAAO,2BAClC,OAER,wBAAoB,sBACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,eACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,8BAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,aAAc,CAAEwQ,QAAQ,WAAOxwB,GAAa3lC,OAAO+f,0BAC3Eq2C,QAASX,EAAO,KAAOA,EAAO,GAAMK,IAAY,WAAOnwB,GAAa3lC,OAAO+f,yBAA0B,WAAO4lB,GAAa3lC,OAAO+f,yBACjI,KAAM,cAM9B,SAEL,wBAAoB,QAAQ,EAE1C,IExVJ,MCDM,GAAa,CAAE4lC,MAAO,qBACtB,GAAa,CAAEA,MAAO,qCACtB,GAAa,CAAEA,MAAO,sCCC5B,IDE6B,qBAAiB,CAC1CM,OAAQ,YACRhc,MAAO,CACH1pC,QAAS,CAAEilD,QAAS,UACpB4zE,UAAW,CAAE93H,KAAM8hB,SACnBrc,OAAQ,CAAC,EACT1G,cAAe,CAAEmlD,QAAS,IAC1B/kD,SAAU,CAAEa,KAAM8hB,QAASoiC,SAAS,IAExCW,MAAO,CAAC,OAAQ,WAChB,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EACRG,EAAOC,EAEPnkD,GAAQ,IAAAwQ,UAAS,KAAMumH,O1BwBZj+H,E0BxBqB6uC,EAAM1pC,Q1ByB3CytH,GAAY5yH,IAAO4yH,GAA4B,OADjD,IAAkB5yH,I0BtBXk+H,GAAqB,IAAAxmH,UAAS,IACzBm3B,EAAM5pC,eAAiBiC,EAAM2C,MAAMipH,kBAAoB,IAG5DqL,GAAc,IAAAl2H,KAAI,IAAM,KAExBm2H,GAAY,IAAA1mH,UAAS,KAChB,CACHymH,YAAa,GAAGA,EAAYt0H,WAGpC,SAASw0H,EAAmB/sE,GAGxB,MAAMgtE,EAAexiH,KAAKwP,IAAI,GAAKxP,KAAKyG,IAAI,EAAK+uC,IACjD6sE,EAAYt0H,MAAQy0H,CACxB,CAEA,MAAMC,GAAc,IAAA7mH,UAAS,IACpBm3B,EAAMljC,OAEJ,CACHumH,SAAUrjF,EAAMljC,OAAO8yB,KAAK9xB,KAC5BwlH,UAAWtjF,EAAMljC,OAAO8yB,KAAKllB,MAE7BjU,WAAYupC,EAAMljC,OAAOrG,WAAWhF,IAAI0/B,GAAKA,EAAEn2B,OAC/CwY,MAAOwsB,EAAMljC,OAAO0W,MACpBhd,SAAUwpC,EAAMxpC,UAPT,MAUf,SAASgvF,IACAxlD,EAAMmvF,UAIP5yE,EAAK,WAHLA,EAAK,OAKb,CACA,MAAO,CAACgP,EAAMC,MACF,kBAAc,wBAAoB,MAAO,CAC7C9P,OAAO,oBAAgB,CAAC,aAAc,CAAC,qBAAqBU,EAAQ9lD,UAAW,CAAE,sBAAuB8lD,EAAQ+yE,cAChH3oF,OAAO,oBAAgB+oF,EAAUv0H,OACjCmxD,SAAS,mBAAeq5B,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,eACpB,wBAAoB,MAAO,GAAY,GAClC,kBAAc,kBAAa,6BAAyBntF,EAAM2C,MAAMopH,UAAW,CACxE,YAAaiL,EAAmBr0H,MAChCooH,OAAQoM,GACT,KAAM,GAAgC,CAAC,kBAE9C,wBAAoB,gBACpB,wBAAoB,MAAO,GAAY,CAClCE,EAAiB,QACX,kBAAc,kBAAa,6BAAyBr3H,EAAM2C,MAAMkpH,WAAY,CAC3EnkH,IAAK,EACL,YAAa2vH,EAAY10H,MAAMqoH,SAC/B,aAAcqM,EAAY10H,MAAMsoH,UAChC7sH,WAAYi5H,EAAY10H,MAAMvE,WAC9B+c,MAAOk8G,EAAY10H,MAAMwY,MACzB,YAAak8G,EAAY10H,MAAMxE,UAChC,KAAM,EAAe,CAAC,YAAa,aAAc,aAAc,QAAS,gBACzE,wBAAoB,QAAQ,QAG3C,GAEX,IEzFE,GAAa,CAAEklD,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,qBACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,mBCHX,IDU6B,qBAAiB,CAC1CM,OAAQ,oBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjBrc,OAAQ,CAAC,GAEbo/C,MAAO,CAAC,QAAS,UAAW,SAC5B,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EACRG,EAAOC,EACPpO,GAAkB,EAAA5jB,GAAA,KAElBiyB,IADc,EAAAvlC,EAAA,OACJ,EAAA2nB,EAAA,OAEV8wF,EAAajxH,OAAOC,OAAOipC,SAASqrB,KAEpCk8D,GAAY,IAAA/1H,MAAI,GAEhBw2H,GAAQ,IAAA/mH,UAAS,IACZjF,MAAMC,KAAK,CAAE/R,OAAQ,KAAML,IAAI,CAACm3B,EAAG52B,KAAM,CAC5Cb,GAAIa,EACJutD,KAAyB,IAAhBtyC,KAAKkH,SAAR,IACNjJ,IAAwB,IAAhB+B,KAAKkH,SAAR,IACL7c,KAAsB,EAAhB2V,KAAKkH,SAAe,EAC1B0Z,MAAuB,EAAhB5gB,KAAKkH,SACZlC,SAA0B,EAAhBhF,KAAKkH,SAAe,MAkBtC,SAASm5F,IACL/wD,EAAK,QACT,CACA,SAASszE,IACDV,EAAUn0H,OACVq1G,GAER,CACA,SAASyf,IACLX,EAAUn0H,OAAQ,CACtB,CACA,SAASq1G,IACL,MAAMt6G,EAASq4C,EAAgBr4C,OAE3B0mD,EAAQjY,kBAAkBC,kBAC1B8X,EAAK,UAAW,UAEXxmD,EAAOS,SACZ+lD,EAAK,UAAW,QAGhBA,EAAK,UAAW,SAExB,CACA,SAASwzE,IAELxzE,EAAK,QACT,CACA,OA1CA,IAAA5kC,OAAM,IAAMqoB,EAAMluB,QAASgiE,IACnBA,IAEwC,SAApC1lC,EAAgBr4C,OAAOQ,UACvB44H,EAAUn0H,OAAQ,EAClBmX,WAAW,KACPg9G,EAAUn0H,OAAQ,GACnB,MAGHm0H,EAAUn0H,OAAQ,KAgCvB,CAACuwD,EAAMC,MACF,kBAAc,iBAAa,WAAW,CAAEkX,IAAI,WAAOitD,IAAe,EACtE,iBAAa,aAAa,CACtB,qBAAsB,kCACtB,qBAAsB,mCACvB,CACCp0E,SAAS,aAAS,IAAM,CACnBa,EAAe,UACT,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,qBACPlV,MAAO,CACHgZ,OAAQ,YAEZ2M,QAAS0jE,GACV,EACC,wBAAoB,WACpBrkE,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,oBAAsB,MAAO,KAC3F,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,GAClC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYk0E,EAAM50H,MAAQg1H,KACtE,kBAAc,wBAAoB,MAAO,CAC7CjwH,IAAKiwH,EAAK7+H,GACVuqD,MAAO,kBACPlV,OAAO,oBAAgB,CACnB+Y,KAAMywE,EAAKzwE,KACXr0C,IAAK8kH,EAAK9kH,IACVpX,MAAO,GAAGk8H,EAAK14H,SACf6uC,OAAQ,GAAG6pF,EAAK14H,SAChB,aAAc,GAAG04H,EAAK/9G,YACtB,UAAW,GAAG+9G,EAAKniG,YAExB,KAAM,KACT,SAER,wBAAoB,UACpB29B,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,+CAAiD,MAAO,IACtH8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,+CAAiD,MAAO,KACtH,wBAAoB,UACpB8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,2BAA6B,MAAO,KAClG,wBAAoB,YACpB8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,kDAAoD,EAC9G,wBAAoB,MAAO,CACvBkoE,QAAS,cACTj7G,KAAM,OACNsnH,OAAQ,UACR,eAAgB,QACjB,EACC,wBAAoB,SAAU,CAC1BnM,GAAI,KACJ9mE,GAAI,KACJ7kC,EAAG,QAEP,wBAAoB,OAAQ,CACxBgZ,EAAG,uBACHjV,QAAS,SAEb,wBAAoB,OAAQ,CACxBiV,EAAG,yBACHjV,QAAS,YAGjB,IACJsvC,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,kDAAoD,EAC9G,wBAAoB,MAAO,CACvBkoE,QAAS,cACTj7G,KAAM,OACNsnH,OAAQ,UACR,eAAgB,OACjB,EACC,wBAAoB,SAAU,CAC1BnM,GAAI,KACJ9mE,GAAI,KACJ7kC,EAAG,KACH,mBAAoB,SAExB,wBAAoB,SAAU,CAC1B2rG,GAAI,KACJ9mE,GAAI,KACJ7kC,EAAG,QAEP,wBAAoB,OAAQ,CACxBvkB,EAAG,KACHC,EAAG,KACHC,MAAO,KACPqyC,OAAQ,KACRkZ,UAAW,sBAEf,wBAAoB,OAAQ,CACxBzrD,EAAG,KACHC,EAAG,KACHC,MAAO,KACPqyC,OAAQ,KACRkZ,UAAW,wBAGnB,KACJ,wBAAoB,UACpBmM,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,oBAAsB,EAClF,wBAAoB,MAAO,CAAEA,MAAO,2DACpC,wBAAoB,MAAO,CAAEA,MAAO,2DACpC,wBAAoB,MAAO,CAAEA,MAAO,2DACpC,wBAAoB,MAAO,CAAEA,MAAO,2DACpC,wBAAoB,MAAO,CAAEA,MAAO,gCACpC,wBAAoB,MAAO,CAAEA,MAAO,oCACpC,KACJ,wBAAoB,WACpB,wBAAoB,SAAU,CAC1BA,MAAO,mBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,IAAK9hD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,MAAO,CACvB0kE,MAAO,6BACPp8H,MAAO,KACPqyC,OAAQ,KACRy9E,QAAS,YACTj7G,KAAM,OACNsnH,OAAQ,eACR,eAAgB,IAChB,iBAAkB,QAClB,kBAAmB,SACpB,EACC,wBAAoB,OAAQ,CAAE9+F,EAAG,gBACjC,wBAAoB,OAAQ,CAAEA,EAAG,iBACjC,QAEZ,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,uBACpBq6B,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,qBAAuB,EACjF,wBAAoB,MAAO,CAAEA,MAAO,4BAA8B,EAC9D,wBAAoB,OAAQ,CAAEA,MAAO,iEAAmE,EACpG,wBAAoB,MAAO,CACvBw0E,MAAO,6BACPp8H,MAAO,KACPqyC,OAAQ,KACRy9E,QAAS,YACTj7G,KAAM,OACNsnH,OAAQ,eACR,eAAgB,MAChB,iBAAkB,QAClB,kBAAmB,SACpB,EACC,wBAAoB,OAAQ,CAAE9+F,EAAG,qQAGzC,wBAAoB,MAAO,CAAEuqB,MAAO,mCAExC,KACJ,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,iBAAay0E,GAAW,CACpB,aAAchB,EAAUn0H,MACxB8B,OAAQs/C,EAAQt/C,OAChB,mBAAmB,WAAOsxC,GAAiBr4C,OAAOK,cAClD,YAAY,WAAOg4C,GAAiBr4C,OAAOO,QAC3C,aAAa,WAAO83C,GAAiBr4C,OAAOS,SAC5C45H,OAAQN,EACR9kF,UAAWwgB,EAAO,KAAOA,EAAO,GAAMK,GAAYwkD,MACnD,KAAM,EAAe,CAAC,aAAc,SAAU,kBAAmB,WAAY,iBAEpF,wBAAoB,8BACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WAClB8e,EAAUn0H,QAIL,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,kBACpB,wBAAoB,SAAU,CAC1B27C,MAAO,uCACPyQ,SAAS,mBAAe4jE,EAAa,CAAC,UACvC,SACJ,SATA,kBAAc,wBAAoB,MAAO,GAAY,IAAKvkE,EAAO,KAAOA,EAAO,GAAK,EAC/E,wBAAoB,IAAK,CAAE9P,MAAO,yBAA2B,aAAc,gBAYjG,wBAAoB,QAAQ,KAEtC9yB,EAAG,KAER,EAAe,CAAC,OAE3B,IE5QE,GAAa,CAAE8yB,MAAO,kBACtB,GAAa,CAAC,QAAS,UAAW,cAAe,uBACjD,GAAa,CACf37C,IAAK,EACL27C,MAAO,uBAEL,GAAa,CAAC,QAAS,WAQDviC,QACFA,Q,QCX1B,MCJM,GAAa,CACfpZ,IAAK,EACL27C,MAAO,aAEL,GAAa,CAAEA,MAAO,qBCD5B,IDE6B,qBAAiB,CAC1CM,OAAQ,QACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjBxd,QAAS,CAAC,GAEdwgD,MAAMC,GACK,CAACmP,EAAMC,MACF,kBAAc,iBAAa,aAAa,CAAE1tD,KAAM,SAAW,CAC/Dy9C,SAAS,aAAS,IAAM,CACnBa,EAAe,UACT,kBAAc,wBAAoB,MAAO,GAAY,CACpDoP,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,KAC3F,wBAAoB,OAAQ,IAAY,qBAAiBU,EAAQzgD,SAAU,OAE7E,wBAAoB,QAAQ,KAEtCitB,EAAG,O,QEtBnB,MAAM,GAAa,CAAC,QAAS,WAI7B,IAA6B,qBAAiB,CAC1CozB,OAAQ,YACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjBhhB,KAAM,CAAC,EACPjE,UAAW,CAAC,EACZqhB,YAAa,CAAEgmC,QAAS,wCACxBpmC,cAAe,CAAE9d,KAAM8hB,QAASoiC,SAAS,GACzC80E,sBAAuB,CAAEh5H,KAAM8hB,QAASoiC,SAAS,GACjD+0E,iBAAkB,CAAEj5H,KAAM8hB,QAASoiC,SAAS,IAEhDW,MAAO,CAAC,QAAS,aACjB,KAAAC,CAAMC,GAAWG,KAAMC,IAanB,MAAMxc,EAAQoc,EACRG,EAAOC,EACP62B,GAAY,EAAA/xD,EAAA,KACZm7B,GAAU,EAAA5d,EAAA,MAIhB,SAASwvD,EAAavlD,GAClB,OAAOA,IAAU,MAAiBA,IAAU,MAAeA,IAAU,IACzE,CA2BA,MAAMwlD,GAAiB,IAAAzlF,UAAS,KAC5B,MAAMxU,EAAcooD,EAAQpoD,YAE5B,IAAKA,GAAsC,IAAvBA,EAAYvC,OAAc,CAC1C,MAAMqG,EAAO,GAeb,OAbI6nC,EAAM7qB,eACNhd,EAAKlH,KAAK,CAAEE,GAAI,KAAe2M,KAAM,MAAOyW,KAAM,gBAGtDpc,EAAKlH,QAAQ+uC,EAAM7nC,MAEf6nC,EAAMqwF,uBACNl4H,EAAKlH,KAAK,CAAEE,GAAI,KAAwB2M,KAAM,MAAOyW,KAAM,2BAG3DyrB,EAAMswF,kBACNn4H,EAAKlH,KAAK,CAAEE,GAAI,KAAa2M,KAAM,KAAMyW,KAAM,qBAE5Cpc,CACX,CAEA,OAAO9D,EACF5C,IAAIq3C,IAASylD,OA5CGC,EA4Ca1lD,KA1CjB,KACN,CAAE33C,GAAI,KAAe2M,KAAM,MAAOyW,KAAM,eAE/Ci6E,IAAa,KACN,CAAEr9F,GAAI,KAAwB2M,KAAM,MAAOyW,KAAM,0BAExDi6E,IAAa,KACN,CAAEr9F,GAAI,KAAa2M,KAAM,KAAMyW,KAAM,oBAGzCyrB,EAAM7nC,KAAK6G,KAAKuvB,GAAKA,EAAEzwB,OAAS0wF,GAZ3C,IAAyBA,IA6ChB1rF,OAAQ2rF,KAEJA,MAEDA,EAAIt9F,KAAO,OAAkB6uC,EAAM7qB,mBAEnCs5E,EAAIt9F,KAAO,OAA2B6uC,EAAMqwF,0BAE5C5hC,EAAIt9F,KAAO,OAAgB6uC,EAAMswF,uBAS7C,SAAS5hC,EAAa1oD,GAClB,OAAOqtC,EAAU9hE,eAAey0B,EACpC,CAgBA,MAAO,CAACulB,EAAMC,MACF,kBAAc,iBAAa,aAAa,CAAE1tD,KAAM,gBAAkB,CACtEy9C,SAAS,aAAS,IAAM,CACnBa,EAAe,UACT,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,iBACPyQ,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAe,OAAW,CAAC,WAC/D,EACC,wBAAoB,MAAO,CACvB9P,MAAO,kBACPlV,OAAO,oBAAgB,CAAE,iBAAkB4V,EAAQ7mC,eACpD,EACC,wBAAoB,yBACnB,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY+4E,EAAetzF,MAAQyzF,IACvF,OAAQ,kBAAc,wBAAoB,SAAU,CAChD1uF,IAAK0uF,EAAIt9F,GACTuqD,OAAO,oBAAgB,CAAC,cAAe,CAC/BwQ,OAAQ9P,EAAQloD,YAAcu6F,EAAIt9F,GAClC,cAAek9F,EAAaI,EAAIt9F,KAAOu9F,EAAaD,EAAI3wF,MACxD,kBAAmBuwF,EAAaI,EAAIt9F,MAAQu9F,EAAaD,EAAI3wF,QA/B5EkoC,EA+BqGyoD,EAAI3wF,KA9BvHu1E,EAAUrqD,kBAAkBgd,OAgCP1nB,MAAOmwE,EAAI3wF,KACXquD,SAAS,mBAAgBN,IAAW,OA3B5C/iB,EA2B4D2lD,EAAIt9F,GA1BpForD,EAAK,YAAazT,QAClByT,EAAK,SAFc,IAACzT,GA2BsE,CAAC,UAChE,CACE2lD,EAAQ,OACF,kBAAc,wBAAoB,IAAK,CACtC1uF,IAAK,EACL27C,OAAO,oBAAgB+yC,EAAIl6E,OAC5B,KAAM,KACP,wBAAoB,QAAQ,IAClC,wBAAoB,OAAQ,MAAM,qBAAiBk6E,EAAI3wF,MAAO,IAC/D,GAAuB,IA3CtD,IAAyBkoC,IA4CG,OACL,OAEL,wBAAoB,QAAQ,KAEtCpd,EAAG,IAGf,I,OCjKJ,MAEA,IAFiC,QAAgB,GAAQ,CAAC,CAAC,YAAY,qBCJjE,GAAa,CAAE8yB,MAAO,qCACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CACfA,MAAO,mBACPlV,MAAO,CAAE,iBAAkB,SAAU,cAAe,eAElD,GAAa,CAAEkV,MAAO,oBAK5B,IAA6B,qBAAiB,CAC1CM,OAAQ,qBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjBxO,OAAQ,CAAC,GAEbuxC,MAAO,CAAC,QAAS,QACjB,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EACRG,EAAOC,EACPC,GAAU,EAAA5d,EAAA,MACVnD,GAAc,EAAAxkB,EAAA,MACd3E,GAAQ,EAAAD,EAAA,KACRi+G,GAAc,IAAAn3H,KAAI,IAElBu2H,EAAajxH,OAAOC,OAAOipC,SAASqrB,KAO1C,SAASq6C,IACL/wD,EAAK,QACT,CACA,SAASmQ,IACL6jE,EAAYv1H,MAAQ,GACpBuX,EAAMxX,KAAK,kBACf,CACA,SAAS01F,IACLl0C,EAAK,OAAQg0E,EAAYv1H,OACzBuX,EAAM7W,QAAQ,YACd4xG,GACJ,CACA,OAjBA,IAAA31F,OAAM,IAAM,CAACqoB,EAAMluB,QAASkuB,EAAMr1B,QAAS,EAAEmH,EAASnH,MAC9CmH,IACAy+G,EAAYv1H,MAAQ2P,GAAU,KAEnC,CAAEkoB,WAAW,IAaT,CAAC04B,EAAMC,MACF,kBAAc,iBAAa,WAAW,CAAEkX,IAAI,WAAOitD,IAAe,EACtE,wBAAoB,MAAO,CACvBj0E,OAAO,oBAAgB,cAAa,WAAOhgB,GAAa3lC,OAAOsC,UAChE,EACC,iBAAa,aAAa,CAAEyF,KAAM,SAAW,CACzCy9C,SAAS,aAAS,IAAM,CACnBa,EAAe,UACT,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,OAAO,oBAAgB,CAAC,sBAAuB,CAAE,oBAAoB,WAAOe,GAAS9c,YACrFwsB,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,EAChF,wBAAoB,IAAK,CAAEA,MAAO,sBAClC,qBAAiB,aACjB,KACJ,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,SAEP,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EAClF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,aACjB,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CACjD9P,MAAO,qBACPlV,MAAO,CAAE,gBAAiB,QAC3B,EACC,qBAAiB,YACjB,wBAAoB,OAAQ,CAAEkV,MAAO,QAAU,uBAC/C,KACJ,qBAAgB,wBAAoB,WAAY,CAC5C,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAc7wD,MAAQ6wD,GACpFnQ,MAAO,0BACPlV,MAAO,CAAE,MAAS,OAAQ,OAAU,SACpCslB,YAAa,gBACd,KAAM,KAAuB,CAC5B,CAAC,aAAaykE,EAAYv1H,kBAM9C,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1B0gD,MAAO,0BACPyQ,SAAS,mBAAeO,EAAa,CAAC,UACvC,OACH,wBAAoB,SAAU,CAC1BhR,MAAO,wBACPyQ,SAAS,mBAAeskC,EAAY,CAAC,UACtC,WAGZ,KACD,wBAAoB,QAAQ,KAEtC7nE,EAAG,KAER,IACJ,EAAe,CAAC,OAE3B,ICtHJ,GAFoB,GCDd,GAAa,CAAC,UAAW,eAAgB,uBACzC,GAAa,CAAE8yB,MAAO,mBACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,kBAEL,GAAa,CACf37C,IAAK,EACL27C,MAAO,2BAEL,GAAa,CACf37C,IAAK,EACL27C,MAAO,wBAEL,GAAa,CACf37C,IAAK,EACL27C,MAAO,2BAEL,GAAa,CACf37C,IAAK,EACL27C,MAAO,oBAEL,GAAa,CACf37C,IAAK,EACL27C,MAAO,kBCrBX,ID0B6B,qBAAiB,CAC1CM,OAAQ,eACRhc,MAAO,CACHj7B,KAAM,CAAC,EACPkZ,gBAAiB,CAAEs9B,QAAS,IAAM,KAEtCW,MAAO,CAAC,WAAY,YAAa,YAAa,UAC9C,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EAERG,EAAOC,EAEP4qD,GAAW,EAAAnxE,GAAA,KACXwmB,GAAU,EAAA5d,EAAA,MAEV2xF,GAAgB,IAAA3nH,UAAS,IAAMu+F,EAASnwE,cACxCT,GAAiB,IAAA3tB,UAAS,IAAMu+F,EAAS5wE,gBACzCi6F,GAAoB,IAAA5nH,UAAS,IAAM,IAAIiE,IAAIkzB,EAAM/hB,kBACjDyyG,GAAgB,IAAA7nH,UAAS,IAAM4zC,EAAQnY,gBACvCqsF,GAAe,IAAA9nH,UAAS,KAC1B,GAAIu+F,EAAS/wE,cACT,MAAO,WAEX,GAAkC,kBAA9B+wE,EAAShxE,iBACT,MAAO,WAEX,GAAIgxE,EAAShxE,iBAAkB,CAC3B,MAAMlH,EAAMk4E,EAASpwE,gBAAgBowE,EAAShxE,kBAC9C,MAAO,IAAIlH,GAAK1D,MAAQ,iBAC5B,CACA,MAAO,kBAGX,SAASolG,EAAe15F,GAkCxB,IAA4BuB,EAhCxB,IAAIi4F,EAAc11H,MAElB,OAAQglC,EAAMj7B,MACV,IAAK,SAiBL,IAAK,SAEDw3C,EAAK,WAAYrlB,GACjB,MAhBJ,IAAK,MAEDqlB,EAAK,SAAUrlB,EAAI/lC,IACnB,MACJ,IAAK,SAEDorD,EAAK,YAAarlB,EAAI/lC,IACtB,MACJ,IAAK,UACL,IAAK,SAgBesnC,EAdGvB,EAAI/lC,GAe/Bi2G,EAASruE,mBAAmBN,GARhC,CACA,SAASo4F,IACc,WAAf7wF,EAAMj7B,MAENw3C,EAAK,YAEb,CAgBA,SAASu0E,IACLr0E,EAAQ/N,uBACZ,CAcA,SAASqiF,IACAL,EAAc11H,OAEnByhD,EAAQ/N,uBACZ,CACA,MAAO,CAAC6c,EAAMC,MACF,kBAAc,wBAAoB,MAAO,CAC7C9P,MAAO,eACPyQ,QAAS0kE,GACV,EACC,wBAAoB,YACnB,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYL,EAAcx1H,MAAQk8B,KAC9E,kBAAc,wBAAoB,MAAO,CAC7Cn3B,IAAKm3B,EAAI/lC,GACTuqD,OAAO,oBAAgB,CAAC,gBAAiB,CACjCg6D,SAAUl/E,EAAex7B,MAAM6C,IAAIq5B,EAAI/lC,IACvC6/H,MAAOP,EAAkBz1H,MAAM6C,IAAIq5B,EAAI/lC,IACvC,WAA6B,QAAjBirD,EAAQr3C,KACpB,cAAgC,WAAjBq3C,EAAQr3C,KACvB,eAAgB2rH,EAAc11H,SAEtCmxD,SAAS,mBAAgBN,GAAY+kE,EAAe15F,GAAO,CAAC,SAC5D+5F,aAAeplE,GAhD/B,SAA6B30B,EAAKl6B,GAE9B,IAAKk6B,EAAIrB,eACL,OACJ,MACM4rC,EADSzkE,EAAMq5F,cACDz7B,wBAEpBne,EAAQhO,sBAAsBvX,EAAIrB,eAAgB4rC,EAAKliB,KAAOkiB,EAAK3tE,MAAQ,EAAG2tE,EAAKv2D,IACvF,CAwC0C,CAAqBgsB,EAAK20B,GACpDgiC,aAAcijC,EACdhjC,oBAAsBjiC,GApCtC,SAA6B30B,EAAKl6B,GAC9B,IAAK0zH,EAAc11H,MACf,OACJ,IAAKk8B,EAAIrB,eACL,OACJ,MAAM0gE,EAAQv5F,EAAMw5F,QAAQ,GACvBD,GAGL95C,EAAQhO,sBAAsBvX,EAAIrB,eAAgB0gE,EAAMz7B,QAASy7B,EAAMv7B,QAC3E,CA0BiD,CAAqB9jC,EAAK20B,GAC3DkiC,WAAYgjC,EACZG,cAAeH,GAChB,EACC,wBAAoB,WACpB,wBAAoB,OAAQ,IAAY,qBAAiB75F,EAAI1iB,OAAQ,IACrE,wBAAoB,wBACF,QAAjB4nC,EAAQr3C,OACF,kBAAc,wBAAoB,OAAQ,GAAY,CACpD0rH,EAAkBz1H,MAAM6C,IAAIq5B,EAAI/lC,MAC1B,kBAAc,wBAAoB,IAAK,OACvC,kBAAc,wBAAoB,IAAK,SAEhD,wBAAoB,QAAQ,IAClC,wBAAoB,oBACF,YAAjBirD,EAAQr3C,MAAuC,WAAjBq3C,EAAQr3C,OAChC,kBAAc,wBAAoB,OAAQ,GAAY,IAAKymD,EAAO,KAAOA,EAAO,GAAK,EAChF,wBAAoB,IAAK,CAAE9P,MAAO,uBAAyB,MAAO,SAExE,wBAAoB,QAAQ,IAClC,wBAAoB,mBACF,WAAjBU,EAAQr3C,OACF,kBAAc,wBAAoB,OAAQ,GAAY,IAAKymD,EAAO,KAAOA,EAAO,GAAK,EAChF,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,SAEjE,wBAAoB,QAAQ,IACnC,GAAuC,MAC1C,OACJ,wBAAoB,SACY,IAA/B80E,EAAcx1H,MAAMlJ,SACd,kBAAc,wBAAoB,MAAO,GAAY,CACpD05D,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,cAAgB,MAAO,KACnF,wBAAoB,OAAQ,MAAM,qBAAiBi1E,EAAa31H,OAAQ,OAE1E,wBAAoB,QAAQ,KAG9C,IE5LE,GAAa,CAAE0gD,MAAO,iBACtB,GAAa,CAAE37C,IAAK,GACpB,GAAa,CAAE27C,MAAO,kBACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,wBAEL,GAAa,CAAEA,MAAO,kBACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,oBAEL,GAAa,CAAC,mBAAoB,WAClC,GAAa,CAAC,WACd,GAAa,CACf37C,IAAK,EACL27C,MAAO,+BAEL,GAAc,CAChB37C,IAAK,EACL27C,MAAO,iBAEL,GAAc,CAAE37C,IAAK,GACrB,GAAc,CAAE27C,MAAO,kBACvB,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAAC,WACf,GAAc,CAAC,WACf,GAAc,CAAC,WACf,GAAc,CAAC,WACf,GAAc,CAChB37C,IAAK,EACL27C,MAAO,kBAKLy1E,GAAgB,4BCjCtB,IDkC6B,qBAAiB,CAC1Cn1E,OAAQ,kBACRhc,MAAO,CACHj7B,KAAM,CAAC,GAEXm3C,MAAO,CAAC,gBAAiB,cAAe,oBAAqB,kBAC7D,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EAERG,EAAOC,EAEP4qD,GAAW,EAAAnxE,GAAA,KAGXm7F,IAFU,EAAAvyF,EAAA,OAEM,IAAAzlC,KAAI,OACpBi4H,GAAqB,IAAAj4H,KAAI,IAAI0T,KAC7BwkH,GAAiB,IAAAl4H,KAAI,MACrBm4H,GAAoB,IAAAn4H,MAAI,GACxBo4H,GAAc,IAAAp4H,KAAI,IAElBq4H,GAAW,IAAAr4H,KAAIe,aAAaC,QAAQ+2H,KAAkB,MAEtD/6F,GAAmB,IAAAvtB,UAAS,IAAMu+F,EAAShxE,kBAC3CyB,GAAY,IAAAhvB,UAAS,IAAMu+F,EAASvvE,WAE1C,SAAS65F,EAAiBC,EAAOC,GAC7B,IAAKx7F,EAAiBp7B,OAAoC,kBAA3Bo7B,EAAiBp7B,MAC5C,OAAO,EAGX,GAAIo7B,EAAiBp7B,QAAU22H,EAC3B,OAAO,EAGX,MAAME,EAAiBzqB,EAASpwE,gBAAgBZ,EAAiBp7B,OACjE,QAAI62H,GACOD,EAAQhtH,WAAWitH,EAAermG,KAAO,IAGxD,CACA,MAAMuM,GAAqB,IAAAlvB,UAAS,IAAMu+F,EAASrvE,oBAC7CtB,GAAsB,IAAA5tB,UAAS,IAAMu+F,EAAS3wE,qBAC9CC,GAAgB,IAAA7tB,UAAS,IAAMu+F,EAAS1wE,eAExCo7F,GAAmB,IAAAjpH,UAAS,KAC9B,MAAM/L,EAAS,GACTlE,EAAawuG,EAASlxE,QAAQt9B,WAE9Bm5H,EAAU,IAAI91H,IACpBrD,EAAWgJ,QAAQstB,IACf6iG,EAAQ9vH,IAAIitB,EAAI1D,KAAM0D,KAG1B,MAAM8iG,EAAmBp5H,EAAWkK,OAAOoiB,IAAMA,EAAEsG,KAAKrsB,SAAS,MAE3D8yH,EAAmB,IAAIh2H,IAS7B,SAASi2H,EAAenvH,EAAGyI,GACvB,MAAM2mH,EAASF,EAAiBh0H,IAAI8E,EAAEyoB,OAAS,EACzC4mG,EAASH,EAAiBh0H,IAAIuN,EAAEggB,OAAS,EAC/C,OAAI2mG,IAAWC,EACJD,EAASC,EAEbrvH,EAAEyoB,KAAK82E,cAAc92F,EAAEggB,KAAM,QACxC,CAfA5yB,EAAWgJ,QAAQsjB,IACf,MAAMs7E,EAAYt7E,EAAEsG,KAAKi1E,YAAY,KACrC,IAAmB,IAAfD,EAAkB,CAClB,MAAM3pE,EAAa3R,EAAEsG,KAAKtf,MAAM,EAAGs0F,GACnCyxB,EAAiBhwH,IAAI40B,GAAao7F,EAAiBh0H,IAAI44B,IAAe,GAAK,EAC/E,IAaJ,SAASw7F,EAAuB7mG,EAAM4B,EAAOigC,GACzC,MAAMn+B,EAAM6iG,EAAQ9zH,IAAIutB,GACxB,IAAK0D,EACD,OAEJ,MAAMgkC,EAAWt6D,EAAWkK,OAAOoiB,IAC/B,IAAKA,EAAEsG,KAAK5mB,WAAW4mB,EAAO,KAC1B,OAAO,EAEX,OADatG,EAAEsG,KAAKtf,MAAMsf,EAAK15B,OAAS,GAC3BqN,SAAS,OAEpByS,EAAQ4Z,EAAKhH,MAAM,KACzB1nB,EAAO7L,KAAK,CACRE,GAAI+9B,EAAI/9B,GACR2M,KAAM8T,EAAMA,EAAM9f,OAAS,GAC3BwgI,OAAQ1gH,EAAM,GACd4Z,KAAM0D,EAAI1D,KACVjX,KAAM2a,EAAI3a,KACV6Y,QACAmlG,YAAar/D,EAASphE,OAAS,EAC/B0gI,SAAUprB,EAAS/uE,oBAAoBnJ,EAAI/9B,IAC3Ck8D,aAGAgkE,EAAmBr2H,MAAM6C,IAAIqxB,EAAI/9B,KACjC+hE,EAASlnD,KAAKkmH,GAAgBtwH,QAAQgyD,IAClCy+D,EAAuBz+D,EAAMpoC,KAAM4B,EAAQ,EAAG8B,EAAI/9B,KAG9D,CAKA,OApCqB6gI,EAAiBhmH,KAAKkmH,GAiC9BtwH,QAAQstB,IACjBmjG,EAAuBnjG,EAAI1D,KAAM,KAE9B1uB,IAGX,SAAS2mG,EAAclvF,GACnB,OAAOA,EAAK3P,WAAW,OAAS2P,EAAKpV,SAAS,OAClD,CACA,SAASszH,IACDjB,EAAYx2H,QACZy2H,EAASz2H,MAAQw2H,EAAYx2H,MAC7Bb,aAAaM,QAAQ02H,GAAeK,EAAYx2H,OAChDw2H,EAAYx2H,MAAQ,GACpBu2H,EAAkBv2H,OAAQ,EAElC,CACA,SAAS03H,IAELtrB,EAASvsE,eAAe,IACxB0hB,EAAK,gBAAiB,KAC1B,CASA,SAASo2E,IACLvrB,EAASvsE,eAAe,iBACxB0hB,EAAK,gBAAiB,KAC1B,CA8CA,SAASq2E,EAAwBh9F,GAC7B2mB,EAAK,oBAAqB3mB,EAC9B,CAIA,SAASgiE,EAAa79F,GAElB,MAAMuoD,EAAYvoD,EAAEkD,OAEdkE,EAAQmhD,EAAU+Q,iBAAiB,sBACnCw/D,EAAevwE,EAAUsY,wBAAwB1vD,IACvD,IAAI4nH,EAAmB,KAEvB,IAAK,IAAI9gI,EAAI,EAAGA,EAAImP,EAAMrP,OAAQE,IAAK,CACnC,MAAMN,EAAOyP,EAAMnP,GAGnB,KAFaN,EAAKkpE,wBAET1vD,IAAM2nH,EAAe,IAK1B,MAJAC,EAAmBphI,CAM3B,CACA,IAAKohI,EAED,YADAxB,EAAet2H,MAAQ,MAG3B,MAAM22H,EAAQmB,EAAiBC,QAAQn9F,WACvC,IAAK+7F,EAGD,YADAL,EAAet2H,MAAQ,MAI3B,MAAMo1B,EAAW0hG,EAAiB92H,MAAMgE,KAAKkmB,GAAKA,EAAE/zB,KAAOwgI,GACtDvhG,EAQDA,EAASmiG,aAAelB,EAAmBr2H,MAAM6C,IAAIuyB,EAASj/B,IAC9DmgI,EAAet2H,MAAQo1B,EAASj/B,GAE3Bi/B,EAASi9B,UAEVgkE,EAAmBr2H,MAAM6C,IAAIuyB,EAASi9B,UACtCikE,EAAet2H,MAAQo1B,EAASi9B,SAQpCikE,EAAet2H,MAAQ,KArBvBs2H,EAAet2H,MAAQ,IAuB/B,CAOA,OALA,IAAA2c,OAAM,IAAMqoB,EAAMj7B,KAAM6oG,IACJ,YAAZA,GACAxG,EAASxvE,mBAGV,CAAC2zB,EAAMC,MACF,kBAAc,wBAAoB,MAAO,CAC7CE,QAAS,gBACTtyD,IAAKg4H,EACL11E,MAAO,eACPolB,SAAU82B,GACX,EACC,wBAAoB,iBACpB,wBAAoB,MAAO,CACvBl8C,OAAO,oBAAgB,CAAC,kCAAmC,CACnDwQ,OAAmC,KAA3B91B,EAAiBp7B,MACzB,iBAAmC,YAAjBohD,EAAQr3C,QAElConD,QAASumE,GACV,EACC,wBAAoB,OAAQ,GAAY,CACnCjvB,EAAcguB,EAASz2H,SACjB,kBAAc,wBAAoB,IAAK,CACtC+E,IAAK,EACL27C,OAAO,oBAAgB+1E,EAASz2H,QACjC,KAAM,MACN,kBAAc,wBAAoB,OAAQ,IAAY,qBAAiBy2H,EAASz2H,OAAQ,MAEnGwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,kBAAoB,OAAQ,KAC7F,wBAAoB,OAAQ,GAAY,KAAM,qBAAiB7jB,EAAU78B,OAAS,IAAK,IACvF,wBAAoB,eACF,QAAjBohD,EAAQr3C,OACF,kBAAc,wBAAoB,SAAU,CAC3ChF,IAAK,EACL27C,MAAO,cACPp9B,MAAO,YACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYtP,EAAK,cAAe,QAAU,CAAC,WAC/F,IAAKiP,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,SAEhE,wBAAoB,QAAQ,IAClC,wBAAoB,gCACF,YAAjBU,EAAQr3C,MAA8C,aAAxB2xB,EAAc17B,QACtC,kBAAc,wBAAoB,SAAU,CAC3C+E,IAAK,EACL27C,MAAO,kBACPp9B,MAAO,iBACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAY+mE,EAAwB,QAAU,CAAC,WACnG,IAAKpnE,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,SAEvE,wBAAoB,QAAQ,IAClC,wBAAoB,eACF,WAAjBU,EAAQr3C,OACF,kBAAc,wBAAoB,SAAU,CAC3ChF,IAAK,EACL27C,MAAO,iBACPp9B,MAAO,YACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYtP,EAAK,iBAAkB,QAAU,CAAC,WAClG,IAAKiP,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,SAEjE,wBAAoB,QAAQ,IAClC,wBAAoB,kBACF,WAAjBU,EAAQr3C,OACF,kBAAc,wBAAoB,SAAU,CAC3ChF,IAAK,EACL27C,MAAO,oBACPp9B,MAAO,OACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAY0lE,EAAkBv2H,OAASu2H,EAAkBv2H,MAAQ,CAAC,WACtH,IAAKwwD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,kBAAoB,MAAO,SAEnE,wBAAoB,QAAQ,IACnC,IACH,wBAAoB,cACnB61E,EAAuB,QACjB,kBAAc,wBAAoB,MAAO,GAAY,EACpD,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB/lE,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAc7wD,MAAQ6wD,GACpFx0D,KAAM,OACNqkD,MAAO,iBACPoQ,YAAa,UACbwhE,UAAW,IACX3X,SAAS,cAAU8c,EAAc,CAAC,WACnC,KAAM,KAAuC,CAC5C,CAAC,aAAajB,EAAYx2H,UAE9B,wBAAoB,SAAU,CAC1B0gD,MAAO,gBACPyQ,SAAS,mBAAesmE,EAAc,CAAC,UACxC,IAAKjnE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,QAEnE,wBAAoB,SAAU,CAC1BA,MAAO,gBACPyQ,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAY0lE,EAAkBv2H,OAAQ,EAAQ,CAAC,WACnG,IAAKwwD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,WAGrE,wBAAoB,QAAQ,IAClC,wBAAoB,UACpB,wBAAoB,MAAO,CACvBA,OAAO,oBAAgB,CAAC,oBAAqB,CACrCwQ,OAAmC,kBAA3B91B,EAAiBp7B,MACzB,iBAAmC,YAAjBohD,EAAQr3C,MAA8C,QAAxB2xB,EAAc17B,SAEtEmxD,QAASwmE,GACV,CACCnnE,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,iBAAmB,MAAO,IAC3F8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,kBAAoB,OAAQ,KAC7F,wBAAoB,OAAQ,GAAY,KAAM,qBAAiB3jB,EAAmB/8B,OAAS,IAAK,IAChG,wBAAoB,eACF,YAAjBohD,EAAQr3C,MAA8C,QAAxB2xB,EAAc17B,QACtC,kBAAc,wBAAoB,SAAU,CAC3C+E,IAAK,EACL27C,MAAO,kBACPp9B,MAAO,QACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAY+mE,EAAwB,IAAM,CAAC,WAC/F,IAAKpnE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,SAEvE,wBAAoB,QAAQ,IACnC,IACH,wBAAoB,SACnBo2E,EAAiB92H,MAAMlJ,OAAS,IAC1B,kBAAc,wBAAoB,MAAO,MAC1C,wBAAoB,QAAQ,IAClC,wBAAoB,aACnB,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYggI,EAAiB92H,MAAQk0B,KACjF,kBAAc,wBAAoB,MAAO,CAC7CnvB,IAAKmvB,EAAI/9B,GACTuqD,OAAO,oBAAgB,CAAC,oBAAqB,CACrCwQ,OAAQwlE,EAAiBxiG,EAAI/9B,GAAI+9B,EAAI1D,MACrCwnG,SAAU3B,EAAmBr2H,MAAM6C,IAAIqxB,EAAI/9B,IAC3Cw8B,OAAQ2jG,EAAet2H,QAAUk0B,EAAI/9B,GACrCukH,SAAUj/E,EAAoBz7B,MAAM6C,IAAIqxB,EAAI/9B,IAC5C,iBAAmC,YAAjBirD,EAAQr3C,QAElC,mBAAoBmqB,EAAI/9B,GACxBg7D,QAAUN,GA1P1B,SAA6B38B,GACzB,GAAmB,YAAf8Q,EAAMj7B,MAAiD,aAA3BqiG,EAAS1wE,cAGrC,YADA0wE,EAASpuE,wBAAwB9J,EAAI/9B,IAIzC,MAAM8hI,EAAoB78F,EAAiBp7B,QAAUk0B,EAAI/9B,GAGzD,GAFAi2G,EAASvsE,eAAe3L,EAAI/9B,IAExB+9B,EAAIqjG,YAAa,CACjB,IAAI55C,GAAU,EACT04C,EAAmBr2H,MAAM6C,IAAIqxB,EAAI/9B,IAK7B8hI,IAEL5B,EAAmBr2H,MAAMkD,OAAOgxB,EAAI/9B,IACpCwnF,GAAU,IANV04C,EAAmBr2H,MAAMgQ,IAAIkkB,EAAI/9B,IACjCwnF,GAAU,GAQVA,IACA04C,EAAmBr2H,MAAQ,IAAI8R,IAAIukH,EAAmBr2H,OAE9D,CACAuhD,EAAK,gBAAiB6qD,EAASpwE,gBAAgB9H,EAAI/9B,KAAO,KAC9D,CA8NqC,CAAqB+9B,IAC3C,EACC,wBAAoB,aACnBA,EAAe,cACT,kBAAc,wBAAoB,OAAQ,CACzCnvB,IAAK,EACL27C,MAAO,kBACPyQ,SAAS,mBAAgBN,IAAW,OApOtCj2B,EAoOoD1G,EAAI/9B,GAnOtEkgI,EAAmBr2H,MAAM6C,IAAI+3B,GAC7By7F,EAAmBr2H,MAAMkD,OAAO03B,GAGhCy7F,EAAmBr2H,MAAMgQ,IAAI4qB,QAGjCy7F,EAAmBr2H,MAAQ,IAAI8R,IAAIukH,EAAmBr2H,QAR1D,IAAsB46B,GAoO8D,CAAC,WAC9D,qBAAiBy7F,EAAmBr2H,MAAM6C,IAAIqxB,EAAI/9B,IAAM,IAAM,KAAM,EAAqB,OACzF,kBAAc,wBAAoB,OAAQ,MACjD,wBAAoB,QACnB+9B,EAAQ,OACF,kBAAc,wBAAoB,OAAQ,GAAa,CACrDu0E,EAAcv0E,EAAI3a,QACZ,kBAAc,wBAAoB,IAAK,CACtCxU,IAAK,EACL27C,OAAO,oBAAgBxsB,EAAI3a,OAC5B,KAAM,MACN,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiB2a,EAAI3a,MAAO,QAE5F,wBAAoB,QAAQ,IAClC,wBAAoB,SACpB,wBAAoB,OAAQ,IAAa,qBAAiB2a,EAAIpxB,MAAO,IACrE,wBAAoB,SACpB,wBAAoB,OAAQ,GAAa,KAAM,qBAAiBoxB,EAAIsjG,UAAY,IAAK,IACrF,wBAAoB,mBACF,QAAjBp2E,EAAQr3C,OACF,kBAAc,wBAAoB,SAAU,CAC3ChF,IAAK,EACL27C,MAAO,cACPp9B,MAAO,SACP6tC,SAAS,mBAAgBN,IAAW,OAlPjCj2B,EAkPoD1G,EAAI/9B,QAjP/EorD,EAAK,cAAe3mB,GADxB,IAA2BA,GAkP8D,CAAC,UACnE,IAAK41B,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,MACxD,EAAe,MACvB,wBAAoB,QAAQ,IAClC,wBAAoB,sBACF,YAAjBU,EAAQr3C,OACF,kBAAc,wBAAoB,WAAW,CAAEhF,IAAK,GAAK,EACxD,wBAAoB,SAAU,CAC1B27C,OAAO,oBAAgB,CAAC,iBAAkB,CAAEwQ,OAAQz1B,EAAoBz7B,MAAM6C,IAAIqxB,EAAI/9B,OACtFmtB,MAAO,QACP6tC,SAAS,mBAAgBN,IAAW,OA1P/Bj2B,EA0PwD1G,EAAI/9B,QAzPzFi2G,EAASpuE,wBAAwBpD,GADrC,IAAiCA,GA0PkE,CAAC,UACzE,EACC,wBAAoB,IAAK,CACrB8lB,OAAO,oBAAgBjlB,EAAoBz7B,MAAM6C,IAAIqxB,EAAI/9B,IAAM,sBAAwB,kBACxF,KAAM,IACV,GAAuB,KAC1B,wBAAoB,SAAU,CAC1BuqD,MAAO,kBACPp9B,MAAO,SACP6tC,SAAS,mBAAgBN,GAAY+mE,EAAwB1jG,EAAI/9B,IAAM,CAAC,UACzE,IAAKq6D,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,MAC/D,EAAe,KAC1B,MACD,wBAAoB,QAAQ,IAClC,wBAAoB,eACF,WAAjBU,EAAQr3C,OACF,kBAAc,wBAAoB,SAAU,CAC3ChF,IAAK,EACL27C,MAAO,iBACPp9B,MAAO,OACP6tC,SAAS,mBAAgBN,IAAW,OAzQ9Bj2B,EAyQoD1G,EAAI/9B,QAxQlForD,EAAK,iBAAkB3mB,GAD3B,IAA8BA,GAyQ8D,CAAC,UACtE,IAAK41B,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,MACzD,EAAe,MACvB,wBAAoB,QAAQ,IACnC,GAAuB,MAC1B,OACJ,wBAAoB,SACe,IAAlCo2E,EAAiB92H,MAAMlJ,SACjB,kBAAc,wBAAoB,MAAO,GAAa,IAAK05D,EAAO,MAAQA,EAAO,IAAM,EAClF,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,IACjE,wBAAoB,OAAQ,KAAM,WAAY,SAEpD,wBAAoB,QAAQ,IACnC,KAEX,IEzfE,GAAa,CAAEA,MAAO,gCACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,mBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAC,YACd,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,qCACvB,GAAc,CAAEA,MAAO,6CACvB,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAAE37C,IAAK,GACrB,GAAc,CAAE27C,MAAO,QACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,eAEL,GAAc,CAChB37C,IAAK,EACL27C,MAAO,4BAEL,GAAc,CAAC,WACf,GAAc,CAAE37C,IAAK,GACrB,GAAc,CAAE27C,MAAO,QACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAAE37C,IAAK,GACrB,GAAc,CAAE27C,MAAO,QACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,eAEL,GAAc,CAChB37C,IAAK,EACL27C,MAAO,4BAEL,GAAc,CAAC,WACf,GAAc,CAAE37C,IAAK,GACrB,GAAc,CAAE27C,MAAO,QACvB,GAAc,CAAEA,MAAO,yCACvB,GAAc,CAAEA,MAAO,iDACvB,GAAc,CAAE37C,IAAK,GACrB,GAAc,CAAE27C,MAAO,oBACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,cACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,2BACvB,GAAc,CAAEA,MAAO,wBACvB,GAAc,CAAEA,MAAO,0BACvB,GAAc,CAAC,eACf,GAAc,CAAC,eACf,GAAc,CAAC,eACf,GAAc,CAAEA,MAAO,qBACvB,GAAc,CAAE37C,IAAK,GACrB,GAAc,CAAC,eACf,GAAc,CAAC,eACf,GAAc,CAAC,eCzDrB,ID6D6B,qBAAiB,CAC1Ci8C,OAAQ,gBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjB+d,IAAK,CAAC,EACNg8F,kBAAmB,CAAE33E,QAAS,KAElCW,MAAO,CAAC,iBAAkB,QAAS,SACnC,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EAERG,EAAOC,EAEP4qD,GAAW,EAAAnxE,GAAA,KACXwmB,GAAU,EAAA5d,EAAA,MAEVs0F,GAAa,IAAA/5H,KAAI,MACjBg6H,GAAc,IAAAh6H,KAAI,MAElBi6H,GAAO,IAAAj6H,KAAI,CACbob,MAAO,GACPohB,WAAY,GACZC,eAAgB,GAChBC,cAAc,IAEZw9F,GAAuB,IAAAl6H,MAAI,GAC3Bm6H,GAAkB,IAAAn6H,KAAI,IACtBo6H,GAAkB,IAAAp6H,KAAI,IACtBq6H,GAAe,IAAAr6H,MAAI,GACnBs6H,GAAuB,IAAAt6H,MAAI,GAC3Bu6H,GAA6B,IAAAv6H,MAAI,GACjCw6H,GAAsB,IAAAx6H,KAAI,IAE1By6H,EACK,YADLA,EAEQ,eAFRA,EAGI,WAGJrhD,GAAQ,IAAA3pE,UAAS,KAAOm3B,EAAM9I,KAC9B48F,GAAgB,IAAAjrH,UAAS,IAAMu+F,EAASlxE,QAAQt9B,YAChDg/G,GAAU,IAAA/uG,UAAS,IAAMwqH,EAAKr4H,MAAMwZ,MAAMhG,OAAO1c,OAAS,GAC1DqlC,GAAkB,IAAAtuB,UAAS,IACxBwqH,EAAKr4H,MAAM46B,YAETk+F,EAAc94H,MAAMgE,KAAKkmB,GAAKA,EAAE/zB,KAAOkiI,EAAKr4H,MAAM46B,aAD9C,MAGTkB,GAAiB,IAAAjuB,UAAS,IACvB+qH,EAAoB54H,OAElB84H,EAAc94H,MAAMgE,KAAKkmB,GAAKA,EAAE/zB,KAAOyiI,EAAoB54H,QADvD,MAqCf,SAASsyG,IACL/wD,EAAK,kBAAkB,GACvBA,EAAK,QACT,CACA,SAASk0C,IACL,IAAKmnB,EAAQ58G,MACT,OACJ,MAAM8oB,EAAU,CACZ3yB,GAAI6uC,EAAM9I,KAAK/lC,IAAM,OAAO8G,KAAKC,SAAS+U,KAAKkH,SAAS5iB,SAAS,IAAIkuB,OAAO,EAAG,KAC/EjL,MAAO6+G,EAAKr4H,MAAMwZ,MAAMhG,OACxBonB,WAAYy9F,EAAKr4H,MAAM46B,WACvBC,eAAgBw9F,EAAKr4H,MAAM66B,eAC3BhL,UAAWmV,EAAM9I,KAAKrM,YAAa,IAAI5yB,MAAO6yB,cAC9CgL,aAAcu9F,EAAKr4H,MAAM86B,cAG7BsxE,EAAS7uE,UAAUzU,GACnBy4B,EAAK,QAASz4B,GACdwpF,GACJ,CACA,SAASymB,EAAeC,GACpB,IAAKZ,EAAYp4H,MACb,OACJ,MAAMshE,EAAW82D,EAAYp4H,MACvBo7D,EAAQkG,EAAS23D,eACjB/4D,EAAMoB,EAAS43D,aACf3gF,EAAO8/E,EAAKr4H,MAAM66B,eACxBw9F,EAAKr4H,MAAM66B,eAAiB0d,EAAKrnC,MAAM,EAAGkqD,GAAS49D,EAAWzgF,EAAKrnC,MAAMgvD,IAEzE,IAAA5B,UAAS,KACLgD,EAASnX,QACTmX,EAAS0e,kBAAkB5kB,EAAQ49D,EAASliI,OAAQskE,EAAQ49D,EAASliI,SAE7E,CACA,SAASqiI,IACL,IAAI3oG,EAAO+nG,EAAgBv4H,MAAMwT,OACjC,IAAKgd,EACD,OACAsL,EAAe97B,QACfwwB,EAAOsL,EAAe97B,MAAMwwB,KAAO,IAAMA,GAE7C,MAAMuL,EAAcqwE,EAASxwE,YAAYpL,EAAMgoG,EAAgBx4H,YAAS1I,GACxE+gI,EAAKr4H,MAAM46B,WAAamB,EAAY5lC,GACpCmiI,EAAqBt4H,OAAQ,EAC7Bu4H,EAAgBv4H,MAAQ,GACxBw4H,EAAgBx4H,MAAQ,GACxB44H,EAAoB54H,MAAQ,EAChC,CACA,SAASo5H,IACL33E,EAAQ9O,qBAAqB,CAAExJ,YAAaqvF,EAAgBx4H,OAAS,CACjE4yC,SAAUr5B,IACNi/G,EAAgBx4H,MAAQuZ,IAGpC,CACA,SAASkvF,EAAclvF,GACnB,OAAOA,EAAK3P,WAAW,OAAS2P,EAAKpV,SAAS,OAClD,CACA,SAASk1H,IACLX,EAAqB14H,OAAS04H,EAAqB14H,KACvD,CACA,SAAS6/B,EAAe1pC,GACpBkiI,EAAKr4H,MAAM46B,WAAazkC,EACxBuiI,EAAqB14H,OAAQ,CACjC,CACA,SAASs5H,IACLX,EAA2B34H,OAAS24H,EAA2B34H,KACnE,CACA,SAASu5H,EAAqBpjI,GAC1ByiI,EAAoB54H,MAAQ7J,EAC5BwiI,EAA2B34H,OAAQ,CACvC,CAUA,SAASw5H,IACLd,EAAqB14H,OAAQ,EAC7B24H,EAA2B34H,OAAQ,CACvC,CACA,OAtHA,IAAA2c,OAAM,IAAMqoB,EAAMluB,QAASA,IACnBA,IACIkuB,EAAM9I,IAENm8F,EAAKr4H,MAAQ,CACTwZ,MAAOwrB,EAAM9I,IAAI1iB,MACjBohB,WAAYoK,EAAM9I,IAAItB,WACtBC,eAAgBmK,EAAM9I,IAAIrB,eAC1BC,aAAckK,EAAM9I,IAAIpB,eAAgB,GAK5Cu9F,EAAKr4H,MAAQ,CACTwZ,MAAO,GACPohB,WAAYoK,EAAMkzF,kBAClBr9F,eAAgB,GAChBC,cAAc,GAGtBw9F,EAAqBt4H,OAAQ,EAC7Bu4H,EAAgBv4H,MAAQ,GACxBw4H,EAAgBx4H,MAAQ,GACxB04H,EAAqB14H,OAAQ,EAC7B24H,EAA2B34H,OAAQ,EACnC44H,EAAoB54H,MAAQ,OAiFpC,IAAA2c,OAAM,CAAC+7G,EAAsBC,GAA6B,EAAEc,EAAMC,MAC1DD,GAAQC,EACRviH,WAAW,IAAMzT,OAAOwzD,iBAAiB,QAASsiE,GAAgB,GAGlE91H,OAAOyzD,oBAAoB,QAASqiE,KAOrC,CAACjpE,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,uCACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,OAAQ,IAAY,qBAAiB96B,EAAMx3E,MAAQ,OAAS,QAAS,IACzF,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1B0gD,MAAO,iBACPgf,UAAWk9C,EAAQ58G,MACnBmxD,SAAS,mBAAeskC,EAAY,CAAC,UACtC,KAAM,EAAe,KACxB,wBAAoB,SAAU,CAC1B/0C,MAAO,eACPp9B,MAAO,KACP6tC,SAAS,mBAAemhD,EAAa,CAAC,UACvC,IAAK9hD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,YAI3E,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,gBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,eAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzCgQ,QAAS,aACTtyD,IAAK+5H,EACL,sBAAuB3nE,EAAO,KAAOA,EAAO,GAAMK,GAAawnE,EAAKr4H,MAAW,MAAI6wD,GACnFx0D,KAAM,OACNy0D,YAAa,UACd,KAAM,KAAuB,CAC5B,CAAC,aAAaunE,EAAKr4H,MAAMwZ,cAIrC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpCg3C,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,aAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,aACpB,wBAAoB,MAAO,CACvBA,OAAO,oBAAgB,CAAC,oBAAqB,CAAEwQ,OAAQwnE,EAAqB14H,SAC5EmxD,SAAS,mBAAekoE,EAAwB,CAAC,UAClD,EACC,wBAAoB,MAAO,GAAa,CACnCl9F,EAAqB,QACf,kBAAc,wBAAoB,WAAW,CAAEp3B,IAAK,GAAK,CACvD0jG,EAActsE,EAAgBn8B,MAAMuZ,MAAQ,MACtC,kBAAc,wBAAoB,IAAK,CACtCxU,IAAK,EACL27C,OAAO,oBAAgBvkB,EAAgBn8B,MAAMuZ,OAC9C,KAAM,IACN4iB,EAAgBn8B,MAAU,OACtB,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiBm8B,EAAgBn8B,MAAMuZ,MAAO,KACtG,wBAAoB,QAAQ,IACtC,wBAAoB,OAAQ,IAAa,qBAAiB4iB,EAAgBn8B,MAAMwwB,MAAO,IACxF,OACA,kBAAc,wBAAoB,OAAQ,GAAa,UAElEggC,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,6BAA+B,MAAO,KACpG,wBAAoB,UACnBg4E,EAA0B,QACpB,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,CACvBh4E,OAAO,oBAAgB,CAAC,gBAAiB,CAAEg6D,SAAoC,KAA1B2d,EAAKr4H,MAAM46B,cAChEu2B,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYhxB,EAAe,IAAM,CAAC,WACtF,IAAK2wB,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,OAAQ,CAAE9P,MAAO,QAAU,OAAQ,MACrD,KACT,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYo4E,EAAc94H,MAAQk0B,KAC9E,kBAAc,wBAAoB,MAAO,CAC7CnvB,IAAKmvB,EAAI/9B,GACTuqD,OAAO,oBAAgB,CAAC,gBAAiB,CAAEg6D,SAAU2d,EAAKr4H,MAAM46B,aAAe1G,EAAI/9B,MACnFg7D,SAAS,mBAAgBN,GAAYhxB,EAAe3L,EAAI/9B,IAAM,CAAC,UAChE,CACEsyG,EAAcv0E,EAAI3a,MAAQ,MACpB,kBAAc,wBAAoB,IAAK,CACtCxU,IAAK,EACL27C,OAAO,oBAAgBxsB,EAAI3a,OAC5B,KAAM,IACN2a,EAAQ,OACJ,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiBA,EAAI3a,MAAO,KACpF,wBAAoB,QAAQ,IACtC,wBAAoB,OAAQ,IAAa,qBAAiB2a,EAAI1D,MAAO,IACtE,GAAuB,MAC1B,UAEN,wBAAoB,QAAQ,IACnC,IACH,wBAAoB,SAAU,CAC1BkwB,MAAO,eACPp9B,MAAO,OACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYynE,EAAqBt4H,OAAQ,EAAO,CAAC,WACrG,IAAKwwD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,YAI1E,wBAAoB,kBACnB43E,EAA0B,QACpB,kBAAc,wBAAoB,WAAW,CAAEvzH,IAAK,GAAK,EACxD,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,CACpCyrD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,mBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,CACvBA,OAAO,oBAAgB,CAAC,oBAAqB,CAAEwQ,OAAQynE,EAA2B34H,SAClFmxD,SAAS,mBAAemoE,EAA8B,CAAC,UACxD,EACC,wBAAoB,MAAO,GAAa,CACnCx9F,EAAoB,QACd,kBAAc,wBAAoB,WAAW,CAAE/2B,IAAK,GAAK,CACvD0jG,EAAc3sE,EAAe97B,MAAMuZ,MAAQ,MACrC,kBAAc,wBAAoB,IAAK,CACtCxU,IAAK,EACL27C,OAAO,oBAAgB5kB,EAAe97B,MAAMuZ,OAC7C,KAAM,IACNuiB,EAAe97B,MAAU,OACrB,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiB87B,EAAe97B,MAAMuZ,MAAO,KACrG,wBAAoB,QAAQ,IACtC,wBAAoB,OAAQ,IAAa,qBAAiBuiB,EAAe97B,MAAMwwB,MAAO,IACvF,OACA,kBAAc,wBAAoB,OAAQ,GAAa,QAElEggC,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,6BAA+B,MAAO,IACnGi4E,EAAgC,QAC1B,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,CACvBj4E,OAAO,oBAAgB,CAAC,gBAAiB,CAAEg6D,SAAwC,KAA9Bke,EAAoB54H,SACzEmxD,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAY0oE,EAAqB,IAAM,CAAC,WAC5F,IAAK/oE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,OAAQ,CAAE9P,MAAO,QAAU,KAAM,MACnD,KACT,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYo4E,EAAc94H,MAAQk0B,KAC9E,kBAAc,wBAAoB,MAAO,CAC7CnvB,IAAKmvB,EAAI/9B,GACTuqD,OAAO,oBAAgB,CAAC,gBAAiB,CAAEg6D,SAAUke,EAAoB54H,QAAUk0B,EAAI/9B,MACvFg7D,SAAS,mBAAgBN,GAAY0oE,EAAqBrlG,EAAI/9B,IAAM,CAAC,UACtE,CACEsyG,EAAcv0E,EAAI3a,MAAQ,MACpB,kBAAc,wBAAoB,IAAK,CACtCxU,IAAK,EACL27C,OAAO,oBAAgBxsB,EAAI3a,OAC5B,KAAM,IACN2a,EAAQ,OACJ,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiBA,EAAI3a,MAAO,KACpF,wBAAoB,QAAQ,IACtC,wBAAoB,OAAQ,IAAa,qBAAiB2a,EAAI1D,MAAO,IACtE,GAAuB,MAC1B,UAEN,wBAAoB,QAAQ,IACnC,QAGX,wBAAoB,MAAO,GAAa,CACpCggC,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,UACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,iBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAkB7wD,MAAQ6wD,GACxFx0D,KAAM,OACNy0D,YAAa,OACb6pD,SAAS,cAAUwe,EAAmB,CAAC,WACxC,KAAM,KAAuC,CAC5C,CAAC,aAAaZ,EAAgBv4H,UAElC,wBAAoB,SAAU,CAC1B0gD,MAAO,eACPp9B,MAAO,OACP6tC,SAAS,mBAAeioE,EAA2B,CAAC,UACrD,CACE3wB,EAAc+vB,EAAgBx4H,SACxB,kBAAc,wBAAoB,IAAK,CACtC+E,IAAK,EACL27C,OAAO,oBAAgB83E,EAAgBx4H,QACxC,KAAM,MACN,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiBw4H,EAAgBx4H,OAAS,MAAO,OAEnH,wBAAoB,SAAU,CAC1B0gD,MAAO,eACPp9B,MAAO,KACP6tC,SAAS,mBAAegoE,EAAmB,CAAC,UAC7C,IAAK3oE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,QAEnE,wBAAoB,SAAU,CAC1BA,MAAO,eACPp9B,MAAO,KACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYynE,EAAqBt4H,OAAQ,EAAQ,CAAC,WACtG,IAAKwwD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,YAI5E,MACD,wBAAoB,QAAQ,IAClC,wBAAoB,aACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,cACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,wBAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,QAAS,GAAa,EACtC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAawnE,EAAKr4H,MAAkB,aAAI6wD,GAC1Fx0D,KAAM,YACP,KAAM,KAAuB,CAC5B,CAAC,iBAAiBg8H,EAAKr4H,MAAM86B,gBAEjC01B,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,UAAY,MAAO,eAMxG,wBAAoB,YACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,qBAClC,qBAAiB,aACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,qBAAiB,WACjB,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,aAC/C,KACJ,wBAAoB,MAAO,GAAa,EACpC,qBAAgB,wBAAoB,WAAY,CAC5CgQ,QAAS,cACTtyD,IAAKg6H,EACL,sBAAuB5nE,EAAO,KAAOA,EAAO,GAAMK,GAAawnE,EAAKr4H,MAAoB,eAAI6wD,GAC5FnQ,MAAO,eACPoQ,YAAa,gBACb7jD,KAAM,KACP,KAAM,KAAuB,CAC5B,CAAC,aAAaorH,EAAKr4H,MAAM66B,uBAIrC,wBAAoB,cACpB,wBAAoB,MAAO,GAAa,CACpC21B,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,QAAU,SAAU,KACrF,wBAAoB,SAAU,CAC1BA,MAAO,mBACPyQ,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYkoE,EAAeF,GAAmB,CAAC,WACnG,EACC,wBAAoB,OAAQ,CACxBzqD,aAAa,qBAAiByqD,IAC/B,KAAM,EAAe,OAE5B,wBAAoB,SAAU,CAC1Bn4E,MAAO,mBACPyQ,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYkoE,EAAeF,GAAsB,CAAC,WACtG,EACC,wBAAoB,OAAQ,CACxBzqD,aAAa,qBAAiByqD,IAC/B,KAAM,EAAe,OAE5B,wBAAoB,SAAU,CAC1Bn4E,MAAO,mBACPyQ,QAASX,EAAO,MAAQA,EAAO,KAAM,mBAAgBK,GAAYkoE,EAAeF,GAAkB,CAAC,WACpG,EACC,wBAAoB,OAAQ,CACxBzqD,aAAa,qBAAiByqD,IAC/B,KAAM,EAAe,SAGhC,wBAAoB,YACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,CACvBn4E,MAAO,kBACPyQ,QAASX,EAAO,MAAQA,EAAO,IAAOK,GAAY4nE,EAAaz4H,OAASy4H,EAAaz4H,QACtF,CACCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,oBAAsB,MAAO,IAC3F8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,SAAU,KAAM,SAAU,KAC1E,wBAAoB,IAAK,CACrB9P,OAAO,oBAAgB,CAAC,MAAO+3E,EAAaz4H,MAAQ,gBAAkB,qBACvE,KAAM,KAEZy4H,EAAkB,QACZ,kBAAc,wBAAoB,KAAM,GAAa,EACpD,wBAAoB,KAAM,KAAM,EAC5B,wBAAoB,OAAQ,CACxBrqD,aAAa,qBAAiByqD,IAC/B,KAAM,EAAe,IACxBroE,EAAO,MAAQA,EAAO,KAAM,qBAAiB,oBAAqB,OAEtE,wBAAoB,KAAM,KAAM,EAC5B,wBAAoB,OAAQ,CACxB4d,aAAa,qBAAiByqD,IAC/B,KAAM,EAAe,IACxBroE,EAAO,MAAQA,EAAO,KAAM,qBAAiB,YAAa,OAE9D,wBAAoB,KAAM,KAAM,EAC5B,wBAAoB,OAAQ,CACxB4d,aAAa,qBAAiByqD,IAC/B,KAAM,EAAe,IACxBroE,EAAO,MAAQA,EAAO,KAAM,qBAAiB,eAAgB,UAGnE,wBAAoB,QAAQ,iBAOxD,wBAAoB,QAAQ,EAE1C,IE7jBE,GAAa,CAAE9P,MAAO,8BACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,qBAEL,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,iBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,iBACtB,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,mCAEL,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,wBAEL,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,oBACvB,GAAc,CAAEA,MAAO,mBACvB,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,uBAEL,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,qBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,oBAEL,GAAc,CAChB37C,IAAK,EACL27C,MAAO,uBAEL,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAAEA,MAAO,qBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,oBAEL,GAAc,CAAEA,MAAO,sBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,oBC/CX,IDmD6B,qBAAiB,CAC1CM,OAAQ,kBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,UAErB+iC,MAAO,CAAC,iBAAkB,YAC1B,KAAAC,CAAMC,GAAWG,KAAMC,IAEnB,MAAMD,EAAOC,EAEP4qD,GAAW,EAAAnxE,GAAA,KAEX+uF,GAAY,IAAA5rH,KAAI,MAEhBu7H,GAAa,IAAAv7H,KAAI,MACjBshC,GAAmB,IAAAthC,KAAI,UACvBw7H,GAAe,IAAAx7H,KAAI,IAEnBy7H,GAAc,IAAAhsH,UAAS,KACzB,IAAK8rH,EAAW35H,MACZ,MAAO,CAAEpC,WAAY,EAAGC,KAAM,EAAGi8H,UAAW,GAGhD,IAAIA,EAAY,EAMhB,OALAH,EAAW35H,MAAMnC,KAAK+I,QAAQs1B,IACtB69F,EAAc79F,IACd49F,MAGD,CACHl8H,WAAY+7H,EAAW35H,MAAMpC,WAAW9G,OACxC+G,KAAM87H,EAAW35H,MAAMnC,KAAK/G,OAC5BgjI,eAIR,SAASxnB,IACL0nB,IACAz4E,EAAK,kBAAkB,EAC3B,CACA,SAASggE,IACLyI,EAAUhqH,OAAOw/E,OACrB,CACA,SAAS01B,EAAiBlzG,GACtB,MAAMw/D,EAAQx/D,EAAMC,OACdyH,EAAO83D,EAAM2zC,QAAQ,GACvBzrG,GACAuwH,EAAUvwH,EAElB,CACA,SAAS+hG,EAAWzpG,GAChB,MAAM0H,EAAO1H,EAAMoyF,cAAc+gB,QAAQ,GACrCzrG,GAAsB,qBAAdA,EAAKrN,KACb49H,EAAUvwH,GAGVkwH,EAAa55H,MAAQ,aAE7B,CACAvB,eAAew7H,EAAUvwH,GACrBkwH,EAAa55H,MAAQ,GACrB,IACI,MAAMu4C,QAAa7uC,EAAK6uC,OAClBtgD,EAAOF,KAAKwH,MAAMg5C,GAExB,IAAKtgD,EAAK8E,UAAY6L,MAAMwL,QAAQnc,EAAK2F,cAAgBgL,MAAMwL,QAAQnc,EAAK4F,MACxE,MAAM,IAAIoM,MAAM,cAEpB0vH,EAAW35H,MAAQ/H,CACvB,CACA,MAAO8G,GACH66H,EAAa55H,MAAQjB,aAAakL,MAAQlL,EAAE4B,QAAU,SACtDg5H,EAAW35H,MAAQ,IACvB,CACJ,CACA,SAAS+5H,EAAc79F,GAEnB,MAAMtB,EAAawxE,EAASjvE,kBAAkBjB,EAAI9G,WAAWj/B,IAAM,GACnE,OAAOi2G,EAASlxE,QAAQr9B,KAAKka,KAAKwb,GAAKA,EAAE/Z,QAAU0iB,EAAI1iB,OAAS+Z,EAAEqH,aAAeA,EACrF,CACA,SAASo/F,IACLL,EAAW35H,MAAQ,KACnB45H,EAAa55H,MAAQ,GACrB0/B,EAAiB1/B,MAAQ,SACrBgqH,EAAUhqH,QACVgqH,EAAUhqH,MAAMA,MAAQ,GAEhC,CACA,SAASk6H,IACL,IAAKP,EAAW35H,MACZ,OACJ,MAAM8B,EAASsqG,EAASntE,cAAc06F,EAAW35H,MAAO,CACpD0/B,iBAAkBA,EAAiB1/B,QAEnC8B,EAAOpB,SACP6gD,EAAK,WAAY,CACbpiB,UAAWr9B,EAAOq9B,UAAYr9B,EAAOu9B,YACrCH,gBAAiBp9B,EAAOo9B,kBAE5BozE,KAGAsnB,EAAa55H,MAAQ8B,EAAO7C,OAAS,MAE7C,CACA,MAAO,CAACsxD,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,uCACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,EAChF,wBAAoB,IAAK,CAAEA,MAAO,wBAClC,qBAAiB,aACjB,KACJ,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,SAEP,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,UAClBqnB,EAAW35H,QAqBN,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,CACnCyrD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,KACtF,wBAAoB,OAAQ,IAAY,qBAAiBm5E,EAAY75H,MAAMpC,YAAa,GACxF4yD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,kBAAoB,MAAO,OAE9F,wBAAoB,MAAO,GAAY,CACnC8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,cAAgB,MAAO,KACnF,wBAAoB,OAAQ,IAAa,qBAAiBm5E,EAAY75H,MAAMnC,MAAO,GACnF2yD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,kBAAoB,MAAO,MAE7Fm5E,EAAY75H,MAAM85H,UAAY,IACxB,kBAAc,wBAAoB,MAAO,GAAa,CACrDtpE,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,+BAAiC,MAAO,KACpG,wBAAoB,OAAQ,IAAa,qBAAiBm5E,EAAY75H,MAAM85H,WAAY,GACxFtpE,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,kBAAoB,MAAO,QAE9F,wBAAoB,QAAQ,MAEtC,wBAAoB,YACnBm5E,EAAY75H,MAAM85H,UAAY,IACxB,kBAAc,wBAAoB,MAAO,GAAa,CACrDtpE,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,gBAClC,qBAAiB,YACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,QAAS,GAAa,EACtC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAmB7wD,MAAQ6wD,GACzFx0D,KAAM,QACN2D,MAAO,aACR,KAAM,KAAuB,CAC5B,CAAC,cAAc0/B,EAAiB1/B,SAEpCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,KAAM,UAAW,IACzEA,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,QAAU,gBAAiB,OAEhG,wBAAoB,QAAS,GAAa,EACtC,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAmB7wD,MAAQ6wD,GACzFx0D,KAAM,QACN2D,MAAO,UACR,KAAM,KAAuB,CAC5B,CAAC,cAAc0/B,EAAiB1/B,SAEpCwwD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,KAAM,WAAY,IAC1EA,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,QAAU,gBAAiB,YAItG,wBAAoB,QAAQ,IAClC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,CACpC8P,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,sBAAwB,EACpF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,cACjB,KACJ,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,QACnBi5E,EAAW35H,MAAMpC,WAAW9G,OAAS,IAC/B,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,GAAa,QAAS,qBAAiB6iI,EAAW35H,MAAMpC,WAAW9G,QAAU,IAAK,IAC7G,wBAAoB,MAAO,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY6iI,EAAW35H,MAAMpC,WAAWsT,MAAM,EAAG,IAAMgjB,KACnG,kBAAc,wBAAoB,OAAQ,CAC9CnvB,IAAKmvB,EAAI/9B,GACTuqD,MAAO,qBACR,qBAAiBxsB,EAAI3a,KAAO2a,EAAI3a,KAAO,IAAM,KAAM,qBAAiB2a,EAAI1D,MAAO,KAClF,MACHmpG,EAAW35H,MAAMpC,WAAW9G,OAAS,KAC/B,kBAAc,wBAAoB,OAAQ,GAAa,QAAS,qBAAiB6iI,EAAW35H,MAAMpC,WAAW9G,OAAS,IAAM,SAAU,KACvI,wBAAoB,QAAQ,SAGxC,wBAAoB,QAAQ,IAClC,wBAAoB,QACnB6iI,EAAW35H,MAAMnC,KAAK/G,OAAS,IACzB,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,MAAO,GAAa,QAAS,qBAAiB6iI,EAAW35H,MAAMnC,KAAK/G,QAAU,IAAK,IACvG,wBAAoB,MAAO,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAY6iI,EAAW35H,MAAMnC,KAAKqT,MAAM,EAAG,IAAMgrB,KAC7F,kBAAc,wBAAoB,OAAQ,CAC9Cn3B,IAAKm3B,EAAI/lC,GACTuqD,OAAO,oBAAgB,CAAC,mBAAoB,CAAEy5E,SAAUJ,EAAc79F,QACvE,qBAAiBA,EAAI1iB,OAAQ,KAChC,MACHmgH,EAAW35H,MAAMnC,KAAK/G,OAAS,KACzB,kBAAc,wBAAoB,OAAQ,GAAa,QAAS,qBAAiB6iI,EAAW35H,MAAMnC,KAAK/G,OAAS,IAAM,SAAU,KACjI,wBAAoB,QAAQ,SAGxC,wBAAoB,QAAQ,QAG1C,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1B4pD,MAAO,oBACPyQ,SAAS,mBAAe6oE,EAAa,CAAC,UACvC,IAAKxpE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,SAAU,QAEnC,wBAAoB,SAAU,CAC1BA,MAAO,kBACPyQ,SAAS,mBAAe+oE,EAAe,CAAC,UACzC,IAAK1pE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,IAC3D,qBAAiB,SAAU,YAI5C,SAzIA,kBAAc,wBAAoB,MAAO,GAAY,EACpD,wBAAoB,MAAO,CACvBA,MAAO,kBACPyQ,QAASowD,EACThtB,WAAY/jC,EAAO,KAAOA,EAAO,IAAK,mBAAe,OAAW,CAAC,aACjEgkC,QAAQ,mBAAeiX,EAAY,CAAC,aACrC,IAAKj7C,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,2BAA6B,MAAO,IACtE,wBAAoB,IAAK,KAAM,wBAAyB,IACxD,wBAAoB,OAAQ,CAAEA,MAAO,QAAU,mBAAoB,MACjE,KACV,wBAAoB,QAAS,CACzBgQ,QAAS,YACTtyD,IAAK4rH,EACL3tH,KAAM,OACNk5G,OAAQ,QACR/pE,MAAO,CAAE,QAAW,QACpB6iE,SAAU6G,GACX,KAAM,SAwHjB,wBAAoB,UACnB0kB,EAAkB,QACZ,kBAAc,wBAAoB,MAAO,GAAa,CACrDppE,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,6BAA+B,MAAO,KACpG,qBAAiB,KAAM,qBAAiBk5E,EAAa55H,OAAQ,OAE/D,wBAAoB,QAAQ,WAI5C,wBAAoB,QAAQ,EAE1C,IE5UE,GAAa,CAAE0gD,MAAO,oBACtB,GAAa,CAAEA,MAAO,uCACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAC,WACd,GAAa,CACf37C,IAAK,EACL27C,MAAO,gBAEL,GAAa,CAAE37C,IAAK,GACpB,GAAa,CACfA,IAAK,EACL27C,MAAO,kBAEL,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,mBACtB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,gBAEL,GAAc,CAAC,YACf,GAAc,CAAEA,MAAO,mBCjB7B,ID0B6B,qBAAiB,CAC1CM,OAAQ,mBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjB8E,gBAAiB,CAAC,EAClBE,qBAAsB,CAAEo9B,QAAS,IAAM,KAE3CW,MAAO,CAAC,iBAAkB,OAAQ,SAClC,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EAERG,EAAOC,EAEP4qD,GAAW,EAAAnxE,GAAA,KACXyF,GAAc,EAAAxkB,EAAA,MACdulC,GAAU,EAAA5d,EAAA,MAEVxI,GAAgB,IAAAj9B,KAAI,IACpBg8H,GAAiB,IAAAh8H,MAAI,GACrBi8H,GAAmB,IAAAj8H,MAAI,GACvBk8H,GAAa,IAAAl8H,KAAI,MACjB85H,GAAoB,IAAA95H,KAAI,IAExBm8H,GAAuB,IAAAn8H,KAAI,IAC3Bo8H,GAA4B,IAAAp8H,KAAI,IAEhCm9B,GAAc,IAAA1tB,UAAS,IAAMu+F,EAAS7wE,aACtCC,GAAiB,IAAA3tB,UAAS,IAAMu+F,EAAS5wE,gBACzCS,GAAe,IAAApuB,UAAS,IAAMu+F,EAASnwE,cACvCw+F,GAAuB,IAAA5sH,UAAS,IACA,IAA9BouB,EAAaj8B,MAAMlJ,QAEhBmlC,EAAaj8B,MAAM2tB,MAAMuO,GAAOV,EAAex7B,MAAM6C,IAAIq5B,EAAI/lC,MAGlEukI,GAAiB,IAAA7sH,UAAS,KAC5B,MAAM1H,EAAQ,GAwBd,OAtBAq0H,EAA0Bx6H,MAAM4G,QAAQ+vH,IACpC,MAAMvhG,EAAWg3E,EAASpwE,gBAAgB26F,GACtCvhG,GACAjvB,EAAMlQ,KAAK,CACPE,GAAIwgI,EACJt6H,KAAM,WACNmd,MAAO4b,EAAS5E,KAChBjX,KAAM6b,EAAS7b,SAK3BghH,EAAqBv6H,MAAM4G,QAAQ62B,IAC/B,MAAMvB,EAAMkwE,EAASzuE,WAAWF,GAC5BvB,GACA/1B,EAAMlQ,KAAK,CACPE,GAAIsnC,EACJphC,KAAM,MACNmd,MAAO0iB,EAAI1iB,UAIhBrT,IAGLw0H,GAAyB,IAAA9sH,UAAS,IAAM0sH,EAAqBv6H,OAanE,SAASsyG,IAELlG,EAAStuE,QAAQ,UAEjByjB,EAAK,OAAQ,IAAIg5E,EAAqBv6H,OAAQ,IAAIw6H,EAA0Bx6H,QAC5EuhD,EAAK,kBAAkB,GACvBA,EAAK,QACT,CACA,SAASq5E,EAAW7wH,GACZwxB,EAAYv7B,QAAU+J,GAEtBqiG,EAAStuE,QAAQ,UACjB+8F,EAAc,MAAQC,EAAa/wH,GAAQ,QAG3CqiG,EAAStuE,QAAQ/zB,GACjB8wH,EAAcC,EAAa/wH,GAAQ,SAE3C,CACA,SAAS+wH,EAAa/wH,GASlB,MARe,CACXgxH,OAAQ,KACR7wD,OAAQ,KACRl6D,IAAK,KACL9M,OAAQ,KACR83H,QAAS,KACTC,OAAQ,MAEElxH,IAASA,CAC3B,CACA,SAAS8wH,EAAcl6H,GACG,oBAAXu6H,QACPA,OAAOn7H,KAAKY,EAAS,GAAI,CAAEw6H,QAAS,KAE5C,CACA,SAAS3gB,IACLpO,EAAS/wE,cAAgBA,EAAcr7B,KAC3C,CACA,SAASuyG,IACLl3E,EAAcr7B,MAAQ,GACtBosG,EAAS/wE,cAAgB,EAC7B,CAEA,SAASgvE,EAAoBj1E,GACC,QAAtBmG,EAAYv7B,OAAmBo1B,GAE/BgmG,EAAqBhmG,EAASj/B,GAEtC,CAEA,SAASyhI,EAAwBh9F,GAC7B,MAAMygG,EAAiBjvB,EAAS3wE,oBAC1B6/F,EAAmB9/F,EAAex7B,MAAM1D,KACxCi/H,EAAmBF,EAAe/+H,KACxC,GAAyB,IAArBg/H,GAA+C,IAArBC,EAE1B,YADAV,EAAc,iBAIC,SAAfjgG,EAEAwxE,EAAS/tE,qBAAqB,IAI9B+tE,EAAS/tE,qBAAqBzD,GAElC,MAAM4gG,EAAW,GACbF,EAAmB,GACnBE,EAASvlI,KAAK,GAAGqlI,SAEjBC,EAAmB,GACnBC,EAASvlI,KAAK,GAAGslI,SAErB,MAAMt5H,EAAwB,SAAf24B,EAAwB,MAAQ,OAC/CigG,EAAc,OAASW,EAASzkI,KAAK,OAAS,KAAOkL,GACrDmqG,EAAStuE,QAAQ,SACrB,CAEA,SAAS29F,EAAqB7gG,GAE1B,GAAmB,SAAfA,EAQA,YAPImoE,QAAQ,4BACRqJ,EAASzlG,WAET4zH,EAAqBv6H,MAAQ,GAC7Bw6H,EAA0Bx6H,MAAQ,GAClC66H,EAAc,gBAItB,MAAMzlG,EAAWg3E,EAASpwE,gBAAgBpB,GACtCxF,IACAg3E,EAASnvE,eAAerC,GACxBigG,EAAc,SAAWzlG,EAAS5E,MAElCkrG,EAA4B9gG,GAEpC,CAEA,SAASg7F,EAAe15F,GACM,QAAtBX,EAAYv7B,MAEZ27H,EAAaz/F,EAAI/lC,IAEU,WAAtBolC,EAAYv7B,OAA4C,WAAtBu7B,EAAYv7B,QAEnDs6H,EAAWt6H,MAAQk8B,EACnBk+F,EAAep6H,OAAQ,EAE/B,CAEA,SAAS47H,IACLtB,EAAWt6H,MAAQ,KAEnB,MAAMw0B,EAAc43E,EAASyvB,eAC7B,GAAIrnG,GAA+B,OAAhBA,GAAwC,QAAhBA,EAAuB,CAC9D,MAAMN,EAAMk4E,EAASjvE,kBAAkB3I,GACvC0jG,EAAkBl4H,MAAQk0B,GAAK/9B,IAAM,EACzC,MAEI+hI,EAAkBl4H,MAAQ,GAE9Bo6H,EAAep6H,OAAQ,CAC3B,CAEA,SAAS87H,EAAgBr+F,GACrB,MAAMvB,EAAMkwE,EAASzuE,WAAWF,GAC5BvB,IACAkwE,EAAS5uE,UAAUC,GACnBo9F,EAAc,SAAW3+F,EAAI1iB,OAE7BuiH,EAAuBt+F,GAE/B,CAEA,SAASk+F,EAAal+F,GAClB,GAAK88F,EAAqBv6H,MAAMmE,SAASs5B,GAQrCo9F,EAAc,gBAR+B,CAC7CN,EAAqBv6H,MAAQ,IAAIu6H,EAAqBv6H,MAAOy9B,GAC7D,MAAMvB,EAAMkwE,EAASzuE,WAAWF,GAC5BvB,GACA2+F,EAAc,OAAS3+F,EAAI1iB,MAEnC,CAIJ,CAEA,SAASwiH,EAAkBphG,GAEJ,SAAfA,EAWJwgG,EAAqBxgG,GATZ4/F,EAA0Bx6H,MAAMmE,SAAS,QAK1C02H,EAAc,aAJdL,EAA0Bx6H,MAAQ,IAAIw6H,EAA0Bx6H,MAAO,QACvE66H,EAAc,WAQ1B,CAEA,SAASO,EAAqBxgG,GAC1B,GAAK4/F,EAA0Bx6H,MAAMmE,SAASy2B,GAQ1CigG,EAAc,gBARyC,CACvDL,EAA0Bx6H,MAAQ,IAAIw6H,EAA0Bx6H,MAAO46B,GACvE,MAAM1G,EAAMk4E,EAASpwE,gBAAgBpB,GACjC1G,GACA2mG,EAAc,SAAW3mG,EAAI1D,KAErC,CAIJ,CAUA,SAASurG,EAAuBt+F,GAC5B88F,EAAqBv6H,MAAQu6H,EAAqBv6H,MAAM8H,OAAO3R,GAAMA,IAAOsnC,EAChF,CACA,SAASi+F,EAA4B9gG,GACjC4/F,EAA0Bx6H,MAAQw6H,EAA0Bx6H,MAAM8H,OAAO3R,GAAMA,IAAOykC,EAC1F,CAEA,SAASqhG,EAAe//F,GACpB2+F,EAAc,OAAS3+F,EAAI1iB,MAC/B,CACA,SAAS0iH,IACL5B,EAAWt6H,MAAQ,IACvB,CAEA,SAASm8H,IACL9B,EAAiBr6H,OAAQ,CAC7B,CACA,SAASo8H,EAAet6H,GACpB+4H,EAAc,OAAO/4H,EAAOo9B,uBAAuBp9B,EAAOq9B,gBAC9D,CAEA,SAASk9F,IACD5B,EAAqBz6H,MAErBi8B,EAAaj8B,MAAM4G,QAAQs1B,IACnBV,EAAex7B,MAAM6C,IAAIq5B,EAAI/lC,KAC7Bi2G,EAASruE,mBAAmB7B,EAAI/lC,MAMxC8lC,EAAaj8B,MAAM4G,QAAQs1B,IAClBV,EAAex7B,MAAM6C,IAAIq5B,EAAI/lC,KAC9Bi2G,EAASruE,mBAAmB7B,EAAI/lC,KAIhD,CAKA,SAASmmI,IAELjW,EADaja,EAASxtE,cAAc,OACjB,wBACnBwtE,EAAStuE,QAAQ,SACrB,CACA,SAASy+F,IAELlW,EADaja,EAASxtE,cAAc,YACjB,6BACnBwtE,EAAStuE,QAAQ,SACrB,CACA,SAASuoF,EAAapuH,EAAMsuH,GACxB,MAAMhgH,EAAO,IAAIq8F,KAAK,CAAC7qG,KAAKC,UAAUC,EAAM,KAAM,IAAK,CAAEoE,KAAM,qBACzDwK,EAAM9D,IAAIiE,gBAAgBT,GAC1BwB,EAAI6kC,SAAS8J,cAAc,KACjC3uC,EAAEmnE,KAAOroE,EACTkB,EAAE86F,SAAW0jB,EACb35E,SAASqrB,KAAKhE,YAAYlsD,GAC1BA,EAAEy3E,QACF5yC,SAASqrB,KAAK7D,YAAYrsD,GAC1BhF,IAAIC,gBAAgB6D,GACpBg0H,EAAc,OAClB,CAaA,OAlRA,IAAA7qE,WAAUvxD,gBACA2tG,EAASpvE,iBAEnB,IAAAyyC,aAAY,KAEJhuB,EAAQnY,gBACRmY,EAAQjO,uBAEZiO,EAAQ/N,2BA+PZ,IAAA/2B,OAAM,IAAMqoB,EAAMluB,QAASA,IACnBA,IAEAs1F,EAAStuE,QAAQ,UACjBsuE,EAAStsE,iBACTzE,EAAcr7B,MAAQ,GAEtBu6H,EAAqBv6H,MAAQ,IAAIglC,EAAM/hB,iBACvCu3G,EAA0Bx6H,MAAQ,IAAIglC,EAAM7hB,yBAG7C,CAACotC,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,uCACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,CACvB5xD,MAAO,kCACPlV,OAAO,oBAAgB,CAAE2mD,cAAe,IAAG,WAAOzxD,GAAa3lC,OAAO8f,sBAAwB,SAC/F,EACC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,CACnC21C,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,EAChF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,aACjB,KACJ,wBAAoB,SAAU,CAC1BA,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,SAEP,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,eACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,OAAQ,CAAE9P,MAAO,uBAAyB,QAAS,IAClGg6E,EAAe16H,MAAMlJ,OAAS,IACxB,gBAAW,IAAO,wBAAoB,WAAW,CAAEiO,IAAK,IAAK,gBAAY21H,EAAe16H,MAAQtJ,IAC/F,OAAQ,kBAAc,wBAAoB,OAAQ,CAC9CqO,IAAKrO,EAAKP,GACVuqD,MAAO,oBACPyQ,SAAS,mBAAgBN,GArH7D,SAA6Bn6D,GACP,QAAdA,EAAK2F,KACL0/H,EAAuBrlI,EAAKP,IAG5BulI,EAA4BhlI,EAAKP,GAEzC,CA8GwE,CAAqBO,GAAQ,CAAC,UACnE,CACEA,EAAS,OACH,kBAAc,wBAAoB,OAAQ,GAAY,EAzE1E6iB,EA0EoC7iB,EAAK6iB,KAzErDA,EAAK3P,WAAW,OAAS2P,EAAKpV,SAAS,UA0EC,kBAAc,wBAAoB,IAAK,CACtCY,IAAK,EACL27C,OAAO,oBAAgBhqD,EAAK6iB,OAC7B,KAAM,MACN,kBAAc,wBAAoB,OAAQ,IAAY,qBAAiB7iB,EAAK6iB,MAAO,SAE5F,wBAAoB,QAAQ,IAClC,qBAAiB,KAAM,qBAAiB7iB,EAAK8iB,OAAS,IAAK,GAC3Dg3C,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,gCAAkC,MAAO,KACtG,EAAe,IApFlD,IAAuBnnC,IAqFS,QACD,kBAAc,wBAAoB,OAAQ,GAAY,uBAEjE,wBAAoB,UACpB,wBAAoB,MAAO,GAAY,CACnCi3C,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,KACxF,qBAAgB,wBAAoB,QAAS,CACzC,sBAAuB8P,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAgB7wD,MAAQ6wD,GACtFx0D,KAAM,OACNy0D,YAAa,UACb6yC,QAAS6W,GACV,KAAM,KAAuC,CAC5C,CAAC,aAAan/E,EAAcr7B,SAE/Bq7B,EAAmB,QACb,kBAAc,wBAAoB,SAAU,CAC3Ct2B,IAAK,EACL27C,MAAO,mBACPyQ,SAAS,mBAAeohD,EAAa,CAAC,UACvC,IAAK/hD,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,SAEjE,wBAAoB,QAAQ,MAEtC,wBAAoB,UACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,mCACpB,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,+BAAgC,CAAEwQ,QAAQ,WAAOzP,GAASnY,kBAClFhmB,MAAO,iBACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,IAAY,WAAOpP,GAASjO,uBAAyB,CAAC,WAC1G,IAAKgd,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,IAC5D,wBAAoB,OAAQ,CAAEA,MAAO,aAAe,MAAO,MACzD,IACV,wBAAoB,WACpB,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAA8B,QAAtB31B,EAAYv7B,SAC9DsjB,MAAO,qBACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAY+pE,EAAW,OAAS,CAAC,WACrF,IAAKpqE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,cAAgB,MAAO,IACzD,wBAAoB,OAAQ,CAAEA,MAAO,aAAe,MAAO,MACzD,IACV,wBAAoB,SAAU,CAC1BA,MAAO,eACPp9B,MAAO,OACP6tC,SAAS,mBAAeyqE,EAAiB,CAAC,UAC3C,IAAKprE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,wBAAoB,OAAQ,CAAEA,MAAO,aAAe,MAAO,QAEnE,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAA8B,WAAtB31B,EAAYv7B,SAC9DsjB,MAAO,mBACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAY+pE,EAAW,UAAY,CAAC,WACxF,IAAKpqE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,IAC3D,wBAAoB,OAAQ,CAAEA,MAAO,aAAe,MAAO,MACzD,IACV,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAA8B,YAAtB31B,EAAYv7B,SAC9DsjB,MAAO,qBACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAY+pE,EAAW,WAAa,CAAC,WACzF,IAAKpqE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,qBAAuB,MAAO,IAChE,wBAAoB,OAAQ,CAAEA,MAAO,aAAe,MAAO,MACzD,IACV,wBAAoB,SAAU,CAC1BA,MAAO,eACPp9B,MAAO,QACP6tC,SAAS,mBAAegrE,EAAc,CAAC,UACxC,IAAK3rE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,IACjE,wBAAoB,OAAQ,CAAEA,MAAO,aAAe,MAAO,QAEnE,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,eAAgB,CAAEwQ,OAA8B,WAAtB31B,EAAYv7B,SAC9DsjB,MAAO,gBACP6tC,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAY+pE,EAAW,UAAY,CAAC,WACxF,IAAKpqE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,IACjE,wBAAoB,OAAQ,CAAEA,MAAO,aAAe,MAAO,MACzD,IACV,wBAAoB,iBACG,YAAtBnlB,EAAYv7B,OAA6C,WAAtBu7B,EAAYv7B,QACzC,kBAAc,wBAAoB,MAAO,GAAa,EACrD,wBAAoB,SAAU,CAC1B0gD,MAAO,eACPyQ,SAAS,mBAAekrE,EAAwB,CAAC,UAClD,CACC7rE,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,uBAAyB,MAAO,KAC9F,qBAAiB,KAAM,qBAAiB+5E,EAAqBz6H,MAAQ,OAAS,QAAS,KAEpE,WAAtBu7B,EAAYv7B,QACN,kBAAc,wBAAoB,WAAW,CAAE+E,IAAK,GAAK,EACxD,wBAAoB,SAAU,CAC1B27C,MAAO,eACPyQ,SAAS,mBAAemrE,EAAW,CAAC,UACrC,IAAK9rE,EAAO,MAAQA,EAAO,IAAM,EAC5B,wBAAoB,IAAK,CAAE9P,MAAO,mBAAqB,MAAO,IAC9D,qBAAiB,UAAW,QAEpC,wBAAoB,SAAU,CAC1BA,MAAO,eACPgf,SAAwC,IAA9BlkC,EAAex7B,MAAM1D,KAC/B60D,SAAS,mBAAeorE,EAAgB,CAAC,UAC1C,CACC/rE,EAAO,MAAQA,EAAO,KAAM,wBAAoB,IAAK,CAAE9P,MAAO,gBAAkB,MAAO,KACvF,qBAAiB,WAAY,qBAAiBllB,EAAex7B,MAAM1D,MAAQ,KAAM,IAClF,EAAe,KACnB,MACD,wBAAoB,QAAQ,OAEpC,wBAAoB,QAAQ,MAEtC,wBAAoB,WACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,aACpB,iBAAakgI,GAAiB,CAC1BzyH,KAAMwxB,EAAYv7B,MAClBy8H,gBAAiBpyB,EACjBqyB,cAAeV,EACfW,oBAAqB/E,EACrBgF,iBAAkBnB,GACnB,KAAM,EAAe,CAAC,UACzB,wBAAoB,cACpB,iBAAaoB,GAAc,CACvB9yH,KAAMwxB,EAAYv7B,MAClB,oBAAqB26H,EAAuB36H,MAC5C88H,WAAYlH,EACZmH,YAAanB,EACboB,YAAalB,EACbmB,SAAUtB,GACX,KAAM,EAAe,CAAC,OAAQ,2BAG1C,IACH,wBAAoB,WACpB,iBAAauB,GAAe,CACxBpmH,QAASsjH,EAAep6H,MACxB,mBAAoBwwD,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAiB7wD,MAAQ6wD,GACpF30B,IAAKo+F,EAAWt6H,MAChB,sBAAuBk4H,EAAkBl4H,MACzCm9H,QAASlB,EACThpC,QAASipC,GACV,KAAM,EAAe,CAAC,UAAW,MAAO,yBAC3C,wBAAoB,UACnB7B,EAAsB,QAChB,kBAAc,iBAAa+C,GAAiB,CAC3Cr4H,IAAK,EACL+R,QAASujH,EAAiBr6H,MAC1B,mBAAoBwwD,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAmB7wD,MAAQ6wD,GACtFwsE,WAAYjB,GACb,KAAM,EAAe,CAAC,cACvB,wBAAoB,QAAQ,OAEpC,wBAAoB,QAAQ,EAE1C,IE9jBE,GAAa,CAAE17E,MAAO,oBACtB,GAAa,CAAEA,MAAO,mBACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,qBAEL,GAAa,CAAE37C,IAAK,GACpB,GAAa,CAAE27C,MAAO,kBACtB,GAAa,CACf37C,IAAK,EACL27C,MAAO,4BAEL,GAAa,CAAEA,MAAO,qBACtB,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAC,WACd,GAAc,CAChB37C,IAAK,EACL27C,MAAO,iBAEL,GAAc,CAAE37C,IAAK,GACrB,GAAc,CAChBA,IAAK,EACL27C,MAAO,iBAEL,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAAEA,MAAO,kBACvB,GAAc,CAAEA,MAAO,0BACvB,GAAc,CAAC,UAAW,eAAgB,uBAC1C,GAAc,CAChB37C,IAAK,EACL27C,MAAO,kBAEL,GAAc,CAAEA,MAAO,0BACvB,GAAc,CAAEA,MAAO,mBACvB,GAAc,CAAC,UAAW,eAAgB,uBAC1C,GAAc,CAChB37C,IAAK,EACL27C,MAAO,kBAEL,GAAc,CAChBA,MAAO,mBACPlV,MAAO,CAAE,kBAAmB,gBAAiB,aAAc,IAAK,cAAe,OAAQ,aAAc,gCCtCzG,ID4C6B,qBAAiB,CAC1CwV,OAAQ,sBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjByc,WAAY,CAAC,EACb+N,WAAY,CAAE4X,QAAS,KAAM,CAAGj9B,MAAO,GAAItjB,MAAO,MAClD8kB,SAAU,CAAEy7B,QAAS,KAEzBW,MAAO,CAAC,iBAAkB,SAAU,SACpC,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EAERG,EAAOC,EAEP4qD,GAAW,EAAAnxE,GAAA,KACXwmB,GAAU,EAAA5d,EAAA,MACVyqE,GAAiB,EAAA/rF,GAAA,KAEjB+6G,GAAwB,IAAAl/H,KAAI,MAE5Bg3B,GAAW,IAAAvnB,UAAS,IACfu+F,EAASpwE,gBAAgBgJ,EAAMpK,aAGpCxJ,GAAe,IAAAvjB,UAAS,KAC1B,IAAKunB,EAASp1B,MACV,MAAO,OACX,MAAM4W,EAAQwe,EAASp1B,MAAMwwB,KAAKhH,MAAM,KACxC,OAAO5S,EAAMA,EAAM9f,OAAS,KAG1BymI,GAAgB,IAAA1vH,UAAS,KAC3B,IAAKunB,EAASp1B,MACV,MAAO,GACX,MAAM67B,EAAazG,EAASp1B,MAAMwwB,KAElC,OAAO47E,EAASlxE,QAAQt9B,WAAWkK,OAAOosB,IACtC,IAAKA,EAAI1D,KAAK5mB,WAAWiyB,EAAa,KAClC,OAAO,EAGX,OADsB3H,EAAI1D,KAAKtf,MAAM2qB,EAAW/kC,OAAS,GACnCqN,SAAS,SAIjCq5H,GAAmB,IAAA3vH,UAAS,IAAM0vH,EAAcv9H,MAAMlJ,OAAS,GAE/DspD,GAAU,IAAAvyC,UAAS,KACrB,IAAKunB,EAASp1B,MACV,MAAO,GAEX,MAAMs9B,EAAc,IAAIxrB,IAOxB,OANAs6F,EAASlxE,QAAQt9B,WAAWgJ,QAAQstB,KAC5BA,EAAI1D,OAAS4E,EAASp1B,MAAMwwB,MAAQ0D,EAAI1D,KAAK5mB,WAAWwrB,EAASp1B,MAAMwwB,KAAO,OAC9E8M,EAAYttB,IAAIkkB,EAAI/9B,MAIrBi2G,EAASlxE,QAAQr9B,KAAKiK,OAAOo0B,GAAOoB,EAAYz6B,IAAIq5B,EAAItB,eAG7D6iG,GAAe,IAAA5vH,UAAS,IAAMuyC,EAAQpgD,MAAMlJ,QAE5C0+H,GAAgB,IAAA3nH,UAAS,KAC3B,GAAoC,OAAhCyvH,EAAsBt9H,MAEtB,OAAOogD,EAAQpgD,MAGnB,MAAMw0B,EAAc43E,EAASpwE,gBAAgBshG,EAAsBt9H,OACnE,IAAKw0B,EACD,MAAO,GACX,MAAM8I,EAAc,IAAIxrB,IAMxB,OALAs6F,EAASlxE,QAAQt9B,WAAWgJ,QAAQstB,KAC5BA,EAAI1D,OAASgE,EAAYhE,MAAQ0D,EAAI1D,KAAK5mB,WAAW4qB,EAAYhE,KAAO,OACxE8M,EAAYttB,IAAIkkB,EAAI/9B,MAGrBi2G,EAASlxE,QAAQr9B,KAAKiK,OAAOo0B,GAAOoB,EAAYz6B,IAAIq5B,EAAItB,eAGnE,SAAS8iG,EAAmBC,GACxB,MAAM/mH,EAAQ+mH,EAAOntG,KAAKhH,MAAM,KAChC,OAAO5S,EAAMA,EAAM9f,OAAS,EAChC,CAEA,SAAS8mI,EAAuBC,GAC5B,MAAMF,EAASvxB,EAASpwE,gBAAgB6hG,GACxC,IAAKF,EACD,OAAO,EACX,MAAMrgG,EAAc,IAAIxrB,IAMxB,OALAs6F,EAASlxE,QAAQt9B,WAAWgJ,QAAQstB,KAC5BA,EAAI1D,OAASmtG,EAAOntG,MAAQ0D,EAAI1D,KAAK5mB,WAAW+zH,EAAOntG,KAAO,OAC9D8M,EAAYttB,IAAIkkB,EAAI/9B,MAGrBi2G,EAASlxE,QAAQr9B,KAAKiK,OAAOo0B,GAAOoB,EAAYz6B,IAAIq5B,EAAItB,aAAa9jC,MAChF,CAEA,SAASgnI,EAAkBD,GACvBP,EAAsBt9H,MAAQ69H,CAClC,CAEA,SAASvrB,IACL/wD,EAAK,kBAAkB,GACvBA,EAAK,QACT,CACA,SAASq0E,EAAe15F,GAEhBulB,EAAQnY,gBAEZiY,EAAK,SAAUrlB,EAAK8I,EAAM2D,WAE9B,CAGA,SAASo1F,EAAoB7hG,EAAKl6B,GAC9B,IAAKk6B,EAAIrB,eACL,OACJ,MACM4rC,EADSzkE,EAAMq5F,cACDz7B,wBAEpBne,EAAQhO,sBAAsBvX,EAAIrB,eAAgB4rC,EAAKliB,KAAOkiB,EAAK3tE,MAAQ,EAAG2tE,EAAKv2D,IACvF,CAEA,SAAS4lH,IACLr0E,EAAQ/N,uBACZ,CAEA,SAASsqF,EAAoB9hG,EAAKl6B,GAC9B,IAAKy/C,EAAQnY,eACT,OACJ,IAAKpN,EAAIrB,eACL,OACJ,MAAM0gE,EAAQv5F,EAAMw5F,QAAQ,GACvBD,GAGL95C,EAAQhO,sBAAsBvX,EAAIrB,eAAgB0gE,EAAMz7B,QAASy7B,EAAMv7B,QAC3E,CAEA,SAAS+1D,IACAt0E,EAAQnY,gBAEbmY,EAAQ/N,uBACZ,CAQA,SAASuqF,IAEL3rB,IAEA,IAAIrvF,EAAkB,GAClBE,EAAuB,GAC3B,GAAI6hB,EAAMlgB,SAAU,CAChB,MAAMhC,EAASwrF,EAAevoF,cAAcif,EAAMlgB,UAC9ChC,GAAUA,EAAOE,kBACjBC,EAAkBH,EAAOE,gBAAgBC,iBAAmB,GAC5DE,EAAuBL,EAAOE,gBAAgBG,sBAAwB,GAE9E,CAEoC,IAAhCA,EAAqBrsB,QAAgBkuC,EAAMpK,aAC3CzX,EAAuB,CAAC6hB,EAAMpK,aAGlC6mB,EAAQhP,qBAAqB,CACzB3tB,SAAUkgB,EAAMlgB,UAAY,GAC5B7B,kBACAE,wBACD,CAACywG,EAAWC,KACX,GAAI7uF,EAAMlgB,SAAU,CAEhB,MAAMhC,EAASwrF,EAAevoF,cAAcif,EAAMlgB,UAC9ChC,GACAwrF,EAAezpF,aAAamgB,EAAMlgB,SAAU,CACxC9B,gBAAiB,IACVF,EAAOE,gBACVC,gBAAiB2wG,EACjBzwG,qBAAsB0wG,IAItC,GAER,CAOA,SAASprB,EAAclvF,GACnB,OAAOA,EAAK3P,WAAW,OAAS2P,EAAKpV,SAAS,OAClD,CACA,OArDA,IAAAsrE,aAAY,KACJhuB,EAAQnY,gBACRmY,EAAQjO,uBAEZiO,EAAQ/N,2BAyCZ,IAAA/2B,OAAM,IAAMqoB,EAAMluB,QAASA,IACnBA,IACAwmH,EAAsBt9H,MAAQ,QAM/B,CAACuwD,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,uCACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,CACvB5xD,OAAO,oBAAgB,CAAC,sCAAuC,CAAE,oBAAqB88E,EAAiBx9H,UACxG,EACC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,OAAQ,GAAY,CACnCo1B,EAASp1B,OAAOuZ,OACV,kBAAc,wBAAoB,OAAQ,GAAY,CACpDkvF,EAAcrzE,EAASp1B,MAAMuZ,QACvB,kBAAc,wBAAoB,IAAK,CACtCxU,IAAK,EACL27C,OAAO,oBAAgBtrB,EAASp1B,MAAMuZ,OACvC,KAAM,MACN,kBAAc,wBAAoB,OAAQ,IAAY,qBAAiB6b,EAASp1B,MAAMuZ,MAAO,QAEtG,wBAAoB,QAAQ,IAClC,qBAAiB,KAAM,qBAAiB6X,EAAapxB,OAAQ,MAEjE,wBAAoB,SAAU,CAC1B0gD,MAAO,iBACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,SAEP,wBAAoB,UACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,eACnBkrB,EAAsB,QAChB,kBAAc,wBAAoB,MAAO,GAAY,EACpD,wBAAoB,gBACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,iBACpB,wBAAoB,MAAO,CACvB98E,OAAO,oBAAgB,CAAC,gBAAiB,CAAEwQ,OAAwC,OAAhCosE,EAAsBt9H,SACzEmxD,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,GAAYitE,EAAkB,MAAQ,CAAC,WAC3F,CACCttE,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,iBAAmB,MAAO,IACzF8P,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,kBAAoB,MAAO,KAC1F,wBAAoB,OAAQ,IAAY,qBAAiB+8E,EAAaz9H,OAAQ,IAC/E,IACH,wBAAoB,aACnB,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYu9H,EAAcv9H,MAAQ29H,KAC9E,kBAAc,wBAAoB,MAAO,CAC7C54H,IAAK44H,EAAOxnI,GACZuqD,OAAO,oBAAgB,CAAC,gBAAiB,CAAEwQ,OAAQosE,EAAsBt9H,QAAU29H,EAAOxnI,MAC1Fg7D,SAAS,mBAAgBN,GAAYitE,EAAkBH,EAAOxnI,IAAM,CAAC,UACtE,CACEwnI,EAAW,OACL,kBAAc,wBAAoB,OAAQ,GAAa,CACrDl1B,EAAck1B,EAAOpkH,QACf,kBAAc,wBAAoB,IAAK,CACtCxU,IAAK,EACL27C,OAAO,oBAAgBi9E,EAAOpkH,OAC/B,KAAM,MACN,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiBokH,EAAOpkH,MAAO,SAE9F,kBAAc,wBAAoB,OAAQ,GAAa,IAAKi3C,EAAO,KAAOA,EAAO,GAAK,EACjF,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,SAExE,wBAAoB,OAAQ,IAAa,qBAAiBg9E,EAAmBC,IAAU,IACvF,wBAAoB,OAAQ,IAAa,qBAAiBC,EAAuBD,EAAOxnI,KAAM,IAC/F,GAAuB,MAC1B,SAER,wBAAoB,cACpB,wBAAoB,MAAO,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYq/H,EAAcx1H,MAAQk8B,KAC9E,kBAAc,wBAAoB,SAAU,CAChDn3B,IAAKm3B,EAAI/lC,GACTuqD,OAAO,oBAAgB,CAAC,cAAe,CAAE,gBAAgB,WAAOe,GAASnY,kBACzE6nB,SAAS,mBAAgBN,GAAY+kE,EAAe15F,GAAO,CAAC,SAC5D+5F,aAAeplE,GAAYktE,EAAoB7hG,EAAK20B,GACpDgiC,aAAcijC,EACdhjC,oBAAsBjiC,GAAYmtE,EAAoB9hG,EAAK20B,GAC3DkiC,WAAYgjC,EACZG,cAAeH,IAChB,qBAAiB75F,EAAI1iB,OAAQ,GAA6C,MAC7E,OACJ,wBAAoB,SACY,IAA/Bg8G,EAAcx1H,MAAMlJ,SACd,kBAAc,wBAAoB,MAAO,GAAa,IAAK05D,EAAO,KAAOA,EAAO,GAAK,EAChF,wBAAoB,IAAK,CAAE9P,MAAO,cAAgB,MAAO,IACzD,wBAAoB,OAAQ,KAAM,QAAS,SAEjD,wBAAoB,QAAQ,UAGvC,kBAAc,wBAAoB,WAAW,CAAE37C,IAAK,GAAK,EACxD,wBAAoB,oBACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,MAAO,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYq7C,EAAQpgD,MAAQk8B,KACxE,kBAAc,wBAAoB,SAAU,CAChDn3B,IAAKm3B,EAAI/lC,GACTuqD,OAAO,oBAAgB,CAAC,cAAe,CAAE,gBAAgB,WAAOe,GAASnY,kBACzE6nB,SAAS,mBAAgBN,GAAY+kE,EAAe15F,GAAO,CAAC,SAC5D+5F,aAAeplE,GAAYktE,EAAoB7hG,EAAK20B,GACpDgiC,aAAcijC,EACdhjC,oBAAsBjiC,GAAYmtE,EAAoB9hG,EAAK20B,GAC3DkiC,WAAYgjC,EACZG,cAAeH,IAChB,qBAAiB75F,EAAI1iB,OAAQ,GAA6C,MAC7E,SAER,wBAAoB,SACM,IAAzB4mC,EAAQpgD,MAAMlJ,SACR,kBAAc,wBAAoB,MAAO,GAAa,IAAK05D,EAAO,KAAOA,EAAO,GAAK,EAChF,wBAAoB,IAAK,CAAE9P,MAAO,cAAgB,MAAO,IACzD,wBAAoB,OAAQ,KAAM,YAAa,SAErD,wBAAoB,QAAQ,MAEvC,UAEX,wBAAoB,cACpB,wBAAoB,MAAO,GAAa,EACpC,wBAAoB,SAAU,CAC1BA,MAAO,0BACPyQ,SAAS,mBAAe8sE,EAAkB,CAAC,UAC5C,IAAKztE,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,eAAiB,MAAO,IAC1D,qBAAiB,UAAW,QAEpC,wBAAoB,mCACpB,wBAAoB,SAAU,CAC1BA,OAAO,oBAAgB,CAAC,0CAA2C,CAAEwQ,QAAQ,WAAOzP,GAASnY,kBAC7F6nB,QAASX,EAAO,KAAOA,EAAO,IAAK,mBAAgBK,IAAY,WAAOpP,GAASjO,uBAAyB,CAAC,WAC1G,CACCgd,EAAO,KAAOA,EAAO,IAAK,wBAAoB,IAAK,CAAE9P,MAAO,iBAAmB,MAAO,KACtF,qBAAiB,KAAM,sBAAiB,WAAOe,GAASnY,eAAiB,OAAS,QAAS,IAC5F,MAER,OAEL,wBAAoB,QAAQ,EAE1C,IErYE,GAAa,CAAEoX,MAAO,gCACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAC,YACd,GAAa,CAAEA,MAAO,kBACtB,GAAa,CAAEA,MAAO,wBACtB,GAAa,CAAEA,MAAO,yBACtB,GAAa,CAAEA,MAAO,sBACtB,GAAa,CAAC,aACd,GAAc,CAChB37C,IAAK,EACL27C,MAAO,0BAEL,GAAc,CAAEA,MAAO,mBACvB,GAAc,CAAC,WACf,GAAc,CAAC,MAAO,OACtB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,wBAEL,GAAc,CAAEA,MAAO,mBACvB,GAAc,CAChB37C,IAAK,EACL27C,MAAO,oBCpBX,ID6B6B,qBAAiB,CAC1CM,OAAQ,mBACRhc,MAAO,CACHluB,QAAS,CAAEza,KAAM8hB,SACjB0qB,SAAU,CAAE0X,QAAS,IACrBzX,eAAgB,CAAEyX,QAAS,IAC3BxX,eAAgB,CAAE1sC,KAAM8hB,QAASoiC,SAAS,GAC1Cz7B,SAAU,CAAEy7B,QAAS,KAEzBW,MAAO,CAAC,iBAAkB,UAAW,SACrC,KAAAC,CAAMC,GAAWG,KAAMC,IACnB,MAAMxc,EAAQoc,EAERG,EAAOC,GAEP,SAAE8/B,GAAaV,MACf,aAAE75E,IAAiB,EAAA7F,GAAA,KAEnBg9H,IADU,EAAAr6F,EAAA,OACK,IAAA0lF,QAAO,cAEtBv0B,GAAc,IAAA52F,KAAI,MAClB+/H,GAAe,IAAA//H,KAAI,IACnB8vH,GAAU,IAAA9vH,KAAI,IACdggI,GAAmB,IAAAhgI,MAAI,GAgF7B,SAASk0G,IACL/wD,EAAK,kBAAkB,GACvBA,EAAK,QACT,CACA,SAAS8zD,IACL,MAAM1lG,EAASwuH,EAAan+H,MAAMwT,OAC7B7D,IAGL2xE,EAAS3xE,GAET4xC,EAAK,UAAW5xC,GAEhB2iG,IACJ,CAoBA,OAhHA,IAAA31F,OAAM,IAAMqoB,EAAMluB,QAASrY,MAAOqY,IAC1BA,IAEAqnH,EAAan+H,MAAQglC,EAAM8D,eAEvB9D,EAAM+D,gBAUlBtqC,iBACI2/H,EAAiBp+H,OAAQ,EACzB,IAEI,MAAMq+H,EAAY,IAAIvsH,IAChB6D,EAASuoH,EAAeA,IAAiB,GAC1CA,GACDl/H,QAAQc,KAAK,oDAEjBd,QAAQkP,IAAI,8CAA+CyH,EAAO7e,QAC9D6e,EAAO7e,OAAS,GAChB6e,EAAO/O,QAAQoqB,IACX,IAAI,QAAiBA,EAAMluB,KAAMkuB,EAAM76B,IAAK,CACxC6I,QAAQkP,IAAI,4CAA6C8iB,EAAMluB,MAI/D,IAAIw7H,EAFiBttG,EAAMhmB,QAAQ0J,UAAUpG,GAAK,CAAC,OAAQ,KAAM,KAAM,MAAMnK,SAASmK,EAAElJ,iBAGhE,IAApBk5H,IACAA,EAAiBttG,EAAMhmB,QAAQlU,OAAS,EAAI,EAAI,GAEpDk6B,EAAM/jB,KAAKrG,QAAQyG,IACf,MAAMmE,EAAOnE,EAAIF,MAAMnJ,KAAKkmB,GAAKA,EAAEld,WAAasxH,GAC5C9sH,GAAQA,EAAKxR,OAAS6L,OAAO2F,EAAKxR,OAAOwT,QACzC6qH,EAAUruH,IAAInE,OAAO2F,EAAKxR,OAAOwT,SAG7C,IAIR,MAAM+qH,EAAmC,oBAAjB97E,aAA+BA,aAAa,CAAEpmD,KAAM,SAAY,CAAC,EAEnFyxH,GADcyQ,EAA2B,kBAAK,CAAC,GACpBlxE,QAAU,CAAC,EAEtCmxE,QAAuBn9H,QAAQmE,IAAIoD,MAAMC,KAAKw1H,GAAW5nI,IAAIgI,MAAOqE,IACtE,MAAM+D,QAAYE,EAAajE,GACzB/H,EAAS+yH,EAAahrH,GAE5B,IAAI27H,EAAa,GACjB,GAAI1jI,GAAQ2rC,iBAAmB3rC,EAAO2rC,gBAAgB5vC,OAAS,EAC3D2nI,EAAa1jI,EAAO2rC,gBAAgBjwC,IAAKO,GAAM8L,EAAK9L,IAAID,KAAK,QAE5D,CAED0nI,GADc1jI,GAAQq1C,cAAgBttC,GACnB47H,OAAO,EAC9B,CACA,MAAO,CACH57H,OACAklH,WAAYnhH,GAAO,GACnB43H,iBAGRvQ,EAAQluH,MAAQw+H,CACpB,CACA,MAAOz/H,GACHC,QAAQC,MAAM,0BAA2BF,EAC7C,CACA,QACIq/H,EAAiBp+H,OAAQ,CAC7B,CACJ,CAtEY2+H,SAGE,IAAArgE,YACN02B,EAAYh1F,OAAOmqD,QAEnB6qC,EAAYh1F,OAAOggF,kBAAkBm+C,EAAan+H,MAAMlJ,OAAQqnI,EAAan+H,MAAMlJ,WAoGpF,CAACy5D,EAAMC,IACFpP,EAAe,UAChB,kBAAc,wBAAoB,MAAO,CACxCr8C,IAAK,EACL27C,MAAO,uCACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,EACC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,CACnC9hD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,OAAQ,CAAE9P,MAAO,mBAAqB,EAChF,wBAAoB,IAAK,CAAEA,MAAO,iBAClC,qBAAiB,aACjB,KACJ,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,SAAU,CAC1BA,MAAO,gCACPyQ,SAAS,mBAAemhD,EAAa,CAAC,UACvC,OACH,wBAAoB,SAAU,CAC1B5xD,MAAO,8BACPgf,UAAWy+D,EAAan+H,MAAMwT,OAC9B29C,SAAS,mBAAekkD,EAAe,CAAC,UACzC,IAAK7kD,EAAO,KAAOA,EAAO,GAAK,EAC1B,wBAAoB,IAAK,CAAE9P,MAAO,sBAAwB,MAAO,IACjE,qBAAiB,QAAS,MACxB,EAAe,SAGjC,wBAAoB,SACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,WACpB,wBAAoB,MAAO,GAAY,EACnC,wBAAoB,MAAO,GAAY,OAAQ,qBAAiBU,EAAQvY,UAAW,MAEvF,wBAAoB,UACpB,qBAAgB,wBAAoB,WAAY,CAC5C6nB,QAAS,cACTtyD,IAAK42F,EACL,sBAAuBxkC,EAAO,KAAOA,EAAO,GAAMK,GAAY,EAAe7wD,MAAQ6wD,GACrFnQ,MAAO,wBACPoQ,YAAa,cACbmB,UAAW,EACP,eAAU,mBAAeojD,EAAe,CAAC,SAAU,CAAC,WACpD,eAAU,mBAAeA,EAAe,CAAC,SAAU,CAAC,YAEzD,KAAM,GAAgC,IAAa,CAClD,CAAC,aAAa8oB,EAAan+H,UAE/B,wBAAoB,WACnBohD,EAAsB,iBAChB,kBAAc,wBAAoB,MAAO,GAAa,CACrDoP,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,wBAA0B,EACpF,wBAAoB,IAAK,CAAEA,MAAO,yBAClC,qBAAiB,mBACjB,KACJ,wBAAoB,MAAO,GAAa,GACnC,gBAAW,IAAO,wBAAoB,WAAW,MAAM,gBAAYwtE,EAAQluH,MAAQ4+H,KACxE,kBAAc,wBAAoB,MAAO,CAC7C75H,IAAK65H,EAAO97H,KACZ49C,MAAO,kBACPyQ,QAAUN,GAjFtD,SAA2B+tE,GACvB,MAAMC,EAAgB,IAAID,EAAO97H,OAC3Bg8H,EAAcX,EAAan+H,MAEjC,GAAI8+H,EAAY36H,SAAS,YAAa,CAElC,MACM46H,EADYD,EAAYr5B,YAAY,YACZ,EAC9B04B,EAAan+H,MAAQ8+H,EAAY5tH,MAAM,EAAG6tH,GAAaF,EAAgBC,EAAY5tH,MAAM6tH,EAC7F,MAGIZ,EAAan+H,MAAQ6+H,EAAgBC,GAGzC,IAAAxgE,UAAS,KACL02B,EAAYh1F,OAAOmqD,SAE3B,CA+DiE,CAAmBy0E,IACzC,EACC,wBAAoB,MAAO,CACvBl+E,OAAO,oBAAgB,CAAC,yBAA0B,CAAE,UAAWk+E,EAAO5W,eACvE,CACE4W,EAAiB,aACX,kBAAc,wBAAoB,MAAO,CACxC75H,IAAK,EACLb,IAAK06H,EAAO5W,WACZzJ,IAAKqgB,EAAO97H,KACZylH,QAAS,QACV,KAAM,EAAe,OACrB,kBAAc,wBAAoB,OAAQ,IAAa,qBAAiBqW,EAAOH,YAAa,KACpG,IACH,wBAAoB,OAAQ,IAAa,qBAAiBG,EAAO97H,MAAO,IACzE,EAAe,MAClB,MACsB,IAAzBorH,EAAQluH,MAAMlJ,QAAiBsnI,EAAiBp+H,OAE3C,wBAAoB,QAAQ,KAD3B,kBAAc,wBAAoB,MAAO,GAAa,iBAInE,wBAAoB,QAAQ,IAClC,wBAAoB,QACpBwwD,EAAO,KAAOA,EAAO,IAAK,wBAAoB,MAAO,CAAE9P,MAAO,qBAAuB,EACjF,wBAAoB,IAAK,CAAEA,MAAO,sBAClC,wBAAoB,OAAQ,KAAM,uBAClC,cAKlB,wBAAoB,QAAQ,EAE1C,IEtQJ,ICD6B,qBAAiB,CAC1CM,OAAQ,oBACR,KAAAG,CAAMC,GACF,MAAMK,GAAU,EAAA5d,EAAA,MAGVm7F,GAAe,IAAAnxH,UAAS,KAC1B,MAAM,EAAEjV,EAAC,EAAEC,GAAM4oD,EAAQlY,kBAEnBkqE,EAAgB/vG,OAAOC,QAAQo+E,YAAcr+E,OAAOq+E,WAI1D,IAAIx9B,EAAO3rD,EAQX,OAPI2rD,EAAO06E,IAAqBxrB,EAAgB,KAC5ClvD,EAAOkvD,EAAgBwrB,IAAqB,IAE5C16E,EAAO06E,IAAqB,KAC5B16E,EAAO06E,KAGJ,CACH16E,KAAM,GAAGA,MACTr0C,IAAQrX,EAAI,GAAP,QAGb,MAAO,CAAC03D,EAAMC,KACF,WAAO/O,GAASlY,kBAAyB,UAC1C,kBAAc,wBAAoB,MAAO,CACxCxkC,IAAK,EACL27C,MAAO,0BACPlV,OAAO,oBAAgBwzF,EAAah/H,SACrC,sBAAiB,WAAOyhD,GAASlY,kBAAkB5yC,SAAU,KAC9D,wBAAoB,QAAQ,EAE1C,ICFJ,IAA6B,qBAAiB,CAC1CqqD,OAAQ,MACR,KAAAG,CAAMC,GAMF,MAAM89E,GAAoB,IAAAC,sBAAqB,CAC3CC,OAAQ,IAAM,uCACdC,iBAAkB,CACdj8G,SAAU,gJAOdyP,MAAO,MAGL4uB,GAAU,EAAA5d,EAAA,MACVw0C,GAAY,EAAA/xD,EAAA,KACZgoF,GAAiB,EAAA/rF,GAAA,KACjBme,GAAc,EAAAxkB,EAAA,MACdgoF,GAAkB,EAAAjpE,GAAA,KAClBmY,GAAkB,EAAA5jB,GAAA,MAIhB4/C,KAAMkwD,EAAYt2H,QAASu2H,GAAkB1yD,KAC/C,eAAEthD,EAAc,aAAEm0B,EAAcxzB,gBAAiBszG,EAAsB,aAAErhD,GAAiB5D,MACxFtiD,QAASwnG,GAAuBxsD,KAChCp8D,MAAO6oH,IAAe,EAAApoH,EAAA,MACxB,SAAEgqE,GAAaV,MACf,gBAAEpC,EAAe,mBAAEE,EAAkB,qBAAEC,GAAyBgC,MAChE,kBAAEztD,EAAiB,kBAAEgsE,EAAiB,mBAAEE,GAAuB1B,MClDtE,WAEL,MAAMxP,GAAS,IAAA9vF,KAAI,GACb+vF,GAAS,IAAA/vF,KAAI,GAGnB,IAAIuhI,EAAsD,KACtDC,EAAqD,KAMzD,SAAShqC,EAAiB72F,GACxB,MAAMkD,EAASlD,EAAEkD,OAGjB,IAAKA,EAAOo+E,UAAU,6CACpB,OAGF,MAAMkb,EAAQx8F,EAAEy8F,QAAQ,GACxBtN,EAAOluF,MAAQu7F,EAAMz7B,QACrBquB,EAAOnuF,MAAQu7F,EAAMv7B,OACvB,CAMA,SAAS61B,EAAgB92F,GACvB,MAAMkD,EAASlD,EAAEkD,OAGjB,IAAKA,EAAOo+E,UAAU,6CACpB,OAIF,GAAuB,UAAnBp+E,EAAOg3D,SAA0C,aAAnBh3D,EAAOg3D,SAA2Bh3D,EAAuB49H,kBACzF,OAKF,IAAI15E,EAA2BlkD,EAC3B69H,GAAoB,EAExB,KAAO35E,GAAQA,EAAKyoB,YAAczoB,EAAKyoB,UAAUvsE,SAAS,sBAAsB,CAE9E,GAAI8jD,EAAKhZ,aAAegZ,EAAKqhB,aAAc,CACzC,MAAMh8B,EAAQ9nC,OAAO6/C,iBAAiB4C,GACtC,GAAI,CAAC,OAAQ,UAAUhiD,SAASqnC,EAAM64B,WAAY,CAEhDy7D,GAAoB,EACpB,KACF,CACF,CACA35E,EAAOA,EAAKygC,aACd,CAGA,GAAIk5C,EACF,OAIF,MAAMvkC,EAAQx8F,EAAEy8F,QAAQ,GAClBrY,EAAKoY,EAAMz7B,QAAUouB,EAAOluF,MAC5BqjF,EAAKkY,EAAMv7B,QAAUmuB,EAAOnuF,MAI9BiS,KAAKmxE,IAAIC,GAAMpxE,KAAKmxE,IAAID,IACtBpkF,EAAE6lF,YACJ7lF,EAAE0/D,gBAGR,CAKA,SAASshE,IACP,MAAMC,EAAOt8H,OAAOC,QAAQipC,SACvBozF,GAMLL,EAAoB/pC,EACpBgqC,EAAmB/pC,EAInBmqC,EAAK9oE,iBAAiB,aAAcyoE,EAAmB,CAAEjoE,SAAS,EAAMM,SAAS,IACjFgoE,EAAK9oE,iBAAiB,YAAa0oE,EAAkB,CAAEloE,SAAS,EAAMM,SAAS,IAE/Eh5D,QAAQe,KAAK,mCAbXf,QAAQc,KAAK,mCAcjB,CAKA,SAASmgI,IACP,MAAMD,EAAOt8H,OAAOC,QAAQipC,SACvBozF,IAEDL,IACFK,EAAK7oE,oBAAoB,aAAcwoE,EAAmB,CAAEjoE,SAAS,IACrEioE,EAAoB,MAGlBC,IACFI,EAAK7oE,oBAAoB,YAAayoE,EAAkB,CAAEloE,SAAS,IACnEkoE,EAAmB,MAGrB5gI,QAAQe,KAAK,mBACf,EAGA,IAAAiwD,WAAU,KACR+vE,OAGF,IAAAtwD,aAAY,KACVwwD,KAQJ,CDpFQC,GAEA9nD,KAGA8N,KAEA,MAAMi6C,EAAmBz8C,KAKnB08C,GAAkB,IAAAhiI,OAClBiiI,GAAe,IAAAjiI,OACfkiI,GAAuB,IAAAliI,QAK7B,IAAA0tH,SAAQ,YAAa,IAAMyU,EAAgBvgI,OAK3C,MAAMukC,GAAa,IAAAnmC,KAAI,IAEjBsmC,GAAkB,IAAAtmC,MAAI,GAGtBoiI,GAAmB,IAAAniI,UAAS,CAC9ByY,SAAS,EACTle,EAAG,EACHC,EAAG,EACH4e,QAAS,GACTrL,UAAW,GACXQ,SAAU,EACV0rF,YAAY,IAMVmoC,GAAa,IAAA5yH,UAAS,IAAM,CAC9B,aAAa6yB,EAAY3lC,OAAOsC,QAChC,YAAYqjC,EAAY3lC,OAAO0e,WAAW7B,QAAQ,OAAQ,KAAKxS,gBAC/D,CACI,aAAcq8C,EAAQ9c,SACtB,wBAAuD,eAA9BjE,EAAY3lC,OAAO5B,OAC5C,sBAAqD,aAA9BunC,EAAY3lC,OAAO5B,OAC1C,mBAAoBunC,EAAY3lC,OAAOggB,qBAIzC0wG,GAAa,IAAA59G,UAAS,IACpB4zC,EAAQvoD,YAAc,KACf,UACPuoD,EAAQvoD,YAAc,KACf,WACJ,SAASuoD,EAAQvoD,WAAa,WAGnCqnI,GAAkB,IAAA1yH,UAAS,KAC7B,MAAM0xG,EAASlnC,EAAU9xD,WACzB,IAAKg5F,EACD,MAAO,GAIX,MAAM70F,GAAY,QAAgB60F,GAClC,OAAK70F,EAEErrB,OAAOsN,QAAQ+d,GAAWj0B,IAAI,EAAE2V,EAAWF,MAC9C,MAAQnH,IAAKgP,EAAO,QAAE/I,EAASiC,KAAMyzH,GAAYx0H,EAE3Ce,EAAOyzH,EAAQjqI,IAAI,CAACqxB,EAASlb,KAE/B,MAAMO,EAAQ2a,EAAQrxB,IAAI,CAACqe,EAAW9H,KAAa,CAC/CA,WACAjI,IAAKiG,EAAQgC,IAAa,OAAOA,IACjChN,MAAO6L,OAAOiJ,GAAa,OAE/B,MAAO,CACHvJ,MAAOqB,EACP7H,IAAK,GAAGqH,SAAiBQ,IACzBO,WAGR,MAAO,CACHhX,GAAI4d,EACJjR,KAAMsJ,EACNpB,QAASA,EAAQvU,IAAI6X,GAAKzC,OAAOyC,IACjCrB,UArBG,KA0BT0zH,GAAU,IAAA9yH,UAAS,IACd0yH,EAAgBvgI,MAAMvJ,IAAIu6B,IAAS,CACtC76B,GAAI66B,EAAM76B,GACV2M,KAAMkuB,EAAMluB,KACZyW,KAAMg2F,GAAav+E,EAAMluB,UAI3BqwF,GAAiB,IAAAtlF,UAAS,IACrB0yH,EAAgBvgI,MAAM+X,KAAKwb,GAAKA,EAAEzwB,KAAKqB,SAAS,OAASovB,EAAEzwB,KAAKsC,cAAcjB,SAAS,YAG5Fy8H,GAAoB,IAAA/yH,UAAS,KACc,IAAtC6yB,EAAY3lC,OAAO4f,gBAGxBkmH,GAAgB,IAAAhzH,UAAS,IACpB0yH,EAAgBvgI,MAAM8H,OAAOyrB,GAAKA,EAAEzwB,KAAKqB,SAAS,OAASovB,EAAEzwB,KAAKsC,cAAcjB,SAAS,YAG9F28H,GAAsB,IAAAjzH,UAAS,IAC1B0yH,EAAgBvgI,MAAM+X,KAAKwb,IAAK,QAAiBA,EAAEzwB,KAAMywB,EAAEp9B,MAKhE4qI,GAAwB,IAAAlzH,UAAS,IAC3B0yH,EAAgBvgI,MAAMgE,KAAKuvB,IAC/B,MAAMzwB,EAAOywB,EAAEzwB,KAAKsC,cACdjP,EAAKo9B,EAAEp9B,GAAGiP,cAChB,OAAOtC,EAAKqB,SAAS,OAAShO,EAAGgO,SAAS,iBAAmBhO,EAAGgO,SAAS,eACvE,MAKJ68H,GAAsB,IAAAnzH,UAAS,IAC1B0yH,EAAgBvgI,MAAM8H,OAAOyrB,IAAK,QAAiBA,EAAEzwB,KAAMywB,EAAEp9B,MAKlE8qI,GAAmB,IAAApzH,UAAS,KAC9B,MAAM0V,EAAW,CAAC,KAAM,UAAW,KAAM,eAAgB,KAAM,KAAM,KAAM,KAAM,MACjF,OAAQg9G,EAAgBvgI,MAAMgE,KAAKuvB,IAC/B,MAAMzwB,EAAOywB,EAAEzwB,KAAKsC,cACdjP,EAAKo9B,EAAEp9B,GAAGiP,cAChB,OAAOme,EAASxL,KAAK0iB,GAAM33B,EAAKqB,SAASs2B,IAAOtkC,EAAGgO,SAASs2B,OAC1D,OA2BJymG,KArBc,IAAArzH,UAAS,KACzB,MAAMu4B,EAAW,IAAIt0B,IAErB,IAAK,MAAMkf,KAASgwG,EAAoBhhI,MAAO,CAE3C,MAAMmhI,EAAkBnwG,EAAMhmB,QAAQ0J,UAAUpG,IAC5C,MAAM8yH,EAAQ9yH,EAAElJ,cAChB,OAAOg8H,EAAMj9H,SAAS,OAASi9H,EAAMj9H,SAAS,OAASi9H,EAAMj9H,SAAS,aAE1E,GAAIg9H,GAAmB,EACnB,IAAK,MAAM9zH,KAAO2jB,EAAM/jB,KAAM,CAC1B,MAAMuE,EAAOnE,EAAIF,MAAMnJ,KAAKkmB,GAAKA,EAAEld,WAAam0H,GAC5C3vH,GAAQA,EAAKxR,OAAS6L,OAAO2F,EAAKxR,OAAOwT,QACzC4yB,EAASp2B,IAAInE,OAAO2F,EAAKxR,OAAOwT,OAExC,CAER,CACA,OAAO5K,MAAMC,KAAKu9B,MAGD,IAAAv4B,UAAS,IACrB4zC,EAAQvoD,WAENqnI,EAAgBvgI,MAAMgE,KAAKuvB,GAAKA,EAAEp9B,KAAOsrD,EAAQvoD,YAD7C,OAITmoI,IAAoB,IAAAxzH,UAAS,KAC/B,MAAM,QAAE4J,EAAO,SAAE7K,GAAa60C,EAAQ1c,cAAcC,MACpD,IAAKvtB,EACD,OAAO,KACX,MAAMuZ,EAAQuvG,EAAgBvgI,MAAMgE,KAAKuvB,GAAKA,EAAEp9B,KAAOshB,GACvD,OAAKuZ,EAGDpkB,EAAW,GAAKA,GAAYokB,EAAM/jB,KAAKnW,OAChC,KACJk6B,EAAM/jB,KAAKL,GAJP,OAOT00H,IAAqB,IAAAzzH,UAAS,IAEzB,GAGL0zH,IAAgB,IAAA1zH,UAAS,KAE3B,MAAMsC,EAAOzM,OAAO/E,aAAawR,KACjC,OAAOvH,MAAMwL,QAAQjE,GAAQA,EAAKrZ,OAAS,EAAI,IAMnD,SAASy4G,GAAanjG,GAElB,MAAMtJ,EAAOsJ,EAAUhH,cACvB,GAAItC,EAAKqB,SAAS,OAASrB,EAAKqB,SAAS,UACrC,MAAO,cACX,GAAIrB,EAAKqB,SAAS,OAASrB,EAAKqB,SAAS,SACrC,MAAO,eACX,GAAIrB,EAAKqB,SAAS,OAASrB,EAAKqB,SAAS,QACrC,MAAO,kBACX,GAAIrB,EAAKqB,SAAS,OAASrB,EAAKqB,SAAS,SACrC,MAAO,oBACX,GAAIrB,EAAKqB,SAAS,OAASrB,EAAKqB,SAAS,UACrC,MAAO,eACX,GAAIrB,EAAKqB,SAAS,OAASrB,EAAKqB,SAAS,SACrC,MAAO,sBACX,GAAIrB,EAAKqB,SAAS,OAASrB,EAAKqB,SAAS,UACrC,MAAO,mBAEX,MAAMq9H,GAAY,QAAgBp1H,GAClC,MAAkB,iBAAdo1H,EACOA,EAEJ,cACX,CAmBA,SAASC,KACLhgF,EAAQlV,aACRvtC,QAAQe,KAAK,cACjB,CAEA,SAAS2hI,KACLh9F,EAAgB1kC,OAAS0kC,EAAgB1kC,KAC7C,CAEA,SAAS2hI,KACLlgF,EAAQzoD,aAAc,EACtBgG,QAAQe,KAAK,kBACjB,CAKA,SAAS6hI,GAAgB9zF,GAEjBA,GAASuyF,EAAargI,OACtBqgI,EAAargI,MAAMmxF,mBAGvB,MAAM0wC,EAAaxB,EAAargI,OAAOixF,qBACnC4wC,IACAA,EAAWr2F,MAAML,OAAS,GAC1B02F,EAAWr2F,MAAMskD,UAAY,GAC7B+xC,EAAWr2F,MAAM4B,UAAY,IAEjCqU,EAAQ1W,aAAa+C,GACrBvJ,EAAWvkC,MAAQ,GAEnB0kC,EAAgB1kC,OAAQ,EACxBhB,QAAQe,KAAK,kBAAkB+tC,MAG/B,IAAAwwB,UAAS,KAELnnD,WAAW,KACP8qD,sBAAsB,KAClB6/D,GAAmBh0F,MAExB,KAEX,CAKA,SAASg0F,GAAmBh0F,GACxB,MAAM+zF,EAAaxB,EAAargI,OAAOixF,qBACvC,IAAK4wC,EACD,OACJ,MAAME,EAActgF,EAAQnW,eAAewC,GACvCi0F,GAEAF,EAAWr2F,MAAML,OAAS,GAAG42F,MAC7B/iI,QAAQe,KAAK,eAAe+tC,OAAWi0F,QAIvC1B,EAAargI,OAAOoxF,aAE5B,CAEA,SAAS4wC,GAAkBv8G,GACvBg8B,EAAQxW,cAAcxlB,GACtBzmB,QAAQe,KAAK,kBACjB,CAEA,SAASkiI,KACLxgF,EAAQ1P,kBACR/yC,QAAQe,KAAK,iBAAgB0hD,EAAQvZ,UAAY,KAAO,MAC5D,CAEA,SAASg6F,GAAqBp0F,GAC1B2T,EAAQ3P,iBACR8vF,GAAgB9zF,EACpB,CAKA,SAASq0F,GAAsB1qH,GAE3B,MAAMoqH,EAAaxB,EAAargI,OAAOixF,qBACnC4wC,IACAA,EAAWr2F,MAAML,OAAS,GAC1B02F,EAAWr2F,MAAMskD,UAAY,GAC7B+xC,EAAWr2F,MAAM4B,UAAY,IAEjCqU,EAAQ1W,aAAatzB,GACrBzY,QAAQe,KAAK,gBAAgB0X,MAE7B,IAAA6mD,UAAS,KACLnnD,WAAW,KACP8qD,sBAAsB,KAClB6/D,GAAmBrqH,MAExB,KAEX,CAEA,SAAS2qH,KACDtB,EAAoB9gI,OACpByhD,EAAQ1W,aAAa,MACrB/rC,QAAQe,KAAK,qBAGb,EAAAwX,MAAMF,QAAQ,YAEtB,CAEA,SAASgrH,KAED/B,EAAqBtgI,OACrBsgI,EAAqBtgI,MAAMswD,mBAEnC,CAEA,SAASgyE,KACL7gF,EAAQvQ,qBAAqBowF,GAAmBthI,MACpD,CAEA,SAASuiI,KACL9gF,EAAQrQ,qBAAqBmwF,GAAcvhI,MAC/C,CAEA,SAASwiI,GAAsB/1C,EAAUh1E,GACrC,OAAQg1E,GACJ,IAAK,QAED81C,KACA,MACJ,IAAK,OAEDE,KACA,MACJ,IAAK,eAEDC,KACA,MACJ,IAAK,UAEDjhF,EAAQzQ,qBACR,MACJ,IAAK,cAEDouD,IACA,MACJ,QACIpgG,QAAQkP,IAAI,0BAA2Bu+E,EAAUh1E,GAE7D,CAEA,SAASkrH,KAELf,GAAgB,MAChB5iI,QAAQe,KAAK,cACjB,CAwCA,SAAS6iI,GAAwB1mG,EAAKyM,GAElC,IAAIh5B,EAAS9D,OAAOqwB,EAAIrB,gBAAkB,IAE1ClrB,EAASA,EAAOiI,QAAQ,kBAAmBskB,EAAI1iB,OAG3C7J,EADAg5B,GAAYrlB,MACH3T,EAAOiI,QAAQ,qBAAsB+wB,EAAWrlB,OAGhD3T,EAAOiI,QAAQ,qBAAsB,IAGlD,MAAMtS,EA0BV,WACI,MAAM65E,EAAYz7E,OAAOC,QAAUD,OACnC,IACI,MAAMc,EAAM26E,EAAUxgF,aAAa4F,eACnC,GAAIC,GAAK+lG,MACL,OAAO/lG,EAAI+lG,KAEnB,CACA,MAAOxrG,GACHC,QAAQc,KAAK,gBAAiBf,EAClC,CACA,MAAO,UACX,CAtCuBkrG,GACnBt6F,EAASA,EAAOiI,QAAQ,uBAAwBtS,GAEhDqK,EAASA,EAAOiI,QAAQ,sBAAuB,IAC/C,MAAMkxB,EAAiBn5B,EAAO6D,OAExB4hB,EAAW8uE,EAAgBloE,gBAAgBE,EAAItB,YAC/CwvE,IAAah1E,IAAWA,EAAS5E,KAAKrsB,SAAS,OAASixB,EAAS5E,KAAKrsB,SAAS,aAGjF+3B,EAAIpB,cAAgBsvE,EAEpB3oD,EAAQlP,qBAAqB,CACzB1J,SAAU3M,EAAI1iB,MACdsvB,iBACAC,eAAgBqhE,IAGfthE,GAELw4C,EAASx4C,EAEjB,CAkBA,SAASmnE,GAAsBjuG,EAAO6gI,GAElC,MAAMhB,EAAaxB,EAAargI,OAAOixF,qBACvC,IAAK4wC,IAAegB,EAChB,OAEJ,GAAqB,IAAjB7gI,EAAMy9D,OACN,OACJz9D,EAAMy8D,iBACNz8D,EAAM08D,kBAENmkE,EAASC,kBAAkB9gI,EAAM+gI,WACjC,MAAM50C,EAASnsF,EAAMg+D,QACfgjE,EAAcnB,EAAW/6D,aACzBynB,EAAqBC,IACvB,MAAMnL,EAAK8K,EAASK,EAAMxuB,QAC1B,IAAI3yB,EAAY21F,EAAc3/C,EAG9Bh2C,EAAYp7B,KAAKwP,IADC,IACc4rB,GAChCw0F,EAAWr2F,MAAML,OAAS,GAAGkC,OAE3BshD,EAAmBs0C,IACrBJ,EAASK,sBAAsBD,EAAIF,WACnCF,EAAS1rE,oBAAoB,cAAeo3B,GAC5Cs0C,EAAS1rE,oBAAoB,YAAaw3B,GAE1C,MAAMw0C,EAAiB1hF,EAAQvoD,UAC/B,GAAIiqI,GAAkBtB,EAAY,CAC9B,MAAMvwC,EAAcuwC,EAAW/6D,aAC/BrlB,EAAQvW,eAAei4F,EAAgB7xC,GACvCtyF,QAAQe,KAAK,eAAeojI,OAAoB7xC,MACpD,GAEJuxC,EAAS3rE,iBAAiB,cAAeq3B,GACzCs0C,EAAS3rE,iBAAiB,YAAay3B,EAC3C,CAEA,SAASuhB,KAEL,MAAMizB,EAAiB1hF,EAAQvoD,UAC3BiqI,IACA1hF,EAAQrW,iBAAiB+3F,GACzBnkI,QAAQe,KAAK,iBAAiBojI,MAElC9C,EAAargI,OAAOoxF,cACpBpyF,QAAQe,KAAK,kBACjB,CAKAtB,eAAei4G,KACX,MAAMz+G,EAAOynD,IACb,GAAIznD,EAAM,CACN,MAAMshF,EAAgBlB,EAAUztD,cAAc3yB,GAC9CogF,EAAUxnE,aAAa0oE,GAEvB,MAAM6pD,EAAc/jI,OAAOiN,KAAKrU,GAAM6P,OAAOtQ,GAAKA,EAAEoS,WAAW,WAI/D0kG,EAAetoF,sBAAsBo9G,GAErC/qD,EAAUtwD,cAAa,GAGvBumF,EAAe9qF,uBAAuBiK,MAAMC,IACxC1uB,QAAQc,KAAK,uBAAwB4tB,KAIzC+xG,IAAqBhyG,MAAMC,IACvB1uB,QAAQc,KAAK,yBAA0B4tB,IAE/C,CACJ,CAEAjvB,eAAe6jG,KACX,UACUoU,KACN13G,QAAQe,KAAK,cACjB,CACA,MAAOd,GACHD,QAAQC,MAAM,cAAeA,EACjC,CACJ,CAEAR,eAAeg3F,KACX,IAEIpd,EAAU9pD,sBAEYhD,EAAe,MAAM,GAAO,KAE9CvsB,QAAQe,KAAK,qBAEP22G,KAEd,CACA,MAAOz3G,GACHD,QAAQC,MAAM,cAAeA,EACjC,CACJ,CAEA,SAASwjI,KACL,IAAKpqD,EAAUjxD,YAEX,YADA,EAAA7P,MAAMF,QAAQ,YAKFghE,EAAU5pD,kBAEtB,EAAAlX,MAAM7W,QAAQ,uBACd1B,QAAQe,KAAK,yCAA0Cs4E,EAAUlxD,oBAGjE,EAAA5P,MAAMtY,MAAM,OAEpB,CAEA,SAASg+F,GAAgBxlF,EAAS7K,EAAUI,GACxChO,QAAQe,KAAK,gBAAgB0X,KAAW7K,MAAaI,KACzD,CAEA,SAASw2F,GAAe/rF,EAASpK,GAC7BrO,QAAQe,KAAK,cAAc0X,KAAWpK,EAAI9B,SAC9C,CAEA9M,eAAeq1G,GAAgBr8F,EAASwV,GACpCjuB,QAAQe,KAAK,cAAc0X,SAAewV,QAG1C,IADcszG,EAAgBvgI,MAAMgE,KAAKuvB,GAAKA,EAAEp9B,KAAOshB,GAGnD,YADAzY,QAAQc,KAAK,eAAgB2X,GAIjC,MAAM,UAAEuV,GAAc4zD,WAChB5zD,EAAUvV,EAASwV,SAEnBypF,IACV,CAEA,SAAS2sB,GAAmB5rH,EAAS7K,GAEjC,MAAMokB,EAAQuvG,EAAgBvgI,MAAMgE,KAAKuvB,GAAKA,EAAEp9B,KAAOshB,GAEjD1M,EAAS,GADGimB,GAAOluB,MAAQ2U,SACE7K,IACnCyrE,EAAU/uD,aAAave,GACvB/L,QAAQe,KAAK,iBAAiBgL,IAClC,CAKA,SAASsyF,GAAkBr7F,EAAOyV,EAAS7K,GAEvC,MAAMokB,EAAQuvG,EAAgBvgI,MAAMgE,KAAKuvB,GAAKA,EAAEp9B,KAAOshB,GACjDrL,EAAY4kB,GAAOluB,MAAQ2U,EAC3B1M,EAAS,GAAGqB,SAAiBQ,IACnC4zH,EAAiB1pH,SAAU,EAC3B0pH,EAAiB5nI,EAAIoJ,EAAM89D,QAC3B0gE,EAAiB3nI,EAAImJ,EAAMg+D,QAC3BwgE,EAAiB/oH,QAAUA,EAC3B+oH,EAAiBp0H,UAAYA,EAC7Bo0H,EAAiB5zH,SAAWA,EAC5B4zH,EAAiBloC,WAAajgB,EAAU1xD,eAAe9jB,IAAIkI,EAC/D,CAEA,SAASu4H,KACLxvB,GAAgB0sB,EAAiB/oH,QAAS+oH,EAAiB5zH,UAC3D4zH,EAAiB1pH,SAAU,CAC/B,CAEA,SAASysH,KACL,MAAMvyG,EAAQuvG,EAAgBvgI,MAAMgE,KAAKuvB,GAAKA,EAAEp9B,KAAOqqI,EAAiB/oH,SAClEpK,EAAM2jB,GAAO/jB,KAAKuzH,EAAiB5zH,UACzC,GAAIS,EAAK,CACL,MAAMkrC,EAAOlrC,EAAIF,MAAM1W,IAAIyzB,GAAK,GAAGA,EAAEnlB,QAAQmlB,EAAElqB,SAASjJ,KAAK,MAC7Dq8D,UAAUuH,UAAUK,UAAUziB,GAAM/qB,KAAK,KACrCxuB,QAAQe,KAAK,gBAErB,CACAygI,EAAiB1pH,SAAU,CAC/B,CAEA,SAAS0sH,KACLH,GAAmB7C,EAAiB/oH,QAAS+oH,EAAiB5zH,UAC9D4zH,EAAiB1pH,SAAU,CAC/B,CAEA,SAAS2sH,KACLJ,GAAmB7C,EAAiB/oH,QAAS+oH,EAAiB5zH,UAC9D4zH,EAAiB1pH,SAAU,CAC/B,CAKA,SAASu8G,GAAkB57G,EAASrL,EAAWQ,EAAUkb,GAErD,MAAMkJ,EAAQuvG,EAAgBvgI,MAAMgE,KAAKuvB,GAAKA,EAAEp9B,KAAOshB,GACvD,IAAI6tB,EAAgB,EACpB,GAAItU,IAAU5kB,EAAUjI,SAAS,OAASiI,EAAUjI,SAAS,OAAQ,CACjE,MAAM+G,EAAM8lB,EAAMhmB,QAAQ0J,UAAUpG,GAAKA,IAAMA,EAAEnK,SAAS,OAASmK,EAAEnK,SAAS,OAASmK,EAAEnK,SAAS,QAClGmhC,EAAgBp6B,EAAM,EAAIA,EAAM,CACpC,CACAu2C,EAAQ9P,kBAAkB,CACtBl6B,UACArL,YACAQ,WACAq4B,eAAgBnd,EAChBwd,kBAEJtmC,QAAQe,KAAK,iBAAiBqM,KAAaQ,qBAA4B04B,IAC3E,CAEA7mC,eAAeilI,GAAmBvV,GAC9B,MAAM,QAAE12G,EAAO,UAAErL,EAAS,SAAEQ,EAAQ,eAAEq4B,GAAmBwc,EAAQxZ,cAAcjD,MAC/E,IAAKC,GAAmC,IAAjBkpF,EAAQ7xH,KAE3B,YADAmlD,EAAQ7P,qBAIZ,MAAM,aAAE/gC,EAAY,iBAAExG,IAAqB,EAAAsG,EAAA,KAC5BtG,YAELwG,EAAazE,EAAWQ,EAWtC,SAAyBS,GACrB,MAAMF,EAAQ,CAAC,EAIf,OAHAE,EAAIF,MAAMvG,QAAQ,CAAC4K,EAAMjG,KACrB4B,EAAM5B,GAASM,OAAO2F,EAAKxR,SAExBmN,CACX,CAjBgDsE,CAAgBwzB,GAAiB,UACzEjmC,QAAQe,KAAK,yBAGjB,IAAK,MAAOiN,EAAUhN,KAAUmuH,EAC5B91C,EAAUnrD,WAAW9gB,EAAWQ,EAAUI,EAAUhN,EAAO,CAAEqtB,aAAa,IAE9EruB,QAAQe,KAAK,iBAAiBouH,EAAQ7xH,aACtCmlD,EAAQ7P,oBACZ,CAeA,SAAS+xF,GAAwBxkC,EAAS,UACtC,MAAMr9F,EAAS2/C,EAAQjY,kBAAkB1nC,OACrCA,EACAo9F,EAAkBp9F,EAAQq9F,GAG1BngG,QAAQC,MAAM,mDAEtB,CAKA,SAAS2kI,GAAuBj0H,GAC5B6uE,EAAgB7uE,GAChB+uE,GACJ,CAcA,SAASmlD,KACL7kI,QAAQe,KAAK,cACjB,CAEA,SAAS2iI,KACLjhF,EAAQhQ,wBACZ,CAEA,SAASqyF,KACL,IACI,MACMn/H,GADIjB,OAAOC,QAAUD,QACbkB,oBAAsBlB,OAAOkB,mBACvCD,GAAqC,mBAAvBA,EAAIomG,gBAClBpmG,EAAIomG,iBACJ/rG,QAAQe,KAAK,mBAGbf,QAAQc,KAAK,8CAErB,CACA,MAAOb,GACHD,QAAQC,MAAM,mBAAoBA,EACtC,CACJ,CAEAR,eAAeslI,GAAkBz7G,GAC7B,UAC0BiD,EAAe,MAAM,GAAO,EAAOjD,KAErDtpB,QAAQe,KAAK,iBAAiBuoB,aAExBouF,KAEd,CACA,MAAOz3G,GACHD,QAAQC,MAAM,mBAAoBA,EACtC,CACJ,CAEAR,eAAeulI,GAAiB73G,EAAYC,GACxC,UACUozG,EAAuBrzG,EAAYC,GACzCptB,QAAQe,KAAK,cAAcosB,OAAgBC,gBAErCsqF,IACV,CACA,MAAOz3G,GACHD,QAAQC,MAAM,gBAAiBA,EACnC,CACJ,CAEAR,eAAe+yC,GAA2B1vC,GACtC9C,QAAQe,KAAK,mBAAmB+B,EAAO87E,sBAAuB97E,EAAO6T,cAE/D+gG,IACV,CAyKA,OArKA,IAAA1mD,WAAUvxD,UACNO,QAAQe,KAAK,mBAEbu/H,IAEA,IACIa,EAAiB/wD,OACjBpwE,QAAQe,KAAK,wBACjB,CACA,MAAOd,GACHD,QAAQC,MAAM,yBAA0BA,EAC5C,CAEAwiD,EAAQrV,UAAU1oC,OAAOq+E,YAAc,KAEvCr+E,OAAOwzD,iBAAiB,SAAU,KAC9BzV,EAAQrV,UAAU1oC,OAAOq+E,YAAc,OAG3C,UACU20B,WAEApI,EAAezuG,aAErBuzC,EAAgBvzC,mBAEVuzC,EAAgBhjB,oBACtBqxB,EAAQhV,gBAAe,GAIvB,IAAIw3F,GAAiB,EACrB,IACI,MAAMC,EAAe/kI,aAAaC,QAAQ,kBACpC+kI,EAAYD,EAAensI,KAAKwH,MAAM2kI,GAAgB,MAE9B,IAA1BC,GAAWprI,aACXkrI,GAAiB,EAEjBxiF,EAAQ1W,aAAa,MAErB0W,EAAQzoD,aAAc,EACtBgG,QAAQe,KAAK,yCAErB,CACA,MAAOhB,GAEP,EAEKklI,IAAmBxiF,EAAQvoD,WAAaqnI,EAAgBvgI,MAAMlJ,OAAS,GACxE2qD,EAAQ1W,aAAa,KAE7B,CACA,MAAO9rC,GACHD,QAAQC,MAAM,mBAAoBA,EACtC,KAEJ,IAAAwwE,aAAY,KACRzwE,QAAQe,KAAK,mBAEbo+E,IAEAQ,IAEA4gD,OA0DJ,IAAAvvE,WAAU,KACN,MAAM5M,EAAY1/C,OAAOC,QAAQipC,UAAYA,SACvCw3F,EAAsBpiI,IAExB,IAAKy/C,EAAQ9X,gBAAkB8X,EAAQxoD,SACnC,QArDZ,SAAqBgJ,GACjB,MAAMmhD,EAAY1/C,OAAOC,QAAQipC,UAAYA,SAE7C,GAAIwW,EAAUE,cAAc,sBAExB,OADAtkD,QAAQe,KAAK,qCACN,EAGX,GAAIqjD,EAAUE,cAAc,qBAExB,OADAtkD,QAAQe,KAAK,2BACN,EAGX,MAAMi5D,EAAgB5V,EAAU4V,cAChC,OAAIA,GAA4C,aAA1BA,EAAcC,SAAoD,UAA1BD,EAAcC,UAEpED,EAAcqnB,QAAQ,kBAAmBrnB,EAAcqnB,QAAQ,yBAMnE5+B,EAAQpa,gBACRoa,EAAQla,iBAAiBzwB,SACzB2qC,EAAQha,iBAAiB3wB,SACzB2qC,EAAQzZ,oBACRyZ,EAAQxZ,cAAcnxB,SACtB2qC,EAAQpZ,iBAAiBvxB,aAInB7U,EAAOo+E,QAAQ,iBACrBp+E,EAAOo+E,QAAQ,2BACfp+E,EAAOo+E,QAAQ,sBACfp+E,EAAOo+E,QAAQ,uBACfp+E,EAAOo+E,QAAQ,eACfp+E,EAAOo+E,QAAQ,yBACfp+E,EAAOo+E,QAAQ,uBACfp+E,EAAOo+E,QAAQ,gBACfp+E,EAAOo+E,QAAQ,4BACfp+E,EAAOo+E,QAAQ,6BACfp+E,EAAOo+E,QAAQ,uBACfp+E,EAAOo+E,QAAQ,sBACfp+E,EAAOo+E,QAAQ,wBA1BXrhF,QAAQe,KAAK,iCACN,EA2BnB,EAYYskI,CAFWriI,EAAMC,UAMrBw/C,EAAQlV,aACRvtC,QAAQe,KAAK,sBAGjBqjD,EAAU8T,iBAAiB,QAASktE,IAEpC,IAAA30D,aAAY,KACRrsB,EAAU+T,oBAAoB,QAASitE,QAO/C,IAAAr1C,aAAY,KAER,MAAMu1C,EAAW7iF,EAAQ9c,SAAYjE,EAAY3lC,OAAO8f,sBAAwB,GAAM,EAClFnX,OAAOC,QAAQipC,UAAU6W,iBACzB//C,OAAOC,OAAOipC,SAAS6W,gBAAgBjY,MAAM+7C,YAAY,yBAA0B,GAAG+8C,UAO9F,IAAA3nH,OAAM,IAAM07D,EAAU9xD,WAAY0yD,IAC1BA,GACAZ,EAAUvtD,gBAAgBmuD,IAE/B,CAAEr8D,MAAM,IACJ,CAAC2zC,EAAMC,MACF,kBAAc,wBAAoB,MAAO,CAC7C9P,OAAO,oBAAgB,CAAC,UAAW+/E,EAAWzgI,SAC/C,EACC,wBAAoB,oBACpB,kBAAa,WAAOukI,IAAe,CAC/B7zE,QAAS,kBACTtyD,IAAKgiI,EACL50F,OAAO,oBAAgB,CAAEmc,SAAS,WAAOlG,GAAS9X,eAAiB,OAAS,WAC7E,KAAM,EAAe,CAAC,WACzB,wBAAoB,UACpB,kBAAa,WAAO66F,IAAY,CAC5B9zE,QAAS,eACTtyD,IAAKiiI,EACL70F,OAAO,oBAAgB,CAAEmc,SAAS,WAAOlG,GAAS9X,eAAiB,OAAS,SAC5ErmB,MAAOmoG,EAAWzrH,MAClB3C,OAAO,WAAOqjC,GAAa3lC,OAAOsC,MAClClE,QAAQ,WAAOunC,GAAa3lC,OAAO5B,OACnC,gBAAgB,WAAOsoD,GAASzoD,YAChC,aAAa,WAAOyoD,GAASxoD,SAC7B,oBAAqByrC,EAAgB1kC,MACrC,cAAc,WAAO0gC,GAAa3lC,OAAOsf,UACzC,eAAe,WAAOg+D,GAAWlxD,kBACjCs9G,UAAWniC,GACXrwD,OAAQwjD,GACR+vB,SAAU8c,GACVoC,OAAQjC,GACRkC,eAAgBjC,GAChBkC,QAASrC,GACTsC,aAAcf,GACdgB,YAAY,WAAOrjF,GAASrX,mBAC5B26F,aAAa,WAAOtjF,GAAS3W,UAC7BovE,SAAUynB,GACV1uC,QAASwuC,GACTuD,cAAetD,GACfuD,cAAehD,IAChB,CACC9kI,MAAM,aAAS,IAAM,CACfyjI,EAAkB5gI,OAcd,wBAAoB,QAAQ,KAb3B,kBAAc,kBAAa,WAAOklI,IAAS,CAC1CngI,IAAK,EACL5H,KAAMwjI,EAAQ3gI,MACd,cAAc,WAAOyhD,GAASvoD,UAC9B,kBAAkB,EAClB,mBAAoBi6F,EAAenzF,MACnC,yBAA0B8gI,EAAoB9gI,MAC9C,oBAAoB,WAAOyhD,GAAShd,eACpC,gBAAgB,WAAO/D,GAAa7iB,eACpCsnH,YAAavD,GACbwD,cAAepD,GACfqD,cAAe70E,EAAO,KAAOA,EAAO,GAAMK,IAAY,WAAOpP,GAAStV,iBAAgB,KACvF,KAAM,EAAe,CAAC,OAAQ,aAAc,mBAAoB,yBAA0B,mBAAoB,oBAGzH,cAAc,aAAS,IAAM,EACzB,kBAAa,WAAOm5F,IAAY,CAC5BxuH,SAAS,WAAO2qC,GAASvZ,UACzB/qC,KAAMwjI,EAAQ3gI,MACd,cAAc,WAAOyhD,GAASvoD,UAC9B,gBAAgB,WAAOwnC,GAAa7iB,eACpC,kBAAkB,EAClB,qBAAsBs1E,EAAenzF,MACrC,0BAA2B8gI,EAAoB9gI,MAC/CulI,WAAYrD,GACZjvC,SAAS,WAAOxxC,GAAS3P,gBAC1B,KAAM,EAAe,CAAC,UAAW,OAAQ,aAAc,eAAgB,qBAAsB,0BAA2B,cAE/HyO,SAAS,aAAS,IAAM,EACpB,wBAAoB,YACnB,WAAOkB,GAASvoD,aAAc,WAAO,QAC/B,kBAAc,kBAAa,WAAOssI,IAAY,CAC7CzgI,IAAK,EACL4Q,OAAQ4qH,EAAgBvgI,MACxB6rG,WAAYs2B,GACZp2B,WAAYvI,GACZiiC,wBAAyBrD,GACzB1xB,SAAU8xB,GACVkD,kBAAmBz1B,GACnB01B,cAAez1B,IAChB,KAAM,EAAe,CAAC,aACtB,WAAOzuD,GAASvoD,aAAc,WAAO,QACjC,kBAAc,wBAAoB,WAAW,CAAE6L,IAAK,GAAK,EACxD,wBAAoB,aACpB,kBAAa,WAAO6gI,IAAe,CAC/BjwH,OAAQkrH,EAAc7gI,MACtB+yG,YAAa9V,GACbhD,eAAgBopC,IACjB,KAAM,EAAe,CAAC,YAC1B,QACA,WAAO5hF,GAASvoD,aAAc,WAAO,QACjC,kBAAc,wBAAoB,WAAW,CAAE6L,IAAK,GAAK,EACxD,wBAAoB,YACpB,kBAAa,WAAOm6H,GAAoB,CACpCxuE,QAAS,uBACTtyD,IAAKkiI,EACL,qBAAsBS,EAAsB/gI,MAC5C,mBAAoBghI,EAAoBhhI,MACxC,gBAAiBihI,EAAiBjhI,MAClC,aAAcugI,EAAgBvgI,MAC9B,eAAe,GAChB,KAAM,EAAe,CAAC,qBAAsB,mBAAoB,gBAAiB,gBACrF,OACAkhI,GAAkB,QACd,kBAAc,wBAAoB,WAAW,CAAEn8H,IAAK,GAAK,EACxD,wBAAoB,cACnB,kBAAc,kBAAa,WAAO8gI,IAAY,CAC3C9gI,IAAKm8H,GAAalhI,MAAM7J,GACxB,WAAY+qI,GAAalhI,MAAM7J,GAC/B,aAAc+qI,GAAalhI,MAAM8C,KACjCmK,KAAMi0H,GAAalhI,MAAMiN,KACzBjC,QAASk2H,GAAalhI,MAAMgL,QAC5B,cAAeu5B,EAAWvkC,MAC1B+yG,YAAa9V,GACbjD,YAAa8Z,GACb7Z,eAAgBopC,GAChBrwB,cAAe3V,GACfyoC,eAAgBt1E,EAAO,KAAOA,EAAO,GAAMK,GAAYtsB,EAAWvkC,MAAQ6wD,GAC1EoiC,QAAS0vC,GACT+C,kBAAmBz1B,GACnB01B,cAAez1B,GACf+C,cAAeogB,IAChB,KAAM,EAAe,CAAC,WAAY,aAAc,OAAQ,UAAW,kBACvE,SACA,kBAAc,wBAAoB,WAAW,CAAEtuH,IAAK,GAAK,EACxD,wBAAoB,WACpByrD,EAAO,MAAQA,EAAO,KAAM,wBAAoB,MAAO,CAAE9P,MAAO,eAAiB,EAC7E,wBAAoB,IAAK,CAAEA,MAAO,kBAClC,wBAAoB,IAAK,KAAM,aAC/B,KACL,SAEvB9yB,EAAG,GACJ,EAAe,CAAC,QAAS,QAAS,QAAS,SAAU,eAAgB,YAAa,oBAAqB,aAAc,cAAe,aAAc,iBACrJ,wBAAoB,WACpB,kBAAa,WAAOm4G,IAAc,CAC9BjvH,QAAS0pH,EAAiB1pH,QAC1B,mBAAoB05C,EAAO,KAAOA,EAAO,GAAMK,GAAa2vE,EAAwB,QAAI3vE,GACxFj4D,EAAG4nI,EAAiB5nI,EACpBC,EAAG2nI,EAAiB3nI,EACpB,WAAY2nI,EAAiB/oH,QAC7B,aAAc+oH,EAAiBp0H,UAC/B,YAAao0H,EAAiB5zH,SAC9BotF,YAAaspC,GACb0C,OAAQzC,GACRhe,SAAUie,GACVyC,aAAcxC,IACf,KAAM,EAAe,CAAC,UAAW,IAAK,IAAK,WAAY,aAAc,eACxE,wBAAoB,WACpB,kBAAa,WAAOyC,IAAiB,CACjCpvH,SAAS,WAAO2qC,GAASpa,eACzB,mBAAoBmpB,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAOpP,GAAuB,eAAIoP,GAC9F5e,OAAQ4xF,IACT,KAAM,EAAe,CAAC,aACzB,wBAAoB,cACpB,kBAAa,WAAOsC,IAAiB,CACjCrvH,SAAS,WAAO2qC,GAASna,eACzB,mBAAoBkpB,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAOpP,GAAuB,eAAIoP,IAC/F,KAAM,EAAe,CAAC,aACzB,wBAAoB,aACpB,kBAAa,WAAOu1E,IAAmB,CACnCtvH,SAAS,WAAO2qC,GAASla,iBAAiBzwB,QAC1C,mBAAoB05C,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAOpP,GAASla,iBAAwB,QAAIspB,GACxG,iBAAiB,WAAOpP,GAASla,iBAAiBvC,MAAMwC,aACxDwI,UAAW+zF,IACZ,KAAM,EAAe,CAAC,UAAW,mBACpC,wBAAoB,aACpB,kBAAa,WAAOsC,IAAmB,CACnCvvH,SAAS,WAAO2qC,GAASha,iBAAiB3wB,QAC1C,mBAAoB05C,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAOpP,GAASha,iBAAwB,QAAIopB,GACxG,aAAa,WAAOpP,GAASha,iBAAiBzC,MAAM0C,SACpDsI,UAAWg0F,GACXsC,kBAAmB90F,IACpB,KAAM,EAAe,CAAC,UAAW,eACpC,wBAAoB,kBACpB,kBAAa,WAAO0rE,IAAsB,CACtCpmG,SAAS,WAAO2qC,GAAS9Z,oBAAoB7wB,QAC7C,mBAAoB05C,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAOpP,GAAS9Z,oBAA2B,QAAIkpB,GAC3G,uBAAuB,WAAOpP,GAAS9Z,oBAAoB3C,MAAM4C,kBACjE,qBAAqB,WAAO6Z,GAAS9Z,oBAAoB3C,MAAM6C,gBAC/D,2BAA2B,WAAO4Z,GAAS9Z,oBAAoB9wB,MAAMixB,kBACrEkI,WAAW,WAAOyR,GAASjQ,4BAC5B,KAAM,EAAe,CAAC,UAAW,sBAAuB,oBAAqB,0BAA2B,eAC3G,wBAAoB,eACpB,kBAAa,WAAO+0F,IAAqB,CACrCzvH,SAAS,WAAO2qC,GAASzZ,mBACzB,mBAAoBwoB,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAOpP,GAA2B,mBAAIoP,IACnG,KAAM,EAAe,CAAC,aACzB,wBAAoB,4BACpB,kBAAa,WAAO21E,IAAgB,CAChC1vH,SAAS,WAAO2qC,GAASxZ,cAAcnxB,QACvC,mBAAoB05C,EAAO,KAAOA,EAAO,GAAMK,IAAa,WAAOpP,GAASxZ,cAAqB,QAAI4oB,GACrG,cAAc,WAAOpP,GAASxZ,cAAcjD,MAAM54B,UAClD,YAAY,WAAOq1C,GAASxZ,cAAcjD,MAAMvtB,QAChD,aAAa,WAAOgqC,GAASxZ,cAAcjD,MAAMp4B,SACjD,oBAAoB,WAAO60C,GAASxZ,cAAcjD,MAAMC,eACxD,mBAAmB,WAAOwc,GAASxZ,cAAcjD,MAAMM,cACvD6J,QAASu0F,IACV,KAAM,EAAe,CAAC,UAAW,aAAc,WAAY,YAAa,mBAAoB,qBAC/F,wBAAoB,2BACpB,kBAAa,WAAO+C,IAAgB,CAChC3vH,SAAS,WAAO2qC,GAAS1c,cAAcjuB,QACvC,mBAAoB05C,EAAO,MAAQA,EAAO,IAAOK,IAAa,WAAOpP,GAAS1c,cAAqB,QAAI8rB,GACvG,cAAc,WAAOpP,GAAS1c,cAAcC,MAAM54B,UAClD,YAAY,WAAOq1C,GAAS1c,cAAcC,MAAMvtB,QAChD,aAAa,WAAOgqC,GAAS1c,cAAcC,MAAMp4B,SACjD,mBAAoBy0H,GAAkBrhI,MACtCizF,SAAS,WAAOxxC,GAAS9S,mBACzBskE,eAAe,WAAOxxD,GAASzS,4BAChC,KAAM,EAAe,CAAC,UAAW,aAAc,WAAY,YAAa,mBAAoB,UAAW,mBAC1G,wBAAoB,4BACpB,kBAAa,WAAOw3F,IAAgB,CAChC1vH,SAAS,WAAO2qC,GAASpc,uBAAuBvuB,QAChD,mBAAoB05C,EAAO,MAAQA,EAAO,IAAOK,IAAa,WAAOpP,GAASpc,uBAA8B,QAAIwrB,GAChH,cAAc,WAAOpP,GAASpc,uBAAuBL,MAAM54B,UAC3D,YAAY,WAAOq1C,GAASpc,uBAAuBL,MAAMvtB,QACzD,aAAa,WAAOgqC,GAASpc,uBAAuBL,MAAMp4B,SAC1D,oBAAoB,WAAO60C,GAASpc,uBAAuBL,MAAMC,eACjE,mBAAmB,WAAOwc,GAASpc,uBAAuBL,MAAMM,cAChE2tD,SAAS,WAAOxxC,GAAS1S,6BAC1B,KAAM,EAAe,CAAC,UAAW,aAAc,WAAY,YAAa,mBAAoB,kBAAmB,aAClH,wBAAoB,4BACpB,kBAAa,WAAO23F,IAAuB,CACvC5vH,SAAS,WAAO2qC,GAASvc,qBAAqBpuB,QAC9C,mBAAoB05C,EAAO,MAAQA,EAAO,IAAOK,IAAa,WAAOpP,GAASvc,qBAA4B,QAAI2rB,GAC9G,aAAa,WAAOpP,GAASvc,qBAAqBF,MAAMlgB,SACxD,iBAAiB,WAAO28B,GAASvc,qBAAqBF,MAAMG,aAC5D,iBAAiB,WAAOsc,GAASvc,qBAAqBF,MAAMI,aAC5D6tD,SAAS,WAAOxxC,GAAS5S,2BAC1B,KAAM,EAAe,CAAC,UAAW,YAAa,gBAAiB,gBAAiB,aACnF,wBAAoB,kBACpB,kBAAa,WAAOohF,IAAmB,CACnCn5G,SAAS,WAAO2qC,GAASlc,iBAAiBzuB,QAC1C,aAAa,WAAO2qC,GAASlc,iBAAiBP,MAAM3D,SACpDv+B,MAAM,WAAO2+C,GAASlc,iBAAiBP,MAAMliC,KAC7C,oBAAoB,WAAO2+C,GAASlc,iBAAiBP,MAAMQ,eAC3D,oBAAoB,WAAOic,GAASlc,iBAAiBP,MAAMS,eAC3D,iBAAiB,WAAOgc,GAASlc,iBAAiBP,MAAMU,aACxD,kBAAkB,WAAO+b,GAASlc,iBAAiBP,MAAMW,cACzD,sBAAsB,WAAO8b,GAASlc,iBAAiBP,MAAMY,iBAC7DqtD,SAAS,WAAOxxC,GAASvX,sBACzBiF,SAAS,WAAOsS,GAASpS,sBACzBD,UAAU,WAAOqS,GAASnS,wBAC3B,KAAM,EAAe,CAAC,UAAW,YAAa,OAAQ,mBAAoB,mBAAoB,gBAAiB,iBAAkB,qBAAsB,UAAW,UAAW,cAChL,wBAAoB,8BACpB,kBAAa,WAAOq3F,IAAsB,CACtC7vH,SAAS,WAAO2qC,GAASzb,oBAAoBlvB,QAC7C,mBAAoB05C,EAAO,MAAQA,EAAO,IAAOK,IAAa,WAAOpP,GAASzb,oBAA2B,QAAI6qB,GAC7G,aAAa,WAAOpP,GAASzb,oBAAoBhB,MAAMlgB,SACvD,mBAAmB,WAAO28B,GAASzb,oBAAoBhB,MAAMiB,eAC7DgtD,SAAS,WAAOxxC,GAASjS,0BAC1B,KAAM,EAAe,CAAC,UAAW,YAAa,kBAAmB,aACpE,wBAAoB,oCACpB,kBAAa,WAAOo3F,IAAsB,CACtC9vH,SAAS,WAAO2qC,GAASvb,oBAAoBpvB,QAC7CqvB,OAAO,WAAOsb,GAASvb,oBAAoBlB,MAAMmB,MACjDC,UAAU,WAAOqb,GAASvb,oBAAoBlB,MAAMoB,SACpD6sD,SAAS,WAAOxxC,GAAS7R,yBACzBF,UAAU,WAAO+R,GAAS5R,0BAC1BF,eAAe,WAAO8R,GAAS3R,gCAChC,KAAM,EAAe,CAAC,UAAW,QAAS,WAAY,UAAW,WAAY,mBAChF,wBAAoB,oCACpB,kBAAa,WAAO+2F,IAAmB,CACnC/vH,SAAS,WAAO2qC,GAASlb,iBAAiBzvB,QAC1C,WAAW,WAAO2qC,GAASlb,iBAAiBvB,MAAMtL,OAClD,aAAa,WAAO+nB,GAASlb,iBAAiBvB,MAAMwB,SACpD,iBAAiB,WAAOib,GAASlb,iBAAiBvB,MAAMyB,aACxD,oBAAoB,WAAOgb,GAASlb,iBAAiBvB,MAAM0B,gBAC3DusD,SAAS,WAAOxxC,GAAStX,sBACzB6F,WAAW,WAAOyR,GAAStR,wBAC3BF,mBAAmB,WAAOwR,GAASpR,gCACnCH,eAAe,WAAOuR,GAASnR,6BAChC,KAAM,EAAe,CAAC,UAAW,UAAW,YAAa,gBAAiB,mBAAoB,UAAW,YAAa,oBAAqB,mBAC9I,wBAAoB,sCACpB,kBAAa,WAAOw2F,IAAkB,CAClChwH,SAAS,WAAO2qC,GAAS3a,gBAAgBhwB,QACzC,aAAa,WAAO2qC,GAAS3a,gBAAgB9B,MAAMwB,SACnD,mBAAmB,WAAOib,GAAS3a,gBAAgB9B,MAAM+B,eACzDksD,SAAS,WAAOxxC,GAASva,qBACzBiI,SAAS,WAAOsS,GAAShR,qBACzBD,SAAS,WAAOiR,GAAS/Q,sBAC1B,KAAM,EAAe,CAAC,UAAW,YAAa,kBAAmB,UAAW,UAAW,aAC1F,wBAAoB,qCACpB,kBAAa,WAAOq2F,IAAsB,CACtCjwH,SAAS,WAAO2qC,GAASta,oBAAoBrwB,QAC7CsvB,UAAU,WAAOqb,GAASta,oBAAoBnC,MAAMoB,SACpD6sD,SAAS,WAAOxxC,GAAS7Q,yBACzBo2F,oBAAqB3E,IACtB,KAAM,EAAe,CAAC,UAAW,WAAY,aAChD,wBAAoB,oCACpB,kBAAa,WAAO4E,IAAwB,CACxCnwH,SAAS,WAAO2qC,GAASra,sBAAsBtwB,QAC/C,cAAc,WAAO2qC,GAASra,sBAAsBpC,MAAM3L,UAC1D,gBAAgB,WAAOooB,GAASra,sBAAsBpC,MAAM7M,YAC5D86D,SAAS,WAAOxxC,GAAS3Q,4BAC1B,KAAM,EAAe,CAAC,UAAW,aAAc,eAAgB,aAClE,wBAAoB,wCACpB,kBAAa,WAAOo2F,IAAmB,CACnCpwH,SAAS,WAAO2qC,GAASzY,iBAAiBlyB,QAC1C,aAAa,WAAO2qC,GAASzY,iBAAiBhE,MAAMlgB,SACpD,qBAAqB,WAAO28B,GAASzY,iBAAiBhE,MAAM/hB,gBAC5D,0BAA0B,WAAOw+B,GAASzY,iBAAiBhE,MAAM7hB,qBACjE8vE,SAAS,WAAOxxC,GAAShX,sBACzBwH,QAAQ,WAAOwP,GAAS/O,sBACzB,KAAM,EAAe,CAAC,UAAW,YAAa,oBAAqB,yBAA0B,UAAW,YAC3G,wBAAoB,kCACpB,kBAAa,WAAOy0F,IAAsB,CACtCrwH,SAAS,WAAO2qC,GAAS/Y,qBAAqB5xB,QAC9C,eAAe,WAAO2qC,GAAS/Y,qBAAqB1D,MAAMpK,WAC1D,eAAe,WAAO6mB,GAAS/Y,qBAAqB1D,MAAM2D,WAC1D,aAAa,WAAO8Y,GAAS/Y,qBAAqB1D,MAAMlgB,SACxDmuE,SAAS,WAAOxxC,GAASnP,0BACzBM,SAAUgwF,IACX,KAAM,EAAe,CAAC,UAAW,cAAe,cAAe,YAAa,aAC/E,wBAAoB,oCACpB,kBAAa,WAAOwE,IAAmB,CACnCtwH,SAAS,WAAO2qC,GAAS7Y,iBAAiB9xB,QAC1C,aAAa,WAAO2qC,GAAS7Y,iBAAiB5D,MAAM6D,SACpD,mBAAmB,WAAO4Y,GAAS7Y,iBAAiB5D,MAAM8D,eAC1D,mBAAmB,WAAO2Y,GAAS7Y,iBAAiB5D,MAAM+D,eAC1D,aAAa,WAAO0Y,GAAS7Y,iBAAiB5D,MAAMlgB,SACpDmuE,SAAS,WAAOxxC,GAASjP,uBAC1B,KAAM,EAAe,CAAC,UAAW,YAAa,kBAAmB,kBAAmB,YAAa,aACpG,wBAAoB,kBACpB,kBAAa,WAAO60F,IAAmB,CACnCvwH,SAAS,WAAO2qC,GAASpZ,iBAAiBvxB,QAC1C,eAAe,WAAO2qC,GAASpZ,iBAAiBrD,MAAMsD,WACtD,iBAAiB,WAAOmZ,GAASpZ,iBAAiBrD,MAAMuD,aACxD,gBAAgB,WAAOkZ,GAASpZ,iBAAiBrD,MAAMwD,YACvD,mBAAmB,WAAOiZ,GAASpZ,iBAAiBrD,MAAMg3E,eAC1D,oBAAoB,WAAOv6D,GAASlX,sBACpC0H,QAAQ,WAAOwP,GAASvP,kBACzB,KAAM,EAAe,CAAC,UAAW,cAAe,gBAAiB,eAAgB,kBAAmB,mBAAoB,YAC3H,wBAAoB,YACpB,kBAAa,WAAOo1F,IAAoB,CACpCxwH,SAAS,WAAO2qC,GAASjY,kBAAkB1yB,QAC3ChV,QAAQ,WAAO2/C,GAASjY,kBAAkB1nC,OAC1CmxF,SAAS,WAAOxxC,GAASzO,uBACzBu0F,SAAS,WAAOr0G,GAChB8c,UAAW2zF,IACZ,KAAM,EAAe,CAAC,UAAW,SAAU,UAAW,aACzD,wBAAoB,gBACpB,kBAAa,WAAO6D,IAAqB,CACrC1wH,SAAS,WAAO2qC,GAAS/X,mBAAmB5yB,QAC5CnH,QAAQ,WAAO8xC,GAAS/X,mBAAmB1E,MAAMr1B,OACjDsjF,SAAS,WAAOxxC,GAASvO,wBACzBjB,OAAQ2xF,IACT,KAAM,EAAe,CAAC,UAAW,SAAU,aAC9C,wBAAoB,mCACpB,kBAAa,WAAO6D,IAAiB,CACjC3wH,SAAS,WAAO2qC,GAAStZ,eAAerxB,QACxC,mBAAoB05C,EAAO,MAAQA,EAAO,IAAOK,IAAa,WAAOpP,GAAStZ,eAAsB,QAAI0oB,GACxG7gB,WAAW,WAAOyR,GAASrP,uBAC5B,KAAM,EAAe,CAAC,UAAW,eACpC,wBAAoB,eACpB,kBAAa,WAAOs1F,IAAmB,CACnC5wH,SAAS,WAAO2qC,GAASvY,iBAAiBpyB,QAC1C,gBAAgB,WAAO2qC,GAASvY,iBAAiBlE,MAAMmE,YACvD,oBAAoB,WAAOsY,GAASpY,sBACpCuJ,UAAU,WAAO6O,GAAS5O,kBAC3B,KAAM,EAAe,CAAC,UAAW,eAAgB,mBAAoB,cACxE,wBAAoB,kBACpB,kBAAa,WAAO80F,MACpB,wBAAoB,kBACpB,kBAAa,WAAOC,IAAQ,CACxB9wH,SAAS,WAAO4oH,GAAY5oH,QAC5BnW,SAAS,WAAO++H,GAAY/+H,QAC5BtE,MAAM,WAAOqjI,GAAYrjI,MAC1B,KAAM,EAAe,CAAC,UAAW,UAAW,UAChD,GAEX,IEr6CJ,GAFoB,GCwBpB,EAAS,CAEPwrI,WAAY,IAEZC,2BAA4B,IAI7BpkI,OAAeE,EAAKF,OAAOC,OAAeC,EAE3C,MAAM,GAAY,uBAIZxL,GACQ,iBADRA,GAEQ,iBAFRA,GAGS,wBAkDf,IAAI2vI,GAAwB,KACxBC,GAAqC,KAGrCC,GAAuD,KAGvD,IAAiB,EAGjBC,IAAkB,EA0FtB,SAASC,MAzIT,WACE,IACE,MAAMjE,EAAe/kI,aAAaC,QAAQhH,IAG1C,IAAK8rI,EAAc,CAEjB,MAAMkE,EAAgB,CAAEtvI,MAAO,IAAKyrD,KAAM,MAAOwoC,OAAQ,MAAOh0F,YAAY,GAO5E,OANAoG,aAAaM,QAAQrH,GAAuBL,KAAKC,UAAUowI,IAE3DjpI,aAAaooB,WAAWnvB,IAExB+G,aAAaM,QAAQrH,GAAwB,cAC7C4G,QAAQe,KAAK,iCAEf,CAGA,MAAMokI,EAAYpsI,KAAKwH,MAAM2kI,IACC,IAA1BC,GAAWprI,aAEboG,aAAaooB,WAAWnvB,IAExB+G,aAAaM,QAAQrH,GAAwB,SAC7C4G,QAAQe,KAAK,kCAEjB,CAAE,MAAOhB,GAEP,MAAMqpI,EAAgB,CAAEtvI,MAAO,IAAKyrD,KAAM,MAAOwoC,OAAQ,MAAOh0F,YAAY,GAC5EoG,aAAaM,QAAQrH,GAAuBL,KAAKC,UAAUowI,IAC3DjpI,aAAaooB,WAAWnvB,IACxB+G,aAAaM,QAAQrH,GAAwB,SAC7C4G,QAAQc,KAAK,kCAAmCf,EAClD,CACF,CA0GEspI,IAGsB,WACRxoI,aACdb,QAAQe,KAAK,iBAzDN,IAAIsB,QAAQC,IACjB,IAAIgnI,EAAmB,EAEvB,MAAMC,EAAW,KAEf,GAAI,GAEF,YADAvpI,QAAQe,KAAK,6BAIf,MAAM,EAAG,MAAEiM,IAAU,UACfrH,EAAMqH,IAGZ,GAAIrH,GAAwC,mBAA1BA,EAAIE,mBAAoCjB,EAAG,CAE3D,MAAM3L,EAAO0M,EAAIE,oBAIjB,KAHgB5M,GAAQoH,OAAOiN,KAAKrU,GAAMnB,OAAS,IAGnCwxI,EA/HC,GAmIf,OAHAA,IACAtpI,QAAQe,KAAK,gCAAgCuoI,cAC7CL,GAAiB9wH,WAAWoxH,EAAU,MAKxCN,GAAiB,KACjBC,IAAkB,EAClB5mI,GACF,MAEE2mI,GAAiB9wH,WAAWoxH,EAAU,MAI1CA,MAuBmB/6G,KAAK,KACxBxuB,QAAQe,KAAK,sBAjGjB,WACE,MAAMqjD,EAAY1/C,OAAOC,OAAOipC,SAIhC,GADqBwW,EAAUoH,eAAe,IAG5C,YADAxrD,QAAQc,KAAK,2BAKfkoI,GAAiB5kF,EAAU1M,cAAc,OACzCsxF,GAAe7xI,GAAK,GACpBitD,EAAU6U,KAAKhE,YAAY+zE,IAG3B,MAAMQ,GAAQ,IAAAC,eAGdV,IAAS,IAAAW,WAAUC,IACnBZ,GAAOa,IAAIJ,GAKXT,GAAOc,MAAMb,IAEbhpI,QAAQe,KAAK,wBAAwB,MACvC,CAyEE+oI,EACF,CA2CAllI,EAAE,KACA5E,QAAQe,KAAK,UAAUo9G,WAGvB4rB,qBAAqB,CAAC,CAAEjmI,KAAM,WAAYgU,SAAS,KAGnDkyH,QAAQC,eAAe,YAAa,KAElC,IAAKlB,GAEH,YADA/oI,QAAQc,KAAK,qBAKf,MAAM2hD,GAAU,EAAA5d,EAAA,MACVqlG,EAAiBxlI,OAAe26E,qBAAuB,GAC7D58B,EAAQxO,uBAAuBi2F,KAMjCF,QAAQ,qBAAsB,KAC5B,IAAKjB,GAAQ,OAEb,MAAM30F,GAAkB,EAAA5jB,GAAA,KAEpB4jB,EAAgBr4C,OAAOc,gBAAkBu3C,EAAgBr4C,OAAOI,WAClE6D,QAAQe,KAAK,gCACbqzC,EAAgBtiB,iBAKpB3Z,WAAW,KACTunE,KACAyB,MACC,KAGHgF,aAAagjD,GAAbhjD,GAGAvhF,EAAEF,QAAQwkD,GAAG,WAAY,KACvBlpD,QAAQe,KAAK,mBAEb4+E,KAjFF3/E,QAAQe,KAAK,mBAGb,IAAiB,EAGM,OAAnBkoI,KACF/wH,aAAa+wH,IACbA,GAAiB,KACjBjpI,QAAQe,KAAK,sBAKXgoI,KACFA,GAAOoB,UACPpB,GAAS,KACT/oI,QAAQe,KAAK,oBAIXioI,KACFA,GAAe/9E,SACf+9E,GAAiB,KACjBhpI,QAAQe,KAAK,iBAGff,QAAQe,KAAK","sources":["webpack://tavern_helper_template/src//components/ActionBar.vue?01be","webpack://tavern_helper_template/src//components/HiddenButtonsPopup.vue?d567","webpack://tavern_helper_template/src//components/TabsPopup.vue?c763","webpack://tavern_helper_template/src//components/dashboard/InteractionTableWidget.vue?8847","webpack://tavern_helper_template/src//components/dialogs/common/ManualUpdateDialog.vue?aed0","webpack://tavern_helper_template/src//components/dialogs/common/PresetSaveDialog.vue?3a3b","webpack://tavern_helper_template/src//components/dialogs/common/SettingsDialog.vue?3f71","webpack://tavern_helper_template/src//components/settings/NavButtonConfigPanel.vue?a7c8","webpack://tavern_helper_template/src//components/settings/TabConfigPanel.vue?0327","webpack://tavern_helper_template/src//components/settings/divination/WordPoolPanel.vue?a3d3","webpack://tavern_helper_template/src//components/RelationshipGraph.vue?4cd5","webpack://tavern_helper_template/src//components/dialogs/graph/FactionSettingsDialog.vue?d159","webpack://tavern_helper_template/src//components/dialogs/graph/NodeConfigDialog.vue?4185","webpack://tavern_helper_template/src//components/settings/BackgroundConfigPanel.vue?03c1","webpack://tavern_helper_template/src//components/settings/divination/DimensionManagerPanel.vue?8783","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js","src://tavern_helper_template/src//composables/storageKeys.ts","src://tavern_helper_template/src//composables/useACUConfigManager.ts","src://tavern_helper_template/src//composables/useAvatarManager.ts","src://tavern_helper_template/src//composables/useBackgroundStorage.ts","src://tavern_helper_template/src//composables/useCellLock.ts","src://tavern_helper_template/src//composables/useDraw.ts","src://tavern_helper_template/src//composables/useIndexedDB.ts","src://tavern_helper_template/src//composables/useRowHistory.ts","src://tavern_helper_template/src//composables/useTableIntegrityCheck.ts","src://tavern_helper_template/src//composables/useToast.ts","src://tavern_helper_template/src//composables/useWordPool.ts","src://tavern_helper_template/src//stores/useConfigStore.ts","src://tavern_helper_template/src//stores/useDashboardStore.ts","src://tavern_helper_template/src//stores/useDataStore.ts","src://tavern_helper_template/src//stores/useDivinationStore.ts","src://tavern_helper_template/src//stores/useGraphConfigStore.ts","src://tavern_helper_template/src//stores/useTagLibraryStore.ts","src://tavern_helper_template/src//stores/useThemeStore.ts","src://tavern_helper_template/src//stores/useUIStore.ts","src://tavern_helper_template/src//types.ts","src://tavern_helper_template/src//utils/imageUpload.ts","src://tavern_helper_template/src//utils/relationshipColors.ts","src://tavern_helper_template/src//utils/relationshipParser.ts","src://tavern_helper_template/src//utils/index.ts","src://tavern_helper_template/src//utils/optionParser.ts","webpack://tavern_helper_template/src//components/ActionBar.vue?16ab","webpack://tavern_helper_template/src//components/HiddenButtonsPopup.vue?cac6","webpack://tavern_helper_template/src//components/TabsPopup.vue?a6c6","webpack://tavern_helper_template/src//components/dashboard/InteractionTableWidget.vue?0c93","webpack://tavern_helper_template/src//components/dialogs/common/ManualUpdateDialog.vue?a69b","webpack://tavern_helper_template/src//components/dialogs/common/PresetSaveDialog.vue?7eed","webpack://tavern_helper_template/src//components/dialogs/common/SettingsDialog.vue?8b6d","webpack://tavern_helper_template/src//components/settings/NavButtonConfigPanel.vue?f0bd","webpack://tavern_helper_template/src//components/settings/TabConfigPanel.vue?6e2c","webpack://tavern_helper_template/src//components/settings/divination/WordPoolPanel.vue?b986","webpack://tavern_helper_template/src//components/RelationshipGraph.vue?c708","webpack://tavern_helper_template/src//components/dialogs/graph/FactionSettingsDialog.vue?9155","webpack://tavern_helper_template/src//components/dialogs/graph/NodeConfigDialog.vue?7db2","webpack://tavern_helper_template/src//components/settings/BackgroundConfigPanel.vue?0ad0","webpack://tavern_helper_template/src//components/settings/divination/DimensionManagerPanel.vue?ec3a","src://tavern_helper_template/src//components/RelationshipGraph.vue","webpack://tavern_helper_template/src//components/RelationshipGraph.vue?916b","src://tavern_helper_template/src//components/SearchBox.vue","webpack://tavern_helper_template/src//components/SearchBox.vue?bb2c","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js","src://tavern_helper_template/external module \"https://testingcf.jsdelivr.net/npm/klona/+esm\"","src://tavern_helper_template/external module \"https://testingcf.jsdelivr.net/npm/pinia/+esm\"","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/node_modules/.pnpm/@vueuse+core@13.9.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/@vueuse/core/index.mjs","src://tavern_helper_template/node_modules/.pnpm/@vueuse+shared@13.9.0_vue@3.5.28_typescript@6.0.0-dev.20250807_/node_modules/@vueuse/shared/index.mjs","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/src//composables/useParentStyleInjection.ts","src://tavern_helper_template/src//composables/useDbSettings.ts","src://tavern_helper_template/src//composables/useTableUpdateStatus.ts","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src//composables/useUpdatePresets.ts","src://tavern_helper_template/src//composables/useApiCallbacks.ts","src://tavern_helper_template/src//composables/useDataPersistence.ts","src://tavern_helper_template/src//composables/useHiddenPrompt.ts","src://tavern_helper_template/src//composables/useCoreActions.ts","src://tavern_helper_template/src//composables/useMobileGesturesNew.ts","src://tavern_helper_template/src//composables/useVueUseIntegration.ts","src://tavern_helper_template/src//composables/useSwipeEnhancement.ts","src://tavern_helper_template/src//composables/usePromptBuild.ts","src://tavern_helper_template/src//composables/useFullscreenSupport.ts","src://tavern_helper_template/src//components/FloatingBall.vue","webpack://tavern_helper_template/src//components/FloatingBall.vue?b68f","src://tavern_helper_template/src//components/HiddenButtonsPopup.vue","webpack://tavern_helper_template/src//components/HiddenButtonsPopup.vue?18f5","src://tavern_helper_template/src//components/MainPanel.vue","webpack://tavern_helper_template/src//components/MainPanel.vue?8065","src://tavern_helper_template/src//components/TabBar.vue","webpack://tavern_helper_template/src//components/TabBar.vue?1cf5","webpack://tavern_helper_template/src//components/Badge.vue?d286","src://tavern_helper_template/src//components/Badge.vue","webpack://tavern_helper_template/src//components/InlineEditor.vue?f826","src://tavern_helper_template/src//components/InlineEditor.vue","src://tavern_helper_template/src//components/DataCard.vue","webpack://tavern_helper_template/src//components/DataCard.vue?6b71","src://tavern_helper_template/src//composables/useDivinationAction.ts","src://tavern_helper_template/src//components/dashboard/EmbeddedOptionsPanel.vue","webpack://tavern_helper_template/src//components/dashboard/EmbeddedOptionsPanel.vue?4870","src://tavern_helper_template/src//components/dashboard/GlobalStatusWidget.vue","webpack://tavern_helper_template/src//components/dashboard/GlobalStatusWidget.vue?037c","src://tavern_helper_template/src//components/dashboard/TableStatusBoard.vue","webpack://tavern_helper_template/src//components/dashboard/TableStatusBoard.vue?55e0","src://tavern_helper_template/src//components/dashboard/DashboardWidget.vue","webpack://tavern_helper_template/src//components/dashboard/DashboardWidget.vue?2aa0","src://tavern_helper_template/src//composables/useVirtualScroll.ts","src://tavern_helper_template/src//composables/useInteractionImporter.ts","src://tavern_helper_template/src//components/dashboard/InteractionTableWidget.vue","webpack://tavern_helper_template/src//components/dashboard/InteractionTableWidget.vue?bfe8","src://tavern_helper_template/src//components/dashboard/RandomWordPoolWidget.vue","webpack://tavern_helper_template/src//components/dashboard/RandomWordPoolWidget.vue?53b6","src://tavern_helper_template/src//components/Dashboard.vue","webpack://tavern_helper_template/src//components/Dashboard.vue?b4e0","src://tavern_helper_template/src//components/DataTable.vue","webpack://tavern_helper_template/src//components/DataTable.vue?5e8a","src://tavern_helper_template/src//components/OptionsPanel.vue","webpack://tavern_helper_template/src//components/OptionsPanel.vue?1167","webpack://tavern_helper_template/src//components/ContextMenu.vue?1cf9","src://tavern_helper_template/src//components/ContextMenu.vue","src://tavern_helper_template/src//components/Pagination.vue","src://tavern_helper_template/src//components/ui/SwitchList.vue","webpack://tavern_helper_template/src//components/ui/SwitchList.vue?967f","src://tavern_helper_template/src//components/dialogs/common/AddTableDialog.vue","webpack://tavern_helper_template/src//components/dialogs/common/AddTableDialog.vue?4631","src://tavern_helper_template/src//components/dialogs/common/AdvancedPurgeDialog.vue","webpack://tavern_helper_template/src//components/dialogs/common/AdvancedPurgeDialog.vue?5b51","src://tavern_helper_template/src//components/dialogs/common/DirectorDialog.vue","webpack://tavern_helper_template/src//components/dialogs/common/DirectorDialog.vue?8578","src://tavern_helper_template/src//components/dialogs/common/HistoryDialog.vue","webpack://tavern_helper_template/src//components/dialogs/common/HistoryDialog.vue?90ac","src://tavern_helper_template/src//constants/icons.ts","src://tavern_helper_template/src//components/dialogs/common/IconSelectDialog.vue","webpack://tavern_helper_template/src//components/dialogs/common/IconSelectDialog.vue?f510","src://tavern_helper_template/src//components/dialogs/common/InputFloorDialog.vue","webpack://tavern_helper_template/src//components/dialogs/common/InputFloorDialog.vue?136c","src://tavern_helper_template/src//components/dialogs/common/ManualUpdateDialog.vue","webpack://tavern_helper_template/src//components/dialogs/common/ManualUpdateDialog.vue?1fc9","src://tavern_helper_template/src//components/dialogs/common/PresetSaveDialog.vue","webpack://tavern_helper_template/src//components/dialogs/common/PresetSaveDialog.vue?3747","src://tavern_helper_template/src//components/dialogs/common/PurgeRangeDialog.vue","webpack://tavern_helper_template/src//components/dialogs/common/PurgeRangeDialog.vue?6172","src://tavern_helper_template/src//version.ts","src://tavern_helper_template/src//components/settings/BallAppearancePanel.vue","webpack://tavern_helper_template/src//components/settings/BallAppearancePanel.vue?51e0","src://tavern_helper_template/src//components/settings/NavButtonConfigPanel.vue","webpack://tavern_helper_template/src//components/settings/NavButtonConfigPanel.vue?8d0b","src://tavern_helper_template/src//components/settings/TabConfigPanel.vue","webpack://tavern_helper_template/src//components/settings/TabConfigPanel.vue?5d92","src://tavern_helper_template/src//components/settings/BackgroundConfigPanel.vue","webpack://tavern_helper_template/src//components/settings/BackgroundConfigPanel.vue?4a46","src://tavern_helper_template/src//components/settings/PresetManagerHeader.vue","webpack://tavern_helper_template/src//components/settings/PresetManagerHeader.vue?4284","src://tavern_helper_template/src//components/settings/ThemePanel.vue","webpack://tavern_helper_template/src//components/settings/ThemePanel.vue?96e1","src://tavern_helper_template/src//components/settings/divination/DimensionManagerPanel.vue","webpack://tavern_helper_template/src//components/settings/divination/DimensionManagerPanel.vue?f443","src://tavern_helper_template/src//components/dialogs/divination/themes/mystic/CardBack.vue","webpack://tavern_helper_template/src//components/dialogs/divination/themes/mystic/CardBack.vue?5513","src://tavern_helper_template/src//components/dialogs/divination/themes/mystic/CardFront.vue","webpack://tavern_helper_template/src//components/dialogs/divination/themes/mystic/CardFront.vue?5f72","src://tavern_helper_template/src//components/dialogs/divination/themes/wafuku/CardBack.vue","webpack://tavern_helper_template/src//components/dialogs/divination/themes/wafuku/CardBack.vue?4199","src://tavern_helper_template/src//components/dialogs/divination/themes/wafuku/CornerOrnament.vue","webpack://tavern_helper_template/src//components/dialogs/divination/themes/wafuku/CornerOrnament.vue?315a","src://tavern_helper_template/src//components/dialogs/divination/themes/wafuku/CardFront.vue","src://tavern_helper_template/src//components/dialogs/divination/themes/index.ts","src://tavern_helper_template/src//components/settings/divination/DivinationPanel.vue","webpack://tavern_helper_template/src//components/settings/divination/DivinationPanel.vue?f6ee","src://tavern_helper_template/src//components/settings/divination/WordPoolPanel.vue","webpack://tavern_helper_template/src//components/settings/divination/WordPoolPanel.vue?ad9a","src://tavern_helper_template/src//components/dialogs/common/SettingsDialog.vue","webpack://tavern_helper_template/src//components/dialogs/common/SettingsDialog.vue?0649","src://tavern_helper_template/src//components/dialogs/graph/AvatarCropDialog.vue","webpack://tavern_helper_template/src//components/dialogs/graph/AvatarCropDialog.vue?cf0e","src://tavern_helper_template/src//components/dialogs/graph/AvatarManagerDialog.vue","webpack://tavern_helper_template/src//components/dialogs/graph/AvatarManagerDialog.vue?4d6c","src://tavern_helper_template/src//components/dialogs/graph/FactionSettingsDialog.vue","webpack://tavern_helper_template/src//components/dialogs/graph/FactionSettingsDialog.vue?a58e","src://tavern_helper_template/src//components/dialogs/graph/GraphSettingsDialog.vue","webpack://tavern_helper_template/src//components/dialogs/graph/GraphSettingsDialog.vue?a4f9","src://tavern_helper_template/src//components/dialogs/graph/NodeConfigDialog.vue","webpack://tavern_helper_template/src//components/dialogs/graph/NodeConfigDialog.vue?89fc","src://tavern_helper_template/src//components/dialogs/graph/NodeLabelDialog.vue","webpack://tavern_helper_template/src//components/dialogs/graph/NodeLabelDialog.vue?ff95","src://tavern_helper_template/src//components/dialogs/dashboard/RowEditDialog.vue","webpack://tavern_helper_template/src//components/dialogs/dashboard/RowEditDialog.vue?739f","src://tavern_helper_template/src//components/dialogs/dashboard/WidgetActionsDialog.vue","webpack://tavern_helper_template/src//components/dialogs/dashboard/WidgetActionsDialog.vue?e430","src://tavern_helper_template/src//components/dialogs/dashboard/WidgetSettingsDialog.vue","webpack://tavern_helper_template/src//components/dialogs/dashboard/WidgetSettingsDialog.vue?c03e","webpack://tavern_helper_template/src//components/dialogs/divination/CardFront.vue?11eb","src://tavern_helper_template/src//components/dialogs/divination/TarotCard.vue","webpack://tavern_helper_template/src//components/dialogs/divination/TarotCard.vue?16ca","src://tavern_helper_template/src//components/dialogs/divination/DivinationOverlay.vue","webpack://tavern_helper_template/src//components/dialogs/divination/DivinationOverlay.vue?8687","src://tavern_helper_template/src//components/ActionBar.vue","webpack://tavern_helper_template/src//components/ActionBar.vue?2691","src://tavern_helper_template/src//components/Toast.vue","webpack://tavern_helper_template/src//components/Toast.vue?7172","src://tavern_helper_template/src//components/TabsPopup.vue","webpack://tavern_helper_template/src//components/TabsPopup.vue?144d","src://tavern_helper_template/src//components/dialogs/divination/PromptEditorDialog.vue","webpack://tavern_helper_template/src//components/dialogs/divination/PromptEditorDialog.vue?cde6","src://tavern_helper_template/src//components/dialogs/tag-manager/TagBadgeGrid.vue","webpack://tavern_helper_template/src//components/dialogs/tag-manager/TagBadgeGrid.vue?d795","src://tavern_helper_template/src//components/dialogs/tag-manager/TagCategoryTree.vue","webpack://tavern_helper_template/src//components/dialogs/tag-manager/TagCategoryTree.vue?c57d","src://tavern_helper_template/src//components/dialogs/tag-manager/TagEditDialog.vue","webpack://tavern_helper_template/src//components/dialogs/tag-manager/TagEditDialog.vue?73fc","src://tavern_helper_template/src//components/dialogs/tag-manager/TagImportDialog.vue","webpack://tavern_helper_template/src//components/dialogs/tag-manager/TagImportDialog.vue?bb3c","src://tavern_helper_template/src//components/dialogs/tag-manager/TagManagerDialog.vue","webpack://tavern_helper_template/src//components/dialogs/tag-manager/TagManagerDialog.vue?98c1","src://tavern_helper_template/src//components/dialogs/tag-manager/CategorySelectPopup.vue","webpack://tavern_helper_template/src//components/dialogs/tag-manager/CategorySelectPopup.vue?aece","src://tavern_helper_template/src//components/dialogs/tag-manager/TagPreEditDialog.vue","webpack://tavern_helper_template/src//components/dialogs/tag-manager/TagPreEditDialog.vue?101e","webpack://tavern_helper_template/src//components/dialogs/tag-manager/TagPreviewTooltip.vue?5d9a","src://tavern_helper_template/src//components/dialogs/tag-manager/TagPreviewTooltip.vue","src://tavern_helper_template/src//App.vue","src://tavern_helper_template/src//composables/useTouchScrollFix.ts","webpack://tavern_helper_template/src//App.vue?d738","src://tavern_helper_template/src//index.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.acu-word-pool-search[data-v-244ae7d6]{width:100%;padding:8px 12px;border-radius:var(--acu-radius-md);border:1px solid var(--acu-border);background:var(--acu-input-bg);color:var(--acu-text-main);font-size:13px}.acu-word-pool-search[data-v-244ae7d6]:focus{border-color:var(--acu-title-color);outline:none}.acu-word-pool-item[data-v-244ae7d6]:last-child{border-bottom:none !important}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src//components/settings/divination/WordPoolPanel.vue\"],\"names\":[],\"mappings\":\"AAEA,uCACE,UAAA,CACA,gBAAA,CACA,kCAAA,CACA,kCAAA,CACA,8BAAA,CACA,0BAAA,CACA,cAAA,CAEA,6CACE,mCAAA,CACA,YAAA,CAIJ,gDACE,6BAAA\",\"sourcesContent\":[\"\\n// \\n.acu-word-pool-search {\\n  width: 100%;\\n  padding: 8px 12px;\\n  border-radius: var(--acu-radius-md);\\n  border: 1px solid var(--acu-border);\\n  background: var(--acu-input-bg);\\n  color: var(--acu-text-main);\\n  font-size: 13px;\\n\\n  &:focus {\\n    border-color: var(--acu-title-color);\\n    outline: none;\\n  }\\n}\\n\\n.acu-word-pool-item:last-child {\\n  border-bottom: none !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n`, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n`, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n`, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n`, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.template-settings-group[data-v-2a4c34ca]{padding:12px;display:flex;flex-direction:column;gap:12px}.template-shortcuts-row[data-v-2a4c34ca]{display:flex;align-items:center;gap:8px;flex-wrap:wrap}.template-shortcuts-row .hint[data-v-2a4c34ca]{font-size:12px;color:var(--acu-text-sub)}.acu-wildcard-btn[data-v-2a4c34ca]{background:var(--acu-bg-panel);border:1px solid var(--acu-border);border-radius:4px;padding:2px 6px;cursor:pointer;font-size:12px;color:var(--acu-title-color);transition:all 0.2s}.acu-wildcard-btn[data-v-2a4c34ca]:hover{background:var(--acu-btn-hover);border-color:var(--acu-title-color)}.acu-wildcard-btn code[data-v-2a4c34ca]{font-family:monospace}.template-textarea[data-v-2a4c34ca]{min-height:120px;resize:vertical;line-height:1.5;font-family:monospace;width:100%;pointer-events:auto !important}.acu-wildcard-help[data-v-2a4c34ca]{background:rgba(0,0,0,0.05);border-radius:8px;padding:8px 12px}.acu-help-header[data-v-2a4c34ca]{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:12px;color:var(--acu-text-sub);-webkit-user-select:none;user-select:none}.acu-help-header strong[data-v-2a4c34ca]{flex:1}.acu-wildcard-help ul[data-v-2a4c34ca]{margin:8px 0 0 0;padding-left:20px;list-style-type:disc;font-size:12px;color:var(--acu-text-sub)}.acu-wildcard-help li[data-v-2a4c34ca]{margin-bottom:4px}.acu-wildcard-help code[data-v-2a4c34ca]{background:rgba(0,0,0,0.1);padding:0 4px;border-radius:3px;font-family:monospace;color:var(--acu-text-main)}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src//components/settings/divination/DimensionManagerPanel.vue\"],\"names\":[],\"mappings\":\"AA+eA,0CACE,YAAa,CACb,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,yCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,cACF,CAEA,+CACE,cAAe,CACf,yBACF,CAEA,mCACE,8BAA+B,CAC/B,kCAAmC,CACnC,iBAAkB,CAClB,eAAgB,CAChB,cAAe,CACf,cAAe,CACf,4BAA6B,CAC7B,mBACF,CAEA,yCACE,+BAAgC,CAChC,mCACF,CAEA,wCACE,qBACF,CAEA,oCACE,gBAAiB,CACjB,eAAgB,CAChB,eAAgB,CAChB,qBAAsB,CACtB,UAAW,CACX,8BACF,CAEA,oCACE,2BAA+B,CAC/B,iBAAkB,CAClB,gBACF,CAEA,kCACE,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,cAAe,CACf,cAAe,CACf,yBAA0B,CAC1B,wBAAiB,CAAjB,gBACF,CAEA,yCACE,MACF,CAEA,uCACE,gBAAiB,CACjB,iBAAkB,CAClB,oBAAqB,CACrB,cAAe,CACf,yBACF,CAEA,uCACE,iBACF,CAEA,yCACE,0BAA8B,CAC9B,aAAc,CACd,iBAAkB,CAClB,qBAAsB,CACtB,0BACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"acu-dimension-manager\\\">\\n    <!--  -->\\n    <PresetManagerHeader\\n      :presets=\\\"divinationStore.presets\\\"\\n      :active-preset-id=\\\"divinationStore.activePresetId\\\"\\n      :show-toolbar=\\\"true\\\"\\n      :is-migrating=\\\"isMigrating\\\"\\n      :selected-count=\\\"selectedDimensionIds.size\\\"\\n      title=\\\"\\\"\\n      hint=\\\"\\\"\\n      @select=\\\"handleSelectPreset\\\"\\n      @restore-default=\\\"handleRestoreDefault\\\"\\n      @delete=\\\"handleDeletePreset\\\"\\n      @save=\\\"handleQuickSave\\\"\\n      @save-as=\\\"openSaveDialog\\\"\\n      @collapse-all=\\\"collapseAll\\\"\\n      @expand-all=\\\"expandAll\\\"\\n      @import=\\\"triggerImport\\\"\\n      @export-current=\\\"handleExportCurrentPreset\\\"\\n      @export-all=\\\"handleExportPresets\\\"\\n      @toggle-migrate=\\\"toggleMigrateMode\\\"\\n      @migrate-to=\\\"handleMigrateTo\\\"\\n    />\\n\\n    <!--  -->\\n    <div\\n      v-for=\\\"(dim, dimIndex) in divinationStore.config.dimensions\\\"\\n      :key=\\\"dim.id\\\"\\n      class=\\\"acu-settings-section dimension-container\\\"\\n      :class=\\\"{\\n        'is-collapsed': collapsedDimensions[dim.id],\\n        'is-selected': isMigrating && selectedDimensionIds.has(dim.id),\\n      }\\\"\\n      @click=\\\"isMigrating ? toggleDimensionSelection(dim.id) : null\\\"\\n    >\\n      <!--  -->\\n      <div class=\\\"acu-settings-title dimension-header\\\" @click=\\\"!isMigrating && toggleCollapse(dim.id)\\\">\\n        <div class=\\\"header-left\\\">\\n          <i class=\\\"fas fa-chevron-right collapse-icon\\\" :class=\\\"{ 'is-expanded': !collapsedDimensions[dim.id] }\\\"></i>\\n          <input v-model=\\\"dim.name\\\" class=\\\"acu-input-minimal dimension-name-input\\\" placeholder=\\\"\\\" @click.stop />\\n        </div>\\n        <div class=\\\"header-right\\\">\\n          <label class=\\\"acu-switch\\\" @click.stop>\\n            <input v-model=\\\"dim.enabled\\\" type=\\\"checkbox\\\" />\\n            <span class=\\\"slider\\\"></span>\\n          </label>\\n          <button\\n            class=\\\"acu-icon-btn danger\\\"\\n            :disabled=\\\"dim.id === 'luck'\\\"\\n            :title=\\\"dim.id === 'luck' ? '' : ''\\\"\\n            @click.stop=\\\"handleRemoveDimension(dimIndex)\\\"\\n          >\\n            <i class=\\\"fas fa-trash\\\"></i>\\n          </button>\\n        </div>\\n      </div>\\n\\n      <!--  () -->\\n      <div v-show=\\\"!collapsedDimensions[dim.id]\\\" class=\\\"dimension-content\\\">\\n        <div class=\\\"tier-list\\\">\\n          <div v-for=\\\"(tier, tierIndex) in dim.tiers\\\" :key=\\\"tier.id\\\" class=\\\"tier-item\\\">\\n            <!-- :  -->\\n            <div class=\\\"tier-row basic-info\\\">\\n              <div class=\\\"tier-name-wrapper\\\">\\n                <input v-model=\\\"tier.name\\\" class=\\\"acu-input-minimal tier-name-input\\\" placeholder=\\\"\\\" />\\n                <!--  () -->\\n                <input\\n                  v-if=\\\"dim.id === 'luck'\\\"\\n                  v-model=\\\"tier.color\\\"\\n                  type=\\\"color\\\"\\n                  class=\\\"acu-color-picker-mini\\\"\\n                  title=\\\"\\\"\\n                />\\n              </div>\\n              <button class=\\\"acu-icon-btn small danger\\\" title=\\\"\\\" @click=\\\"removeTier(dimIndex, tierIndex)\\\">\\n                <i class=\\\"fas fa-times\\\"></i>\\n              </button>\\n            </div>\\n\\n            <!-- :  -->\\n            <div class=\\\"tier-row weight-control\\\">\\n              <span class=\\\"label\\\"></span>\\n              <input v-model.number=\\\"tier.weight\\\" type=\\\"range\\\" min=\\\"0\\\" max=\\\"100\\\" step=\\\"1\\\" class=\\\"acu-range-input\\\" />\\n              <span class=\\\"acu-badge\\\">{{ tier.weight }}</span>\\n            </div>\\n\\n            <!-- :  -->\\n            <div class=\\\"tier-row prompt-editor\\\">\\n              <textarea\\n                v-model=\\\"tier.prompt\\\"\\n                class=\\\"acu-textarea-scrollable compact\\\"\\n                placeholder=\\\"...\\\"\\n                rows=\\\"2\\\"\\n              ></textarea>\\n            </div>\\n          </div>\\n        </div>\\n\\n        <!--  -->\\n        <button class=\\\"acu-btn-dashed full-width\\\" @click=\\\"addTier(dimIndex)\\\">\\n          <i class=\\\"fas fa-plus\\\"></i> \\n        </button>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <button class=\\\"acu-btn-dashed full-width add-dimension-btn\\\" @click=\\\"handleAddDimension\\\">\\n      <i class=\\\"fas fa-layer-group\\\"></i> \\n    </button>\\n\\n    <!--  -->\\n    <div class=\\\"acu-settings-section advanced-settings\\\">\\n      <div class=\\\"acu-settings-title\\\">\\n        <div class=\\\"header-left\\\">\\n          <i class=\\\"fas fa-file-alt\\\"></i>\\n          \\n        </div>\\n      </div>\\n      <div class=\\\"acu-settings-group template-settings-group\\\">\\n        <!-- 1.  -->\\n        <div class=\\\"template-shortcuts-row\\\">\\n          <span class=\\\"hint\\\">:</span>\\n          <button class=\\\"acu-wildcard-btn\\\" @click=\\\"insertTemplatePlaceholder('{{luck}}')\\\">\\n            <code>{{ '\\\\{\\\\{luck\\\\}\\\\}' }}</code>\\n          </button>\\n          <button class=\\\"acu-wildcard-btn\\\" @click=\\\"insertTemplatePlaceholder('{{words}}')\\\">\\n            <code>{{ '\\\\{\\\\{words\\\\}\\\\}' }}</code>\\n          </button>\\n          <button class=\\\"acu-wildcard-btn\\\" @click=\\\"insertTemplatePlaceholder('{{dimensions}}')\\\">\\n            <code>{{ '\\\\{\\\\{dimensions\\\\}\\\\}' }}</code>\\n          </button>\\n        </div>\\n\\n        <!-- 2.  -->\\n        <div class=\\\"template-editor-row\\\">\\n          <textarea\\n            ref=\\\"templateInputRef\\\"\\n            v-model=\\\"divinationStore.config.customTemplate\\\"\\n            class=\\\"acu-edit-textarea template-textarea\\\"\\n            placeholder=\\\"...\\\"\\n            rows=\\\"6\\\"\\n          ></textarea>\\n        </div>\\n\\n        <!-- 3.  -->\\n        <div class=\\\"template-help-row\\\">\\n          <div class=\\\"acu-wildcard-help\\\">\\n            <div class=\\\"acu-help-header\\\" @click=\\\"toggleHelp\\\">\\n              <i class=\\\"fas fa-lightbulb\\\"></i>\\n              <strong></strong>\\n              <i class=\\\"fas\\\" :class=\\\"showHelp ? 'fa-chevron-up' : 'fa-chevron-down'\\\"></i>\\n            </div>\\n            <ul v-show=\\\"showHelp\\\">\\n              <li>\\n                <code>{{ '\\\\{\\\\{luck\\\\}\\\\}' }}</code> - ...\\n              </li>\\n              <li>\\n                <code>{{ '\\\\{\\\\{words\\\\}\\\\}' }}</code> - \\n              </li>\\n              <li>\\n                <code>{{ '\\\\{\\\\{dimensions\\\\}\\\\}' }}</code> - \\n              </li>\\n            </ul>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <!--  -->\\n    <input ref=\\\"fileInputRef\\\" type=\\\"file\\\" accept=\\\".json\\\" style=\\\"display: none\\\" @change=\\\"handleImportPresets\\\" />\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { useTextareaAutosize } from '@vueuse/core';\\nimport { v4 as uuidv4 } from 'uuid';\\nimport { onMounted, ref, toRef } from 'vue';\\nimport { TEMPLATE_WITH_DIMENSIONS } from '../../../composables/usePromptBuild';\\nimport { useToast } from '../../../composables/useToast';\\nimport { useDivinationStore } from '../../../stores/useDivinationStore';\\nimport { useUIStore } from '../../../stores/useUIStore';\\nimport type { Dimension, DimensionTier, DivinationPreset } from '../../../types';\\nimport PresetManagerHeader from '../PresetManagerHeader.vue';\\n\\nconst divinationStore = useDivinationStore() as any;\\nconst uiStore = useUIStore();\\nconst toast = useToast();\\n\\n// \\nconst collapsedDimensions = ref<Record<string, boolean>>({});\\nconst fileInputRef = ref<HTMLInputElement | null>(null);\\nconst templateInputRef = ref<HTMLTextAreaElement | null>(null);\\nconst showHelp = ref(true);\\n\\n// \\nconst isMigrating = ref(false);\\nconst selectedDimensionIds = ref<Set<string>>(new Set());\\n\\n// \\nconst customTemplateRef = toRef(divinationStore.config, 'customTemplate');\\nuseTextareaAutosize({ element: templateInputRef, input: customTemplateRef });\\n\\nconst toggleHelp = () => {\\n  showHelp.value = !showHelp.value;\\n};\\n\\n// \\nonMounted(() => {\\n  if (!divinationStore.config.customTemplate) {\\n    divinationStore.config.customTemplate = TEMPLATE_WITH_DIMENSIONS;\\n  }\\n});\\n\\n// ============================================================\\n// \\n// ============================================================\\n\\nfunction handleSelectPreset(id: string) {\\n  divinationStore.applyPreset(id);\\n  toast.success('');\\n}\\n\\nfunction handleRestoreDefault() {\\n  if (confirm('')) {\\n    divinationStore.restoreDefaultDimensions();\\n    toast.success('');\\n  }\\n}\\n\\nfunction handleDeletePreset(id: string) {\\n  const preset = divinationStore.presets.find((p: DivinationPreset) => p.id === id);\\n  if (!preset) return;\\n\\n  if (confirm(`${preset.name}`)) {\\n    divinationStore.deletePreset(id);\\n    toast.info('');\\n  }\\n}\\n\\nfunction handleQuickSave() {\\n  const activeId = divinationStore.activePresetId;\\n  if (activeId) {\\n    const preset = divinationStore.presets.find((p: DivinationPreset) => p.id === activeId);\\n    if (preset) {\\n      divinationStore.saveCurrentToPreset(preset.name);\\n      toast.success(`${preset.name}`);\\n      return;\\n    }\\n  }\\n  // \\n  openSaveDialog();\\n}\\n\\nfunction openSaveDialog() {\\n  uiStore.openPresetSaveDialog(\\n    {\\n      presetType: 'divination', // \\n      summaryItems: [],\\n      initialName: '',\\n      checkDuplicate: (name: string) => divinationStore.presets.some((p: DivinationPreset) => p.name === name),\\n    },\\n    {\\n      onSave: (name: string) => {\\n        divinationStore.saveCurrentToPreset(name);\\n        toast.success(`${name}`);\\n      },\\n    },\\n  );\\n}\\n\\n// \\nfunction handleExportCurrentPreset() {\\n  const activeId = divinationStore.activePresetId;\\n  if (!activeId) {\\n    toast.warning('');\\n    return;\\n  }\\n  const preset = divinationStore.presets.find((p: DivinationPreset) => p.id === activeId);\\n  if (!preset) return;\\n\\n  const data = {\\n    type: 'acu_divination_presets',\\n    version: '1.0',\\n    timestamp: new Date().toISOString(),\\n    presets: [preset], // \\n  };\\n\\n  downloadJson(data, `acu-preset-${preset.name}-${Date.now()}.json`);\\n  toast.success(`${preset.name}`);\\n}\\n\\n// \\nfunction handleExportPresets() {\\n  const data = {\\n    type: 'acu_divination_presets',\\n    version: '1.0',\\n    timestamp: new Date().toISOString(),\\n    presets: divinationStore.presets,\\n  };\\n\\n  downloadJson(data, `acu-divination-backup-${Date.now()}.json`);\\n  toast.success('');\\n}\\n\\nfunction downloadJson(data: any, filename: string) {\\n  const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\\n  const url = URL.createObjectURL(blob);\\n  const a = document.createElement('a');\\n  a.href = url;\\n  a.download = filename;\\n  a.click();\\n  URL.revokeObjectURL(url);\\n}\\n\\n// \\nfunction triggerImport() {\\n  fileInputRef.value?.click();\\n}\\n\\n// \\nfunction handleImportPresets(event: Event) {\\n  const file = (event.target as HTMLInputElement).files?.[0];\\n  if (!file) return;\\n\\n  const reader = new FileReader();\\n  reader.onload = e => {\\n    try {\\n      const content = e.target?.result as string;\\n      const data = JSON.parse(content);\\n\\n      if (data.type === 'acu_divination_presets' && Array.isArray(data.presets)) {\\n        let importedCount = 0;\\n        data.presets.forEach((importedPreset: DivinationPreset) => {\\n          //  ID  ID\\n          const existing = divinationStore.presets.find((p: DivinationPreset) => p.id === importedPreset.id);\\n          if (existing) {\\n            //  ID \\n            //  ID \\n            const index = divinationStore.presets.findIndex((p: DivinationPreset) => p.id === importedPreset.id);\\n            divinationStore.presets[index] = importedPreset;\\n          } else {\\n            divinationStore.presets.push(importedPreset);\\n          }\\n          importedCount++;\\n        });\\n\\n        // \\n        divinationStore.saveConfig();\\n        toast.success(` ${importedCount} `);\\n      } else {\\n        toast.error('');\\n      }\\n    } catch (err) {\\n      console.error(':', err);\\n      toast.error('');\\n    }\\n  };\\n  reader.readAsText(file);\\n  //  input\\n  (event.target as HTMLInputElement).value = '';\\n}\\n\\n// \\nconst toggleCollapse = (id: string) => {\\n  collapsedDimensions.value[id] = !collapsedDimensions.value[id];\\n};\\n\\n// \\nfunction collapseAll() {\\n  divinationStore.config.dimensions.forEach((dim: any) => {\\n    collapsedDimensions.value[dim.id] = true;\\n  });\\n}\\n\\n// \\nfunction expandAll() {\\n  divinationStore.config.dimensions.forEach((dim: any) => {\\n    collapsedDimensions.value[dim.id] = false;\\n  });\\n}\\n\\n// \\nfunction toggleMigrateMode() {\\n  isMigrating.value = !isMigrating.value;\\n  if (isMigrating.value) {\\n    selectedDimensionIds.value.clear();\\n    toast.info('');\\n  } else {\\n    selectedDimensionIds.value.clear();\\n  }\\n}\\n\\n// \\nfunction toggleDimensionSelection(dimId: string) {\\n  if (selectedDimensionIds.value.has(dimId)) {\\n    selectedDimensionIds.value.delete(dimId);\\n  } else {\\n    selectedDimensionIds.value.add(dimId);\\n  }\\n  // \\n  selectedDimensionIds.value = new Set(selectedDimensionIds.value);\\n}\\n\\n// \\nfunction handleMigrateTo(targetPresetId: string) {\\n  if (selectedDimensionIds.value.size === 0) {\\n    toast.warning('');\\n    return;\\n  }\\n\\n  const targetPreset = divinationStore.presets.find((p: any) => p.id === targetPresetId);\\n  if (!targetPreset) return;\\n\\n  // \\n  const selectedDims = divinationStore.config.dimensions.filter((d: any) => selectedDimensionIds.value.has(d.id));\\n\\n  divinationStore.migrateDimensionsToPreset(selectedDims, targetPresetId);\\n\\n  toast.success(` ${selectedDims.length} ${targetPreset.name}`);\\n\\n  // \\n  isMigrating.value = false;\\n  selectedDimensionIds.value.clear();\\n}\\n\\n// \\nconst handleAddDimension = () => {\\n  const newDim: Dimension = {\\n    id: uuidv4(),\\n    name: '',\\n    enabled: true,\\n    tiers: [\\n      {\\n        id: uuidv4(),\\n        name: '',\\n        weight: 50,\\n        prompt: '',\\n      },\\n    ],\\n  };\\n  divinationStore.addDimension(newDim);\\n  // \\n  collapsedDimensions.value[newDim.id] = false;\\n};\\n\\n// \\nconst handleRemoveDimension = (index: any) => {\\n  if (confirm('')) {\\n    divinationStore.removeDimension(index);\\n  }\\n};\\n\\n// \\nconst addTier = (dimIndex: any) => {\\n  const newTier: DimensionTier = {\\n    id: uuidv4(),\\n    name: '',\\n    weight: 10,\\n    prompt: '',\\n    color: '#808080',\\n  };\\n  divinationStore.config.dimensions[dimIndex].tiers.push(newTier);\\n};\\n\\n// \\nconst removeTier = (dimIndex: any, tierIndex: any) => {\\n  divinationStore.config.dimensions[dimIndex].tiers.splice(tierIndex, 1);\\n};\\n\\n//  ()\\nconst insertTemplatePlaceholder = (placeholder: string) => {\\n  const current = divinationStore.config.customTemplate || '';\\n  divinationStore.config.customTemplate = current + placeholder;\\n\\n  // \\n  const textarea = templateInputRef.value;\\n  if (textarea) {\\n    setTimeout(() => {\\n      textarea.focus();\\n      textarea.scrollTop = textarea.scrollHeight;\\n      // \\n      const len = divinationStore.config.customTemplate.length;\\n      textarea.setSelectionRange(len, len);\\n    }, 0);\\n  }\\n};\\n</script>\\n\\n<style scoped>\\n/*\\n   src//styles/components/settings-panel.scss\\n   src//styles/components/divination-settings.scss \\n  \\n*/\\n.template-settings-group {\\n  padding: 12px;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n}\\n\\n.template-shortcuts-row {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  flex-wrap: wrap;\\n}\\n\\n.template-shortcuts-row .hint {\\n  font-size: 12px;\\n  color: var(--acu-text-sub);\\n}\\n\\n.acu-wildcard-btn {\\n  background: var(--acu-bg-panel);\\n  border: 1px solid var(--acu-border);\\n  border-radius: 4px;\\n  padding: 2px 6px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  color: var(--acu-title-color);\\n  transition: all 0.2s;\\n}\\n\\n.acu-wildcard-btn:hover {\\n  background: var(--acu-btn-hover);\\n  border-color: var(--acu-title-color);\\n}\\n\\n.acu-wildcard-btn code {\\n  font-family: monospace;\\n}\\n\\n.template-textarea {\\n  min-height: 120px;\\n  resize: vertical;\\n  line-height: 1.5;\\n  font-family: monospace;\\n  width: 100%;\\n  pointer-events: auto !important; /*  */\\n}\\n\\n.acu-wildcard-help {\\n  background: rgba(0, 0, 0, 0.05);\\n  border-radius: 8px;\\n  padding: 8px 12px;\\n}\\n\\n.acu-help-header {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n  cursor: pointer;\\n  font-size: 12px;\\n  color: var(--acu-text-sub);\\n  user-select: none;\\n}\\n\\n.acu-help-header strong {\\n  flex: 1;\\n}\\n\\n.acu-wildcard-help ul {\\n  margin: 8px 0 0 0;\\n  padding-left: 20px;\\n  list-style-type: disc;\\n  font-size: 12px;\\n  color: var(--acu-text-sub);\\n}\\n\\n.acu-wildcard-help li {\\n  margin-bottom: 4px;\\n}\\n\\n.acu-wildcard-help code {\\n  background: rgba(0, 0, 0, 0.1);\\n  padding: 0 4px;\\n  border-radius: 3px;\\n  font-family: monospace;\\n  color: var(--acu-text-main);\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/**\n * ACU  - \n *\n * \n * - extensionSettings.acu_visualizer\n * - localStorage\n * - IndexedDB\n */\n\nimport type { GraphConfig } from '../stores/useGraphConfigStore';\nimport type {\n  ACUConfig,\n  BackgroundConfig,\n  ButtonGroup,\n  CustomFont,\n  DashboardConfig,\n  DivinationConfig,\n  DivinationPreset,\n  FloatingBallAppearance,\n  GlobalTagLibrary,\n  HighlightConfig,\n  ThemePreset,\n  ThemeVarOpacities,\n  ThemeVariables,\n} from '../types';\n\n// ===  ===\n\n/**  */\nexport interface RowLockInfo {\n  /**  */\n  _fullRow: boolean;\n  /**  */\n  _fields: Record<string, string>;\n  /**  */\n  _snapshot: Record<string, string> | null;\n}\n\n/**  */\nexport type TableLocks = Record<string, RowLockInfo>;\n\n/**  */\nexport interface LockStorage {\n  [tableName: string]: TableLocks;\n}\n\n// === extensionSettings  ===\nexport const EXT_SETTINGS_KEY = 'acu_visualizer';\n\n// ===  ===\n\n/**  */\nexport interface ChatSpecificConfig {\n  visibleTabs: string[];\n  tabOrder: string[];\n  tableHeights: Record<string, number>;\n  tableStyles: Record<string, 'list' | 'card'>;\n  reverseTables: string[];\n  cellLocks: LockStorage; // \n  graphConfig?: GraphConfig; // \n}\n\n/**  */\nexport interface ButtonsConfig {\n  visibleButtons: string[];\n  buttonOrder: string[];\n  buttonGroups: ButtonGroup[];\n  longPressDirectExec: boolean;\n}\n\n/**  */\nexport interface ThemeConfig {\n  presets: ThemePreset[];\n  activePresetId: string | null;\n  themeVars: Partial<ThemeVariables>;\n  themeVarOpacities: ThemeVarOpacities;\n  highlight: HighlightConfig;\n  backgroundConfig: BackgroundConfig;\n  customCSS: string;\n}\n\n/**  */\nexport interface DivinationFullConfig {\n  config: DivinationConfig;\n  presets: DivinationPreset[];\n  activePresetId: string | null;\n}\n\n/**  */\nexport interface BallConfig {\n  appearance: FloatingBallAppearance;\n  customFonts: CustomFont[];\n}\n\n/** ACU  -  extensionSettings.acu_visualizer */\nexport interface ACUExtensionSettings {\n  version: number;\n  lastUpdated: number;\n\n  // \n  tabs: string[]; //  Tab \n  buttons: ButtonsConfig;\n  theme: ThemeConfig;\n  ui: Partial<ACUConfig>;\n  dashboard: Partial<DashboardConfig>;\n  tagLibrary: GlobalTagLibrary;\n  divination: DivinationFullConfig;\n  ball: BallConfig;\n\n  //  ChatID \n  chats: {\n    [chatId: string]: ChatSpecificConfig;\n  };\n}\n\n// === localStorage ===\nexport const LOCAL_KEYS = {\n  // \n  DATA_SNAPSHOT: 'acu_data_snapshot_v18_5',\n\n  // extensionSettings \n  CONFIG_CACHE: 'acu_config_cache_v1',\n\n  // \n  WINDOW_POSITION: 'acu_win_position',\n\n  // \n  BALL_POSITION: 'acu_ball_position',\n\n  //  UI \n  LOCAL_STATE: 'acu_local_state',\n} as const;\n\n// === IndexedDB  ===\nexport const IDB_KEYS = {\n  // \n  AVATAR_STORE: 'acu_avatars',\n\n  // \n  BACKGROUND_STORE: 'acu_backgrounds',\n\n  // \n  ROW_HISTORY: 'acu_row_history',\n} as const;\n\n/**  -  localStorage */\nexport interface ACULocalState {\n  windowPosition: { x: number; y: number; width: number; isCentered: boolean };\n  isCollapsed: boolean;\n  isPinned: boolean;\n  activeTab: string | null;\n  layout: 'horizontal' | 'vertical';\n}\n\n// ===  ===\nexport const DEFAULT_LOCAL_STATE: ACULocalState = {\n  windowPosition: { x: 0, y: 0, width: 400, isCentered: true },\n  isCollapsed: false,\n  isPinned: false,\n  activeTab: null,\n  layout: 'horizontal',\n};\n\nexport const DEFAULT_CHAT_CONFIG: ChatSpecificConfig = {\n  visibleTabs: [],\n  tabOrder: [],\n  tableHeights: {},\n  tableStyles: {},\n  reverseTables: [],\n  cellLocks: {},\n};\n","/**\n * ACU \n *\n *  extensionSettings \n * -  SillyTavern.extensionSettings \n * -  saveSettingsDebounced() \n */\n\nimport { reactive, ref } from 'vue';\nimport { DEFAULT_BACKGROUND_CONFIG } from '../types';\nimport {\n  DEFAULT_CHAT_CONFIG,\n  DEFAULT_LOCAL_STATE,\n  EXT_SETTINGS_KEY,\n  LOCAL_KEYS,\n  type ACUExtensionSettings,\n  type ACULocalState,\n  type BallConfig,\n  type ButtonsConfig,\n  type ChatSpecificConfig,\n  type DivinationFullConfig,\n  type ThemeConfig,\n} from './storageKeys';\n\n/**  */\nexport const DEFAULT_BUTTONS_CONFIG: ButtonsConfig = {\n  visibleButtons: ['save', 'collapseTab', 'refresh', 'toggle', 'settings'],\n  buttonOrder: [\n    'save',\n    'collapseTab',\n    'refresh',\n    'toggle',\n    'settings',\n    'director',\n    'saveAs',\n    'undo',\n    'manualUpdate',\n    'purge',\n    'pin',\n    'openNative',\n  ],\n  buttonGroups: [],\n  longPressDirectExec: false,\n};\n\n/**  */\nexport const DEFAULT_THEME_CONFIG: ThemeConfig = {\n  presets: [],\n  activePresetId: null,\n  themeVars: {},\n  themeVarOpacities: {},\n  highlight: {\n    manualColor: 'orange',\n    manualHex: '#d35400',\n    aiColor: 'blue',\n    aiHex: '#3498db',\n    titleColor: 'orange',\n    titleHex: '#d35400',\n  },\n  backgroundConfig: { ...DEFAULT_BACKGROUND_CONFIG },\n  customCSS: '',\n};\n\n/**  */\nexport const DEFAULT_DIVINATION_CONFIG: DivinationFullConfig = {\n  config: {\n    enabled: true,\n    drawCount: 4,\n    enableBias: true,\n    autoSync: true,\n    cardBackImage: '',\n    themeColor: '#6b4c9a',\n    themeId: 'wafuku',\n    flipMode: 'auto',\n    peepMode: false,\n    dimensions: [],\n    customTemplate: '',\n    enableWordDrawing: true,\n    enableTableWords: true,\n    enableWordPool: false,\n    wordDrawMode: 'perItem',\n    wordsPerItem: 1,\n    tablePoolConfig: {},\n    categoryConfig: {},\n    tableSyncConfig: {},\n  },\n  presets: [],\n  activePresetId: null,\n};\n\n/**  */\nexport const DEFAULT_BALL_CONFIG: BallConfig = {\n  appearance: {\n    type: 'icon',\n    content: 'fa-layer-group',\n    size: 50,\n    notifyAnimation: 'ripple',\n    borderColor: '#ffffff',\n    borderOpacity: 40,\n    bgColor: '#ffffff',\n    bgOpacity: 25,\n    imageInvert: false,\n  },\n  customFonts: [],\n};\n\n// \nconst DEFAULT_CONFIG: ACUExtensionSettings = {\n  version: 1,\n  lastUpdated: Date.now(),\n  tabs: [],\n  buttons: { ...DEFAULT_BUTTONS_CONFIG },\n  theme: { ...DEFAULT_THEME_CONFIG },\n  ui: {},\n  dashboard: { widgets: [], layout: 'grid', columns: 2, showStats: true },\n  tagLibrary: { categories: [], tags: [] },\n  divination: { ...DEFAULT_DIVINATION_CONFIG },\n  ball: { ...DEFAULT_BALL_CONFIG },\n  chats: {},\n};\n\nexport function useACUConfigManager() {\n  const isLoaded = ref(false);\n  const config = reactive<ACUExtensionSettings>({ ...DEFAULT_CONFIG });\n  const localState = reactive<ACULocalState>({ ...DEFAULT_LOCAL_STATE });\n\n  /**\n   * \n   */\n  function deepMergeConfig(stored: Partial<ACUExtensionSettings>): ACUExtensionSettings {\n    return {\n      ...DEFAULT_CONFIG,\n      ...stored,\n      // \n      buttons: {\n        ...DEFAULT_BUTTONS_CONFIG,\n        ...(stored.buttons || {}),\n      },\n      theme: {\n        ...DEFAULT_THEME_CONFIG,\n        ...(stored.theme || {}),\n        highlight: {\n          ...DEFAULT_THEME_CONFIG.highlight,\n          ...((stored.theme as any)?.highlight || {}),\n        },\n        backgroundConfig: {\n          ...DEFAULT_THEME_CONFIG.backgroundConfig,\n          ...((stored.theme as any)?.backgroundConfig || {}),\n        },\n      },\n      ui: {\n        ...DEFAULT_CONFIG.ui,\n        ...(stored.ui || {}),\n      },\n      dashboard: {\n        ...DEFAULT_CONFIG.dashboard,\n        ...(stored.dashboard || {}),\n      },\n      tagLibrary: {\n        categories: (stored.tagLibrary as any)?.categories || [],\n        tags: (stored.tagLibrary as any)?.tags || [],\n      },\n      divination: {\n        ...DEFAULT_DIVINATION_CONFIG,\n        ...(stored.divination || {}),\n        config: {\n          ...DEFAULT_DIVINATION_CONFIG.config,\n          ...((stored.divination as any)?.config || {}),\n        },\n      },\n      ball: {\n        ...DEFAULT_BALL_CONFIG,\n        ...(stored.ball || {}),\n        appearance: {\n          ...DEFAULT_BALL_CONFIG.appearance,\n          ...((stored.ball as any)?.appearance || {}),\n        },\n      },\n      chats: stored.chats || {},\n    };\n  }\n\n  /**\n   *  extensionSettings\n   */\n  function loadConfig(): void {\n    try {\n      // extensionSettings  API\n      //  iOS iframe \n      const stored = SillyTavern?.extensionSettings?.[EXT_SETTINGS_KEY];\n\n      //  extensionSettings  localStorage \n      if (!stored) {\n        console.warn('[ACU] extensionSettings ');\n        if (restoreFromCache()) {\n          console.info('[ACU] ');\n          isLoaded.value = true;\n          return;\n        }\n      }\n\n      if (stored) {\n        const merged = deepMergeConfig(stored);\n        Object.assign(config, merged);\n        console.info('[ACU] ');\n      } else {\n        // \n        //  saveConfig\n        // \n        Object.assign(config, DEFAULT_CONFIG);\n        console.info('[ACU] ');\n      }\n\n      // \n      loadLocalState();\n\n      //  localStorage\n      cacheToLocal();\n    } catch (e) {\n      console.warn('[ACU] :', e);\n\n      if (!restoreFromCache()) {\n        Object.assign(config, DEFAULT_CONFIG);\n        console.warn('[ACU] ');\n      }\n    }\n\n    isLoaded.value = true;\n  }\n\n  /**\n   *  extensionSettings\n   */\n  async function saveConfig(): Promise<void> {\n    try {\n      config.lastUpdated = Date.now();\n      SillyTavern.extensionSettings[EXT_SETTINGS_KEY] = { ...config };\n      await SillyTavern.saveSettingsDebounced();\n\n      // \n      cacheToLocal();\n    } catch (e) {\n      console.error('[ACU] :', e);\n    }\n  }\n\n  /**\n   *  localStorage\n   */\n  function loadLocalState(): void {\n    try {\n      const stored = localStorage.getItem(LOCAL_KEYS.LOCAL_STATE);\n      if (stored) {\n        Object.assign(localState, DEFAULT_LOCAL_STATE, JSON.parse(stored));\n      }\n    } catch (e) {\n      // \n    }\n  }\n\n  /**\n   *  localStorage\n   */\n  function saveLocalState(): void {\n    try {\n      localStorage.setItem(LOCAL_KEYS.LOCAL_STATE, JSON.stringify(localState));\n    } catch (e) {\n      // \n    }\n  }\n\n  /**\n   *  localStorage\n   */\n  function cacheToLocal(): void {\n    try {\n      localStorage.setItem(LOCAL_KEYS.CONFIG_CACHE, JSON.stringify(config));\n    } catch (e) {\n      // localStorage \n    }\n  }\n\n  /**\n   * \n   */\n  function restoreFromCache(): boolean {\n    try {\n      const cached = localStorage.getItem(LOCAL_KEYS.CONFIG_CACHE);\n      if (cached) {\n        const merged = deepMergeConfig(JSON.parse(cached));\n        Object.assign(config, merged);\n        return true;\n      }\n    } catch (e) {\n      // \n    }\n    return false;\n  }\n\n  /**\n   * \n   */\n  function getChatConfig(chatId: string): ChatSpecificConfig {\n    return config.chats[chatId] ?? { ...DEFAULT_CHAT_CONFIG };\n  }\n\n  /**\n   * \n   */\n  function setChatConfig(chatId: string, chatConfig: Partial<ChatSpecificConfig>): void {\n    if (!config.chats[chatId]) {\n      config.chats[chatId] = { ...DEFAULT_CHAT_CONFIG };\n    }\n    Object.assign(config.chats[chatId], chatConfig);\n    saveConfig();\n  }\n\n  /**\n   * \n   */\n  function exportAllConfigs(): string {\n    return JSON.stringify(\n      {\n        exportVersion: 1,\n        exportTime: Date.now(),\n        config: { ...config },\n        localState: { ...localState },\n      },\n      null,\n      2,\n    );\n  }\n\n  /**\n   * \n   */\n  async function importConfigs(jsonString: string): Promise<{ success: boolean; message: string }> {\n    try {\n      const data = JSON.parse(jsonString);\n\n      if (!data.exportVersion || !data.config) {\n        return { success: false, message: '' };\n      }\n\n      Object.assign(config, DEFAULT_CONFIG, data.config);\n      await saveConfig();\n\n      if (data.localState) {\n        Object.assign(localState, DEFAULT_LOCAL_STATE, data.localState);\n        saveLocalState();\n      }\n\n      return { success: true, message: '' };\n    } catch (e) {\n      return { success: false, message: `: ${e}` };\n    }\n  }\n\n  /**\n   * \n   */\n  async function resetToDefault(): Promise<void> {\n    Object.assign(config, DEFAULT_CONFIG);\n    config.version = 1;\n    config.lastUpdated = Date.now();\n    await saveConfig();\n\n    Object.assign(localState, DEFAULT_LOCAL_STATE);\n    saveLocalState();\n  }\n\n  return {\n    isLoaded,\n    config,\n    localState,\n    loadConfig,\n    saveConfig,\n    loadLocalState,\n    saveLocalState,\n    getChatConfig,\n    setChatConfig,\n    exportAllConfigs,\n    importConfigs,\n    resetToDefault,\n  };\n}\n\n// \nlet _instance: ReturnType<typeof useACUConfigManager> | null = null;\n\nexport function getACUConfigManager() {\n  if (!_instance) {\n    _instance = useACUConfigManager();\n  }\n  return _instance;\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * useAvatarManager -  Composable\n *\n * \n * - IndexedDB \n * - \n * -  URL\n * - \n * - \n */\n\nimport { ref } from 'vue';\n\n// ============================================================\n// \n// ============================================================\n\nexport interface AvatarRecord {\n  /**  */\n  name: string;\n  /**  Blob URL  */\n  blob?: Blob;\n  /**  URL */\n  url?: string;\n  /**  - X  (0-100) */\n  offsetX: number;\n  /**  - Y  (0-100) */\n  offsetY: number;\n  /**  -  (100-300) */\n  scale: number;\n  /**  */\n  aliases: string[];\n  /**\n   * @deprecated  acu_graph_config.labels\n   * \n   */\n  labelIndices?: number[];\n  /**  */\n  updatedAt: number;\n}\n\nexport interface AvatarStats {\n  count: number;\n  totalSizeBytes: number;\n  totalSizeMB: string;\n}\n\n// ============================================================\n// IndexedDB \n// ============================================================\n\nconst DB_NAME = 'acu_avatars';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'avatars';\n\n// ============================================================\n// \n// ============================================================\n\nlet dbInstance: IDBDatabase | null = null;\nconst urlCache = new Map<string, string>(); //  ObjectURL \n\n// ============================================================\n// Composable \n// ============================================================\n\nexport function useAvatarManager() {\n  const isReady = ref(false);\n  const error = ref<string | null>(null);\n\n  // ============================================================\n  // IndexedDB \n  // ============================================================\n\n  async function initDB(): Promise<IDBDatabase> {\n    if (dbInstance) return dbInstance;\n\n    return new Promise((resolve, reject) => {\n      const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n      request.onerror = () => {\n        const errMsg = `[AvatarManager] : ${request.error?.message}`;\n        console.error(errMsg);\n        error.value = errMsg;\n        reject(request.error);\n      };\n\n      request.onsuccess = () => {\n        dbInstance = request.result;\n\n        // \n        dbInstance.onclose = () => {\n          console.warn('[AvatarManager] ');\n          dbInstance = null;\n          isReady.value = false;\n        };\n\n        dbInstance.onerror = event => {\n          console.error('[AvatarManager] :', (event.target as any).error);\n        };\n\n        isReady.value = true;\n        console.info('[AvatarManager] ');\n        resolve(dbInstance);\n      };\n\n      request.onupgradeneeded = event => {\n        const db = (event.target as IDBOpenDBRequest).result;\n\n        if (!db.objectStoreNames.contains(STORE_NAME)) {\n          // \n          db.createObjectStore(STORE_NAME, { keyPath: 'name' });\n          console.info('[AvatarManager] ');\n        }\n      };\n    });\n  }\n\n  // ============================================================\n  // CRUD \n  // ============================================================\n\n  /**\n   * \n   */\n  async function saveAvatar(record: AvatarRecord): Promise<void> {\n    const db = await initDB();\n\n    return new Promise((resolve, reject) => {\n      const tx = db.transaction(STORE_NAME, 'readwrite');\n      const store = tx.objectStore(STORE_NAME);\n\n      //  ObjectURL \n      if (urlCache.has(record.name)) {\n        URL.revokeObjectURL(urlCache.get(record.name)!);\n        urlCache.delete(record.name);\n      }\n\n      //  updatedAt \n      const data = {\n        ...record,\n        updatedAt: record.updatedAt || Date.now(),\n      };\n\n      const request = store.put(data);\n\n      request.onsuccess = () => {\n        console.info(`[AvatarManager] : ${record.name}`);\n        resolve();\n      };\n\n      request.onerror = () => {\n        console.error(`[AvatarManager] : ${request.error}`);\n        reject(request.error);\n      };\n    });\n  }\n\n  /**\n   * \n   */\n  async function getAvatar(name: string): Promise<AvatarRecord | null> {\n    if (!name) return null;\n\n    const db = await initDB();\n\n    return new Promise(resolve => {\n      const tx = db.transaction(STORE_NAME, 'readonly');\n      const store = tx.objectStore(STORE_NAME);\n      const request = store.get(name);\n\n      request.onsuccess = () => {\n        resolve(request.result || null);\n      };\n\n      request.onerror = () => {\n        console.error(`[AvatarManager] : ${request.error}`);\n        resolve(null);\n      };\n    });\n  }\n\n  /**\n   * \n   */\n  async function deleteAvatar(name: string): Promise<void> {\n    if (!name) return;\n\n    //  ObjectURL \n    if (urlCache.has(name)) {\n      URL.revokeObjectURL(urlCache.get(name)!);\n      urlCache.delete(name);\n    }\n\n    const db = await initDB();\n\n    return new Promise(resolve => {\n      const tx = db.transaction(STORE_NAME, 'readwrite');\n      const store = tx.objectStore(STORE_NAME);\n      const request = store.delete(name);\n\n      request.onsuccess = () => {\n        console.info(`[AvatarManager] : ${name}`);\n        resolve();\n      };\n\n      request.onerror = () => {\n        console.error(`[AvatarManager] : ${request.error}`);\n        resolve();\n      };\n    });\n  }\n\n  /**\n   * \n   */\n  async function deleteAvatars(names: string[]): Promise<void> {\n    if (!names.length) return;\n\n    //  ObjectURL \n    for (const name of names) {\n      if (urlCache.has(name)) {\n        URL.revokeObjectURL(urlCache.get(name)!);\n        urlCache.delete(name);\n      }\n    }\n\n    const db = await initDB();\n\n    return new Promise((resolve, reject) => {\n      const tx = db.transaction(STORE_NAME, 'readwrite');\n      const store = tx.objectStore(STORE_NAME);\n\n      let completed = 0;\n      const total = names.length;\n\n      for (const name of names) {\n        const request = store.delete(name);\n        request.onsuccess = () => {\n          completed++;\n          if (completed === total) {\n            console.info(`[AvatarManager] : ${total} `);\n            resolve();\n          }\n        };\n        request.onerror = () => {\n          console.error(`[AvatarManager] : ${name}`);\n          completed++;\n          if (completed === total) {\n            resolve();\n          }\n        };\n      }\n\n      tx.onerror = () => reject(tx.error);\n    });\n  }\n\n  /**\n   * \n   */\n  async function getAllAvatars(): Promise<AvatarRecord[]> {\n    const db = await initDB();\n\n    return new Promise(resolve => {\n      const tx = db.transaction(STORE_NAME, 'readonly');\n      const store = tx.objectStore(STORE_NAME);\n      const request = store.getAll();\n\n      request.onsuccess = () => {\n        resolve(request.result || []);\n      };\n\n      request.onerror = () => {\n        console.error(`[AvatarManager] : ${request.error}`);\n        resolve([]);\n      };\n    });\n  }\n\n  /**\n   * \n   */\n  async function hasAvatar(name: string): Promise<boolean> {\n    if (!name) return false;\n\n    const db = await initDB();\n\n    return new Promise(resolve => {\n      const tx = db.transaction(STORE_NAME, 'readonly');\n      const store = tx.objectStore(STORE_NAME);\n      const request = store.getKey(name);\n\n      request.onsuccess = () => resolve(request.result !== undefined);\n      request.onerror = () => resolve(false);\n    });\n  }\n\n  /**\n   * \n   */\n  async function getStats(): Promise<AvatarStats> {\n    const db = await initDB();\n\n    return new Promise(resolve => {\n      const tx = db.transaction(STORE_NAME, 'readonly');\n      const store = tx.objectStore(STORE_NAME);\n      const request = store.getAll();\n\n      request.onsuccess = () => {\n        const items = request.result || [];\n        const totalSizeBytes = items.reduce((sum, item) => {\n          return sum + (item.blob?.size || 0);\n        }, 0);\n\n        resolve({\n          count: items.length,\n          totalSizeBytes,\n          totalSizeMB: (totalSizeBytes / 1024 / 1024).toFixed(2),\n        });\n      };\n\n      request.onerror = () => {\n        resolve({ count: 0, totalSizeBytes: 0, totalSizeMB: '0.00' });\n      };\n    });\n  }\n\n  /**\n   * \n   */\n  async function clearAll(): Promise<void> {\n    //  ObjectURL \n    urlCache.forEach(url => URL.revokeObjectURL(url));\n    urlCache.clear();\n\n    const db = await initDB();\n\n    return new Promise(resolve => {\n      const tx = db.transaction(STORE_NAME, 'readwrite');\n      const store = tx.objectStore(STORE_NAME);\n      const request = store.clear();\n\n      request.onsuccess = () => {\n        console.info('[AvatarManager] ');\n        resolve();\n      };\n\n      request.onerror = () => {\n        console.error(`[AvatarManager] : ${request.error}`);\n        resolve();\n      };\n    });\n  }\n\n  // ============================================================\n  //  URL \n  // ============================================================\n\n  /**\n   *  URL API\n   *  Blob > URL > \n   */\n  async function getAvatarUrl(name: string): Promise<string | null> {\n    if (!name) return null;\n\n    // 1. \n    if (urlCache.has(name)) {\n      return urlCache.get(name)!;\n    }\n\n    // 2.  IndexedDB\n    const record = await getAvatar(name);\n\n    if (record) {\n      //  Blob \n      if (record.blob) {\n        const url = URL.createObjectURL(record.blob);\n        urlCache.set(name, url);\n        return url;\n      }\n\n      //  URL\n      if (record.url) {\n        return record.url;\n      }\n    }\n\n    // 3. \n    const primaryName = await resolvePrimaryName(name);\n    if (primaryName !== name) {\n      return getAvatarUrl(primaryName);\n    }\n\n    // 4. \n    if (isPlayerNode(name)) {\n      const stAvatar = getSillyTavernUserAvatar();\n      if (stAvatar) return stAvatar;\n    }\n\n    return null;\n  }\n\n  /**\n   * \n   */\n  async function getAvatarDisplayConfig(name: string): Promise<{ offsetX: number; offsetY: number; scale: number }> {\n    const record = await getAvatar(name);\n\n    if (record) {\n      return {\n        offsetX: record.offsetX ?? 50,\n        offsetY: record.offsetY ?? 50,\n        scale: record.scale ?? 150,\n      };\n    }\n\n    // \n    return { offsetX: 50, offsetY: 50, scale: 150 };\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   *  URL\n   *  persona \n   */\n  function getSillyTavernUserAvatar(): string | null {\n    try {\n      const w = window.parent || window;\n      const $ = (w as any).jQuery || (window as any).jQuery;\n\n      if ($) {\n        // 1.  persona \n        const $userMes = $('.mes[is_user=\"true\"]').last().find('.avatar img');\n        if ($userMes.length && $userMes.attr('src')) {\n          const src = $userMes.attr('src');\n          // \n          if (src && !src.includes('default') && !src.includes('placeholder')) {\n            return src;\n          }\n        }\n\n        // 2.  #user_avatar_block \n        const $avatar = $('#user_avatar_block img').first();\n        if ($avatar.length && $avatar.attr('src')) {\n          return $avatar.attr('src');\n        }\n      }\n\n      // 3.  SillyTavern API \n      const ST = (w as any).SillyTavern || (window as any).SillyTavern;\n      if (ST?.getContext) {\n        const ctx = ST.getContext();\n        if (ctx?.userAvatar) {\n          return ctx.userAvatar;\n        }\n      }\n    } catch (e) {\n      console.warn('[AvatarManager] getSillyTavernUserAvatar error:', e);\n    }\n\n    return null;\n  }\n\n  /**\n   *  URL\n   */\n  function getSillyTavernCharacterAvatar(): string | null {\n    try {\n      const w = window.parent || window;\n      const $ = (w as any).jQuery || (window as any).jQuery;\n\n      if ($) {\n        //  #avatar_img_holder img\n        const $avatar = $('#avatar_img_holder img').first();\n        if ($avatar.length && $avatar.attr('src')) {\n          return $avatar.attr('src');\n        }\n\n        //  AI \n        const $aiMes = $('.mes:not([is_user=\"true\"])').last().find('.avatar img');\n        if ($aiMes.length && $aiMes.attr('src')) {\n          return $aiMes.attr('src');\n        }\n      }\n\n      //  SillyTavern API \n      const ST = (w as any).SillyTavern || (window as any).SillyTavern;\n      if (ST?.getContext) {\n        const ctx = ST.getContext();\n        if (ctx?.characterAvatar) {\n          return ctx.characterAvatar;\n        }\n      }\n    } catch (e) {\n      console.warn('[AvatarManager] getSillyTavernCharacterAvatar error:', e);\n    }\n\n    return null;\n  }\n\n  /**\n   * \n   */\n  function getPlayerNameFromTable(): string | null {\n    try {\n      const w = window.parent || window;\n      const api = (w as any).AutoCardUpdaterAPI;\n\n      if (api?.exportTableAsJson) {\n        const rawData = api.exportTableAsJson();\n        for (const key in rawData) {\n          const sheet = rawData[key];\n          if (sheet?.name?.includes('') && sheet.content?.[1]?.[1]) {\n            return sheet.content[1][1];\n          }\n        }\n      }\n    } catch (e) {\n      console.warn('[AvatarManager] getPlayerNameFromTable error:', e);\n    }\n\n    return null;\n  }\n\n  /**\n   * \n   */\n  function isPlayerNode(name: string): boolean {\n    if (!name) return false;\n\n    // \n    const playerPatterns = ['<user>', '{{user}}', '', 'player', 'protagonist'];\n    const lowerName = name.toLowerCase();\n\n    for (const pattern of playerPatterns) {\n      if (lowerName === pattern.toLowerCase()) return true;\n    }\n\n    // \n    const playerName = getPlayerNameFromTable();\n    if (playerName && name === playerName) return true;\n\n    return false;\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  async function resolvePrimaryName(name: string): Promise<string> {\n    if (!name) return name;\n\n    const all = await getAllAvatars();\n\n    for (const record of all) {\n      if (record.aliases?.includes(name)) {\n        return record.name;\n      }\n    }\n\n    return name;\n  }\n\n  /**\n   * \n   * @returns Map<, >\n   */\n  async function getAliasMap(): Promise<Map<string, string>> {\n    const all = await getAllAvatars();\n    const map = new Map<string, string>();\n\n    for (const record of all) {\n      if (record.aliases?.length) {\n        for (const alias of record.aliases) {\n          map.set(alias, record.name);\n        }\n      }\n    }\n\n    return map;\n  }\n\n  /**\n   * \n   */\n  async function getAliases(name: string): Promise<string[]> {\n    const record = await getAvatar(name);\n    return record?.aliases || [];\n  }\n\n  /**\n   * \n   */\n  async function setAliases(name: string, aliases: string[]): Promise<void> {\n    let record = await getAvatar(name);\n\n    if (!record) {\n      // \n      record = {\n        name,\n        offsetX: 50,\n        offsetY: 50,\n        scale: 150,\n        aliases,\n        updatedAt: Date.now(),\n      };\n    } else {\n      record = { ...record, aliases, updatedAt: Date.now() };\n    }\n\n    await saveAvatar(record);\n  }\n\n  /**\n   * \n   */\n  async function addAlias(name: string, alias: string): Promise<void> {\n    const record = await getAvatar(name);\n    if (!record) return;\n\n    const aliases = record.aliases || [];\n    if (!aliases.includes(alias)) {\n      aliases.push(alias);\n      await saveAvatar({ ...record, aliases, updatedAt: Date.now() });\n    }\n  }\n\n  /**\n   * \n   */\n  async function removeAlias(name: string, alias: string): Promise<void> {\n    const record = await getAvatar(name);\n    if (!record) return;\n\n    const aliases = (record.aliases || []).filter(a => a !== alias);\n    await saveAvatar({ ...record, aliases, updatedAt: Date.now() });\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * @deprecated  acu_graph_config.labels\n   * \n   */\n  async function getDisplayLabel(name: string): Promise<string> {\n    //  IndexedDB \n    // \n    return name;\n  }\n\n  /**\n   * @deprecated  acu_graph_config.labels\n   * \n   */\n  async function setDisplayLabel(_name: string, _labelIndices: number[]): Promise<void> {\n    console.warn('[AvatarManager] setDisplayLabel ');\n    //  IndexedDB\n  }\n\n  /**\n   * \n   */\n  function getDisplayChars(name: string): string[] {\n    if (!name) return [];\n    //  Intl.Segmenter  Unicode  emoji\n    if (typeof Intl !== 'undefined' && Intl.Segmenter) {\n      const segmenter = new Intl.Segmenter('zh', { granularity: 'grapheme' });\n      return Array.from(segmenter.segment(name), s => s.segment);\n    }\n    // Fallback: \n    return [...name];\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   *  ObjectURL \n   */\n  function cleanup(): void {\n    urlCache.forEach(url => URL.revokeObjectURL(url));\n    urlCache.clear();\n    console.info('[AvatarManager]  ObjectURL ');\n  }\n\n  // ============================================================\n  //  API\n  // ============================================================\n\n  return {\n    // \n    isReady,\n    error,\n\n    // \n    initDB,\n\n    // CRUD\n    saveAvatar,\n    getAvatar,\n    deleteAvatar,\n    deleteAvatars,\n    getAllAvatars,\n    hasAvatar,\n    getStats,\n    clearAll,\n\n    // \n    getAvatarUrl,\n    getAvatarDisplayConfig,\n\n    // \n    getSillyTavernUserAvatar,\n    getSillyTavernCharacterAvatar,\n    getPlayerNameFromTable,\n    isPlayerNode,\n\n    // \n    resolvePrimaryName,\n    addAlias,\n    removeAlias,\n    getAliasMap,\n    getAliases,\n    setAliases,\n\n    // \n    getDisplayLabel,\n    setDisplayLabel,\n    getDisplayChars,\n\n    // \n    cleanup,\n  };\n}\n\n// \nlet instance: ReturnType<typeof useAvatarManager> | null = null;\n\nexport function getAvatarManager() {\n  if (!instance) {\n    instance = useAvatarManager();\n  }\n  return instance;\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  IndexedDB \n *  Base64 \n */\n\nconst DB_NAME = 'acu_background_db';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'backgrounds';\n\n/**  Key */\nexport const GLOBAL_THEME_BG_KEY = 'global_theme_background';\n\nlet dbInstance: IDBDatabase | null = null;\n\n/**\n * \n */\nexport interface BackgroundRecord {\n  /**  */\n  chatId: string;\n  /**  */\n  imageData: Blob;\n  /**  MIME  */\n  mimeType: string;\n  /**  */\n  timestamp: number;\n}\n\n/**\n * \n */\nasync function initDB(): Promise<IDBDatabase> {\n  if (dbInstance) return dbInstance;\n\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n    request.onerror = () => {\n      console.error('[ACU Background] :', request.error);\n      reject(request.error);\n    };\n\n    request.onsuccess = () => {\n      dbInstance = request.result;\n      console.info('[ACU Background] ');\n      resolve(dbInstance);\n    };\n\n    request.onupgradeneeded = event => {\n      const db = (event.target as IDBOpenDBRequest).result;\n\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\n        db.createObjectStore(STORE_NAME, { keyPath: 'chatId' });\n        console.info('[ACU Background] ');\n      }\n    };\n  });\n}\n\n/**\n * \n * @param chatId  ID\n * @param imageData  Blob \n * @param mimeType \n */\nexport async function saveBackground(chatId: string, imageData: Blob, mimeType: string = 'image/png'): Promise<void> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n\n    const record: BackgroundRecord = {\n      chatId,\n      imageData,\n      mimeType,\n      timestamp: Date.now(),\n    };\n\n    const request = store.put(record);\n\n    request.onsuccess = () => {\n      console.info('[ACU Background] , chatId:', chatId);\n      resolve();\n    };\n\n    request.onerror = () => {\n      console.error('[ACU Background] :', request.error);\n      reject(request.error);\n    };\n  });\n}\n\n/**\n * \n * @param chatId  ID\n * @returns blob URL  null\n */\nexport async function loadBackground(chatId: string): Promise<string | null> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readonly');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.get(chatId);\n\n    request.onsuccess = () => {\n      const record = request.result as BackgroundRecord | undefined;\n      if (record?.imageData) {\n        const blobUrl = URL.createObjectURL(record.imageData);\n        console.info('[ACU Background] , chatId:', chatId);\n        resolve(blobUrl);\n      } else {\n        resolve(null);\n      }\n    };\n\n    request.onerror = () => {\n      console.error('[ACU Background] :', request.error);\n      reject(request.error);\n    };\n  });\n}\n\n/**\n * \n * @param chatId  ID\n */\nexport async function deleteBackground(chatId: string): Promise<void> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.delete(chatId);\n\n    request.onsuccess = () => {\n      console.info('[ACU Background] , chatId:', chatId);\n      resolve();\n    };\n\n    request.onerror = () => {\n      console.error('[ACU Background] :', request.error);\n      reject(request.error);\n    };\n  });\n}\n\n/**\n * \n * @param chatId  ID\n */\nexport async function hasBackground(chatId: string): Promise<boolean> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readonly');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.count(IDBKeyRange.only(chatId));\n\n    request.onsuccess = () => {\n      resolve(request.result > 0);\n    };\n\n    request.onerror = () => {\n      console.error('[ACU Background] :', request.error);\n      reject(request.error);\n    };\n  });\n}\n\n/**\n *  File/Blob \n * @param file \n */\nexport async function fileToBlob(file: File): Promise<{ blob: Blob; mimeType: string }> {\n  return {\n    blob: file,\n    mimeType: file.type || 'image/png',\n  };\n}\n\n/**\n *  URL data URL Blob\n * @param url  URL\n */\nexport async function urlToBlob(url: string): Promise<{ blob: Blob; mimeType: string }> {\n  //  data URL\n  if (url.startsWith('data:')) {\n    const response = await fetch(url);\n    const blob = await response.blob();\n    return { blob, mimeType: blob.type };\n  }\n\n  // \n  try {\n    const response = await fetch(url, { mode: 'cors' });\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n    const blob = await response.blob();\n    return { blob, mimeType: blob.type };\n  } catch {\n    throw new Error('');\n  }\n}\n\n/**\n *  blob URL \n * @param blobUrl blob URL\n */\nexport function revokeBlobUrl(blobUrl: string): void {\n  if (blobUrl.startsWith('blob:')) {\n    URL.revokeObjectURL(blobUrl);\n  }\n}\n","/**\n *  Composable\n *\n * \n * - \n * -  ID  ConfigManager \n * -   \n * -  APIsyncToDatabase AI \n *\n * applyLocks  syncToDatabase \n *  API  AI \n */\nimport { computed, ref } from 'vue';\nimport { getCore } from '../utils/index';\nimport { getACUConfigManager } from './useACUConfigManager';\n// ============================================================\n// \n// ============================================================\n/**  */\nconst PRIMARY_KEYS = {\n    : null,\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n};\n// ============================================================\n// \n// ============================================================\n/**  ID */\nfunction getCurrentChatId() {\n    return SillyTavern.getCurrentChatId() || 'default';\n}\n// ============================================================\n// \n// ============================================================\n/**  ConfigManager  */\nconst persistedLocks = ref({});\n/**  */\nconst pendingLocks = ref({});\n/**  ID */\nlet currentChatId = null;\n// ============================================================\n//  Composable\n// ============================================================\nexport function useCellLock() {\n    const configManager = getACUConfigManager();\n    /**  ConfigManager  */\n    function loadLocks() {\n        const chatId = getCurrentChatId();\n        // \n        if (currentChatId !== chatId) {\n            currentChatId = chatId;\n            const chatConfig = configManager.getChatConfig(chatId);\n            persistedLocks.value = chatConfig.cellLocks || {};\n        }\n        return persistedLocks.value;\n    }\n    /**  ConfigManager */\n    function saveLocks() {\n        const chatId = getCurrentChatId();\n        configManager.setChatConfig(chatId, { cellLocks: { ...persistedLocks.value } });\n        console.info('[CellLock]  ConfigManager');\n    }\n    /**\n     *  rowKey \n     * rowKey \n     * - \"fieldName=fieldValue\" ()\n     * - \"_row_N\" ()\n     */\n    function parseRowKey(rowKey) {\n        if (rowKey.startsWith('_row_')) {\n            const idx = parseInt(rowKey.substring(5), 10);\n            return Number.isFinite(idx) ? { type: 'index', index: idx } : null;\n        }\n        const eqIdx = rowKey.indexOf('=');\n        if (eqIdx > 0) {\n            return { type: 'pk', field: rowKey.substring(0, eqIdx), value: rowKey.substring(eqIdx + 1) };\n        }\n        return null;\n    }\n    /**\n     *  rowKey \n     *  rowKey  getRowKey()  fallback \n     */\n    function findRowIndexByKey(_tableName, rowKey, content, headers) {\n        const parsed = parseRowKey(rowKey);\n        if (!parsed)\n            return -1;\n        if (parsed.type === 'index') {\n            // \n            return parsed.index < content.length - 1 ? parsed.index : -1;\n        }\n        //  headers \n        const colIdx = headers.indexOf(parsed.field);\n        if (colIdx === -1)\n            return -1;\n        for (let i = 1; i < content.length; i++) {\n            if (String(content[i][colIdx] ?? '') === parsed.value) {\n                return i - 1; //  0-based \n            }\n        }\n        return -1;\n    }\n    /**  API */\n    function syncToDatabase(locks) {\n        const api = getCore().getDB();\n        if (!api?.setTableLockState) {\n            console.warn('[CellLock]  API  ConfigManager');\n            return;\n        }\n        const tableData = api.exportTableAsJson?.();\n        if (!tableData)\n            return;\n        for (const sheetKey in tableData) {\n            if (!sheetKey.startsWith('sheet_'))\n                continue;\n            const tableName = tableData[sheetKey]?.name;\n            if (!tableName)\n                continue;\n            const tableLocks = locks[tableName];\n            if (!tableLocks || Object.keys(tableLocks).length === 0) {\n                api.clearTableLocks?.(sheetKey);\n                continue;\n            }\n            const content = tableData[sheetKey]?.content;\n            if (!content || content.length < 2)\n                continue;\n            const headers = content[0];\n            const rowIndices = [];\n            const cellKeys = [];\n            for (const [rowKey, lock] of Object.entries(tableLocks)) {\n                const rowIndex = findRowIndexByKey(tableName, rowKey, content, headers);\n                if (rowIndex === -1)\n                    continue;\n                if (lock._fullRow) {\n                    rowIndices.push(rowIndex);\n                }\n                else {\n                    for (const fieldName of Object.keys(lock._fields)) {\n                        const colIndex = headers.indexOf(fieldName);\n                        //  0-based headers[0]  null 1\n                        if (colIndex > 0) {\n                            cellKeys.push(`${rowIndex}:${colIndex - 1}`);\n                        }\n                    }\n                }\n            }\n            api.setTableLockState(sheetKey, {\n                rows: rowIndices,\n                cols: [],\n                cells: cellKeys,\n            });\n        }\n        console.info('[CellLock]  API');\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**  */\n    function initPendingLocks() {\n        loadLocks();\n        // \n        pendingLocks.value = JSON.parse(JSON.stringify(persistedLocks.value));\n        //  ConfigManager \n        if (Object.keys(persistedLocks.value).length > 0) {\n            syncToDatabase(persistedLocks.value);\n        }\n    }\n    /**  */\n    function savePendingLocks() {\n        persistedLocks.value = JSON.parse(JSON.stringify(pendingLocks.value));\n        saveLocks();\n        syncToDatabase(persistedLocks.value); //  API\n    }\n    /**  */\n    function discardPendingLocks() {\n        pendingLocks.value = {};\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     * @param tableName \n     * @param row \n     * @param headers \n     * @param rowIndex  fallback\n     */\n    function getRowKey(tableName, row, headers, rowIndex) {\n        const pkField = PRIMARY_KEYS[tableName];\n        // \n        if (pkField === null)\n            return '_row_0';\n        let fieldIndex = 1; // \n        if (pkField) {\n            const idx = headers.indexOf(pkField);\n            if (idx !== -1)\n                fieldIndex = idx;\n        }\n        const value = row[fieldIndex];\n        // \n        if (value) {\n            return `${pkField || headers[fieldIndex]}=${value}`;\n        }\n        // Fallback\n        if (rowIndex !== undefined) {\n            return `_row_${rowIndex}`;\n        }\n        //  fallback\n        for (let i = 0; i < row.length; i++) {\n            if (row[i] && i !== 0) {\n                return `${headers[i] || `col${i}`}=${row[i]}`;\n            }\n        }\n        return null;\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     * @param tableName \n     * @param rowKey \n     * @param fieldName \n     * @param value \n     */\n    function toggleCellLock(tableName, rowKey, fieldName, value) {\n        // \n        const newLocks = JSON.parse(JSON.stringify(pendingLocks.value));\n        if (!newLocks[tableName]) {\n            newLocks[tableName] = {};\n        }\n        if (!newLocks[tableName][rowKey]) {\n            newLocks[tableName][rowKey] = {\n                _fullRow: false,\n                _fields: {},\n                _snapshot: null,\n            };\n        }\n        const lock = newLocks[tableName][rowKey];\n        let result;\n        //  snapshot \n        if (lock._fullRow && lock._snapshot) {\n            if (lock._snapshot[fieldName] !== undefined) {\n                delete lock._snapshot[fieldName];\n                //  snapshot \n                if (Object.keys(lock._snapshot).length === 0) {\n                    lock._fullRow = false;\n                    lock._snapshot = null;\n                }\n                result = false; // \n            }\n            else {\n                //  snapshot  fields\n                lock._fields[fieldName] = value;\n                result = true; // \n            }\n        }\n        else if (lock._fields[fieldName] !== undefined) {\n            //  - \n            delete lock._fields[fieldName];\n            result = false; // \n        }\n        else {\n            //  - \n            lock._fields[fieldName] = value;\n            result = true; // \n        }\n        // \n        if (!lock._fullRow && Object.keys(lock._fields).length === 0) {\n            delete newLocks[tableName][rowKey];\n            if (Object.keys(newLocks[tableName]).length === 0) {\n                delete newLocks[tableName];\n            }\n        }\n        // \n        pendingLocks.value = newLocks;\n        console.log('[CellLock] toggleCellLock:', tableName, rowKey, fieldName, '->', result, 'count:', countLocks(newLocks));\n        return result;\n    }\n    /**  */\n    function countLocks(locks) {\n        let count = 0;\n        for (const tableLocks of Object.values(locks)) {\n            if (typeof tableLocks !== 'object')\n                continue;\n            for (const lock of Object.values(tableLocks)) {\n                if (lock._fullRow) {\n                    count += Object.keys(lock._snapshot || {}).length;\n                }\n                else {\n                    count += Object.keys(lock._fields || {}).length;\n                }\n            }\n        }\n        return count;\n    }\n    /**\n     * \n     * @param tableName \n     * @param rowKey \n     * @param headers \n     * @param row \n     */\n    function toggleRowLock(tableName, rowKey, headers, row) {\n        // \n        const newLocks = JSON.parse(JSON.stringify(pendingLocks.value));\n        if (!newLocks[tableName]) {\n            newLocks[tableName] = {};\n        }\n        const lock = newLocks[tableName]?.[rowKey];\n        // \n        if (lock?._fullRow) {\n            delete newLocks[tableName][rowKey];\n            if (Object.keys(newLocks[tableName]).length === 0) {\n                delete newLocks[tableName];\n            }\n            pendingLocks.value = newLocks;\n            console.log('[CellLock] toggleRowLock: ', tableName, rowKey);\n            return false; // \n        }\n        // \n        const snapshot = {};\n        headers.forEach((h, i) => {\n            if (h && row[i] != null && row[i] !== '') {\n                snapshot[h] = row[i];\n            }\n        });\n        newLocks[tableName][rowKey] = {\n            _fullRow: true,\n            _fields: {},\n            _snapshot: snapshot,\n        };\n        pendingLocks.value = newLocks;\n        console.log('[CellLock] toggleRowLock: ', tableName, rowKey, 'fields:', Object.keys(snapshot).length);\n        return true; // \n    }\n    /**  */\n    function cleanupEmptyLock(tableName, rowKey) {\n        const lock = pendingLocks.value[tableName]?.[rowKey];\n        if (!lock)\n            return;\n        if (!lock._fullRow && Object.keys(lock._fields).length === 0) {\n            delete pendingLocks.value[tableName][rowKey];\n            if (Object.keys(pendingLocks.value[tableName]).length === 0) {\n                delete pendingLocks.value[tableName];\n            }\n        }\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    function isCellLockedPending(tableName, rowKey, fieldName) {\n        const lock = pendingLocks.value[tableName]?.[rowKey];\n        if (!lock)\n            return false;\n        if (lock._fullRow)\n            return lock._snapshot?.[fieldName] !== undefined;\n        return lock._fields?.[fieldName] !== undefined;\n    }\n    /**\n     * \n     */\n    function isRowLockedPending(tableName, rowKey) {\n        return pendingLocks.value[tableName]?.[rowKey]?._fullRow === true;\n    }\n    /**\n     * \n     */\n    function getLockedFieldsPending(tableName, rowKey) {\n        const lock = pendingLocks.value[tableName]?.[rowKey];\n        if (!lock)\n            return [];\n        if (lock._fullRow)\n            return Object.keys(lock._snapshot || {});\n        return Object.keys(lock._fields || {});\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    function isCellLocked(tableName, rowKey, fieldName) {\n        loadLocks();\n        const lock = persistedLocks.value[tableName]?.[rowKey];\n        if (!lock)\n            return false;\n        if (lock._fullRow)\n            return lock._snapshot?.[fieldName] !== undefined;\n        return lock._fields?.[fieldName] !== undefined;\n    }\n    /**\n     * \n     */\n    function isRowLocked(tableName, rowKey) {\n        loadLocks();\n        return persistedLocks.value[tableName]?.[rowKey]?._fullRow === true;\n    }\n    // ============================================================\n    // AI \n    // ============================================================\n    /**\n     * \n     * \n     *\n     * @param tableName \n     * @param rowKey \n     * @param fieldName \n     * @param newValue \n     * @returns \n     */\n    function updateLockedValue(tableName, rowKey, fieldName, newValue) {\n        loadLocks();\n        const lock = persistedLocks.value[tableName]?.[rowKey];\n        if (!lock)\n            return false;\n        let updated = false;\n        // \n        if (lock._fullRow && lock._snapshot && lock._snapshot[fieldName] !== undefined) {\n            lock._snapshot[fieldName] = newValue;\n            updated = true;\n        }\n        // \n        if (lock._fields && lock._fields[fieldName] !== undefined) {\n            lock._fields[fieldName] = newValue;\n            updated = true;\n        }\n        if (updated) {\n            saveLocks();\n            console.log('[CellLock] updateLockedValue:', tableName, rowKey, fieldName, '->', newValue);\n        }\n        return updated;\n    }\n    /**\n     *  AI \n     * @param tableName \n     * @param tableContent \n     * @returns \n     */\n    function applyLocks(tableName, tableContent) {\n        loadLocks();\n        const tableLocks = persistedLocks.value[tableName];\n        if (!tableLocks || !tableContent || tableContent.length < 2) {\n            return { modified: false, restored: [] };\n        }\n        const headers = tableContent[0];\n        const restored = [];\n        let modified = false;\n        // \n        //  (i-1) key \n        const rowIndexMap = {};\n        for (let i = 1; i < tableContent.length; i++) {\n            //  i-1  DataCard.vue  data.index \n            const key = getRowKey(tableName, tableContent[i], headers, i - 1);\n            if (key)\n                rowIndexMap[key] = i;\n        }\n        for (const [rowKey, lock] of Object.entries(tableLocks)) {\n            const idx = rowIndexMap[rowKey];\n            if (idx === undefined) {\n                // \n                const newRow = rebuildRow(headers, lock);\n                if (newRow) {\n                    tableContent.push(newRow);\n                    restored.push(rowKey);\n                    modified = true;\n                    console.info(`[CellLock] : ${rowKey}`);\n                }\n                continue;\n            }\n            const row = tableContent[idx];\n            const fields = lock._fullRow ? lock._snapshot : lock._fields;\n            if (fields) {\n                for (const [field, value] of Object.entries(fields)) {\n                    const colIdx = headers.indexOf(field);\n                    if (colIdx !== -1 && row[colIdx] !== value) {\n                        console.info(`[CellLock] : ${tableName}[${rowKey}].${field} = \"${value}\" (: \"${row[colIdx]}\")`);\n                        row[colIdx] = value;\n                        modified = true;\n                    }\n                }\n            }\n        }\n        return { modified, restored };\n    }\n    /**  */\n    function rebuildRow(headers, lock) {\n        const fields = lock._fullRow ? lock._snapshot : lock._fields;\n        if (!fields || Object.keys(fields).length === 0)\n            return null;\n        const row = new Array(headers.length).fill(null);\n        for (const [field, value] of Object.entries(fields)) {\n            const idx = headers.indexOf(field);\n            if (idx !== -1)\n                row[idx] = value;\n        }\n        return row;\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**  */\n    const pendingLockCount = computed(() => {\n        let count = 0;\n        for (const tableLocks of Object.values(pendingLocks.value)) {\n            if (typeof tableLocks !== 'object')\n                continue;\n            for (const lock of Object.values(tableLocks)) {\n                if (lock._fullRow) {\n                    count += Object.keys(lock._snapshot || {}).length;\n                }\n                else {\n                    count += Object.keys(lock._fields || {}).length;\n                }\n            }\n        }\n        return count;\n    });\n    /**\n     * \n     * @param tableName \n     * @param rowKey \n     */\n    function hasRowAnyLockPending(tableName, rowKey) {\n        const lock = pendingLocks.value[tableName]?.[rowKey];\n        if (!lock)\n            return false;\n        if (lock._fullRow)\n            return true;\n        return Object.keys(lock._fields || {}).length > 0;\n    }\n    // ============================================================\n    // \n    // ============================================================\n    return {\n        // \n        loadLocks,\n        initPendingLocks,\n        // \n        getRowKey,\n        // \n        pendingLocks,\n        toggleCellLock,\n        toggleRowLock,\n        savePendingLocks,\n        discardPendingLocks,\n        // \n        isCellLockedPending,\n        isRowLockedPending,\n        getLockedFieldsPending,\n        hasRowAnyLockPending,\n        // \n        isCellLocked,\n        isRowLocked,\n        // AI \n        applyLocks,\n        updateLockedValue,\n        // \n        pendingLockCount,\n    };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Composable\n *\n * \n *\n * @example\n * ```typescript\n * import { drawLuck, DEFAULT_LUCK_TIERS, calculateProbabilities } from './useDraw';\n *\n * // \n * const result = drawLuck(DEFAULT_LUCK_TIERS);\n * console.log(`: ${result.name}`);\n *\n * // \n * const probs = calculateProbabilities(DEFAULT_LUCK_TIERS);\n * probs.forEach((prob, id) => console.log(`${id}: ${prob.toFixed(1)}%`));\n * ```\n */\n\n// ============================================\n// \n// ============================================\n\n/**\n *  ( DimensionTier )\n */\n// export interface LuckTier moved to type alias below\n\n// ============================================\n// 7\n// ============================================\n\n/**\n * \n *\n * \n * - : 5%\n * - : 15%\n * - : 20%\n * - : 20%\n * - : 20%\n * - : 15%\n * - : 5%\n */\nexport const DEFAULT_LUCK_TIERS: LuckTier[] = [\n  {\n    id: 'superLucky',\n    name: '',\n    weight: 5,\n    color: '#ffd700',\n    prompt: '',\n  },\n  {\n    id: 'lucky',\n    name: '',\n    weight: 15,\n    color: '#fbc02d',\n    prompt: '',\n  },\n  {\n    id: 'slightlyLucky',\n    name: '',\n    weight: 20,\n    color: '#e6b000',\n    prompt: '',\n  },\n  {\n    id: 'neutral',\n    name: '',\n    weight: 20,\n    color: '#808080',\n    prompt: '',\n  },\n  {\n    id: 'slightlyUnlucky',\n    name: '',\n    weight: 20,\n    color: '#ffa07a',\n    prompt: '',\n  },\n  {\n    id: 'unlucky',\n    name: '',\n    weight: 15,\n    color: '#ff6347',\n    prompt: '',\n  },\n  {\n    id: 'superUnlucky',\n    name: '...',\n    weight: 5,\n    color: '#8b0000',\n    prompt: '',\n  },\n];\n\n// ============================================\n// \n// ============================================\n\n/**\n * \n *\n * \n * 1. \n * 2.  [0, ) \n * 3. \n * 4.  <= 0 \n *\n * @param tiers - \n * @returns \n *\n * @example\n * ```typescript\n * const result = drawLuck(DEFAULT_LUCK_TIERS);\n * console.log(`: ${result.name} (${result.color})`);\n * ```\n */\nexport function drawLuck(tiers: LuckTier[]): LuckTier {\n  if (tiers.length === 0) {\n    throw new Error('[drawLuck] ');\n  }\n\n  const totalWeight = tiers.reduce((sum, t) => sum + t.weight, 0);\n\n  if (totalWeight <= 0) {\n    throw new Error('[drawLuck]  0');\n  }\n\n  let random = Math.random() * totalWeight;\n\n  for (const tier of tiers) {\n    random -= tier.weight;\n    if (random <= 0) {\n      return tier;\n    }\n  }\n\n  // \n  return tiers[tiers.length - 1];\n}\n\n/**\n * \n *\n * @param tiers - \n * @returns Mapkey  idvalue  (0-100)\n *\n * @example\n * ```typescript\n * const probs = calculateProbabilities(DEFAULT_LUCK_TIERS);\n * // Map { 'superLucky' => 5, 'lucky' => 15, ... }\n * ```\n */\nexport function calculateProbabilities(tiers: LuckTier[]): Map<string, number> {\n  const total = tiers.reduce((sum, t) => sum + t.weight, 0);\n  const probs = new Map<string, number>();\n\n  if (total <= 0) {\n    // 0Map\n    return probs;\n  }\n\n  for (const tier of tiers) {\n    probs.set(tier.id, (tier.weight / total) * 100);\n  }\n\n  return probs;\n}\n\n/**\n * \n *\n * @param tier - \n * @param allTiers - \n * @param decimals - 1\n * @returns  \"15.0%\"\n */\nexport function getTierProbability(tier: LuckTier, allTiers: LuckTier[], decimals = 1): string {\n  const total = allTiers.reduce((sum, t) => sum + t.weight, 0);\n  if (total <= 0) return '0%';\n\n  const percentage = (tier.weight / total) * 100;\n  return `${percentage.toFixed(decimals)}%`;\n}\n\n/**\n * \n *\n * @param tiers - \n * @returns \n */\nexport function validateLuckTiers(tiers: LuckTier[]): { valid: boolean; errors: string[] } {\n  const errors: string[] = [];\n\n  if (!Array.isArray(tiers)) {\n    return { valid: false, errors: [''] };\n  }\n\n  if (tiers.length === 0) {\n    errors.push('');\n    return { valid: false, errors };\n  }\n\n  const ids = new Set<string>();\n\n  for (let i = 0; i < tiers.length; i++) {\n    const tier = tiers[i];\n\n    //  id\n    if (!tier.id || typeof tier.id !== 'string') {\n      errors.push(` ${i + 1}: id `);\n    } else if (ids.has(tier.id)) {\n      errors.push(` ${i + 1}: id \"${tier.id}\" `);\n    } else {\n      ids.add(tier.id);\n    }\n\n    //  name\n    if (!tier.name || typeof tier.name !== 'string') {\n      errors.push(` ${i + 1}: name `);\n    }\n\n    //  weight\n    if (typeof tier.weight !== 'number' || tier.weight < 0) {\n      errors.push(` ${i + 1}: weight `);\n    }\n\n    //  color\n    if (!tier.color || typeof tier.color !== 'string') {\n      errors.push(` ${i + 1}: color `);\n    }\n\n    //  prompt\n    if (typeof tier.prompt !== 'string') {\n      errors.push(` ${i + 1}: prompt `);\n    }\n  }\n\n  // \n  const totalWeight = tiers.reduce((sum, t) => sum + (t.weight || 0), 0);\n  if (totalWeight <= 0) {\n    errors.push(' 0');\n  }\n\n  return { valid: errors.length === 0, errors };\n}\n\n/**\n * \n *\n * @param partial - \n * @returns \n */\nexport function createLuckTier(partial: Partial<LuckTier> = {}): LuckTier {\n  return {\n    id: partial.id || `tier_${Date.now()}`,\n    name: partial.name || '',\n    weight: partial.weight ?? 10,\n    color: partial.color || '#888888',\n    prompt: partial.prompt || '',\n  };\n}\n\n/**\n *  id\n *\n * @param tier - \n * @returns  id\n */\nexport function cloneLuckTier(tier: LuckTier): LuckTier {\n  return {\n    ...tier,\n    id: `tier_${Date.now()}`,\n    name: `${tier.name} ()`,\n  };\n}\n\n// ============================================\n// Composable Vue 3\n// ============================================\n\n/**\n *  Composable\n *\n * \n *\n * @example\n * ```typescript\n * const { tiers, draw, result, probabilities } = useDraw();\n *\n * // \n * const luck = draw();\n * console.log(luck.name);\n *\n * // \n * console.log(result.value?.name);\n * ```\n */\nimport { computed, ref, type Ref, shallowRef } from 'vue';\nimport type { DimensionTier } from '../types';\n\nexport type LuckTier = DimensionTier;\n\nexport interface UseDrawOptions {\n  /**  DEFAULT_LUCK_TIERS */\n  initialTiers?: LuckTier[];\n}\n\nexport interface UseDrawReturn {\n  /**  */\n  tiers: Ref<LuckTier[]>;\n  /**  */\n  draw: () => LuckTier;\n  /**  */\n  result: Ref<LuckTier | null>;\n  /**  */\n  probabilities: Ref<Map<string, number>>;\n  /**  */\n  resetTiers: () => void;\n  /**  */\n  addTier: (tier?: Partial<LuckTier>) => void;\n  /**  */\n  removeTier: (id: string) => void;\n  /**  */\n  updateTier: (id: string, updates: Partial<LuckTier>) => void;\n}\n\nexport function useDraw(options: UseDrawOptions = {}): UseDrawReturn {\n  const tiers = ref<LuckTier[]>(options.initialTiers ?? [...DEFAULT_LUCK_TIERS]);\n  const result = shallowRef<LuckTier | null>(null);\n\n  // \n  const probabilities = computed(() => calculateProbabilities(tiers.value));\n\n  // \n  function draw(): LuckTier {\n    const luck = drawLuck(tiers.value);\n    result.value = luck;\n    console.info(`[useDraw] : ${luck.name} (${getTierProbability(luck, tiers.value)})`);\n    return luck;\n  }\n\n  // \n  function resetTiers(): void {\n    tiers.value = [...DEFAULT_LUCK_TIERS];\n    result.value = null;\n  }\n\n  // \n  function addTier(partial?: Partial<LuckTier>): void {\n    tiers.value.push(createLuckTier(partial));\n  }\n\n  // \n  function removeTier(id: string): void {\n    const index = tiers.value.findIndex(t => t.id === id);\n    if (index !== -1) {\n      tiers.value.splice(index, 1);\n    }\n  }\n\n  // \n  function updateTier(id: string, updates: Partial<LuckTier>): void {\n    const tier = tiers.value.find(t => t.id === id);\n    if (tier) {\n      Object.assign(tier, updates);\n    }\n  }\n\n  return {\n    tiers,\n    draw,\n    result,\n    probabilities,\n    resetTiers,\n    addTier,\n    removeTier,\n    updateTier,\n  };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * IndexedDB \n *  IndexedDB CRUD \n *\n * \n * - \n * -  chatId \n * -  500MB \n */\n\nconst DB_NAME = 'acu_history_db';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'row_snapshots';\n\nlet dbInstance: IDBDatabase | null = null;\n\n/**\n * \n */\nexport interface RowSnapshot {\n  /** IndexedDB  ID */\n  id?: number;\n  /**  */\n  chatId: string;\n  /**  \"-\" */\n  rowKey: string;\n  /** Unix  */\n  timestamp: number;\n  /**  */\n  source: 'manual' | 'ai';\n  /**  ( -> ) */\n  cells: Record<number, string>;\n}\n\n/**\n * \n * \n */\nexport async function initDB(): Promise<IDBDatabase> {\n  if (dbInstance) return dbInstance;\n\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n    request.onerror = () => {\n      console.error('[ACU IndexedDB] :', request.error);\n      reject(request.error);\n    };\n\n    request.onsuccess = () => {\n      dbInstance = request.result;\n      console.info('[ACU IndexedDB] ');\n      resolve(dbInstance);\n    };\n\n    request.onupgradeneeded = event => {\n      const db = (event.target as IDBOpenDBRequest).result;\n\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\n        const store = db.createObjectStore(STORE_NAME, {\n          keyPath: 'id',\n          autoIncrement: true,\n        });\n\n        // +\n        store.createIndex('by_chat_row', ['chatId', 'rowKey'], { unique: false });\n        // \n        store.createIndex('by_chat', 'chatId', { unique: false });\n        // \n        store.createIndex('by_timestamp', 'timestamp', { unique: false });\n\n        console.info('[ACU IndexedDB] ');\n      }\n    };\n  });\n}\n\n/**\n * \n * @param snapshot  id\n * @returns  ID\n */\nexport async function addSnapshot(snapshot: Omit<RowSnapshot, 'id'>): Promise<number> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.add(snapshot);\n\n    request.onsuccess = () => {\n      console.info('[ACU IndexedDB] , ID:', request.result);\n      resolve(request.result as number);\n    };\n\n    request.onerror = () => {\n      console.error('[ACU IndexedDB] :', request.error);\n      reject(request.error);\n    };\n  });\n}\n\n/**\n *  chatId + rowKey \n * @param chatId ID\n * @param rowKey Key\n * @returns \n */\nexport async function getSnapshots(chatId: string, rowKey: string): Promise<RowSnapshot[]> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readonly');\n    const store = tx.objectStore(STORE_NAME);\n    const index = store.index('by_chat_row');\n    const request = index.getAll([chatId, rowKey]);\n\n    request.onsuccess = () => {\n      resolve(request.result || []);\n    };\n\n    request.onerror = () => {\n      console.error('[ACU IndexedDB] :', request.error);\n      reject(request.error);\n    };\n  });\n}\n\n/**\n *  ID \n * @param id ID\n */\nexport async function deleteSnapshot(id: number): Promise<void> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.delete(id);\n\n    request.onsuccess = () => {\n      console.info('[ACU IndexedDB] , ID:', id);\n      resolve();\n    };\n\n    request.onerror = () => {\n      console.error('[ACU IndexedDB] :', request.error);\n      reject(request.error);\n    };\n  });\n}\n\n/**\n *  chatId \n * \n * @param chatId ID\n */\nexport async function deleteByChat(chatId: string): Promise<void> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    const index = store.index('by_chat');\n    const request = index.openCursor(IDBKeyRange.only(chatId));\n\n    let deletedCount = 0;\n\n    request.onsuccess = event => {\n      const cursor = (event.target as IDBRequest).result;\n      if (cursor) {\n        cursor.delete();\n        deletedCount++;\n        cursor.continue();\n      }\n    };\n\n    tx.oncomplete = () => {\n      console.info(`[ACU IndexedDB] ,  ${deletedCount} `);\n      resolve();\n    };\n\n    tx.onerror = () => {\n      console.error('[ACU IndexedDB] :', tx.error);\n      reject(tx.error);\n    };\n  });\n}\n\n/**\n * \n * \n */\nexport async function clearAll(): Promise<void> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.clear();\n\n    request.onsuccess = () => {\n      console.info('[ACU IndexedDB] ');\n      resolve();\n    };\n\n    request.onerror = () => {\n      console.error('[ACU IndexedDB] :', request.error);\n      reject(request.error);\n    };\n  });\n}\n\n/**\n * \n * \n */\nexport async function getStats(): Promise<{ count: number }> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readonly');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.count();\n\n    request.onsuccess = () => {\n      resolve({ count: request.result });\n    };\n\n    request.onerror = () => {\n      reject(request.error);\n    };\n  });\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Composable\n * \n *\n * \n * -  5 \n * - \n * -  ID \n */\n\nimport { ref } from 'vue';\nimport * as db from './useIndexedDB';\nimport type { RowSnapshot } from './useIndexedDB';\nimport type { TableRow, TableCell } from '../types';\n\n/**  */\nconst MAX_SNAPSHOTS_PER_ROW = 5;\n\n/**\n * ID\n *  SillyTavern  ID\n */\nfunction getCurrentChatId(): string {\n  try {\n    //  SillyTavern\n    const ST = (window as any).SillyTavern || (window.parent as any)?.SillyTavern || (window.top as any)?.SillyTavern;\n\n    if (ST?.getCurrentChatId) {\n      const chatId = ST.getCurrentChatId();\n      if (chatId) return chatId;\n    }\n\n    // \n    if (ST?.chat?.length > 0) {\n      // \n      const firstMsg = ST.chat[0];\n      if (firstMsg?.chat_id) return firstMsg.chat_id;\n    }\n  } catch (e) {\n    console.warn('[ACU History]  chatId :', e);\n  }\n  return 'default';\n}\n\n/**\n * \n *  useDataStore.getRowKey \n * @param tableName \n * @param rowIndex \n */\nfunction makeRowKey(tableName: string, rowIndex: number): string {\n  return `${tableName}-row-${rowIndex}`;\n}\n\n/**\n *  cells \n */\nfunction areCellsEqual(a: Record<number, string>, b: Record<number, string>): boolean {\n  const keysA = Object.keys(a).map(Number);\n  const keysB = Object.keys(b).map(Number);\n\n  if (keysA.length !== keysB.length) return false;\n\n  for (const key of keysA) {\n    if (a[key] !== b[key]) return false;\n  }\n\n  return true;\n}\n\n/**\n *  Composable\n */\nexport function useRowHistory() {\n  const isLoading = ref(false);\n\n  /**\n   * \n   *  + \n   *\n   * @param tableName \n   * @param rowIndex \n   * @param cells  (colIndex -> value)\n   * @param source  ('manual' | 'ai')\n   */\n  async function saveSnapshot(\n    tableName: string,\n    rowIndex: number,\n    cells: Record<number, string>,\n    source: 'manual' | 'ai',\n  ): Promise<void> {\n    try {\n      isLoading.value = true;\n      const chatId = getCurrentChatId();\n      const rowKey = makeRowKey(tableName, rowIndex);\n\n      // \n      const existing = await db.getSnapshots(chatId, rowKey);\n      const sorted = existing.sort((a, b) => b.timestamp - a.timestamp);\n\n      //  cells \n      if (sorted.length > 0) {\n        const latest = sorted[0];\n        if (areCellsEqual(cells, latest.cells)) {\n          console.info('[ACU History] ');\n          return;\n        }\n      }\n\n      // \n      await db.addSnapshot({\n        chatId,\n        rowKey,\n        timestamp: Date.now(),\n        source,\n        cells,\n      });\n\n      console.info(`[ACU History]  ${rowKey}  (${source})`);\n\n      // \n      if (sorted.length >= MAX_SNAPSHOTS_PER_ROW) {\n        const toDelete = sorted.slice(MAX_SNAPSHOTS_PER_ROW - 1);\n        for (const snapshot of toDelete) {\n          if (snapshot.id !== undefined) {\n            await db.deleteSnapshot(snapshot.id);\n          }\n        }\n        console.info(`[ACU History]  ${toDelete.length} `);\n      }\n    } catch (e) {\n      console.error('[ACU History] :', e);\n    } finally {\n      isLoading.value = false;\n    }\n  }\n\n  /**\n   * \n   *  5 \n   *\n   * @param tableName \n   * @param rowIndex \n   */\n  async function getSnapshots(tableName: string, rowIndex: number): Promise<RowSnapshot[]> {\n    try {\n      isLoading.value = true;\n      const chatId = getCurrentChatId();\n      const rowKey = makeRowKey(tableName, rowIndex);\n\n      console.info('[ACU History] , :', { chatId, rowKey, tableName, rowIndex });\n\n      const snapshots = await db.getSnapshots(chatId, rowKey);\n      console.info('[ACU History] :', snapshots.length, '');\n\n      return snapshots.sort((a, b) => b.timestamp - a.timestamp).slice(0, MAX_SNAPSHOTS_PER_ROW);\n    } catch (e) {\n      console.error('[ACU History] :', e);\n      return [];\n    } finally {\n      isLoading.value = false;\n    }\n  }\n\n  /**\n   *  TableRow \n   *  DataCard \n   *\n   * @param snapshot \n   * @param templateRow  cells  key \n   */\n  function snapshotToTableRow(snapshot: RowSnapshot, templateRow: TableRow): TableRow {\n    return {\n      index: templateRow.index,\n      key: templateRow.key,\n      cells: templateRow.cells.map((cell, colIndex) => ({\n        ...cell,\n        value: snapshot.cells[colIndex] !== undefined ? snapshot.cells[colIndex] : cell.value,\n      })),\n    };\n  }\n\n  /**\n   *  TableRow  cells \n   * \n   *\n   * @param row \n   */\n  function tableRowToCells(row: TableRow): Record<number, string> {\n    const cells: Record<number, string> = {};\n    row.cells.forEach((cell, index) => {\n      cells[index] = cell.value;\n    });\n    return cells;\n  }\n\n  /**\n   * \n   * \n   *\n   * @param oldSnapshot \n   * @param newCells  cells \n   */\n  function getDiff(oldSnapshot: RowSnapshot, newCells: Record<number, string>): Set<number> {\n    const changedCols = new Set<number>();\n\n    // \n    for (const [key, value] of Object.entries(newCells)) {\n      const colIndex = Number(key);\n      if (oldSnapshot.cells[colIndex] !== value) {\n        changedCols.add(colIndex);\n      }\n    }\n\n    // \n    for (const key of Object.keys(oldSnapshot.cells)) {\n      const colIndex = Number(key);\n      if (newCells[colIndex] === undefined) {\n        changedCols.add(colIndex);\n      }\n    }\n\n    return changedCols;\n  }\n\n  /**\n   * \n   * @param timestamp Unix \n   */\n  function formatRelativeTime(timestamp: number): string {\n    const now = Date.now();\n    const diff = now - timestamp;\n\n    if (diff < 60000) return '';\n    if (diff < 3600000) return `${Math.floor(diff / 60000)}`;\n    if (diff < 86400000) return `${Math.floor(diff / 3600000)}`;\n    if (diff < 172800000) return '';\n\n    return new Date(timestamp).toLocaleDateString('zh-CN', {\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  }\n\n  /**\n   * \n   */\n  async function clearCurrentChatHistory(): Promise<void> {\n    try {\n      const chatId = getCurrentChatId();\n      await db.deleteByChat(chatId);\n      console.info('[ACU History] ');\n    } catch (e) {\n      console.error('[ACU History] :', e);\n    }\n  }\n\n  return {\n    isLoading,\n    saveSnapshot,\n    getSnapshots,\n    snapshotToTableRow,\n    tableRowToCells,\n    getDiff,\n    formatRelativeTime,\n    clearCurrentChatHistory,\n    getCurrentChatId,\n  };\n}\n\n// ============================================================\n//  composable\n// ============================================================\n\n/**\n *  composable\n *  useDataStore \n *\n * @param chatId ID\n * @param tableName \n * @param row  (TableRow )\n * @param source  ('manual' | 'ai')\n */\nexport async function saveSnapshot(\n  chatId: string,\n  tableName: string,\n  row: TableRow,\n  source: 'manual' | 'ai',\n): Promise<void> {\n  try {\n    const rowKey = makeRowKey(tableName, row.index);\n\n    //  TableRow.cells  Record<number, string>\n    const cells: Record<number, string> = {};\n    row.cells.forEach((cell, index) => {\n      cells[index] = String(cell.value);\n    });\n\n    // \n    const existing = await db.getSnapshots(chatId, rowKey);\n    const sorted = existing.sort((a, b) => b.timestamp - a.timestamp);\n\n    //  cells \n    if (sorted.length > 0) {\n      const latest = sorted[0];\n      if (areCellsEqual(cells, latest.cells)) {\n        console.info('[ACU History] ');\n        return;\n      }\n    }\n\n    // \n    await db.addSnapshot({\n      chatId,\n      rowKey,\n      timestamp: Date.now(),\n      source,\n      cells,\n    });\n\n    console.info(`[ACU History]  ${rowKey}  (${source})`);\n\n    // \n    if (sorted.length >= MAX_SNAPSHOTS_PER_ROW) {\n      const toDelete = sorted.slice(MAX_SNAPSHOTS_PER_ROW - 1);\n      for (const snapshot of toDelete) {\n        if (snapshot.id !== undefined) {\n          await db.deleteSnapshot(snapshot.id);\n        }\n      }\n      console.info(`[ACU History]  ${toDelete.length} `);\n    }\n  } catch (e) {\n    console.error('[ACU History] :', e);\n  }\n}\n\n// \nexport type { RowSnapshot };\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Composable\n *  AI /\n *\n * \n * -  AI  aiDiffMap\n * - / aiDiffMap \n *\n *  \n * 1. AI \n * 2. AI \n */\nimport { computed, ref } from 'vue';\n// ============================================================\n// \n// ============================================================\nconst DEFAULT_CONFIG = {\n    indexColumnName: '',\n    checkEmptyCell: true,\n    checkIndexGap: true,\n    emptyCheckColumns: [], // \n};\n// ============================================================\n// \n// ============================================================\n/**\n * \n * @param tableName \n */\nexport function isSummaryOrOutlineTable(tableName) {\n    if (!tableName || typeof tableName !== 'string')\n        return false;\n    const name = tableName.toLowerCase();\n    return name.includes('') || name.includes('') || name.includes('summary') || name.includes('outline');\n}\n/**\n * \n * AM1, AM2, 1, 2, \n * @param value \n */\nfunction extractNumber(value) {\n    if (value === undefined || value === null)\n        return null;\n    const str = String(value).trim();\n    if (str === '')\n        return null;\n    // \n    const match = str.match(/(\\d+)/);\n    if (match) {\n        return parseInt(match[1], 10);\n    }\n    return null;\n}\n/**\n *  aiDiffMap key \n * key : \"-row-\"  \"--\"\n */\nfunction extractTableNameFromKey(key) {\n    //  \"-row-\" \n    const rowMatch = key.match(/^(.+)-row-\\d+$/);\n    if (rowMatch)\n        return rowMatch[1];\n    //  \"--\" \n    const cellMatch = key.match(/^(.+)-\\d+-\\d+$/);\n    if (cellMatch)\n        return cellMatch[1];\n    return null;\n}\n/**\n *  aiDiffMap key \n */\nfunction extractRowIndexFromKey(key) {\n    //  \"-row-\" \n    const rowMatch = key.match(/-row-(\\d+)$/);\n    if (rowMatch)\n        return parseInt(rowMatch[1], 10);\n    //  \"--\" \n    const cellMatch = key.match(/-(\\d+)-\\d+$/);\n    if (cellMatch)\n        return parseInt(cellMatch[1], 10);\n    return null;\n}\n/**\n *  AI \n *  AI  > \n * \n *\n * @param sheetId ID\n * @param sheet \n * @param snapshotSheet AI\n * @param aiChangedRows AI AI\n * @param config \n */\nfunction checkTableIntegrity(sheetId, sheet, snapshotSheet, aiChangedRows, config) {\n    const tableName = sheet.name || sheetId;\n    const issues = [];\n    // /\n    if (!isSummaryOrOutlineTable(tableName)) {\n        return { sheetId, tableName, hasIssues: false, issues: [] };\n    }\n    // \n    if (!sheet.content || !Array.isArray(sheet.content) || sheet.content.length < 2) {\n        return { sheetId, tableName, hasIssues: false, issues: [] };\n    }\n    // \n    const snapshotRowCount = snapshotSheet?.content?.length || 1;\n    const currentRowCount = sheet.content.length;\n    //  > \n    if (currentRowCount <= snapshotRowCount) {\n        // \n        return { sheetId, tableName, hasIssues: false, issues: [] };\n    }\n    // content \n    //  snapshotRowCount \n    const newRowStartContentIndex = snapshotRowCount;\n    const newRowEndContentIndex = currentRowCount - 1;\n    console.info(`[ACU IntegrityCheck]  \"${tableName}\" : ` +\n        `${snapshotRowCount - 1}  ${currentRowCount - 1}, ` +\n        `: ${newRowStartContentIndex}~${newRowEndContentIndex}(content)`);\n    const headers = sheet.content[0];\n    const indexColIdx = headers.findIndex(h => String(h).trim() === config.indexColumnName);\n    // \n    if (indexColIdx === -1) {\n        console.info(`[ACU IntegrityCheck]  \"${tableName}\" `);\n        return { sheetId, tableName, hasIssues: false, issues: [] };\n    }\n    // AI\n    let lastSnapshotIndex = null;\n    if (snapshotSheet?.content && snapshotSheet.content.length > 1) {\n        const snapshotLastRow = snapshotSheet.content[snapshotSheet.content.length - 1];\n        lastSnapshotIndex = extractNumber(snapshotLastRow[indexColIdx]);\n    }\n    // \n    for (let contentRowIndex = newRowStartContentIndex; contentRowIndex <= newRowEndContentIndex; contentRowIndex++) {\n        const row = sheet.content[contentRowIndex];\n        const rowIndex = contentRowIndex - 1; // \n        //  AI  aiChangedRows \n        //  AI \n        //  1:  AI \n        if (config.checkEmptyCell) {\n            for (let colIdx = 0; colIdx < headers.length; colIdx++) {\n                const headerName = String(headers[colIdx] || '').trim();\n                // \n                if (config.emptyCheckColumns && config.emptyCheckColumns.length > 0) {\n                    if (!config.emptyCheckColumns.includes(headerName)) {\n                        continue; // \n                    }\n                }\n                const cellValue = row[colIdx];\n                const strValue = cellValue !== undefined && cellValue !== null ? String(cellValue).trim() : '';\n                if (strValue === '') {\n                    issues.push({\n                        sheetId,\n                        tableName,\n                        rowIndex,\n                        colIndex: colIdx,\n                        issueType: 'empty_cell',\n                        description: `AI ${contentRowIndex} \"${headers[colIdx]}\" `,\n                        currentValue: '',\n                    });\n                }\n            }\n        }\n        //  2: \n        if (config.checkIndexGap) {\n            const currentIndex = extractNumber(row[indexColIdx]);\n            if (contentRowIndex === newRowStartContentIndex && lastSnapshotIndex !== null && currentIndex !== null) {\n                // \n                if (currentIndex !== lastSnapshotIndex + 1) {\n                    issues.push({\n                        sheetId,\n                        tableName,\n                        rowIndex,\n                        colIndex: indexColIdx,\n                        issueType: 'index_gap',\n                        description: `AI ${lastSnapshotIndex}  ${currentIndex}`,\n                        currentValue: String(row[indexColIdx] ?? ''),\n                        expectedValue: String(lastSnapshotIndex + 1),\n                    });\n                }\n            }\n            else if (contentRowIndex > newRowStartContentIndex) {\n                // \n                const prevContentRowIndex = contentRowIndex - 1;\n                const prevRow = sheet.content[prevContentRowIndex];\n                const prevIndex = extractNumber(prevRow[indexColIdx]);\n                if (prevIndex !== null && currentIndex !== null && currentIndex !== prevIndex + 1) {\n                    issues.push({\n                        sheetId,\n                        tableName,\n                        rowIndex,\n                        colIndex: indexColIdx,\n                        issueType: 'index_gap',\n                        description: `AI ${prevIndex}  ${currentIndex}`,\n                        currentValue: String(row[indexColIdx] ?? ''),\n                        expectedValue: String(prevIndex + 1),\n                    });\n                }\n            }\n        }\n    }\n    return {\n        sheetId,\n        tableName,\n        hasIssues: issues.length > 0,\n        issues,\n    };\n}\n// ============================================================\n// Composable\n// ============================================================\n/**\n *  Composable\n * @param config \n */\nexport function useTableIntegrityCheck(config = {}) {\n    const mergedConfig = { ...DEFAULT_CONFIG, ...config };\n    /** tableName ->  */\n    const issuesByTable = ref(new Map());\n    /**  */\n    const allIssues = computed(() => {\n        const result = [];\n        issuesByTable.value.forEach(issues => {\n            result.push(...issues);\n        });\n        return result;\n    });\n    /**  */\n    const hasIssues = computed(() => allIssues.value.length > 0);\n    /**  */\n    const problematicTables = computed(() => {\n        const tables = [];\n        issuesByTable.value.forEach((issues, tableName) => {\n            if (issues.length > 0) {\n                tables.push(tableName);\n            }\n        });\n        return tables;\n    });\n    /**  */\n    const issueStats = computed(() => {\n        let emptyCount = 0;\n        let gapCount = 0;\n        allIssues.value.forEach(issue => {\n            if (issue.issueType === 'empty_cell')\n                emptyCount++;\n            if (issue.issueType === 'index_gap')\n                gapCount++;\n        });\n        return {\n            total: allIssues.value.length,\n            emptyCell: emptyCount,\n            indexGap: gapCount,\n        };\n    });\n    /**\n     *  aiDiffMap\n     *  AI /\n     *\n     * @param data \n     * @param snapshot AI\n     * @param aiDiffMap AI \n     */\n    function checkIntegrity(data, snapshot, aiDiffMap) {\n        const newIssuesMap = new Map();\n        //  AI \n        if (!data || !aiDiffMap || aiDiffMap.size === 0) {\n            issuesByTable.value = newIssuesMap;\n            return;\n        }\n        //  aiDiffMap  AI \n        const tableAiRows = new Map();\n        for (const key of aiDiffMap) {\n            const tableName = extractTableNameFromKey(key);\n            const rowIndex = extractRowIndexFromKey(key);\n            if (tableName && rowIndex !== null) {\n                if (!tableAiRows.has(tableName)) {\n                    tableAiRows.set(tableName, new Set());\n                }\n                tableAiRows.get(tableName).add(rowIndex);\n            }\n        }\n        //  AI \n        for (const sheetId in data) {\n            // \n            if (sheetId === 'mate' || sheetId === 'updated' || sheetId === 'created' || sheetId.startsWith('_')) {\n                continue;\n            }\n            const sheet = data[sheetId];\n            if (!sheet || !sheet.name)\n                continue;\n            const tableName = sheet.name;\n            const aiChangedRows = tableAiRows.get(tableName);\n            //  AI \n            if (!aiChangedRows || aiChangedRows.size === 0) {\n                continue;\n            }\n            // \n            let snapshotSheet = null;\n            if (snapshot) {\n                for (const snapSheetId in snapshot) {\n                    if (snapshot[snapSheetId]?.name === tableName) {\n                        snapshotSheet = snapshot[snapSheetId];\n                        break;\n                    }\n                }\n            }\n            const result = checkTableIntegrity(sheetId, sheet, snapshotSheet, aiChangedRows, mergedConfig);\n            if (result.hasIssues) {\n                newIssuesMap.set(result.tableName, result.issues);\n                console.warn(`[ACU IntegrityCheck]  \"${result.tableName}\"  ${result.issues.length} `);\n            }\n        }\n        issuesByTable.value = newIssuesMap;\n        if (hasIssues.value) {\n            console.warn(`[ACU IntegrityCheck]  ${allIssues.value.length} `);\n        }\n        else {\n            console.info('[ACU IntegrityCheck] AI');\n        }\n    }\n    /**\n     * \n     * @param tableName \n     */\n    function hasTableIssues(tableName) {\n        const issues = issuesByTable.value.get(tableName);\n        return issues ? issues.length > 0 : false;\n    }\n    /**\n     * \n     * @param tableName \n     */\n    function getTableIssues(tableName) {\n        return issuesByTable.value.get(tableName) || [];\n    }\n    /**\n     * \n     */\n    function clearIssues() {\n        issuesByTable.value = new Map();\n    }\n    /**\n     * \n     */\n    function getSummaryText() {\n        if (!hasIssues.value)\n            return '';\n        const stats = issueStats.value;\n        const parts = [];\n        if (stats.emptyCell > 0) {\n            parts.push(`${stats.emptyCell} `);\n        }\n        if (stats.indexGap > 0) {\n            parts.push(`${stats.indexGap} `);\n        }\n        return ` ${parts.join('')} ${stats.total} `;\n    }\n    return {\n        // \n        issuesByTable,\n        allIssues,\n        hasIssues,\n        problematicTables,\n        issueStats,\n        // \n        checkIntegrity,\n        hasTableIssues,\n        getTableIssues,\n        clearIssues,\n        getSummaryText,\n        // \n        isSummaryOrOutlineTable,\n    };\n}\n// ============================================================\n// \n// ============================================================\nexport { checkTableIntegrity, extractNumber };\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * useToast -  Toast  Composable\n *\n *  toastr  z-index \n * \n */\n\nimport { ref } from 'vue';\n\nexport type ToastType = 'success' | 'error' | 'warning' | 'info';\n\ninterface ToastState {\n  visible: boolean;\n  message: string;\n  type: ToastType;\n  timer: ReturnType<typeof setTimeout> | null;\n}\n\nconst state = ref<ToastState>({\n  visible: false,\n  message: '',\n  type: 'info',\n  timer: null,\n});\n\n/**\n *  Toast \n * @param message \n * @param type \n * @param duration  ()\n */\nfunction show(message: string, type: ToastType = 'info', duration = 3000): void {\n  // \n  if (state.value.timer) {\n    clearTimeout(state.value.timer);\n  }\n\n  // \n  state.value.visible = true;\n  state.value.message = message;\n  state.value.type = type;\n\n  // \n  state.value.timer = setTimeout(() => {\n    state.value.visible = false;\n    state.value.timer = null;\n  }, duration);\n}\n\n/**\n *  Toast\n */\nfunction hide(): void {\n  if (state.value.timer) {\n    clearTimeout(state.value.timer);\n  }\n  state.value.visible = false;\n  state.value.timer = null;\n}\n\n/**\n * \n */\nfunction success(message: string, duration = 3000): void {\n  show(message, 'success', duration);\n}\n\nfunction error(message: string, duration = 4000): void {\n  show(message, 'error', duration);\n}\n\nfunction warning(message: string, duration = 3500): void {\n  show(message, 'warning', duration);\n}\n\nfunction info(message: string, duration = 3000): void {\n  show(message, 'info', duration);\n}\n\nexport function useToast() {\n  return {\n    state,\n    show,\n    hide,\n    success,\n    error,\n    warning,\n    info,\n  };\n}\n\n//  composables\nexport const toast = {\n  show,\n  hide,\n  success,\n  error,\n  warning,\n  info,\n};\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Composable\n *\n *  ACU \"\"\n *\n * ##  (v2)\n * - **** = \n * - \n * -  = \n *\n * @example\n * ```typescript\n * import { detectWordPoolTables, getAvailableTables, drawFromLatestRowWithConfig } from './useWordPool';\n *\n * // \n * const tables = detectWordPoolTables();\n * console.log(':', tables);\n *\n * // \n * const tableInfos = getAvailableTables();\n *\n * // \n * const words = drawFromLatestRowWithConfig('perItem', 1, 4, {});\n * console.log(':', words);\n * ```\n */\n\nimport { computed, ref, type Ref } from 'vue';\nimport { getCore } from '../utils';\n\n// ============================================\n// \n// ============================================\n\n/**\n * \n */\nexport interface WordPool {\n  /** ID sheet_  */\n  tableId: string;\n  /**  */\n  tableName: string;\n  /**  */\n  words: string[];\n}\n\n/**\n * @deprecated  WordPool.tableId \n */\nexport interface LegacyWordPool {\n  /**  */\n  category: string;\n  /**  */\n  words: string[];\n}\n\n/**\n * ACU \n * key value \n */\nexport type TableRow = Record<string, string>;\n\n/**\n * \n */\nexport interface TableConfig {\n  enabled: boolean;\n  limit: number; // 0 = \n}\n\n/**\n * @deprecated  TableConfig \n */\nexport interface ColumnConfig {\n  enabled: boolean;\n  limit: number; // 0 \n}\n\n// ============================================\n// \n// ============================================\n\n/**\n * \n * @param tableId ID sheet_ \n * @returns  tableId\n */\nexport function getTableDisplayName(tableId: string): string {\n  const api = getCore().getDB();\n  const tableData = api?.exportTableAsJson?.();\n  if (!tableData) return tableId;\n\n  const sheetKey = `sheet_${tableId}`;\n  const data = tableData[sheetKey];\n  return (data as any)?.name || tableId;\n}\n\n/**\n * \n *\n *  ACU \"\"\n *\n * @returns \n *\n * @example\n * ```typescript\n * const tables = detectWordPoolTables();\n * // ['', '']\n * ```\n */\nexport function detectWordPoolTables(): string[] {\n  //  ACU API \n  const api = getCore().getDB();\n  const tableData = api?.exportTableAsJson ? api.exportTableAsJson() : null;\n\n  if (!tableData) {\n    console.info('[useWordPool] ACU API ');\n    return [];\n  }\n\n  // \"\"\"\"\"Random\"\"Dict\"\"Chaos\"\"\"\n  // (name)ID\n  const wordPoolTables: string[] = [];\n\n  for (const [key, value] of Object.entries(tableData)) {\n    if (!key.startsWith('sheet_')) continue;\n\n    const sheetId = key.replace('sheet_', '');\n    const sheetData = value as { name?: string };\n    const displayName = sheetData.name || '';\n\n    // \n    const nameMatch = ['', '', 'random', 'dict', 'chaos'].some(keyword =>\n      displayName.toLowerCase().includes(keyword.toLowerCase()),\n    );\n\n    //  ID\n    const idMatch = ['', '', 'random', 'dict', 'chaos'].some(keyword =>\n      sheetId.toLowerCase().includes(keyword.toLowerCase()),\n    );\n\n    if (nameMatch || idMatch) {\n      wordPoolTables.push(sheetId);\n    }\n  }\n\n  console.info(\n    `[useWordPool]  ${Object.keys(tableData).length}  ${wordPoolTables.length} :`,\n    wordPoolTables,\n  );\n  return wordPoolTables;\n}\n\n/**\n * \n *\n * @param tableName -  \"sheet_\" \n * @returns \n */\nexport function getWordPoolTableData(tableName: string): TableRow[] {\n  const api = getCore().getDB();\n  const tableData = api?.exportTableAsJson ? api.exportTableAsJson() : null;\n\n  if (!tableData) {\n    return [];\n  }\n\n  const sheetKey = `sheet_${tableName}`;\n  const data = tableData[sheetKey];\n\n  // ACU exportTableAsJson  content  content \n  //  JSON  content \n  let rows: any[] = [];\n  if (Array.isArray(data)) {\n    // \n    rows = data;\n  } else if (data && typeof data === 'object' && Array.isArray((data as any).content)) {\n    //  content \n    const content = (data as any).content;\n    //  content  TableRow[]  ()\n    // \n    if (content.length > 1) {\n      const headers = content[0];\n      for (let i = 1; i < content.length; i++) {\n        const rowData = content[i];\n        const rowObj: TableRow = {};\n        headers.forEach((header: string, index: number) => {\n          if (header) {\n            rowObj[header] = rowData[index] || '';\n          }\n        });\n        rows.push(rowObj);\n      }\n    }\n  }\n\n  // \n  console.log(`[useWordPool]  \"${tableName}\" : ${rows.length}`);\n  if (rows.length > 0) {\n    console.log(`[useWordPool]  \"${tableName}\" :`, rows[0]);\n  } else {\n    console.warn(`[useWordPool]  \"${tableName}\" `);\n  }\n\n  return rows as TableRow[];\n}\n\n/**\n * \n * \n *\n * @param tableName - \n * @returns \n */\nexport function getWordPoolTableContent(tableName: string): string[][] {\n  const api = getCore().getDB();\n  const tableData = api?.exportTableAsJson ? api.exportTableAsJson() : null;\n\n  if (!tableData) {\n    return [];\n  }\n\n  const sheetKey = `sheet_${tableName}`;\n  const data = tableData[sheetKey];\n\n  if (Array.isArray(data)) {\n    return data as string[][];\n  } else if (data && typeof data === 'object' && Array.isArray((data as any).content)) {\n    return (data as any).content as string[][];\n  }\n\n  return [];\n}\n\n/**\n * \n *\n * @param tableId - ID sheet_ \n * @param tableData - \n * @returns \n */\nexport function parseWordPoolByTable(tableId: string, tableData: string[][]): WordPool {\n  const words: string[] = [];\n\n  //  > 1\n  if (tableData.length > 1) {\n    // \n    const row = tableData[tableData.length - 1];\n    if (Array.isArray(row)) {\n      for (const cellValue of row) {\n        if (cellValue && typeof cellValue === 'string') {\n          const trimmed = cellValue.trim();\n          if (trimmed) {\n            words.push(trimmed);\n          }\n        }\n      }\n    }\n  }\n\n  return {\n    tableId,\n    tableName: getTableDisplayName(tableId),\n    words,\n  };\n}\n\n/**\n * @deprecated  parseWordPoolByTable \n *\n * \n */\nexport function parseWordPool(tableData: TableRow[]): LegacyWordPool[] {\n  const pools: Map<string, Set<string>> = new Map();\n\n  for (const row of tableData) {\n    for (const [column, cellValue] of Object.entries(row)) {\n      // \n      if (!cellValue || typeof cellValue !== 'string') continue;\n\n      // \n      if (!pools.has(column)) {\n        pools.set(column, new Set());\n      }\n\n      // \n      const words = cellValue\n        .split(/[,]/)\n        .map(w => w.trim())\n        .filter(Boolean);\n\n      // Set \n      words.forEach(w => pools.get(column)!.add(w));\n    }\n  }\n\n  // \n  return Array.from(pools.entries()).map(([category, wordSet]) => ({\n    category,\n    words: Array.from(wordSet),\n  }));\n}\n\n/**\n * \n *\n *  Fisher-Yates \n *\n * @param pools - \n * @param count - \n * @returns \n *\n * @example\n * ```typescript\n * const words = drawWords(pools, 4);\n * // ['', '', '', '']\n * ```\n */\nexport function drawWords(pools: (WordPool | LegacyWordPool)[], count: number): string[] {\n  // \n  const allWords = pools.flatMap(p => p.words);\n\n  if (allWords.length === 0) {\n    console.info('[useWordPool] ');\n    return [];\n  }\n\n  // Fisher-Yates \n  const shuffled = [...allWords];\n  for (let i = shuffled.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n  }\n\n  //  N \n  const result = shuffled.slice(0, Math.min(count, shuffled.length));\n  console.info(`[useWordPool]  ${result.length} :`, result);\n  return result;\n}\n\n/**\n * \n *\n * @param pool - \n * @returns  null\n */\nexport function drawOneFromPool(pool: WordPool | LegacyWordPool): string | null {\n  if (pool.words.length === 0) {\n    return null;\n  }\n  const index = Math.floor(Math.random() * pool.words.length);\n  return pool.words[index];\n}\n\n/**\n * \n *\n * @param pools - \n * @returns / -> \n */\nexport function drawOneFromEachPool(pools: (WordPool | LegacyWordPool)[]): Map<string, string> {\n  const result = new Map<string, string>();\n\n  for (const pool of pools) {\n    const word = drawOneFromPool(pool);\n    if (word) {\n      // \n      const key = 'tableId' in pool ? pool.tableName : (pool as LegacyWordPool).category;\n      result.set(key, word);\n    }\n  }\n\n  return result;\n}\n\n/**\n * \n *\n * @param pools - \n * @returns \n */\nexport function getWordPoolStats(pools: (WordPool | LegacyWordPool)[]): {\n  totalCategories: number;\n  totalWords: number;\n  categorySizes: Map<string, number>;\n} {\n  const categorySizes = new Map<string, number>();\n\n  for (const pool of pools) {\n    // \n    const key = 'tableId' in pool ? pool.tableName : (pool as LegacyWordPool).category;\n    categorySizes.set(key, pool.words.length);\n  }\n\n  return {\n    totalCategories: pools.length,\n    totalWords: pools.reduce((sum, p) => sum + p.words.length, 0),\n    categorySizes,\n  };\n}\n\n// ============================================\n// \n// ============================================\n\n/**\n * @deprecated  drawFromLatestRowWithConfig \n *\n * \n */\nexport function drawFromLatestRow(\n  mode: 'perColumn' | 'mixed' | 'perItem' | 'custom' = 'perColumn',\n  count: number = 4,\n): string[] {\n  const tables = detectWordPoolTables();\n  const result: string[] = [];\n\n  for (const tableName of tables) {\n    const rows = getWordPoolTableData(tableName);\n    if (rows.length === 0) continue;\n\n    // \n    const latestRow = rows[rows.length - 1];\n\n    if (mode === 'perColumn' || mode === 'perItem') {\n      // 1\n      for (const [column, cellValue] of Object.entries(latestRow)) {\n        if (!cellValue || typeof cellValue !== 'string') continue;\n\n        //  ,   \n        const words = cellValue\n          .split(/[,]/)\n          .map(w => w.trim())\n          .filter(Boolean);\n\n        if (words.length > 0) {\n          const randomWord = words[Math.floor(Math.random() * words.length)];\n          result.push(randomWord);\n        }\n      }\n    } else {\n      // \n      for (const cellValue of Object.values(latestRow)) {\n        if (!cellValue || typeof cellValue !== 'string') continue;\n\n        const words = cellValue\n          .split(/[,]/)\n          .map(w => w.trim())\n          .filter(Boolean);\n\n        result.push(...words);\n      }\n    }\n  }\n\n  if (mode === 'mixed' || mode === 'custom') {\n    //  count \n    for (let i = result.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [result[i], result[j]] = [result[j], result[i]];\n    }\n    const sliced = result.slice(0, count);\n    console.info(`[useWordPool]  ${sliced.length} :`, sliced);\n    return sliced;\n  }\n\n  console.info(`[useWordPool]  ${result.length} :`, result);\n  return result;\n}\n\n// ============================================\n// - V2\n// ============================================\n\n/**\n * \n *\n * ## V2 \n * -  = \n * -  = \n * - \n *\n * @param mode \n *   - 'perItem':  wordsPerItem \n *   - 'custom':  limit  drawCount\n *   - 'mixed': \n * @param wordsPerItem perItem \n * @param drawCount custom/mixed \n * @param tableConfig ID -> {enabled, limit}\n * @returns \n *\n * @example\n * ```typescript\n * // perItem  2 \n * const words = drawFromLatestRowWithConfig('perItem', 2, 10, {\n *   '': { enabled: true, limit: 0 },\n *   '': { enabled: true, limit: 0 },\n * });\n *\n * // custom  limit  drawCount\n * const words = drawFromLatestRowWithConfig('custom', 1, 4, {\n *   '': { enabled: true, limit: 2 },\n *   '': { enabled: true, limit: 3 },\n * });\n *\n * // mixed \n * const words = drawFromLatestRowWithConfig('mixed', 1, 4, {\n *   '': { enabled: true, limit: 0 },\n *   '': { enabled: true, limit: 0 },\n * });\n * ```\n */\nexport function drawFromLatestRowWithConfig(\n  mode: 'perItem' | 'custom' | 'mixed',\n  wordsPerItem: number,\n  drawCount: number,\n  tableConfig: Record<string, TableConfig>,\n): string[] {\n  const tables = detectWordPoolTables();\n  const result: string[] = [];\n\n  // \n  const tableWords: Map<string, string[]> = new Map();\n\n  for (const tableId of tables) {\n    // \n    const cfg = tableConfig[tableId];\n    if (cfg && !cfg.enabled) continue;\n\n    const rows = getWordPoolTableContent(tableId);\n    // \n    if (rows.length <= 1) continue;\n\n    //  / \n    const latestRow = rows[rows.length - 1];\n    const words: string[] = [];\n\n    // \n    if (Array.isArray(latestRow)) {\n      for (const cellValue of latestRow) {\n        if (cellValue && typeof cellValue === 'string') {\n          const trimmed = cellValue.trim();\n          if (trimmed) words.push(trimmed);\n        }\n      }\n    }\n\n    if (words.length > 0) {\n      tableWords.set(tableId, words);\n    }\n  }\n\n  // \n  if (mode === 'perItem') {\n    // perItem  wordsPerItem \n    for (const [tableId, words] of tableWords) {\n      const count = Math.min(wordsPerItem, words.length);\n      const shuffled = shuffleArray([...words]);\n      result.push(...shuffled.slice(0, count));\n    }\n    console.info(`[useWordPool] perItem  ${result.length} :`, result);\n  } else if (mode === 'custom') {\n    // custom  limit  drawCount\n    let remaining = drawCount;\n\n    for (const [tableId, words] of tableWords) {\n      if (remaining <= 0) break;\n\n      const cfg = tableConfig[tableId];\n      const limit = cfg?.limit || 0;\n      // limit  0  wordsPerItem \n      const maxFromThisTable = limit > 0 ? Math.min(limit, remaining) : Math.min(wordsPerItem, remaining);\n      const count = Math.min(maxFromThisTable, words.length);\n\n      const shuffled = shuffleArray([...words]);\n      result.push(...shuffled.slice(0, count));\n      remaining -= count;\n    }\n    console.info(`[useWordPool] custom  ${result.length} :`, result);\n  } else {\n    // mixed \n    const allWords: string[] = [];\n    for (const words of tableWords.values()) {\n      allWords.push(...words);\n    }\n\n    const shuffled = shuffleArray(allWords);\n    const count = Math.min(drawCount, shuffled.length);\n    result.push(...shuffled.slice(0, count));\n    console.info(`[useWordPool] mixed  ${result.length} :`, result);\n  }\n\n  return result;\n}\n\n/**\n * Fisher-Yates \n */\nexport function shuffleArray<T>(array: T[]): T[] {\n  const result = [...array];\n  for (let i = result.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [result[i], result[j]] = [result[j], result[i]];\n  }\n  return result;\n}\n\n/**\n *  UI \n *\n * @returns \n */\nexport function getAvailableTables(): { id: string; name: string }[] {\n  const tables = detectWordPoolTables();\n  return tables.map(tableId => ({\n    id: tableId,\n    name: getTableDisplayName(tableId),\n  }));\n}\n\n/**\n * @deprecated  getAvailableTables \n *\n * \n */\nexport function getAvailableColumns(): string[] {\n  return getAvailableTables().map(t => t.id);\n}\n\n// ============================================\n// Composable Vue 3\n// ============================================\n\nexport interface UseWordPoolOptions {\n  /**  true */\n  autoLoad?: boolean;\n}\n\nexport interface UseWordPoolReturn {\n  /**  */\n  tables: Ref<string[]>;\n  /**  */\n  pools: Ref<WordPool[]>;\n  /**  */\n  loading: Ref<boolean>;\n  /**  */\n  hasWordPool: Ref<boolean>;\n  /**  */\n  totalWords: Ref<number>;\n  /**  */\n  detect: () => string[];\n  /**  */\n  loadTable: (tableName: string) => void;\n  /**  */\n  loadAllTables: () => void;\n  /**  */\n  refresh: () => void;\n  /**  */\n  draw: (count: number) => string[];\n  /**  */\n  drawFromEach: () => Map<string, string>;\n}\n\n/**\n *  Composable\n *\n * \n *\n * @example\n * ```typescript\n * const { pools, hasWordPool, draw, refresh } = useWordPool();\n *\n * // \n * refresh();\n *\n * // \n * if (hasWordPool.value) {\n *   // 4\n *   const words = draw(4);\n *   console.log(':', words);\n * }\n * ```\n */\nexport function useWordPool(options: UseWordPoolOptions = {}): UseWordPoolReturn {\n  const { autoLoad = true } = options;\n\n  const tables = ref<string[]>([]);\n  const pools = ref<WordPool[]>([]);\n  const loading = ref(false);\n\n  // \n  const hasWordPool = computed(() => pools.value.length > 0 && pools.value.some(p => p.words.length > 0));\n  const totalWords = computed(() => pools.value.reduce((sum, p) => sum + p.words.length, 0));\n\n  // \n  function detect(): string[] {\n    const detected = detectWordPoolTables();\n    tables.value = detected;\n    return detected;\n  }\n\n  // V2\n  function loadTable(tableId: string): void {\n    const data = getWordPoolTableContent(tableId);\n    const parsed = parseWordPoolByTable(tableId, data);\n\n    //  ID \n    const existingIndex = pools.value.findIndex(p => p.tableId === tableId);\n    if (existingIndex >= 0) {\n      // \n      pools.value[existingIndex] = parsed;\n    } else {\n      pools.value.push(parsed);\n    }\n  }\n\n  // \n  function loadAllTables(): void {\n    loading.value = true;\n    pools.value = [];\n\n    try {\n      const tableIds = detect();\n      for (const tableId of tableIds) {\n        const data = getWordPoolTableContent(tableId);\n        const parsed = parseWordPoolByTable(tableId, data);\n        pools.value.push(parsed);\n      }\n      console.info(`[useWordPool]  ${totalWords.value} `);\n    } finally {\n      loading.value = false;\n    }\n  }\n\n  // \n  function refresh(): void {\n    loadAllTables();\n  }\n\n  // \n  function draw(count: number): string[] {\n    return drawWords(pools.value, count);\n  }\n\n  // \n  function drawFromEach(): Map<string, string> {\n    return drawOneFromEachPool(pools.value);\n  }\n\n  // \n  if (autoLoad) {\n    loadAllTables();\n  }\n\n  return {\n    tables,\n    pools,\n    loading,\n    hasWordPool,\n    totalWords,\n    detect,\n    loadTable,\n    loadAllTables,\n    refresh,\n    draw,\n    drawFromEach,\n  };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Store\n *  ConfigManager \n *\n *  ref + watch  computed getter/setter\n * \n */\n\nimport { klona } from 'klona';\nimport { defineStore } from 'pinia';\nimport { computed, ref, watch } from 'vue';\nimport { DEFAULT_BUTTONS_CONFIG, getACUConfigManager } from '../composables/useACUConfigManager';\nimport type {\n  ACUConfig,\n  ButtonGroup,\n  CustomFont,\n  FloatingBallAnimation,\n  FloatingBallAppearance,\n  NavButtonConfig,\n} from '../types';\n\n/**  -  */\nexport const DEFAULT_BALL_APPEARANCE: FloatingBallAppearance = {\n  type: 'icon',\n  content: 'fa-layer-group',\n  size: 50,\n  notifyAnimation: 'ripple',\n  borderColor: '#ffffff',\n  borderOpacity: 40,\n  bgColor: '#ffffff',\n  bgOpacity: 25,\n  imageInvert: false,\n  enableNotifyAnimation: true,\n};\n\n/**  */\nexport const NAV_BUTTONS: NavButtonConfig[] = [\n  { id: 'save', icon: 'fa-save', label: '' },\n  { id: 'saveAs', icon: 'fa-file-export', label: '' },\n  { id: 'undo', icon: 'fa-undo', label: '' },\n  { id: 'refresh', icon: 'fa-sync-alt', label: '' },\n  { id: 'manualUpdate', icon: 'fa-hand-sparkles', label: '' },\n  { id: 'purge', icon: 'fa-eraser', label: '' },\n  { id: 'pin', icon: 'fa-thumbtack', label: '' },\n  { id: 'toggle', icon: 'fa-compress', label: '' },\n  { id: 'openNative', icon: 'fa-external-link-alt', label: '' },\n  { id: 'collapseTab', icon: 'fa-box-open', label: 'Tab' },\n  { id: 'director', icon: 'fa-clapperboard', label: '' },\n  { id: 'settings', icon: 'fa-cog', label: '' },\n];\n\n/**  ID  */\nexport type NavButtonId = (typeof NAV_BUTTONS)[number]['id'];\n\n/**  */\nconst DEFAULT_VISIBLE_BUTTONS = ['save', 'collapseTab', 'refresh', 'toggle', 'settings'];\n\n/**  */\nconst DEFAULT_BUTTON_ORDER = [\n  'save',\n  'collapseTab',\n  'refresh',\n  'toggle',\n  'settings',\n  'director',\n  'saveAs',\n  'undo',\n  'manualUpdate',\n  'purge',\n  'pin',\n  'openNative',\n];\n\n/**  */\nconst DEFAULT_BUTTON_GROUPS: ButtonGroup[] = [];\n\n/**  -  DEFAULT_CONFIG */\nexport const DEFAULT_CONFIG: ACUConfig = {\n  theme: 'retro',\n  fontFamily: 'default',\n  cardWidth: 280,\n  fontSize: 13,\n  itemsPerPage: 20,\n  highlightNew: true,\n  highlightColor: 'orange',\n  highlightManualColor: 'orange',\n  highlightAiColor: 'blue',\n  customTitleColor: false,\n  titleColor: 'orange',\n  layout: 'vertical',\n  limitLongText: false,\n  showDashboard: true,\n  showPagination: true,\n  lockPanel: false,\n  purgeConfirmation: true,\n  gridColumns: 0,\n  autoSave: false,\n  autoSaveDelay: 5000,\n  visibleButtons: DEFAULT_VISIBLE_BUTTONS,\n  buttonOrder: DEFAULT_BUTTON_ORDER,\n  buttonGroups: DEFAULT_BUTTON_GROUPS,\n  longPressDirectExec: false,\n  clearTableOnSwipe: true,\n  collapseTabBar: false,\n  showCollapseTabButton: true,\n  mobileSafeAreaBottom: 50,\n  autoImportInteractions: false,\n  enableIOSInputFix: false,\n};\n\n/**  */\nexport const THEMES = [\n  { id: 'retro', name: '', icon: 'fa-scroll' },\n  { id: 'dark', name: '', icon: 'fa-moon' },\n  { id: 'modern', name: '', icon: 'fa-sun' },\n  { id: 'forest', name: '', icon: 'fa-tree' },\n  { id: 'ocean', name: '', icon: 'fa-water' },\n  { id: 'cyber', name: '', icon: 'fa-bolt' },\n  { id: 'purple', name: '', icon: 'fa-magic' },\n] as const;\n\n/**  */\nexport const FONTS = [\n  { id: 'default', name: ' (Modern)', val: `'Segoe UI', 'Microsoft YaHei', sans-serif` },\n  { id: 'hanchan', name: '', val: `\"\", sans-serif` },\n  { id: 'maple', name: 'Maple Mono ()', val: `\"Maple Mono NF CN\", monospace` },\n  { id: 'huiwen', name: ' (Huiwen)', val: `\"Huiwen-mincho\", serif` },\n  { id: 'cooper', name: 'Cooper', val: `\"CooperZhengKai\", serif` },\n  { id: 'yffyt', name: 'YFFYT ()', val: `\"YFFYT\", sans-serif` },\n  { id: 'fusion', name: 'Fusion Pixel ()', val: `\"Fusion Pixel 12px M latin\", monospace` },\n  { id: 'wenkai', name: ' (WenKai)', val: `\"LXGW WenKai\", serif` },\n  { id: 'notosans', name: ' (Noto Sans)', val: `\"Noto Sans CJK\", sans-serif` },\n  { id: 'zhuque', name: ' (Zhuque)', val: `\"Zhuque Fangsong (technical preview)\", serif` },\n] as const;\n\n/**  */\nexport const HIGHLIGHT_COLORS = {\n  orange: { main: '#d35400', bg: 'rgba(211, 84, 0, 0.1)', name: '' },\n  red: { main: '#e74c3c', bg: 'rgba(231, 76, 60, 0.1)', name: '' },\n  blue: { main: '#3498db', bg: 'rgba(52, 152, 219, 0.1)', name: '' },\n  green: { main: '#27ae60', bg: 'rgba(39, 174, 96, 0.1)', name: '' },\n  purple: { main: '#9b59b6', bg: 'rgba(155, 89, 182, 0.1)', name: '' },\n  teal: { main: '#1abc9c', bg: 'rgba(26, 188, 156, 0.1)', name: '' },\n  pink: { main: '#e91e63', bg: 'rgba(233, 30, 99, 0.1)', name: '' },\n  lime: { main: '#82c91e', bg: 'rgba(130, 201, 30, 0.1)', name: '' },\n  indigo: { main: '#3f51b5', bg: 'rgba(63, 81, 181, 0.1)', name: '' },\n  cyan: { main: '#00bcd4', bg: 'rgba(0, 188, 212, 0.1)', name: '' },\n  brown: { main: '#795548', bg: 'rgba(121, 85, 72, 0.1)', name: '' },\n  grey: { main: '#607d8b', bg: 'rgba(96, 125, 139, 0.1)', name: '' },\n} as const;\n\nexport const useConfigStore = defineStore('acu-config', () => {\n  // ============================================================\n  //  ConfigManager \n  // ============================================================\n  const configManager = getACUConfigManager();\n\n  // ============================================================\n  //  ref + watch \n  // ============================================================\n\n  /** UI  -  ref  */\n  const config = ref<ACUConfig>({\n    ...DEFAULT_CONFIG,\n    ...klona(configManager.config.ui),\n  });\n\n  // ============================================================\n  //  -  ref \n  // ============================================================\n\n  /**  */\n  const visibleButtonsRef = ref<string[]>([\n    ...(configManager.config.buttons?.visibleButtons || DEFAULT_BUTTONS_CONFIG.visibleButtons),\n  ]);\n\n  /**  */\n  const buttonOrderRef = ref<string[]>([\n    ...(configManager.config.buttons?.buttonOrder || DEFAULT_BUTTONS_CONFIG.buttonOrder),\n  ]);\n\n  /**  */\n  const buttonGroupsRef = ref<ButtonGroup[]>(\n    klona(configManager.config.buttons?.buttonGroups || DEFAULT_BUTTONS_CONFIG.buttonGroups),\n  );\n\n  /**  */\n  const longPressDirectExecRef = ref<boolean>(\n    configManager.config.buttons?.longPressDirectExec ?? DEFAULT_BUTTONS_CONFIG.longPressDirectExec,\n  );\n\n  //  UI \n  let isInitializing = true;\n  watch(\n    config,\n    newValue => {\n      if (isInitializing) return;\n      Object.assign(configManager.config.ui, klona(newValue));\n      configManager.saveConfig();\n    },\n    { deep: true },\n  );\n\n  // \n  function saveButtonsConfig() {\n    if (isInitializing) return;\n    configManager.config.buttons = {\n      visibleButtons: [...visibleButtonsRef.value],\n      buttonOrder: [...buttonOrderRef.value],\n      buttonGroups: klona(buttonGroupsRef.value),\n      longPressDirectExec: longPressDirectExecRef.value,\n    };\n    configManager.saveConfig();\n    console.log('[ACU ConfigStore] :', configManager.config.buttons);\n  }\n\n  watch(visibleButtonsRef, saveButtonsConfig, { deep: true });\n  watch(buttonOrderRef, saveButtonsConfig, { deep: true });\n  watch(buttonGroupsRef, saveButtonsConfig, { deep: true });\n  watch(longPressDirectExecRef, saveButtonsConfig);\n\n  // \n  setTimeout(() => {\n    isInitializing = false;\n  }, 100);\n\n  // ============================================================\n  // Getters\n  // ============================================================\n\n  /**  */\n  const theme = computed(() => config.value.theme);\n\n  /**  */\n  const fontFamily = computed(() => config.value.fontFamily);\n\n  /**  */\n  const fontFamilyValue = computed(() => {\n    const font = FONTS.find(f => f.id === config.value.fontFamily);\n    return font?.val || FONTS[0].val;\n  });\n\n  /**\n   *  hex \n   */\n  function hexToColorObj(hex: string): { main: string; bg: string; name: string } {\n    //  hex \n    const normalizedHex = hex.startsWith('#') ? hex : `#${hex}`;\n    //  (10% )\n    const r = parseInt(normalizedHex.slice(1, 3), 16);\n    const g = parseInt(normalizedHex.slice(3, 5), 16);\n    const b = parseInt(normalizedHex.slice(5, 7), 16);\n    return {\n      main: normalizedHex,\n      bg: `rgba(${r}, ${g}, ${b}, 0.1)`,\n      name: '',\n    };\n  }\n\n  /**  () */\n  const highlightColorObj = computed(() => {\n    return HIGHLIGHT_COLORS[config.value.highlightColor as keyof typeof HIGHLIGHT_COLORS] || HIGHLIGHT_COLORS.orange;\n  });\n\n  /**  */\n  const highlightManualColorObj = computed(() => {\n    //  hex \n    if (config.value.highlightManualColor === 'custom' && config.value.customHighlightManualHex) {\n      return hexToColorObj(config.value.customHighlightManualHex);\n    }\n    // \n    const colorKey = config.value.highlightManualColor || config.value.highlightColor;\n    return HIGHLIGHT_COLORS[colorKey as keyof typeof HIGHLIGHT_COLORS] || HIGHLIGHT_COLORS.orange;\n  });\n\n  /** AI */\n  const highlightAiColorObj = computed(() => {\n    //  hex \n    if (config.value.highlightAiColor === 'custom' && config.value.customHighlightAiHex) {\n      return hexToColorObj(config.value.customHighlightAiHex);\n    }\n    const colorKey = config.value.highlightAiColor || 'blue';\n    return HIGHLIGHT_COLORS[colorKey as keyof typeof HIGHLIGHT_COLORS] || HIGHLIGHT_COLORS.blue;\n  });\n\n  /**  */\n  const titleColorObj = computed(() => {\n    if (config.value.customTitleColor) {\n      //  hex \n      if (config.value.titleColor === 'custom' && config.value.customTitleHex) {\n        return hexToColorObj(config.value.customTitleHex);\n      }\n      return HIGHLIGHT_COLORS[config.value.titleColor as keyof typeof HIGHLIGHT_COLORS] || HIGHLIGHT_COLORS.orange;\n    }\n    return highlightManualColorObj.value;\n  });\n\n  /**  CSS  */\n  const gridColumnsCss = computed(() => {\n    return config.value.gridColumns && config.value.gridColumns > 0\n      ? `repeat(${config.value.gridColumns}, 1fr)`\n      : 'repeat(auto-fill, minmax(110px, 1fr))';\n  });\n\n  // ============================================================\n  // Actions\n  // ============================================================\n\n  /**\n   * \n   * @param updates \n   */\n  function updateConfig(updates: Partial<ACUConfig>) {\n    Object.assign(config.value, updates);\n  }\n\n  /**\n   * \n   */\n  function resetConfig() {\n    config.value = { ...DEFAULT_CONFIG };\n  }\n\n  /**\n   * \n   * @param themeId  ID\n   */\n  function setTheme(themeId: string) {\n    config.value.theme = themeId;\n  }\n\n  /**\n   * \n   * @param fontId  ID\n   */\n  function setFontFamily(fontId: string) {\n    config.value.fontFamily = fontId;\n  }\n\n  /**\n   * \n   * @param layout \n   */\n  function setLayout(layout: 'vertical' | 'horizontal') {\n    config.value.layout = layout;\n  }\n\n  /**\n   *  (API)\n   * @param colorKey  key\n   */\n  function setHighlightColor(colorKey: string) {\n    config.value.highlightColor = colorKey;\n    config.value.highlightManualColor = colorKey;\n  }\n\n  /**\n   * \n   * @param colorKey  key\n   */\n  function setHighlightManualColor(colorKey: string) {\n    config.value.highlightManualColor = colorKey;\n    config.value.highlightColor = colorKey;\n  }\n\n  /**\n   * AI\n   * @param colorKey  key\n   */\n  function setHighlightAiColor(colorKey: string) {\n    config.value.highlightAiColor = colorKey;\n  }\n\n  /**\n   * \n   * @param colorKey  key\n   */\n  function setTitleColor(colorKey: string) {\n    config.value.titleColor = colorKey;\n  }\n\n  /**\n   * \n   */\n  function toggleHighlightNew() {\n    config.value.highlightNew = !config.value.highlightNew;\n  }\n\n  /**\n   * \n   */\n  function toggleCustomTitleColor() {\n    config.value.customTitleColor = !config.value.customTitleColor;\n  }\n\n  /**\n   * \n   */\n  function toggleShowDashboard() {\n    config.value.showDashboard = !config.value.showDashboard;\n  }\n\n  /**\n   * \n   */\n  function toggleShowPagination() {\n    config.value.showPagination = !config.value.showPagination;\n  }\n\n  /**\n   * \n   */\n  function toggleLockPanel() {\n    config.value.lockPanel = !config.value.lockPanel;\n  }\n\n  /**\n   * \n   */\n  function toggleLimitLongText() {\n    config.value.limitLongText = !config.value.limitLongText;\n  }\n\n  // ============================================================\n  //  Actions\n  // ============================================================\n\n  /**\n   * \n   * @param buttons  ID \n   */\n  function setVisibleButtons(buttons: string[]) {\n    visibleButtonsRef.value = [...buttons];\n    console.log('[ACU ConfigStore] setVisibleButtons:', visibleButtonsRef.value);\n  }\n\n  /**\n   * \n   * @param order  ID \n   */\n  function setButtonOrder(order: string[]) {\n    buttonOrderRef.value = [...order];\n    console.log('[ACU ConfigStore] setButtonOrder:', buttonOrderRef.value);\n  }\n\n  /**\n   * \n   * @param buttonId  ID\n   */\n  function isButtonVisible(buttonId: string): boolean {\n    return visibleButtonsRef.value.includes(buttonId);\n  }\n\n  /**\n   * \n   * @param buttonId  ID\n   */\n  function toggleButtonVisibility(buttonId: string) {\n    const current = [...visibleButtonsRef.value];\n    const index = current.indexOf(buttonId);\n    if (index > -1) {\n      current.splice(index, 1);\n    } else {\n      current.push(buttonId);\n    }\n    visibleButtonsRef.value = current;\n  }\n\n  /**\n   * \n   */\n  const sortedVisibleButtons = computed(() => {\n    const order = buttonOrderRef.value;\n    const visible = visibleButtonsRef.value;\n    const result = order.filter((id: string) => visible.includes(id));\n    console.log('[ACU ConfigStore] sortedVisibleButtons:', result, 'order:', order, 'visible:', visible);\n    return result;\n  });\n\n  /**\n   * \n   * - \n   * - \n   * -  hidden \n   */\n  const hiddenButtons = computed(() => {\n    const visible = visibleButtonsRef.value;\n    const groups = buttonGroupsRef.value;\n    const usedSecondaries = groups.map(g => g.secondaryId).filter(Boolean);\n\n    return NAV_BUTTONS.filter(btn => !btn.hidden && !visible.includes(btn.id) && !usedSecondaries.includes(btn.id));\n  });\n\n  /**\n   * \n   */\n  const hasHiddenButtons = computed(() => hiddenButtons.value.length > 0);\n\n  /**\n   * \n   * @param buttonId  ID\n   */\n  function getButtonConfig(buttonId: string): NavButtonConfig | undefined {\n    return NAV_BUTTONS.find(btn => btn.id === buttonId);\n  }\n\n  // ============================================================\n  //  Actions\n  // ============================================================\n\n  /**\n   * \n   */\n  const buttonGroups = computed(() => buttonGroupsRef.value);\n\n  /**\n   * \n   */\n  const longPressDirectExec = computed(() => longPressDirectExecRef.value);\n\n  /**\n   * \n   * @param groups \n   */\n  function setButtonGroups(groups: ButtonGroup[]) {\n    buttonGroupsRef.value = klona(groups);\n  }\n\n  /**\n   * \n   * @param primaryId  ID\n   * @param secondaryId  ID\n   */\n  function addButtonGroup(primaryId: string, secondaryId: string) {\n    // \n    const currentGroups = buttonGroupsRef.value;\n    const groups = currentGroups.filter(g => g.secondaryId !== secondaryId && g.primaryId !== primaryId);\n    // \n    groups.push({ primaryId, secondaryId });\n    buttonGroupsRef.value = [...groups];\n    console.log('[ACU] addButtonGroup:', primaryId, '->', secondaryId, 'groups:', groups);\n  }\n\n  /**\n   * \n   * @param primaryId  ID\n   */\n  function removeButtonGroupSecondary(primaryId: string) {\n    const currentGroups = buttonGroupsRef.value;\n    const groups = currentGroups.filter(g => g.primaryId !== primaryId);\n    buttonGroupsRef.value = [...groups];\n    console.log('[ACU] removeButtonGroupSecondary:', primaryId, 'groups:', groups);\n  }\n\n  /**\n   *  ID\n   * @param primaryId  ID\n   */\n  function getSecondaryButtonId(primaryId: string): string | null {\n    const groups = buttonGroupsRef.value;\n    const group = groups.find(g => g.primaryId === primaryId);\n    return group?.secondaryId || null;\n  }\n\n  /**\n   * \n   * @param buttonId  ID\n   */\n  function isSecondaryButton(buttonId: string): boolean {\n    const groups = buttonGroupsRef.value;\n    return groups.some(g => g.secondaryId === buttonId);\n  }\n\n  /**\n   * \n   */\n  function toggleLongPressDirectExec() {\n    longPressDirectExecRef.value = !longPressDirectExecRef.value;\n  }\n\n  /**\n   * \n   * @param value \n   */\n  function setLongPressDirectExec(value: boolean) {\n    longPressDirectExecRef.value = value;\n  }\n\n  /**\n   * \n   */\n  function resetButtonConfig() {\n    visibleButtonsRef.value = [...DEFAULT_BUTTONS_CONFIG.visibleButtons];\n    buttonOrderRef.value = [...DEFAULT_BUTTONS_CONFIG.buttonOrder];\n    buttonGroupsRef.value = [];\n    longPressDirectExecRef.value = false;\n    console.log('[ACU ConfigStore] ');\n  }\n\n  /**\n   *  buttonsConfig \n   */\n  const buttonsConfig = computed(() => ({\n    visibleButtons: visibleButtonsRef.value,\n    buttonOrder: buttonOrderRef.value,\n    buttonGroups: buttonGroupsRef.value,\n    longPressDirectExec: longPressDirectExecRef.value,\n  }));\n\n  return {\n    // \n    config,\n    buttonsConfig, // \n\n    // Getters\n    theme,\n    fontFamily,\n    fontFamilyValue,\n    highlightColorObj,\n    highlightManualColorObj,\n    highlightAiColorObj,\n    titleColorObj,\n    gridColumnsCss,\n\n    // Actions\n    updateConfig,\n    resetConfig,\n    setTheme,\n    setFontFamily,\n    setLayout,\n    setHighlightColor,\n    setHighlightManualColor,\n    setHighlightAiColor,\n    setTitleColor,\n    toggleHighlightNew,\n    toggleCustomTitleColor,\n    toggleShowDashboard,\n    toggleShowPagination,\n    toggleLockPanel,\n    toggleLimitLongText,\n\n    // \n    setVisibleButtons,\n    setButtonOrder,\n    isButtonVisible,\n    toggleButtonVisibility,\n    sortedVisibleButtons,\n    hiddenButtons,\n    hasHiddenButtons,\n    getButtonConfig,\n\n    // \n    buttonGroups,\n    longPressDirectExec,\n    setButtonGroups,\n    addButtonGroup,\n    removeButtonGroupSecondary,\n    getSecondaryButtonId,\n    isSecondaryButton,\n    toggleLongPressDirectExec,\n    setLongPressDirectExec,\n    resetButtonConfig,\n  };\n});\n\n// ============================================================\n//  Store ( ConfigManager )\n// ============================================================\n\nexport const useBallAppearanceStore = defineStore('acu-ball-appearance', () => {\n  // ============================================================\n  //  ConfigManager \n  // ============================================================\n  const configManager = getACUConfigManager();\n\n  // ============================================================\n  //  ref + watch \n  // ============================================================\n\n  /**  -  ref  */\n  const appearance = ref<FloatingBallAppearance>({\n    ...DEFAULT_BALL_APPEARANCE,\n    ...klona(configManager.config.ball?.appearance || {}),\n  });\n\n  /**  -  ref  */\n  const customFonts = ref<CustomFont[]>(klona(configManager.config.ball?.customFonts || []));\n\n  /**  (ConfigManager ) */\n  const isLoaded = computed(() => true);\n\n  // \n  let isBallInitializing = true;\n  watch(\n    appearance,\n    newValue => {\n      if (isBallInitializing) return;\n      if (!configManager.config.ball) {\n        configManager.config.ball = { appearance: {}, customFonts: [] };\n      }\n      Object.assign(configManager.config.ball.appearance, klona(newValue));\n      configManager.saveConfig();\n    },\n    { deep: true },\n  );\n\n  // \n  watch(\n    customFonts,\n    newValue => {\n      if (isBallInitializing) return;\n      if (!configManager.config.ball) {\n        configManager.config.ball = { appearance: {}, customFonts: [] };\n      }\n      configManager.config.ball.customFonts = klona(newValue);\n      configManager.saveConfig();\n    },\n    { deep: true },\n  );\n\n  // \n  setTimeout(() => {\n    isBallInitializing = false;\n  }, 100);\n\n  // ============================================================\n  //  Actions\n  // ============================================================\n\n  /**\n   * \n   * @param updates \n   */\n  function updateAppearance(updates: Partial<FloatingBallAppearance>) {\n    Object.assign(appearance.value, updates);\n  }\n\n  /**\n   * \n   * @param type \n   * @param content \n   */\n  function setIcon(type: FloatingBallAppearance['type'], content: string) {\n    appearance.value.type = type;\n    appearance.value.content = content;\n  }\n\n  /**\n   * \n   * @param size  (40-100)\n   */\n  function setSize(size: number) {\n    appearance.value.size = Math.max(40, Math.min(100, size));\n  }\n\n  /**\n   * \n   * @param color  (hex)\n   * @param opacity  (0-100)\n   */\n  function setBorderColor(color: string, opacity?: number) {\n    appearance.value.borderColor = color;\n    if (opacity !== undefined) {\n      appearance.value.borderOpacity = opacity;\n    }\n  }\n\n  /**\n   * \n   * @param color  (hex)\n   * @param opacity  (0-100)\n   */\n  function setBgColor(color: string, opacity?: number) {\n    appearance.value.bgColor = color;\n    if (opacity !== undefined) {\n      appearance.value.bgOpacity = opacity;\n    }\n  }\n\n  /**\n   * \n   * @param animation \n   */\n  function setNotifyAnimation(animation: FloatingBallAnimation) {\n    appearance.value.notifyAnimation = animation;\n  }\n\n  /**\n   * \n   * @param enabled \n   */\n  function setEnableNotifyAnimation(enabled: boolean) {\n    appearance.value.enableNotifyAnimation = enabled;\n  }\n\n  /**\n   * \n   */\n  function resetAppearance() {\n    appearance.value = { ...DEFAULT_BALL_APPEARANCE };\n  }\n\n  /**\n   * \n   * @param newAppearance \n   */\n  function setAppearance(newAppearance: FloatingBallAppearance) {\n    appearance.value = { ...DEFAULT_BALL_APPEARANCE, ...newAppearance };\n  }\n\n  // ============================================================\n  //  Actions\n  // ============================================================\n\n  /**\n   * \n   * @param font  ( id)\n   */\n  function addFont(font: Omit<CustomFont, 'id'>): CustomFont {\n    const newFont: CustomFont = {\n      ...font,\n      id: `custom_${Date.now()}`,\n    };\n    customFonts.value = [...customFonts.value, newFont];\n    return newFont;\n  }\n\n  /**\n   * \n   * @param fontId  ID\n   */\n  function removeFont(fontId: string) {\n    customFonts.value = customFonts.value.filter(f => f.id !== fontId);\n  }\n\n  /**\n   *  @import URLs\n   */\n  const fontImportUrls = computed(() => {\n    return customFonts.value.filter(f => f.importUrl).map(f => f.importUrl);\n  });\n\n  /**\n   * \n   */\n  const allFonts = computed(() => {\n    return [\n      ...FONTS,\n      ...customFonts.value.map(f => ({\n        id: f.id,\n        name: f.name,\n        val: f.fontFamily,\n      })),\n    ];\n  });\n\n  // ============================================================\n  //  - CSS \n  // ============================================================\n\n  /**\n   *  hex  rgba\n   */\n  function hexToRgba(hex: string, opacity: number): string {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    if (!result) return hex;\n    const r = parseInt(result[1], 16);\n    const g = parseInt(result[2], 16);\n    const b = parseInt(result[3], 16);\n    return `rgba(${r}, ${g}, ${b}, ${opacity / 100})`;\n  }\n\n  /**\n   *  CSS \n   */\n  const cssVariables = computed(() => {\n    const app = appearance.value;\n    return {\n      '--ball-size': `${app.size}px`,\n      '--ball-border-color': app.borderColor,\n      '--ball-border-color-rgba': hexToRgba(app.borderColor, app.borderOpacity),\n      '--ball-bg-color': hexToRgba(app.bgColor, app.bgOpacity),\n    };\n  });\n\n  return {\n    // \n    appearance,\n    customFonts,\n    isLoaded,\n\n    // \n    updateAppearance,\n    setIcon,\n    setSize,\n    setBorderColor,\n    setBgColor,\n    setNotifyAnimation,\n    setEnableNotifyAnimation,\n    resetAppearance,\n    setAppearance,\n\n    // \n    addFont,\n    removeFont,\n    fontImportUrls,\n    allFonts,\n\n    // CSS \n    cssVariables,\n    hexToRgba,\n  };\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Store\n *  extensionSettings  ConfigManager\n */\n\nimport { klona } from 'klona';\nimport { defineStore } from 'pinia';\nimport { computed, ref, watch } from 'vue';\nimport { getACUConfigManager } from '../composables/useACUConfigManager';\nimport { detectWordPoolTables } from '../composables/useWordPool';\nimport type { DashboardConfig, DashboardWidgetConfig, WidgetActionId } from '../types';\nimport { TABLE_KEYWORD_RULES, WIDGET_TEMPLATES } from '../types';\nimport { getTableData, processJsonData } from '../utils';\n\n/**  */\nexport const DEFAULT_DASHBOARD_CONFIG: DashboardConfig = {\n  widgets: [],\n  layout: 'grid',\n  columns: 2,\n  showStats: true,\n  hasInitializedDefaults: false, // \n};\n\n/**  ID */\nfunction generateId(): string {\n  return `widget_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nexport const useDashboardStore = defineStore('acu-dashboard', () => {\n  // ============================================================\n  // ConfigManager \n  // ============================================================\n  const configManager = getACUConfigManager();\n\n  // ============================================================\n  //  -  ref + watch \n  //\n  //  ref  computed getter/setter\n  // computed getter  Vue \n  // ============================================================\n\n  /**  */\n  const isInitialized = ref(false);\n\n  /**  -  ref  */\n  const config = ref<DashboardConfig>({ ...DEFAULT_DASHBOARD_CONFIG });\n\n  /**  ConfigManager  */\n  function loadConfigFromManager() {\n    const stored = configManager.config.dashboard as DashboardConfig | undefined;\n    //  stored  widgets \n    //  ConfigManager \n    if (stored && Array.isArray(stored.widgets)) {\n      config.value = klona({\n        ...DEFAULT_DASHBOARD_CONFIG,\n        ...stored,\n      });\n      console.info('[DashboardStore] widgets :', config.value.widgets.length);\n    } else {\n      //  ConfigManager \n      //  ConfigManager \n      // ensureDefaultWidgets \n      console.info('[DashboardStore]  ConfigManager ');\n    }\n  }\n\n  // \n  //  true false\n  let isDashboardConfigInitializing = true;\n  watch(\n    config,\n    newValue => {\n      if (isDashboardConfigInitializing) return;\n      configManager.config.dashboard = klona(newValue);\n      configManager.saveConfig();\n    },\n    { deep: true },\n  );\n\n  // ============================================================\n  // Getters\n  // ============================================================\n\n  /**  order  */\n  const enabledWidgets = computed(() => {\n    const widgets = config.value?.widgets;\n    if (!Array.isArray(widgets)) return [];\n    return widgets.filter(w => w.enabled).sort((a, b) => a.order - b.order);\n  });\n\n  /**  order  */\n  const allWidgets = computed(() => {\n    const widgets = config.value?.widgets;\n    if (!Array.isArray(widgets)) return [];\n    return [...widgets].sort((a, b) => a.order - b.order);\n  });\n\n  /**  */\n  const showStats = computed(() => config.value.showStats);\n\n  /**  */\n  const columns = computed(() => config.value.columns);\n\n  /**  */\n  const layout = computed(() => config.value.layout);\n\n  // ============================================================\n  // Actions - \n  // ============================================================\n\n  /**\n   *  extensionSettings ConfigManager\n   */\n  async function saveConfig(): Promise<void> {\n    try {\n      configManager.config.dashboard = klona(config.value);\n      await configManager.saveConfig();\n      console.log('[ACU Dashboard] ');\n    } catch (error) {\n      console.error('[ACU Dashboard] :', error);\n    }\n  }\n\n  /**\n   * \n   */\n  function updateConfig(updates: Partial<DashboardConfig>): void {\n    config.value = { ...config.value, ...updates };\n    //  watch  saveConfig\n  }\n\n  /**\n   *  ConfigManager index.ts \n   * \n   */\n  async function loadConfig(): Promise<void> {\n    try {\n      //  ConfigManager \n      loadConfigFromManager();\n\n      // \n      // \n      setTimeout(() => {\n        isDashboardConfigInitializing = false;\n      }, 500);\n\n      const loadedExistingConfig = config.value.widgets.length > 0;\n\n      // \n      await ensureDefaultWidgets(loadedExistingConfig);\n\n      // \n      applyDefaultsToEmptyWidgets();\n\n      isInitialized.value = true;\n      console.log('[ACU Dashboard] :', config.value);\n    } catch (error) {\n      console.warn('[ACU Dashboard] :', error);\n      isInitialized.value = true;\n      // \n      isDashboardConfigInitializing = false;\n    }\n  }\n\n  /**\n   * \n   * \n   * @param existingTableIds  ID \n   */\n  function cleanupInvalidWidgets(existingTableIds: string[]): void {\n    const validIdsSet = new Set(existingTableIds);\n    let hasChanges = false;\n\n    const widgets = [...config.value.widgets];\n\n    // \n    for (let i = widgets.length - 1; i >= 0; i--) {\n      const widget = widgets[i];\n\n      // \n      if (widget.type === 'table' && widget.tableId) {\n        //  ID  ID \n        if (!validIdsSet.has(widget.tableId)) {\n          console.log(`[ACU Dashboard] : ${widget.title} (Table ID: ${widget.tableId} )`);\n          widgets.splice(i, 1);\n          hasChanges = true;\n        }\n      }\n    }\n\n    if (hasChanges) {\n      // \n      widgets.forEach((w, index) => {\n        w.order = index;\n      });\n      config.value = { ...config.value, widgets };\n      // watch \n    }\n  }\n\n  /**\n   * \n   * displayedTagIds  displayedCategoryIds \n   */\n  function applyDefaultsToEmptyWidgets(): void {\n    let hasChanges = false;\n    const widgets = [...config.value.widgets];\n\n    widgets.forEach(widget => {\n      // \n      if (widget.type !== 'table') return;\n\n      // \n      const hasTags = widget.widgetTagConfig?.displayedTagIds?.length > 0;\n      const hasCategories = widget.widgetTagConfig?.displayedCategoryIds?.length > 0;\n\n      // \n      if (hasTags || hasCategories) return;\n\n      // \n      let template = undefined;\n      const searchText = widget.title || widget.tableId || '';\n\n      // 1.  ID  key ( 'task', 'item')\n      //  widget.id \n\n      // 2. \n      for (const [key, keywords] of Object.entries(TABLE_KEYWORD_RULES)) {\n        if (keywords.some(k => searchText.toLowerCase().includes(k.toLowerCase()))) {\n          template = WIDGET_TEMPLATES[key];\n          break;\n        }\n      }\n\n      // \n      if (template?.widgetTagConfig) {\n        //  widgetTagConfig ()\n        if (!widget.widgetTagConfig) {\n          widget.widgetTagConfig = { displayedTagIds: [], displayedCategoryIds: [] };\n        }\n\n        // \n        widget.widgetTagConfig = klona(template.widgetTagConfig);\n        console.log(`[ACU Dashboard]  \"${widget.title}\" `);\n        hasChanges = true;\n      }\n    });\n\n    if (hasChanges) {\n      config.value = { ...config.value, widgets };\n      // watch \n    }\n  }\n\n  /**\n   *  ()\n   *\n   *  hasInitializedDefaults  false \n   * \n   *\n   *    /NPC    \n   *\n   * @param allowSave \n   */\n  async function ensureDefaultWidgets(allowSave = true): Promise<void> {\n    //  ConfigManager \n    //  loadConfigFromManager()  ConfigManager \n    const storedConfig = configManager.config.dashboard as DashboardConfig | undefined;\n    if (storedConfig && Array.isArray(storedConfig.widgets) && storedConfig.widgets.length > 0) {\n      // \n      if (config.value.widgets.length === 0 || !config.value.hasInitializedDefaults) {\n        config.value = klona({\n          ...DEFAULT_DASHBOARD_CONFIG,\n          ...storedConfig,\n          hasInitializedDefaults: true, // \n        });\n        console.log('[ACU Dashboard]  ConfigManager widgets:', config.value.widgets.length);\n      }\n      return;\n    }\n\n    // \n    if (config.value.hasInitializedDefaults) {\n      console.log('[ACU Dashboard] ');\n      return;\n    }\n\n    //  widgets \n    //  hasInitializedDefaults \n    // \n    if (config.value.widgets.length > 0) {\n      console.log('[ACU Dashboard] ');\n      config.value = { ...config.value, hasInitializedDefaults: true };\n      if (allowSave) {\n        // \n        configManager.config.dashboard = klona(config.value);\n        await configManager.saveConfig();\n      }\n      return;\n    }\n\n    let hasChanges = false;\n\n    // 1. \"\"\n    if (!config.value.widgets.some(w => w.type === 'updateStatus')) {\n      addSpecialWidget('updateStatus', false);\n      hasChanges = true;\n    }\n\n    // 2. \n    const randomTables = detectWordPoolTables();\n    if (randomTables.length > 0) {\n      if (!config.value.widgets.some(w => w.type === 'randomWordPool')) {\n        addSpecialWidget('randomWordPool', false);\n        hasChanges = true;\n        console.log(`[ACU Dashboard]  ${randomTables.length} `);\n      }\n    }\n\n    // 3. \n    const rawData = getTableData();\n    if (!rawData) {\n      // \n      if (hasChanges && allowSave) {\n        const current = config.value;\n        configManager.config.dashboard = { ...current, hasInitializedDefaults: true };\n        saveConfig();\n      }\n      return;\n    }\n\n    const tables = processJsonData(rawData);\n    if (!tables) {\n      if (hasChanges && allowSave) {\n        const current = config.value;\n        configManager.config.dashboard = { ...current, hasInitializedDefaults: true };\n        saveConfig();\n      }\n      return;\n    }\n\n    //   \n    const matchRules = [\n      { keywords: TABLE_KEYWORD_RULES.task || [], templateKey: 'task' },\n      { keywords: TABLE_KEYWORD_RULES.item || [], templateKey: 'item' },\n      { keywords: TABLE_KEYWORD_RULES.global || [], templateKey: 'global' },\n      { keywords: ['', ''], templateKey: 'interaction' },\n    ];\n\n    // 4. \n    for (const [tableName, tableInfo] of Object.entries(tables)) {\n      const tableId = tableInfo.key;\n      const lowerName = tableName.toLowerCase();\n\n      for (const rule of matchRules) {\n        if (rule.keywords.some(k => lowerName.includes(k.toLowerCase()))) {\n          // \n          if (!config.value.widgets.some(w => w.tableId === tableId)) {\n            addWidget(tableId, tableName, rule.templateKey, false);\n            console.log(`[ACU Dashboard] : ${tableName} (: ${rule.templateKey})`);\n            hasChanges = true;\n          }\n          break; // \n        }\n      }\n    }\n\n    // \n    // \n    config.value = { ...config.value, hasInitializedDefaults: true };\n\n    if (hasChanges && allowSave) {\n      // watch \n      console.log('[ACU Dashboard] ');\n    } else if (allowSave) {\n      //  hasInitializedDefaults \n      console.log('[ACU Dashboard] ');\n    }\n  }\n\n  // ============================================================\n  // Actions - \n  // ============================================================\n\n  /**\n   * \n   * @param tableId  ID\n   * @param tableName \n   * @param templateKey  key ()\n   * @param autoSave  ( true)\n   */\n  function addWidget(\n    tableId: string,\n    tableName?: string,\n    templateKey?: string,\n    autoSave = true,\n  ): DashboardWidgetConfig {\n    // \n    let template = templateKey ? WIDGET_TEMPLATES[templateKey] : undefined;\n\n    // \n    const searchText = tableName || tableId;\n    if (!template) {\n      for (const [key, keywords] of Object.entries(TABLE_KEYWORD_RULES)) {\n        if (keywords.some(k => searchText.toLowerCase().includes(k.toLowerCase()))) {\n          template = WIDGET_TEMPLATES[key];\n          break;\n        }\n      }\n    }\n\n    //  actions\n    let defaultActions = template?.actions || ['goToTable'];\n\n    // \"\"\"npc\"() relationshipGraph\n    const lowerSearchText = searchText.toLowerCase();\n    if (lowerSearchText.includes('') || lowerSearchText.includes('npc')) {\n      if (!defaultActions.includes('relationshipGraph')) {\n        defaultActions = [...defaultActions, 'relationshipGraph'];\n      }\n    }\n\n    // \n    let displayStyle = template?.displayStyle || 'list';\n    if (\n      !template &&\n      (tableName?.includes('') || tableName?.includes('') || tableId === 'sheet_Interaction_CN')\n    ) {\n      displayStyle = 'interaction';\n    }\n\n    const newWidget: DashboardWidgetConfig = {\n      id: generateId(),\n      type: 'table',\n      tableId,\n      //  >  > ID\n      title: template?.title || tableName || tableId,\n      icon: template?.icon || 'fa-table',\n      displayColumns: template?.displayColumns || [],\n      maxRows: template?.maxRows || 8,\n      actions: defaultActions,\n      order: config.value.widgets.length,\n      enabled: true,\n      colSpan: template?.colSpan || 1,\n      displayStyle,\n      // \n      widgetTagConfig: template?.widgetTagConfig ? klona(template.widgetTagConfig) : undefined,\n    };\n\n    const widgets = [...config.value.widgets, newWidget];\n    config.value = { ...config.value, widgets };\n    // watch  autoSave  false\n    if (!autoSave) {\n      isDashboardConfigInitializing = true;\n      setTimeout(() => {\n        isDashboardConfigInitializing = false;\n      }, 50);\n    }\n    return newWidget;\n  }\n\n  /**\n   * \n   * @param widgetId  ID\n   */\n  function removeWidget(widgetId: string): void {\n    const widgets = [...config.value.widgets];\n    const index = widgets.findIndex(w => w.id === widgetId);\n    if (index !== -1) {\n      widgets.splice(index, 1);\n      // \n      widgets.forEach((w, i) => {\n        w.order = i;\n      });\n      config.value = { ...config.value, widgets };\n      // watch \n    }\n  }\n\n  /**\n   * \n   * @param widgetId  ID\n   * @param updates \n   */\n  function updateWidget(widgetId: string, updates: Partial<DashboardWidgetConfig>): void {\n    const widgets = [...config.value.widgets];\n    const widget = widgets.find(w => w.id === widgetId);\n    if (widget) {\n      Object.assign(widget, updates);\n      config.value = { ...config.value, widgets };\n      // watch \n    }\n  }\n\n  /**\n   * \n   * @param widgetId  ID\n   */\n  function toggleWidget(widgetId: string): void {\n    const widgets = [...config.value.widgets];\n    const widget = widgets.find(w => w.id === widgetId);\n    if (widget) {\n      widget.enabled = !widget.enabled;\n      config.value = { ...config.value, widgets };\n      // watch \n    }\n  }\n\n  /**\n   * \n   * @param widgetId  ID\n   * @param newOrder \n   */\n  function moveWidget(widgetId: string, newOrder: number): void {\n    const widgets = [...config.value.widgets];\n    const currentIndex = widgets.findIndex(w => w.id === widgetId);\n    if (currentIndex === -1) return;\n\n    const [widget] = widgets.splice(currentIndex, 1);\n    widgets.splice(newOrder, 0, widget);\n\n    //  order\n    widgets.forEach((w, i) => {\n      w.order = i;\n    });\n\n    config.value = { ...config.value, widgets };\n    // watch \n  }\n\n  /**\n   * \n   * @param widgetId  ID\n   * @param actions \n   */\n  function setWidgetActions(widgetId: string, actions: WidgetActionId[]): void {\n    updateWidget(widgetId, { actions });\n  }\n\n  /**\n   * \n   */\n  function resetConfig(): void {\n    config.value = { ...DEFAULT_DASHBOARD_CONFIG };\n    // watch \n  }\n\n  /**\n   *  ID \n   * @param tableId  ID\n   */\n  function findWidgetByTableId(tableId: string): DashboardWidgetConfig | undefined {\n    return config.value.widgets.find(w => w.tableId === tableId);\n  }\n\n  /**\n   * \n   * @param tableId  ID\n   */\n  function hasWidget(tableId: string): boolean {\n    return config.value.widgets.some(w => w.tableId === tableId);\n  }\n\n  /**  */\n  type SpecialWidgetType = 'updateStatus' | 'optionsPanel' | 'randomWordPool';\n\n  /**\n   * \n   * \"\"\"Random\"\n   */\n  function detectAndAddRandomWordWidget(): void {\n    const randomTables = detectWordPoolTables();\n    if (randomTables.length > 0) {\n      //  randomWordPool \n      const hasRandomWordWidget = config.value.widgets.some(w => w.type === 'randomWordPool');\n      if (!hasRandomWordWidget) {\n        addSpecialWidget('randomWordPool');\n        console.log(`[ACU Dashboard]  ${randomTables.length} `);\n      }\n    }\n  }\n\n  /**\n   * \n   * @param widgetType \n   */\n  function hasSpecialWidget(widgetType: SpecialWidgetType): boolean {\n    return config.value.widgets.some(w => w.type === widgetType);\n  }\n\n  /**\n   * \n   * @param widgetType \n   * @param autoSave  ( true)\n   */\n  function addSpecialWidget(widgetType: SpecialWidgetType, autoSave = true): DashboardWidgetConfig {\n    const specialConfigs: Record<SpecialWidgetType, Partial<DashboardWidgetConfig>> = {\n      updateStatus: {\n        type: 'updateStatus',\n        title: '',\n        icon: 'fa-sync-alt',\n        colSpan: 2,\n        actions: ['nativeEdit'],\n      },\n      optionsPanel: {\n        type: 'optionsPanel',\n        title: '',\n        icon: 'fa-list-check',\n        colSpan: 2,\n      },\n      randomWordPool: {\n        type: 'randomWordPool',\n        title: '',\n        icon: 'fa-dice',\n        colSpan: 1,\n        actions: ['settings'],\n      },\n    };\n\n    const specialConfig = specialConfigs[widgetType];\n\n    const newWidget: DashboardWidgetConfig = {\n      id: `special_${widgetType}_${Date.now()}`,\n      type: widgetType,\n      title: specialConfig.title || widgetType,\n      icon: specialConfig.icon || 'fa-cog',\n      displayColumns: [],\n      maxRows: 10,\n      actions: specialConfig.actions || [], //  specialConfig  actions\n      order: config.value.widgets.length,\n      enabled: true,\n      colSpan: specialConfig.colSpan || 2,\n      displayStyle: 'list',\n    };\n\n    const widgets = [...config.value.widgets, newWidget];\n    config.value = { ...config.value, widgets };\n    // watch  autoSave  false\n    if (!autoSave) {\n      isDashboardConfigInitializing = true;\n      setTimeout(() => {\n        isDashboardConfigInitializing = false;\n      }, 50);\n    }\n    return newWidget;\n  }\n\n  /**\n   * \n   * @param widgetType \n   */\n  function removeSpecialWidget(widgetType: SpecialWidgetType): void {\n    const widgets = [...config.value.widgets];\n    const index = widgets.findIndex(w => w.type === widgetType);\n    if (index !== -1) {\n      widgets.splice(index, 1);\n      // \n      widgets.forEach((w, i) => {\n        w.order = i;\n      });\n      config.value = { ...config.value, widgets };\n      // watch \n    }\n  }\n\n  /**\n   *  ID \n   * @param widgetId  ID\n   */\n  function getWidgetById(widgetId: string): DashboardWidgetConfig | undefined {\n    return config.value.widgets.find(w => w.id === widgetId);\n  }\n\n  return {\n    // \n    config,\n    isInitialized,\n\n    // Getters\n    enabledWidgets,\n    allWidgets,\n    showStats,\n    columns,\n    layout,\n\n    // Actions\n    loadConfig,\n    saveConfig,\n    updateConfig,\n    addWidget,\n    removeWidget,\n    updateWidget,\n    toggleWidget,\n    moveWidget,\n    setWidgetActions,\n    resetConfig,\n    findWidgetByTableId,\n    hasWidget,\n    hasSpecialWidget,\n    addSpecialWidget,\n    removeSpecialWidget,\n    getWidgetById,\n    ensureDefaultWidgets,\n    cleanupInvalidWidgets,\n    applyDefaultsToEmptyWidgets,\n  };\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Store\n *  globalStagedData, currentDiffMap, pendingDeletes, isSaving \n *\n * :\n * -  acu_*  localStorage \n * -  TavernDB_ACU_IsolatedData \n * -  AutoCardUpdaterAPI \n */\nimport { klona } from 'klona';\nimport { useCellLock } from '../composables/useCellLock';\nimport { saveSnapshot as saveRowSnapshot } from '../composables/useRowHistory';\nimport { isSummaryOrOutlineTable, useTableIntegrityCheck } from '../composables/useTableIntegrityCheck';\nimport { getCore, getTableData } from '../utils/index';\n// ============================================================\n//  ( types/index.ts )\n// ============================================================\n/**  */\nconst SNAPSHOT_KEY = 'acu_data_snapshot_v18_5';\n// ============================================================\n// \n// ============================================================\n/**\n * \n * null, undefined, '', 'null', 'undefined' \n * @param value \n * @returns \n */\nfunction normalizeValue(value) {\n    if (value === null || value === undefined)\n        return '';\n    const strValue = String(value).trim();\n    // 'null'  'undefined' \n    if (strValue === 'null' || strValue === 'undefined')\n        return '';\n    return strValue;\n}\n// ============================================================\n// Store \n// ============================================================\nexport const useDataStore = defineStore('acu-data', () => {\n    // ============================================================\n    //  - \n    // ============================================================\n    /**  -  globalStagedData () */\n    const stagedData = ref(null);\n    /**  - Vue  */\n    const tables = ref({});\n    /**  -  */\n    const snapshot = ref(null);\n    /**  -  */\n    const lastSavedData = ref(null);\n    /**\n     * AI - AI \n     *  generateDiffMap \n     */\n    const aiDiffMap = reactive(new Set());\n    /**\n     *  - \n     *  updateCell/insertRow \n     */\n    const manualDiffMap = reactive(new Set());\n    /**\n     *  () - \n     * @deprecated  getCellChangeType/getRowChangeType \n     */\n    const diffMap = computed(() => {\n        const merged = new Set();\n        aiDiffMap.forEach(key => merged.add(key));\n        manualDiffMap.forEach(key => merged.add(key));\n        return merged;\n    });\n    /**  -  pendingDeletes ( reactive  Set ) */\n    const pendingDeletes = reactive(new Set());\n    /**  -  isSaving */\n    const isSaving = ref(false);\n    /**  */\n    const isLoading = ref(false);\n    /**  */\n    const targetFloorInfo = ref(null);\n    // ============================================================\n    // \n    // ============================================================\n    /**  */\n    const integrityChecker = useTableIntegrityCheck();\n    /**  */\n    const cellLock = useCellLock();\n    /**  ->  */\n    const integrityIssues = integrityChecker.issuesByTable;\n    /**  */\n    const hasIntegrityIssues = integrityChecker.hasIssues;\n    /**  */\n    const problematicTables = integrityChecker.problematicTables;\n    /**  */\n    const integrityStats = integrityChecker.issueStats;\n    // ============================================================\n    // Getters\n    // ============================================================\n    /**  */\n    const hasPendingDeletes = computed(() => pendingDeletes.size > 0);\n    /**  */\n    const hasUnsavedChanges = computed(() => aiDiffMap.size > 0 || manualDiffMap.size > 0 || pendingDeletes.size > 0);\n    /**  -  */\n    const hasChanges = hasUnsavedChanges;\n    /**  */\n    const hasUndoData = computed(() => lastSavedData.value !== null);\n    /**  ( API) */\n    function getStagedData() {\n        return stagedData.value;\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    function loadSnapshot() {\n        try {\n            const data = localStorage.getItem(SNAPSHOT_KEY);\n            return data ? JSON.parse(data) : null;\n        }\n        catch {\n            return null;\n        }\n    }\n    /**\n     *  localStorage\n     */\n    function saveSnapshot(data) {\n        try {\n            //  generateDiffMap \n            snapshot.value = klona(data);\n            //  localStorage\n            localStorage.setItem(SNAPSHOT_KEY, JSON.stringify(data));\n        }\n        catch (e) {\n            console.error('[ACU] Save snapshot failed:', e);\n        }\n    }\n    /**\n     * \n     */\n    function clearSnapshot() {\n        try {\n            localStorage.removeItem(SNAPSHOT_KEY);\n        }\n        catch {\n            // ignore\n        }\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     *  snapshot stagedData\n     * \n     */\n    function saveLastState() {\n        //  snapshot localStorage \n        const currentSnapshot = snapshot.value || loadSnapshot();\n        if (currentSnapshot) {\n            lastSavedData.value = klona(currentSnapshot);\n            console.info('[ACU] ');\n        }\n        else {\n            console.warn('[ACU] ');\n        }\n    }\n    /**\n     *  App.vue \n     * @returns  null\n     */\n    function getUndoData() {\n        if (!lastSavedData.value) {\n            return null;\n        }\n        return klona(lastSavedData.value);\n    }\n    /**\n     * \n     * \n     * @returns \n     */\n    function undoToLastSave() {\n        if (!lastSavedData.value) {\n            console.warn('[ACU] ');\n            return false;\n        }\n        // \n        const restoredData = klona(lastSavedData.value);\n        stagedData.value = restoredData;\n        const processed = processToTableData(restoredData);\n        tables.value = processed;\n        //  snapshot\n        // \"\"\n        //  snapshot \n        //  AI  AI \n        aiDiffMap.clear();\n        pendingDeletes.clear();\n        //  key\n        const newDiffKeys = [];\n        //  snapshot \n        //  generateDiffMap  key tableName:rowIdx:colIdx\n        if (snapshot.value) {\n            for (const sheetId in restoredData) {\n                if (sheetId === 'mate' || sheetId === 'updated' || sheetId === 'created' || sheetId.startsWith('_')) {\n                    continue;\n                }\n                const restoredSheet = restoredData[sheetId];\n                const snapSheet = snapshot.value[sheetId];\n                if (!restoredSheet?.content)\n                    continue;\n                const tableName = restoredSheet.name || sheetId.replace('sheet_', '');\n                // \n                if (!snapSheet?.content) {\n                    for (let rowIdx = 1; rowIdx < restoredSheet.content.length; rowIdx++) {\n                        const realRowIdx = rowIdx - 1;\n                        const rowKey = getRowKey(tableName, realRowIdx);\n                        newDiffKeys.push(rowKey);\n                    }\n                    continue;\n                }\n                // \n                const maxRows = Math.max(restoredSheet.content.length, snapSheet.content.length);\n                for (let rowIdx = 1; rowIdx < maxRows; rowIdx++) {\n                    const restoredRow = restoredSheet.content[rowIdx];\n                    const snapRow = snapSheet.content[rowIdx];\n                    const realRowIdx = rowIdx - 1;\n                    // \n                    if (!restoredRow || !snapRow) {\n                        const rowKey = getRowKey(tableName, realRowIdx);\n                        newDiffKeys.push(rowKey);\n                        continue;\n                    }\n                    // \n                    const maxCols = Math.max(restoredRow.length, snapRow.length);\n                    for (let colIdx = 0; colIdx < maxCols; colIdx++) {\n                        const restoredVal = String(restoredRow[colIdx] ?? '');\n                        const snapVal = String(snapRow[colIdx] ?? '');\n                        if (restoredVal !== snapVal) {\n                            const cellKey = getCellKey(tableName, realRowIdx, colIdx);\n                            newDiffKeys.push(cellKey);\n                        }\n                    }\n                }\n            }\n        }\n        // \n        manualDiffMap.clear();\n        newDiffKeys.forEach(key => manualDiffMap.add(key));\n        // \"\"\n        // 0\n        manualDiffMap.add('__undo_pending__');\n        console.info(`[ACU] :  ${manualDiffMap.size} `);\n        // \n        // lastSavedData.value = null;\n        console.info('[ACU] ');\n        return true;\n    }\n    /**\n     * \n     */\n    function clearUndoCache() {\n        lastSavedData.value = null;\n        console.info('[ACU] ');\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    function getRowKey(tableId, rowIndex) {\n        return `${tableId}-row-${rowIndex}`;\n    }\n    /**\n     * \n     */\n    function getCellKey(tableId, rowIndex, colIndex) {\n        return `${tableId}-${rowIndex}-${colIndex}`;\n    }\n    /**\n     *  SillyTavern \n     */\n    function getSillyTavern() {\n        let ST = window.SillyTavern || (window.parent ? window.parent.SillyTavern : null);\n        if (!ST && window.top && window.top.SillyTavern) {\n            ST = window.top.SillyTavern;\n        }\n        return ST;\n    }\n    /**\n     * \n     */\n    function getSnapshotCellValue(tableId, rowIndex, colIndex) {\n        if (!snapshot.value)\n            return '';\n        for (const sheetId in snapshot.value) {\n            const sheet = snapshot.value[sheetId];\n            if (sheet && sheet.name === tableId && sheet.content) {\n                const row = sheet.content[rowIndex + 1];\n                if (row && row[colIndex] !== undefined) {\n                    return String(row[colIndex]);\n                }\n            }\n        }\n        return '';\n    }\n    /**\n     *  tables  stagedData\n     */\n    function syncToStagedData() {\n        if (!stagedData.value)\n            return;\n        const data = klona(stagedData.value);\n        for (const sheetId in data) {\n            const sheet = data[sheetId];\n            if (!sheet || !sheet.name || !sheet.content)\n                continue;\n            const tableRows = tables.value[sheet.name];\n            if (!tableRows)\n                continue;\n            const headers = sheet.content[0] || [];\n            const newContent = [headers];\n            for (const row of tableRows) {\n                const rowData = [];\n                for (let i = 0; i < headers.length; i++) {\n                    const cell = row.cells[i];\n                    rowData.push(cell ? cell.value : '');\n                }\n                newContent.push(rowData);\n            }\n            sheet.content = newContent;\n        }\n        stagedData.value = data;\n    }\n    /**\n     *  ()\n     */\n    function clearChanges(clearDeletes = false) {\n        aiDiffMap.clear();\n        manualDiffMap.clear();\n        if (clearDeletes) {\n            pendingDeletes.clear();\n        }\n    }\n    /**\n     *  ()\n     */\n    function setStagedData(data) {\n        const cloned = klona(data);\n        stagedData.value = cloned;\n        tables.value = processToTableData(cloned);\n        console.info('[ACU] ');\n        return cloned;\n    }\n    /**\n     *  AI  ()\n     *  aiDiffMap manualDiffMap\n     */\n    function generateDiffMap(currentData) {\n        //  AI \n        aiDiffMap.clear();\n        if (!snapshot.value) {\n            // \n            return;\n        }\n        const snapData = snapshot.value;\n        for (const sheetId in currentData) {\n            if (sheetId === 'mate' || sheetId === 'updated' || sheetId === 'created' || sheetId.startsWith('_')) {\n                continue;\n            }\n            const currentSheet = currentData[sheetId];\n            const snapSheet = snapData[sheetId];\n            if (!currentSheet || !currentSheet.content)\n                continue;\n            const tableName = currentSheet.name || sheetId.replace('sheet_', '');\n            //  AI \n            if (!snapSheet || !snapSheet.content) {\n                for (let rowIdx = 1; rowIdx < currentSheet.content.length; rowIdx++) {\n                    const rowKey = getRowKey(tableName, rowIdx - 1);\n                    //  AI \n                    if (!manualDiffMap.has(rowKey)) {\n                        aiDiffMap.add(rowKey);\n                    }\n                }\n                continue;\n            }\n            // \n            const maxRows = Math.max(currentSheet.content.length, snapSheet.content.length);\n            for (let rowIdx = 1; rowIdx < maxRows; rowIdx++) {\n                const currentRow = currentSheet.content[rowIdx];\n                const snapRow = snapSheet.content[rowIdx];\n                const realRowIdx = rowIdx - 1;\n                // \n                if (!currentRow || !snapRow) {\n                    const rowKey = getRowKey(tableName, realRowIdx);\n                    if (!manualDiffMap.has(rowKey)) {\n                        aiDiffMap.add(rowKey);\n                    }\n                    // currentRow  snapRow  cellKey\n                    //  getCellChangeClass \n                    if (currentRow && !snapRow) {\n                        for (let colIdx = 0; colIdx < currentRow.length; colIdx++) {\n                            const cellKey = getCellKey(tableName, realRowIdx, colIdx);\n                            if (!manualDiffMap.has(cellKey)) {\n                                aiDiffMap.add(cellKey);\n                            }\n                        }\n                    }\n                    continue;\n                }\n                // \n                const maxCols = Math.max(currentRow.length, snapRow.length);\n                for (let colIdx = 0; colIdx < maxCols; colIdx++) {\n                    // null, undefined, '', 'null' \n                    const currentVal = normalizeValue(currentRow[colIdx]);\n                    const snapVal = normalizeValue(snapRow[colIdx]);\n                    if (currentVal !== snapVal) {\n                        const cellKey = getCellKey(tableName, realRowIdx, colIdx);\n                        //  AI \n                        if (!manualDiffMap.has(cellKey)) {\n                            aiDiffMap.add(cellKey);\n                        }\n                    }\n                }\n            }\n        }\n        console.info(`[ACU] AIAI: ${aiDiffMap.size}, : ${manualDiffMap.size}`);\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    async function loadFromDatabase() {\n        if (isLoading.value) {\n            console.warn('[ACU] ');\n            return;\n        }\n        try {\n            isLoading.value = true;\n            console.info('[ACU] ...');\n            const rawData = getTableData();\n            if (!rawData) {\n                console.warn('[ACU] ');\n                return;\n            }\n            const clonedData = klona(rawData);\n            stagedData.value = clonedData;\n            const processed = processToTableData(clonedData);\n            // \n            const tabsWithIcons = Object.entries(processed).reduce((acc, [key, rows]) => {\n                // ... \n                acc[key] = rows;\n                return acc;\n            }, {});\n            tables.value = processed;\n            snapshot.value = klona(clonedData);\n            aiDiffMap.clear();\n            manualDiffMap.clear();\n            pendingDeletes.clear();\n            saveSnapshot(clonedData);\n            //  AI \n            integrityChecker.checkIntegrity(clonedData, null, new Set());\n            console.info('[ACU] :', Object.keys(processed).length);\n        }\n        catch (error) {\n            console.error('[ACU] :', error);\n            throw error;\n        }\n        finally {\n            isLoading.value = false;\n        }\n    }\n    /**\n     *  Vue \n     *  processJsonData  name  sheet\n     */\n    function processToTableData(rawData) {\n        const result = {};\n        for (const sheetId in rawData) {\n            const sheet = rawData[sheetId];\n            //  name  sheet\n            if (!sheet?.name) {\n                continue;\n            }\n            if (!sheet.content || !Array.isArray(sheet.content)) {\n                continue;\n            }\n            //  sheet.name \n            const tableName = sheet.name;\n            const headers = sheet.content[0] || [];\n            const rows = [];\n            for (let rowIdx = 1; rowIdx < sheet.content.length; rowIdx++) {\n                const rowData = sheet.content[rowIdx];\n                const cells = [];\n                for (let colIdx = 0; colIdx < headers.length; colIdx++) {\n                    cells.push({\n                        key: String(headers[colIdx] || `col_${colIdx}`),\n                        value: String(rowData[colIdx] ?? ''),\n                    });\n                }\n                rows.push({\n                    index: rowIdx - 1,\n                    cells,\n                });\n            }\n            result[tableName] = rows;\n        }\n        return result;\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    function findTargetFloor() {\n        const ST = getSillyTavern();\n        if (!ST || !ST.chat || ST.chat.length === 0)\n            return -1;\n        for (let i = ST.chat.length - 1; i >= 0; i--) {\n            const msg = ST.chat[i];\n            if (!msg.is_user && msg.TavernDB_ACU_IsolatedData) {\n                targetFloorInfo.value = {\n                    index: i,\n                    isAuto: true,\n                    reason: '',\n                };\n                return i;\n            }\n        }\n        for (let i = ST.chat.length - 1; i >= 0; i--) {\n            const msg = ST.chat[i];\n            if (!msg.is_user) {\n                targetFloorInfo.value = {\n                    index: i,\n                    isAuto: true,\n                    reason: '',\n                };\n                return i;\n            }\n        }\n        return -1;\n    }\n    /**\n     * \n     */\n    function filterDeletedRows(data) {\n        if (pendingDeletes.size === 0)\n            return data;\n        const result = klona(data);\n        for (const sheetId in result) {\n            if (sheetId === 'mate')\n                continue;\n            const sheet = result[sheetId];\n            if (!sheet || !sheet.name || !sheet.content)\n                continue;\n            const newContent = [sheet.content[0]];\n            for (let i = 1; i < sheet.content.length; i++) {\n                const realIdx = i - 1;\n                const rowKey = getRowKey(sheet.name, realIdx);\n                if (!pendingDeletes.has(rowKey)) {\n                    newContent.push(sheet.content[i]);\n                }\n            }\n            sheet.content = newContent;\n        }\n        return result;\n    }\n    /**\n     * \n     */\n    async function writeToFloor(floorIndex, data) {\n        const ST = getSillyTavern();\n        if (!ST || !ST.chat || !ST.chat[floorIndex]) {\n            throw new Error(` ${floorIndex} `);\n        }\n        const targetMsg = ST.chat[floorIndex];\n        // \n        let finalKey = '';\n        if (targetMsg.TavernDB_ACU_IsolatedData) {\n            const existingKeys = Object.keys(targetMsg.TavernDB_ACU_IsolatedData);\n            if (existingKeys.length > 0) {\n                finalKey = existingKeys[0];\n            }\n        }\n        else {\n            targetMsg.TavernDB_ACU_IsolatedData = {};\n        }\n        if (!targetMsg.TavernDB_ACU_IsolatedData[finalKey]) {\n            targetMsg.TavernDB_ACU_IsolatedData[finalKey] = {\n                independentData: {},\n                modifiedKeys: [],\n                updateGroupKeys: [],\n            };\n        }\n        const tagData = targetMsg.TavernDB_ACU_IsolatedData[finalKey];\n        if (!tagData.independentData)\n            tagData.independentData = {};\n        const sheetsToSave = Object.keys(data).filter(k => k.startsWith('sheet_'));\n        sheetsToSave.forEach(k => {\n            tagData.independentData[k] = klona(data[k]);\n        });\n        const existingKeys = tagData.modifiedKeys || [];\n        tagData.modifiedKeys = [...new Set([...existingKeys, ...sheetsToSave])];\n    }\n    /**\n     * \n     */\n    async function syncWorldbook() {\n        const api = getCore().getDB();\n        if (api && api.syncWorldbookEntries) {\n            try {\n                await api.syncWorldbookEntries({ createIfNeeded: true });\n            }\n            catch (syncErr) {\n                console.warn('[ACU] Worldbook sync failed:', syncErr);\n            }\n        }\n    }\n    /**\n     * \n     */\n    async function saveChatDebounced() {\n        const ST = getSillyTavern();\n        if (ST?.saveChatDebounced) {\n            await ST.saveChatDebounced();\n        }\n        else if (ST?.saveChat) {\n            await ST.saveChat();\n        }\n    }\n    /**\n     * \n     */\n    async function saveToDatabase() {\n        if (isSaving.value) {\n            console.warn('[ACU] ');\n            return { success: false, savedToFloor: -1, error: '' };\n        }\n        try {\n            isSaving.value = true;\n            console.info('[ACU] ...');\n            let dataToSave = stagedData.value;\n            if (!dataToSave) {\n                dataToSave = getTableData();\n            }\n            if (!dataToSave) {\n                throw new Error('');\n            }\n            const filteredData = filterDeletedRows(klona(dataToSave));\n            const targetFloor = findTargetFloor();\n            if (targetFloor === -1) {\n                throw new Error('');\n            }\n            await writeToFloor(targetFloor, filteredData);\n            await syncWorldbook();\n            await saveChatDebounced();\n            snapshot.value = klona(filteredData);\n            stagedData.value = klona(filteredData);\n            clearChanges(true);\n            saveSnapshot(filteredData);\n            console.info(`[ACU] : ${targetFloor}`);\n            return { success: true, savedToFloor: targetFloor };\n        }\n        catch (error) {\n            const errMsg = error.message;\n            console.error('[ACU] :', error);\n            return { success: false, savedToFloor: -1, error: errMsg };\n        }\n        finally {\n            isSaving.value = false;\n        }\n    }\n    /**\n     * \n     */\n    async function saveToFloor(floorIndex) {\n        if (isSaving.value) {\n            console.warn('[ACU] ');\n            return { success: false, savedToFloor: -1, error: '' };\n        }\n        try {\n            isSaving.value = true;\n            console.info(`[ACU]  ${floorIndex} ...`);\n            let dataToSave = stagedData.value;\n            if (!dataToSave) {\n                dataToSave = getTableData();\n            }\n            if (!dataToSave) {\n                throw new Error('');\n            }\n            const filteredData = filterDeletedRows(klona(dataToSave));\n            await writeToFloor(floorIndex, filteredData);\n            await syncWorldbook();\n            await saveChatDebounced();\n            snapshot.value = klona(filteredData);\n            stagedData.value = klona(filteredData);\n            clearChanges(true);\n            saveSnapshot(filteredData);\n            console.info(`[ACU]  ${floorIndex} `);\n            return { success: true, savedToFloor: floorIndex };\n        }\n        catch (error) {\n            const errMsg = error.message;\n            console.error('[ACU] :', error);\n            return { success: false, savedToFloor: -1, error: errMsg };\n        }\n        finally {\n            isSaving.value = false;\n        }\n    }\n    /**\n     * \n     */\n    async function purgeFloorRange(startFloor, endFloor) {\n        if (isSaving.value) {\n            console.warn('[ACU] ');\n            return;\n        }\n        try {\n            isSaving.value = true;\n            console.info(`[ACU]  ${startFloor}  ${endFloor} ...`);\n            const ST = getSillyTavern();\n            if (!ST || !ST.chat) {\n                throw new Error('');\n            }\n            const maxIdx = ST.chat.length - 1;\n            const safeStartFloor = Math.max(0, startFloor);\n            const safeEndFloor = Math.min(maxIdx, endFloor);\n            if (isNaN(safeStartFloor) || isNaN(safeEndFloor) || safeStartFloor > safeEndFloor) {\n                throw new Error('');\n            }\n            const keysToDelete = [\n                'TavernDB_ACU_Data',\n                'TavernDB_ACU_SummaryData',\n                'TavernDB_ACU_IndependentData',\n                'TavernDB_ACU_Identity',\n                'TavernDB_ACU_IsolatedData',\n                'TavernDB_ACU_ModifiedKeys',\n                'TavernDB_ACU_UpdateGroupKeys',\n            ];\n            let purgedCount = 0;\n            for (let i = safeStartFloor; i <= safeEndFloor; i++) {\n                const msg = ST.chat[i];\n                if (!msg)\n                    continue;\n                let messageModified = false;\n                for (const key of keysToDelete) {\n                    if (Object.prototype.hasOwnProperty.call(msg, key)) {\n                        delete msg[key];\n                        messageModified = true;\n                    }\n                }\n                if (messageModified) {\n                    purgedCount++;\n                }\n            }\n            if (purgedCount > 0) {\n                await saveChatDebounced();\n                await syncWorldbook();\n                // \n                const latestData = getTableData();\n                if (latestData) {\n                    const clonedData = klona(latestData);\n                    stagedData.value = clonedData;\n                    tables.value = processToTableData(clonedData);\n                    saveSnapshot(clonedData);\n                }\n                else {\n                    stagedData.value = null;\n                    tables.value = {};\n                    clearSnapshot();\n                }\n                clearChanges(true);\n            }\n            console.info(`[ACU]  ${purgedCount} `);\n        }\n        catch (error) {\n            console.error('[ACU] :', error);\n            throw error;\n        }\n        finally {\n            isSaving.value = false;\n        }\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    function insertRow(tableId, afterIndex) {\n        const tableRows = tables.value[tableId];\n        if (!tableRows || tableRows.length === 0) {\n            console.warn(`[ACU]  ${tableId} `);\n            return;\n        }\n        const templateRow = tableRows[0];\n        const newRow = {\n            index: tableRows.length,\n            cells: templateRow.cells.map((cell) => ({\n                key: cell.key,\n                value: '',\n            })),\n        };\n        tableRows.splice(afterIndex + 1, 0, newRow);\n        tableRows.forEach((row, i) => {\n            row.index = i;\n        });\n        const rowKey = getRowKey(tableId, afterIndex + 1);\n        // \n        manualDiffMap.add(rowKey);\n        syncToStagedData();\n        console.info(`[ACU]  ${tableId}  ${afterIndex} `);\n    }\n    /**\n     * ID\n     * \n     */\n    function getCurrentChatId() {\n        const ST = getSillyTavern();\n        // 1:  API\n        if (ST?.getCurrentChatId) {\n            const id = ST.getCurrentChatId();\n            if (id)\n                return id;\n        }\n        // 2:  chat_metadata \n        if (ST?.chat_metadata?.chat_id) {\n            return String(ST.chat_metadata.chat_id);\n        }\n        // 3: \n        if (ST?.chat?.length > 0 && ST.chat[0]?.chat_id) {\n            return ST.chat[0].chat_id;\n        }\n        //  'default' \n        return 'default';\n    }\n    /**\n     * \n     * @param tableId  ID\n     * @param rowIndex \n     * @param colIndex \n     * @param value \n     * @param options \n     * @param options.skipHistory \n     */\n    function updateCell(tableId, rowIndex, colIndex, value, options) {\n        const tableRows = tables.value[tableId];\n        if (!tableRows || !tableRows[rowIndex]) {\n            console.warn(`[ACU] : ${tableId}[${rowIndex}][${colIndex}]`);\n            return;\n        }\n        const row = tableRows[rowIndex];\n        if (row.cells[colIndex]) {\n            const oldValue = row.cells[colIndex].value;\n            row.cells[colIndex].value = value;\n            const cellKey = getCellKey(tableId, rowIndex, colIndex);\n            const snapshotValue = getSnapshotCellValue(tableId, rowIndex, colIndex);\n            if (value !== snapshotValue) {\n                // \n                manualDiffMap.add(cellKey);\n                //  AI \n                aiDiffMap.delete(cellKey);\n                // ===  ===\n                // \n                if (!options?.skipHistory) {\n                    const chatId = getCurrentChatId();\n                    console.info('[ACU] , :', {\n                        chatId,\n                        tableId,\n                        rowIndex,\n                        colIndex,\n                        oldValue: oldValue.substring(0, 50) + (oldValue.length > 50 ? '...' : ''),\n                        newValue: value.substring(0, 50) + (value.length > 50 ? '...' : ''),\n                    });\n                    if (chatId) {\n                        // \n                        const rowBeforeEdit = {\n                            index: rowIndex,\n                            key: getRowKey(tableId, rowIndex),\n                            cells: row.cells.map((cell, i) => ({\n                                colIndex: i,\n                                key: cell.key,\n                                value: i === colIndex ? oldValue : cell.value,\n                            })),\n                        };\n                        // \n                        saveRowSnapshot(chatId, tableId, rowBeforeEdit, 'manual')\n                            .then(() => {\n                            console.info('[ACU] ');\n                        })\n                            .catch((err) => {\n                            console.warn('[ACU] :', err);\n                        });\n                    }\n                    else {\n                        console.warn('[ACU]  chatId');\n                    }\n                }\n                // ===  ===\n            }\n            else {\n                // \n                manualDiffMap.delete(cellKey);\n                aiDiffMap.delete(cellKey);\n                const isRowUnchanged = row.cells.every((cell, i) => cell.value === getSnapshotCellValue(tableId, rowIndex, i));\n                if (isRowUnchanged) {\n                    row.cells.forEach((_, i) => {\n                        const key = getCellKey(tableId, rowIndex, i);\n                        manualDiffMap.delete(key);\n                        aiDiffMap.delete(key);\n                    });\n                }\n            }\n            syncToStagedData();\n            console.info(`[ACU]  ${tableId}[${rowIndex}][${colIndex}]: \"${oldValue}\" -> \"${value}\"`);\n        }\n    }\n    /**\n     *  ( API)\n     */\n    function toggleDelete(rowKey) {\n        if (pendingDeletes.has(rowKey)) {\n            pendingDeletes.delete(rowKey);\n            console.info(`[ACU] : ${rowKey}`);\n        }\n        else {\n            pendingDeletes.add(rowKey);\n            console.info(`[ACU] : ${rowKey}`);\n        }\n    }\n    /**\n     *  ( API)\n     */\n    function toggleDeleteRow(tableId, rowIndex) {\n        const rowKey = getRowKey(tableId, rowIndex);\n        toggleDelete(rowKey);\n    }\n    /**\n     * \n     */\n    function markForDelete(tableId, rowIndex) {\n        const rowKey = getRowKey(tableId, rowIndex);\n        pendingDeletes.add(rowKey);\n    }\n    /**\n     * \n     */\n    function unmarkForDelete(tableId, rowIndex) {\n        const rowKey = getRowKey(tableId, rowIndex);\n        pendingDeletes.delete(rowKey);\n    }\n    /**\n     *  AI \n     *  Tab \n     */\n    function hasTableAiChanges(tableName) {\n        //  aiDiffMap\n        for (const key of aiDiffMap) {\n            // key : \"-row-\"  \"--\"\n            if (key.startsWith(`${tableName}-`)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     *  ID\n     */\n    function extractTableIdFromKey(key) {\n        const parts = key.split('-');\n        if (parts.length >= 2) {\n            //  \"row\" \n            const tableNameParts = [];\n            for (let i = 0; i < parts.length; i++) {\n                if (parts[i] === 'row' || /^\\d+$/.test(parts[i])) {\n                    break;\n                }\n                tableNameParts.push(parts[i]);\n            }\n            if (tableNameParts.length > 0) {\n                return tableNameParts.join('-');\n            }\n        }\n        return null;\n    }\n    /**\n     *  AI \n     */\n    function getTablesWithAiChanges() {\n        const tablesSet = new Set();\n        for (const key of aiDiffMap) {\n            const tableId = extractTableIdFromKey(key);\n            if (tableId)\n                tablesSet.add(tableId);\n        }\n        return Array.from(tablesSet);\n    }\n    /**\n     *  ID (sheet_xxx)\n     */\n    function getTableIdByName(tableName) {\n        if (!stagedData.value)\n            return null;\n        for (const sheetId in stagedData.value) {\n            if (stagedData.value[sheetId]?.name === tableName) {\n                return sheetId;\n            }\n        }\n        return null;\n    }\n    /**\n     *  ID  ( + AI + )\n     * \n     * diffMap  key  tableName  tableId (sheet_xxx)\n     */\n    function getModifiedTableIds() {\n        const tableNames = new Set();\n        // 1. \n        for (const key of manualDiffMap) {\n            const tableName = extractTableIdFromKey(key);\n            if (tableName)\n                tableNames.add(tableName);\n        }\n        // 2. AI \n        for (const key of aiDiffMap) {\n            const tableName = extractTableIdFromKey(key);\n            if (tableName)\n                tableNames.add(tableName);\n        }\n        // 3. \n        for (const key of pendingDeletes) {\n            const tableName = extractTableIdFromKey(key);\n            if (tableName)\n                tableNames.add(tableName);\n        }\n        // 4.  ID\n        const tableIds = new Set();\n        for (const name of tableNames) {\n            const id = getTableIdByName(name);\n            if (id) {\n                tableIds.add(id);\n            }\n            else if (stagedData.value && stagedData.value[name]) {\n                //  ID  ()\n                tableIds.add(name);\n            }\n        }\n        return Array.from(tableIds);\n    }\n    /**\n     * \n     * @returns 'manual' | 'ai' | null\n     */\n    function getCellChangeType(cellId) {\n        // \n        if (manualDiffMap.has(cellId))\n            return 'manual';\n        if (aiDiffMap.has(cellId))\n            return 'ai';\n        return null;\n    }\n    /**\n     * \n     * @returns 'manual' | 'ai' | null ( manual AI  ai)\n     */\n    function getRowChangeType(tableId, rowIndex, colCount) {\n        const rowKey = getRowKey(tableId, rowIndex);\n        // \n        if (manualDiffMap.has(rowKey))\n            return 'manual';\n        if (aiDiffMap.has(rowKey))\n            return 'ai';\n        // \n        if (pendingDeletes.has(rowKey))\n            return 'manual';\n        const tableRows = tables.value[tableId];\n        const cols = colCount ?? (tableRows?.[rowIndex]?.cells.length || 0);\n        let hasManual = false;\n        let hasAi = false;\n        for (let c = 0; c < cols; c++) {\n            const cellKey = getCellKey(tableId, rowIndex, c);\n            if (manualDiffMap.has(cellKey))\n                hasManual = true;\n            if (aiDiffMap.has(cellKey))\n                hasAi = true;\n        }\n        // \n        if (hasManual)\n            return 'manual';\n        if (hasAi)\n            return 'ai';\n        return null;\n    }\n    /**\n     *  ( API)\n     */\n    function isRowChanged(tableId, rowIndex, colCount) {\n        return getRowChangeType(tableId, rowIndex, colCount) !== null;\n    }\n    /**\n     * \n     */\n    function isRowPendingDelete(tableId, rowIndex) {\n        return pendingDeletes.has(getRowKey(tableId, rowIndex));\n    }\n    /**\n     *  ( API)\n     */\n    function isPendingDelete(rowKey) {\n        return pendingDeletes.has(rowKey);\n    }\n    /**\n     *  ( API)\n     */\n    function isCellChanged(cellId) {\n        return getCellChangeType(cellId) !== null;\n    }\n    // ============================================================\n    //  Store \n    // ============================================================\n    return {\n        // \n        stagedData,\n        tables,\n        snapshot,\n        aiDiffMap,\n        manualDiffMap,\n        diffMap, // \n        pendingDeletes,\n        isSaving,\n        isLoading,\n        targetFloorInfo,\n        lastSavedData,\n        // Getters\n        hasPendingDeletes,\n        hasUnsavedChanges,\n        hasChanges,\n        getModifiedTableIds,\n        hasUndoData,\n        getStagedData,\n        // \n        loadFromDatabase,\n        processToTableData,\n        setStagedData,\n        generateDiffMap,\n        // \n        saveToDatabase,\n        saveToFloor,\n        purgeFloorRange,\n        // \n        insertRow,\n        updateCell,\n        toggleDelete,\n        toggleDeleteRow,\n        markForDelete,\n        unmarkForDelete,\n        //  ( API)\n        getCellChangeType,\n        getRowChangeType,\n        hasTableAiChanges,\n        getTablesWithAiChanges,\n        //  ( API)\n        isRowChanged,\n        isRowPendingDelete,\n        isPendingDelete,\n        isCellChanged,\n        // \n        getRowKey,\n        getCellKey,\n        clearChanges,\n        syncToStagedData,\n        // \n        loadSnapshot,\n        saveSnapshot,\n        clearSnapshot,\n        // \n        saveLastState,\n        undoToLastSave,\n        clearUndoCache,\n        getUndoData,\n        // \n        integrityIssues,\n        hasIntegrityIssues,\n        problematicTables,\n        integrityStats,\n        /**\n         * \n         *  AI \n         */\n        checkIntegrity: (data) => {\n            //  aiDiffMap\n            integrityChecker.checkIntegrity(data, snapshot.value, aiDiffMap);\n        },\n        hasTableIssues: integrityChecker.hasTableIssues,\n        getTableIssues: integrityChecker.getTableIssues,\n        getIntegritySummary: integrityChecker.getSummaryText,\n        clearIntegrityIssues: integrityChecker.clearIssues,\n        isSummaryOrOutlineTable,\n    };\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Store\n * \n *  ConfigManager \n */\n\nimport { defineStore } from 'pinia';\nimport { computed, ref, watch } from 'vue';\nimport { getACUConfigManager } from '../composables/useACUConfigManager';\nimport { DEFAULT_LUCK_TIERS } from '../composables/useDraw';\nimport { drawFromLatestRowWithConfig, shuffleArray, type TableConfig } from '../composables/useWordPool';\nimport type {\n  BiasType,\n  Dimension,\n  DimensionTier,\n  DivinationCategory,\n  DivinationConfig,\n  DivinationPreset,\n  DivinationResult,\n} from '../types';\nimport { getTableData } from '../utils';\nimport { compressImage, fileToBase64 } from '../utils/imageUpload';\n\n/**  */\nconst WORLDBOOK_NAME = 'ACU_Divination';\n\n/**  */\nconst DEFAULT_LUCK_DIMENSION: Dimension = {\n  id: 'luck',\n  name: '',\n  enabled: true,\n  tiers: DEFAULT_LUCK_TIERS,\n};\n\n/**  () */\nconst DEFAULT_SANITY_DIMENSION: Dimension = {\n  id: 'sanity',\n  name: '',\n  enabled: false,\n  tiers: [\n    { id: 'normal', name: '', weight: 50, prompt: '' },\n    {\n      id: 'absurd',\n      name: '\"\"',\n      weight: 50,\n      prompt:\n        '',\n    },\n  ],\n};\n\n/**  */\nconst DEFAULT_MISUNDERSTANDING_DIMENSION: Dimension = {\n  id: 'misunderstanding',\n  name: '',\n  enabled: false,\n  tiers: [\n    {\n      id: 'semantic',\n      name: '',\n      weight: 1,\n      prompt:\n        'AB',\n    },\n    {\n      id: 'projection',\n      name: '',\n      weight: 1,\n      prompt:\n        'BA',\n    },\n    {\n      id: 'fragment',\n      name: '',\n      weight: 1,\n      prompt:\n        'BB',\n    },\n    {\n      id: 'jargon',\n      name: '',\n      weight: 1,\n      prompt:\n        'AB',\n    },\n  ],\n};\n\n/**  */\nconst DEFAULT_CONFIG: DivinationConfig = {\n  enabled: true,\n  drawCount: 4,\n  enableBias: true,\n  autoSync: true,\n  cardBackImage: '',\n  themeColor: '#6b4c9a',\n  themeId: 'wafuku', // \n  flipMode: 'auto',\n  peepMode: false, // \n  dimensions: [DEFAULT_LUCK_DIMENSION, DEFAULT_SANITY_DIMENSION, DEFAULT_MISUNDERSTANDING_DIMENSION],\n  customTemplate: '',\n  // \n  enableWordDrawing: true, // @deprecated\n  enableTableWords: true, // \n  enableWordPool: false, // \n  wordDrawMode: 'perItem', // 1\n  wordsPerItem: 1,\n  tableColumnConfig: undefined, // @deprecated\n  tablePoolConfig: {}, // ID -> \n  categoryConfig: {},\n  tableSyncConfig: {}, // \n};\n\nexport const useDivinationStore = defineStore('acu-divination', () => {\n  // ============================================================\n  //  ConfigManager \n  // ============================================================\n  const configManager = getACUConfigManager();\n\n  /**  */\n  function loadStoredConfig(): DivinationConfig {\n    const stored = configManager.config.divination.config;\n    return {\n      ...DEFAULT_CONFIG,\n      ...stored,\n      dimensions: stored?.dimensions?.length > 0 ? stored.dimensions : DEFAULT_CONFIG.dimensions,\n      tablePoolConfig: stored?.tablePoolConfig || {},\n      tableSyncConfig: stored?.tableSyncConfig || {},\n    } as DivinationConfig;\n  }\n\n  /**  -  ref + watch  */\n  const config = ref<DivinationConfig>(loadStoredConfig());\n\n  //  ConfigManager\n  let isFirstWatch = true;\n  watch(\n    config,\n    newValue => {\n      if (isFirstWatch) {\n        isFirstWatch = false;\n        return;\n      }\n      configManager.config.divination.config = newValue;\n      configManager.saveConfig();\n    },\n    { deep: true },\n  );\n\n  /**  -  ConfigManager  */\n  const presets = computed({\n    get: () => configManager.config.divination.presets || [],\n    set: (value: DivinationPreset[]) => {\n      configManager.config.divination.presets = value;\n      configManager.saveConfig();\n    },\n  });\n\n  /**  ID */\n  const activePresetId = computed({\n    get: () => configManager.config.divination.activePresetId,\n    set: (value: string | null) => {\n      configManager.config.divination.activePresetId = value;\n      configManager.saveConfig();\n    },\n  });\n\n  /**  () */\n  const categories = ref<DivinationCategory[]>([]);\n\n  /**  (ConfigManager ) */\n  const isLoaded = computed(() => configManager.isLoaded.value);\n\n  // ============================================================\n  //  -  ConfigManager\n  // ============================================================\n\n  /**\n   *  - ConfigManager \n   */\n  function loadConfig() {\n    console.info('[Divination] ');\n  }\n\n  /**\n   *  -  ConfigManager\n   */\n  function saveConfig() {\n    configManager.saveConfig();\n    console.info('[Divination] ');\n  }\n\n  // ============================================================\n  // Preset Management\n  // ============================================================\n\n  /**\n   * \n   */\n  function createPreset(name: string): DivinationPreset {\n    const preset: DivinationPreset = {\n      id: `preset_${Date.now()}`,\n      name,\n      createdAt: new Date().toISOString(),\n      dimensions: JSON.parse(JSON.stringify(config.value.dimensions)),\n    };\n    const newPresets = [...presets.value, preset];\n    configManager.config.divination.presets = newPresets;\n    configManager.config.divination.activePresetId = preset.id;\n    configManager.saveConfig();\n    return preset;\n  }\n\n  /**\n   * \n   */\n  function saveCurrentToPreset(name: string): DivinationPreset {\n    const currentPresets = [...presets.value];\n    const existingIndex = currentPresets.findIndex(p => p.name === name);\n    if (existingIndex > -1) {\n      // \n      const existing = currentPresets[existingIndex];\n      const updated: DivinationPreset = {\n        ...existing,\n        dimensions: JSON.parse(JSON.stringify(config.value.dimensions)),\n      };\n      currentPresets[existingIndex] = updated;\n      configManager.config.divination.presets = currentPresets;\n      configManager.config.divination.activePresetId = existing.id;\n      configManager.saveConfig();\n      return updated;\n    } else {\n      // \n      return createPreset(name);\n    }\n  }\n\n  /**\n   * \n   */\n  function deletePreset(presetId: string) {\n    const currentPresets = [...presets.value];\n    const index = currentPresets.findIndex(p => p.id === presetId);\n    if (index > -1) {\n      currentPresets.splice(index, 1);\n      configManager.config.divination.presets = currentPresets;\n      if (activePresetId.value === presetId) {\n        configManager.config.divination.activePresetId = null;\n      }\n      configManager.saveConfig();\n    }\n  }\n\n  /**\n   * \n   */\n  function applyPreset(presetId: string) {\n    const preset = presets.value.find(p => p.id === presetId);\n    if (preset) {\n      configManager.config.divination.config = {\n        ...config.value,\n        dimensions: JSON.parse(JSON.stringify(preset.dimensions)),\n      };\n      configManager.config.divination.activePresetId = presetId;\n      configManager.saveConfig();\n    }\n  }\n\n  /**\n   * \n   */\n  function restoreDefaultDimensions() {\n    configManager.config.divination.config = {\n      ...DEFAULT_CONFIG,\n      // \n      cardBackImage: config.value.cardBackImage,\n      tablePoolConfig: config.value.tablePoolConfig || {},\n      tableSyncConfig: config.value.tableSyncConfig || {},\n      categoryConfig: config.value.categoryConfig || {},\n      // \n      themeColor: config.value.themeColor,\n      themeId: config.value.themeId,\n\n      // \n      dimensions: [\n        JSON.parse(JSON.stringify(DEFAULT_LUCK_DIMENSION)),\n        JSON.parse(JSON.stringify(DEFAULT_SANITY_DIMENSION)),\n        JSON.parse(JSON.stringify(DEFAULT_MISUNDERSTANDING_DIMENSION)),\n      ],\n    };\n    configManager.config.divination.activePresetId = null;\n    configManager.saveConfig();\n  }\n\n  // ============================================================\n  // Dimension Management\n  // ============================================================\n\n  function addDimension(dimension: Dimension) {\n    const newConfig = { ...config.value };\n    newConfig.dimensions = [...newConfig.dimensions, dimension];\n    configManager.config.divination.config = newConfig;\n    configManager.saveConfig();\n  }\n\n  function updateDimension(index: number, dimension: Dimension) {\n    const newConfig = { ...config.value };\n    if (index >= 0 && index < newConfig.dimensions.length) {\n      newConfig.dimensions = [...newConfig.dimensions];\n      newConfig.dimensions[index] = dimension;\n      configManager.config.divination.config = newConfig;\n      configManager.saveConfig();\n    }\n  }\n\n  function removeDimension(index: number) {\n    const newConfig = { ...config.value };\n    if (index >= 0 && index < newConfig.dimensions.length) {\n      //  ()\n      if (newConfig.dimensions[index].id === 'luck') {\n        console.warn('[Divination] Cannot remove luck dimension');\n        return;\n      }\n      newConfig.dimensions = [...newConfig.dimensions];\n      newConfig.dimensions.splice(index, 1);\n      configManager.config.divination.config = newConfig;\n      configManager.saveConfig();\n    }\n  }\n\n  /**\n   *  ()\n   */\n  async function updateCategory(category: DivinationCategory) {\n    try {\n      // 1. \n      const index = categories.value.findIndex(c => c.id === category.id);\n      if (index !== -1) {\n        categories.value[index] = category;\n      }\n\n      // 2. \n      let allEntries: any[] = [];\n      try {\n        allEntries = await getWorldbook(WORLDBOOK_NAME);\n      } catch {\n        console.warn('[Divination] Worldbook not found, creating new...');\n      }\n\n      //  entry\n      const entryIndex = allEntries.findIndex(e => e.uid === category.id);\n\n      //  content \n      const content = category.words.join('\\n');\n\n      if (entryIndex !== -1) {\n        // \n        allEntries[entryIndex] = {\n          ...allEntries[entryIndex],\n          content,\n          enabled: category.enabled,\n        };\n      } else {\n        console.warn(`[Divination] Entry with uid ${category.id} not found in worldbook`);\n        return;\n      }\n\n      // 3. \n      if (typeof createOrReplaceWorldbook === 'function') {\n        // @ts-ignore\n        await createOrReplaceWorldbook(WORLDBOOK_NAME, allEntries, { render: 'debounced' });\n        console.info('[Divination] Category updated in worldbook');\n      }\n    } catch (e) {\n      console.error('[Divination] Failed to update category:', e);\n    }\n  }\n\n  /**\n   * \n   */\n  async function uploadCardBack(file: File) {\n    try {\n      // 1.  Base64\n      const base64 = await fileToBase64(file);\n\n      // 2.  ( 1024px 0.9)\n      const compressed = await compressImage(base64, 1024, 0.9);\n\n      // 3. \n      const newConfig = { ...config.value, cardBackImage: compressed };\n      configManager.config.divination.config = newConfig;\n      configManager.saveConfig();\n      console.info('[Divination] Card back image uploaded');\n    } catch (e) {\n      console.error('[Divination] Failed to upload card back:', e);\n      throw e;\n    }\n  }\n\n  // ============================================================\n  // Worldbook Integration\n  // ============================================================\n\n  /**\n   * \n   * : Name|Bias|Limit  Name\n   */\n  function parseEntryName(entryName: string): { name: string; bias: BiasType; limit: number } {\n    const parts = entryName.split('|');\n    const name = parts[0];\n    let bias: BiasType = 'neutral';\n    let limit = 0;\n\n    if (parts.length > 1) {\n      const biasStr = parts[1];\n      if (biasStr === '' || biasStr === 'positive') bias = 'positive';\n      else if (biasStr === '' || biasStr === 'negative') bias = 'negative';\n      else bias = 'neutral';\n    }\n\n    if (parts.length > 2) {\n      limit = parseInt(parts[2], 10) || 0;\n    }\n\n    return { name, bias, limit };\n  }\n\n  /**\n   * \n   */\n  async function loadFromWorldbook() {\n    try {\n      if (typeof getWorldbook !== 'function') {\n        console.warn('[Divination] getWorldbook API unavailable');\n        return;\n      }\n\n      const entries = await getWorldbook(WORLDBOOK_NAME);\n\n      categories.value = entries.map(entry => {\n        const { name, bias, limit } = parseEntryName(entry.name);\n        // \n        const words = entry.content\n          .split('\\n')\n          .map(w => w.trim())\n          .filter(w => w);\n\n        return {\n          id: entry.uid,\n          name,\n          bias,\n          limit,\n          path: [...entry.strategy.keys, name],\n          words,\n          enabled: entry.enabled,\n          rawEntry: entry,\n        };\n      });\n\n      console.info(`[Divination] Loaded ${categories.value.length} categories from worldbook`);\n    } catch (e) {\n      console.warn('[Divination] Failed to load worldbook (it might not exist yet):', e);\n      categories.value = [];\n    }\n  }\n\n  /**\n   *  ACU \n   */\n  async function syncFromACU() {\n    console.info('[Divination] Starting sync from ACU...');\n    try {\n      const tables = getTableData();\n      if (!tables) {\n        console.warn('[Divination] No ACU table data found');\n        return;\n      }\n\n      // 1.  \"Random\"  \"\" \n      const randomTables: any[] = [];\n      const syncConfig = config.value.tableSyncConfig || {};\n\n      for (const key in tables) {\n        const table = tables[key];\n        // @ts-ignore\n        if (table.name && (table.name.includes('Random') || table.name.includes(''))) {\n          const tableId = table.id || key;\n          if (syncConfig[tableId] === false) {\n            console.info(`[Divination] Table ${table.name} (${tableId}) sync disabled by config`);\n            continue;\n          }\n          randomTables.push(table);\n        }\n      }\n\n      if (randomTables.length === 0) {\n        console.info('[Divination] No tables found to sync (or all disabled)');\n        return;\n      }\n\n      // 2. \n      const newEntriesMap = new Map<\n        string,\n        {\n          name: string;\n          bias: BiasType;\n          limit: number;\n          words: Set<string>;\n          keys: string[];\n        }\n      >();\n\n      for (const table of randomTables) {\n        const headers = table.content?.[0] || [];\n        const rows = table.content?.slice(1) || [];\n        const tableName = table.name || 'Random';\n\n        headers.forEach((header: string | number, colIndex: number) => {\n          const headerStr = String(header).trim();\n          if (!headerStr) return;\n\n          const isDefaultColumnName = /^(\\d+|Column\\s*\\d+|Col\\s*\\d+|[A-Z])$/i.test(headerStr);\n          const categoryName = isDefaultColumnName ? tableName : headerStr;\n\n          let { name, bias, limit } = parseEntryName(categoryName);\n\n          if (headerStr.indexOf('|') === -1) {\n            if (name.includes('') || name.includes('') || name.includes('') || name.includes('')) {\n              bias = 'positive';\n            } else if (name.includes('') || name.includes('') || name.includes('') || name.includes('')) {\n              bias = 'negative';\n            }\n          }\n\n          const entryKey = `${name}|${bias}|${limit}`;\n\n          if (!newEntriesMap.has(entryKey)) {\n            newEntriesMap.set(entryKey, {\n              name,\n              bias,\n              limit,\n              words: new Set(),\n              keys: [tableName],\n            });\n          } else {\n            const entry = newEntriesMap.get(entryKey)!;\n            if (!entry.keys.includes(tableName)) {\n              entry.keys.push(tableName);\n            }\n          }\n\n          rows.forEach((row: any[]) => {\n            const cellVal = row[colIndex];\n            if (cellVal) {\n              const word = String(cellVal).trim();\n              if (word) {\n                newEntriesMap.get(entryKey)!.words.add(word);\n              }\n            }\n          });\n        });\n      }\n\n      // 3. \n      let existingEntries: any[] = [];\n      try {\n        existingEntries = await getWorldbook(WORLDBOOK_NAME);\n      } catch {\n        // \n      }\n\n      // 4. \n      const finalEntries: any[] = [];\n\n      for (const [key, data] of newEntriesMap) {\n        const fullEntryName = `${data.name}|${data.bias}|${data.limit}`;\n        const existingEntry = existingEntries.find(e => e.name === fullEntryName);\n\n        const existingWords = existingEntry\n          ? existingEntry.content\n              .split('\\n')\n              .map((w: string) => w.trim())\n              .filter((w: string) => w)\n          : [];\n\n        const mergedWords = new Set([...existingWords, ...data.words]);\n        const content = Array.from(mergedWords).join('\\n');\n\n        if (existingEntry) {\n          const existingKeys = existingEntry.strategy?.keys || [];\n          // @ts-ignore\n          const mergedKeys = Array.from(new Set([...existingKeys, ...data.keys]));\n\n          finalEntries.push({\n            ...existingEntry,\n            content,\n            strategy: {\n              ...existingEntry.strategy,\n              keys: mergedKeys,\n            },\n          });\n        } else {\n          finalEntries.push({\n            name: fullEntryName,\n            enabled: true,\n            strategy: {\n              type: 'constant',\n              keys: data.keys,\n              keys_secondary: { logic: 'not_all', keys: [] },\n              scan_depth: 'same_as_global',\n            },\n            position: {\n              type: 'before_character_definition',\n              role: 'system',\n              depth: 0,\n              order: 0,\n            },\n            content,\n            probability: 100,\n            recursion: { prevent_incoming: false, prevent_outgoing: false, delay_until: null },\n            effect: { sticky: null, cooldown: null, delay: null },\n          });\n        }\n      }\n\n      const newEntryNames = new Set(finalEntries.map(e => e.name));\n      const orphanEntries = existingEntries.filter(e => !newEntryNames.has(e.name));\n      finalEntries.push(...orphanEntries);\n\n      // 5. \n      if (typeof createOrReplaceWorldbook === 'function') {\n        // @ts-ignore\n        await createOrReplaceWorldbook(WORLDBOOK_NAME, finalEntries, { render: 'debounced' });\n        console.info('[Divination] Synced to worldbook successfully');\n\n        await loadFromWorldbook();\n      } else {\n        console.warn('[Divination] createOrReplaceWorldbook API unavailable');\n      }\n    } catch (e) {\n      console.error('[Divination] Sync failed:', e);\n    }\n  }\n\n  // ============================================================\n  // Divination Logic\n  // ============================================================\n\n  /**\n   * \n   */\n  function drawFromWorldbookWithConfig(\n    mode: 'perItem' | 'custom' | 'mixed',\n    wordsPerItem: number,\n    maxCount: number,\n    cats: DivinationCategory[],\n    categoryConfig: Record<string, { enabled: boolean; limit: number }>,\n    selectedLuck: DimensionTier | null,\n  ): string[] {\n    const result: string[] = [];\n\n    const enabledCats = cats.filter(c => {\n      const catConfig = categoryConfig[c.id];\n      const isEnabled = catConfig ? catConfig.enabled : c.enabled;\n      return isEnabled && c.words.length > 0;\n    });\n\n    if (enabledCats.length === 0) {\n      return result;\n    }\n\n    if (mode === 'perItem') {\n      for (const cat of enabledCats) {\n        const count = Math.min(wordsPerItem, cat.words.length);\n        const shuffled = shuffleArray([...cat.words]);\n        result.push(...shuffled.slice(0, count));\n      }\n      console.info(`[Divination] perItem  ${result.length} :`, result);\n    } else if (mode === 'custom') {\n      let remaining = maxCount;\n\n      for (const cat of enabledCats) {\n        if (remaining <= 0) break;\n\n        const catConfig = categoryConfig[cat.id];\n        const limit = catConfig?.limit ?? cat.limit ?? 0;\n        const maxFromThisCat = limit > 0 ? Math.min(limit, remaining) : Math.min(wordsPerItem, remaining);\n        const count = Math.min(maxFromThisCat, cat.words.length);\n\n        const shuffled = shuffleArray([...cat.words]);\n        result.push(...shuffled.slice(0, count));\n        remaining -= count;\n      }\n      console.info(`[Divination] custom  ${result.length} :`, result);\n    } else {\n      const catWeights = enabledCats.map(c => {\n        if (config.value.enableBias && selectedLuck) {\n          return getWeight(selectedLuck, c.bias);\n        }\n        return 1.0;\n      });\n\n      let remaining = maxCount;\n      while (remaining > 0) {\n        const selectedCat = weightedRandom(enabledCats, catWeights);\n        if (!selectedCat) break;\n\n        const word = selectedCat.words[Math.floor(Math.random() * selectedCat.words.length)];\n        result.push(word);\n        remaining--;\n      }\n      console.info(`[Divination] mixed  ${result.length} :`, result);\n    }\n\n    return result;\n  }\n\n  /**\n   * \n   */\n  function getWeight(luckTier: DimensionTier, bias: BiasType): number {\n    const luckId = luckTier.id;\n\n    if (luckId === 'superLucky' || luckId === 'lucky') {\n      if (bias === 'positive') return 3.0;\n      return 1.0;\n    }\n    if (luckId === 'slightlyLucky') {\n      if (bias === 'positive') return 2.0;\n      return 1.0;\n    }\n    if (luckId === 'neutral') {\n      return 1.0;\n    }\n    if (luckId === 'slightlyUnlucky') {\n      if (bias === 'negative' || bias === 'neutral') return 2.0;\n      return 1.0;\n    }\n    if (luckId === 'unlucky' || luckId === 'superUnlucky') {\n      if (bias === 'negative') return 3.0;\n      if (bias === 'neutral') return 2.0;\n      return 1.0;\n    }\n\n    return 1.0;\n  }\n\n  /**\n   * \n   */\n  function weightedRandom<T>(items: T[], weights: number[]): T | null {\n    if (items.length === 0 || items.length !== weights.length) return null;\n\n    const totalWeight = weights.reduce((sum, w) => sum + w, 0);\n    let random = Math.random() * totalWeight;\n\n    for (let i = 0; i < items.length; i++) {\n      random -= weights[i];\n      if (random <= 0) {\n        return items[i];\n      }\n    }\n    return items[items.length - 1];\n  }\n\n  /**\n   * \n   */\n  function performDivination(): DivinationResult | null {\n    const dimensionResults: { dimension: Dimension; tier: DimensionTier }[] = [];\n    let selectedLuck: DimensionTier | null = null;\n\n    for (const dim of config.value.dimensions) {\n      if (dim.enabled && dim.tiers.length > 0) {\n        const tierWeights = dim.tiers.map(t => t.weight);\n        const selectedTier = weightedRandom(dim.tiers, tierWeights);\n        if (selectedTier) {\n          dimensionResults.push({ dimension: dim, tier: selectedTier });\n\n          if (dim.id === 'luck') {\n            selectedLuck = selectedTier;\n          }\n        }\n      }\n    }\n\n    let drawnWords: string[] = [];\n\n    // 1. \n    if (config.value.enableTableWords) {\n      const tableWords = drawFromLatestRowWithConfig(\n        config.value.wordDrawMode,\n        config.value.wordsPerItem,\n        config.value.drawCount,\n        config.value.tablePoolConfig as Record<string, TableConfig>,\n      );\n      drawnWords.push(...tableWords);\n      console.info(`[Divination] : ${config.value.wordDrawMode}:`, tableWords);\n    }\n\n    // 2. \n    if (config.value.enableWordPool) {\n      const remainingCount =\n        config.value.wordDrawMode === 'perItem'\n          ? config.value.wordsPerItem\n          : Math.max(0, config.value.drawCount - drawnWords.length);\n\n      const poolWords = drawFromWorldbookWithConfig(\n        config.value.wordDrawMode,\n        config.value.wordsPerItem,\n        remainingCount,\n        categories.value,\n        config.value.categoryConfig,\n        selectedLuck,\n      );\n      drawnWords.push(...poolWords);\n      console.info(`[Divination] : ${config.value.wordDrawMode}:`, poolWords);\n    }\n\n    // 3. \n    if (config.value.enableTableWords && config.value.enableWordPool && drawnWords.length > 0) {\n      drawnWords = shuffleArray(drawnWords);\n      console.info('[Divination] :', drawnWords);\n    }\n\n    // \n    const luckResult = dimensionResults.find(r => r.dimension.id === 'luck');\n\n    // \n    const otherDimensions = dimensionResults\n      .filter(r => r.dimension.id !== 'luck')\n      .map(r => ({\n        name: r.dimension.name,\n        value: r.tier.name,\n        prompt: r.tier.prompt,\n      }));\n\n    return {\n      luck: luckResult\n        ? {\n            name: luckResult.tier.name,\n            color: luckResult.tier.color || '#808080',\n            prompt: luckResult.tier.prompt,\n          }\n        : {\n            name: '',\n            color: '#808080',\n            prompt: '',\n          },\n      dimensions: otherDimensions,\n      words: drawnWords,\n      timestamp: Date.now(),\n    };\n  }\n\n  /**\n   * \n   */\n  function migrateDimensionsToPreset(dimensions: Dimension[], targetPresetId: string) {\n    const currentPresets = [...presets.value];\n    const targetIndex = currentPresets.findIndex(p => p.id === targetPresetId);\n    if (targetIndex === -1) {\n      console.warn('[Divination] Target preset not found:', targetPresetId);\n      return;\n    }\n\n    const target = currentPresets[targetIndex];\n    const clonedDimensions = dimensions.map(d => JSON.parse(JSON.stringify(d)));\n\n    clonedDimensions.forEach(newDim => {\n      const existingIndex = target.dimensions.findIndex(d => d.id === newDim.id);\n      if (existingIndex > -1) {\n        target.dimensions[existingIndex] = newDim;\n      } else {\n        target.dimensions.push(newDim);\n      }\n    });\n\n    currentPresets[targetIndex] = { ...target };\n    configManager.config.divination.presets = currentPresets;\n    configManager.saveConfig();\n  }\n\n  return {\n    config,\n    categories,\n    isLoaded,\n    loadConfig,\n    saveConfig,\n    loadFromWorldbook,\n    syncFromACU,\n    performDivination,\n    addDimension,\n    updateDimension,\n    removeDimension,\n    uploadCardBack,\n    updateCategory,\n    // Preset\n    presets,\n    activePresetId,\n    createPreset,\n    saveCurrentToPreset,\n    deletePreset,\n    applyPreset,\n    restoreDefaultDimensions,\n    migrateDimensionsToPreset,\n  };\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Store\n * \n *  ConfigManager \n *\n *  ref + watch  computed getter/setter\n * \n */\n\nimport { klona } from 'klona';\nimport { defineStore } from 'pinia';\nimport { computed, ref, watch } from 'vue';\nimport { getACUConfigManager } from '../composables/useACUConfigManager';\n\n/**  */\nexport interface LegendItem {\n  /**  ID */\n  id: string;\n  /** \"\"\"\" */\n  label: string;\n  /**  */\n  color: string;\n  /**  Emoji  */\n  emoji?: string;\n  /**  */\n  keywords: string[];\n}\n\n/**  */\nexport interface LegendConfig {\n  /**  */\n  enabled: boolean;\n  /**  */\n  position: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\n  /**  */\n  items: LegendItem[];\n}\n\n/**  */\nexport interface NodeStyleOverride {\n  /**  */\n  size?: number;\n  /**  */\n  borderColor?: string;\n  /**  */\n  borderWidth?: number;\n  /**  */\n  backgroundColor?: string;\n  /**  */\n  shape?: 'ellipse' | 'rectangle' | 'round-rectangle' | 'diamond' | 'hexagon';\n}\n\n/**  */\nexport interface FactionColorConfig {\n  /**  */\n  border: string;\n  /**  */\n  background: string;\n  /**  (0-100) */\n  opacity?: number;\n  /**  */\n  labelPosition?: 'top' | 'bottom' | 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right' | 'none';\n  /**  */\n  labelFontSize?: number;\n}\n\n/**  */\nexport interface FactionAvatarConfig {\n  /**  URL */\n  url: string;\n  /**  (0-100) */\n  offsetX?: number;\n  /**  (0-100) */\n  offsetY?: number;\n  /**  (100 = ) */\n  scale?: number;\n  /**  */\n  displayLabel?: string;\n  /**  */\n  labelIndices?: number[];\n  /**  */\n  aliases?: string[];\n}\n\n/**  */\nexport interface GraphConfig {\n  /**  */\n  nodeSize: number;\n  /**  */\n  edgeWidth: number;\n  /**  */\n  relationLabelFontSize: number;\n  /**  */\n  nameLabelFontSize: number;\n  /**  */\n  factionLabelFontSize: number;\n  /**  */\n  showLegend: boolean;\n  /**  () */\n  showBackground: boolean;\n  /**  ->  */\n  factionColors: Record<string, FactionColorConfig>;\n  /**  ->  */\n  factionAvatars: Record<string, FactionAvatarConfig>;\n  /** ID ->  */\n  nodeOverrides: Record<string, NodeStyleOverride>;\n  /**  */\n  legendConfig: LegendConfig;\n}\n\n/**  */\nexport const FACTION_COLOR_PALETTE: Array<{ border: string; background: string; opacity: number }> = [\n  { border: '#E91E63', background: 'rgba(233, 30, 99, 0.1)', opacity: 10 }, // \n  { border: '#2196F3', background: 'rgba(33, 150, 243, 0.1)', opacity: 10 }, // \n  { border: '#4CAF50', background: 'rgba(76, 175, 80, 0.1)', opacity: 10 }, // \n  { border: '#FF9800', background: 'rgba(255, 152, 0, 0.1)', opacity: 10 }, // \n  { border: '#9C27B0', background: 'rgba(156, 39, 176, 0.1)', opacity: 10 }, // \n  { border: '#00BCD4', background: 'rgba(0, 188, 212, 0.1)', opacity: 10 }, // \n  { border: '#795548', background: 'rgba(121, 85, 72, 0.1)', opacity: 10 }, // \n  { border: '#607D8B', background: 'rgba(96, 125, 139, 0.1)', opacity: 10 }, // \n];\n\n/**  */\nexport const DEFAULT_FACTION_STYLE: FactionColorConfig = {\n  border: '#666666',\n  background: 'rgba(128, 128, 128, 0.1)',\n  opacity: 10,\n};\n\n/**  */\nexport const DEFAULT_NODE_STYLE: NodeStyleOverride = {\n  size: 60,\n  borderColor: '#333333',\n  borderWidth: 2,\n  backgroundColor: '#dcd0c0',\n  shape: 'ellipse',\n};\n\n/**  relationshipColors.ts  */\nexport const DEFAULT_LEGEND_CONFIG: LegendConfig = {\n  enabled: false,\n  position: 'top-right',\n  items: [\n    {\n      id: 'legend-love',\n      label: '/',\n      color: '#E91E63',\n      emoji: '',\n      keywords: ['', '', '', '', ''],\n    },\n    {\n      id: 'legend-family',\n      label: '',\n      color: '#2196F3',\n      emoji: '',\n      keywords: ['', '', '', '', '', '', ''],\n    },\n    {\n      id: 'legend-friend',\n      label: '/',\n      color: '#4CAF50',\n      emoji: '',\n      keywords: ['', '', '', '', ''],\n    },\n    { id: 'legend-neutral', label: '/', color: '#9E9E9E', emoji: '', keywords: ['', '', ''] },\n    {\n      id: 'legend-interest',\n      label: '',\n      color: '#FF9800',\n      emoji: '',\n      keywords: ['', '', '', ''],\n    },\n    { id: 'legend-enemy', label: '/', color: '#F44336', emoji: '', keywords: ['', '', '', ''] },\n    { id: 'legend-complex', label: '/', color: '#9C27B0', emoji: '', keywords: [] },\n  ],\n};\n\n/**  */\nexport const DEFAULT_GRAPH_CONFIG: GraphConfig = {\n  nodeSize: 50,\n  edgeWidth: 2.5,\n  relationLabelFontSize: 10,\n  nameLabelFontSize: 12,\n  factionLabelFontSize: 14,\n  showLegend: true,\n  showBackground: true,\n  factionColors: {},\n  factionAvatars: {},\n  nodeOverrides: {},\n  legendConfig: { ...DEFAULT_LEGEND_CONFIG },\n};\n\nexport const useGraphConfigStore = defineStore('graphConfig', () => {\n  // ============================================================\n  //  ConfigManager \n  // ============================================================\n  const configManager = getACUConfigManager();\n\n  /**  ID -  computed  */\n  const currentChatId = computed(() => SillyTavern.getCurrentChatId() || '');\n\n  // ============================================================\n  //  ref + watch \n  // ============================================================\n\n  /**  -  ref  */\n  const config = ref<GraphConfig>({ ...DEFAULT_GRAPH_CONFIG });\n\n  /**  ConfigManager  */\n  function loadConfigFromManager() {\n    const chatId = currentChatId.value;\n    if (!chatId) {\n      config.value = { ...DEFAULT_GRAPH_CONFIG };\n      return;\n    }\n    const chatConfig = configManager.getChatConfig(chatId);\n    config.value = chatConfig.graphConfig ? klona(chatConfig.graphConfig) : { ...DEFAULT_GRAPH_CONFIG };\n    console.info('[GraphConfigStore] :', chatId);\n  }\n\n  //  ID immediate: true \n  watch(\n    currentChatId,\n    () => {\n      loadConfigFromManager();\n    },\n    { immediate: true },\n  );\n\n  // \n  let isGraphConfigInitializing = true;\n  watch(\n    config,\n    newValue => {\n      if (isGraphConfigInitializing) return;\n      if (!currentChatId.value) return;\n      const chatConfig = configManager.getChatConfig(currentChatId.value);\n      configManager.setChatConfig(currentChatId.value, {\n        ...chatConfig,\n        graphConfig: klona(newValue),\n      });\n    },\n    { deep: true },\n  );\n\n  // \n  setTimeout(() => {\n    isGraphConfigInitializing = false;\n  }, 100);\n\n  /**\n   *  ID\n   * @deprecated  ID\n   */\n  function initChatId(_chatId: string): void {\n    //  currentChatId  computed \n    // \n    console.info('[GraphConfigStore] initChatId  ID ');\n  }\n\n  /**\n   * \n   *  ConfigManager  watch \n   */\n  function saveConfig(): void {\n    if (!currentChatId.value) {\n      console.warn('[GraphConfigStore]  ID');\n      return;\n    }\n    const chatConfig = configManager.getChatConfig(currentChatId.value);\n    configManager.setChatConfig(currentChatId.value, {\n      ...chatConfig,\n      graphConfig: klona(config.value),\n    });\n  }\n\n  /**\n   * \n   */\n  function resetToDefault(): void {\n    config.value = { ...DEFAULT_GRAPH_CONFIG, factionColors: {} };\n  }\n\n  /**\n   * \n   *  ConfigManager \n   */\n  function refresh(): void {\n    loadConfigFromManager();\n  }\n\n  /**\n   * \n   * @param factionName \n   * @param colorConfig \n   */\n  function setFactionColor(factionName: string, colorConfig: FactionColorConfig): void {\n    config.value.factionColors = {\n      ...config.value.factionColors,\n      [factionName]: colorConfig,\n    };\n  }\n\n  /**\n   * \n   * @param factionName \n   * @param existingFactions \n   * @param useDefault  true\n   */\n  function getFactionColor(\n    factionName: string,\n    existingFactions: string[] = [],\n    useDefault = false,\n  ): FactionColorConfig {\n    // \n    if (config.value.factionColors[factionName]) {\n      return config.value.factionColors[factionName];\n    }\n    // \n    if (useDefault) {\n      return DEFAULT_FACTION_STYLE;\n    }\n    // \n    const usedColors = Object.keys(config.value.factionColors).length;\n    const colorIndex = (usedColors + existingFactions.indexOf(factionName)) % FACTION_COLOR_PALETTE.length;\n    return FACTION_COLOR_PALETTE[Math.max(0, colorIndex)];\n  }\n\n  /**\n   * \n   * @param factionName \n   */\n  function hasFactionColor(factionName: string): boolean {\n    return !!config.value.factionColors[factionName];\n  }\n\n  /**\n   * \n   * @param factionNames \n   */\n  function initFactionColors(factionNames: string[]): void {\n    const newColors = { ...config.value.factionColors };\n    let colorIndex = Object.keys(newColors).length;\n\n    for (const name of factionNames) {\n      if (!newColors[name]) {\n        newColors[name] = FACTION_COLOR_PALETTE[colorIndex % FACTION_COLOR_PALETTE.length];\n        colorIndex++;\n      }\n    }\n\n    config.value.factionColors = newColors;\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param factionName \n   * @param avatarConfig \n   */\n  function setFactionAvatar(factionName: string, avatarConfig: FactionAvatarConfig): void {\n    if (!config.value.factionAvatars) {\n      config.value.factionAvatars = {};\n    }\n    config.value.factionAvatars = {\n      ...config.value.factionAvatars,\n      [factionName]: avatarConfig,\n    };\n  }\n\n  /**\n   * \n   * @param factionName \n   * @returns  undefined\n   */\n  function getFactionAvatar(factionName: string): FactionAvatarConfig | undefined {\n    return config.value.factionAvatars?.[factionName];\n  }\n\n  /**\n   * \n   * @param factionName \n   */\n  function removeFactionAvatar(factionName: string): void {\n    if (config.value.factionAvatars?.[factionName]) {\n      const newAvatars = { ...config.value.factionAvatars };\n      delete newAvatars[factionName];\n      config.value.factionAvatars = newAvatars;\n    }\n  }\n\n  /**\n   * \n   * @param factionName \n   */\n  function hasFactionAvatar(factionName: string): boolean {\n    return !!config.value.factionAvatars?.[factionName];\n  }\n\n  /**\n   * \n   * @returns \n   */\n  function getAllFactionAvatars(): Record<string, FactionAvatarConfig> {\n    return config.value.factionAvatars || {};\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param factionId IDID\n   * @param override \n   */\n  function setFactionOverride(factionId: string, override: Partial<FactionColorConfig>): void {\n    // ID\n    const factionName = factionId.replace('faction-container-', '');\n    const existing = config.value.factionColors[factionName] || { ...DEFAULT_FACTION_STYLE };\n    config.value.factionColors = {\n      ...config.value.factionColors,\n      [factionName]: {\n        ...existing,\n        ...override,\n      },\n    };\n  }\n\n  /**\n   * \n   * @param factionId IDID\n   * @returns  undefined\n   */\n  function getFactionOverride(factionId: string): FactionColorConfig | undefined {\n    const factionName = factionId.replace('faction-container-', '');\n    return config.value.factionColors[factionName];\n  }\n\n  /**\n   * \n   * @param factionId IDID\n   */\n  function removeFactionOverride(factionId: string): void {\n    const factionName = factionId.replace('faction-container-', '');\n    if (config.value.factionColors[factionName]) {\n      const newColors = { ...config.value.factionColors };\n      delete newColors[factionName];\n      config.value.factionColors = newColors;\n    }\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param nodeId ID\n   * @param override \n   */\n  function setNodeStyleOverride(nodeId: string, override: Partial<NodeStyleOverride>): void {\n    if (!config.value.nodeOverrides) {\n      config.value.nodeOverrides = {};\n    }\n    const existing = config.value.nodeOverrides[nodeId] || {};\n    config.value.nodeOverrides = {\n      ...config.value.nodeOverrides,\n      [nodeId]: {\n        ...existing,\n        ...override,\n      },\n    };\n  }\n\n  /**\n   * \n   * @param nodeId ID\n   * @returns  undefined\n   */\n  function getNodeStyleOverride(nodeId: string): NodeStyleOverride | undefined {\n    return config.value.nodeOverrides?.[nodeId];\n  }\n\n  /**\n   * \n   * @param nodeId ID\n   */\n  function removeNodeStyleOverride(nodeId: string): void {\n    if (config.value.nodeOverrides?.[nodeId]) {\n      const newOverrides = { ...config.value.nodeOverrides };\n      delete newOverrides[nodeId];\n      config.value.nodeOverrides = newOverrides;\n    }\n  }\n\n  /**\n   * \n   * @param nodeId ID\n   */\n  function hasNodeStyleOverride(nodeId: string): boolean {\n    return !!config.value.nodeOverrides?.[nodeId];\n  }\n\n  // watch  config \n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function setLegendEnabled(enabled: boolean): void {\n    if (!config.value.legendConfig) {\n      config.value.legendConfig = { ...DEFAULT_LEGEND_CONFIG };\n    }\n    config.value.legendConfig.enabled = enabled;\n  }\n\n  /**\n   * \n   */\n  function setLegendPosition(position: LegendConfig['position']): void {\n    if (!config.value.legendConfig) {\n      config.value.legendConfig = { ...DEFAULT_LEGEND_CONFIG };\n    }\n    config.value.legendConfig.position = position;\n  }\n\n  /**\n   * \n   */\n  function addLegendItem(item: Omit<LegendItem, 'id'>): void {\n    if (!config.value.legendConfig) {\n      config.value.legendConfig = { ...DEFAULT_LEGEND_CONFIG };\n    }\n    const newItem: LegendItem = {\n      ...item,\n      id: `legend-${Date.now()}`,\n    };\n    config.value.legendConfig.items = [...config.value.legendConfig.items, newItem];\n  }\n\n  /**\n   * \n   */\n  function updateLegendItem(id: string, updates: Partial<LegendItem>): void {\n    if (!config.value.legendConfig?.items) return;\n    config.value.legendConfig.items = config.value.legendConfig.items.map(item =>\n      item.id === id ? { ...item, ...updates } : item,\n    );\n  }\n\n  /**\n   * \n   */\n  function removeLegendItem(id: string): void {\n    if (!config.value.legendConfig?.items) return;\n    config.value.legendConfig.items = config.value.legendConfig.items.filter(item => item.id !== id);\n  }\n\n  /**\n   * \n   */\n  function getLegendConfig(): LegendConfig {\n    return config.value.legendConfig || DEFAULT_LEGEND_CONFIG;\n  }\n\n  /**\n   * \n   */\n  function resetLegendConfig(): void {\n    config.value.legendConfig = { ...DEFAULT_LEGEND_CONFIG };\n  }\n\n  /**\n   * \n   */\n  function setShowBackground(show: boolean): void {\n    config.value.showBackground = show;\n    saveConfig();\n  }\n\n  /**\n   * \n   * @param relationWord \n   * @returns  null\n   */\n  function matchLegendColor(relationWord: string): string | null {\n    const legendConfig = config.value.legendConfig;\n    if (!legendConfig?.enabled || !legendConfig.items?.length) {\n      return null;\n    }\n\n    for (const item of legendConfig.items) {\n      if (item.keywords.some(kw => relationWord.includes(kw))) {\n        return item.color;\n      }\n    }\n\n    return null;\n  }\n\n  return {\n    config,\n    currentChatId,\n    initChatId,\n    saveConfig,\n    resetToDefault,\n    refresh,\n    setFactionColor,\n    getFactionColor,\n    hasFactionColor,\n    initFactionColors,\n    // \n    setFactionAvatar,\n    getFactionAvatar,\n    removeFactionAvatar,\n    hasFactionAvatar,\n    getAllFactionAvatars,\n    // \n    setFactionOverride,\n    getFactionOverride,\n    removeFactionOverride,\n    // \n    setNodeStyleOverride,\n    getNodeStyleOverride,\n    removeNodeStyleOverride,\n    hasNodeStyleOverride,\n    // \n    setLegendEnabled,\n    setLegendPosition,\n    addLegendItem,\n    updateLegendItem,\n    removeLegendItem,\n    getLegendConfig,\n    resetLegendConfig,\n    matchLegendColor,\n    setShowBackground,\n  };\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Store\n * \n *  ConfigManager \n *\n *  ref + watch  computed getter/setter\n * \n */\n\nimport { klona } from 'klona';\nimport { defineStore } from 'pinia';\nimport { computed, ref, watch } from 'vue';\nimport { getACUConfigManager } from '../composables/useACUConfigManager';\nimport type {\n  GlobalTagLibrary,\n  ImportOptions,\n  ImportResult,\n  InteractiveTag,\n  TagCategory,\n  TagLibraryExport,\n  TagManagerMode,\n} from '../types';\n\n/**  */\nconst DEFAULT_LIBRARY: GlobalTagLibrary = {\n  categories: [\n    { id: 'cat_general', path: '', icon: 'fas fa-cog', createdAt: '2024-01-01T00:00:00.000Z' },\n    { id: 'cat_location', path: '', icon: 'fas fa-map-marker-alt', createdAt: '2024-01-01T00:00:00.000Z' },\n    { id: 'cat_character', path: '', icon: 'fas fa-user', createdAt: '2024-01-01T00:00:00.000Z' },\n    { id: 'cat_char_social', path: '/', createdAt: '2024-01-01T00:00:00.000Z' },\n    { id: 'cat_char_observe', path: '/', createdAt: '2024-01-01T00:00:00.000Z' },\n    { id: 'cat_char_conflict', path: '/', createdAt: '2024-01-01T00:00:00.000Z' },\n    { id: 'cat_item', path: '', icon: 'fas fa-box-open', createdAt: '2024-01-01T00:00:00.000Z' },\n    { id: 'cat_quest', path: '', icon: 'fas fa-scroll', createdAt: '2024-01-01T00:00:00.000Z' },\n    { id: 'cat_action', path: '', icon: 'fas fa-running', createdAt: '2024-01-01T00:00:00.000Z' },\n  ],\n  tags: [\n    // \n    {\n      id: 'tag_gen_prevent',\n      label: '',\n      categoryId: 'cat_general',\n      promptTemplate: '',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_gen_speak',\n      label: '',\n      categoryId: 'cat_general',\n      promptTemplate: '{{user}}2',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_gen_detail',\n      label: '',\n      categoryId: 'cat_general',\n      promptTemplate: '',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_gen_pov',\n      label: '',\n      categoryId: 'cat_general',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n\n    // \n    {\n      id: 'tag_loc_go',\n      label: '',\n      categoryId: 'cat_location',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_loc_wander',\n      label: '',\n      categoryId: 'cat_location',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_loc_search',\n      label: '',\n      categoryId: 'cat_location',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_loc_sneak',\n      label: '',\n      categoryId: 'cat_location',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n\n    // /\n    {\n      id: 'tag_char_talk',\n      label: '',\n      categoryId: 'cat_char_social',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_char_ask',\n      label: '',\n      categoryId: 'cat_char_social',\n      promptTemplate: '{{rowTitle}}...',\n      allowPreEdit: true,\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_char_req',\n      label: '',\n      categoryId: 'cat_char_social',\n      promptTemplate: '{{rowTitle}}...',\n      allowPreEdit: true,\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_char_invite',\n      label: '',\n      categoryId: 'cat_char_social',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_char_thx',\n      label: '',\n      categoryId: 'cat_char_social',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_char_sry',\n      label: '',\n      categoryId: 'cat_char_social',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n\n    // /\n    {\n      id: 'tag_char_gaze',\n      label: '',\n      categoryId: 'cat_char_observe',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_char_track',\n      label: '',\n      categoryId: 'cat_char_observe',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_char_listen',\n      label: '',\n      categoryId: 'cat_char_observe',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n\n    // /\n    {\n      id: 'tag_char_ques',\n      label: '',\n      categoryId: 'cat_char_conflict',\n      promptTemplate: '{{rowTitle}}',\n      allowPreEdit: true,\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_char_threat',\n      label: '',\n      categoryId: 'cat_char_conflict',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_char_atk',\n      label: '',\n      categoryId: 'cat_char_conflict',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_char_flee',\n      label: '',\n      categoryId: 'cat_char_conflict',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n\n    // \n    {\n      id: 'tag_item_use',\n      label: '',\n      categoryId: 'cat_item',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_item_check',\n      label: '',\n      categoryId: 'cat_item',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_item_gift',\n      label: '',\n      categoryId: 'cat_item',\n      promptTemplate: '{{rowTitle}}',\n      allowPreEdit: true,\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_item_show',\n      label: '',\n      categoryId: 'cat_item',\n      promptTemplate: ' {{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n\n    // \n    {\n      id: 'tag_quest_advance',\n      label: '',\n      categoryId: 'cat_quest',\n      promptTemplate: '{{rowTitle}}/',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_quest_clue',\n      label: '',\n      categoryId: 'cat_quest',\n      promptTemplate: '{{rowTitle}}',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_quest_help',\n      label: '',\n      categoryId: 'cat_quest',\n      promptTemplate: '{{rowTitle}} ',\n      allowPreEdit: true,\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n\n    // \n    {\n      id: 'tag_act_hide',\n      label: '',\n      categoryId: 'cat_action',\n      promptTemplate: '<user>',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_act_rest',\n      label: '',\n      categoryId: 'cat_action',\n      promptTemplate: '<user>',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_act_silent',\n      label: '',\n      categoryId: 'cat_action',\n      promptTemplate: '<user>',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n    {\n      id: 'tag_act_daze',\n      label: '',\n      categoryId: 'cat_action',\n      promptTemplate: '<user>',\n      createdAt: '2024-01-01T00:00:00.000Z',\n    },\n  ],\n};\n\n/**\n *  ID\n */\nfunction generateId(prefix: string): string {\n  return `${prefix}_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nexport const useTagLibraryStore = defineStore('acu-tag-library', () => {\n  // ============================================================\n  //  ConfigManager \n  // ============================================================\n  const configManager = getACUConfigManager();\n\n  // ============================================================\n  //  ref + watch \n  // ============================================================\n\n  /**  */\n  function getInitialLibrary(): GlobalTagLibrary {\n    const stored = configManager.config.tagLibrary;\n    if (!stored || (!stored.categories?.length && !stored.tags?.length)) {\n      return klona(DEFAULT_LIBRARY);\n    }\n    return klona(stored) as GlobalTagLibrary;\n  }\n\n  /**  -  ref  */\n  const library = ref<GlobalTagLibrary>(getInitialLibrary());\n\n  /**  ID'''uncategorized' */\n  const activeCategoryId = ref<string>('');\n\n  /**  */\n  const searchKeyword = ref<string>('');\n\n  /**  (ConfigManager ) */\n  const isLoaded = computed(() => configManager.isLoaded.value);\n\n  // \n  let isTagLibraryInitializing = true;\n  watch(\n    library,\n    newValue => {\n      if (isTagLibraryInitializing) return;\n      configManager.config.tagLibrary = klona(newValue);\n      configManager.saveConfig();\n    },\n    { deep: true },\n  );\n\n  // \n  setTimeout(() => {\n    isTagLibraryInitializing = false;\n  }, 100);\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**  */\n  const currentMode = ref<TagManagerMode>('normal');\n\n  /** / ID  */\n  const selectedTagIds = ref<Set<string>>(new Set());\n\n  /**  ID  */\n  const selectedCategoryIds = ref<Set<string>>(new Set());\n\n  /**  */\n  const selectionType = ref<'tag' | 'category' | null>(null);\n\n  // ============================================================\n  //  -  ConfigManager\n  // ============================================================\n\n  /**\n   *  - ConfigManager \n   */\n  async function loadLibrary(): Promise<void> {\n    const stored = configManager.config.tagLibrary;\n    if (!stored || (!stored.categories?.length && !stored.tags?.length)) {\n      // \n      configManager.config.tagLibrary = klona(DEFAULT_LIBRARY);\n      configManager.saveConfig();\n      console.info('[ACU TagLibrary] ');\n    } else {\n      console.info('[ACU TagLibrary] :', {\n        categories: stored.categories?.length || 0,\n        tags: stored.tags?.length || 0,\n      });\n    }\n  }\n\n  /**\n   *  -  ConfigManager\n   */\n  async function saveLibrary(): Promise<void> {\n    configManager.saveConfig();\n    console.info('[ACU TagLibrary] ');\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param path  \"/\"\n   * @param icon \n   *\n   * \n   */\n  function addCategory(path: string, icon?: string): TagCategory {\n    // \n    const parts = path.split('/');\n    for (let i = 1; i < parts.length; i++) {\n      const parentPath = parts.slice(0, i).join('/');\n      const existingParent = library.value.categories.find(c => c.path === parentPath);\n      if (!existingParent) {\n        // \n        const parentCategory: TagCategory = {\n          id: generateId('cat'),\n          path: parentPath,\n          createdAt: new Date().toISOString(),\n        };\n        library.value.categories.push(parentCategory);\n        console.info('[ACU TagLibrary] :', parentPath);\n      }\n    }\n\n    // \n    const existing = library.value.categories.find(c => c.path === path);\n    if (existing) {\n      // \n      if (icon !== undefined && icon !== existing.icon) {\n        existing.icon = icon;\n        console.info('[ACU TagLibrary] :', path);\n      }\n      return existing;\n    }\n\n    // \n    const newCategory: TagCategory = {\n      id: generateId('cat'),\n      path,\n      icon,\n      createdAt: new Date().toISOString(),\n    };\n\n    library.value.categories.push(newCategory);\n    console.info('[ACU TagLibrary] :', path);\n    saveLibrary();\n    return newCategory;\n  }\n\n  /**\n   * \n   * @param categoryId  ID\n   */\n  function deleteCategory(categoryId: string): void {\n    const category = library.value.categories.find(c => c.id === categoryId);\n    if (!category) {\n      console.warn('[ACU TagLibrary] :', categoryId);\n      return;\n    }\n\n    //  ID\n    const categoryIdsToDelete = new Set<string>();\n    library.value.categories.forEach(cat => {\n      if (cat.path === category.path || cat.path.startsWith(category.path + '/')) {\n        categoryIdsToDelete.add(cat.id);\n      }\n    });\n\n    // \n    library.value.tags = library.value.tags.filter(tag => !categoryIdsToDelete.has(tag.categoryId));\n\n    // \n    library.value.categories = library.value.categories.filter(c => !categoryIdsToDelete.has(c.id));\n\n    console.info(\n      '[ACU TagLibrary] :',\n      category.path,\n      '(:',\n      categoryIdsToDelete.size - 1,\n      ')',\n    );\n    saveLibrary();\n  }\n\n  /**\n   * \n   * @param categoryId  ID\n   * @param updates \n   */\n  function updateCategory(categoryId: string, updates: Partial<Pick<TagCategory, 'path' | 'icon'>>): void {\n    const category = library.value.categories.find(c => c.id === categoryId);\n    if (category) {\n      if (updates.path !== undefined) category.path = updates.path;\n      if (updates.icon !== undefined) category.icon = updates.icon;\n      saveLibrary();\n    }\n  }\n\n  /**\n   *  ID \n   * @param categoryId  ID\n   */\n  function getCategoryById(categoryId: string): TagCategory | undefined {\n    return library.value.categories.find(c => c.id === categoryId);\n  }\n\n  /**\n   * \n   * @param path \n   */\n  function getCategoryByPath(path: string): TagCategory | undefined {\n    return library.value.categories.find(c => c.path === path);\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  const filteredTags = computed<InteractiveTag[]>(() => {\n    let result = [...library.value.tags];\n\n    // \n    if (searchKeyword.value.trim()) {\n      const keyword = searchKeyword.value.toLowerCase();\n      result = result.filter(\n        tag => tag.label.toLowerCase().includes(keyword) || tag.promptTemplate.toLowerCase().includes(keyword),\n      );\n    }\n\n    // \n    if (activeCategoryId.value === 'uncategorized') {\n      // categoryId \n      result = result.filter(tag => {\n        if (!tag.categoryId) return true;\n        return !library.value.categories.find(c => c.id === tag.categoryId);\n      });\n    } else if (activeCategoryId.value) {\n      // \n      const currentCategory = getCategoryById(activeCategoryId.value);\n\n      if (currentCategory) {\n        const validCategoryIds = new Set<string>([currentCategory.id]);\n        const pathPrefix = currentCategory.path + '/';\n\n        // \n        library.value.categories.forEach(cat => {\n          if (cat.path.startsWith(pathPrefix)) {\n            validCategoryIds.add(cat.id);\n          }\n        });\n\n        result = result.filter(tag => validCategoryIds.has(tag.categoryId));\n      } else {\n        // \n        result = [];\n      }\n    }\n\n    // \n    result.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n\n    return result;\n  });\n\n  /**\n   * \n   * @param tag \n   */\n  function upsertTag(tag: InteractiveTag): void {\n    const index = library.value.tags.findIndex(t => t.id === tag.id);\n    if (index >= 0) {\n      // \n      library.value.tags[index] = { ...tag };\n    } else {\n      // \n      library.value.tags.push({\n        ...tag,\n        createdAt: tag.createdAt || new Date().toISOString(),\n      });\n    }\n    saveLibrary();\n  }\n\n  /**\n   * \n   * @param label \n   * @param categoryId  ID\n   * @param promptTemplate \n   */\n  function createTag(label: string, categoryId: string = '', promptTemplate: string = ''): InteractiveTag {\n    const newTag: InteractiveTag = {\n      id: generateId('tag'),\n      label,\n      categoryId,\n      promptTemplate,\n      createdAt: new Date().toISOString(),\n    };\n\n    library.value.tags.push(newTag);\n    saveLibrary();\n    return newTag;\n  }\n\n  /**\n   * \n   * @param tagId  ID\n   */\n  function deleteTag(tagId: string): void {\n    library.value.tags = library.value.tags.filter(t => t.id !== tagId);\n    saveLibrary();\n  }\n\n  /**\n   * \n   * @param tagIds  ID \n   */\n  function deleteTags(tagIds: string[]): void {\n    const idsSet = new Set(tagIds);\n    library.value.tags = library.value.tags.filter(t => !idsSet.has(t.id));\n    saveLibrary();\n  }\n\n  /**\n   *  ID \n   * @param tagId  ID\n   */\n  function getTagById(tagId: string): InteractiveTag | undefined {\n    return library.value.tags.find(t => t.id === tagId);\n  }\n\n  /**\n   *  ID \n   * @param categoryId  ID\n   */\n  function getTagsByCategory(categoryId: string): InteractiveTag[] {\n    return library.value.tags.filter(t => t.categoryId === categoryId);\n  }\n\n  /**\n   * \n   * @param tagId  ID\n   * @param categoryId  ID\n   */\n  function moveTagToCategory(tagId: string, categoryId: string): void {\n    const tag = library.value.tags.find(t => t.id === tagId);\n    if (tag) {\n      tag.categoryId = categoryId;\n      saveLibrary();\n    }\n  }\n\n  /**\n   * \n   * @param tagIds  ID \n   * @param categoryId  ID\n   */\n  function moveTagsToCategory(tagIds: string[], categoryId: string): void {\n    const idsSet = new Set(tagIds);\n    library.value.tags.forEach(tag => {\n      if (idsSet.has(tag.id)) {\n        tag.categoryId = categoryId;\n      }\n    });\n    saveLibrary();\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param mode \n   */\n  function setMode(mode: TagManagerMode): void {\n    // \n    if (mode !== 'migrate' && mode !== 'export') {\n      clearSelection();\n    }\n    currentMode.value = mode;\n  }\n\n  /**\n   * /\n   * @param tagId  ID\n   */\n  function toggleTagSelection(tagId: string): void {\n    // \n    if (selectionType.value === 'category') {\n      selectedCategoryIds.value.clear();\n    }\n    selectionType.value = 'tag';\n\n    if (selectedTagIds.value.has(tagId)) {\n      selectedTagIds.value.delete(tagId);\n    } else {\n      selectedTagIds.value.add(tagId);\n    }\n    // \n    selectedTagIds.value = new Set(selectedTagIds.value);\n  }\n\n  /**\n   * \n   * @param categoryId  ID\n   */\n  function toggleCategorySelection(categoryId: string): void {\n    // \n    if (selectionType.value === 'tag') {\n      selectedTagIds.value.clear();\n    }\n    selectionType.value = 'category';\n\n    if (selectedCategoryIds.value.has(categoryId)) {\n      selectedCategoryIds.value.delete(categoryId);\n    } else {\n      selectedCategoryIds.value.add(categoryId);\n    }\n    // \n    selectedCategoryIds.value = new Set(selectedCategoryIds.value);\n  }\n\n  /**\n   * \n   */\n  function clearSelection(): void {\n    selectedTagIds.value = new Set();\n    selectedCategoryIds.value = new Set();\n    selectionType.value = null;\n  }\n\n  /**\n   * \n   * @param targetCategoryId  ID\n   */\n  function migrateSelectedTags(targetCategoryId: string): void {\n    if (selectionType.value === 'tag' && selectedTagIds.value.size > 0) {\n      moveTagsToCategory(Array.from(selectedTagIds.value), targetCategoryId);\n      clearSelection();\n    }\n  }\n\n  /**\n   * \n   * @param targetParentPath \n   */\n  function migrateSelectedCategories(targetParentPath: string): void {\n    if (selectionType.value === 'category' && selectedCategoryIds.value.size > 0) {\n      selectedCategoryIds.value.forEach(categoryId => {\n        const category = getCategoryById(categoryId);\n        if (category) {\n          const parts = category.path.split('/');\n          const categoryName = parts[parts.length - 1];\n          const newPath = targetParentPath ? `${targetParentPath}/${categoryName}` : categoryName;\n          updateCategory(categoryId, { path: newPath });\n        }\n      });\n      clearSelection();\n    }\n  }\n\n  /**\n   * \n   * @param targetCategoryId  ID\n   */\n  function migrateSelectedItems(targetCategoryId: string): void {\n    const targetCategory = targetCategoryId ? getCategoryById(targetCategoryId) : null;\n    const targetPath = targetCategory?.path || '';\n\n    if (selectionType.value === 'tag' && selectedTagIds.value.size > 0) {\n      // \n      moveTagsToCategory(Array.from(selectedTagIds.value), targetCategoryId);\n      clearSelection();\n    } else if (selectionType.value === 'category' && selectedCategoryIds.value.size > 0) {\n      // \n      selectedCategoryIds.value.forEach(categoryId => {\n        const category = getCategoryById(categoryId);\n        if (category && categoryId !== targetCategoryId) {\n          const oldPath = category.path;\n          const parts = oldPath.split('/');\n          const categoryName = parts[parts.length - 1];\n          const newPath = targetPath ? `${targetPath}/${categoryName}` : categoryName;\n\n          // \n          updateCategory(categoryId, { path: newPath });\n\n          // \n          library.value.categories.forEach(childCat => {\n            if (childCat.path.startsWith(oldPath + '/')) {\n              // oldPath -> newPath\n              const childNewPath = newPath + childCat.path.slice(oldPath.length);\n              updateCategory(childCat.id, { path: childNewPath });\n            }\n          });\n        }\n      });\n      clearSelection();\n    }\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param scope \n   * @param categoryId  IDscope='category' \n   */\n  function exportLibrary(scope: 'all' | 'category' | 'selected', categoryId?: string): TagLibraryExport {\n    let categoriesToExport: TagCategory[] = [];\n    let tagsToExport: InteractiveTag[] = [];\n\n    if (scope === 'all') {\n      categoriesToExport = [...library.value.categories];\n      tagsToExport = [...library.value.tags];\n    } else if (scope === 'category' && categoryId) {\n      // \n      const category = getCategoryById(categoryId);\n      if (category) {\n        categoriesToExport = library.value.categories.filter(\n          c => c.path === category.path || c.path.startsWith(category.path + '/'),\n        );\n        const categoryIds = new Set(categoriesToExport.map(c => c.id));\n        tagsToExport = library.value.tags.filter(t => categoryIds.has(t.categoryId));\n      }\n    } else if (scope === 'selected') {\n      // \n      tagsToExport = library.value.tags.filter(t => selectedTagIds.value.has(t.id));\n      const categoryIds = new Set(tagsToExport.map(t => t.categoryId).filter(Boolean));\n      categoriesToExport = library.value.categories.filter(c => categoryIds.has(c.id));\n    }\n\n    // \n    const exportData: TagLibraryExport = {\n      version: '1.0',\n      exportedAt: new Date().toISOString(),\n      categories: categoriesToExport.map(c => ({\n        id: c.id,\n        path: c.path,\n        icon: c.icon,\n      })),\n      tags: tagsToExport.map(t => {\n        const category = getCategoryById(t.categoryId);\n        return {\n          id: t.id,\n          label: t.label,\n          category: category?.path || '',\n          prompt: t.promptTemplate,\n          allowPreEdit: t.allowPreEdit,\n        };\n      }),\n    };\n\n    return exportData;\n  }\n\n  /**\n   * \n   * @param data \n   * @param options \n   */\n  function importLibrary(data: TagLibraryExport, options: ImportOptions): ImportResult {\n    try {\n      let addedCategories = 0;\n      let addedTags = 0;\n      let updatedTags = 0;\n      let renamedTags = 0;\n\n      //  ID \n      const pathToCategoryId = new Map<string, string>();\n      library.value.categories.forEach(c => {\n        pathToCategoryId.set(c.path, c.id);\n      });\n\n      // \n      data.categories.forEach(importCat => {\n        if (!pathToCategoryId.has(importCat.path)) {\n          const newCategory = addCategory(importCat.path, importCat.icon);\n          pathToCategoryId.set(importCat.path, newCategory.id);\n          addedCategories++;\n        }\n      });\n\n      // \n      data.tags.forEach(importTag => {\n        const categoryId = pathToCategoryId.get(importTag.category) || '';\n\n        // \n        const existingTag = library.value.tags.find(t => t.label === importTag.label && t.categoryId === categoryId);\n\n        if (existingTag) {\n          if (options.conflictStrategy === 'overwrite') {\n            // \n            existingTag.promptTemplate = importTag.prompt;\n            existingTag.allowPreEdit = importTag.allowPreEdit;\n            updatedTags++;\n          } else {\n            // \n            let newLabel = importTag.label;\n            let suffix = 1;\n            while (library.value.tags.some(t => t.label === newLabel && t.categoryId === categoryId)) {\n              newLabel = `${importTag.label}_${suffix}`;\n              suffix++;\n            }\n            createTag(newLabel, categoryId, importTag.prompt);\n            //  allowPreEdit\n            const newTag = library.value.tags[library.value.tags.length - 1];\n            if (newTag && importTag.allowPreEdit) {\n              newTag.allowPreEdit = importTag.allowPreEdit;\n            }\n            renamedTags++;\n          }\n        } else {\n          // \n          createTag(importTag.label, categoryId, importTag.prompt);\n          const newTag = library.value.tags[library.value.tags.length - 1];\n          if (newTag && importTag.allowPreEdit) {\n            newTag.allowPreEdit = importTag.allowPreEdit;\n          }\n          addedTags++;\n        }\n      });\n\n      return {\n        success: true,\n        addedCategories,\n        addedTags,\n        updatedTags,\n        renamedTags,\n      };\n    } catch (e) {\n      console.error('[ACU TagLibrary] :', e);\n      return {\n        success: false,\n        addedCategories: 0,\n        addedTags: 0,\n        updatedTags: 0,\n        renamedTags: 0,\n        error: e instanceof Error ? e.message : '',\n      };\n    }\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param categoryId  ID'''uncategorized'\n   */\n  function selectCategory(categoryId: string): void {\n    activeCategoryId.value = categoryId;\n  }\n\n  /**\n   * \n   */\n  function resetSelection(): void {\n    activeCategoryId.value = '';\n    searchKeyword.value = '';\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param parentPath \n   */\n  function getChildCategories(parentPath: string): TagCategory[] {\n    return library.value.categories.filter(cat => {\n      if (parentPath === '') {\n        // \n        return !cat.path.includes('/');\n      } else {\n        //  parentPath/ \n        if (!cat.path.startsWith(parentPath + '/')) return false;\n        const rest = cat.path.slice(parentPath.length + 1);\n        return !rest.includes('/');\n      }\n    });\n  }\n\n  /**\n   * \n   * @param categoryId  ID\n   */\n  function getCategoryTagCount(categoryId: string): number {\n    const category = getCategoryById(categoryId);\n    if (!category) return 0;\n\n    //  ID\n    const categoryIds = new Set<string>();\n    library.value.categories.forEach(cat => {\n      if (cat.path === category.path || cat.path.startsWith(category.path + '/')) {\n        categoryIds.add(cat.id);\n      }\n    });\n\n    // \n    return library.value.tags.filter(tag => categoryIds.has(tag.categoryId)).length;\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function clearAll(): void {\n    library.value.tags = [];\n    library.value.categories = [];\n    console.info('[ACU TagLibrary] ');\n    saveLibrary();\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**  */\n  const totalTags = computed(() => library.value.tags.length);\n\n  /**  */\n  const totalCategories = computed(() => library.value.categories.length);\n\n  /**  */\n  const uncategorizedCount = computed(() => {\n    return library.value.tags.filter(tag => {\n      if (!tag.categoryId) return true;\n      return !library.value.categories.find(c => c.id === tag.categoryId);\n    }).length;\n  });\n\n  return {\n    // \n    library,\n    activeCategoryId,\n    searchKeyword,\n    isLoaded,\n\n    // \n    currentMode,\n    selectedTagIds,\n    selectedCategoryIds,\n    selectionType,\n\n    // \n    loadLibrary,\n    saveLibrary,\n\n    // \n    addCategory,\n    deleteCategory,\n    updateCategory,\n    getCategoryById,\n    getCategoryByPath,\n    getChildCategories,\n    getCategoryTagCount,\n\n    // \n    filteredTags,\n    upsertTag,\n    createTag,\n    deleteTag,\n    deleteTags,\n    getTagById,\n    getTagsByCategory,\n    moveTagToCategory,\n    moveTagsToCategory,\n\n    // \n    setMode,\n    toggleTagSelection,\n    toggleCategorySelection,\n    clearSelection,\n    migrateSelectedTags,\n    migrateSelectedCategories,\n    migrateSelectedItems,\n\n    // \n    exportLibrary,\n    importLibrary,\n\n    // \n    clearAll,\n\n    // \n    selectCategory,\n    resetSelection,\n\n    // \n    totalTags,\n    totalCategories,\n    uncategorizedCount,\n  };\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Store\n *  CSS\n *  ConfigManager \n *\n *  ref + watch  computed getter/setter\n * \n */\n\nimport { klona } from 'klona';\nimport { defineStore } from 'pinia';\nimport { computed, ref, watch } from 'vue';\nimport { getACUConfigManager } from '../composables/useACUConfigManager';\nimport { GLOBAL_THEME_BG_KEY, loadBackground } from '../composables/useBackgroundStorage';\nimport {\n  type BackgroundConfig,\n  DEFAULT_BACKGROUND_CONFIG,\n  type HighlightConfig,\n  THEME_VAR_CSS_MAP,\n  type ThemePreset,\n  type ThemeVariables,\n  type ThemeVarOpacities,\n} from '../types';\nimport { DEFAULT_BALL_APPEARANCE, HIGHLIGHT_COLORS, useBallAppearanceStore, useConfigStore } from './useConfigStore';\n\n/**  */\nexport const DEFAULT_HIGHLIGHT_CONFIG: HighlightConfig = {\n  manualColor: 'orange',\n  manualHex: '#d35400',\n  aiColor: 'blue',\n  aiHex: '#3498db',\n  titleColor: 'orange',\n  titleHex: '#d35400',\n};\n\n/**\n *  hex \n */\nfunction hexToBgRgba(hex: string, opacity: number = 0.1): string {\n  const normalizedHex = hex.startsWith('#') ? hex : `#${hex}`;\n  const r = parseInt(normalizedHex.slice(1, 3), 16);\n  const g = parseInt(normalizedHex.slice(3, 5), 16);\n  const b = parseInt(normalizedHex.slice(5, 7), 16);\n  return `rgba(${r}, ${g}, ${b}, ${opacity})`;\n}\n\n/**\n *  hex  rgba\n * @param hex - 16\n * @param alpha -  (0-1)\n */\nfunction hexToRgba(hex: string, alpha: number): string {\n  const normalizedHex = hex.startsWith('#') ? hex : `#${hex}`;\n  const r = parseInt(normalizedHex.slice(1, 3), 16);\n  const g = parseInt(normalizedHex.slice(3, 5), 16);\n  const b = parseInt(normalizedHex.slice(5, 7), 16);\n  return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n}\n\n/**\n *  key  hex \n */\nfunction getColorValue(colorKey: string, customHex?: string): string {\n  if (colorKey === 'custom' && customHex) {\n    return customHex;\n  }\n  const preset = HIGHLIGHT_COLORS[colorKey as keyof typeof HIGHLIGHT_COLORS];\n  return preset?.main || '#d35400';\n}\n\nexport const useThemeStore = defineStore('acu-theme', () => {\n  // ============================================================\n  //  ConfigManager \n  // ============================================================\n  const configManager = getACUConfigManager();\n\n  // ============================================================\n  //  ref + watch \n  // ============================================================\n\n  /**  -  ref  */\n  const presets = ref<ThemePreset[]>(klona(configManager.config.theme?.presets || []));\n\n  /**  ID () */\n  const activePresetId = ref<string | null>(configManager.config.theme?.activePresetId || null);\n\n  /**  () */\n  const currentThemeVars = ref<Partial<ThemeVariables>>(klona(configManager.config.theme?.themeVars || {}));\n\n  /**  (0-100100=) */\n  const currentThemeVarOpacities = ref<ThemeVarOpacities>(klona(configManager.config.theme?.themeVarOpacities || {}));\n\n  /**  */\n  const currentHighlight = ref<HighlightConfig>(\n    klona(configManager.config.theme?.highlight || { ...DEFAULT_HIGHLIGHT_CONFIG }),\n  );\n\n  /**  */\n  const backgroundConfig = ref<BackgroundConfig>(\n    klona(configManager.config.theme?.backgroundConfig || { ...DEFAULT_BACKGROUND_CONFIG }),\n  );\n\n  /**  CSS */\n  const customCSS = ref<string>(configManager.config.theme?.customCSS || '');\n\n  /**  (ConfigManager ) */\n  const isLoaded = computed(() => configManager.isLoaded.value);\n\n  // \n  let isThemeInitializing = true;\n\n  // \n  function syncToConfigManager() {\n    if (isThemeInitializing) return;\n    configManager.config.theme = {\n      presets: klona(presets.value),\n      activePresetId: activePresetId.value,\n      themeVars: klona(currentThemeVars.value),\n      themeVarOpacities: klona(currentThemeVarOpacities.value),\n      highlight: klona(currentHighlight.value),\n      backgroundConfig: klona(backgroundConfig.value),\n      customCSS: customCSS.value,\n    };\n    configManager.saveConfig();\n  }\n\n  watch(presets, syncToConfigManager, { deep: true });\n  watch(activePresetId, syncToConfigManager);\n  watch(currentThemeVars, syncToConfigManager, { deep: true });\n  watch(currentThemeVarOpacities, syncToConfigManager, { deep: true });\n  watch(currentHighlight, syncToConfigManager, { deep: true });\n  watch(backgroundConfig, syncToConfigManager, { deep: true });\n  watch(customCSS, syncToConfigManager);\n\n  // \n  setTimeout(() => {\n    isThemeInitializing = false;\n  }, 100);\n\n  // ============================================================\n  // \n  // ============================================================\n\n  const configStore = useConfigStore();\n\n  /**  ID */\n  const baseTheme = computed(() => configStore.config.theme);\n\n  /**  */\n  const manualHighlightColor = computed(() => {\n    return getColorValue(currentHighlight.value.manualColor, currentHighlight.value.manualHex);\n  });\n\n  /** AI  */\n  const aiHighlightColor = computed(() => {\n    return getColorValue(currentHighlight.value.aiColor, currentHighlight.value.aiHex);\n  });\n\n  /**  */\n  const titleColor = computed(() => {\n    return getColorValue(currentHighlight.value.titleColor, currentHighlight.value.titleHex);\n  });\n\n  /**  */\n  const titleBgColor = computed(() => {\n    return hexToBgRgba(titleColor.value, 0.08);\n  });\n\n  /**  */\n  const activePreset = computed(() => {\n    if (!activePresetId.value) return null;\n    return presets.value.find(p => p.id === activePresetId.value) || null;\n  });\n\n  // ============================================================\n  //  -  ConfigManager\n  // ============================================================\n\n  /**\n   * \n   * @param force \n   */\n  async function loadFromStorage(force = false) {\n    // ConfigManager \n    try {\n      //  ConfigManager \n      if (!configManager.isLoaded.value) {\n        console.warn('[ACU Theme] ConfigManager ');\n        // \n        setTimeout(() => loadFromStorage(force), 500);\n        return;\n      }\n\n      const activeId = activePresetId.value;\n      const bgConfig = backgroundConfig.value;\n\n      // \n      if (activeId) {\n        const preset = presets.value.find(p => p.id === activeId);\n        if (preset && bgConfig.enabled && bgConfig.hasIndexedDBImage) {\n          try {\n            //  ID \n            let blobUrl = await loadBackground(preset.id);\n            //  ID  key\n            if (!blobUrl) {\n              blobUrl = await loadBackground(GLOBAL_THEME_BG_KEY);\n            }\n            if (blobUrl) {\n              backgroundConfig.value.imageUrl = blobUrl;\n              console.info('[ACU Theme]  IndexedDB ');\n            }\n          } catch (err) {\n            console.warn('[ACU Theme] :', err);\n          }\n        }\n        //  configStore\n        syncToConfigStore();\n      } else if (bgConfig.enabled && bgConfig.hasIndexedDBImage) {\n        // \n        try {\n          const blobUrl = await loadBackground(GLOBAL_THEME_BG_KEY);\n          if (blobUrl) {\n            backgroundConfig.value.imageUrl = blobUrl;\n            console.info('[ACU Theme]  IndexedDB ');\n          }\n        } catch (err) {\n          console.warn('[ACU Theme] :', err);\n        }\n        //  configStore \n        syncFromConfigStore();\n      }\n\n      console.info('[ACU Theme] ');\n    } catch (e) {\n      console.error('[ACU Theme] :', e);\n    }\n  }\n\n  /**\n   *  -  ConfigManager\n   */\n  function saveToStorage() {\n    try {\n      syncToConfigManager();\n      //  configStore\n      syncToConfigStore();\n      console.info('[ACU Theme] ');\n    } catch (e) {\n      console.error('[ACU Theme] :', e);\n    }\n  }\n\n  /**\n   *  configStore \n   */\n  function syncFromConfigStore() {\n    const config = configStore.config;\n    currentHighlight.value = {\n      manualColor: config.highlightManualColor || config.highlightColor || 'orange',\n      manualHex: config.customHighlightManualHex,\n      aiColor: config.highlightAiColor || 'blue',\n      aiHex: config.customHighlightAiHex,\n      titleColor: config.titleColor || 'orange',\n      titleHex: config.customTitleHex,\n    };\n  }\n\n  /**\n   *  configStore\n   */\n  function syncToConfigStore() {\n    const highlight = currentHighlight.value;\n    configStore.updateConfig({\n      highlightManualColor: highlight.manualColor,\n      highlightColor: highlight.manualColor, // \n      customHighlightManualHex: highlight.manualHex,\n      highlightAiColor: highlight.aiColor,\n      customHighlightAiHex: highlight.aiHex,\n      titleColor: highlight.titleColor,\n      customTitleHex: highlight.titleHex,\n      // \n      highlightNew: true,\n      customTitleColor: true,\n    });\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function createPreset(name: string): ThemePreset {\n    const ballStore = useBallAppearanceStore();\n    const preset: ThemePreset = {\n      id: `preset_${Date.now()}`,\n      name,\n      createdAt: new Date().toISOString(),\n      baseTheme: baseTheme.value,\n      themeVars: { ...currentThemeVars.value },\n      themeVarOpacities: { ...currentThemeVarOpacities.value },\n      highlight: { ...currentHighlight.value },\n      backgroundConfig: { ...backgroundConfig.value },\n      customCSS: customCSS.value,\n      ballAppearance: { ...ballStore.appearance },\n    };\n\n    presets.value = [...presets.value, preset];\n    return preset;\n  }\n\n  /**\n   * \n   */\n  function saveCurrentToPreset(name: string): ThemePreset {\n    const ballStore = useBallAppearanceStore();\n    // \n    const currentPresets = [...presets.value];\n    const existingIndex = currentPresets.findIndex(p => p.name === name);\n\n    if (existingIndex > -1) {\n      // \n      const existing = currentPresets[existingIndex];\n      const updated: ThemePreset = {\n        ...existing,\n        baseTheme: baseTheme.value,\n        themeVars: { ...currentThemeVars.value },\n        themeVarOpacities: { ...currentThemeVarOpacities.value },\n        highlight: { ...currentHighlight.value },\n        backgroundConfig: { ...backgroundConfig.value },\n        customCSS: customCSS.value,\n        ballAppearance: { ...ballStore.appearance },\n      };\n\n      currentPresets[existingIndex] = updated;\n      presets.value = currentPresets;\n      activePresetId.value = existing.id;\n\n      //  IndexedDB ID \n      if (backgroundConfig.value.enabled && backgroundConfig.value.hasIndexedDBImage) {\n        copyBackgroundToPreset(existing.id);\n      }\n\n      return updated;\n    } else {\n      // \n      const preset = createPreset(name);\n      activePresetId.value = preset.id;\n\n      //  IndexedDB ID \n      if (backgroundConfig.value.enabled && backgroundConfig.value.hasIndexedDBImage) {\n        copyBackgroundToPreset(preset.id);\n      }\n\n      return preset;\n    }\n  }\n\n  /**\n   * \n   */\n  async function copyBackgroundToPreset(presetId: string) {\n    try {\n      let blobUrl: string | null = null;\n\n      //  imageUrl (blob URL)\n      if (backgroundConfig.value.imageUrl && backgroundConfig.value.imageUrl.startsWith('blob:')) {\n        blobUrl = backgroundConfig.value.imageUrl;\n      } else {\n        // 1.  ()\n        blobUrl = await loadBackground(GLOBAL_THEME_BG_KEY);\n\n        // 2.  ()\n        if (!blobUrl && activePresetId.value && activePresetId.value !== presetId) {\n          blobUrl = await loadBackground(activePresetId.value);\n        }\n      }\n\n      if (blobUrl) {\n        //  blob URL  Blob \n        const response = await fetch(blobUrl);\n        const blob = await response.blob();\n\n        //  ID \n        const { saveBackground } = await import('../composables/useBackgroundStorage');\n        await saveBackground(presetId, blob, blob.type);\n        console.info('[ACU Theme] :', presetId);\n      }\n    } catch (e) {\n      console.warn('[ACU Theme] :', e);\n    }\n  }\n\n  /**\n   * \n   */\n  function deletePreset(presetId: string) {\n    const currentPresets = [...presets.value];\n    const index = currentPresets.findIndex(p => p.id === presetId);\n    if (index > -1) {\n      currentPresets.splice(index, 1);\n      presets.value = currentPresets;\n\n      // \n      if (activePresetId.value === presetId) {\n        activePresetId.value = null;\n      }\n    }\n  }\n\n  /**  watch */\n  const isApplyingPreset = ref(false);\n\n  /**\n   * \n   */\n  async function applyPreset(presetId: string) {\n    const preset = presets.value.find(p => p.id === presetId);\n    if (!preset) return;\n\n    //  watch \n    isApplyingPreset.value = true;\n\n    try {\n      //  activePresetId\n      activePresetId.value = presetId;\n\n      // \n      configStore.setTheme(preset.baseTheme);\n\n      //  - \n      currentThemeVars.value = { ...(preset.themeVars || {}) };\n\n      // \n      currentThemeVarOpacities.value = { ...(preset.themeVarOpacities || {}) };\n\n      // \n      currentHighlight.value = { ...preset.highlight };\n\n      // \n      const newBgConfig = preset.backgroundConfig || { ...DEFAULT_BACKGROUND_CONFIG };\n\n      //  imageUrl\n      newBgConfig.imageUrl = '';\n      backgroundConfig.value = { ...newBgConfig };\n\n      // \n      if (newBgConfig.enabled) {\n        if (newBgConfig.hasIndexedDBImage) {\n          //  ID \n          const bgKey = preset.id;\n          try {\n            let blobUrl = await loadBackground(bgKey);\n            //  ID  key\n            if (!blobUrl) {\n              blobUrl = await loadBackground(GLOBAL_THEME_BG_KEY);\n              if (blobUrl) {\n                console.info('[ACU Theme]  ()');\n              }\n            }\n            if (blobUrl) {\n              backgroundConfig.value.imageUrl = blobUrl;\n              console.info('[ACU Theme] ');\n            } else {\n              console.warn('[ACU Theme] IndexedDB ');\n              // \n              backgroundConfig.value.hasIndexedDBImage = false;\n            }\n          } catch (err) {\n            console.warn('[ACU Theme] ', err);\n          }\n        } else if (newBgConfig.externalUrl) {\n          //  URL\n          backgroundConfig.value.imageUrl = newBgConfig.externalUrl;\n          console.info('[ACU Theme]  URL');\n        }\n      }\n\n      //  CSS\n      customCSS.value = preset.customCSS || '';\n\n      // \n      const ballStore = useBallAppearanceStore();\n      if (preset.ballAppearance) {\n        ballStore.setAppearance(preset.ballAppearance);\n      } else {\n        // \n        ballStore.setAppearance(DEFAULT_BALL_APPEARANCE);\n      }\n\n      //  configStore\n      syncToConfigStore();\n    } finally {\n      // \n      isApplyingPreset.value = false;\n    }\n  }\n\n  /**\n   * \n   */\n  function updatePreset(presetId: string, updates: Partial<ThemePreset>) {\n    const currentPresets = [...presets.value];\n    const index = currentPresets.findIndex(p => p.id === presetId);\n    if (index > -1) {\n      currentPresets[index] = { ...currentPresets[index], ...updates };\n      presets.value = currentPresets;\n    }\n  }\n\n  /**\n   * \n   */\n  function renamePreset(presetId: string, newName: string) {\n    updatePreset(presetId, { name: newName });\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function setManualHighlightColor(colorKey: string, customHex?: string) {\n    currentHighlight.value = {\n      ...currentHighlight.value,\n      manualColor: colorKey,\n      manualHex: customHex,\n    };\n  }\n\n  /**\n   *  AI \n   */\n  function setAiHighlightColor(colorKey: string, customHex?: string) {\n    currentHighlight.value = {\n      ...currentHighlight.value,\n      aiColor: colorKey,\n      aiHex: customHex,\n    };\n  }\n\n  /**\n   * \n   */\n  function setTitleColor(colorKey: string, customHex?: string) {\n    currentHighlight.value = {\n      ...currentHighlight.value,\n      titleColor: colorKey,\n      titleHex: customHex,\n    };\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function setThemeVar(key: keyof ThemeVariables, value: string) {\n    currentThemeVars.value = {\n      ...currentThemeVars.value,\n      [key]: value,\n    };\n  }\n\n  /**\n   *  ()\n   */\n  function removeThemeVar(key: keyof ThemeVariables) {\n    const newVars = { ...currentThemeVars.value };\n    delete newVars[key];\n    currentThemeVars.value = newVars;\n  }\n\n  /**\n   * \n   */\n  function clearThemeVars() {\n    currentThemeVars.value = {};\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param key - \n   * @param opacity -  (0-100100=)\n   */\n  function setThemeVarOpacity(key: keyof ThemeVariables, opacity: number) {\n    currentThemeVarOpacities.value = {\n      ...currentThemeVarOpacities.value,\n      [key]: Math.max(0, Math.min(100, opacity)),\n    };\n  }\n\n  /**\n   *  (100)\n   */\n  function removeThemeVarOpacity(key: keyof ThemeVariables) {\n    const newOpacities = { ...currentThemeVarOpacities.value };\n    delete newOpacities[key];\n    currentThemeVarOpacities.value = newOpacities;\n  }\n\n  /**\n   * \n   */\n  function clearThemeVarOpacities() {\n    currentThemeVarOpacities.value = {};\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function setBackgroundConfig(config: Partial<BackgroundConfig>) {\n    backgroundConfig.value = {\n      ...backgroundConfig.value,\n      ...config,\n    };\n  }\n\n  /**\n   * \n   */\n  function getBackgroundConfig(): BackgroundConfig {\n    return backgroundConfig.value;\n  }\n\n  // ============================================================\n  //  CSS\n  // ============================================================\n\n  /**\n   *  CSS\n   */\n  function setCustomCSS(css: string) {\n    customCSS.value = css;\n  }\n\n  /**\n   *  CSS\n   */\n  function clearCustomCSS() {\n    customCSS.value = '';\n  }\n\n  // ============================================================\n  // CSS \n  // ============================================================\n\n  /**\n   *  CSS \n   */\n  function getInjectedStyles(): string {\n    const styles: string[] = [];\n\n    // 1. \n    for (const [key, value] of Object.entries(currentThemeVars.value)) {\n      if (value) {\n        const cssVar = THEME_VAR_CSS_MAP[key as keyof ThemeVariables];\n        if (cssVar) {\n          // 100 = \n          const opacity = currentThemeVarOpacities.value[key as keyof ThemeVariables] ?? 100;\n\n          if (opacity < 100 && value.startsWith('#')) {\n            //  rgba\n            const rgbaValue = hexToRgba(value, opacity / 100);\n            styles.push(`${cssVar}: ${rgbaValue};`);\n          } else {\n            styles.push(`${cssVar}: ${value};`);\n          }\n        }\n      }\n    }\n\n    // 2. \n    styles.push(`--acu-highlight: ${manualHighlightColor.value};`);\n    styles.push(`--acu-highlight-manual: ${manualHighlightColor.value};`);\n    styles.push(`--acu-highlight-manual-bg: ${hexToBgRgba(manualHighlightColor.value)};`);\n    styles.push(`--acu-highlight-ai: ${aiHighlightColor.value};`);\n    styles.push(`--acu-highlight-ai-bg: ${hexToBgRgba(aiHighlightColor.value)};`);\n    styles.push(`--acu-title-color: ${titleColor.value};`);\n    styles.push(`--acu-title-color-bg: ${titleBgColor.value};`);\n    styles.push(`--acu-accent: ${titleColor.value};`);\n\n    // 3. \n    if (backgroundConfig.value.enabled && backgroundConfig.value.imageUrl) {\n      const bg = backgroundConfig.value;\n      const posX = 50 + (bg.offsetX || 0);\n      const posY = 50 + (bg.offsetY || 0);\n      const scale = (bg.scale || 100) / 100;\n      // auto  100%cover  cover transform \n      const size = bg.size === 'auto' ? '100%' : bg.size;\n\n      styles.push(`--acu-bg-image: url(\"${bg.imageUrl}\");`);\n      styles.push(`--acu-bg-position: center center;`); //  transform \n      styles.push(`--acu-bg-size: ${size};`);\n      styles.push(`--acu-bg-scale: ${scale};`);\n      styles.push(`--acu-bg-offset-x: ${bg.offsetX || 0}%;`);\n      styles.push(`--acu-bg-offset-y: ${bg.offsetY || 0}%;`);\n      styles.push(`--acu-bg-repeat: no-repeat;`);\n      styles.push(`--acu-bg-opacity: ${bg.opacity / 100};`);\n      styles.push(`--acu-bg-blur: ${bg.blur}px;`);\n    } else {\n      styles.push(`--acu-bg-image: none;`);\n    }\n\n    if (styles.length === 0) return '';\n\n    const styleBlock = styles.join(' ');\n\n    // \n    //  .acu-app ()  .acu-wrapper/.acu-modal-container ()\n    let css = `.acu-app, .acu-wrapper, .acu-modal-container { ${styleBlock} }`;\n\n    // \n    if (backgroundConfig.value.enabled && backgroundConfig.value.imageUrl) {\n      css += `\n        .acu-data-display::before {\n          content: \"\";\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background-image: var(--acu-bg-image);\n          background-position: var(--acu-bg-position);\n          background-size: var(--acu-bg-size);\n          background-repeat: var(--acu-bg-repeat);\n          transform: translate(var(--acu-bg-offset-x), var(--acu-bg-offset-y)) scale(var(--acu-bg-scale));\n          transform-origin: center center;\n          opacity: var(--acu-bg-opacity);\n          filter: blur(var(--acu-bg-blur));\n          pointer-events: none;\n          z-index: -1;\n          border-radius: 12px; /*  */\n        }\n        .acu-data-display {\n          position: relative;\n          z-index: 0;\n          background: transparent !important; /*  */\n        }\n      `;\n    }\n\n    return css;\n  }\n\n  /**\n   *  CSS ( +  CSS)\n   */\n  function getFullInjectedCSS(): string {\n    const varStyles = getInjectedStyles();\n    const userCSS = customCSS.value;\n\n    return [varStyles, userCSS].filter(Boolean).join('\\n\\n');\n  }\n\n  return {\n    // \n    presets,\n    activePresetId,\n    currentThemeVars,\n    currentThemeVarOpacities,\n    currentHighlight,\n    backgroundConfig,\n    customCSS,\n    isLoaded,\n\n    // \n    baseTheme,\n    manualHighlightColor,\n    aiHighlightColor,\n    titleColor,\n    titleBgColor,\n    activePreset,\n\n    // \n    loadFromStorage,\n    saveToStorage,\n    syncFromConfigStore,\n    syncToConfigStore,\n\n    // \n    createPreset,\n    saveCurrentToPreset,\n    deletePreset,\n    applyPreset,\n    updatePreset,\n    renamePreset,\n\n    // \n    setManualHighlightColor,\n    setAiHighlightColor,\n    setTitleColor,\n\n    // \n    setThemeVar,\n    removeThemeVar,\n    clearThemeVars,\n\n    // \n    setThemeVarOpacity,\n    removeThemeVarOpacity,\n    clearThemeVarOpacities,\n\n    // \n    setBackgroundConfig,\n    getBackgroundConfig,\n\n    //  CSS\n    setCustomCSS,\n    clearCustomCSS,\n\n    // CSS \n    getInjectedStyles,\n    getFullInjectedCSS,\n  };\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * UI  Store\n *  isCollapsed, isPinned, currentPage, currentSearchTerm, globalScrollTop, isEditingOrder \n */\nimport { useStorage } from '@vueuse/core';\nimport { klona } from 'klona';\nimport { computed, reactive, ref, shallowRef, watch } from 'vue';\nimport { DEFAULT_CHAT_CONFIG } from '../composables/storageKeys';\nimport { getACUConfigManager } from '../composables/useACUConfigManager';\nimport { useDataStore } from './useDataStore';\nimport { useDivinationStore } from './useDivinationStore';\n//  props  tables  store  Props \n/**  () */\nexport const STORAGE_KEYS = {\n    UI_COLLAPSE: 'acu_ui_collapse_state',\n    PIN: 'acu_pin_state',\n    ACTIVE_TAB: 'acu_active_tab',\n    TABLE_ORDER: 'acu_table_order',\n    TABLE_HEIGHTS: 'acu_table_heights',\n    TABLE_STYLES: 'acu_table_styles',\n    REVERSE_TABLES: 'acu_reverse_tables',\n    BALL_POSITION: 'acu_float_ball_pos',\n    LAYOUT: 'acu_layout',\n    VISIBLE_TABS: 'acu_visible_tabs',\n    TAB_ORDER: 'acu_tab_order',\n};\n/**  Tab  */\nexport const TAB_DASHBOARD = 'acu_tab_dashboard_home';\nexport const TAB_OPTIONS = 'acu_tab_options_panel';\nexport const TAB_RELATIONSHIP_GRAPH = 'acu_tab_relationship_graph';\n/**  Tab  */\nexport function getSmartTabIcon(name) {\n    if (/||/.test(name))\n        return 'fas fa-fist-raised';\n    if (//.test(name))\n        return 'fas fa-magic';\n    if (/||npc/i.test(name))\n        return 'fas fa-users';\n    if (/|/.test(name))\n        return 'fas fa-hand-pointer';\n    if (//.test(name))\n        return 'fas fa-dice';\n    if (//.test(name))\n        return 'fas fa-globe';\n    if (/|/.test(name))\n        return 'fas fa-map-marked-alt';\n    if (//.test(name))\n        return 'fas fa-book';\n    return 'fas fa-table';\n}\nexport const useUIStore = defineStore('acu-ui', () => {\n    // ============================================================\n    //  -  useStorage  localStorage\n    //\n    //  index.ts checkAndResetCenteredMode\n    //  Vue  activeTab \n    // ============================================================\n    /**  -  isCollapsed */\n    const isCollapsed = useStorage(STORAGE_KEYS.UI_COLLAPSE, false);\n    /**  -  isPinned */\n    const isPinned = useStorage(STORAGE_KEYS.PIN, false);\n    /**  Tab -  getActiveTabState/saveActiveTabState */\n    const activeTab = useStorage(STORAGE_KEYS.ACTIVE_TAB, null);\n    /**  -  getSavedTableOrder/saveTableOrder */\n    const tableOrder = useStorage(STORAGE_KEYS.TABLE_ORDER, []);\n    // ============================================================\n    //  ConfigManager \n    //  extensionSettings\n    //\n    //  ref + watch  computed getter/setter\n    // computed getter/setter \n    // ============================================================\n    const configManager = getACUConfigManager();\n    /**  ID */\n    const currentChatId = computed(() => SillyTavern.getCurrentChatId() || 'default');\n    /**  -  ref  */\n    const chatConfigRef = ref({ ...DEFAULT_CHAT_CONFIG });\n    /**\n     * Tab  -  ref  computed getter/setter \n     *  Tab\n     *  (name) Tab  ID\n     */\n    const visibleTabsRef = ref([]);\n    /**\n     * Tab  -  ref\n     * \n     */\n    const tabOrderRef = ref([]);\n    /**  ConfigManager  */\n    function loadChatConfig() {\n        const chatId = currentChatId.value;\n        const stored = configManager.config.chats[chatId];\n        chatConfigRef.value = stored ? klona(stored) : { ...DEFAULT_CHAT_CONFIG };\n        //  Tab  ref\n        visibleTabsRef.value = [...chatConfigRef.value.visibleTabs];\n        tabOrderRef.value = [...chatConfigRef.value.tabOrder];\n        console.info('[UIStore] :', chatId, 'visibleTabs:', visibleTabsRef.value);\n    }\n    //  ID \n    watch(currentChatId, () => {\n        loadChatConfig();\n    }, { immediate: true });\n    // \n    let isChatConfigInitializing = true;\n    watch(chatConfigRef, newValue => {\n        if (isChatConfigInitializing)\n            return;\n        const chatId = currentChatId.value;\n        configManager.setChatConfig(chatId, klona(newValue));\n    }, { deep: true });\n    //  Tab  chatConfigRef \n    watch(visibleTabsRef, newValue => {\n        if (isChatConfigInitializing)\n            return;\n        chatConfigRef.value.visibleTabs = [...newValue];\n        const chatId = currentChatId.value;\n        configManager.setChatConfig(chatId, klona(chatConfigRef.value));\n        console.info('[UIStore] visibleTabs :', newValue);\n    }, { deep: true });\n    watch(tabOrderRef, newValue => {\n        if (isChatConfigInitializing)\n            return;\n        chatConfigRef.value.tabOrder = [...newValue];\n        const chatId = currentChatId.value;\n        configManager.setChatConfig(chatId, klona(chatConfigRef.value));\n        console.info('[UIStore] tabOrder :', newValue);\n    }, { deep: true });\n    // \n    setTimeout(() => {\n        isChatConfigInitializing = false;\n    }, 100);\n    /**  -  chatConfigRef  */\n    const tableHeights = computed({\n        get: () => chatConfigRef.value.tableHeights,\n        set: val => {\n            chatConfigRef.value.tableHeights = val;\n        },\n    });\n    /**  -  chatConfigRef  */\n    const tableStyles = computed({\n        get: () => chatConfigRef.value.tableStyles,\n        set: val => {\n            chatConfigRef.value.tableStyles = val;\n        },\n    });\n    /**  -  chatConfigRef  */\n    const reverseTables = computed({\n        get: () => chatConfigRef.value.reverseTables,\n        set: val => {\n            chatConfigRef.value.reverseTables = val;\n        },\n    });\n    /**  */\n    const ballPosition = useStorage(STORAGE_KEYS.BALL_POSITION, {\n        x: 20,\n        y: typeof window !== 'undefined' ? window.innerHeight - 150 : 500,\n    });\n    /**  - (horizontal)(vertical) */\n    const layout = useStorage(STORAGE_KEYS.LAYOUT, 'horizontal');\n    /**\n     *  Tab  -  ref \n     * \n     *  (name) Tab  ID\n     */\n    const visibleTabs = computed({\n        get: () => visibleTabsRef.value,\n        set: val => {\n            visibleTabsRef.value = [...val];\n        },\n    });\n    /**\n     * Tab  -  ref \n     * \n     */\n    const tabOrder = computed({\n        get: () => tabOrderRef.value,\n        set: val => {\n            tabOrderRef.value = [...val];\n        },\n    });\n    // ============================================================\n    //  - \n    // ============================================================\n    /**  -  currentPage */\n    const currentPage = ref(1);\n    /**  -  currentSearchTerm */\n    const searchTerm = ref('');\n    /**  -  globalScrollTop */\n    const scrollTop = ref(0);\n    /**  -  isEditingOrder */\n    const isEditingOrder = ref(false);\n    /**  -  isInitialized */\n    const isInitialized = ref(false);\n    /**  () */\n    const isContentHidden = ref(false);\n    /**  */\n    const isMobile = ref(false);\n    /**  */\n    const isLockEditMode = ref(false);\n    /**  */\n    const showLockedOnly = ref(false);\n    /**  */\n    const initialSettingsPanel = ref(null);\n    // ============================================================\n    //  - \n    // ============================================================\n    /**  */\n    const rowEditDialog = reactive({\n        visible: false,\n        props: {\n            tableName: '',\n            tableId: '',\n            rowIndex: 0,\n            currentRowData: null,\n        },\n    });\n    /**  */\n    const widgetSettingsDialog = reactive({\n        visible: false,\n        props: {\n            widgetId: '',\n            widgetConfig: null,\n            tableHeaders: [],\n        },\n    });\n    /** Dashboard  */\n    const dashboardHistoryDialog = reactive({\n        visible: false,\n        props: {\n            tableName: '',\n            tableId: '',\n            rowIndex: 0,\n            currentRowData: null,\n            titleColIndex: 0,\n        },\n    });\n    /**  */\n    const avatarCropDialog = reactive({\n        visible: false,\n        props: {\n            imageUrl: '',\n            name: '',\n            initialOffsetX: 50,\n            initialOffsetY: 50,\n            initialScale: 150,\n            initialInvert: false,\n            showInvertOption: false,\n        },\n    });\n    /**  -  shallowRef  reactive  */\n    const avatarCropOnApply = shallowRef(null);\n    const avatarCropOnUpload = shallowRef(null);\n    /**  */\n    const widgetActionsDialog = reactive({\n        visible: false,\n        props: {\n            widgetId: '',\n            currentActions: [],\n        },\n    });\n    /**  */\n    const avatarManagerDialog = reactive({\n        visible: false,\n        props: {\n            nodes: [],\n            factions: [],\n        },\n    });\n    /**  -  shallowRef  reactive  */\n    const avatarManagerOnUpdate = shallowRef(null);\n    const avatarManagerOnLabelChange = shallowRef(null);\n    /**  */\n    const nodeConfigDialog = reactive({\n        visible: false,\n        props: {\n            nodeId: '',\n            fullName: '',\n            currentLabel: '',\n            selectedIndices: [],\n        },\n    });\n    /**  -  shallowRef  reactive  */\n    const nodeConfigOnConfirm = shallowRef(null);\n    const nodeConfigOnResetToFullName = shallowRef(null);\n    const nodeConfigOnStyleUpdate = shallowRef(null);\n    /**  */\n    const nodeLabelDialog = reactive({\n        visible: false,\n        props: {\n            fullName: '',\n            initialIndices: [],\n        },\n    });\n    /**  -  shallowRef  reactive  */\n    const nodeLabelOnApply = shallowRef(null);\n    const nodeLabelOnReset = shallowRef(null);\n    /**  */\n    function openNodeLabelDialog(props, callbacks) {\n        nodeLabelDialog.props = { ...props };\n        nodeLabelOnApply.value = callbacks.onApply;\n        nodeLabelOnReset.value = callbacks.onReset;\n        nodeLabelDialog.visible = true;\n    }\n    /**  */\n    function closeNodeLabelDialog() {\n        nodeLabelDialog.visible = false;\n        nodeLabelOnApply.value = null;\n        nodeLabelOnReset.value = null;\n    }\n    /**  */\n    function handleNodeLabelApply(data) {\n        if (nodeLabelOnApply.value) {\n            nodeLabelOnApply.value(data.selectedIndices);\n        }\n        closeNodeLabelDialog();\n    }\n    /**  */\n    function handleNodeLabelReset() {\n        if (nodeLabelOnReset.value) {\n            nodeLabelOnReset.value();\n        }\n        closeNodeLabelDialog();\n    }\n    /**  */\n    const graphSettingsDialog = reactive({\n        visible: false,\n        props: {\n            factions: [],\n        },\n    });\n    /**  */\n    const factionSettingsDialog = reactive({\n        visible: false,\n        props: {\n            factionId: '',\n            factionName: '',\n        },\n    });\n    // ============================================================\n    //  App.vue \n    // ============================================================\n    /**  */\n    const settingsDialog = ref(false);\n    /**  */\n    const directorDialog = ref(false);\n    /**  */\n    const inputFloorDialog = reactive({\n        visible: false,\n        props: {\n            currentFloor: 0,\n        },\n    });\n    /**  */\n    const purgeRangeDialog = reactive({\n        visible: false,\n        props: {\n            maxFloor: 0,\n        },\n    });\n    /**  */\n    const advancedPurgeDialog = reactive({\n        visible: false,\n        props: {\n            initialStartFloor: undefined,\n            initialEndFloor: undefined,\n        },\n        state: {\n            selectedTableKeys: [],\n        },\n    });\n    /**  -  shallowRef  reactive  */\n    const advancedPurgeOnConfirm = shallowRef(null);\n    /**  */\n    const manualUpdateDialog = ref(false);\n    /** DataTable  dashboardHistoryDialog  */\n    const historyDialog = reactive({\n        visible: false,\n        props: {\n            tableName: '',\n            tableId: '',\n            rowIndex: 0,\n            currentRowData: null,\n            titleColIndex: 1,\n        },\n    });\n    /** Tab  */\n    const tabsPopup = ref(false);\n    /**  */\n    const addTableDialog = reactive({\n        visible: false,\n    });\n    /**  -  shallowRef  reactive  */\n    const addTableOnConfirm = shallowRef(null);\n    /**  */\n    const presetSaveDialog = reactive({\n        visible: false,\n        props: {\n            presetType: 'manual-update',\n            summaryItems: [],\n            initialName: '',\n        },\n    });\n    /**  -  shallowRef  reactive  */\n    const presetSaveOnSave = shallowRef(null);\n    /**  */\n    const categorySelectDialog = reactive({\n        visible: false,\n        props: {\n            categoryId: '',\n            rowContext: { title: '', value: '' },\n            widgetId: '',\n        },\n    });\n    /**  */\n    const tagPreEditDialog = reactive({\n        visible: false,\n        props: {\n            tagLabel: '',\n            resolvedPrompt: '',\n            showCompanions: false,\n            widgetId: '',\n        },\n    });\n    /**  */\n    const tagManagerDialog = reactive({\n        visible: false,\n        props: {\n            widgetId: '',\n            displayedTagIds: [],\n            displayedCategoryIds: [],\n        },\n    });\n    /**  -  shallowRef  reactive  */\n    const tagManagerOnSave = shallowRef(null);\n    /**  */\n    const iconSelectDialog = reactive({\n        visible: false,\n        props: {\n            currentIcon: '',\n        },\n    });\n    /**  -  shallowRef  reactive  */\n    const iconSelectOnSelect = shallowRef(null);\n    /**  */\n    function openIconSelectDialog(props, callbacks) {\n        iconSelectDialog.props = { ...props };\n        iconSelectOnSelect.value = callbacks.onSelect;\n        iconSelectDialog.visible = true;\n    }\n    /**  */\n    function closeIconSelectDialog() {\n        iconSelectDialog.visible = false;\n        iconSelectOnSelect.value = null;\n    }\n    /**  */\n    function handleIconSelect(icon) {\n        if (iconSelectOnSelect.value) {\n            iconSelectOnSelect.value(icon);\n        }\n        closeIconSelectDialog();\n    }\n    /**  */\n    const tagPreviewMode = ref(false);\n    /**  */\n    const tagPreviewTooltip = reactive({\n        visible: false,\n        content: '',\n        x: 0,\n        y: 0,\n    });\n    /**  */\n    const divinationOverlay = reactive({\n        visible: false,\n        result: null,\n        isQuickRerollMode: false,\n    });\n    /**  */\n    const promptEditorDialog = reactive({\n        visible: false,\n        props: {\n            prompt: '',\n        },\n    });\n    // ============================================================\n    // Getters\n    // ============================================================\n    /**  */\n    const isPanelVisible = computed(() => !isCollapsed.value && activeTab.value !== null);\n    /**  */\n    const isDashboardActive = computed(() => activeTab.value === TAB_DASHBOARD);\n    /**  */\n    const isOptionsActive = computed(() => activeTab.value === TAB_OPTIONS);\n    // ============================================================\n    // Actions\n    // ============================================================\n    /**\n     * \n     */\n    function toggleCollapse() {\n        isCollapsed.value = !isCollapsed.value;\n    }\n    /**\n     * \n     */\n    function togglePin() {\n        isPinned.value = !isPinned.value;\n    }\n    /**\n     *  Tab\n     * @param tabName Tab \n     */\n    function setActiveTab(tabName) {\n        activeTab.value = tabName;\n        //  tab \n        currentPage.value = 1;\n        searchTerm.value = '';\n    }\n    /**\n     * \n     * @param order \n     */\n    function setTableOrder(order) {\n        tableOrder.value = order;\n    }\n    /**\n     * \n     * @param tableName \n     * @param height \n     */\n    function setTableHeight(tableName, height) {\n        tableHeights.value = { ...tableHeights.value, [tableName]: height };\n    }\n    /**\n     *  ()\n     * @param tableName \n     */\n    function resetTableHeight(tableName) {\n        const heights = { ...tableHeights.value };\n        delete heights[tableName];\n        tableHeights.value = heights;\n    }\n    /**\n     * \n     * @param tableName \n     */\n    function getTableHeight(tableName) {\n        return tableHeights.value[tableName];\n    }\n    /**\n     * \n     * @param tableName \n     * @param style \n     */\n    function setTableStyle(tableName, style) {\n        tableStyles.value = { ...tableStyles.value, [tableName]: style };\n    }\n    /**\n     * \n     * @param tableName \n     */\n    function getTableStyle(tableName) {\n        return tableStyles.value[tableName] || 'list';\n    }\n    /**\n     * \n     * @param tableName \n     */\n    function toggleTableReverse(tableName) {\n        const current = [...reverseTables.value];\n        const index = current.indexOf(tableName);\n        if (index > -1) {\n            current.splice(index, 1);\n        }\n        else {\n            current.push(tableName);\n        }\n        reverseTables.value = current;\n    }\n    /**\n     * \n     * @param tableName \n     */\n    function isTableReversed(tableName) {\n        return reverseTables.value.includes(tableName);\n    }\n    /**\n     * \n     * @param page \n     */\n    function setCurrentPage(page) {\n        currentPage.value = Math.max(1, page);\n    }\n    /**\n     * \n     * @param term \n     */\n    function setSearchTerm(term) {\n        searchTerm.value = term.toLowerCase();\n        // \n        currentPage.value = 1;\n    }\n    /**\n     * \n     */\n    const currentSearchTerm = computed(() => searchTerm.value);\n    /**\n     * \n     * @param top \n     */\n    function saveScrollTop(top) {\n        scrollTop.value = top;\n    }\n    /**\n     * \n     */\n    function enterEditingOrder() {\n        isEditingOrder.value = true;\n    }\n    /**\n     * \n     */\n    function exitEditingOrder() {\n        isEditingOrder.value = false;\n    }\n    /**\n     * \n     * @param status \n     */\n    function setEditingOrder(status) {\n        isEditingOrder.value = status;\n    }\n    /**\n     * \n     * @param status \n     */\n    function setMobile(status) {\n        isMobile.value = status;\n    }\n    /**\n     * \n     * @param newLayout \n     */\n    function setLayout(newLayout) {\n        layout.value = newLayout;\n    }\n    /**\n     * \n     */\n    function toggleLayout() {\n        layout.value = layout.value === 'horizontal' ? 'vertical' : 'horizontal';\n    }\n    /**\n     * \n     */\n    const isHorizontalLayout = computed(() => layout.value === 'horizontal');\n    /**\n     *  ()\n     */\n    function closePanel() {\n        isCollapsed.value = true; // \n        isContentHidden.value = false; // \n    }\n    /**\n     * \n     *  Tab\n     */\n    function openPanel() {\n        isContentHidden.value = false;\n        isCollapsed.value = false;\n        //  TabisPanelVisible  activeTab !== null\n        if (activeTab.value === null) {\n            activeTab.value = TAB_DASHBOARD;\n        }\n    }\n    /**\n     * \n     * @param status \n     */\n    function setInitialized(status) {\n        isInitialized.value = status;\n    }\n    /**\n     * \n     * @param position \n     */\n    function saveBallPosition(position) {\n        ballPosition.value = position;\n    }\n    /**\n     * \n     */\n    function getBallPosition() {\n        return ballPosition.value;\n    }\n    /**\n     * \n     *  iframe \n     */\n    function resetBallPosition() {\n        const parentHeight = typeof window !== 'undefined' ? (window.parent?.innerHeight ?? window.innerHeight) : 500;\n        ballPosition.value = {\n            x: 20,\n            y: Math.max(100, parentHeight - 150), // \n        };\n    }\n    /**\n     * \n     * @param force \n     */\n    function autoFitPanelHeight(force = false) {\n        const { $ } = window.jQuery ? { $: window.jQuery } : { $: window.parent.$ };\n        if (!$)\n            return;\n        const $panel = $(window.parent.document).find('#acu-data-area');\n        if (!$panel.length)\n            return;\n        // \n        const currentTab = activeTab.value;\n        if (!force && currentTab && tableHeights.value[currentTab]) {\n            return;\n        }\n        // \n        // \n        // \n        setTimeout(() => {\n            const contentHeight = $panel[0].scrollHeight;\n            const winHeight = $(window.parent).height() || 800;\n            const maxHeight = winHeight - 200;\n            let newHeight = Math.min(contentHeight + 20, maxHeight);\n            if (newHeight < 200)\n                newHeight = 200;\n            $panel.css('height', newHeight + 'px');\n        }, 100);\n    }\n    // ============================================================\n    // Tab  Actions\n    // ============================================================\n    /**\n     *  Tab\n     * @param tabs Tab ID \n     */\n    function setVisibleTabs(tabs) {\n        visibleTabs.value = tabs;\n    }\n    /**\n     *  Tab \n     * @param tabNameOrId Tab  ID Tab  ID TAB_DASHBOARD\n     */\n    function isTabVisible(tabNameOrId) {\n        // \n        if (visibleTabs.value.length === 0)\n            return true;\n        return visibleTabs.value.includes(tabNameOrId);\n    }\n    /**\n     *  Tab \n     * @param tabId Tab ID\n     */\n    function toggleTabVisibility(tabId) {\n        const current = [...visibleTabs.value];\n        const index = current.indexOf(tabId);\n        if (index > -1) {\n            current.splice(index, 1);\n        }\n        else {\n            current.push(tabId);\n        }\n        visibleTabs.value = current;\n    }\n    /**\n     *  Tab \n     */\n    function resetVisibleTabs() {\n        visibleTabs.value = [];\n    }\n    /**\n     *  Tab \n     * @param order Tab ID \n     */\n    function setTabOrder(order) {\n        tabOrder.value = order;\n    }\n    /**\n     *  Tab ID \n     * @param allTabIds  Tab ID \n     * @returns  Tab ID \n     */\n    function getSortedTabIds(allTabIds) {\n        if (!tabOrder.value || tabOrder.value.length === 0) {\n            return allTabIds;\n        }\n        //  tabOrder  tabOrder \n        const orderedIds = tabOrder.value.filter(id => allTabIds.includes(id));\n        const unorderedIds = allTabIds.filter(id => !tabOrder.value.includes(id));\n        return [...orderedIds, ...unorderedIds];\n    }\n    /**\n     *  Tab \n     * @param tabId  Tab ID\n     * @param newIndex \n     * @param allTabIds  Tab ID \n     */\n    function moveTab(tabId, newIndex, allTabIds) {\n        const currentOrder = getSortedTabIds(allTabIds);\n        const currentIndex = currentOrder.indexOf(tabId);\n        if (currentIndex === -1)\n            return;\n        const newOrder = [...currentOrder];\n        newOrder.splice(currentIndex, 1);\n        newOrder.splice(newIndex, 0, tabId);\n        tabOrder.value = newOrder;\n    }\n    /**\n     *  Tab \n     * @param tabId Tab ID\n     */\n    function showTab(tabId) {\n        if (!visibleTabs.value.includes(tabId)) {\n            visibleTabs.value = [...visibleTabs.value, tabId];\n        }\n    }\n    /**\n     *  Tab \n     * @param tabId Tab ID\n     */\n    function hideTab(tabId) {\n        visibleTabs.value = visibleTabs.value.filter(id => id !== tabId);\n    }\n    /**\n     *  Tab \n     */\n    function resetTabConfig() {\n        visibleTabs.value = [];\n        tabOrder.value = [];\n    }\n    // ============================================================\n    //  Actions\n    // ============================================================\n    /**\n     * \n     * @param props \n     */\n    function openRowEditDialog(props) {\n        rowEditDialog.props = { ...props };\n        rowEditDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeRowEditDialog() {\n        rowEditDialog.visible = false;\n    }\n    /**\n     * \n     * @param props \n     */\n    function openWidgetSettingsDialog(props) {\n        widgetSettingsDialog.props = { ...props };\n        widgetSettingsDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeWidgetSettingsDialog() {\n        widgetSettingsDialog.visible = false;\n    }\n    /**\n     * Dashboard \n     * @param props \n     */\n    function openDashboardHistoryDialog(props) {\n        dashboardHistoryDialog.props = { ...props };\n        dashboardHistoryDialog.visible = true;\n    }\n    /**\n     * Dashboard \n     */\n    function closeDashboardHistoryDialog() {\n        dashboardHistoryDialog.visible = false;\n    }\n    /**\n     * \n     */\n    function switchFromRowEditToHistory() {\n        // \n        dashboardHistoryDialog.props = {\n            tableName: rowEditDialog.props.tableName,\n            tableId: rowEditDialog.props.tableId,\n            rowIndex: rowEditDialog.props.rowIndex,\n            currentRowData: rowEditDialog.props.currentRowData,\n            titleColIndex: 0,\n        };\n        // \n        rowEditDialog.visible = false;\n        dashboardHistoryDialog.visible = true;\n    }\n    /**\n     * \n     * @param props \n     * @param callbacks \n     */\n    function openAvatarCropDialog(props, callbacks) {\n        avatarCropDialog.props = {\n            imageUrl: props.imageUrl,\n            name: props.name,\n            initialOffsetX: props.initialOffsetX ?? 50,\n            initialOffsetY: props.initialOffsetY ?? 50,\n            initialScale: props.initialScale ?? 150,\n            initialInvert: props.initialInvert ?? false,\n            showInvertOption: props.showInvertOption ?? false,\n        };\n        avatarCropOnApply.value = callbacks.onApply;\n        avatarCropOnUpload.value = callbacks.onUpload ?? null;\n        avatarCropDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeAvatarCropDialog() {\n        avatarCropDialog.visible = false;\n        // \n        avatarCropOnApply.value = null;\n        avatarCropOnUpload.value = null;\n    }\n    /**\n     * \n     * @param data \n     */\n    function handleAvatarCropApply(data) {\n        if (avatarCropOnApply.value) {\n            avatarCropOnApply.value(data);\n        }\n        closeAvatarCropDialog();\n    }\n    /**\n     * \n     * @param file \n     */\n    function handleAvatarCropUpload(file) {\n        if (avatarCropOnUpload.value) {\n            avatarCropOnUpload.value(file);\n        }\n    }\n    /**\n     * \n     * @param props \n     */\n    function openWidgetActionsDialog(props) {\n        widgetActionsDialog.props = { ...props };\n        widgetActionsDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeWidgetActionsDialog() {\n        widgetActionsDialog.visible = false;\n    }\n    /**\n     * \n     * @param props \n     * @param callbacks \n     */\n    function openAvatarManagerDialog(props, callbacks) {\n        avatarManagerDialog.props = { ...props };\n        avatarManagerOnUpdate.value = callbacks.onUpdate ?? null;\n        avatarManagerOnLabelChange.value = callbacks.onLabelChange ?? null;\n        avatarManagerDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeAvatarManagerDialog() {\n        avatarManagerDialog.visible = false;\n        // \n        avatarManagerOnUpdate.value = null;\n        avatarManagerOnLabelChange.value = null;\n    }\n    /**\n     * \n     */\n    function handleAvatarManagerUpdate() {\n        if (avatarManagerOnUpdate.value) {\n            avatarManagerOnUpdate.value();\n        }\n    }\n    /**\n     * \n     */\n    function handleAvatarManagerLabelChange() {\n        if (avatarManagerOnLabelChange.value) {\n            avatarManagerOnLabelChange.value();\n        }\n    }\n    /**\n     * \n     * @param props \n     * @param callbacks \n     */\n    function openNodeConfigDialog(props, callbacks) {\n        nodeConfigDialog.props = { ...props };\n        nodeConfigOnConfirm.value = callbacks.onConfirm;\n        nodeConfigOnResetToFullName.value = callbacks.onResetToFullName;\n        nodeConfigOnStyleUpdate.value = callbacks.onStyleUpdate ?? null;\n        nodeConfigDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeNodeConfigDialog() {\n        nodeConfigDialog.visible = false;\n        // \n        nodeConfigOnConfirm.value = null;\n        nodeConfigOnResetToFullName.value = null;\n        nodeConfigOnStyleUpdate.value = null;\n    }\n    /**\n     * \n     * @param nodeId  ID\n     * @param displayLabel \n     * @param selectedIndices \n     */\n    function handleNodeConfigConfirm(nodeId, displayLabel, selectedIndices) {\n        if (nodeConfigOnConfirm.value) {\n            nodeConfigOnConfirm.value(nodeId, displayLabel, selectedIndices);\n        }\n        closeNodeConfigDialog();\n    }\n    /**\n     * \n     * @param nodeId  ID\n     * @param fullName \n     */\n    function handleNodeConfigResetToFullName(nodeId, fullName) {\n        if (nodeConfigOnResetToFullName.value) {\n            nodeConfigOnResetToFullName.value(nodeId, fullName);\n        }\n        closeNodeConfigDialog();\n    }\n    /**\n     * \n     * @param nodeId  ID\n     */\n    function handleNodeConfigStyleUpdate(nodeId) {\n        if (nodeConfigOnStyleUpdate.value) {\n            nodeConfigOnStyleUpdate.value(nodeId);\n        }\n    }\n    /**\n     * \n     * @param factions \n     */\n    function openGraphSettingsDialog(factions = []) {\n        graphSettingsDialog.props.factions = factions;\n        graphSettingsDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeGraphSettingsDialog() {\n        graphSettingsDialog.visible = false;\n    }\n    /**\n     * \n     * @param factionId IDID\n     * @param factionName \n     */\n    function openFactionSettingsDialog(factionId, factionName) {\n        factionSettingsDialog.props = {\n            factionId,\n            factionName,\n        };\n        factionSettingsDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeFactionSettingsDialog() {\n        factionSettingsDialog.visible = false;\n    }\n    // ============================================================\n    //  Actions App.vue \n    // ============================================================\n    /**\n     * \n     * @param panel \n     */\n    function openSettingsDialog(panel = 'main') {\n        if (panel !== 'main') {\n            initialSettingsPanel.value = panel;\n        }\n        settingsDialog.value = true;\n    }\n    /**\n     * \n     */\n    function closeSettingsDialog() {\n        settingsDialog.value = false;\n    }\n    /**\n     * \n     */\n    function openDirectorDialog() {\n        directorDialog.value = true;\n    }\n    /**\n     * \n     */\n    function closeDirectorDialog() {\n        directorDialog.value = false;\n    }\n    /**\n     * \n     * @param currentFloor \n     */\n    function openInputFloorDialog(currentFloor = 0) {\n        inputFloorDialog.props.currentFloor = currentFloor;\n        inputFloorDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeInputFloorDialog() {\n        inputFloorDialog.visible = false;\n    }\n    /**\n     * \n     * @param maxFloor \n     */\n    function openPurgeRangeDialog(maxFloor = 0) {\n        purgeRangeDialog.props.maxFloor = maxFloor;\n        purgeRangeDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closePurgeRangeDialog() {\n        purgeRangeDialog.visible = false;\n    }\n    /**\n     * \n     * @param props \n     * @param callbacks \n     * @param initialState \n     */\n    function openAdvancedPurgeDialog(props, callbacks, initialState) {\n        advancedPurgeDialog.props = { ...props };\n        if (initialState) {\n            advancedPurgeDialog.state.selectedTableKeys = [...initialState.selectedTableKeys];\n        }\n        advancedPurgeOnConfirm.value = callbacks.onConfirm;\n        advancedPurgeDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeAdvancedPurgeDialog() {\n        advancedPurgeDialog.visible = false;\n        advancedPurgeOnConfirm.value = null;\n    }\n    /**\n     * \n     * @param result \n     */\n    function handleAdvancedPurgeConfirm(result) {\n        if (advancedPurgeOnConfirm.value) {\n            advancedPurgeOnConfirm.value(result);\n        }\n        closeAdvancedPurgeDialog();\n    }\n    /**\n     * \n     */\n    function openManualUpdateDialog() {\n        manualUpdateDialog.value = true;\n    }\n    /**\n     * \n     */\n    function closeManualUpdateDialog() {\n        manualUpdateDialog.value = false;\n    }\n    /**\n     * DataTable \n     * @param props \n     */\n    function openHistoryDialog(props) {\n        historyDialog.props = { ...props };\n        historyDialog.visible = true;\n    }\n    /**\n     * DataTable \n     */\n    function closeHistoryDialog() {\n        historyDialog.visible = false;\n    }\n    /**\n     *  Tab \n     */\n    function openTabsPopup() {\n        tabsPopup.value = true;\n    }\n    /**\n     *  Tab \n     */\n    function closeTabsPopup() {\n        tabsPopup.value = false;\n    }\n    /**\n     *  Tab \n     */\n    function toggleTabsPopup() {\n        tabsPopup.value = !tabsPopup.value;\n    }\n    /**\n     * \n     * @param props \n     * @param callbacks \n     */\n    function openPresetSaveDialog(props, callbacks) {\n        presetSaveDialog.props = { ...props };\n        presetSaveOnSave.value = callbacks.onSave;\n        presetSaveDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closePresetSaveDialog() {\n        presetSaveDialog.visible = false;\n        presetSaveOnSave.value = null;\n    }\n    /**\n     * \n     * @param name \n     */\n    function handlePresetSave(name) {\n        if (presetSaveOnSave.value) {\n            presetSaveOnSave.value(name);\n        }\n        closePresetSaveDialog();\n    }\n    // ============================================================\n    //  Actions\n    // ============================================================\n    /**\n     * \n     * @param onConfirm \n     */\n    function openAddTableDialog(onConfirm) {\n        addTableOnConfirm.value = onConfirm;\n        addTableDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeAddTableDialog() {\n        addTableDialog.visible = false;\n        addTableOnConfirm.value = null;\n    }\n    /**\n     * \n     * @param tables \n     */\n    function handleAddTableConfirm(tables) {\n        if (addTableOnConfirm.value) {\n            addTableOnConfirm.value(tables);\n        }\n        closeAddTableDialog();\n    }\n    // ============================================================\n    //  Actions\n    // ============================================================\n    /**\n     * \n     * @param props \n     */\n    function openCategorySelectDialog(props) {\n        categorySelectDialog.props = { ...props };\n        categorySelectDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeCategorySelectDialog() {\n        categorySelectDialog.visible = false;\n    }\n    /**\n     * \n     * @param props \n     */\n    function openTagPreEditDialog(props) {\n        tagPreEditDialog.props = { ...props };\n        tagPreEditDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeTagPreEditDialog() {\n        tagPreEditDialog.visible = false;\n    }\n    /**\n     * \n     * @param props \n     * @param onSave \n     */\n    function openTagManagerDialog(props, onSave) {\n        tagManagerDialog.props = { ...props };\n        tagManagerOnSave.value = onSave ?? null;\n        tagManagerDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeTagManagerDialog() {\n        tagManagerDialog.visible = false;\n        tagManagerOnSave.value = null;\n    }\n    /**\n     * \n     * @param displayedTagIds  ID \n     * @param displayedCategoryIds  ID \n     */\n    function handleTagManagerSave(displayedTagIds, displayedCategoryIds) {\n        if (tagManagerOnSave.value) {\n            tagManagerOnSave.value(displayedTagIds, displayedCategoryIds);\n        }\n        closeTagManagerDialog();\n    }\n    // ============================================================\n    //  Actions\n    // ============================================================\n    /**\n     * \n     * @param result \n     * @param isQuickReroll \n     */\n    function openDivinationOverlay(result, isQuickReroll = false) {\n        divinationOverlay.result = result;\n        divinationOverlay.isQuickRerollMode = isQuickReroll;\n        divinationOverlay.visible = true;\n    }\n    /**\n     * \n     */\n    function closeDivinationOverlay() {\n        divinationOverlay.visible = false;\n        divinationOverlay.isQuickRerollMode = false;\n    }\n    /**\n     * \n     * @param prompt \n     */\n    function openPromptEditorDialog(prompt) {\n        promptEditorDialog.props.prompt = prompt;\n        promptEditorDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closePromptEditorDialog() {\n        promptEditorDialog.visible = false;\n    }\n    /**\n     * \n     */\n    async function initDivinationSystem() {\n        const divinationStore = useDivinationStore();\n        if (!divinationStore.isLoaded) {\n            divinationStore.loadConfig();\n            await divinationStore.loadFromWorldbook();\n        }\n    }\n    // ============================================================\n    // AI \n    // ============================================================\n    const aiNotifySignal = ref(0);\n    const isAiGenerating = ref(false);\n    /**\n     *  AI \n     */\n    function triggerAiNotify() {\n        aiNotifySignal.value++;\n        isAiGenerating.value = false; // \n    }\n    /**\n     *  AI \n     */\n    function setAiGenerating(status) {\n        isAiGenerating.value = status;\n    }\n    /**\n     * \n     *  visibleTabs \n     * visibleTabs  (name) sheetId name \n     * @param allTableNames \n     * @returns \n     */\n    function syncNewTablesToVisibleTabs(allTableNames) {\n        //  visibleTabs \n        if (visibleTabs.value.length === 0) {\n            return [];\n        }\n        //  visibleTabs \n        const newTabNames = allTableNames.filter(name => !visibleTabs.value.includes(name));\n        // \n        if (newTabNames.length > 0) {\n            visibleTabs.value = [...visibleTabs.value, ...newTabNames];\n            console.info(`[ACU]  ${newTabNames.length} :`, newTabNames);\n        }\n        return newTabNames;\n    }\n    // ============================================================\n    //  Actions\n    // ============================================================\n    /**\n     * \n     * ( updateSaveBtnState)\n     */\n    function updateSaveBtnState() {\n        const { $ } = window.jQuery ? { $: window.jQuery } : { $: window.parent.$ };\n        if (!$)\n            return;\n        const dataStore = useDataStore();\n        const hasChanges = dataStore.hasUnsavedChanges;\n        const $btn = $(window.parent.document).find('#acu-btn-save-global');\n        if ($btn.length) {\n            if (hasChanges) {\n                $btn.addClass('acu-has-changes');\n                $btn.find('i').addClass('fa-beat-fade');\n                $btn.css('color', '#e67e22');\n            }\n            else {\n                $btn.removeClass('acu-has-changes');\n                $btn.find('i').removeClass('fa-beat-fade');\n                $btn.css('color', '');\n            }\n        }\n    }\n    return {\n        // \n        isCollapsed,\n        isPinned,\n        activeTab,\n        tableOrder,\n        tableHeights,\n        tableStyles,\n        reverseTables,\n        ballPosition,\n        layout,\n        visibleTabs,\n        // \n        currentPage,\n        searchTerm,\n        currentSearchTerm,\n        scrollTop,\n        isEditingOrder,\n        isInitialized,\n        isContentHidden,\n        isMobile,\n        isLockEditMode,\n        showLockedOnly,\n        initialSettingsPanel,\n        // Getters\n        isPanelVisible,\n        isDashboardActive,\n        isOptionsActive,\n        reverseOrderTables: reverseTables,\n        isHorizontalLayout,\n        // Actions\n        toggleCollapse,\n        togglePin,\n        setActiveTab,\n        setTableOrder,\n        setTableHeight,\n        resetTableHeight,\n        getTableHeight,\n        setTableStyle,\n        getTableStyle,\n        toggleTableReverse,\n        isTableReversed,\n        setCurrentPage,\n        setSearchTerm,\n        saveScrollTop,\n        enterEditingOrder,\n        exitEditingOrder,\n        setEditingOrder,\n        setMobile,\n        setLayout,\n        toggleLayout,\n        closePanel,\n        openPanel,\n        setInitialized,\n        updateSaveBtnState,\n        autoFitPanelHeight,\n        saveBallPosition,\n        getBallPosition,\n        resetBallPosition,\n        // Tab \n        setVisibleTabs,\n        isTabVisible,\n        toggleTabVisibility,\n        resetVisibleTabs,\n        tabOrder,\n        setTabOrder,\n        getSortedTabIds,\n        moveTab,\n        showTab,\n        hideTab,\n        resetTabConfig,\n        syncNewTablesToVisibleTabs,\n        // \n        rowEditDialog,\n        widgetSettingsDialog,\n        dashboardHistoryDialog,\n        avatarCropDialog,\n        widgetActionsDialog,\n        avatarManagerDialog,\n        nodeConfigDialog,\n        nodeLabelDialog,\n        graphSettingsDialog,\n        factionSettingsDialog,\n        //  App.vue \n        settingsDialog,\n        directorDialog,\n        inputFloorDialog,\n        purgeRangeDialog,\n        advancedPurgeDialog,\n        manualUpdateDialog,\n        historyDialog,\n        tabsPopup,\n        presetSaveDialog,\n        //  Actions\n        openRowEditDialog,\n        closeRowEditDialog,\n        openWidgetSettingsDialog,\n        closeWidgetSettingsDialog,\n        openDashboardHistoryDialog,\n        closeDashboardHistoryDialog,\n        switchFromRowEditToHistory,\n        openAvatarCropDialog,\n        closeAvatarCropDialog,\n        handleAvatarCropApply,\n        handleAvatarCropUpload,\n        openWidgetActionsDialog,\n        closeWidgetActionsDialog,\n        openAvatarManagerDialog,\n        closeAvatarManagerDialog,\n        handleAvatarManagerUpdate,\n        handleAvatarManagerLabelChange,\n        openNodeConfigDialog,\n        closeNodeConfigDialog,\n        handleNodeConfigConfirm,\n        handleNodeConfigResetToFullName,\n        handleNodeConfigStyleUpdate,\n        openNodeLabelDialog,\n        closeNodeLabelDialog,\n        handleNodeLabelApply,\n        handleNodeLabelReset,\n        openGraphSettingsDialog,\n        closeGraphSettingsDialog,\n        openFactionSettingsDialog,\n        closeFactionSettingsDialog,\n        //  Actions App.vue \n        openSettingsDialog,\n        closeSettingsDialog,\n        openDirectorDialog,\n        closeDirectorDialog,\n        openInputFloorDialog,\n        closeInputFloorDialog,\n        openPurgeRangeDialog,\n        closePurgeRangeDialog,\n        openAdvancedPurgeDialog,\n        closeAdvancedPurgeDialog,\n        handleAdvancedPurgeConfirm,\n        openManualUpdateDialog,\n        closeManualUpdateDialog,\n        openHistoryDialog,\n        closeHistoryDialog,\n        openTabsPopup,\n        closeTabsPopup,\n        toggleTabsPopup,\n        openPresetSaveDialog,\n        closePresetSaveDialog,\n        handlePresetSave,\n        // \n        addTableDialog,\n        openAddTableDialog,\n        closeAddTableDialog,\n        handleAddTableConfirm,\n        // \n        categorySelectDialog,\n        tagPreEditDialog,\n        tagManagerDialog,\n        openCategorySelectDialog,\n        closeCategorySelectDialog,\n        openTagPreEditDialog,\n        closeTagPreEditDialog,\n        openTagManagerDialog,\n        closeTagManagerDialog,\n        handleTagManagerSave,\n        // \n        iconSelectDialog,\n        openIconSelectDialog,\n        closeIconSelectDialog,\n        handleIconSelect,\n        // \n        divinationOverlay,\n        openDivinationOverlay,\n        closeDivinationOverlay,\n        // \n        promptEditorDialog,\n        openPromptEditorDialog,\n        closePromptEditorDialog,\n        // \n        initDivinationSystem,\n        // \n        openDivinationSettingsDialog: () => {\n            openSettingsDialog('divination');\n        },\n        // AI \n        aiNotifySignal: computed(() => aiNotifySignal.value),\n        triggerAiNotify,\n        isAiGenerating: computed(() => isAiGenerating.value),\n        setAiGenerating,\n        // \n        tagPreviewMode,\n        tagPreviewTooltip,\n        toggleTagPreviewMode: () => {\n            tagPreviewMode.value = !tagPreviewMode.value;\n            // \n            tagPreviewTooltip.visible = false;\n        },\n        showTagPreviewTooltip: (content, x, y) => {\n            tagPreviewTooltip.content = content;\n            tagPreviewTooltip.x = x;\n            tagPreviewTooltip.y = y;\n            tagPreviewTooltip.visible = true;\n        },\n        hideTagPreviewTooltip: () => {\n            tagPreviewTooltip.visible = false;\n        },\n    };\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * ACU Visualizer \n */\n\n// ============================================================\n// \n// ============================================================\n\n/**  - AI */\nexport type ChangeType = 'manual' | 'ai' | null;\n\nexport interface ACUConfig {\n  /**  ID */\n  theme: string;\n  /**  ID */\n  fontFamily: string;\n  /**  */\n  cardWidth: number;\n  /**  */\n  fontSize: number;\n  /**  */\n  itemsPerPage: number;\n  /**  */\n  highlightNew: boolean;\n  /**  key () */\n  highlightColor: string;\n  /**  key */\n  highlightManualColor: string;\n  /** AI key */\n  highlightAiColor: string;\n  /**  */\n  customTitleColor: boolean;\n  /**  key */\n  titleColor: string;\n  /**  (hex) */\n  customHighlightManualHex?: string;\n  /**  AI  (hex) */\n  customHighlightAiHex?: string;\n  /**  (hex) */\n  customTitleHex?: string;\n  /**  */\n  layout: 'vertical' | 'horizontal';\n  /**  */\n  limitLongText: boolean;\n  /**  */\n  showDashboard: boolean;\n  /**  */\n  showPagination: boolean;\n  /**  */\n  lockPanel: boolean;\n  /**  */\n  purgeConfirmation: boolean;\n  /**  (0 ) */\n  gridColumns: number;\n  /**  */\n  autoSave?: boolean;\n  /**  () */\n  autoSaveDelay?: number;\n  /**  ID  */\n  visibleButtons: string[];\n  /**  */\n  buttonOrder: string[];\n  /**  */\n  buttonGroups: ButtonGroup[];\n  /**  */\n  longPressDirectExec: boolean;\n  /** Swipe  */\n  clearTableOnSwipe?: boolean;\n  /** TabTab */\n  collapseTabBar?: boolean;\n  /** TabTab */\n  showCollapseTabButton?: boolean;\n  /**  (0-150px0) */\n  mobileSafeAreaBottom?: number;\n  /**  */\n  autoImportInteractions?: boolean;\n  /** iOS  16px  */\n  enableIOSInputFix?: boolean;\n}\n\n/**  */\nexport interface NavButtonConfig {\n  /**  ID */\n  id: string;\n  /**  class (FontAwesome) */\n  icon: string;\n  /**  */\n  label: string;\n  /**  () */\n  hidden?: boolean;\n}\n\n/**\n * \n * \n */\nexport interface ButtonGroup {\n  /**  ID */\n  primaryId: string;\n  /**  ID */\n  secondaryId: string | null;\n}\n\n/**\n * Tab  Tab \n */\nexport interface TabConfigEntry {\n  /** Tab ID */\n  id: string;\n  /** Tab  */\n  name: string;\n  /** Tab  () */\n  icon?: string;\n  /** Tab  */\n  type: 'normal' | 'dashboard' | 'options' | 'special';\n  /**  */\n  visible: boolean;\n  /**  */\n  order: number;\n}\n\n/** Tab  */\nexport interface TabConfigItem {\n  /** Tab ID */\n  id: string;\n  /** Tab  */\n  name: string;\n  /** Tab  */\n  icon: string;\n  /**  */\n  visible: boolean;\n  /**  */\n  order: number;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport interface RawDatabaseData {\n  [sheetId: string]: {\n    name?: string;\n    content?: (string | number)[][];\n  };\n}\n\n/**  */\nexport interface TableRow {\n  /**  */\n  index: number;\n  /**  */\n  key: string;\n  /**  */\n  cells: TableCell[];\n  /**  */\n  changed?: boolean;\n  /**  */\n  deleting?: boolean;\n}\n\n/**  */\nexport interface TableCell {\n  /**  */\n  colIndex: number;\n  /** / */\n  key: string;\n  /**  */\n  value: any;\n  /**  */\n  changed?: boolean;\n}\n\n/**  */\nexport interface ProcessedTable {\n  /**  ID */\n  id: string;\n  /**  */\n  name: string;\n  /**  */\n  headers: string[];\n  /**  */\n  rows: TableRow[];\n}\n\n// ============================================================\n// UI \n// ============================================================\n\n/**  */\nexport interface BallPosition {\n  x: number;\n  y: number;\n}\n\n/**  */\nexport interface WindowConfig {\n  /**  */\n  width?: number;\n  /**  */\n  left?: string | number;\n  /**  */\n  bottom?: string | number;\n  /**  */\n  isCentered?: boolean;\n}\n\n/** Tab  */\nexport interface TabItem {\n  /** Tab ID */\n  id: string;\n  /** Tab  */\n  name: string;\n  /** Tab  */\n  icon?: string;\n  /**  Tab (/) */\n  special?: boolean;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport interface CellClickEvent {\n  tableId: string;\n  rowIndex: number;\n  colIndex: number;\n  value: string | number;\n}\n\n/** Tab  */\nexport interface TabChangeEvent {\n  tabId: string;\n  previousTabId: string | null;\n}\n\n// ============================================================\n// /\n// ============================================================\n\n/**  */\nexport interface ThemeConfig {\n  id: string;\n  name: string;\n  icon: string;\n}\n\n/**  */\nexport interface FontConfig {\n  id: string;\n  name: string;\n  val: string;\n}\n\n/**  */\nexport interface HighlightColor {\n  main: string;\n  bg: string;\n  name: string;\n}\n\n// ============================================================\n//  - Vue \n// ============================================================\n\n/**  ( Vue ) */\nexport interface CellData {\n  /** / */\n  key: string;\n  /**  */\n  value: string;\n}\n\n/**  ( Vue ) */\nexport interface RowData {\n  /**  */\n  index: number;\n  /**  */\n  cells: CellData[];\n}\n\n/**  (tableId -> ) */\nexport type TableData = Record<string, RowData[]>;\n\n/**  */\nexport interface FloorInfo {\n  /**  */\n  index: number;\n  /**  */\n  isAuto: boolean;\n  /**  */\n  reason: string;\n}\n\n/**  () */\nexport interface IsolatedDataEntry {\n  /**  */\n  independentData: Record<string, RawDatabaseData[string]>;\n  /**  */\n  modifiedKeys: string[];\n  /**  */\n  updateGroupKeys: string[];\n}\n\n/**  ACU  */\nexport interface MessageACUData {\n  /**  () */\n  TavernDB_ACU_IsolatedData?: Record<string, IsolatedDataEntry>;\n}\n\n/** SillyTavern  */\nexport interface STChatMessage extends MessageACUData {\n  /**  */\n  is_user?: boolean;\n  /**  */\n  mes?: string;\n  /**  */\n  [key: string]: unknown;\n}\n\n/**  */\nexport interface SaveResult {\n  /**  */\n  success: boolean;\n  /**  (-1 ) */\n  savedToFloor: number;\n  /**  */\n  error?: string;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport type FloatingBallAnimation = 'ripple' | 'arc';\n\n/**  */\nexport type FloatingBallIconType = 'icon' | 'emoji' | 'image';\n\n/**\n * \n * \n */\nexport interface FloatingBallAppearance {\n  /** : FontAwesome / Emoji /  */\n  type: FloatingBallIconType;\n  /**\n   * :\n   * - type='icon': FA class ( 'fa-layer-group')\n   * - type='emoji': Emoji ( '')\n   * - type='image': Base64 \n   */\n  content: string;\n  /**  (40-100px) */\n  size: number;\n  /** AI */\n  notifyAnimation: FloatingBallAnimation;\n  /**  (hex  '#90cdf4') */\n  borderColor: string;\n  /**  (0-100) */\n  borderOpacity: number;\n  /**  (hex  '#2b2b2b') */\n  bgColor: string;\n  /**  (0-100) */\n  bgOpacity: number;\n  /**  X  (0-100) type='image'  */\n  imageOffsetX?: number;\n  /**  Y  (0-100) type='image'  */\n  imageOffsetY?: number;\n  /**  (100-300) type='image'  */\n  imageScale?: number;\n  /**  type='image'  */\n  imageInvert?: boolean;\n  /**  */\n  enableNotifyAnimation?: boolean;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n * \n */\nexport interface CustomFont {\n  /**  ID () */\n  id: string;\n  /**  */\n  name: string;\n  /** font-family  ( '\"Noto Sans SC\", sans-serif') */\n  fontFamily: string;\n  /** @import URL ( Google Fonts ),  */\n  importUrl?: string;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * ACU \n *  getVariables({type: 'script', script_id}) \n */\nexport interface ACUScriptVariables {\n  /**  () */\n  configVersion?: number;\n  /**  */\n  ballAppearance?: FloatingBallAppearance;\n  /**  */\n  customFonts?: CustomFont[];\n  /**\n   *  (: , : Base64)\n   * \n   */\n  images?: Record<string, string>;\n  /**\n   * \n   */\n  themePresets?: ThemePreset[];\n  /**\n   *  ID ()\n   */\n  activePresetId?: string;\n  /**\n   * \n   */\n  themeVars?: Partial<ThemeVariables>;\n  /**\n   *  (0-100)\n   */\n  themeVarOpacities?: ThemeVarOpacities;\n  /**\n   * \n   */\n  backgroundConfig?: BackgroundConfig;\n  /**\n   *  CSS\n   */\n  customCSS?: string;\n  /**\n   * \n   */\n  divinationConfig?: DivinationConfig;\n  /**\n   * \n   */\n  divinationPresets?: DivinationPreset[];\n  /**\n   *  ID\n   */\n  activeDivinationPresetId?: string;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n */\nexport interface DivinationPreset {\n  /**  ID */\n  id: string;\n  /**  */\n  name: string;\n  /**  */\n  createdAt: string;\n  /**  */\n  dimensions: Dimension[];\n  /**  () */\n  isBuiltin?: boolean;\n}\n\nexport type BiasType = 'positive' | 'neutral' | 'negative';\n\nexport interface DivinationCategory {\n  id: number; //  Worldbook Entry uid\n  name: string; //  ()\n  bias: BiasType; // \n  limit: number; // \n  path: string[]; //  (Keys + Name)\n  words: string[]; // \n  enabled: boolean; // \n  rawEntry: any; // \n}\n\nexport interface DimensionTier {\n  id: string; // \n  name: string;\n  weight: number;\n  prompt: string;\n  color?: string; //  ()\n}\n\nexport interface Dimension {\n  id: string;\n  name: string;\n  enabled: boolean;\n  tiers: DimensionTier[];\n}\n\nexport interface DivinationConfig {\n  // \n  enabled: boolean; //  true\n  drawCount: number; //  () 4\n  enableBias: boolean; //  true\n  autoSync: boolean; //  ACU  true\n\n  // \n  cardBackImage: string; //  URL\n  themeColor: string; // \n  /**  ID ( 'wafuku', 'mystic') */\n  themeId: string;\n\n  // \n  flipMode: 'auto' | 'manual' | 'skip'; // \n  peepMode?: boolean; // \n\n  //  ( id='luck')\n  dimensions: Dimension[];\n\n  // \n  customTemplate: string; // \n\n  // \n  /** @deprecated  enableTableWords */\n  enableWordDrawing: boolean;\n  /**  ( enableWordDrawing) */\n  enableTableWords: boolean;\n  /**  */\n  enableWordPool: boolean;\n\n  /** : 'perItem'x | 'custom'limit | 'mixed' */\n  wordDrawMode: 'perItem' | 'custom' | 'mixed';\n\n  /** perItem1-10 */\n  wordsPerItem: number;\n\n  /**\n   * @deprecated  tablePoolConfig \n   * \n   */\n  tableColumnConfig?: Record<\n    string,\n    {\n      enabled: boolean;\n      limit: number; // 0 \n    }\n  >;\n\n  /**\n   * ID\n   * key = ID sheet_ \n   */\n  tablePoolConfig: Record<\n    string,\n    {\n      enabled: boolean;\n      limit: number; // 0 \n    }\n  >;\n\n  /** limit */\n  categoryConfig: Record<\n    string,\n    {\n      enabled: boolean;\n      limit: number;\n    }\n  >;\n\n  /**\n   * \n   * key =  ID\n   * value = \n   */\n  tableSyncConfig?: Record<string, boolean>;\n}\n\nexport interface DivinationResult {\n  luck: LuckTier;\n  dimensions: { name: string; value: string; prompt: string }[];\n  words: string[];\n  timestamp?: number;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport interface BackgroundConfig {\n  /**  */\n  enabled: boolean;\n  /**  IndexedDB  URL  */\n  hasIndexedDBImage: boolean;\n  /**  URLhttp/https-  IndexedDB */\n  externalUrl?: string;\n  /**\n   *  URLblob URL  externalUrl\n   * \n   */\n  imageUrl: string;\n  /**  0-100 */\n  opacity: number;\n  /**  */\n  size: 'cover' | 'contain' | 'auto';\n  /**  0-20px */\n  blur: number;\n  /**  (-50 ~ 50) */\n  offsetX: number;\n  /**  (-50 ~ 50) */\n  offsetY: number;\n  /**  (50 ~ 200) */\n  scale: number;\n}\n\n/**  */\nexport const DEFAULT_BACKGROUND_CONFIG: BackgroundConfig = {\n  enabled: false,\n  hasIndexedDBImage: false,\n  externalUrl: undefined,\n  imageUrl: '',\n  opacity: 30,\n  size: 'cover',\n  blur: 0,\n  offsetX: 0,\n  offsetY: 0,\n  scale: 100,\n};\n\n/**\n *  CSS \n *  variables.scss  18 \n */\nexport interface ThemeVariables {\n  //  (9)\n  /**  */\n  bgNav?: string;\n  /**  */\n  bgPanel?: string;\n  /**  */\n  cardBg?: string;\n  /**  */\n  tableHead?: string;\n  /**  */\n  tableHover?: string;\n  /**  */\n  badgeBg?: string;\n  /**  */\n  inputBg?: string;\n  /**  */\n  menuBg?: string;\n  /**  */\n  overlayBg?: string;\n\n  //  (3)\n  /**  */\n  textMain?: string;\n  /**  */\n  textSub?: string;\n  /**  */\n  menuText?: string;\n\n  //  (5)\n  /**  */\n  border?: string;\n  /**  */\n  btnBg?: string;\n  /**  */\n  btnHover?: string;\n  /**  */\n  btnActiveBg?: string;\n  /**  */\n  btnActiveText?: string;\n\n  //  (1)\n  /**  */\n  shadow?: string;\n}\n\n/**\n * \n */\nexport interface HighlightConfig {\n  /**  key ( ID) */\n  manualColor: string;\n  /**  (hex) */\n  manualHex?: string;\n  /** AI  key ( ID) */\n  aiColor: string;\n  /**  AI  (hex) */\n  aiHex?: string;\n  /**  key ( ID) */\n  titleColor: string;\n  /**  (hex) */\n  titleHex?: string;\n}\n\n/**\n *  (0-100100=)\n */\nexport type ThemeVarOpacities = Partial<Record<keyof ThemeVariables, number>>;\n\n/**\n * \n * +\n */\nexport interface ThemePreset {\n  /**  ID */\n  id: string;\n  /**  */\n  name: string;\n  /**  (ISO ) */\n  createdAt: string;\n  /**  ID ( 'retro', 'dark', 'modern' ) */\n  baseTheme: string;\n  /**\n   *  ( CSS )\n   * \n   */\n  themeVars?: Partial<ThemeVariables>;\n  /**  */\n  themeVarOpacities?: ThemeVarOpacities;\n  /**  */\n  highlight: HighlightConfig;\n  /**  */\n  backgroundConfig?: BackgroundConfig;\n  /**  CSS  */\n  customCSS?: string;\n  /**  */\n  ballAppearance?: FloatingBallAppearance;\n}\n\n/**\n * CSS \n *  ThemeVariables  CSS \n */\nexport const THEME_VAR_CSS_MAP: Record<keyof ThemeVariables, string> = {\n  bgNav: '--acu-bg-nav',\n  bgPanel: '--acu-bg-panel',\n  cardBg: '--acu-card-bg',\n  tableHead: '--acu-table-head',\n  tableHover: '--acu-table-hover',\n  badgeBg: '--acu-badge-bg',\n  inputBg: '--acu-input-bg',\n  menuBg: '--acu-menu-bg',\n  overlayBg: '--acu-overlay-bg',\n  textMain: '--acu-text-main',\n  textSub: '--acu-text-sub',\n  menuText: '--acu-menu-text',\n  border: '--acu-border',\n  btnBg: '--acu-btn-bg',\n  btnHover: '--acu-btn-hover',\n  btnActiveBg: '--acu-btn-active-bg',\n  btnActiveText: '--acu-btn-active-text',\n  shadow: '--acu-shadow',\n};\n\n/**\n * \n *  UI  18 \n */\nexport const THEME_VAR_GROUPS: Array<{\n  id: string;\n  name: string;\n  icon: string;\n  vars: Array<{ key: keyof ThemeVariables; label: string }>;\n}> = [\n  {\n    id: 'background',\n    name: '',\n    icon: 'fa-fill-drip',\n    vars: [\n      { key: 'bgNav', label: '' },\n      { key: 'bgPanel', label: '' },\n      { key: 'cardBg', label: '' },\n      { key: 'tableHead', label: '' },\n      { key: 'tableHover', label: '' },\n      { key: 'badgeBg', label: '' },\n      { key: 'inputBg', label: '' },\n      { key: 'menuBg', label: '' },\n      { key: 'overlayBg', label: '' },\n    ],\n  },\n  {\n    id: 'text',\n    name: '',\n    icon: 'fa-font',\n    vars: [\n      { key: 'textMain', label: '' },\n      { key: 'textSub', label: '' },\n      { key: 'menuText', label: '' },\n    ],\n  },\n  {\n    id: 'button',\n    name: '',\n    icon: 'fa-square',\n    vars: [\n      { key: 'border', label: '' },\n      { key: 'btnBg', label: '' },\n      { key: 'btnHover', label: '' },\n      { key: 'btnActiveBg', label: '' },\n      { key: 'btnActiveText', label: '' },\n    ],\n  },\n  {\n    id: 'effect',\n    name: '',\n    icon: 'fa-magic',\n    vars: [{ key: 'shadow', label: '' }],\n  },\n];\n\n// ============================================================\n// \n// ============================================================\n\n/**  ID  */\nexport type WidgetActionId =\n  | 'goToTable' // \n  | 'clear' // \n  | 'undo' // \n  | 'manualUpdate' // \n  | 'relationshipGraph' // \n  | 'settings' // \n  | 'nativeEdit' // \n  | 'divination' // \n  | 'console' // \n  | 'quickReroll'; // \n\n/**  */\nexport interface WidgetAction {\n  id: WidgetActionId;\n  icon: string; // FA  class\n  secondaryIcon?: string; // \n  label: string; // \n  tooltip?: string; // \n}\n\n/**  */\nexport type WidgetDisplayStyle = 'grid' | 'list' | 'global' | 'interaction';\n\n/**  */\nexport const DISPLAY_STYLE_OPTIONS: Array<{ value: WidgetDisplayStyle; label: string }> = [\n  { value: 'list', label: '' },\n  { value: 'grid', label: '' },\n  { value: 'global', label: '' },\n  { value: 'interaction', label: '' },\n];\n\n/**  */\nexport interface TagDefinition {\n  /**  ID */\n  id: string;\n  /**  */\n  label: string;\n  /** : {{value}}, {{rowTitle}}, {{playerName}}, {{tableName}} */\n  promptTemplate: string;\n  /**  */\n  isFixed: boolean;\n}\n\n/**  */\nexport interface InteractiveTagConfig {\n  /**  */\n  sourceColumns: string[];\n  /**  */\n  tagDefinitions: TagDefinition[];\n}\n\n/**  */\nexport interface DashboardWidgetConfig {\n  /**  ID */\n  id: string;\n  /**  */\n  type: 'table' | 'stats' | 'custom' | 'updateStatus' | 'optionsPanel' | 'randomWordPool';\n  /**  ID (type='table' ) */\n  tableId?: string;\n  /**  */\n  title: string;\n  /**  (FA class) */\n  icon: string;\n  /**  (=) */\n  displayColumns: string[];\n  /**  */\n  maxRows: number;\n  /**  */\n  actions: WidgetActionId[];\n  /**  */\n  order: number;\n  /**  */\n  enabled: boolean;\n  /**  (1=, 2=) */\n  colSpan: 1 | 2;\n  /**  */\n  displayStyle: WidgetDisplayStyle;\n  /** = */\n  titleColumn?: string;\n  /**  */\n  displayTagColumns?: string[];\n  /**  */\n  interactiveTagConfig?: InteractiveTagConfig;\n  /**  */\n  widgetTagConfig?: WidgetTagConfig;\n}\n\n/**  */\nexport interface DashboardConfig {\n  /**  */\n  widgets: DashboardWidgetConfig[];\n  /**  */\n  layout: 'grid' | 'list';\n  /**  (grid ) */\n  columns: number;\n  /**  */\n  showStats: boolean;\n  /**  */\n  hasInitializedDefaults?: boolean;\n  /**  */\n  configVersion?: number;\n}\n\n/**  */\nexport const WIDGET_ACTIONS: Record<WidgetActionId, WidgetAction> = {\n  goToTable: { id: 'goToTable', icon: 'fa-external-link-alt', label: '', tooltip: '' },\n  clear: { id: 'clear', icon: 'fa-eraser', label: '', tooltip: '' },\n  undo: { id: 'undo', icon: 'fa-undo', label: '', tooltip: '' },\n  manualUpdate: { id: 'manualUpdate', icon: 'fa-hand-sparkles', label: '', tooltip: '' },\n  relationshipGraph: {\n    id: 'relationshipGraph',\n    icon: 'fa-project-diagram',\n    label: '',\n    tooltip: '',\n  },\n  settings: { id: 'settings', icon: 'fa-cog', label: '', tooltip: '' },\n  nativeEdit: { id: 'nativeEdit', icon: 'fa-external-link-alt', label: '', tooltip: '' },\n  divination: { id: 'divination', icon: 'fa-dice', label: '', tooltip: ' - ' },\n  console: { id: 'console', icon: 'fa-solid fa-clapperboard', label: '', tooltip: '' },\n  quickReroll: {\n    id: 'quickReroll',\n    icon: 'fa-dice',\n    secondaryIcon: 'fa-redo-alt',\n    label: '',\n    tooltip: '',\n  },\n};\n\n/**  -  */\nexport const WIDGET_TEMPLATES: Record<string, Partial<DashboardWidgetConfig>> = {\n  task: {\n    type: 'table',\n    title: '',\n    icon: 'fa-tasks',\n    displayColumns: ['', '', 'name', 'Name', '', ''],\n    maxRows: 5,\n    actions: ['goToTable'],\n    colSpan: 1,\n    displayStyle: 'list',\n    widgetTagConfig: {\n      displayedTagIds: [],\n      displayedCategoryIds: ['cat_quest'],\n    },\n  },\n  item: {\n    type: 'table',\n    title: '',\n    icon: 'fa-box-open',\n    displayColumns: ['', '', 'name', 'Name', ''],\n    maxRows: 12,\n    actions: ['goToTable'],\n    colSpan: 1,\n    displayStyle: 'grid',\n    widgetTagConfig: {\n      displayedTagIds: [],\n      displayedCategoryIds: ['cat_item'],\n    },\n  },\n  character: {\n    type: 'table',\n    title: '',\n    icon: 'fa-user',\n    displayColumns: [],\n    maxRows: 1,\n    actions: ['goToTable'],\n    colSpan: 2,\n    displayStyle: 'list',\n    widgetTagConfig: {\n      displayedTagIds: [],\n      displayedCategoryIds: ['cat_character'],\n    },\n  },\n  location: {\n    type: 'table',\n    title: '',\n    icon: 'fa-map-marker-alt',\n    displayColumns: ['', '', 'name', 'Name', ''],\n    maxRows: 5,\n    actions: ['goToTable'],\n    colSpan: 1,\n    displayStyle: 'list',\n    widgetTagConfig: {\n      displayedTagIds: [],\n      displayedCategoryIds: ['cat_location'],\n    },\n  },\n  global: {\n    type: 'table',\n    title: '',\n    icon: 'fa-globe',\n    displayColumns: ['', ''],\n    maxRows: 1,\n    actions: ['goToTable'],\n    colSpan: 2,\n    displayStyle: 'global',\n  },\n};\n\n/**  */\nexport const TABLE_KEYWORD_RULES: Record<string, string[]> = {\n  task: ['', 'Task', 'task', 'Quest', 'quest', ''],\n  item: ['', '', 'Item', 'item', '', '', '', ''],\n  character: ['', '', 'Player', 'player', 'protagonist', '', '', 'NPC', 'npc'],\n  location: ['', '', 'Location', 'location', ''],\n  global: ['', 'Global'],\n};\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport interface TagCategory {\n  /**  ID */\n  id: string;\n  /**  /  \"/\" */\n  path: string;\n  /**  \"\" */\n  icon?: string;\n  /**  */\n  createdAt: string;\n}\n\n/**  */\nexport interface ParsedCategory {\n  /**  */\n  category: TagCategory;\n  /**  */\n  level1: string;\n  /**  */\n  level2: string;\n  /**  */\n  rest: string;\n}\n\n/**  -  */\nexport interface InteractiveTag {\n  /**  ID */\n  id: string;\n  /**  */\n  label: string;\n  /**  ID */\n  categoryId: string;\n  /**  */\n  promptTemplate: string;\n  /**  */\n  createdAt: string;\n  /** true  */\n  allowPreEdit?: boolean;\n}\n\n/**  */\nexport interface GlobalTagLibrary {\n  /**  */\n  categories: TagCategory[];\n  /**  */\n  tags: InteractiveTag[];\n}\n\n/**  */\nexport interface WidgetTagConfig {\n  /**  ID  */\n  displayedTagIds: string[];\n  /**  ID  */\n  displayedCategoryIds?: string[];\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport type TagManagerMode =\n  | 'normal' // \n  | 'create' // \n  | 'add' // \n  | 'delete' // \n  | 'migrate' // \n  | 'export'; // \n\n/**  */\nexport interface TagLibraryExport {\n  /**  */\n  version: '1.0';\n  /**  */\n  exportedAt: string;\n  /**  */\n  categories: Array<{\n    id: string;\n    path: string;\n    icon?: string;\n  }>;\n  /**  */\n  tags: Array<{\n    id: string;\n    label: string;\n    /**  ID */\n    category: string;\n    prompt: string;\n    allowPreEdit?: boolean;\n  }>;\n}\n\n/**  */\nexport interface ImportOptions {\n  /**  */\n  conflictStrategy: 'overwrite' | 'rename';\n}\n\n/**  */\nexport interface ImportResult {\n  /**  */\n  success: boolean;\n  /**  */\n  addedCategories: number;\n  /**  */\n  addedTags: number;\n  /**  */\n  updatedTags: number;\n  /**  */\n  renamedTags: number;\n  /**  */\n  error?: string;\n}\n\n// ============================================================\n//  API \n// ============================================================\n\nexport interface AutoCardUpdaterAPI {\n  // \n  exportTableAsJson?: () => RawDatabaseData;\n\n  //  API\n  getTableLockState?(sheetKey: string): {\n    rows: number[];\n    cols: number[];\n    cells: string[];\n  } | null;\n\n  setTableLockState?(\n    sheetKey: string,\n    lockState: { rows?: number[]; cols?: number[]; cells?: (string | [number, number])[] },\n    options?: { merge?: boolean },\n  ): boolean;\n\n  clearTableLocks?(sheetKey: string): boolean;\n  lockTableRow?(sheetKey: string, rowIndex: number, locked?: boolean): boolean;\n  lockTableCell?(sheetKey: string, rowIndex: number, colIndex: number, locked?: boolean): boolean;\n  toggleTableRowLock?(sheetKey: string, rowIndex: number): boolean;\n  toggleTableCellLock?(sheetKey: string, rowIndex: number, colIndex: number): boolean;\n\n  // \n  getTemplatePresetNames: () => string[];\n  switchTemplatePreset: (name: string) => Promise<{ success: boolean; message: string }>;\n  importTemplateFromData: (data: string | object) => Promise<{ success: boolean; message: string }>;\n\n  // \n  getPlotPresetNames: () => string[];\n  getCurrentPlotPreset: () => string;\n  switchPlotPreset: (name: string) => boolean;\n  importPlotPresetFromData: (\n    data: string | object,\n    options?: { overwrite?: boolean; switchTo?: boolean },\n  ) => Promise<{ success: boolean; message: string; presetName?: string }>;\n}\n\ndeclare global {\n  interface Window {\n    AutoCardUpdaterAPI?: AutoCardUpdaterAPI;\n  }\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * \n * \n */\n\n/**\n *  Base64\n * @param file \n * @returns Base64  ( data:image/xxx;base64, )\n */\nexport function fileToBase64(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = reject;\n  });\n}\n\n/**\n * \n * @param base64  Base64 \n * @param maxWidth  ( 100)\n * @param quality  0-1 ( 0.8)\n * @returns  Base64 \n */\nexport function compressImage(base64: string, maxWidth = 100, quality = 0.8): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      try {\n        const canvas = document.createElement('canvas');\n        const scale = Math.min(1, maxWidth / Math.max(img.width, img.height));\n        canvas.width = img.width * scale;\n        canvas.height = img.height * scale;\n\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n          reject(new Error(' canvas context'));\n          return;\n        }\n\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n        resolve(canvas.toDataURL('image/jpeg', quality));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    img.onerror = () => reject(new Error(''));\n    img.src = base64;\n  });\n}\n\n/**\n * \n * \n * @param base64  Base64 \n * @param size  ( 100)\n * @param quality  0-1 ( 0.8)\n * @returns  Base64 \n */\nexport function compressImageSquare(base64: string, size = 100, quality = 0.8): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      try {\n        const canvas = document.createElement('canvas');\n        canvas.width = size;\n        canvas.height = size;\n\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n          reject(new Error(' canvas context'));\n          return;\n        }\n\n        // \n        const minDim = Math.min(img.width, img.height);\n        const sx = (img.width - minDim) / 2;\n        const sy = (img.height - minDim) / 2;\n\n        //  (sx, sy)  minDim x minDim \n        //  canvas  (0, 0)  size x size\n        ctx.drawImage(img, sx, sy, minDim, minDim, 0, 0, size, size);\n        resolve(canvas.toDataURL('image/jpeg', quality));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    img.onerror = () => reject(new Error(''));\n    img.src = base64;\n  });\n}\n\n/**\n *  Base64 \n * @param base64 Base64 \n * @returns \n */\nexport function getBase64Size(base64: string): number {\n  //  data:image/xxx;base64, \n  const base64Data = base64.split(',')[1] || base64;\n  // Base64  4/3\n  return Math.ceil(base64Data.length * 0.75);\n}\n\n/**\n * \n * @param bytes \n * @returns  ( \"50 KB\")\n */\nexport function formatFileSize(bytes: number): string {\n  if (bytes < 1024) return `${bytes} B`;\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n}\n\n/**\n * \n * @param options.maxWidth  ( 100)\n * @param options.quality  ( 0.8)\n * @param options.maxSizeKB  KB ( 50)\n * @returns Base64  null\n */\nexport function uploadImage(options?: {\n  maxWidth?: number;\n  quality?: number;\n  maxSizeKB?: number;\n}): Promise<string | null> {\n  const { maxWidth = 100, quality = 0.8, maxSizeKB = 50 } = options || {};\n\n  return new Promise(resolve => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = 'image/*';\n\n    input.onchange = async () => {\n      const file = input.files?.[0];\n      if (!file) {\n        resolve(null);\n        return;\n      }\n\n      try {\n        let base64 = await fileToBase64(file);\n\n        // \n        base64 = await compressImage(base64, maxWidth, quality);\n\n        // \n        const sizeKB = getBase64Size(base64) / 1024;\n        if (sizeKB > maxSizeKB) {\n          // \n          base64 = await compressImage(base64, maxWidth * 0.7, quality * 0.7);\n          const newSizeKB = getBase64Size(base64) / 1024;\n          if (newSizeKB > maxSizeKB) {\n            console.warn(`[ACU]  ${maxSizeKB}KB (${newSizeKB.toFixed(1)}KB)`);\n          }\n        }\n\n        resolve(base64);\n      } catch (e) {\n        console.error('[ACU] :', e);\n        resolve(null);\n      }\n    };\n\n    input.oncancel = () => resolve(null);\n    input.click();\n  });\n}\n\n/**\n *  hex  rgba\n * @param hex Hex  ( '#ff0000')\n * @param opacity  0-100\n * @returns rgba \n */\nexport function hexToRgba(hex: string, opacity: number): string {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  if (!result) return hex;\n  const r = parseInt(result[1], 16);\n  const g = parseInt(result[2], 16);\n  const b = parseInt(result[3], 16);\n  return `rgba(${r}, ${g}, ${b}, ${opacity / 100})`;\n}\n\n/**\n *  rgba  hex  opacity\n * @param rgba rgba \n * @returns { hex, opacity }\n */\nexport function rgbaToHex(rgba: string): { hex: string; opacity: number } {\n  const match = rgba.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*([\\d.]+))?\\)/);\n  if (!match) return { hex: rgba, opacity: 100 };\n\n  const r = parseInt(match[1]).toString(16).padStart(2, '0');\n  const g = parseInt(match[2]).toString(16).padStart(2, '0');\n  const b = parseInt(match[3]).toString(16).padStart(2, '0');\n  const opacity = match[4] ? Math.round(parseFloat(match[4]) * 100) : 100;\n\n  return { hex: `#${r}${g}${b}`, opacity };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * \n *\n * \n */\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport type RelationLevel = 'S' | 'A' | 'B' | 'C' | 'D' | 'E' | '?';\n\n/**  */\nexport interface RelationType {\n  /**  */\n  level: RelationLevel;\n  /**  */\n  name: string;\n  /**  */\n  color: string;\n  /**  */\n  keywords: string[];\n}\n\n/**  */\nexport interface RelationColorResult {\n  /**  */\n  color: string;\n  /**  */\n  level: RelationLevel;\n  /**  */\n  typeName: string;\n  /**  */\n  isComplex: boolean;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n * S > A > E > D > B > C\n */\nexport const RELATION_TYPES: RelationType[] = [\n  {\n    level: 'S',\n    name: '/',\n    color: '#E91E63', // \n    keywords: [\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n    ],\n  },\n  {\n    level: 'A',\n    name: '',\n    color: '#2196F3', // \n    keywords: [\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n    ],\n  },\n  {\n    level: 'B',\n    name: '//',\n    color: '#4CAF50', // \n    keywords: [\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n    ],\n  },\n  {\n    level: 'C',\n    name: '/',\n    color: '#9E9E9E', // \n    keywords: [\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n    ],\n  },\n  {\n    level: 'D',\n    name: '',\n    color: '#FF9800', // \n    keywords: [\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n    ],\n  },\n  {\n    level: 'E',\n    name: '',\n    color: '#F44336', // \n    keywords: [\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n    ],\n  },\n];\n\n/**  */\nconst COMPLEX_RELATION: Omit<RelationType, 'keywords'> = {\n  level: '?',\n  name: '/',\n  color: '#9C27B0', // \n};\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n */\nfunction matchesType(word: string, type: RelationType): boolean {\n  return type.keywords.some(kw => word.includes(kw));\n}\n\n/**  getRelationColor  */\nexport interface CustomLegendItem {\n  label: string;\n  color: string;\n  keywords: string[];\n}\n\n/**\n * \n *\n * @param relationWords //\n * @param customLegendItems \n * @returns \n *\n * @example\n * getRelationColor('')        // { color: '#E91E63', level: 'S', typeName: '/', isComplex: false }\n * getRelationColor(',')   // { color: '#9C27B0', level: '?', typeName: '/', isComplex: true }\n * getRelationColor('')        // { color: '#9E9E9E', level: 'C', typeName: '', isComplex: false }\n */\nexport function getRelationColor(relationWords: string, customLegendItems?: CustomLegendItem[]): RelationColorResult {\n  // \n  const words = relationWords\n    .split(/[,;|]/)\n    .map(w => w.trim())\n    .filter(w => w.length > 0);\n\n  if (words.length === 0) {\n    return {\n      color: RELATION_TYPES.find(t => t.level === 'C')!.color,\n      level: 'C',\n      typeName: '',\n      isComplex: false,\n    };\n  }\n\n  // \n  if (customLegendItems && customLegendItems.length > 0) {\n    for (const item of customLegendItems) {\n      if (item.keywords && item.keywords.length > 0) {\n        for (const word of words) {\n          if (item.keywords.some(kw => word.includes(kw))) {\n            return {\n              color: item.color,\n              level: 'C' as RelationLevel, // \n              typeName: item.label,\n              isComplex: false,\n            };\n          }\n        }\n      }\n    }\n  }\n\n  // \n  const matchedLevels = new Set<RelationLevel>();\n\n  words.forEach(word => {\n    for (const type of RELATION_TYPES) {\n      if (matchesType(word, type)) {\n        matchedLevels.add(type.level);\n        break; // \n      }\n    }\n  });\n\n  // \n  if (matchedLevels.size === 0) {\n    return {\n      color: RELATION_TYPES.find(t => t.level === 'C')!.color,\n      level: 'C',\n      typeName: '',\n      isComplex: false,\n    };\n  }\n\n  // S/A/BE\n  const positivelevels: RelationLevel[] = ['S', 'A', 'B'];\n  const hasPositive = positivelevels.some(l => matchedLevels.has(l));\n  const hasNegative = matchedLevels.has('E');\n\n  if (hasPositive && hasNegative) {\n    return {\n      color: COMPLEX_RELATION.color,\n      level: COMPLEX_RELATION.level,\n      typeName: COMPLEX_RELATION.name,\n      isComplex: true,\n    };\n  }\n\n  // S > A > E > D > B > C\n  const priority: RelationLevel[] = ['S', 'A', 'E', 'D', 'B', 'C'];\n\n  for (const level of priority) {\n    if (matchedLevels.has(level)) {\n      const type = RELATION_TYPES.find(t => t.level === level)!;\n      return {\n        color: type.color,\n        level: type.level,\n        typeName: type.name,\n        isComplex: false,\n      };\n    }\n  }\n\n  // \n  return {\n    color: RELATION_TYPES.find(t => t.level === 'C')!.color,\n    level: 'C',\n    typeName: '',\n    isComplex: false,\n  };\n}\n\n/**  */\nexport interface LegendItem {\n  level: RelationLevel | 'dashed';\n  name: string;\n  color: string;\n  emoji: string;\n  /**  */\n  isDashed?: boolean;\n}\n\n/**\n *  UI \n */\nexport function getRelationLegend(): LegendItem[] {\n  const emojiMap: Record<RelationLevel, string> = {\n    S: '',\n    A: '',\n    B: '',\n    C: '',\n    D: '',\n    E: '',\n    '?': '',\n  };\n\n  return [\n    ...RELATION_TYPES.map(t => ({\n      level: t.level,\n      name: t.name,\n      color: t.color,\n      emoji: emojiMap[t.level],\n    })),\n    {\n      level: COMPLEX_RELATION.level,\n      name: COMPLEX_RELATION.name,\n      color: COMPLEX_RELATION.color,\n      emoji: emojiMap['?'],\n    },\n    // /\n    {\n      level: 'dashed' as const,\n      name: '/',\n      color: '#888888',\n      emoji: '',\n      isDashed: true,\n    },\n  ];\n}\n\n/**\n * \n * ///\n *\n * @param note \n * @param relation \n * @returns \n */\nexport function shouldUseDashedLine(note: string | undefined | null, relation?: string): boolean {\n  // /\n  const pastKeywords = ['', '', '', '', '', '', '', '', '', '', '', '', ''];\n  // /\n  const secretKeywords = ['', '', '', '', '', '', '', '', '', ''];\n\n  const allKeywords = [...pastKeywords, ...secretKeywords];\n  const text = (note || '') + (relation || '');\n\n  return allKeywords.some(kw => text.includes(kw));\n}\n\n/**\n * \n * - \n * - \n */\nexport function cleanRelationText(text: string): string {\n  if (!text) return '';\n  return text\n    .replace(/[.]+$/, '') // \n    .replace(/\\s+/g, '') // \n    .trim();\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * \n *\n *  Cytoscape \n */\nimport { cleanRelationText, getRelationColor, shouldUseDashedLine } from './relationshipColors';\n// ============================================================\n// \n// ============================================================\n/**  */\nconst SEGMENT_SEPARATORS = /[;|\\n]/;\n/**  */\nconst ITEM_SEPARATORS = /[,/&]/;\n/**  */\nconst COLON_PATTERN = /[:]/;\n// ============================================================\n// \n// ============================================================\n/**\n * \n */\nfunction getCellValue(row, colIndex) {\n    const cell = row.cells.find(c => c.colIndex === colIndex);\n    return cell ? String(cell.value ?? '').trim() : '';\n}\n/**\n * \n * @param name \n * @param aliasMap \n * @returns \n */\nfunction resolveAlias(name, aliasMap) {\n    if (!aliasMap || !name)\n        return name;\n    return aliasMap.get(name) || name;\n}\n/**\n * \n */\nfunction findColumnIndex(headers, possibleNames) {\n    const lowerHeaders = headers.map(h => h.toLowerCase());\n    for (const name of possibleNames) {\n        const idx = lowerHeaders.findIndex(h => h.includes(name.toLowerCase()));\n        if (idx !== -1)\n            return idx;\n    }\n    return -1;\n}\n/**\n * /\n */\nexport function isCharacterTable(tableName, tableId) {\n    const name = tableName.toLowerCase();\n    const id = tableId.toLowerCase();\n    const keywords = ['', '', 'npc', 'character', '', 'protagonist', 'player'];\n    return keywords.some(kw => name.includes(kw) || id.includes(kw));\n}\n/**\n * \n */\nexport function isRelationshipTable(tableName, tableId) {\n    const name = tableName.toLowerCase();\n    const id = tableId.toLowerCase();\n    const keywords = ['', 'relationship', 'relation'];\n    return keywords.some(kw => name.includes(kw) || id.includes(kw));\n}\n// ============================================================\n//  - \n// ============================================================\n/**\n * \n */\nexport function isEnglishName(name) {\n    return /^[A-Za-z\\s'-]+$/.test(name) && name.includes(' ');\n}\n/**\n * \n * - : \n * - : \n */\nexport function getDefaultLabel(fullName) {\n    if (isEnglishName(fullName)) {\n        // \n        const firstName = fullName.split(' ')[0];\n        return firstName.length > 6 ? firstName.slice(0, 6) : firstName;\n    }\n    // \n    return fullName.length > 0 ? fullName[fullName.length - 1] : fullName;\n}\n// ============================================================\n// \n// ============================================================\n/**\n *  Cytoscape \n *\n * @param relationshipTable \n * @param characterTables \n * @param factionTable \n * @param aliasMap \n * @param customLegendItems \n * @returns \n */\nexport function parseRelationshipTable(relationshipTable, characterTables = [], factionTable, aliasMap, customLegendItems) {\n    const warnings = [];\n    const nodes = [];\n    const edges = [];\n    const nodeIds = new Set();\n    // \n    if (!relationshipTable || relationshipTable.rows.length === 0) {\n        return { elements: [], nodeCount: 0, edgeCount: 0, warnings: [''] };\n    }\n    const headers = relationshipTable.headers;\n    // \n    const sourceIdx = findColumnIndex(headers, ['source', '', '', '', 'from']);\n    const targetIdx = findColumnIndex(headers, ['target', '', '', '', 'to']);\n    const relationIdx = findColumnIndex(headers, ['', 'relation', '']);\n    const noteIdx = findColumnIndex(headers, ['', 'note', '', 'remark']);\n    // \n    if (sourceIdx === -1 || targetIdx === -1) {\n        return {\n            elements: [],\n            nodeCount: 0,\n            edgeCount: 0,\n            warnings: [' source/target '],\n        };\n    }\n    // \n    const protagonistNames = new Set();\n    const characterNames = new Set();\n    const factionNames = new Set();\n    // \n    characterTables.forEach(table => {\n        const tableName = table.name.toLowerCase();\n        const isProtagonist = tableName.includes('') || tableName.includes('protagonist');\n        const nameIdx = findColumnIndex(table.headers, ['', 'name', '', '']);\n        if (nameIdx !== -1) {\n            table.rows.forEach(row => {\n                const name = getCellValue(row, nameIdx);\n                if (name) {\n                    if (isProtagonist) {\n                        protagonistNames.add(name);\n                    }\n                    else {\n                        characterNames.add(name);\n                    }\n                }\n            });\n        }\n    });\n    // \n    if (factionTable) {\n        const nameIdx = findColumnIndex(factionTable.headers, ['', 'name', '']);\n        if (nameIdx !== -1) {\n            factionTable.rows.forEach(row => {\n                const name = getCellValue(row, nameIdx);\n                if (name)\n                    factionNames.add(name);\n            });\n        }\n    }\n    /**\n     * \n     */\n    function getNodeType(name) {\n        if (protagonistNames.has(name))\n            return 'protagonist';\n        if (characterNames.has(name))\n            return 'character';\n        if (factionNames.has(name))\n            return 'faction';\n        return 'unknown';\n    }\n    /**\n     * \n     * - : \n     * - : \n     */\n    function addNode(name) {\n        if (!name || nodeIds.has(name))\n            return;\n        nodeIds.add(name);\n        const nodeType = getNodeType(name);\n        // \n        const defaultLabel = getDefaultLabel(name);\n        nodes.push({\n            data: {\n                id: name,\n                label: defaultLabel,\n                type: nodeType,\n            },\n            classes: nodeType,\n        });\n    }\n    // \n    relationshipTable.rows.forEach((row, rowIndex) => {\n        const rawSource = getCellValue(row, sourceIdx);\n        const rawTarget = getCellValue(row, targetIdx);\n        const relation = relationIdx !== -1 ? getCellValue(row, relationIdx) : '';\n        const note = noteIdx !== -1 ? getCellValue(row, noteIdx) : '';\n        // \n        if (!rawSource || !rawTarget) {\n            if (rawSource || rawTarget) {\n                warnings.push(` ${rowIndex + 1} source: \"${rawSource}\", target: \"${rawTarget}\"`);\n            }\n            return;\n        }\n        // \n        const source = resolveAlias(rawSource, aliasMap);\n        const target = resolveAlias(rawTarget, aliasMap);\n        // \n        addNode(source);\n        addNode(target);\n        // \n        const colorResult = getRelationColor(relation, customLegendItems);\n        // \n        edges.push({\n            data: {\n                id: `edge-${rowIndex}`,\n                source,\n                target,\n                label: relation || '',\n                note,\n                color: colorResult.color,\n                lineStyle: shouldUseDashedLine(note) ? 'dashed' : 'solid',\n                level: colorResult.level,\n            },\n        });\n    });\n    return {\n        elements: [...nodes, ...edges],\n        nodeCount: nodes.length,\n        edgeCount: edges.length,\n        warnings,\n    };\n}\n/**\n * \n */\nexport function findRelationshipTable(tables) {\n    return tables.find(t => isRelationshipTable(t.name, t.id)) || null;\n}\n/**\n * \n */\nexport function findFactionTable(tables) {\n    const keywords = ['', 'faction', '', 'organization', ''];\n    return (tables.find(t => {\n        const name = t.name.toLowerCase();\n        const id = t.id.toLowerCase();\n        return keywords.some(kw => name.includes(kw) || id.includes(kw));\n    }) || null);\n}\n/**\n * \n */\nexport function findCharacterTables(tables) {\n    return tables.filter(t => isCharacterTable(t.name, t.id) && !isRelationshipTable(t.name, t.id));\n}\n// ============================================================\n// \"\"\n// ============================================================\n/**\n *  Cytoscape \n *\n * @param tables \n * @param config \n * @returns \n */\nexport function parseAttributeTableToElements(tables, config) {\n    const warnings = [];\n    const nodes = [];\n    const edges = [];\n    const nodeIds = new Set();\n    let edgeIndex = 0;\n    // \n    // \n    const knownNames = new Set(config.validTargets || []);\n    /**\n     * \n     */\n    function addNode(name, type = config.nodeType) {\n        if (!name || nodeIds.has(name))\n            return;\n        nodeIds.add(name);\n        // \n        const defaultLabel = getDefaultLabel(name);\n        nodes.push({\n            data: {\n                id: name,\n                label: defaultLabel,\n                type: type,\n            },\n            classes: type,\n        });\n    }\n    //  sourcetarget \n    const edgeCache = new Map();\n    // \n    tables.forEach(table => {\n        const nameIdx = findColumnIndex(table.headers, config.nameColKeywords);\n        const relationColIdx = findColumnIndex(table.headers, config.relationColKeywords);\n        if (nameIdx === -1 || relationColIdx === -1) {\n            return; // \n        }\n        table.rows.forEach(row => {\n            const rawSourceName = getCellValue(row, nameIdx);\n            const relationText = getCellValue(row, relationColIdx);\n            if (!rawSourceName || !relationText)\n                return;\n            // \n            const sourceName = resolveAlias(rawSourceName, config.aliasMap);\n            // \n            addNode(sourceName);\n            //  config.validTargets  knownNames\n            knownNames.add(sourceName);\n            // \n            const parsedRelations = parseEmbeddedRelationship(relationText, knownNames);\n            for (const parsed of parsedRelations) {\n                // \n                const cleanedRelation = cleanRelationText(parsed.relation);\n                if (!cleanedRelation)\n                    continue;\n                for (const rawTarget of parsed.targets) {\n                    // \n                    const target = resolveAlias(rawTarget, config.aliasMap);\n                    // \n                    if (config.validTargets && !config.validTargets.has(target)) {\n                        // \n                        // console.warn(`[RelationshipParser]  \"${target}\" `);\n                        continue;\n                    }\n                    // \n                    addNode(target);\n                    // \n                    const edgeKey = `${sourceName}->${target}`;\n                    // \n                    const colorResult = getRelationColor(cleanedRelation, config.customLegendItems);\n                    const useDashed = shouldUseDashedLine(parsed.note, cleanedRelation);\n                    // \n                    if (edgeCache.has(edgeKey)) {\n                        const cached = edgeCache.get(edgeKey);\n                        // \n                        if (!cached.relations.includes(cleanedRelation)) {\n                            cached.relations.push(cleanedRelation);\n                        }\n                        // \n                        if (parsed.note && !cached.notes.includes(parsed.note)) {\n                            cached.notes.push(parsed.note);\n                        }\n                        // S > A > E > D > B > C > ?\n                        const priorityOrder = ['S', 'A', 'E', 'D', 'B', 'C', '?'];\n                        const currentPriority = priorityOrder.indexOf(cached.level);\n                        const newPriority = priorityOrder.indexOf(colorResult.level);\n                        if (newPriority < currentPriority || currentPriority === -1) {\n                            cached.color = colorResult.color;\n                            cached.level = colorResult.level;\n                        }\n                        // \n                        if (useDashed) {\n                            cached.useDashed = true;\n                        }\n                    }\n                    else {\n                        edgeCache.set(edgeKey, {\n                            relations: [parsed.relation],\n                            notes: parsed.note ? [parsed.note] : [],\n                            color: colorResult.color,\n                            level: colorResult.level,\n                            useDashed,\n                        });\n                    }\n                }\n            }\n        });\n    });\n    // \n    const processedPairs = new Set(); // \n    edgeCache.forEach((cached, edgeKey) => {\n        const [source, target] = edgeKey.split('->');\n        // \n        const pairKey = [source, target].sort().join('<->');\n        if (processedPairs.has(pairKey)) {\n            return; // \n        }\n        // \n        const reverseKey = `${target}->${source}`;\n        const reverseEdge = edgeCache.get(reverseKey);\n        // \n        let isBidirectional = false;\n        if (reverseEdge) {\n            const sortedRelations = [...cached.relations].sort().join(',');\n            const sortedReverseRelations = [...reverseEdge.relations].sort().join(',');\n            isBidirectional = sortedRelations === sortedReverseRelations;\n        }\n        //  / \n        const label = cached.relations.join('/');\n        const note = cached.notes.join('; ');\n        if (isBidirectional) {\n            processedPairs.add(pairKey);\n            edges.push({\n                data: {\n                    id: `edge-${edgeIndex++}`,\n                    source,\n                    target,\n                    label: label || '',\n                    note,\n                    color: cached.color,\n                    lineStyle: cached.useDashed ? 'dashed' : 'solid',\n                    level: cached.level,\n                    bidirectional: true,\n                },\n            });\n        }\n        else {\n            edges.push({\n                data: {\n                    id: `edge-${edgeIndex++}`,\n                    source,\n                    target,\n                    label: label || '',\n                    note,\n                    color: cached.color,\n                    lineStyle: cached.useDashed ? 'dashed' : 'solid',\n                    level: cached.level,\n                    bidirectional: false,\n                },\n            });\n        }\n    });\n    return {\n        elements: [...nodes, ...edges],\n        nodeCount: nodes.length,\n        edgeCount: edges.length,\n        warnings,\n    };\n}\n/**\n * \n *\n * \n * - \"\"  target: , relation: \n * - \"\"  targets: [, ], relation: \n * - \"\"  target: , relation: , note: \n * -   ; \n * -  \n *\n * @param text \n * @param knownNames \n * @returns \n */\nexport function parseEmbeddedRelationship(text, knownNames = new Set()) {\n    if (!text || typeof text !== 'string')\n        return [];\n    const results = [];\n    // \n    // /\n    const segments = text\n        .split(SEGMENT_SEPARATORS)\n        .map(s => s.trim())\n        .filter(Boolean);\n    for (const segment of segments) {\n        // \n        let note = '';\n        let cleanSegment = segment;\n        const bracketMatch = segment.match(/[(]([^)]+)[)]/);\n        if (bracketMatch) {\n            note = bracketMatch[1];\n            cleanSegment = segment.replace(/[(][^)]+[)]/g, '').trim();\n        }\n        // \n        cleanSegment = cleanSegment.replace(/[\"\"]([^\"\"]+)[\"\"]/g, '$1');\n        // --------------------------------------------------------\n        // 1: {A}{B}{}\n        // --------------------------------------------------------\n        const multiTargetMatch = cleanSegment.match(/^(.+?)(.+?)(.+)$/);\n        if (multiTargetMatch) {\n            const target1 = multiTargetMatch[1].trim();\n            const target2 = multiTargetMatch[2].trim();\n            const relations = multiTargetMatch[3]\n                .split(ITEM_SEPARATORS)\n                .map(r => r.trim())\n                .filter(Boolean);\n            for (const relation of relations) {\n                const cleanedRelation = cleanRelationText(relation);\n                if (cleanedRelation) {\n                    results.push({\n                        targets: [target1, target2],\n                        relation: cleanedRelation,\n                        note,\n                    });\n                }\n            }\n            continue;\n        }\n        // --------------------------------------------------------\n        // 2: {A}{B}...{}\n        //  \"\"  targets: [, ], relation: \n        // --------------------------------------------------------\n        const commaMultiTargetMatch = cleanSegment.match(/^(.+?[,].+?)(.+)$/);\n        if (commaMultiTargetMatch) {\n            const targetsText = commaMultiTargetMatch[1];\n            const relationsText = commaMultiTargetMatch[2];\n            // \n            const targets = targetsText\n                .split(ITEM_SEPARATORS)\n                .map(t => t.trim())\n                .filter(Boolean);\n            // \n            if (targets.length > 1) {\n                // \n                const relations = relationsText\n                    .split(ITEM_SEPARATORS)\n                    .map(r => r.trim())\n                    .filter(Boolean);\n                for (const relation of relations) {\n                    const cleanedRelation = cleanRelationText(relation);\n                    if (cleanedRelation) {\n                        results.push({\n                            targets,\n                            relation: cleanedRelation,\n                            note,\n                        });\n                    }\n                }\n                continue;\n            }\n        }\n        // --------------------------------------------------------\n        // 3: {}{}\n        // --------------------------------------------------------\n        const singleTargetMatch = cleanSegment.match(/^(.+?)(.+)$/);\n        if (singleTargetMatch) {\n            const target = singleTargetMatch[1].trim();\n            const relationsText = singleTargetMatch[2];\n            //  \"\" \n            //  \"\"  \"\"SM\"\"\n            let relations;\n            if (relationsText.includes('')) {\n                //  \"\" \n                relations = relationsText\n                    .split(//)\n                    .map(r => r.trim())\n                    .filter(Boolean);\n            }\n            else {\n                // \n                relations = relationsText\n                    .split(ITEM_SEPARATORS)\n                    .map(r => r.trim())\n                    .filter(Boolean);\n            }\n            for (const relation of relations) {\n                const cleanedRelation = cleanRelationText(relation);\n                if (cleanedRelation) {\n                    results.push({\n                        targets: [target],\n                        relation: cleanedRelation,\n                        note,\n                    });\n                }\n            }\n            continue;\n        }\n        // --------------------------------------------------------\n        // 4: {}{} ()\n        //  \"\"\n        // --------------------------------------------------------\n        //  /  & \"/\"\n        const withMatch = cleanSegment.match(/^(.+?)([^,\\s]+)$/);\n        if (withMatch) {\n            const targetsText = withMatch[1].trim();\n            const relationText = withMatch[2].trim();\n            //  \"\"\n            const targets = targetsText\n                .split(ITEM_SEPARATORS)\n                .map(t => t.trim())\n                .filter(Boolean);\n            //  \"/\"\n            const relations = relationText\n                .split(ITEM_SEPARATORS)\n                .map(r => r.trim())\n                .filter(Boolean);\n            let hasValidRelation = false;\n            for (const relation of relations) {\n                const cleanedRelation = cleanRelationText(relation);\n                if (targets.length > 0 && cleanedRelation) {\n                    results.push({\n                        targets,\n                        relation: cleanedRelation,\n                        note,\n                    });\n                    hasValidRelation = true;\n                }\n            }\n            if (hasValidRelation)\n                continue;\n        }\n        // --------------------------------------------------------\n        // 5: {}{}  {}:{}\n        //  knownNames  Target:Relation  Relation:Target\n        // --------------------------------------------------------\n        const colonMatch = cleanSegment.match(new RegExp(`^(.+?)${COLON_PATTERN.source}(.+)$`));\n        if (colonMatch) {\n            let part1 = colonMatch[1].trim();\n            let part2 = colonMatch[2].trim();\n            // \n            //  Part1  Target, Part2  Relation (Target:Relation)\n            //  Part1  ->  Target:Relation\n            //  Part2  ->  Relation:Target ( \"\")\n            let isReversed = false;\n            // \n            const containsKnownName = (text) => {\n                const parts = text.split(ITEM_SEPARATORS).map(t => t.trim());\n                return parts.some(p => knownNames.has(p));\n            };\n            if (knownNames.size > 0) {\n                const part1Known = containsKnownName(part1);\n                const part2Known = containsKnownName(part2);\n                if (!part1Known && part2Known) {\n                    isReversed = true;\n                }\n            }\n            if (isReversed) {\n                [part1, part2] = [part2, part1];\n            }\n            const targetsText = part1;\n            const relationsText = part2;\n            // \n            const targets = targetsText\n                .split(ITEM_SEPARATORS)\n                .map(t => t.trim())\n                .filter(Boolean);\n            // \n            const relations = relationsText\n                .split(ITEM_SEPARATORS)\n                .map(r => r.trim())\n                .filter(Boolean);\n            for (const relation of relations) {\n                const cleanedRelation = cleanRelationText(relation);\n                if (cleanedRelation) {\n                    results.push({\n                        targets,\n                        relation: cleanedRelation,\n                        note,\n                    });\n                }\n            }\n            continue;\n        }\n        // \n        console.info(`[RelationshipParser] : \"${segment}\"`);\n    }\n    return results;\n}\n/**\n * \n */\nfunction findFactionTableInternal(allTables) {\n    const factionKeywords = ['', 'faction', '', 'organization', ''];\n    return (allTables.find(t => {\n        const name = t.name.toLowerCase();\n        const id = t.id.toLowerCase();\n        return factionKeywords.some(kw => name.includes(kw) || id.includes(kw));\n    }) || null);\n}\n/**\n * \n * \"///\"\n */\nfunction extractFactionList(allTables) {\n    const nameKeywords = ['', 'name', '', '', ''];\n    // \n    const factionTable = findFactionTableInternal(allTables);\n    if (!factionTable) {\n        console.info('[FactionMapping] ');\n        return [];\n    }\n    // \n    const nameIdx = findColumnIndex(factionTable.headers, nameKeywords);\n    if (nameIdx === -1) {\n        console.info('[FactionMapping] ');\n        return [];\n    }\n    // \n    const factionList = [];\n    factionTable.rows.forEach(row => {\n        const name = getCellValue(row, nameIdx);\n        if (name && !factionList.includes(name)) {\n            factionList.push(name);\n        }\n    });\n    console.info(`[FactionMapping]  ${factionList.length} :`, factionList);\n    return factionList;\n}\n/**\n * \n * \"///\"\n * ****\n * \"/\"  \"\" \"\" \n */\nfunction extractCharacterFactions(characterTables, factionList) {\n    const characterToFaction = new Map();\n    // \n    const factionColKeywords = ['', '', '', '', '', '', 'faction', 'affiliation', 'organization'];\n    for (const table of characterTables) {\n        const nameIdx = findColumnIndex(table.headers, ['', 'name', '', '']);\n        const factionIdx = findColumnIndex(table.headers, factionColKeywords);\n        if (nameIdx === -1)\n            continue;\n        if (factionIdx === -1)\n            continue;\n        table.rows.forEach(row => {\n            const charName = getCellValue(row, nameIdx);\n            const factionValue = getCellValue(row, factionIdx);\n            if (!charName || !factionValue)\n                return;\n            //  factionValue \n            //  \"\"  \"\" \n            const sortedFactions = [...factionList].sort((a, b) => b.length - a.length);\n            for (const faction of sortedFactions) {\n                if (factionValue.includes(faction)) {\n                    characterToFaction.set(charName, faction);\n                    console.info(`[FactionMapping]  \"${charName}\"  \"${faction}\" ( \"${factionValue}\")`);\n                    break; // \n                }\n            }\n        });\n    }\n    console.info(`[FactionMapping]  ${characterToFaction.size} `);\n    return characterToFaction;\n}\n/**\n * \n * 1. \n * 2.  factionList \n * 3.  ( parseAttributeTableToElements)\n *\n * @param allTables \n * @param characterTables \n * @returns \n */\nexport function extractFactionMapping(allTables, characterTables) {\n    // 1. \n    const factionList = extractFactionList(allTables);\n    // 2.  factionList \n    const characterToFaction = extractCharacterFactions(characterTables, factionList);\n    // 3.  ()\n    const factionTable = findFactionTableInternal(allTables);\n    const factionRelations = [];\n    if (factionTable && factionList.length > 0) {\n        const parseResult = parseAttributeTableToElements([factionTable], {\n            nameColKeywords: ['', 'name', '', '', ''],\n            relationColKeywords: ['', '', 'relation', 'relationship', ''],\n            nodeType: 'faction',\n            validTargets: new Set(factionList), // \n        });\n        //  FactionRelation\n        parseResult.elements.forEach(el => {\n            if (el.data.source && el.data.target) {\n                factionRelations.push({\n                    source: el.data.source,\n                    target: el.data.target,\n                    relation: el.data.label || '',\n                });\n            }\n        });\n        console.info(`[FactionMapping]  ${factionRelations.length} `);\n    }\n    return { factionList, characterToFaction, factionRelations };\n}\n/**\n *  Cytoscape  (Wrapper for parseAttributeTableToElements)\n *\n * @param characterTables \n * @param factionTable \n * @param aliasMap \n * @param customLegendItems \n * @returns \n */\nexport function parseEmbeddedRelationships(characterTables = [], factionTable, aliasMap, customLegendItems) {\n    // \n    const protagonistTables = [];\n    const otherTables = [];\n    characterTables.forEach(table => {\n        const tableName = table.name.toLowerCase();\n        if (tableName.includes('') || tableName.includes('protagonist')) {\n            protagonistTables.push(table);\n        }\n        else {\n            otherTables.push(table);\n        }\n    });\n    // \n    const protagonistResult = parseAttributeTableToElements(protagonistTables, {\n        nameColKeywords: ['', 'name', '', ''],\n        relationColKeywords: ['', '', 'relationship', 'relations'],\n        nodeType: 'protagonist',\n        aliasMap,\n        customLegendItems,\n    });\n    // \n    const otherResult = parseAttributeTableToElements(otherTables, {\n        nameColKeywords: ['', 'name', '', ''],\n        relationColKeywords: ['', '', 'relationship', 'relations'],\n        nodeType: 'character',\n        aliasMap,\n        customLegendItems,\n    });\n    // \n    //  ID \n    //  protagonistResult  ID \n    const nodesMap = new Map();\n    const edges = [];\n    const warnings = [...protagonistResult.warnings, ...otherResult.warnings];\n    // \n    const addElements = (result) => {\n        result.elements.forEach(el => {\n            if (el.data.source && el.data.target) {\n                //  ( ID )\n                //  edge-index \n                const newEdge = { ...el };\n                newEdge.data.id = `edge-${edges.length}`;\n                edges.push(newEdge);\n            }\n            else {\n                //  ID \n                const id = el.data.id;\n                if (!nodesMap.has(id)) {\n                    nodesMap.set(id, el);\n                }\n            }\n        });\n    };\n    addElements(protagonistResult);\n    addElements(otherResult);\n    // \n    // ( parseEmbeddedRelationships )\n    // \n    // \n    const nodeIds = new Set(nodesMap.keys());\n    const factionColKeywords = ['', '', '', '', '', '', 'faction', 'affiliation', 'organization'];\n    characterTables.forEach(table => {\n        const nameIdx = findColumnIndex(table.headers, ['', 'name', '', '']);\n        const factionIdx = findColumnIndex(table.headers, factionColKeywords);\n        if (nameIdx === -1 || factionIdx === -1)\n            return;\n        table.rows.forEach(row => {\n            const charName = getCellValue(row, nameIdx);\n            const factionValue = getCellValue(row, factionIdx);\n            if (charName && factionValue && !nodeIds.has(charName)) {\n                // \n                const isProtagonist = table.name.toLowerCase().includes('');\n                const nodeType = isProtagonist ? 'protagonist' : 'character';\n                const defaultLabel = getDefaultLabel(charName);\n                nodesMap.set(charName, {\n                    data: {\n                        id: charName,\n                        label: defaultLabel,\n                        type: nodeType,\n                    },\n                    classes: nodeType,\n                });\n                nodeIds.add(charName);\n                // console.info(`[RelationshipParser] : \"${charName}\"`);\n            }\n        });\n    });\n    return {\n        elements: [...nodesMap.values(), ...edges],\n        nodeCount: nodesMap.size,\n        edgeCount: edges.length,\n        warnings,\n    };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * \n * \n */\nimport type { RawDatabaseData } from '../types';\n\n// \nexport * from './relationshipColors';\nexport * from './relationshipParser';\n\n// \nexport * from './imageUpload';\n\n// \nexport * from './optionParser';\n\n/**\n *  (jQuery  API)\n */\nexport function getCore() {\n  const w = window.parent || window;\n  return {\n    $: (window as any).jQuery || (w as any).jQuery,\n    getDB: () => (w as any).AutoCardUpdaterAPI || (window as any).AutoCardUpdaterAPI,\n  };\n}\n\n/**\n *  (API )\n */\nexport function getTableData(): RawDatabaseData | null {\n  const api = getCore().getDB();\n  try {\n    return api && api.exportTableAsJson ? api.exportTableAsJson() : null;\n  } catch (e) {\n    console.warn('[ACU] getTableData error:', e);\n    return null;\n  }\n}\n\n/**\n *  JSON \n * \n *  name  sheet\n */\nexport function processJsonData(data: any): Record<string, { key: string; headers: any[]; rows: any[][] }> | null {\n  if (!data || typeof data !== 'object') return {};\n  const tables: Record<string, { key: string; headers: any[]; rows: any[][] }> = {};\n  for (const sheetId in data) {\n    //  name  sheet\n    if (data[sheetId]?.name) {\n      const sheet = data[sheetId];\n      tables[sheet.name] = {\n        key: sheetId, //  Key \n        headers: sheet.content?.[0] || [],\n        rows: sheet.content?.slice(1) || [],\n      };\n    }\n  }\n  //  null\n  return Object.keys(tables).length > 0 ? tables : null;\n}\n\n/**\n * \n */\nexport function getIconForTableName(name: string): string {\n  if (name.includes('')) return 'fa-tachometer-alt';\n  if (name.includes('')) return 'fa-list-check';\n  if (name.includes('') || name.includes('')) return 'fa-user-circle';\n  if (name.includes('') || name.includes('') || name.includes('NPC')) return 'fa-users';\n  if (name.includes('') || name.includes('')) return 'fa-tasks';\n  if (name.includes('') || name.includes('') || name.includes('')) return 'fa-box-open';\n  if (name.includes('') || name.includes('')) return 'fa-bolt';\n  if (name.includes('') || name.includes('')) return 'fa-map-marked-alt';\n  if (name.includes('') || name.includes('')) return 'fa-book';\n  return 'fa-table';\n}\n\n/**\n * \n *  class\n */\nexport function getBadgeStyle(text: string): string {\n  if (!text) return '';\n  const str = String(text);\n  if (str === 'True' || str === 'Yes' || str === '' || str === '') return 'acu-badge-success';\n  if (str === 'False' || str === 'No' || str === '' || str === '') return 'acu-badge-danger';\n  if (str === '' || str === 'Doing') return 'acu-badge-warning';\n  if (/^\\d+%$/.test(str)) return 'acu-badge-info'; // \n  if (/^Lv\\.?\\d+$/i.test(str)) return 'acu-badge-primary'; // \n  return '';\n}\n","/**\n * \n *  OptionsPanel.vue \n *  OptionsPanel  EmbeddedOptionsPanel \n */\n/**\n * \n * \n * 1. \"/Option/\"\n * 2. \n */\nexport function isMatrixMode(table) {\n    const headers = table.headers || [];\n    const optionColIndices = [];\n    // 1. \n    headers.forEach((h, idx) => {\n        if (h && /(|Option|)/i.test(String(h))) {\n            optionColIndices.push(idx);\n        }\n    });\n    // 2. \n    if (optionColIndices.length === 0 && headers.length > 0) {\n        if (headers.length === 1) {\n            // \n            optionColIndices.push(0);\n        }\n        else {\n            // 01~N\n            for (let i = 1; i < headers.length; i++) {\n                optionColIndices.push(i);\n            }\n        }\n    }\n    return {\n        isMatrix: true, // \n        optionColIndices,\n    };\n}\n/**\n * \n * \n */\nexport function parseOptionItems(table) {\n    if (!table || !table.rows)\n        return [];\n    const items = [];\n    const { optionColIndices } = isMatrixMode(table);\n    const headers = table.headers || [];\n    table.rows.forEach(row => {\n        const rowData = row.cells.map(c => String(c.value || '').trim());\n        // 1.  ()\n        const commonTags = [];\n        rowData.forEach((cellText, idx) => {\n            if (!optionColIndices.includes(idx) && cellText) {\n                commonTags.push(cellText);\n            }\n        });\n        // 2. \n        optionColIndices.forEach(colIdx => {\n            const cellText = rowData[colIdx];\n            if (cellText) {\n                const currentHeaderTag = headers[colIdx] || '';\n                const allTags = [...commonTags];\n                // \n                if (currentHeaderTag) {\n                    allTags.push(currentHeaderTag);\n                }\n                items.push({\n                    text: cellText,\n                    tags: allTags,\n                });\n            }\n        });\n    });\n    return items;\n}\n/**\n * \n * @param tableName \n */\nexport function isOptionTable(tableName) {\n    return tableName.includes('') || tableName.toLowerCase().includes('option');\n}\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ActionBar.vue?vue&type=style&index=0&id=a7372644&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1441031e\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ActionBar.vue?vue&type=style&index=0&id=a7372644&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ActionBar.vue?vue&type=style&index=0&id=a7372644&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HiddenButtonsPopup.vue?vue&type=style&index=0&id=5d2fcd0e&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"29405792\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HiddenButtonsPopup.vue?vue&type=style&index=0&id=5d2fcd0e&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HiddenButtonsPopup.vue?vue&type=style&index=0&id=5d2fcd0e&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabsPopup.vue?vue&type=style&index=0&id=ba4c37fe&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"0fba0984\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabsPopup.vue?vue&type=style&index=0&id=ba4c37fe&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabsPopup.vue?vue&type=style&index=0&id=ba4c37fe&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./InteractionTableWidget.vue?vue&type=style&index=0&id=1eeeb96e&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"47703fb6\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./InteractionTableWidget.vue?vue&type=style&index=0&id=1eeeb96e&lang=scss\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./InteractionTableWidget.vue?vue&type=style&index=0&id=1eeeb96e&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ManualUpdateDialog.vue?vue&type=style&index=0&id=5df49713&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"cd21d8e8\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ManualUpdateDialog.vue?vue&type=style&index=0&id=5df49713&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ManualUpdateDialog.vue?vue&type=style&index=0&id=5df49713&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./PresetSaveDialog.vue?vue&type=style&index=0&id=619b7a49&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"3d76eee2\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./PresetSaveDialog.vue?vue&type=style&index=0&id=619b7a49&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./PresetSaveDialog.vue?vue&type=style&index=0&id=619b7a49&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsDialog.vue?vue&type=style&index=0&id=e0ed2948&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"c8affff8\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsDialog.vue?vue&type=style&index=0&id=e0ed2948&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsDialog.vue?vue&type=style&index=0&id=e0ed2948&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NavButtonConfigPanel.vue?vue&type=style&index=0&id=5e392364&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"50d15491\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NavButtonConfigPanel.vue?vue&type=style&index=0&id=5e392364&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NavButtonConfigPanel.vue?vue&type=style&index=0&id=5e392364&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabConfigPanel.vue?vue&type=style&index=0&id=610a8a20&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"480632a2\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabConfigPanel.vue?vue&type=style&index=0&id=610a8a20&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabConfigPanel.vue?vue&type=style&index=0&id=610a8a20&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./WordPoolPanel.vue?vue&type=style&index=0&id=244ae7d6&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6299b1a2\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./WordPoolPanel.vue?vue&type=style&index=0&id=244ae7d6&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-15.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/sass-loader@16.0.7_sass@1.97.3_webpack@5.105.2/node_modules/sass-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./WordPoolPanel.vue?vue&type=style&index=0&id=244ae7d6&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RelationshipGraph.vue?vue&type=style&index=0&id=3249c691&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"77c90075\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RelationshipGraph.vue?vue&type=style&index=0&id=3249c691&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RelationshipGraph.vue?vue&type=style&index=0&id=3249c691&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./FactionSettingsDialog.vue?vue&type=style&index=0&id=65bec291&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7987a798\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./FactionSettingsDialog.vue?vue&type=style&index=0&id=65bec291&lang=css\", function() {\n     var newContent = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./FactionSettingsDialog.vue?vue&type=style&index=0&id=65bec291&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NodeConfigDialog.vue?vue&type=style&index=0&id=04296fa3&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1264d040\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NodeConfigDialog.vue?vue&type=style&index=0&id=04296fa3&lang=css\", function() {\n     var newContent = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NodeConfigDialog.vue?vue&type=style&index=0&id=04296fa3&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./BackgroundConfigPanel.vue?vue&type=style&index=0&id=acd94642&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f3f64338\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./BackgroundConfigPanel.vue?vue&type=style&index=0&id=acd94642&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./BackgroundConfigPanel.vue?vue&type=style&index=0&id=acd94642&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./DimensionManagerPanel.vue?vue&type=style&index=0&id=2a4c34ca&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"cb670388\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./DimensionManagerPanel.vue?vue&type=style&index=0&id=2a4c34ca&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.4_webpack@5.105.2/node_modules/css-loader/dist/cjs.js??clonedRuleSet-16.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.1_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.105.2/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./DimensionManagerPanel.vue?vue&type=style&index=0&id=2a4c34ca&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"acu-relationship-graph\" };\nconst _hoisted_2 = {\n    key: 1,\n    class: \"acu-graph-legend\"\n};\nconst _hoisted_3 = { class: \"label\" };\nconst _hoisted_4 = { class: \"acu-graph-toolbar\" };\nconst _hoisted_5 = {\n    key: 2,\n    class: \"acu-graph-empty\"\n};\nimport { useDebounceFn } from '@vueuse/core';\nimport cytoscape from 'cytoscape';\nimport cola from 'cytoscape-cola';\nimport fcose from 'cytoscape-fcose';\n// @ts-expect-error - cytoscape-node-html-label \nimport nodeHtmlLabel from 'cytoscape-node-html-label';\nimport { computed, onBeforeUnmount, onMounted, ref, watch } from 'vue';\nimport { useAvatarManager } from '../composables/useAvatarManager';\nimport { GLOBAL_THEME_BG_KEY, loadBackground, revokeBlobUrl } from '../composables/useBackgroundStorage';\nimport { TAB_DASHBOARD, useConfigStore, useGraphConfigStore, useThemeStore, useUIStore } from '../stores';\nimport { DEFAULT_FACTION_STYLE } from '../stores/useGraphConfigStore';\nimport { extractFactionMapping, getCore, getRelationColor, getRelationLegend, isEnglishName, parseEmbeddedRelationships, parseRelationshipTable, } from '../utils';\nimport SearchBox from './SearchBox.vue';\n/**  -  props.initialLayout */\nconst CHAT_VAR_GRAPH_CONFIG = 'acu_graph_config';\n/**  */\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'RelationshipGraph',\n    props: {\n        relationshipTable: { default: null },\n        characterTables: { default: () => [] },\n        factionTable: { default: null },\n        allTables: { default: () => [] },\n        showLegend: { type: Boolean, default: true },\n        initialLayout: { default: 'fcose' }\n    },\n    emits: [\"node-click\", \"edge-click\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * RelationshipGraph.vue - \n         *\n         *  Cytoscape.js \n         * - \n         * - \n         * - \n         * - \n         */\n        // @ts-nocheck\n        cytoscape.use(fcose); // fcose: \n        cytoscape.use(cola); // cola: \n        //  node-html-label  HTML \n        nodeHtmlLabel(cytoscape);\n        // Stores\n        const configStore = useConfigStore();\n        const uiStore = useUIStore();\n        const graphConfigStore = useGraphConfigStore();\n        const themeStore = useThemeStore();\n        // \n        const avatarManager = useAvatarManager();\n        /**  */\n        const avatarCache = ref(new Map());\n        /**  ->  */\n        const aliasMap = ref(new Map());\n        /**  blob URL */\n        const currentBackgroundUrl = ref(null);\n        // ============================================================\n        // Props & Emits\n        // ============================================================\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs\n        // ============================================================\n        const containerRef = ref(null);\n        let cy = null;\n        /**  */\n        const isSearchMode = ref(false);\n        const searchTerm = ref('');\n        const searchInputRef = ref(null);\n        const focusedNodeId = ref(null);\n        /**  hidden-in-cola  ID */\n        const hiddenInColaBeforeSearch = ref(new Set());\n        /**  */\n        function getInitialLayoutMode() {\n            const savedConfig = getGraphConfig();\n            return savedConfig.lastLayout || props.initialLayout;\n        }\n        /**  */\n        const layoutMode = ref(getInitialLayoutMode());\n        /** ID */\n        const centerNodeId = ref(null);\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  key */\n        function getGraphConfig() {\n            try {\n                const chatVars = getVariables({ type: 'chat' });\n                const config = chatVars[CHAT_VAR_GRAPH_CONFIG] || {};\n                //  positions  layoutPositions fcose\n                if (config.positions && !config.layoutPositions) {\n                    console.info('[RelationshipGraph]  fcose');\n                    config.layoutPositions = {\n                        fcose: config.positions,\n                    };\n                    delete config.positions;\n                    // \n                    saveGraphConfig(config);\n                }\n                return config;\n            }\n            catch (e) {\n                console.warn('[RelationshipGraph] :', e);\n                return {};\n            }\n        }\n        /**  */\n        function saveGraphConfig(config) {\n            try {\n                insertOrAssignVariables({ [CHAT_VAR_GRAPH_CONFIG]: config }, { type: 'chat' });\n            }\n            catch (e) {\n                console.warn('[RelationshipGraph] :', e);\n            }\n        }\n        /**  */\n        function hasSavedPositions(layout) {\n            const targetLayout = layout || layoutMode.value;\n            const config = getGraphConfig();\n            console.info(`[RelationshipGraph] hasSavedPositions(${targetLayout}):`, {\n                layoutPositions: config.layoutPositions ? Object.keys(config.layoutPositions) : 'undefined',\n                targetLayoutData: config.layoutPositions?.[targetLayout]\n                    ? Object.keys(config.layoutPositions[targetLayout]).length + ' '\n                    : '',\n            });\n            const positions = config.layoutPositions?.[targetLayout];\n            return !!(positions && Object.keys(positions).length > 0);\n        }\n        /**  */\n        function getSavedPositions(layout) {\n            const targetLayout = layout || layoutMode.value;\n            return getGraphConfig().layoutPositions?.[targetLayout];\n        }\n        // ============================================================\n        // CSS \n        // ============================================================\n        /**\n         *  CSS \n         * Cytoscape  CSS \n         *\n         *  class  .acu-wrapper  :root \n         *  CSS \n         */\n        function getCssVar(varName, fallback) {\n            try {\n                const parentDoc = window.parent?.document || document;\n                //  .acu-wrapper\n                const wrapper = parentDoc.querySelector('.acu-wrapper');\n                if (wrapper) {\n                    const computed = getComputedStyle(wrapper).getPropertyValue(varName).trim();\n                    if (computed)\n                        return computed;\n                }\n                //  documentElement\n                const rootComputed = getComputedStyle(parentDoc.documentElement).getPropertyValue(varName).trim();\n                return rootComputed || fallback;\n            }\n            catch {\n                return fallback;\n            }\n        }\n        /**  */\n        function getThemeColors() {\n            return {\n                textMain: getCssVar('--acu-text-main', '#333333'),\n                textSub: getCssVar('--acu-text-sub', '#666666'),\n                cardBg: getCssVar('--acu-card-bg', '#ffffff'),\n                border: getCssVar('--acu-border', '#e0e0e0'),\n                titleColor: getCssVar('--acu-title-color', '#d35400'), // \n                bgPanel: getCssVar('--acu-bg-panel', '#e6e2d3'), // \n                btnBg: getCssVar('--acu-btn-bg', '#dcd0c0'), //  - NPC\n                highlight: getCssVar('--acu-highlight', '#d35400'), //  - \n                fontFamily: getCssVar('--acu-font-family', 'Source Han Sans SC, sans-serif'), // \n            };\n        }\n        /**\n         *  Canvas \n         * Cytoscape  Canvas \n         *  Canvas \n         */\n        async function preloadCanvasFont() {\n            const fontFamily = getThemeColors().fontFamily;\n            //  font-family \n            const fontName = fontFamily.split(',')[0].trim().replace(/['\"]/g, '');\n            if (!fontName)\n                return;\n            try {\n                //  FontFaceSet.load() API \n                // \n                const parentDoc = window.parent?.document || document;\n                await parentDoc.fonts.load(`16px \"${fontName}\"`);\n                console.info('[RelationshipGraph] :', fontName);\n            }\n            catch (e) {\n                console.warn('[RelationshipGraph] :', fontName, e);\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const legend = computed(() => getRelationLegend());\n        /**  */\n        const backgroundStyle = computed(() => {\n            //  ()\n            if (!graphConfigStore.config.showBackground) {\n                return { enabled: false, style: {} };\n            }\n            const bg = themeStore.backgroundConfig;\n            //  currentBackgroundUrl  externalUrl\n            const imageUrl = currentBackgroundUrl.value || bg.externalUrl || '';\n            if (!bg.enabled || !imageUrl) {\n                return { enabled: false, style: {} };\n            }\n            //  useThemeStore transform \n            const scale = (bg.scale || 100) / 100;\n            const size = bg.size === 'auto' ? '100%' : bg.size;\n            return {\n                enabled: true,\n                style: {\n                    backgroundImage: `url(${imageUrl})`,\n                    backgroundPosition: 'center center', // \n                    backgroundSize: size,\n                    backgroundRepeat: 'no-repeat',\n                    //  transform \n                    transform: `translate(${bg.offsetX || 0}%, ${bg.offsetY || 0}%) scale(${scale})`,\n                    transformOrigin: 'center center',\n                    opacity: bg.opacity / 100,\n                    filter: bg.blur > 0 ? `blur(${bg.blur}px)` : 'none',\n                    // \n                    position: 'absolute',\n                    top: '0',\n                    left: '0',\n                    width: '100%',\n                    height: '100%',\n                    zIndex: '0', // (z-index: 1)\n                    pointerEvents: 'none',\n                },\n            };\n        });\n        /**  */\n        const customLegendItems = computed(() => {\n            const legendConfig = graphConfigStore.getLegendConfig();\n            if (!legendConfig.enabled || !legendConfig.items?.length) {\n                return undefined;\n            }\n            return legendConfig.items.map(item => ({\n                label: item.label,\n                color: item.color,\n                keywords: item.keywords,\n            }));\n        });\n        /**  */\n        const parsedData = computed(() => {\n            console.info('[RelationshipGraph]  - props:', {\n                relationshipTable: props.relationshipTable?.name,\n                characterTablesCount: props.characterTables?.length,\n                characterTablesNames: props.characterTables?.map(t => t.name),\n                factionTable: props.factionTable?.name,\n                aliasMapSize: aliasMap.value.size,\n                customLegendEnabled: !!customLegendItems.value,\n            });\n            // \n            const result = parseRelationshipTable(props.relationshipTable, props.characterTables, props.factionTable, aliasMap.value, customLegendItems.value);\n            console.info('[RelationshipGraph] :', {\n                nodeCount: result.nodeCount,\n                edgeCount: result.edgeCount,\n                warnings: result.warnings,\n            });\n            // \n            if (result.nodeCount === 0 && props.characterTables && props.characterTables.length > 0) {\n                console.info('[RelationshipGraph] ');\n                const embeddedResult = parseEmbeddedRelationships(props.characterTables, props.factionTable, aliasMap.value, customLegendItems.value);\n                console.info('[RelationshipGraph] :', {\n                    nodeCount: embeddedResult.nodeCount,\n                    edgeCount: embeddedResult.edgeCount,\n                    warnings: embeddedResult.warnings,\n                });\n                return embeddedResult;\n            }\n            return result;\n        });\n        /**  */\n        const hasData = computed(() => {\n            return parsedData.value.nodeCount > 0;\n        });\n        /**  1  */\n        const currentFactions = computed(() => {\n            const { factionList, characterToFaction } = extractFactionMapping(props.allTables || [], props.characterTables || []);\n            //  1 \n            const factionsWithMembers = factionList.filter(faction => {\n                for (const [_, factionName] of characterToFaction) {\n                    if (factionName === faction)\n                        return true;\n                }\n                return false;\n            });\n            return factionsWithMembers;\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function handleBackToDashboard() {\n            uiStore.setActiveTab(TAB_DASHBOARD);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function getLayoutConfig(mode) {\n            switch (mode) {\n                case 'cola':\n                    // cola: \n                    //  fcose \n                    return {\n                        name: 'fcose',\n                        quality: 'proof',\n                        randomize: false, //  true\n                        animate: true,\n                        animationDuration: 500,\n                        fit: true,\n                        padding: 30,\n                        // \n                        nodeSeparation: 75,\n                        // \n                        idealEdgeLength: 100,\n                        // \n                        edgeElasticity: 0.45,\n                        //  ()\n                        nestingFactor: 0.1,\n                        // \n                        gravity: 0.25,\n                        // \n                        numIter: 2500,\n                        // \n                        nodeRepulsion: 4500,\n                        // \n                        tilingPaddingVertical: 10,\n                        tilingPaddingHorizontal: 10,\n                    };\n                case 'circle':\n                    //  concentric \n                    return {\n                        name: 'concentric',\n                        concentric: (node) => {\n                            // \n                            if (centerNodeId.value && node.id() === centerNodeId.value)\n                                return 100;\n                            // \n                            if (!centerNodeId.value && node.data('type') === 'protagonist')\n                                return 100;\n                            // \n                            return 1;\n                        },\n                        levelWidth: () => 1, // \n                        minNodeSpacing: 80,\n                        animate: true,\n                        animationDuration: 500,\n                        fit: true,\n                        padding: 30,\n                    };\n                case 'fcose':\n                default:\n                    // fcose: \n                    return {\n                        name: 'fcose',\n                        quality: 'proof', // \n                        randomize: false,\n                        animate: true,\n                        animationDuration: 500,\n                        fit: true,\n                        padding: 30,\n                        // \n                        nodeSeparation: 100,\n                        // \n                        idealEdgeLength: 120,\n                        // \n                        edgeElasticity: 0.45,\n                        // \n                        nestingFactor: 0.1,\n                        // \n                        gravity: 0.25,\n                        // \n                        numIter: 2500,\n                        // \n                        nodeRepulsion: 4500,\n                    };\n            }\n        }\n        // ============================================================\n        // Cytoscape \n        // ============================================================\n        /**\n         *  Cytoscape \n         */\n        function initCytoscape() {\n            if (!containerRef.value)\n                return;\n            // Cytoscape  CSS \n            const colors = getThemeColors();\n            // \n            const savedPositions = getSavedPositions();\n            const savedCount = savedPositions ? Object.keys(savedPositions).length : 0;\n            //  nodeCount elements.group \n            const currentNodeCount = parsedData.value.nodeCount;\n            //  >=  80% \n            // \n            const hasPositions = savedCount > 0 && currentNodeCount > 0 && savedCount >= currentNodeCount * 0.8;\n            console.info('[RelationshipGraph] :', {\n                : savedCount,\n                : currentNodeCount,\n                : hasPositions,\n            });\n            // \n            const elementsWithData = parsedData.value.elements.map(el => {\n                const nodeId = el.data?.id;\n                //  source  source/target\n                const isNode = nodeId && !el.data?.source;\n                if (isNode) {\n                    //  URL \n                    const avatarData = avatarCache.value.get(nodeId);\n                    // \n                    let position = undefined;\n                    if (hasPositions && savedPositions) {\n                        if (savedPositions[nodeId]) {\n                            // \n                            console.info('[RelationshipGraph] :', nodeId, savedPositions[nodeId]);\n                            position = savedPositions[nodeId];\n                        }\n                        else {\n                            //  (0,0)\n                            position = {\n                                x: (Math.random() - 0.5) * 200,\n                                y: (Math.random() - 0.5) * 200,\n                            };\n                        }\n                    }\n                    // \n                    const fullName = el.data?.fullName || el.data?.id || '';\n                    // \n                    const override = graphConfigStore.getNodeStyleOverride(nodeId);\n                    const nodeSize = override?.size ?? graphConfigStore.config.nodeSize;\n                    const nodeShape = override?.shape ?? 'ellipse';\n                    const nodeBorderWidth = override?.borderWidth ?? 0;\n                    // \n                    const defaultBorderColor = getThemeColors().textMain;\n                    const nodeBorderColor = override?.borderColor ?? defaultBorderColor;\n                    return {\n                        ...el,\n                        data: {\n                            ...el.data,\n                            avatarUrl: avatarData?.url || undefined,\n                            avatarOffsetX: avatarData?.offsetX ?? 50,\n                            avatarOffsetY: avatarData?.offsetY ?? 50,\n                            avatarScale: avatarData?.scale ?? 150,\n                            fullName: fullName, //  fullName \n                            nodeSize: nodeSize, // \n                            nodeShape: nodeShape, // \n                            nodeBorderWidth: nodeBorderWidth, // \n                            nodeBorderColor: nodeBorderColor, // \n                        },\n                        ...(position ? { position } : {}),\n                    };\n                }\n                return el;\n            });\n            cy = cytoscape({\n                container: containerRef.value,\n                elements: elementsWithData,\n                style: [\n                    // NPC - \n                    {\n                        selector: 'node',\n                        style: {\n                            label: 'data(label)',\n                            'text-valign': 'center', // \n                            'text-halign': 'center', // \n                            'text-wrap': 'wrap', // \n                            'text-max-width': `${graphConfigStore.config.nodeSize - 4}px`, // \n                            'background-color': colors.btnBg, // \n                            color: colors.textMain, // \n                            'font-family': colors.fontFamily, // \n                            // \n                            'font-size': (node) => {\n                                const label = node.data('label') || '';\n                                const len = label.length;\n                                const nodeSize = graphConfigStore.config.nodeSize;\n                                // 0.60.450.350.280.22\n                                let ratio;\n                                if (len <= 1)\n                                    ratio = 0.6;\n                                else if (len <= 2)\n                                    ratio = 0.45;\n                                else if (len <= 3)\n                                    ratio = 0.35;\n                                else if (len <= 4)\n                                    ratio = 0.28;\n                                else\n                                    ratio = 0.22;\n                                return `${Math.round(nodeSize * ratio)}px`;\n                            },\n                            'font-weight': 'bold',\n                            width: graphConfigStore.config.nodeSize,\n                            height: graphConfigStore.config.nodeSize,\n                            'border-width': 1.5, // \n                            'border-color': colors.textMain, // \n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'node.protagonist',\n                        style: {\n                            'background-color': colors.highlight, // \n                            color: colors.textMain, // \n                            'border-width': 1.5, // \n                            'border-color': colors.textMain, // \n                            //  (50x50) \n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'node.character',\n                        style: {\n                        // \n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'node.faction',\n                        style: {\n                            'background-color': colors.btnBg,\n                            color: colors.textMain,\n                            'border-width': 1.5,\n                            'border-color': colors.textMain,\n                            shape: 'round-rectangle',\n                            width: 70,\n                            height: 35,\n                            'font-size': '14px',\n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'node.unknown',\n                        style: {\n                            'background-color': colors.btnBg,\n                            color: colors.textMain,\n                            'border-width': 1.5,\n                            'border-color': colors.textMain,\n                        },\n                    },\n                    //  -  nodeHtmlLabel  HTML \n                    // Cytoscape \n                    // \n                    {\n                        selector: 'node[avatarUrl]',\n                        style: {\n                            //  HTML label \n                            'background-color': 'transparent',\n                            'background-opacity': 0,\n                            'border-width': 0,\n                            // \n                            width: graphConfigStore.config.nodeSize,\n                            height: graphConfigStore.config.nodeSize,\n                            //  Canvas  HTML label \n                            label: '',\n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'edge',\n                        style: {\n                            'curve-style': 'bezier',\n                            'target-arrow-shape': 'triangle',\n                            'target-arrow-color': 'data(color)',\n                            'line-color': 'data(color)',\n                            'line-style': 'solid',\n                            width: graphConfigStore.config.edgeWidth,\n                            label: 'data(label)',\n                            'font-size': `${graphConfigStore.config.relationLabelFontSize}px`,\n                            'font-family': colors.fontFamily, // \n                            'text-rotation': 'autorotate',\n                            'text-margin-y': -8,\n                            color: '#fff', // \n                            'text-background-color': 'data(color)', // \n                            'text-background-opacity': 0.95,\n                            // padding  25% 3px\n                            'text-background-padding': `${Math.max(3, Math.round(graphConfigStore.config.relationLabelFontSize * 0.25))}px`,\n                            'text-background-shape': 'roundrectangle', // \n                            // \n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'edge[lineStyle = \"dashed\"]',\n                        style: {\n                            'line-style': 'dashed',\n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'edge[?bidirectional]', // bidirectional = true\n                        style: {\n                            'source-arrow-shape': 'triangle', // \n                            'source-arrow-color': 'data(color)',\n                            'curve-style': 'straight', // \n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'node:selected',\n                        style: {\n                            'border-width': 4,\n                            'border-color': '#FFC107',\n                            'overlay-opacity': 0.2,\n                            'overlay-color': '#FFC107',\n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'edge:selected',\n                        style: {\n                            width: 4,\n                            'line-color': '#FFC107',\n                            'target-arrow-color': '#FFC107',\n                        },\n                    },\n                    // \n                    {\n                        selector: '.search-dimmed',\n                        style: {\n                            display: 'none',\n                        },\n                    },\n                ],\n                //  preset \n                layout: hasPositions ? { name: 'preset' } : getLayoutConfig(layoutMode.value),\n                // \n                userZoomingEnabled: true,\n                userPanningEnabled: true,\n                boxSelectionEnabled: false,\n                minZoom: 0.3,\n                maxZoom: 3,\n                //  1\n                wheelSensitivity: 0.45,\n            });\n            //  - \n            cy.on('tap', 'node', evt => {\n                const node = evt.target;\n                const nodeId = node.id();\n                const nodeType = node.data('type') || 'unknown';\n                // \n                if (isSearchMode.value) {\n                    focusOnNode(nodeId);\n                    return;\n                }\n                // \n                if (layoutMode.value === 'circle') {\n                    setCenterNode(nodeId);\n                }\n                emit('node-click', {\n                    id: nodeId,\n                    type: nodeType,\n                });\n            });\n            //  -  id  label\n            cy.on('dbltap', 'node:childless', evt => {\n                const node = evt.target;\n                // \n                if (node.hasClass('faction-container'))\n                    return;\n                openNodeConfig(node.id(), node.id()); // id \n            });\n            //  - \n            cy.on('dbltap', 'node.faction-container', evt => {\n                const node = evt.target;\n                const factionId = node.id();\n                const factionName = node.data('label') || factionId.replace('faction-container-', '');\n                uiStore.openFactionSettingsDialog(factionId, factionName);\n            });\n            cy.on('tap', 'edge', evt => {\n                const edge = evt.target;\n                emit('edge-click', {\n                    source: edge.source().id(),\n                    target: edge.target().id(),\n                    relation: edge.data('label') || '',\n                });\n            });\n            //  ( 1000ms)\n            const debouncedSaveNodePositions = useDebounceFn(() => {\n                saveNodePositions();\n            }, 1000);\n            //  - \n            cy.on('dragfree', 'node', () => {\n                debouncedSaveNodePositions();\n            });\n            //  preset \n            if (hasPositions) {\n                cy.fit(undefined, 30);\n            }\n            // \n            applyLabelConfig();\n            //  cola\n            if (layoutMode.value === 'cola') {\n                console.info('[RelationshipGraph]  cola ');\n                setupFactionContainers();\n                applyAllFactionStyles();\n            }\n            // \n            applyAllConfigs();\n            //  nodeHtmlLabel  HTML \n            //  CSS \n            cy.nodeHtmlLabel([\n                {\n                    query: 'node[avatarUrl]',\n                    halign: 'center',\n                    valign: 'center',\n                    halignBox: 'center',\n                    valignBox: 'center',\n                    tpl: (data) => {\n                        const avatarUrl = data.avatarUrl || '';\n                        const offsetX = data.avatarOffsetX ?? 50;\n                        const offsetY = data.avatarOffsetY ?? 50;\n                        const scale = data.avatarScale ?? 150;\n                        const fullName = data.fullName || data.id || '';\n                        // \n                        const nameFontSize = graphConfigStore.config.nameLabelFontSize || 14;\n                        // \n                        const nodeSize = data.nodeSize || graphConfigStore.config.nodeSize || 50;\n                        const nodeShape = data.nodeShape || 'ellipse';\n                        //  - \n                        const borderWidth = data.nodeBorderWidth ?? 0;\n                        const defaultBorderColor = getThemeColors().textMain;\n                        const borderColor = data.nodeBorderColor ?? defaultBorderColor;\n                        //  clip-path\n                        let borderRadius;\n                        let clipPath = 'none';\n                        if (nodeShape === 'ellipse') {\n                            borderRadius = '50%';\n                        }\n                        else if (nodeShape === 'round-rectangle') {\n                            borderRadius = '12px';\n                        }\n                        else if (nodeShape === 'hexagon') {\n                            //  clip-path\n                            borderRadius = '0';\n                            clipPath = 'polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)';\n                        }\n                        else {\n                            borderRadius = '0';\n                        }\n                        // \n                        const contentSize = nodeSize - borderWidth * 2;\n                        //  CSS\n                        return `\n          <div class=\"acu-graph-avatar-wrapper\">\n            <div class=\"acu-graph-avatar\" style=\"\n              width: ${contentSize}px;\n              height: ${contentSize}px;\n              border-radius: ${borderRadius};\n              border: ${borderWidth}px solid ${borderColor};\n              background-image: url('${avatarUrl}');\n              background-position: ${offsetX}% ${offsetY}%;\n              background-size: ${scale}%;\n              background-repeat: no-repeat;\n              box-sizing: content-box;\n              clip-path: ${clipPath};\n            \"></div>\n            <div class=\"acu-graph-avatar-name\" style=\"font-size: ${nameFontSize}px;\">${fullName}</div>\n          </div>\n        `;\n                    },\n                },\n            ]);\n        }\n        /**\n         * \n         */\n        function updateGraph() {\n            if (!cy)\n                return;\n            cy.elements().remove();\n            cy.add(parsedData.value.elements);\n            cy.layout(getLayoutConfig(layoutMode.value)).run();\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function toggleSearchMode() {\n            isSearchMode.value = !isSearchMode.value;\n            if (!isSearchMode.value) {\n                // \n                handleClearFocus();\n            }\n            else {\n                // \n                setTimeout(() => {\n                    searchInputRef.value?.focus();\n                }, 100);\n            }\n        }\n        /**  */\n        function handleSearchInput(term) {\n            if (!cy)\n                return;\n            const query = term.trim().toLowerCase();\n            if (!query) {\n                handleClearFocus();\n                return;\n            }\n            // \n            const matchedNode = cy\n                .nodes()\n                .filter(node => {\n                if (node.hasClass('faction-container') || node.hasClass('hidden-in-cola'))\n                    return false;\n                const id = (node.id() || '').toLowerCase();\n                const label = (node.data('label') || '').toLowerCase();\n                const fullName = (node.data('fullName') || '').toLowerCase();\n                return id.includes(query) || label.includes(query) || fullName.includes(query);\n            })\n                .first();\n            if (matchedNode && matchedNode.length > 0) {\n                focusOnNode(matchedNode.id());\n            }\n        }\n        /**  */\n        function focusOnNode(nodeId) {\n            if (!cy)\n                return;\n            const targetNode = cy.getElementById(nodeId);\n            if (!targetNode || targetNode.length === 0)\n                return;\n            focusedNodeId.value = nodeId;\n            searchTerm.value = targetNode.data('label') || nodeId;\n            cy.batch(() => {\n                // 1.  hidden-in-cola \n                if (hiddenInColaBeforeSearch.value.size === 0) {\n                    cy.elements('.hidden-in-cola').forEach(el => {\n                        hiddenInColaBeforeSearch.value.add(el.id());\n                    });\n                }\n                // 2. \n                //     hidden-in-cola \n                const neighbors = targetNode.neighborhood('node').filter(n => !n.hasClass('hidden-in-cola'));\n                // 3.  =  + \n                let focusedNodes = neighbors.add(targetNode);\n                // 4.  hidden-in-cola \n                let focusedEdges = targetNode.connectedEdges().filter(e => !e.hasClass('hidden-in-cola'));\n                // 5.  cola \n                if (layoutMode.value === 'cola') {\n                    // 5a. \n                    const parentContainerIds = new Set();\n                    focusedNodes.forEach(node => {\n                        const parent = node.parent();\n                        if (parent.length > 0 && parent.hasClass('faction-container')) {\n                            parentContainerIds.add(parent.id());\n                        }\n                    });\n                    // 5b. \n                    parentContainerIds.forEach(containerId => {\n                        const containerNode = cy.getElementById(containerId);\n                        if (containerNode.length > 0) {\n                            focusedNodes = focusedNodes.add(containerNode);\n                        }\n                    });\n                    // 5c. \n                    cy.edges('.faction-edge').forEach(edge => {\n                        const sourceId = edge.source().id();\n                        const targetId = edge.target().id();\n                        if (parentContainerIds.has(sourceId) && parentContainerIds.has(targetId)) {\n                            focusedEdges = focusedEdges.add(edge);\n                        }\n                    });\n                }\n                // 6. \n                cy.elements().addClass('search-dimmed');\n                // 7. \n                focusedNodes.removeClass('search-dimmed');\n                focusedEdges.removeClass('search-dimmed');\n            });\n            // 8. \n            const focusedEles = cy.elements().not('.search-dimmed');\n            cy.animate({\n                fit: {\n                    eles: focusedEles,\n                    padding: 50,\n                },\n                duration: 400,\n            });\n        }\n        /**  */\n        function handleClearFocus() {\n            if (!cy)\n                return;\n            focusedNodeId.value = null;\n            searchTerm.value = '';\n            cy.batch(() => {\n                // 1.  search-dimmed \n                cy.elements().removeClass('search-dimmed');\n                // 2.  hidden-in-cola \n                //     cola /\n                if (hiddenInColaBeforeSearch.value.size > 0) {\n                    hiddenInColaBeforeSearch.value.forEach(eleId => {\n                        const ele = cy.getElementById(eleId);\n                        if (ele.length > 0) {\n                            ele.addClass('hidden-in-cola');\n                        }\n                    });\n                }\n            });\n            // 3. \n            hiddenInColaBeforeSearch.value.clear();\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function zoomIn() {\n            if (!cy)\n                return;\n            cy.zoom(cy.zoom() * 1.2);\n        }\n        /**  */\n        function zoomOut() {\n            if (!cy)\n                return;\n            cy.zoom(cy.zoom() / 1.2);\n        }\n        /**  */\n        function fitToView() {\n            cy?.fit(undefined, 30);\n        }\n        /**  */\n        function setCenterNode(nodeId) {\n            if (!cy)\n                return;\n            // \n            if (centerNodeId.value === nodeId)\n                return;\n            console.info(`[RelationshipGraph] : ${centerNodeId.value || '()'}  ${nodeId}`);\n            centerNodeId.value = nodeId;\n            // \n            const layout = cy.layout(getLayoutConfig('circle'));\n            layout.run();\n        }\n        /**\n         *  cola \n         * \n         */\n        function setupFactionContainers() {\n            if (!cy)\n                return false;\n            const colors = getThemeColors();\n            // \n            const { factionList, characterToFaction, factionRelations } = extractFactionMapping(props.allTables || [], props.characterTables || []);\n            if (factionList.length === 0) {\n                console.info('[RelationshipGraph] ');\n                return false;\n            }\n            console.info(`[RelationshipGraph] : ${factionList.length} `);\n            // 1. \n            cy.nodes('.faction-container').remove();\n            // 2. \n            for (const factionName of factionList) {\n                const duplicateNode = cy.getElementById(factionName);\n                if (duplicateNode && duplicateNode.length > 0 && !duplicateNode.hasClass('faction-container')) {\n                    duplicateNode.addClass('hidden-in-cola');\n                    console.info(`[RelationshipGraph] : \"${factionName}\"`);\n                }\n            }\n            // 3. \n            for (const factionName of factionList) {\n                // \n                let hasMember = false;\n                for (const [_, faction] of characterToFaction) {\n                    if (faction === factionName) {\n                        hasMember = true;\n                        break;\n                    }\n                }\n                // \n                if (!hasMember) {\n                    console.info(`[RelationshipGraph] : \"${factionName}\"`);\n                    continue;\n                }\n                // \n                const hasConfiguredColor = graphConfigStore.hasFactionColor(factionName);\n                let factionColor;\n                if (hasConfiguredColor) {\n                    factionColor = graphConfigStore.getFactionColor(factionName, factionList);\n                }\n                else {\n                    // \n                    const index = factionList.indexOf(factionName);\n                    if (index >= 0 && index < 8) {\n                        //  8 \n                        factionColor = graphConfigStore.getFactionColor(factionName, factionList);\n                    }\n                    else {\n                        // \n                        factionColor = DEFAULT_FACTION_STYLE;\n                    }\n                }\n                cy.add({\n                    group: 'nodes',\n                    data: {\n                        id: `faction-container-${factionName}`,\n                        label: factionName,\n                        type: 'faction-container',\n                        borderColor: factionColor.border,\n                        backgroundColor: factionColor.background,\n                    },\n                    classes: 'faction-container',\n                });\n            }\n            // 4.  parent\n            characterToFaction.forEach((factionName, charName) => {\n                const node = cy?.getElementById(charName);\n                if (node && node.length > 0) {\n                    node.move({ parent: `faction-container-${factionName}` });\n                    console.info(`[RelationshipGraph]  \"${charName}\"   \"${factionName}\"`);\n                }\n            });\n            // 5. \n            let factionEdgeIndex = 0;\n            const processedPairs = new Set();\n            for (const rel of factionRelations) {\n                const sourceId = `faction-container-${rel.source}`;\n                const targetId = `faction-container-${rel.target}`;\n                // \n                const pairKey = [rel.source, rel.target].sort().join('<->');\n                if (processedPairs.has(pairKey)) {\n                    continue; // \n                }\n                // \n                if (cy.getElementById(sourceId).length > 0 && cy.getElementById(targetId).length > 0) {\n                    // \n                    const reverseRel = factionRelations.find(r => r.source === rel.target && r.target === rel.source);\n                    const isBidirectional = reverseRel && reverseRel.relation === rel.relation;\n                    if (isBidirectional) {\n                        processedPairs.add(pairKey);\n                    }\n                    const colorResult = getRelationColor(rel.relation);\n                    cy.add({\n                        group: 'edges',\n                        data: {\n                            id: `faction-edge-${factionEdgeIndex++}`,\n                            source: sourceId,\n                            target: targetId,\n                            label: rel.relation,\n                            color: colorResult.color,\n                            level: colorResult.level,\n                            bidirectional: isBidirectional, // \n                        },\n                        classes: 'faction-edge',\n                    });\n                    console.info(`[RelationshipGraph] : \"${rel.source}\" ${isBidirectional ? '' : ''} \"${rel.target}\" (${rel.relation})`);\n                }\n            }\n            // 6. \n            cy.style()\n                .selector('node.faction-container')\n                .style({\n                'background-color': 'data(backgroundColor)',\n                'background-opacity': 1,\n                'border-width': 2,\n                'border-style': 'dashed',\n                'border-color': 'data(borderColor)',\n                shape: 'roundrectangle',\n                padding: '20px',\n                label: 'data(label)',\n                'text-valign': 'top',\n                'text-halign': 'center',\n                'font-size': `${graphConfigStore.config.factionLabelFontSize}px`,\n                'font-family': colors.fontFamily, // \n                'font-weight': 'bold',\n                // \n                color: 'data(borderColor)',\n                // \n                'text-background-color': 'data(backgroundColor)',\n                'text-background-opacity': 1,\n                // padding  40% 4px\n                'text-background-padding': `${Math.max(4, Math.round(graphConfigStore.config.factionLabelFontSize * 0.4))}px`,\n                'text-background-shape': 'roundrectangle',\n                // Cytoscape  text-border-style\n                'text-border-width': 2,\n                'text-border-color': 'data(borderColor)',\n                'text-margin-y': -8,\n            })\n                .selector('edge.faction-edge')\n                .style({\n                'curve-style': 'bezier',\n                'target-arrow-shape': 'triangle',\n                'target-arrow-color': 'data(color)',\n                'line-color': 'data(color)',\n                'line-style': 'solid',\n                width: 3,\n                label: 'data(label)',\n                'font-size': `${graphConfigStore.config.relationLabelFontSize}px`,\n                'font-family': colors.fontFamily, // \n                'text-rotation': 'autorotate',\n                'text-margin-y': -10,\n                color: '#fff',\n                'text-background-color': 'data(color)',\n                'text-background-opacity': 0.95,\n                // padding  25% 3px\n                'text-background-padding': `${Math.max(3, Math.round(graphConfigStore.config.relationLabelFontSize * 0.25))}px`,\n                'text-background-shape': 'roundrectangle',\n            })\n                .selector('node.hidden-in-cola')\n                .style({\n                display: 'none',\n            })\n                .selector('edge.hidden-in-cola')\n                .style({\n                display: 'none',\n            })\n                .update();\n            // 7. \n            cy.nodes('.hidden-in-cola').connectedEdges().addClass('hidden-in-cola');\n            return true;\n        }\n        /**\n         * \n         */\n        function removeFactionContainers() {\n            if (!cy)\n                return;\n            // 1. \n            cy.nodes().forEach(node => {\n                if (node.parent().length > 0 && node.parent().is('.faction-container')) {\n                    node.move({ parent: null });\n                }\n            });\n            // 2. \n            cy.elements('.hidden-in-cola').removeClass('hidden-in-cola');\n            // 3. \n            cy.edges('.faction-edge').remove();\n            // 4. \n            cy.nodes('.faction-container').remove();\n            console.info('[RelationshipGraph] ');\n        }\n        /**  -  */\n        function setLayout(mode) {\n            if (!cy)\n                return;\n            // \n            if (mode === layoutMode.value)\n                return;\n            const previousLayout = layoutMode.value;\n            // \n            // \n            // 1.  cola \n            if (previousLayout === 'cola' && mode !== 'cola') {\n                removeFactionContainers();\n            }\n            // 2. \n            layoutMode.value = mode;\n            console.info(`[RelationshipGraph] : ${previousLayout}  ${mode}`);\n            // 3. \n            const config = getGraphConfig();\n            config.lastLayout = mode;\n            saveGraphConfig(config);\n            // 4.  cola \n            if (mode === 'cola') {\n                setupFactionContainers();\n                // \n                applyAllFactionStyles();\n            }\n            // 5. \n            const hasPositions = hasSavedPositions(mode);\n            console.info(`[RelationshipGraph]  [${mode}] : ${hasPositions}`);\n            if (hasPositions) {\n                //   \n                console.info(`[RelationshipGraph]  [${mode}] `);\n                restoreNodePositions(mode);\n            }\n            else {\n                //   \n                console.info(`[RelationshipGraph] [${mode}] `);\n                const layout = cy.layout(getLayoutConfig(mode));\n                layout.run();\n            }\n        }\n        /**  */\n        function refresh() {\n            updateGraph();\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function saveNodePositions(targetLayout) {\n            if (!cy)\n                return;\n            const layout = targetLayout || layoutMode.value;\n            const positions = {};\n            let allZero = true; //  (0, 0)\n            cy.nodes().forEach(node => {\n                const pos = node.position();\n                //  NaN\n                if (pos && isFinite(pos.x) && isFinite(pos.y)) {\n                    positions[node.id()] = { x: pos.x, y: pos.y };\n                    //  (0, 0)\n                    if (pos.x !== 0 || pos.y !== 0) {\n                        allZero = false;\n                    }\n                }\n            });\n            //  (0, 0)\n            if (allZero && Object.keys(positions).length > 0) {\n                console.warn('[RelationshipGraph]  (0, 0)');\n                return;\n            }\n            // \n            const firstNodeId = Object.keys(positions)[0];\n            const firstPos = positions[firstNodeId];\n            console.info(`[RelationshipGraph]  [${layout}]:`, Object.keys(positions).length, ` ( \"${firstNodeId}\": ${firstPos?.x?.toFixed(0)}, ${firstPos?.y?.toFixed(0)})`);\n            const config = getGraphConfig();\n            if (!config.layoutPositions) {\n                config.layoutPositions = {};\n            }\n            config.layoutPositions[layout] = positions;\n            saveGraphConfig(config);\n        }\n        /**  */\n        function restoreNodePositions(targetLayout) {\n            if (!cy)\n                return false;\n            const layout = targetLayout || layoutMode.value;\n            const positions = getSavedPositions(layout);\n            if (!positions)\n                return false;\n            // \n            const firstNodeId = Object.keys(positions)[0];\n            const firstSavedPos = positions[firstNodeId];\n            console.info(`[RelationshipGraph]  [${layout}]  ${Object.keys(positions).length}  ( \"${firstNodeId}\": =${firstSavedPos?.x?.toFixed(0)}, ${firstSavedPos?.y?.toFixed(0)})`);\n            let hasRestored = false;\n            let restoredCount = 0;\n            cy.nodes().forEach(node => {\n                const nodeId = node.id();\n                const savedPos = positions[nodeId];\n                if (savedPos) {\n                    const beforePos = node.position();\n                    //  savedPos \n                    console.info(`[RelationshipGraph]  \"${nodeId}\": =(${savedPos.x?.toFixed?.(0) ?? savedPos.x}, ${savedPos.y?.toFixed?.(0) ?? savedPos.y}), =(${beforePos.x.toFixed(0)}, ${beforePos.y.toFixed(0)})`);\n                    node.position({ x: savedPos.x, y: savedPos.y });\n                    const afterPos = node.position();\n                    console.info(`[RelationshipGraph]  \"${nodeId}\": (${beforePos.x.toFixed(0)}, ${beforePos.y.toFixed(0)})  (${afterPos.x.toFixed(0)}, ${afterPos.y.toFixed(0)})`);\n                    hasRestored = true;\n                    restoredCount++;\n                }\n            });\n            if (hasRestored) {\n                console.info(`[RelationshipGraph]  [${layout}]  ${restoredCount} `);\n                cy.fit(undefined, 30);\n            }\n            return hasRestored;\n        }\n        /**  */\n        function clearSavedPositions() {\n            const config = getGraphConfig();\n            if (config.layoutPositions) {\n                delete config.layoutPositions[layoutMode.value];\n                saveGraphConfig(config);\n            }\n            //  layoutMode.value \n            const currentLayout = layoutMode.value;\n            console.info(`[RelationshipGraph]  [${currentLayout}] `);\n            // \n            const layoutConfig = getLayoutConfig(currentLayout);\n            //  fcose  cola ( fcose) \n            if (currentLayout === 'fcose' || currentLayout === 'cola') {\n                layoutConfig.randomize = true;\n            }\n            const layout = cy?.layout(layoutConfig);\n            layout?.one('layoutstop', () => {\n                // \n                saveNodePositions(currentLayout);\n            });\n            layout?.run();\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function getLabelConfig() {\n            const config = getGraphConfig();\n            return config.labels || {};\n        }\n        /**  */\n        function saveLabelConfig(labelConfig) {\n            const config = getGraphConfig();\n            config.labels = labelConfig;\n            saveGraphConfig(config);\n        }\n        /**\n         * \n         */\n        function getDefaultIndices(fullName) {\n            const chars = getDisplayChars(fullName);\n            if (isEnglishName(fullName)) {\n                // \n                return [0];\n            }\n            // \n            return chars.length > 0 ? [chars.length - 1] : [];\n        }\n        /**\n         * \n         * - \n         * - \n         */\n        function getDisplayChars(fullName) {\n            if (isEnglishName(fullName)) {\n                return fullName.split(' ').filter(Boolean);\n            }\n            return fullName.split('');\n        }\n        /**  */\n        function applyLabelConfig() {\n            if (!cy)\n                return;\n            const config = getLabelConfig();\n            cy.nodes().forEach(node => {\n                const nodeId = node.id();\n                const nodeConfig = config[nodeId];\n                if (nodeConfig && nodeConfig.displayLabel) {\n                    // \n                    node.data('label', nodeConfig.displayLabel);\n                }\n                else {\n                    // node.id() \n                    node.data('label', nodeId);\n                }\n            });\n            console.info('[RelationshipGraph] :', Object.keys(config).length, '');\n        }\n        /**  */\n        function openNodeConfig(nodeId, fullName) {\n            // \n            const config = getLabelConfig();\n            const nodeConfig = config[nodeId];\n            const currentLabel = nodeConfig?.displayLabel || fullName;\n            const selectedIndices = nodeConfig?.selectedIndices || getDefaultIndices(fullName);\n            // \n            uiStore.openNodeConfigDialog({\n                nodeId,\n                fullName,\n                currentLabel,\n                selectedIndices,\n            }, {\n                onConfirm: handleNodeConfigConfirm,\n                onResetToFullName: handleNodeConfigResetToFullName,\n                onStyleUpdate: handleNodeStyleUpdate,\n            });\n        }\n        /**  */\n        function handleNodeConfigConfirm(nodeId, displayLabel, selectedIndices) {\n            // \n            const config = getLabelConfig();\n            config[nodeId] = {\n                displayLabel,\n                selectedIndices,\n            };\n            saveLabelConfig(config);\n            // \n            if (cy) {\n                const node = cy.getElementById(nodeId);\n                if (node) {\n                    node.data('label', displayLabel);\n                }\n            }\n        }\n        /**  */\n        function handleNodeConfigResetToFullName(nodeId, fullName) {\n            // \n            const config = getLabelConfig();\n            delete config[nodeId];\n            saveLabelConfig(config);\n            // \n            if (cy) {\n                const node = cy.getElementById(nodeId);\n                if (node) {\n                    node.data('label', fullName);\n                }\n            }\n        }\n        /**  */\n        function handleNodeStyleUpdate(nodeId) {\n            if (!cy)\n                return;\n            const node = cy.getElementById(nodeId);\n            if (!node || node.length === 0)\n                return;\n            //  store \n            const override = graphConfigStore.getNodeStyleOverride(nodeId);\n            const defaultSize = graphConfigStore.config.nodeSize || 50;\n            // \n            const newSize = override?.size ?? defaultSize;\n            const newBorderWidth = override?.borderWidth ?? 0;\n            const newBorderColor = override?.borderColor ?? 'transparent';\n            const newShape = override?.shape ?? 'ellipse';\n            //  cytoscape \n            node.style({\n                width: newSize,\n                height: newSize,\n            });\n            //  data nodeHtmlLabel \n            node.data('nodeSize', newSize);\n            node.data('nodeBorderWidth', newBorderWidth);\n            node.data('nodeBorderColor', newBorderColor);\n            node.data('nodeShape', newShape);\n            //  nodeHtmlLabel \n            // nodeHtmlLabel  data \n            node.trigger('data');\n            console.info(`[RelationshipGraph] : ${nodeId}, size=${newSize}, border=${newBorderWidth}px ${newBorderColor}, shape=${newShape}`);\n        }\n        /**  batch  */\n        function applyAllNodeStyleOverrides() {\n            if (!cy)\n                return;\n            const nodeOverrides = graphConfigStore.config.nodeOverrides || {};\n            const overrideEntries = Object.entries(nodeOverrides);\n            if (overrideEntries.length === 0)\n                return;\n            //  batch \n            cy.batch(() => {\n                for (const [nodeId, override] of overrideEntries) {\n                    const node = cy.getElementById(nodeId);\n                    if (!node || node.length === 0)\n                        continue;\n                    // \n                    if (override.size !== undefined) {\n                        node.style({\n                            width: override.size,\n                            height: override.size,\n                        });\n                        node.data('nodeSize', override.size);\n                    }\n                    //  HTML \n                    if (override.borderWidth !== undefined) {\n                        node.data('nodeBorderWidth', override.borderWidth);\n                    }\n                    if (override.borderColor !== undefined) {\n                        node.data('nodeBorderColor', override.borderColor);\n                    }\n                    if (override.shape !== undefined) {\n                        node.data('nodeShape', override.shape);\n                    }\n                }\n            });\n            console.info(`[RelationshipGraph]  ${overrideEntries.length} `);\n        }\n        /**\n         *  Cytoscape  text-valign \n         */\n        function labelPositionToTextValign(position) {\n            switch (position) {\n                case 'top':\n                case 'top-left':\n                case 'top-right':\n                    return 'top';\n                case 'bottom':\n                case 'bottom-left':\n                case 'bottom-right':\n                    return 'bottom';\n                case 'none':\n                    return 'top'; //  top\n                default:\n                    return 'top';\n            }\n        }\n        /**\n         *  Cytoscape  text-halign \n         */\n        function labelPositionToTextHalign(position) {\n            switch (position) {\n                case 'top-left':\n                case 'bottom-left':\n                    return 'left';\n                case 'top-right':\n                case 'bottom-right':\n                    return 'right';\n                case 'top':\n                case 'bottom':\n                case 'none':\n                default:\n                    return 'center';\n            }\n        }\n        /**\n         *  rgba \n         *  rgba\n         */\n        function extractOpacityFromRgba(color, defaultOpacity = 10) {\n            const match = color.match(/rgba?\\s*\\([^)]+,\\s*([\\d.]+)\\s*\\)/);\n            if (match) {\n                return Math.round(parseFloat(match[1]) * 100);\n            }\n            return defaultOpacity;\n        }\n        /**  batch  */\n        function applyAllFactionStyles() {\n            if (!cy)\n                return;\n            const factionContainers = cy.nodes('.faction-container');\n            if (factionContainers.length === 0)\n                return;\n            const colors = getThemeColors();\n            const { factionList } = extractFactionMapping(props.allTables || [], props.characterTables || []);\n            //  batch \n            cy.batch(() => {\n                factionContainers.forEach(containerNode => {\n                    const containerId = containerNode.id();\n                    const factionName = containerId.replace('faction-container-', '');\n                    // \n                    const factionConfig = graphConfigStore.getFactionOverride(containerId) || graphConfigStore.getFactionColor(factionName, factionList);\n                    //  data data() \n                    containerNode.data('borderColor', factionConfig.border);\n                    containerNode.data('backgroundColor', factionConfig.background);\n                    // \n                    const styleObj = {};\n                    // \n                    const opacity = factionConfig.opacity ?? extractOpacityFromRgba(factionConfig.background, 10);\n                    styleObj['background-opacity'] = opacity / 100;\n                    // \n                    const labelPosition = factionConfig.labelPosition ?? 'top';\n                    if (labelPosition === 'none') {\n                        //  0\n                        styleObj['text-opacity'] = 0;\n                        styleObj['text-background-opacity'] = 0;\n                    }\n                    else {\n                        // \n                        styleObj['text-opacity'] = 1;\n                        styleObj['text-background-opacity'] = 1;\n                        styleObj['label'] = factionName; // \n                        styleObj['text-valign'] = labelPositionToTextValign(labelPosition);\n                        styleObj['text-halign'] = labelPositionToTextHalign(labelPosition);\n                        //  margin\n                        //  compound node margin  padding\n                        switch (labelPosition) {\n                            case 'top':\n                                // \n                                styleObj['text-margin-y'] = -8;\n                                styleObj['text-margin-x'] = 0;\n                                break;\n                            case 'bottom':\n                                // \n                                styleObj['text-margin-y'] = 8;\n                                styleObj['text-margin-x'] = 0;\n                                break;\n                            case 'top-left':\n                                //  margin  padding \n                                styleObj['text-valign'] = 'top';\n                                styleObj['text-halign'] = 'left';\n                                styleObj['text-margin-x'] = 25; // padding(20) + (5)\n                                styleObj['text-margin-y'] = 25;\n                                break;\n                            case 'top-right':\n                                // \n                                styleObj['text-valign'] = 'top';\n                                styleObj['text-halign'] = 'right';\n                                styleObj['text-margin-x'] = -25;\n                                styleObj['text-margin-y'] = 25;\n                                break;\n                            case 'bottom-left':\n                                // \n                                styleObj['text-valign'] = 'bottom';\n                                styleObj['text-halign'] = 'left';\n                                styleObj['text-margin-x'] = 25;\n                                styleObj['text-margin-y'] = -25;\n                                break;\n                            case 'bottom-right':\n                                // \n                                styleObj['text-valign'] = 'bottom';\n                                styleObj['text-halign'] = 'right';\n                                styleObj['text-margin-x'] = -25;\n                                styleObj['text-margin-y'] = -25;\n                                break;\n                            default:\n                                styleObj['text-margin-y'] = -8;\n                                styleObj['text-margin-x'] = 0;\n                        }\n                    }\n                    // \n                    if (factionConfig.labelFontSize !== undefined) {\n                        styleObj['font-size'] = `${factionConfig.labelFontSize}px`;\n                    }\n                    //  data binding \n                    // \n                    styleObj['text-background-color'] = factionConfig.background;\n                    // \n                    styleObj['text-background-opacity'] = opacity / 100;\n                    styleObj['color'] = factionConfig.border;\n                    styleObj['text-border-color'] = factionConfig.border;\n                    containerNode.style(styleObj);\n                });\n            });\n            console.info(`[RelationshipGraph]  ${factionContainers.length} `);\n        }\n        /**  Cytoscape */\n        function applyAllConfigs() {\n            if (!cy)\n                return;\n            console.info('[RelationshipGraph] ...');\n            //  batch \n            cy.batch(() => {\n                // 1. \n                applyAllNodeStyleOverrides();\n                // 2. \n                applyAllFactionStyles();\n            });\n            // 3.  data binding \n            cy.style().update();\n            console.info('[RelationshipGraph] ');\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const avatarManagerNodes = computed(() => {\n            if (!parsedData.value || !parsedData.value.elements)\n                return [];\n            //  elements \n            return parsedData.value.elements\n                .filter(el => !el.data.source && !el.data.target) //  source/target\n                .map(el => ({\n                id: el.data.id,\n                // name  id NodeLabelDialog\n                name: el.data.id,\n                // label \n                label: el.data.label || el.data.id,\n                type: el.data.type || 'character',\n            }));\n        });\n        /**  */\n        const factionListForAvatar = computed(() => {\n            return currentFactions.value.map((name, index) => ({\n                id: `faction_${index}`,\n                name,\n            }));\n        });\n        /**  */\n        function openAvatarManager() {\n            //  has-modal \n            const { $ } = getCore();\n            $('.acu-data-display').addClass('has-modal');\n            // \n            uiStore.openAvatarManagerDialog({\n                nodes: avatarManagerNodes.value,\n                factions: factionListForAvatar.value,\n            }, {\n                onUpdate: handleAvatarUpdate,\n                onLabelChange: handleLabelChange,\n            });\n        }\n        /**  */\n        function openGraphSettings() {\n            // \n            uiStore.openGraphSettingsDialog(currentFactions.value);\n        }\n        /**  -  watch  uiStore.avatarManagerDialog.visible  */\n        watch(() => uiStore.avatarManagerDialog.visible, newVisible => {\n            if (!newVisible) {\n                //  has-modal \n                const { $ } = getCore();\n                $('.acu-data-display').removeClass('has-modal');\n            }\n        });\n        /**  */\n        function updateGraphStyles() {\n            if (!cy)\n                return;\n            const config = graphConfigStore.config;\n            console.info('[RelationshipGraph] ');\n            //  batch \n            cy.batch(() => {\n                // \n                cy\n                    .style()\n                    .selector('node')\n                    .style({\n                    width: config.nodeSize,\n                    height: config.nodeSize,\n                    'text-max-width': `${config.nodeSize - 4}px`,\n                })\n                    .selector('node[avatarUrl]')\n                    .style({\n                    width: config.nodeSize,\n                    height: config.nodeSize,\n                })\n                    .selector('edge')\n                    .style({\n                    width: config.edgeWidth,\n                    'font-size': `${config.relationLabelFontSize}px`,\n                })\n                    .selector('node.faction-container')\n                    .style({\n                    'font-size': `${config.factionLabelFontSize}px`,\n                })\n                    .selector('edge.faction-edge')\n                    .style({\n                    'font-size': `${config.relationLabelFontSize}px`,\n                })\n                    .update();\n            });\n            // \n            applyAllConfigs();\n        }\n        /**  */\n        watch(() => graphConfigStore.config, () => {\n            updateGraphStyles();\n        }, { deep: true });\n        /**  */\n        watch(() => graphConfigStore.config.nodeOverrides, () => {\n            if (cy) {\n                applyAllNodeStyleOverrides();\n                cy.style().update();\n            }\n        }, { deep: true });\n        /**  */\n        watch(() => graphConfigStore.config.factionColors, () => {\n            if (cy) {\n                applyAllFactionStyles();\n                cy.style().update();\n            }\n        }, { deep: true });\n        /**  */\n        watch(() => graphConfigStore.config.legendConfig, () => {\n            // \n            // parsedData  computed \n            //  Cytoscape \n            if (cy && hasData.value) {\n                console.info('[RelationshipGraph] ');\n                // \n                cy.batch(() => {\n                    const newElements = parsedData.value.elements;\n                    const edgeElements = newElements.filter(el => el.data.source && el.data.target);\n                    for (const edgeData of edgeElements) {\n                        const edgeId = edgeData.data.id;\n                        if (!edgeId)\n                            continue;\n                        const edge = cy.getElementById(edgeId);\n                        if (edge && edge.length > 0) {\n                            //  data \n                            edge.data('color', edgeData.data.color);\n                            edge.data('level', edgeData.data.level);\n                        }\n                    }\n                });\n                cy.style().update();\n            }\n        }, { deep: true });\n        /**  ID */\n        let bgLoadRequestId = 0;\n        /**  */\n        watch(\n        //  imageUrl \n        () => themeStore.backgroundConfig.imageUrl, newUrl => {\n            //  URL\n            if (newUrl) {\n                if (currentBackgroundUrl.value !== newUrl) {\n                    currentBackgroundUrl.value = newUrl;\n                    console.info('[RelationshipGraph]  themeStore');\n                }\n            }\n            else {\n                // URL  themeStore \n                // themeStore.applyPreset  imageUrl\n                //  URL \n                const requestId = ++bgLoadRequestId;\n                setTimeout(() => {\n                    //  imageUrl \n                    if (requestId === bgLoadRequestId && !themeStore.backgroundConfig.imageUrl) {\n                        // \n                        if (currentBackgroundUrl.value) {\n                            currentBackgroundUrl.value = null;\n                            console.info('[RelationshipGraph] ');\n                        }\n                    }\n                }, 150); //  themeStore 150ms \n            }\n        });\n        /**  */\n        async function loadAliasMap() {\n            try {\n                const map = await avatarManager.getAliasMap();\n                aliasMap.value = map;\n                console.info(`[RelationshipGraph] : ${map.size} `);\n            }\n            catch (e) {\n                console.warn('[RelationshipGraph] :', e);\n            }\n        }\n        /**  */\n        async function preloadAvatars() {\n            const nodes = parsedData.value.elements.filter(el => !el.data.source && !el.data.target);\n            const cache = new Map();\n            for (const node of nodes) {\n                const nodeName = node.data.id;\n                if (!nodeName)\n                    continue;\n                try {\n                    const url = await avatarManager.getAvatarUrl(nodeName);\n                    if (url) {\n                        // \n                        const displayConfig = await avatarManager.getAvatarDisplayConfig(nodeName);\n                        cache.set(nodeName, {\n                            url,\n                            offsetX: displayConfig.offsetX,\n                            offsetY: displayConfig.offsetY,\n                            scale: displayConfig.scale,\n                        });\n                    }\n                }\n                catch (e) {\n                    console.warn(`[RelationshipGraph] : ${nodeName}`, e);\n                }\n            }\n            avatarCache.value = cache;\n            console.info(`[RelationshipGraph] : ${cache.size}/${nodes.length}`);\n        }\n        /**  */\n        async function handleAvatarUpdate() {\n            console.log('[RelationshipGraph] handleAvatarUpdate ');\n            // \n            await loadAliasMap();\n            await preloadAvatars();\n            if (cy) {\n                // \n                cy.nodes().forEach(node => {\n                    const nodeName = node.id();\n                    const avatarData = avatarCache.value.get(nodeName);\n                    if (avatarData) {\n                        node.data('avatarUrl', avatarData.url);\n                        node.data('avatarOffsetX', avatarData.offsetX);\n                        node.data('avatarOffsetY', avatarData.offsetY);\n                        node.data('avatarScale', avatarData.scale);\n                    }\n                    else {\n                        node.removeData('avatarUrl');\n                        node.removeData('avatarOffsetX');\n                        node.removeData('avatarOffsetY');\n                        node.removeData('avatarScale');\n                    }\n                });\n                // - \n                applyLabelConfig();\n                // \n                cy.nodes().trigger('data');\n                // \n                cy.style().update();\n            }\n        }\n        /**  */\n        function handleLabelChange() {\n            console.log('[RelationshipGraph] handleLabelChange ');\n            if (cy) {\n                // \n                applyLabelConfig();\n                // \n                cy.style().update();\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const isInitialized = ref(false);\n        /**  -  */\n        async function loadBackgroundImage() {\n            const config = themeStore.backgroundConfig;\n            //  themeStore  imageUrl\n            if (config.imageUrl) {\n                currentBackgroundUrl.value = config.imageUrl;\n                console.info('[RelationshipGraph]  themeStore ');\n                return;\n            }\n            // themeStore  imageUrl IndexedDB \n            //  themeStore \n            if (config.hasIndexedDBImage) {\n                try {\n                    const blobUrl = await loadBackground(GLOBAL_THEME_BG_KEY);\n                    if (blobUrl) {\n                        currentBackgroundUrl.value = blobUrl;\n                        console.info('[RelationshipGraph]  IndexedDB ');\n                    }\n                }\n                catch (e) {\n                    console.warn('[RelationshipGraph] :', e);\n                }\n            }\n            else if (config.externalUrl) {\n                currentBackgroundUrl.value = config.externalUrl;\n                console.info('[RelationshipGraph]  URL ');\n            }\n        }\n        onMounted(async () => {\n            // \n            await Promise.all([loadAliasMap(), loadBackgroundImage()]);\n            // \n            if (hasData.value) {\n                await preloadAvatars();\n                await preloadCanvasFont();\n                initCytoscape();\n                isInitialized.value = true;\n            }\n        });\n        // \n        watch(hasData, async (newValue) => {\n            if (newValue && !isInitialized.value && containerRef.value) {\n                console.info('[RelationshipGraph] ...');\n                await preloadAvatars();\n                await preloadCanvasFont();\n                console.info('[RelationshipGraph] ');\n                initCytoscape();\n                isInitialized.value = true;\n            }\n        }, { immediate: true });\n        onBeforeUnmount(() => {\n            // \n            cy?.destroy();\n            cy = null;\n            //  ObjectURL\n            //  currentBackgroundUrl  themeStore \n            //  themeStore \n            if (currentBackgroundUrl.value?.startsWith('blob:') &&\n                currentBackgroundUrl.value !== themeStore.backgroundConfig.imageUrl) {\n                revokeBlobUrl(currentBackgroundUrl.value);\n                currentBackgroundUrl.value = null;\n            }\n        });\n        // \n        watch(() => props.relationshipTable, () => {\n            if (cy) {\n                updateGraph();\n            }\n        }, { deep: true });\n        // // - \n        watch([\n            () => configStore.config.theme,\n            () => themeStore.activePresetId,\n            () => themeStore.currentHighlight,\n            () => themeStore.currentThemeVars,\n        ], () => {\n            if (cy) {\n                //  nextTick  setTimeout  CSS \n                setTimeout(() => {\n                    // \n                    updateNodeColors();\n                    // \n                    applyAllFactionStyles();\n                    // \n                    cy.style().update();\n                }, 100);\n            }\n        }, { deep: true });\n        //  - \n        watch(() => configStore.config.fontFamily, async () => {\n            if (cy) {\n                //  Cytoscape \n                await preloadCanvasFont();\n                updateNodeColors();\n            }\n        });\n        /**\n         * /\n         *\n         * Cytoscape  cy.style().selector().style().update() \n         *  font-family\n         * \n         */\n        function updateNodeColors() {\n            if (!cy)\n                return;\n            const colors = getThemeColors();\n            //  batch \n            cy.batch(() => {\n                // \n                cy.nodes().forEach(node => {\n                    // \n                    const baseStyles = {\n                        'font-family': colors.fontFamily,\n                        color: colors.textMain,\n                        'border-width': 1.5,\n                        'border-color': colors.textMain,\n                    };\n                    // \n                    if (node.hasClass('protagonist')) {\n                        baseStyles['background-color'] = colors.highlight;\n                    }\n                    else if (!node.hasClass('faction-container') && !node.data('avatarUrl')) {\n                        // \n                        baseStyles['background-color'] = colors.btnBg;\n                    }\n                    // \n                    node.style(baseStyles);\n                });\n                // \n                cy.edges().forEach(edge => {\n                    edge.style('font-family', colors.fontFamily);\n                });\n            });\n            // \n            cy.style().update();\n            console.info('[RelationshipGraph] ');\n        }\n        // \n        __expose({\n            fitToView,\n            zoomIn,\n            zoomOut,\n            setLayout,\n            refresh,\n            applyAllConfigs,\n            applyAllNodeStyleOverrides,\n            applyAllFactionStyles,\n            openAvatarManager,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                (backgroundStyle.value.enabled)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"acu-graph-background\",\n                        style: _normalizeStyle(backgroundStyle.value.style)\n                    }, null, 4 /* STYLE */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                (_unref(graphConfigStore).config.showLegend)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(legend.value, (item) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: item.level,\n                                class: \"acu-legend-item\"\n                            }, [\n                                _createElementVNode(\"span\", {\n                                    class: _normalizeClass([\"dot\", { dashed: item.isDashed }]),\n                                    style: _normalizeStyle({ backgroundColor: item.isDashed ? 'transparent' : item.color, borderColor: item.color })\n                                }, null, 6 /* CLASS, STYLE */),\n                                _createElementVNode(\"span\", _hoisted_3, _toDisplayString(item.emoji) + \" \" + _toDisplayString(item.name), 1 /* TEXT */)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    ref_key: \"containerRef\",\n                    ref: containerRef,\n                    class: \"acu-graph-container\"\n                }, null, 512 /* NEED_PATCH */),\n                _createCommentVNode(\"  \"),\n                _createVNode(_Transition, { name: \"acu-slide-up\" }, {\n                    default: _withCtx(() => [\n                        (isSearchMode.value)\n                            ? (_openBlock(), _createBlock(SearchBox, {\n                                key: 0,\n                                ref_key: \"searchInputRef\",\n                                ref: searchInputRef,\n                                modelValue: searchTerm.value,\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((searchTerm).value = $event)),\n                                class: \"acu-graph-search-input\",\n                                placeholder: \"...\",\n                                autofocus: true,\n                                \"show-result-count\": false,\n                                onSearch: handleSearchInput,\n                                onClear: handleClearFocus\n                            }, null, 8 /* PROPS */, [\"modelValue\"]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-icon-btn\", { active: isSearchMode.value }]),\n                        title: \"\",\n                        onClick: toggleSearchMode\n                    }, [...(_cache[4] || (_cache[4] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */)\n                        ]))], 2 /* CLASS */),\n                    _cache[12] || (_cache[12] = _createElementVNode(\"span\", { class: \"acu-toolbar-divider\" }, null, -1 /* CACHED */)),\n                    _createElementVNode(\"button\", {\n                        class: \"acu-icon-btn\",\n                        title: \"\",\n                        onClick: fitToView\n                    }, [...(_cache[5] || (_cache[5] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-compress-arrows-alt\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"acu-toolbar-divider\" }, null, -1 /* CACHED */)),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-icon-btn\", { active: layoutMode.value === 'fcose' }]),\n                        title: \"\",\n                        onClick: _cache[1] || (_cache[1] = ($event) => (setLayout('fcose')))\n                    }, [...(_cache[6] || (_cache[6] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-project-diagram\" }, null, -1 /* CACHED */)\n                        ]))], 2 /* CLASS */),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-icon-btn\", { active: layoutMode.value === 'cola' }]),\n                        title: \"\",\n                        onClick: _cache[2] || (_cache[2] = ($event) => (setLayout('cola')))\n                    }, [...(_cache[7] || (_cache[7] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-object-group\" }, null, -1 /* CACHED */)\n                        ]))], 2 /* CLASS */),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-icon-btn\", { active: layoutMode.value === 'circle' }]),\n                        title: \"\",\n                        onClick: _cache[3] || (_cache[3] = ($event) => (setLayout('circle')))\n                    }, [...(_cache[8] || (_cache[8] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-circle-notch\" }, null, -1 /* CACHED */)\n                        ]))], 2 /* CLASS */),\n                    _cache[14] || (_cache[14] = _createElementVNode(\"span\", { class: \"acu-toolbar-divider\" }, null, -1 /* CACHED */)),\n                    _createElementVNode(\"button\", {\n                        class: \"acu-icon-btn\",\n                        title: \"\",\n                        onClick: clearSavedPositions\n                    }, [...(_cache[9] || (_cache[9] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"acu-toolbar-divider\" }, null, -1 /* CACHED */)),\n                    _createElementVNode(\"button\", {\n                        class: \"acu-icon-btn\",\n                        title: \"\",\n                        onClick: _withModifiers(openGraphSettings, [\"stop\"])\n                    }, [...(_cache[10] || (_cache[10] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-cog\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _cache[16] || (_cache[16] = _createElementVNode(\"span\", { class: \"acu-toolbar-divider\" }, null, -1 /* CACHED */)),\n                    _createElementVNode(\"button\", {\n                        class: \"acu-icon-btn\",\n                        title: \"\",\n                        onClick: _withModifiers(handleBackToDashboard, [\"stop\"])\n                    }, [...(_cache[11] || (_cache[11] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-arrow-left\" }, null, -1 /* CACHED */)\n                        ]))])\n                ]),\n                _createCommentVNode(\"  \"),\n                (!hasData.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[17] || (_cache[17] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-project-diagram\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"p\", null, \"\", -1 /* CACHED */),\n                            _createElementVNode(\"p\", { class: \"hint\" }, \"\\\"\\\"\", -1 /* CACHED */)\n                        ]))]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./RelationshipGraph.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RelationshipGraph.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./RelationshipGraph.vue?vue&type=style&index=0&id=3249c691&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"acu-search-input-wrapper\" };\nconst _hoisted_2 = [\"placeholder\"];\nconst _hoisted_3 = {\n    key: 0,\n    class: \"acu-search-result\"\n};\nconst _hoisted_4 = {\n    key: 1,\n    class: \"no-result\"\n};\nimport { ref, watch, onMounted } from 'vue';\nimport { useDebounceFn } from '@vueuse/core';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SearchBox',\n    props: {\n        modelValue: {},\n        resultCount: {},\n        debounce: { default: 300 },\n        autofocus: { type: Boolean, default: false },\n        placeholder: { default: '...' },\n        showResultCount: { type: Boolean, default: true }\n    },\n    emits: [\"update:modelValue\", \"search\", \"clear\", \"searchImmediate\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * SearchBox \n         *\n         * \n         * - \n         * - \n         * - \n         * - Escape Enter \n         * - \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs\n        // ============================================================\n        const inputRef = ref();\n        const searchTerm = ref(props.modelValue);\n        const isFocused = ref(false);\n        // ============================================================\n        // VueUse Composables\n        // ============================================================\n        // \n        if (props.autofocus) {\n            onMounted(() => {\n                inputRef.value?.focus();\n            });\n        }\n        // \n        const debouncedSearch = useDebounceFn((value) => {\n            emit('update:modelValue', value);\n            emit('search', value);\n        }, props.debounce);\n        // ============================================================\n        // Watchers\n        // ============================================================\n        // \n        watch(searchTerm, value => {\n            debouncedSearch(value);\n        });\n        // \n        watch(() => props.modelValue, value => {\n            if (value !== searchTerm.value) {\n                searchTerm.value = value;\n            }\n        });\n        // ============================================================\n        // Methods\n        // ============================================================\n        /**\n         * \n         */\n        const handleClear = () => {\n            searchTerm.value = '';\n            emit('update:modelValue', '');\n            emit('search', '');\n            emit('clear');\n            // \n            inputRef.value?.focus();\n        };\n        /**\n         * Enter \n         */\n        const handleEnter = () => {\n            // \n            emit('update:modelValue', searchTerm.value);\n            emit('search', searchTerm.value);\n            emit('searchImmediate', searchTerm.value);\n        };\n        /**\n         * \n         */\n        const focus = () => {\n            inputRef.value?.focus();\n        };\n        /**\n         * \n         */\n        const blur = () => {\n            inputRef.value?.blur();\n        };\n        /**\n         * \n         */\n        const selectAll = () => {\n            inputRef.value?.select();\n        };\n        // ============================================================\n        // Expose\n        // ============================================================\n        __expose({\n            /**  */\n            focus,\n            /**  */\n            blur,\n            /**  */\n            clear: handleClear,\n            /**  */\n            selectAll,\n            /**  */\n            inputRef,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"acu-search-box\", { focused: isFocused.value, 'has-value': searchTerm.value }])\n            }, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\"  \"),\n                    _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-search acu-search-icon\" }, null, -1 /* CACHED */)),\n                    _createCommentVNode(\"  \"),\n                    _withDirectives(_createElementVNode(\"input\", {\n                        ref_key: \"inputRef\",\n                        ref: inputRef,\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((searchTerm).value = $event)),\n                        type: \"text\",\n                        class: \"acu-search-input\",\n                        placeholder: __props.placeholder,\n                        onFocus: _cache[1] || (_cache[1] = ($event) => (isFocused.value = true)),\n                        onBlur: _cache[2] || (_cache[2] = ($event) => (isFocused.value = false)),\n                        onKeydown: [\n                            _withKeys(handleClear, [\"escape\"]),\n                            _withKeys(handleEnter, [\"enter\"])\n                        ]\n                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_2), [\n                        [_vModelText, searchTerm.value]\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createVNode(_Transition, { name: \"acu-fade\" }, {\n                        default: _withCtx(() => [\n                            (searchTerm.value)\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 0,\n                                    class: \"acu-search-clear\",\n                                    title: \"\",\n                                    onClick: handleClear\n                                }, [...(_cache[3] || (_cache[3] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _: 1 /* STABLE */\n                    })\n                ]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_Transition, { name: \"acu-fade\" }, {\n                    default: _withCtx(() => [\n                        (__props.showResultCount && __props.resultCount !== undefined)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                                (__props.resultCount > 0)\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                        _cache[5] || (_cache[5] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                        _createElementVNode(\"strong\", null, _toDisplayString(__props.resultCount), 1 /* TEXT */),\n                                        _cache[6] || (_cache[6] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                                    : (searchTerm.value)\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, \"\"))\n                                        : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SearchBox.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SearchBox.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nmodule.exports = x({ [\"klona\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_klona_esm_74666e88__.klona) });","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nmodule.exports = x({ [\"createPinia\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.createPinia), [\"defineStore\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.defineStore), [\"storeToRefs\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.storeToRefs) });","module.exports = Vue;","import { noop, makeDestructurable, camelize, isClient, toArray, watchImmediate, isObject, tryOnScopeDispose, isIOS, notNullish, tryOnMounted, objectOmit, promiseTimeout, until, injectLocal, provideLocal, pxValue, increaseWithUnit, objectEntries, createRef, createSingletonPromise, useTimeoutFn, pausableWatch, toRef, createEventHook, useIntervalFn, computedWithControl, timestamp, pausableFilter, watchIgnorable, debounceFilter, bypassFilter, createFilterWrapper, toRefs, watchOnce, containsProp, hasOwn, throttleFilter, useDebounceFn, useThrottleFn, tryOnUnmounted, clamp, syncRef, objectPick, watchWithFilter, identity, isDef, whenever, isWorker } from '@vueuse/shared';\nexport * from '@vueuse/shared';\nimport { isRef, shallowRef, ref, watchEffect, computed, inject, defineComponent, h, TransitionGroup, Fragment, shallowReactive, toValue, unref, getCurrentInstance, onMounted, watch, customRef, onUpdated, readonly, reactive, hasInjectionContext, toRaw, shallowReadonly, nextTick, markRaw, getCurrentScope, isReadonly, onBeforeUpdate } from 'vue';\n\nfunction computedAsync(evaluationCallback, initialState, optionsOrRef) {\n  var _a;\n  let options;\n  if (isRef(optionsOrRef)) {\n    options = {\n      evaluating: optionsOrRef\n    };\n  } else {\n    options = optionsOrRef || {};\n  }\n  const {\n    lazy = false,\n    flush = \"pre\",\n    evaluating = void 0,\n    shallow = true,\n    onError = (_a = globalThis.reportError) != null ? _a : noop\n  } = options;\n  const started = shallowRef(!lazy);\n  const current = shallow ? shallowRef(initialState) : ref(initialState);\n  let counter = 0;\n  watchEffect(async (onInvalidate) => {\n    if (!started.value)\n      return;\n    counter++;\n    const counterAtBeginning = counter;\n    let hasFinished = false;\n    if (evaluating) {\n      Promise.resolve().then(() => {\n        evaluating.value = true;\n      });\n    }\n    try {\n      const result = await evaluationCallback((cancelCallback) => {\n        onInvalidate(() => {\n          if (evaluating)\n            evaluating.value = false;\n          if (!hasFinished)\n            cancelCallback();\n        });\n      });\n      if (counterAtBeginning === counter)\n        current.value = result;\n    } catch (e) {\n      onError(e);\n    } finally {\n      if (evaluating && counterAtBeginning === counter)\n        evaluating.value = false;\n      hasFinished = true;\n    }\n  }, { flush });\n  if (lazy) {\n    return computed(() => {\n      started.value = true;\n      return current.value;\n    });\n  } else {\n    return current;\n  }\n}\n\nfunction computedInject(key, options, defaultSource, treatDefaultAsFactory) {\n  let source = inject(key);\n  if (defaultSource)\n    source = inject(key, defaultSource);\n  if (treatDefaultAsFactory)\n    source = inject(key, defaultSource, treatDefaultAsFactory);\n  if (typeof options === \"function\") {\n    return computed((oldValue) => options(source, oldValue));\n  } else {\n    return computed({\n      get: (oldValue) => options.get(source, oldValue),\n      set: options.set\n    });\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createReusableTemplate(options = {}) {\n  const {\n    inheritAttrs = true\n  } = options;\n  const render = shallowRef();\n  const define = /*@__PURE__*/ defineComponent({\n    setup(_, { slots }) {\n      return () => {\n        render.value = slots.default;\n      };\n    }\n  });\n  const reuse = /*@__PURE__*/ defineComponent({\n    inheritAttrs,\n    props: options.props,\n    setup(props, { attrs, slots }) {\n      return () => {\n        var _a;\n        if (!render.value && process.env.NODE_ENV !== \"production\")\n          throw new Error(\"[VueUse] Failed to find the definition of reusable template\");\n        const vnode = (_a = render.value) == null ? void 0 : _a.call(render, {\n          ...options.props == null ? keysToCamelKebabCase(attrs) : props,\n          $slots: slots\n        });\n        return inheritAttrs && (vnode == null ? void 0 : vnode.length) === 1 ? vnode[0] : vnode;\n      };\n    }\n  });\n  return makeDestructurable(\n    { define, reuse },\n    [define, reuse]\n  );\n}\nfunction keysToCamelKebabCase(obj) {\n  const newObj = {};\n  for (const key in obj)\n    newObj[camelize(key)] = obj[key];\n  return newObj;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createTemplatePromise(options = {}) {\n  let index = 0;\n  const instances = ref([]);\n  function create(...args) {\n    const props = shallowReactive({\n      key: index++,\n      args,\n      promise: void 0,\n      resolve: () => {\n      },\n      reject: () => {\n      },\n      isResolving: false,\n      options\n    });\n    instances.value.push(props);\n    props.promise = new Promise((_resolve, _reject) => {\n      props.resolve = (v) => {\n        props.isResolving = true;\n        return _resolve(v);\n      };\n      props.reject = _reject;\n    }).finally(() => {\n      props.promise = void 0;\n      const index2 = instances.value.indexOf(props);\n      if (index2 !== -1)\n        instances.value.splice(index2, 1);\n    });\n    return props.promise;\n  }\n  function start(...args) {\n    if (options.singleton && instances.value.length > 0)\n      return instances.value[0].promise;\n    return create(...args);\n  }\n  const component = /*@__PURE__*/ defineComponent((_, { slots }) => {\n    const renderList = () => instances.value.map((props) => {\n      var _a;\n      return h(Fragment, { key: props.key }, (_a = slots.default) == null ? void 0 : _a.call(slots, props));\n    });\n    if (options.transition)\n      return () => h(TransitionGroup, options.transition, renderList);\n    return renderList;\n  });\n  component.start = start;\n  return component;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createUnrefFn(fn) {\n  return function(...args) {\n    return fn.apply(this, args.map((i) => toValue(i)));\n  };\n}\n\nconst defaultWindow = isClient ? window : void 0;\nconst defaultDocument = isClient ? window.document : void 0;\nconst defaultNavigator = isClient ? window.navigator : void 0;\nconst defaultLocation = isClient ? window.location : void 0;\n\nfunction unrefElement(elRef) {\n  var _a;\n  const plain = toValue(elRef);\n  return (_a = plain == null ? void 0 : plain.$el) != null ? _a : plain;\n}\n\nfunction useEventListener(...args) {\n  const cleanups = [];\n  const cleanup = () => {\n    cleanups.forEach((fn) => fn());\n    cleanups.length = 0;\n  };\n  const register = (el, event, listener, options) => {\n    el.addEventListener(event, listener, options);\n    return () => el.removeEventListener(event, listener, options);\n  };\n  const firstParamTargets = computed(() => {\n    const test = toArray(toValue(args[0])).filter((e) => e != null);\n    return test.every((e) => typeof e !== \"string\") ? test : void 0;\n  });\n  const stopWatch = watchImmediate(\n    () => {\n      var _a, _b;\n      return [\n        (_b = (_a = firstParamTargets.value) == null ? void 0 : _a.map((e) => unrefElement(e))) != null ? _b : [defaultWindow].filter((e) => e != null),\n        toArray(toValue(firstParamTargets.value ? args[1] : args[0])),\n        toArray(unref(firstParamTargets.value ? args[2] : args[1])),\n        // @ts-expect-error - TypeScript gets the correct types, but somehow still complains\n        toValue(firstParamTargets.value ? args[3] : args[2])\n      ];\n    },\n    ([raw_targets, raw_events, raw_listeners, raw_options]) => {\n      cleanup();\n      if (!(raw_targets == null ? void 0 : raw_targets.length) || !(raw_events == null ? void 0 : raw_events.length) || !(raw_listeners == null ? void 0 : raw_listeners.length))\n        return;\n      const optionsClone = isObject(raw_options) ? { ...raw_options } : raw_options;\n      cleanups.push(\n        ...raw_targets.flatMap(\n          (el) => raw_events.flatMap(\n            (event) => raw_listeners.map((listener) => register(el, event, listener, optionsClone))\n          )\n        )\n      );\n    },\n    { flush: \"post\" }\n  );\n  const stop = () => {\n    stopWatch();\n    cleanup();\n  };\n  tryOnScopeDispose(cleanup);\n  return stop;\n}\n\nlet _iOSWorkaround = false;\nfunction onClickOutside(target, handler, options = {}) {\n  const { window = defaultWindow, ignore = [], capture = true, detectIframe = false, controls = false } = options;\n  if (!window) {\n    return controls ? { stop: noop, cancel: noop, trigger: noop } : noop;\n  }\n  if (isIOS && !_iOSWorkaround) {\n    _iOSWorkaround = true;\n    const listenerOptions = { passive: true };\n    Array.from(window.document.body.children).forEach((el) => el.addEventListener(\"click\", noop, listenerOptions));\n    window.document.documentElement.addEventListener(\"click\", noop, listenerOptions);\n  }\n  let shouldListen = true;\n  const shouldIgnore = (event) => {\n    return toValue(ignore).some((target2) => {\n      if (typeof target2 === \"string\") {\n        return Array.from(window.document.querySelectorAll(target2)).some((el) => el === event.target || event.composedPath().includes(el));\n      } else {\n        const el = unrefElement(target2);\n        return el && (event.target === el || event.composedPath().includes(el));\n      }\n    });\n  };\n  function hasMultipleRoots(target2) {\n    const vm = toValue(target2);\n    return vm && vm.$.subTree.shapeFlag === 16;\n  }\n  function checkMultipleRoots(target2, event) {\n    const vm = toValue(target2);\n    const children = vm.$.subTree && vm.$.subTree.children;\n    if (children == null || !Array.isArray(children))\n      return false;\n    return children.some((child) => child.el === event.target || event.composedPath().includes(child.el));\n  }\n  const listener = (event) => {\n    const el = unrefElement(target);\n    if (event.target == null)\n      return;\n    if (!(el instanceof Element) && hasMultipleRoots(target) && checkMultipleRoots(target, event))\n      return;\n    if (!el || el === event.target || event.composedPath().includes(el))\n      return;\n    if (\"detail\" in event && event.detail === 0)\n      shouldListen = !shouldIgnore(event);\n    if (!shouldListen) {\n      shouldListen = true;\n      return;\n    }\n    handler(event);\n  };\n  let isProcessingClick = false;\n  const cleanup = [\n    useEventListener(window, \"click\", (event) => {\n      if (!isProcessingClick) {\n        isProcessingClick = true;\n        setTimeout(() => {\n          isProcessingClick = false;\n        }, 0);\n        listener(event);\n      }\n    }, { passive: true, capture }),\n    useEventListener(window, \"pointerdown\", (e) => {\n      const el = unrefElement(target);\n      shouldListen = !shouldIgnore(e) && !!(el && !e.composedPath().includes(el));\n    }, { passive: true }),\n    detectIframe && useEventListener(window, \"blur\", (event) => {\n      setTimeout(() => {\n        var _a;\n        const el = unrefElement(target);\n        if (((_a = window.document.activeElement) == null ? void 0 : _a.tagName) === \"IFRAME\" && !(el == null ? void 0 : el.contains(window.document.activeElement))) {\n          handler(event);\n        }\n      }, 0);\n    }, { passive: true })\n  ].filter(Boolean);\n  const stop = () => cleanup.forEach((fn) => fn());\n  if (controls) {\n    return {\n      stop,\n      cancel: () => {\n        shouldListen = false;\n      },\n      trigger: (event) => {\n        shouldListen = true;\n        listener(event);\n        shouldListen = false;\n      }\n    };\n  }\n  return stop;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useMounted() {\n  const isMounted = shallowRef(false);\n  const instance = getCurrentInstance();\n  if (instance) {\n    onMounted(() => {\n      isMounted.value = true;\n    }, instance);\n  }\n  return isMounted;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useSupported(callback) {\n  const isMounted = useMounted();\n  return computed(() => {\n    isMounted.value;\n    return Boolean(callback());\n  });\n}\n\nfunction useMutationObserver(target, callback, options = {}) {\n  const { window = defaultWindow, ...mutationOptions } = options;\n  let observer;\n  const isSupported = useSupported(() => window && \"MutationObserver\" in window);\n  const cleanup = () => {\n    if (observer) {\n      observer.disconnect();\n      observer = void 0;\n    }\n  };\n  const targets = computed(() => {\n    const value = toValue(target);\n    const items = toArray(value).map(unrefElement).filter(notNullish);\n    return new Set(items);\n  });\n  const stopWatch = watch(\n    targets,\n    (newTargets) => {\n      cleanup();\n      if (isSupported.value && newTargets.size) {\n        observer = new MutationObserver(callback);\n        newTargets.forEach((el) => observer.observe(el, mutationOptions));\n      }\n    },\n    { immediate: true, flush: \"post\" }\n  );\n  const takeRecords = () => {\n    return observer == null ? void 0 : observer.takeRecords();\n  };\n  const stop = () => {\n    stopWatch();\n    cleanup();\n  };\n  tryOnScopeDispose(stop);\n  return {\n    isSupported,\n    stop,\n    takeRecords\n  };\n}\n\nfunction onElementRemoval(target, callback, options = {}) {\n  const {\n    window = defaultWindow,\n    document = window == null ? void 0 : window.document,\n    flush = \"sync\"\n  } = options;\n  if (!window || !document)\n    return noop;\n  let stopFn;\n  const cleanupAndUpdate = (fn) => {\n    stopFn == null ? void 0 : stopFn();\n    stopFn = fn;\n  };\n  const stopWatch = watchEffect(() => {\n    const el = unrefElement(target);\n    if (el) {\n      const { stop } = useMutationObserver(\n        document,\n        (mutationsList) => {\n          const targetRemoved = mutationsList.map((mutation) => [...mutation.removedNodes]).flat().some((node) => node === el || node.contains(el));\n          if (targetRemoved) {\n            callback(mutationsList);\n          }\n        },\n        {\n          window,\n          childList: true,\n          subtree: true\n        }\n      );\n      cleanupAndUpdate(stop);\n    }\n  }, { flush });\n  const stopHandle = () => {\n    stopWatch();\n    cleanupAndUpdate();\n  };\n  tryOnScopeDispose(stopHandle);\n  return stopHandle;\n}\n\nfunction createKeyPredicate(keyFilter) {\n  if (typeof keyFilter === \"function\")\n    return keyFilter;\n  else if (typeof keyFilter === \"string\")\n    return (event) => event.key === keyFilter;\n  else if (Array.isArray(keyFilter))\n    return (event) => keyFilter.includes(event.key);\n  return () => true;\n}\nfunction onKeyStroke(...args) {\n  let key;\n  let handler;\n  let options = {};\n  if (args.length === 3) {\n    key = args[0];\n    handler = args[1];\n    options = args[2];\n  } else if (args.length === 2) {\n    if (typeof args[1] === \"object\") {\n      key = true;\n      handler = args[0];\n      options = args[1];\n    } else {\n      key = args[0];\n      handler = args[1];\n    }\n  } else {\n    key = true;\n    handler = args[0];\n  }\n  const {\n    target = defaultWindow,\n    eventName = \"keydown\",\n    passive = false,\n    dedupe = false\n  } = options;\n  const predicate = createKeyPredicate(key);\n  const listener = (e) => {\n    if (e.repeat && toValue(dedupe))\n      return;\n    if (predicate(e))\n      handler(e);\n  };\n  return useEventListener(target, eventName, listener, passive);\n}\nfunction onKeyDown(key, handler, options = {}) {\n  return onKeyStroke(key, handler, { ...options, eventName: \"keydown\" });\n}\nfunction onKeyPressed(key, handler, options = {}) {\n  return onKeyStroke(key, handler, { ...options, eventName: \"keypress\" });\n}\nfunction onKeyUp(key, handler, options = {}) {\n  return onKeyStroke(key, handler, { ...options, eventName: \"keyup\" });\n}\n\nconst DEFAULT_DELAY = 500;\nconst DEFAULT_THRESHOLD = 10;\nfunction onLongPress(target, handler, options) {\n  var _a, _b;\n  const elementRef = computed(() => unrefElement(target));\n  let timeout;\n  let posStart;\n  let startTimestamp;\n  let hasLongPressed = false;\n  function clear() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = void 0;\n    }\n    posStart = void 0;\n    startTimestamp = void 0;\n    hasLongPressed = false;\n  }\n  function getDelay(ev) {\n    const delay = options == null ? void 0 : options.delay;\n    if (typeof delay === \"function\") {\n      return delay(ev);\n    }\n    return delay != null ? delay : DEFAULT_DELAY;\n  }\n  function onRelease(ev) {\n    var _a2, _b2, _c;\n    const [_startTimestamp, _posStart, _hasLongPressed] = [startTimestamp, posStart, hasLongPressed];\n    clear();\n    if (!(options == null ? void 0 : options.onMouseUp) || !_posStart || !_startTimestamp)\n      return;\n    if (((_a2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _a2.self) && ev.target !== elementRef.value)\n      return;\n    if ((_b2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _b2.prevent)\n      ev.preventDefault();\n    if ((_c = options == null ? void 0 : options.modifiers) == null ? void 0 : _c.stop)\n      ev.stopPropagation();\n    const dx = ev.x - _posStart.x;\n    const dy = ev.y - _posStart.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    options.onMouseUp(ev.timeStamp - _startTimestamp, distance, _hasLongPressed);\n  }\n  function onDown(ev) {\n    var _a2, _b2, _c;\n    if (((_a2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _a2.self) && ev.target !== elementRef.value)\n      return;\n    clear();\n    if ((_b2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _b2.prevent)\n      ev.preventDefault();\n    if ((_c = options == null ? void 0 : options.modifiers) == null ? void 0 : _c.stop)\n      ev.stopPropagation();\n    posStart = {\n      x: ev.x,\n      y: ev.y\n    };\n    startTimestamp = ev.timeStamp;\n    timeout = setTimeout(\n      () => {\n        hasLongPressed = true;\n        handler(ev);\n      },\n      getDelay(ev)\n    );\n  }\n  function onMove(ev) {\n    var _a2, _b2, _c, _d;\n    if (((_a2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _a2.self) && ev.target !== elementRef.value)\n      return;\n    if (!posStart || (options == null ? void 0 : options.distanceThreshold) === false)\n      return;\n    if ((_b2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _b2.prevent)\n      ev.preventDefault();\n    if ((_c = options == null ? void 0 : options.modifiers) == null ? void 0 : _c.stop)\n      ev.stopPropagation();\n    const dx = ev.x - posStart.x;\n    const dy = ev.y - posStart.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    if (distance >= ((_d = options == null ? void 0 : options.distanceThreshold) != null ? _d : DEFAULT_THRESHOLD))\n      clear();\n  }\n  const listenerOptions = {\n    capture: (_a = options == null ? void 0 : options.modifiers) == null ? void 0 : _a.capture,\n    once: (_b = options == null ? void 0 : options.modifiers) == null ? void 0 : _b.once\n  };\n  const cleanup = [\n    useEventListener(elementRef, \"pointerdown\", onDown, listenerOptions),\n    useEventListener(elementRef, \"pointermove\", onMove, listenerOptions),\n    useEventListener(elementRef, [\"pointerup\", \"pointerleave\"], onRelease, listenerOptions)\n  ];\n  const stop = () => cleanup.forEach((fn) => fn());\n  return stop;\n}\n\nfunction isFocusedElementEditable() {\n  const { activeElement, body } = document;\n  if (!activeElement)\n    return false;\n  if (activeElement === body)\n    return false;\n  switch (activeElement.tagName) {\n    case \"INPUT\":\n    case \"TEXTAREA\":\n      return true;\n  }\n  return activeElement.hasAttribute(\"contenteditable\");\n}\nfunction isTypedCharValid({\n  keyCode,\n  metaKey,\n  ctrlKey,\n  altKey\n}) {\n  if (metaKey || ctrlKey || altKey)\n    return false;\n  if (keyCode >= 48 && keyCode <= 57 || keyCode >= 96 && keyCode <= 105)\n    return true;\n  if (keyCode >= 65 && keyCode <= 90)\n    return true;\n  return false;\n}\nfunction onStartTyping(callback, options = {}) {\n  const { document: document2 = defaultDocument } = options;\n  const keydown = (event) => {\n    if (!isFocusedElementEditable() && isTypedCharValid(event)) {\n      callback(event);\n    }\n  };\n  if (document2)\n    useEventListener(document2, \"keydown\", keydown, { passive: true });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction templateRef(key, initialValue = null) {\n  const instance = getCurrentInstance();\n  let _trigger = () => {\n  };\n  const element = customRef((track, trigger) => {\n    _trigger = trigger;\n    return {\n      get() {\n        var _a, _b;\n        track();\n        return (_b = (_a = instance == null ? void 0 : instance.proxy) == null ? void 0 : _a.$refs[key]) != null ? _b : initialValue;\n      },\n      set() {\n      }\n    };\n  });\n  tryOnMounted(_trigger);\n  onUpdated(_trigger);\n  return element;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useActiveElement(options = {}) {\n  var _a;\n  const {\n    window = defaultWindow,\n    deep = true,\n    triggerOnRemoval = false\n  } = options;\n  const document = (_a = options.document) != null ? _a : window == null ? void 0 : window.document;\n  const getDeepActiveElement = () => {\n    var _a2;\n    let element = document == null ? void 0 : document.activeElement;\n    if (deep) {\n      while (element == null ? void 0 : element.shadowRoot)\n        element = (_a2 = element == null ? void 0 : element.shadowRoot) == null ? void 0 : _a2.activeElement;\n    }\n    return element;\n  };\n  const activeElement = shallowRef();\n  const trigger = () => {\n    activeElement.value = getDeepActiveElement();\n  };\n  if (window) {\n    const listenerOptions = {\n      capture: true,\n      passive: true\n    };\n    useEventListener(\n      window,\n      \"blur\",\n      (event) => {\n        if (event.relatedTarget !== null)\n          return;\n        trigger();\n      },\n      listenerOptions\n    );\n    useEventListener(\n      window,\n      \"focus\",\n      trigger,\n      listenerOptions\n    );\n  }\n  if (triggerOnRemoval) {\n    onElementRemoval(activeElement, trigger, { document });\n  }\n  trigger();\n  return activeElement;\n}\n\nfunction useRafFn(fn, options = {}) {\n  const {\n    immediate = true,\n    fpsLimit = void 0,\n    window = defaultWindow,\n    once = false\n  } = options;\n  const isActive = shallowRef(false);\n  const intervalLimit = computed(() => {\n    return fpsLimit ? 1e3 / toValue(fpsLimit) : null;\n  });\n  let previousFrameTimestamp = 0;\n  let rafId = null;\n  function loop(timestamp) {\n    if (!isActive.value || !window)\n      return;\n    if (!previousFrameTimestamp)\n      previousFrameTimestamp = timestamp;\n    const delta = timestamp - previousFrameTimestamp;\n    if (intervalLimit.value && delta < intervalLimit.value) {\n      rafId = window.requestAnimationFrame(loop);\n      return;\n    }\n    previousFrameTimestamp = timestamp;\n    fn({ delta, timestamp });\n    if (once) {\n      isActive.value = false;\n      rafId = null;\n      return;\n    }\n    rafId = window.requestAnimationFrame(loop);\n  }\n  function resume() {\n    if (!isActive.value && window) {\n      isActive.value = true;\n      previousFrameTimestamp = 0;\n      rafId = window.requestAnimationFrame(loop);\n    }\n  }\n  function pause() {\n    isActive.value = false;\n    if (rafId != null && window) {\n      window.cancelAnimationFrame(rafId);\n      rafId = null;\n    }\n  }\n  if (immediate)\n    resume();\n  tryOnScopeDispose(pause);\n  return {\n    isActive: readonly(isActive),\n    pause,\n    resume\n  };\n}\n\nfunction useAnimate(target, keyframes, options) {\n  let config;\n  let animateOptions;\n  if (isObject(options)) {\n    config = options;\n    animateOptions = objectOmit(options, [\"window\", \"immediate\", \"commitStyles\", \"persist\", \"onReady\", \"onError\"]);\n  } else {\n    config = { duration: options };\n    animateOptions = options;\n  }\n  const {\n    window = defaultWindow,\n    immediate = true,\n    commitStyles,\n    persist,\n    playbackRate: _playbackRate = 1,\n    onReady,\n    onError = (e) => {\n      console.error(e);\n    }\n  } = config;\n  const isSupported = useSupported(() => window && HTMLElement && \"animate\" in HTMLElement.prototype);\n  const animate = shallowRef(void 0);\n  const store = shallowReactive({\n    startTime: null,\n    currentTime: null,\n    timeline: null,\n    playbackRate: _playbackRate,\n    pending: false,\n    playState: immediate ? \"idle\" : \"paused\",\n    replaceState: \"active\"\n  });\n  const pending = computed(() => store.pending);\n  const playState = computed(() => store.playState);\n  const replaceState = computed(() => store.replaceState);\n  const startTime = computed({\n    get() {\n      return store.startTime;\n    },\n    set(value) {\n      store.startTime = value;\n      if (animate.value)\n        animate.value.startTime = value;\n    }\n  });\n  const currentTime = computed({\n    get() {\n      return store.currentTime;\n    },\n    set(value) {\n      store.currentTime = value;\n      if (animate.value) {\n        animate.value.currentTime = value;\n        syncResume();\n      }\n    }\n  });\n  const timeline = computed({\n    get() {\n      return store.timeline;\n    },\n    set(value) {\n      store.timeline = value;\n      if (animate.value)\n        animate.value.timeline = value;\n    }\n  });\n  const playbackRate = computed({\n    get() {\n      return store.playbackRate;\n    },\n    set(value) {\n      store.playbackRate = value;\n      if (animate.value)\n        animate.value.playbackRate = value;\n    }\n  });\n  const play = () => {\n    if (animate.value) {\n      try {\n        animate.value.play();\n        syncResume();\n      } catch (e) {\n        syncPause();\n        onError(e);\n      }\n    } else {\n      update();\n    }\n  };\n  const pause = () => {\n    var _a;\n    try {\n      (_a = animate.value) == null ? void 0 : _a.pause();\n      syncPause();\n    } catch (e) {\n      onError(e);\n    }\n  };\n  const reverse = () => {\n    var _a;\n    if (!animate.value)\n      update();\n    try {\n      (_a = animate.value) == null ? void 0 : _a.reverse();\n      syncResume();\n    } catch (e) {\n      syncPause();\n      onError(e);\n    }\n  };\n  const finish = () => {\n    var _a;\n    try {\n      (_a = animate.value) == null ? void 0 : _a.finish();\n      syncPause();\n    } catch (e) {\n      onError(e);\n    }\n  };\n  const cancel = () => {\n    var _a;\n    try {\n      (_a = animate.value) == null ? void 0 : _a.cancel();\n      syncPause();\n    } catch (e) {\n      onError(e);\n    }\n  };\n  watch(() => unrefElement(target), (el) => {\n    if (el) {\n      update(true);\n    } else {\n      animate.value = void 0;\n    }\n  });\n  watch(() => keyframes, (value) => {\n    if (animate.value) {\n      update();\n      const targetEl = unrefElement(target);\n      if (targetEl) {\n        animate.value.effect = new KeyframeEffect(\n          targetEl,\n          toValue(value),\n          animateOptions\n        );\n      }\n    }\n  }, { deep: true });\n  tryOnMounted(() => update(true), false);\n  tryOnScopeDispose(cancel);\n  function update(init) {\n    const el = unrefElement(target);\n    if (!isSupported.value || !el)\n      return;\n    if (!animate.value)\n      animate.value = el.animate(toValue(keyframes), animateOptions);\n    if (persist)\n      animate.value.persist();\n    if (_playbackRate !== 1)\n      animate.value.playbackRate = _playbackRate;\n    if (init && !immediate)\n      animate.value.pause();\n    else\n      syncResume();\n    onReady == null ? void 0 : onReady(animate.value);\n  }\n  const listenerOptions = { passive: true };\n  useEventListener(animate, [\"cancel\", \"finish\", \"remove\"], syncPause, listenerOptions);\n  useEventListener(animate, \"finish\", () => {\n    var _a;\n    if (commitStyles)\n      (_a = animate.value) == null ? void 0 : _a.commitStyles();\n  }, listenerOptions);\n  const { resume: resumeRef, pause: pauseRef } = useRafFn(() => {\n    if (!animate.value)\n      return;\n    store.pending = animate.value.pending;\n    store.playState = animate.value.playState;\n    store.replaceState = animate.value.replaceState;\n    store.startTime = animate.value.startTime;\n    store.currentTime = animate.value.currentTime;\n    store.timeline = animate.value.timeline;\n    store.playbackRate = animate.value.playbackRate;\n  }, { immediate: false });\n  function syncResume() {\n    if (isSupported.value)\n      resumeRef();\n  }\n  function syncPause() {\n    if (isSupported.value && window)\n      window.requestAnimationFrame(pauseRef);\n  }\n  return {\n    isSupported,\n    animate,\n    // actions\n    play,\n    pause,\n    reverse,\n    finish,\n    cancel,\n    // state\n    pending,\n    playState,\n    replaceState,\n    startTime,\n    currentTime,\n    timeline,\n    playbackRate\n  };\n}\n\nfunction useAsyncQueue(tasks, options) {\n  const {\n    interrupt = true,\n    onError = noop,\n    onFinished = noop,\n    signal\n  } = options || {};\n  const promiseState = {\n    aborted: \"aborted\",\n    fulfilled: \"fulfilled\",\n    pending: \"pending\",\n    rejected: \"rejected\"\n  };\n  const initialResult = Array.from(Array.from({ length: tasks.length }), () => ({ state: promiseState.pending, data: null }));\n  const result = reactive(initialResult);\n  const activeIndex = shallowRef(-1);\n  if (!tasks || tasks.length === 0) {\n    onFinished();\n    return {\n      activeIndex,\n      result\n    };\n  }\n  function updateResult(state, res) {\n    activeIndex.value++;\n    result[activeIndex.value].data = res;\n    result[activeIndex.value].state = state;\n  }\n  tasks.reduce((prev, curr) => {\n    return prev.then((prevRes) => {\n      var _a;\n      if (signal == null ? void 0 : signal.aborted) {\n        updateResult(promiseState.aborted, new Error(\"aborted\"));\n        return;\n      }\n      if (((_a = result[activeIndex.value]) == null ? void 0 : _a.state) === promiseState.rejected && interrupt) {\n        onFinished();\n        return;\n      }\n      const done = curr(prevRes).then((currentRes) => {\n        updateResult(promiseState.fulfilled, currentRes);\n        if (activeIndex.value === tasks.length - 1)\n          onFinished();\n        return currentRes;\n      });\n      if (!signal)\n        return done;\n      return Promise.race([done, whenAborted(signal)]);\n    }).catch((e) => {\n      if (signal == null ? void 0 : signal.aborted) {\n        updateResult(promiseState.aborted, e);\n        return e;\n      }\n      updateResult(promiseState.rejected, e);\n      onError();\n      return e;\n    });\n  }, Promise.resolve());\n  return {\n    activeIndex,\n    result\n  };\n}\nfunction whenAborted(signal) {\n  return new Promise((resolve, reject) => {\n    const error = new Error(\"aborted\");\n    if (signal.aborted)\n      reject(error);\n    else\n      signal.addEventListener(\"abort\", () => reject(error), { once: true });\n  });\n}\n\nfunction useAsyncState(promise, initialState, options) {\n  var _a;\n  const {\n    immediate = true,\n    delay = 0,\n    onError = (_a = globalThis.reportError) != null ? _a : noop,\n    onSuccess = noop,\n    resetOnExecute = true,\n    shallow = true,\n    throwError\n  } = options != null ? options : {};\n  const state = shallow ? shallowRef(initialState) : ref(initialState);\n  const isReady = shallowRef(false);\n  const isLoading = shallowRef(false);\n  const error = shallowRef(void 0);\n  async function execute(delay2 = 0, ...args) {\n    if (resetOnExecute)\n      state.value = toValue(initialState);\n    error.value = void 0;\n    isReady.value = false;\n    isLoading.value = true;\n    if (delay2 > 0)\n      await promiseTimeout(delay2);\n    const _promise = typeof promise === \"function\" ? promise(...args) : promise;\n    try {\n      const data = await _promise;\n      state.value = data;\n      isReady.value = true;\n      onSuccess(data);\n    } catch (e) {\n      error.value = e;\n      onError(e);\n      if (throwError)\n        throw e;\n    } finally {\n      isLoading.value = false;\n    }\n    return state.value;\n  }\n  if (immediate) {\n    execute(delay);\n  }\n  const shell = {\n    state,\n    isReady,\n    isLoading,\n    error,\n    execute,\n    executeImmediate: (...args) => execute(0, ...args)\n  };\n  function waitUntilIsLoaded() {\n    return new Promise((resolve, reject) => {\n      until(isLoading).toBe(false).then(() => resolve(shell)).catch(reject);\n    });\n  }\n  return {\n    ...shell,\n    then(onFulfilled, onRejected) {\n      return waitUntilIsLoaded().then(onFulfilled, onRejected);\n    }\n  };\n}\n\nconst defaults = {\n  array: (v) => JSON.stringify(v),\n  object: (v) => JSON.stringify(v),\n  set: (v) => JSON.stringify(Array.from(v)),\n  map: (v) => JSON.stringify(Object.fromEntries(v)),\n  null: () => \"\"\n};\nfunction getDefaultSerialization(target) {\n  if (!target)\n    return defaults.null;\n  if (target instanceof Map)\n    return defaults.map;\n  else if (target instanceof Set)\n    return defaults.set;\n  else if (Array.isArray(target))\n    return defaults.array;\n  else\n    return defaults.object;\n}\n\nfunction useBase64(target, options) {\n  const base64 = shallowRef(\"\");\n  const promise = shallowRef();\n  function execute() {\n    if (!isClient)\n      return;\n    promise.value = new Promise((resolve, reject) => {\n      try {\n        const _target = toValue(target);\n        if (_target == null) {\n          resolve(\"\");\n        } else if (typeof _target === \"string\") {\n          resolve(blobToBase64(new Blob([_target], { type: \"text/plain\" })));\n        } else if (_target instanceof Blob) {\n          resolve(blobToBase64(_target));\n        } else if (_target instanceof ArrayBuffer) {\n          resolve(window.btoa(String.fromCharCode(...new Uint8Array(_target))));\n        } else if (_target instanceof HTMLCanvasElement) {\n          resolve(_target.toDataURL(options == null ? void 0 : options.type, options == null ? void 0 : options.quality));\n        } else if (_target instanceof HTMLImageElement) {\n          const img = _target.cloneNode(false);\n          img.crossOrigin = \"Anonymous\";\n          imgLoaded(img).then(() => {\n            const canvas = document.createElement(\"canvas\");\n            const ctx = canvas.getContext(\"2d\");\n            canvas.width = img.width;\n            canvas.height = img.height;\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n            resolve(canvas.toDataURL(options == null ? void 0 : options.type, options == null ? void 0 : options.quality));\n          }).catch(reject);\n        } else if (typeof _target === \"object\") {\n          const _serializeFn = (options == null ? void 0 : options.serializer) || getDefaultSerialization(_target);\n          const serialized = _serializeFn(_target);\n          return resolve(blobToBase64(new Blob([serialized], { type: \"application/json\" })));\n        } else {\n          reject(new Error(\"target is unsupported types\"));\n        }\n      } catch (error) {\n        reject(error);\n      }\n    });\n    promise.value.then((res) => {\n      base64.value = (options == null ? void 0 : options.dataUrl) === false ? res.replace(/^data:.*?;base64,/, \"\") : res;\n    });\n    return promise.value;\n  }\n  if (isRef(target) || typeof target === \"function\")\n    watch(target, execute, { immediate: true });\n  else\n    execute();\n  return {\n    base64,\n    promise,\n    execute\n  };\n}\nfunction imgLoaded(img) {\n  return new Promise((resolve, reject) => {\n    if (!img.complete) {\n      img.onload = () => {\n        resolve();\n      };\n      img.onerror = reject;\n    } else {\n      resolve();\n    }\n  });\n}\nfunction blobToBase64(blob) {\n  return new Promise((resolve, reject) => {\n    const fr = new FileReader();\n    fr.onload = (e) => {\n      resolve(e.target.result);\n    };\n    fr.onerror = reject;\n    fr.readAsDataURL(blob);\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useBattery(options = {}) {\n  const { navigator = defaultNavigator } = options;\n  const events = [\"chargingchange\", \"chargingtimechange\", \"dischargingtimechange\", \"levelchange\"];\n  const isSupported = useSupported(() => navigator && \"getBattery\" in navigator && typeof navigator.getBattery === \"function\");\n  const charging = shallowRef(false);\n  const chargingTime = shallowRef(0);\n  const dischargingTime = shallowRef(0);\n  const level = shallowRef(1);\n  let battery;\n  function updateBatteryInfo() {\n    charging.value = this.charging;\n    chargingTime.value = this.chargingTime || 0;\n    dischargingTime.value = this.dischargingTime || 0;\n    level.value = this.level;\n  }\n  if (isSupported.value) {\n    navigator.getBattery().then((_battery) => {\n      battery = _battery;\n      updateBatteryInfo.call(battery);\n      useEventListener(battery, events, updateBatteryInfo, { passive: true });\n    });\n  }\n  return {\n    isSupported,\n    charging,\n    chargingTime,\n    dischargingTime,\n    level\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useBluetooth(options) {\n  let {\n    acceptAllDevices = false\n  } = options || {};\n  const {\n    filters = void 0,\n    optionalServices = void 0,\n    navigator = defaultNavigator\n  } = options || {};\n  const isSupported = useSupported(() => navigator && \"bluetooth\" in navigator);\n  const device = shallowRef();\n  const error = shallowRef(null);\n  watch(device, () => {\n    connectToBluetoothGATTServer();\n  });\n  async function requestDevice() {\n    if (!isSupported.value)\n      return;\n    error.value = null;\n    if (filters && filters.length > 0)\n      acceptAllDevices = false;\n    try {\n      device.value = await (navigator == null ? void 0 : navigator.bluetooth.requestDevice({\n        acceptAllDevices,\n        filters,\n        optionalServices\n      }));\n    } catch (err) {\n      error.value = err;\n    }\n  }\n  const server = shallowRef();\n  const isConnected = shallowRef(false);\n  function reset() {\n    isConnected.value = false;\n    device.value = void 0;\n    server.value = void 0;\n  }\n  async function connectToBluetoothGATTServer() {\n    error.value = null;\n    if (device.value && device.value.gatt) {\n      useEventListener(device, \"gattserverdisconnected\", reset, { passive: true });\n      try {\n        server.value = await device.value.gatt.connect();\n        isConnected.value = server.value.connected;\n      } catch (err) {\n        error.value = err;\n      }\n    }\n  }\n  tryOnMounted(() => {\n    var _a;\n    if (device.value)\n      (_a = device.value.gatt) == null ? void 0 : _a.connect();\n  });\n  tryOnScopeDispose(() => {\n    var _a;\n    if (device.value)\n      (_a = device.value.gatt) == null ? void 0 : _a.disconnect();\n  });\n  return {\n    isSupported,\n    isConnected: readonly(isConnected),\n    // Device:\n    device,\n    requestDevice,\n    // Server:\n    server,\n    // Errors:\n    error\n  };\n}\n\nconst ssrWidthSymbol = Symbol(\"vueuse-ssr-width\");\n// @__NO_SIDE_EFFECTS__\nfunction useSSRWidth() {\n  const ssrWidth = hasInjectionContext() ? injectLocal(ssrWidthSymbol, null) : null;\n  return typeof ssrWidth === \"number\" ? ssrWidth : void 0;\n}\nfunction provideSSRWidth(width, app) {\n  if (app !== void 0) {\n    app.provide(ssrWidthSymbol, width);\n  } else {\n    provideLocal(ssrWidthSymbol, width);\n  }\n}\n\nfunction useMediaQuery(query, options = {}) {\n  const { window = defaultWindow, ssrWidth = useSSRWidth() } = options;\n  const isSupported = useSupported(() => window && \"matchMedia\" in window && typeof window.matchMedia === \"function\");\n  const ssrSupport = shallowRef(typeof ssrWidth === \"number\");\n  const mediaQuery = shallowRef();\n  const matches = shallowRef(false);\n  const handler = (event) => {\n    matches.value = event.matches;\n  };\n  watchEffect(() => {\n    if (ssrSupport.value) {\n      ssrSupport.value = !isSupported.value;\n      const queryStrings = toValue(query).split(\",\");\n      matches.value = queryStrings.some((queryString) => {\n        const not = queryString.includes(\"not all\");\n        const minWidth = queryString.match(/\\(\\s*min-width:\\s*(-?\\d+(?:\\.\\d*)?[a-z]+\\s*)\\)/);\n        const maxWidth = queryString.match(/\\(\\s*max-width:\\s*(-?\\d+(?:\\.\\d*)?[a-z]+\\s*)\\)/);\n        let res = Boolean(minWidth || maxWidth);\n        if (minWidth && res) {\n          res = ssrWidth >= pxValue(minWidth[1]);\n        }\n        if (maxWidth && res) {\n          res = ssrWidth <= pxValue(maxWidth[1]);\n        }\n        return not ? !res : res;\n      });\n      return;\n    }\n    if (!isSupported.value)\n      return;\n    mediaQuery.value = window.matchMedia(toValue(query));\n    matches.value = mediaQuery.value.matches;\n  });\n  useEventListener(mediaQuery, \"change\", handler, { passive: true });\n  return computed(() => matches.value);\n}\n\nconst breakpointsTailwind = {\n  \"sm\": 640,\n  \"md\": 768,\n  \"lg\": 1024,\n  \"xl\": 1280,\n  \"2xl\": 1536\n};\nconst breakpointsBootstrapV5 = {\n  xs: 0,\n  sm: 576,\n  md: 768,\n  lg: 992,\n  xl: 1200,\n  xxl: 1400\n};\nconst breakpointsVuetifyV2 = {\n  xs: 0,\n  sm: 600,\n  md: 960,\n  lg: 1264,\n  xl: 1904\n};\nconst breakpointsVuetifyV3 = {\n  xs: 0,\n  sm: 600,\n  md: 960,\n  lg: 1280,\n  xl: 1920,\n  xxl: 2560\n};\nconst breakpointsVuetify = breakpointsVuetifyV2;\nconst breakpointsAntDesign = {\n  xs: 480,\n  sm: 576,\n  md: 768,\n  lg: 992,\n  xl: 1200,\n  xxl: 1600\n};\nconst breakpointsQuasar = {\n  xs: 0,\n  sm: 600,\n  md: 1024,\n  lg: 1440,\n  xl: 1920\n};\nconst breakpointsSematic = {\n  mobileS: 320,\n  mobileM: 375,\n  mobileL: 425,\n  tablet: 768,\n  laptop: 1024,\n  laptopL: 1440,\n  desktop4K: 2560\n};\nconst breakpointsMasterCss = {\n  \"3xs\": 360,\n  \"2xs\": 480,\n  \"xs\": 600,\n  \"sm\": 768,\n  \"md\": 1024,\n  \"lg\": 1280,\n  \"xl\": 1440,\n  \"2xl\": 1600,\n  \"3xl\": 1920,\n  \"4xl\": 2560\n};\nconst breakpointsPrimeFlex = {\n  sm: 576,\n  md: 768,\n  lg: 992,\n  xl: 1200\n};\nconst breakpointsElement = {\n  xs: 0,\n  sm: 768,\n  md: 992,\n  lg: 1200,\n  xl: 1920\n};\n\n// @__NO_SIDE_EFFECTS__\nfunction useBreakpoints(breakpoints, options = {}) {\n  function getValue(k, delta) {\n    let v = toValue(breakpoints[toValue(k)]);\n    if (delta != null)\n      v = increaseWithUnit(v, delta);\n    if (typeof v === \"number\")\n      v = `${v}px`;\n    return v;\n  }\n  const { window = defaultWindow, strategy = \"min-width\", ssrWidth = useSSRWidth() } = options;\n  const ssrSupport = typeof ssrWidth === \"number\";\n  const mounted = ssrSupport ? shallowRef(false) : { value: true };\n  if (ssrSupport) {\n    tryOnMounted(() => mounted.value = !!window);\n  }\n  function match(query, size) {\n    if (!mounted.value && ssrSupport) {\n      return query === \"min\" ? ssrWidth >= pxValue(size) : ssrWidth <= pxValue(size);\n    }\n    if (!window)\n      return false;\n    return window.matchMedia(`(${query}-width: ${size})`).matches;\n  }\n  const greaterOrEqual = (k) => {\n    return useMediaQuery(() => `(min-width: ${getValue(k)})`, options);\n  };\n  const smallerOrEqual = (k) => {\n    return useMediaQuery(() => `(max-width: ${getValue(k)})`, options);\n  };\n  const shortcutMethods = Object.keys(breakpoints).reduce((shortcuts, k) => {\n    Object.defineProperty(shortcuts, k, {\n      get: () => strategy === \"min-width\" ? greaterOrEqual(k) : smallerOrEqual(k),\n      enumerable: true,\n      configurable: true\n    });\n    return shortcuts;\n  }, {});\n  function current() {\n    const points = Object.keys(breakpoints).map((k) => [k, shortcutMethods[k], pxValue(getValue(k))]).sort((a, b) => a[2] - b[2]);\n    return computed(() => points.filter(([, v]) => v.value).map(([k]) => k));\n  }\n  return Object.assign(shortcutMethods, {\n    greaterOrEqual,\n    smallerOrEqual,\n    greater(k) {\n      return useMediaQuery(() => `(min-width: ${getValue(k, 0.1)})`, options);\n    },\n    smaller(k) {\n      return useMediaQuery(() => `(max-width: ${getValue(k, -0.1)})`, options);\n    },\n    between(a, b) {\n      return useMediaQuery(() => `(min-width: ${getValue(a)}) and (max-width: ${getValue(b, -0.1)})`, options);\n    },\n    isGreater(k) {\n      return match(\"min\", getValue(k, 0.1));\n    },\n    isGreaterOrEqual(k) {\n      return match(\"min\", getValue(k));\n    },\n    isSmaller(k) {\n      return match(\"max\", getValue(k, -0.1));\n    },\n    isSmallerOrEqual(k) {\n      return match(\"max\", getValue(k));\n    },\n    isInBetween(a, b) {\n      return match(\"min\", getValue(a)) && match(\"max\", getValue(b, -0.1));\n    },\n    current,\n    active() {\n      const bps = current();\n      return computed(() => bps.value.length === 0 ? \"\" : bps.value.at(strategy === \"min-width\" ? -1 : 0));\n    }\n  });\n}\n\nfunction useBroadcastChannel(options) {\n  const {\n    name,\n    window = defaultWindow\n  } = options;\n  const isSupported = useSupported(() => window && \"BroadcastChannel\" in window);\n  const isClosed = shallowRef(false);\n  const channel = ref();\n  const data = ref();\n  const error = shallowRef(null);\n  const post = (data2) => {\n    if (channel.value)\n      channel.value.postMessage(data2);\n  };\n  const close = () => {\n    if (channel.value)\n      channel.value.close();\n    isClosed.value = true;\n  };\n  if (isSupported.value) {\n    tryOnMounted(() => {\n      error.value = null;\n      channel.value = new BroadcastChannel(name);\n      const listenerOptions = {\n        passive: true\n      };\n      useEventListener(channel, \"message\", (e) => {\n        data.value = e.data;\n      }, listenerOptions);\n      useEventListener(channel, \"messageerror\", (e) => {\n        error.value = e;\n      }, listenerOptions);\n      useEventListener(channel, \"close\", () => {\n        isClosed.value = true;\n      }, listenerOptions);\n    });\n  }\n  tryOnScopeDispose(() => {\n    close();\n  });\n  return {\n    isSupported,\n    channel,\n    data,\n    post,\n    close,\n    error,\n    isClosed\n  };\n}\n\nconst WRITABLE_PROPERTIES = [\n  \"hash\",\n  \"host\",\n  \"hostname\",\n  \"href\",\n  \"pathname\",\n  \"port\",\n  \"protocol\",\n  \"search\"\n];\n// @__NO_SIDE_EFFECTS__\nfunction useBrowserLocation(options = {}) {\n  const { window = defaultWindow } = options;\n  const refs = Object.fromEntries(\n    WRITABLE_PROPERTIES.map((key) => [key, ref()])\n  );\n  for (const [key, ref] of objectEntries(refs)) {\n    watch(ref, (value) => {\n      if (!(window == null ? void 0 : window.location) || window.location[key] === value)\n        return;\n      window.location[key] = value;\n    });\n  }\n  const buildState = (trigger) => {\n    var _a;\n    const { state: state2, length } = (window == null ? void 0 : window.history) || {};\n    const { origin } = (window == null ? void 0 : window.location) || {};\n    for (const key of WRITABLE_PROPERTIES)\n      refs[key].value = (_a = window == null ? void 0 : window.location) == null ? void 0 : _a[key];\n    return reactive({\n      trigger,\n      state: state2,\n      length,\n      origin,\n      ...refs\n    });\n  };\n  const state = ref(buildState(\"load\"));\n  if (window) {\n    const listenerOptions = { passive: true };\n    useEventListener(window, \"popstate\", () => state.value = buildState(\"popstate\"), listenerOptions);\n    useEventListener(window, \"hashchange\", () => state.value = buildState(\"hashchange\"), listenerOptions);\n  }\n  return state;\n}\n\nfunction useCached(refValue, comparator = (a, b) => a === b, options) {\n  const { deepRefs = true, ...watchOptions } = options || {};\n  const cachedValue = createRef(refValue.value, deepRefs);\n  watch(() => refValue.value, (value) => {\n    if (!comparator(value, cachedValue.value))\n      cachedValue.value = value;\n  }, watchOptions);\n  return cachedValue;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePermission(permissionDesc, options = {}) {\n  const {\n    controls = false,\n    navigator = defaultNavigator\n  } = options;\n  const isSupported = useSupported(() => navigator && \"permissions\" in navigator);\n  const permissionStatus = shallowRef();\n  const desc = typeof permissionDesc === \"string\" ? { name: permissionDesc } : permissionDesc;\n  const state = shallowRef();\n  const update = () => {\n    var _a, _b;\n    state.value = (_b = (_a = permissionStatus.value) == null ? void 0 : _a.state) != null ? _b : \"prompt\";\n  };\n  useEventListener(permissionStatus, \"change\", update, { passive: true });\n  const query = createSingletonPromise(async () => {\n    if (!isSupported.value)\n      return;\n    if (!permissionStatus.value) {\n      try {\n        permissionStatus.value = await navigator.permissions.query(desc);\n      } catch (e) {\n        permissionStatus.value = void 0;\n      } finally {\n        update();\n      }\n    }\n    if (controls)\n      return toRaw(permissionStatus.value);\n  });\n  query();\n  if (controls) {\n    return {\n      state,\n      isSupported,\n      query\n    };\n  } else {\n    return state;\n  }\n}\n\nfunction useClipboard(options = {}) {\n  const {\n    navigator = defaultNavigator,\n    read = false,\n    source,\n    copiedDuring = 1500,\n    legacy = false\n  } = options;\n  const isClipboardApiSupported = useSupported(() => navigator && \"clipboard\" in navigator);\n  const permissionRead = usePermission(\"clipboard-read\");\n  const permissionWrite = usePermission(\"clipboard-write\");\n  const isSupported = computed(() => isClipboardApiSupported.value || legacy);\n  const text = shallowRef(\"\");\n  const copied = shallowRef(false);\n  const timeout = useTimeoutFn(() => copied.value = false, copiedDuring, { immediate: false });\n  async function updateText() {\n    let useLegacy = !(isClipboardApiSupported.value && isAllowed(permissionRead.value));\n    if (!useLegacy) {\n      try {\n        text.value = await navigator.clipboard.readText();\n      } catch (e) {\n        useLegacy = true;\n      }\n    }\n    if (useLegacy) {\n      text.value = legacyRead();\n    }\n  }\n  if (isSupported.value && read)\n    useEventListener([\"copy\", \"cut\"], updateText, { passive: true });\n  async function copy(value = toValue(source)) {\n    if (isSupported.value && value != null) {\n      let useLegacy = !(isClipboardApiSupported.value && isAllowed(permissionWrite.value));\n      if (!useLegacy) {\n        try {\n          await navigator.clipboard.writeText(value);\n        } catch (e) {\n          useLegacy = true;\n        }\n      }\n      if (useLegacy)\n        legacyCopy(value);\n      text.value = value;\n      copied.value = true;\n      timeout.start();\n    }\n  }\n  function legacyCopy(value) {\n    const ta = document.createElement(\"textarea\");\n    ta.value = value != null ? value : \"\";\n    ta.style.position = \"absolute\";\n    ta.style.opacity = \"0\";\n    document.body.appendChild(ta);\n    ta.select();\n    document.execCommand(\"copy\");\n    ta.remove();\n  }\n  function legacyRead() {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = document == null ? void 0 : document.getSelection) == null ? void 0 : _a.call(document)) == null ? void 0 : _b.toString()) != null ? _c : \"\";\n  }\n  function isAllowed(status) {\n    return status === \"granted\" || status === \"prompt\";\n  }\n  return {\n    isSupported,\n    text,\n    copied,\n    copy\n  };\n}\n\nfunction useClipboardItems(options = {}) {\n  const {\n    navigator = defaultNavigator,\n    read = false,\n    source,\n    copiedDuring = 1500\n  } = options;\n  const isSupported = useSupported(() => navigator && \"clipboard\" in navigator);\n  const content = ref([]);\n  const copied = shallowRef(false);\n  const timeout = useTimeoutFn(() => copied.value = false, copiedDuring, { immediate: false });\n  function updateContent() {\n    if (isSupported.value) {\n      navigator.clipboard.read().then((items) => {\n        content.value = items;\n      });\n    }\n  }\n  if (isSupported.value && read) {\n    useEventListener([\"copy\", \"cut\"], updateContent, { passive: true });\n  }\n  async function copy(value = toValue(source)) {\n    if (isSupported.value && value != null) {\n      await navigator.clipboard.write(value);\n      content.value = value;\n      copied.value = true;\n      timeout.start();\n    }\n  }\n  return {\n    isSupported,\n    content: shallowReadonly(content),\n    copied: readonly(copied),\n    copy,\n    read: updateContent\n  };\n}\n\nfunction cloneFnJSON(source) {\n  return JSON.parse(JSON.stringify(source));\n}\nfunction useCloned(source, options = {}) {\n  const cloned = ref({});\n  const isModified = shallowRef(false);\n  let _lastSync = false;\n  const {\n    manual,\n    clone = cloneFnJSON,\n    // watch options\n    deep = true,\n    immediate = true\n  } = options;\n  watch(cloned, () => {\n    if (_lastSync) {\n      _lastSync = false;\n      return;\n    }\n    isModified.value = true;\n  }, {\n    deep: true,\n    flush: \"sync\"\n  });\n  function sync() {\n    _lastSync = true;\n    isModified.value = false;\n    cloned.value = clone(toValue(source));\n  }\n  if (!manual && (isRef(source) || typeof source === \"function\")) {\n    watch(source, sync, {\n      ...options,\n      deep,\n      immediate\n    });\n  } else {\n    sync();\n  }\n  return { cloned, isModified, sync };\n}\n\nconst _global = typeof globalThis !== \"undefined\" ? globalThis : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : {};\nconst globalKey = \"__vueuse_ssr_handlers__\";\nconst handlers = /* @__PURE__ */ getHandlers();\nfunction getHandlers() {\n  if (!(globalKey in _global))\n    _global[globalKey] = _global[globalKey] || {};\n  return _global[globalKey];\n}\nfunction getSSRHandler(key, fallback) {\n  return handlers[key] || fallback;\n}\nfunction setSSRHandler(key, fn) {\n  handlers[key] = fn;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePreferredDark(options) {\n  return useMediaQuery(\"(prefers-color-scheme: dark)\", options);\n}\n\nfunction guessSerializerType(rawInit) {\n  return rawInit == null ? \"any\" : rawInit instanceof Set ? \"set\" : rawInit instanceof Map ? \"map\" : rawInit instanceof Date ? \"date\" : typeof rawInit === \"boolean\" ? \"boolean\" : typeof rawInit === \"string\" ? \"string\" : typeof rawInit === \"object\" ? \"object\" : !Number.isNaN(rawInit) ? \"number\" : \"any\";\n}\n\nconst StorageSerializers = {\n  boolean: {\n    read: (v) => v === \"true\",\n    write: (v) => String(v)\n  },\n  object: {\n    read: (v) => JSON.parse(v),\n    write: (v) => JSON.stringify(v)\n  },\n  number: {\n    read: (v) => Number.parseFloat(v),\n    write: (v) => String(v)\n  },\n  any: {\n    read: (v) => v,\n    write: (v) => String(v)\n  },\n  string: {\n    read: (v) => v,\n    write: (v) => String(v)\n  },\n  map: {\n    read: (v) => new Map(JSON.parse(v)),\n    write: (v) => JSON.stringify(Array.from(v.entries()))\n  },\n  set: {\n    read: (v) => new Set(JSON.parse(v)),\n    write: (v) => JSON.stringify(Array.from(v))\n  },\n  date: {\n    read: (v) => new Date(v),\n    write: (v) => v.toISOString()\n  }\n};\nconst customStorageEventName = \"vueuse-storage\";\nfunction useStorage(key, defaults, storage, options = {}) {\n  var _a;\n  const {\n    flush = \"pre\",\n    deep = true,\n    listenToStorageChanges = true,\n    writeDefaults = true,\n    mergeDefaults = false,\n    shallow,\n    window = defaultWindow,\n    eventFilter,\n    onError = (e) => {\n      console.error(e);\n    },\n    initOnMounted\n  } = options;\n  const data = (shallow ? shallowRef : ref)(typeof defaults === \"function\" ? defaults() : defaults);\n  const keyComputed = computed(() => toValue(key));\n  if (!storage) {\n    try {\n      storage = getSSRHandler(\"getDefaultStorage\", () => {\n        var _a2;\n        return (_a2 = defaultWindow) == null ? void 0 : _a2.localStorage;\n      })();\n    } catch (e) {\n      onError(e);\n    }\n  }\n  if (!storage)\n    return data;\n  const rawInit = toValue(defaults);\n  const type = guessSerializerType(rawInit);\n  const serializer = (_a = options.serializer) != null ? _a : StorageSerializers[type];\n  const { pause: pauseWatch, resume: resumeWatch } = pausableWatch(\n    data,\n    (newValue) => write(newValue),\n    { flush, deep, eventFilter }\n  );\n  watch(keyComputed, () => update(), { flush });\n  let firstMounted = false;\n  const onStorageEvent = (ev) => {\n    if (initOnMounted && !firstMounted) {\n      return;\n    }\n    update(ev);\n  };\n  const onStorageCustomEvent = (ev) => {\n    if (initOnMounted && !firstMounted) {\n      return;\n    }\n    updateFromCustomEvent(ev);\n  };\n  if (window && listenToStorageChanges) {\n    if (storage instanceof Storage)\n      useEventListener(window, \"storage\", onStorageEvent, { passive: true });\n    else\n      useEventListener(window, customStorageEventName, onStorageCustomEvent);\n  }\n  if (initOnMounted) {\n    tryOnMounted(() => {\n      firstMounted = true;\n      update();\n    });\n  } else {\n    update();\n  }\n  function dispatchWriteEvent(oldValue, newValue) {\n    if (window) {\n      const payload = {\n        key: keyComputed.value,\n        oldValue,\n        newValue,\n        storageArea: storage\n      };\n      window.dispatchEvent(storage instanceof Storage ? new StorageEvent(\"storage\", payload) : new CustomEvent(customStorageEventName, {\n        detail: payload\n      }));\n    }\n  }\n  function write(v) {\n    try {\n      const oldValue = storage.getItem(keyComputed.value);\n      if (v == null) {\n        dispatchWriteEvent(oldValue, null);\n        storage.removeItem(keyComputed.value);\n      } else {\n        const serialized = serializer.write(v);\n        if (oldValue !== serialized) {\n          storage.setItem(keyComputed.value, serialized);\n          dispatchWriteEvent(oldValue, serialized);\n        }\n      }\n    } catch (e) {\n      onError(e);\n    }\n  }\n  function read(event) {\n    const rawValue = event ? event.newValue : storage.getItem(keyComputed.value);\n    if (rawValue == null) {\n      if (writeDefaults && rawInit != null)\n        storage.setItem(keyComputed.value, serializer.write(rawInit));\n      return rawInit;\n    } else if (!event && mergeDefaults) {\n      const value = serializer.read(rawValue);\n      if (typeof mergeDefaults === \"function\")\n        return mergeDefaults(value, rawInit);\n      else if (type === \"object\" && !Array.isArray(value))\n        return { ...rawInit, ...value };\n      return value;\n    } else if (typeof rawValue !== \"string\") {\n      return rawValue;\n    } else {\n      return serializer.read(rawValue);\n    }\n  }\n  function update(event) {\n    if (event && event.storageArea !== storage)\n      return;\n    if (event && event.key == null) {\n      data.value = rawInit;\n      return;\n    }\n    if (event && event.key !== keyComputed.value) {\n      return;\n    }\n    pauseWatch();\n    try {\n      const serializedData = serializer.write(data.value);\n      if (event === void 0 || (event == null ? void 0 : event.newValue) !== serializedData) {\n        data.value = read(event);\n      }\n    } catch (e) {\n      onError(e);\n    } finally {\n      if (event)\n        nextTick(resumeWatch);\n      else\n        resumeWatch();\n    }\n  }\n  function updateFromCustomEvent(event) {\n    update(event.detail);\n  }\n  return data;\n}\n\nconst CSS_DISABLE_TRANS = \"*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}\";\nfunction useColorMode(options = {}) {\n  const {\n    selector = \"html\",\n    attribute = \"class\",\n    initialValue = \"auto\",\n    window = defaultWindow,\n    storage,\n    storageKey = \"vueuse-color-scheme\",\n    listenToStorageChanges = true,\n    storageRef,\n    emitAuto,\n    disableTransition = true\n  } = options;\n  const modes = {\n    auto: \"\",\n    light: \"light\",\n    dark: \"dark\",\n    ...options.modes || {}\n  };\n  const preferredDark = usePreferredDark({ window });\n  const system = computed(() => preferredDark.value ? \"dark\" : \"light\");\n  const store = storageRef || (storageKey == null ? toRef(initialValue) : useStorage(storageKey, initialValue, storage, { window, listenToStorageChanges }));\n  const state = computed(() => store.value === \"auto\" ? system.value : store.value);\n  const updateHTMLAttrs = getSSRHandler(\n    \"updateHTMLAttrs\",\n    (selector2, attribute2, value) => {\n      const el = typeof selector2 === \"string\" ? window == null ? void 0 : window.document.querySelector(selector2) : unrefElement(selector2);\n      if (!el)\n        return;\n      const classesToAdd = /* @__PURE__ */ new Set();\n      const classesToRemove = /* @__PURE__ */ new Set();\n      let attributeToChange = null;\n      if (attribute2 === \"class\") {\n        const current = value.split(/\\s/g);\n        Object.values(modes).flatMap((i) => (i || \"\").split(/\\s/g)).filter(Boolean).forEach((v) => {\n          if (current.includes(v))\n            classesToAdd.add(v);\n          else\n            classesToRemove.add(v);\n        });\n      } else {\n        attributeToChange = { key: attribute2, value };\n      }\n      if (classesToAdd.size === 0 && classesToRemove.size === 0 && attributeToChange === null)\n        return;\n      let style;\n      if (disableTransition) {\n        style = window.document.createElement(\"style\");\n        style.appendChild(document.createTextNode(CSS_DISABLE_TRANS));\n        window.document.head.appendChild(style);\n      }\n      for (const c of classesToAdd) {\n        el.classList.add(c);\n      }\n      for (const c of classesToRemove) {\n        el.classList.remove(c);\n      }\n      if (attributeToChange) {\n        el.setAttribute(attributeToChange.key, attributeToChange.value);\n      }\n      if (disableTransition) {\n        window.getComputedStyle(style).opacity;\n        document.head.removeChild(style);\n      }\n    }\n  );\n  function defaultOnChanged(mode) {\n    var _a;\n    updateHTMLAttrs(selector, attribute, (_a = modes[mode]) != null ? _a : mode);\n  }\n  function onChanged(mode) {\n    if (options.onChanged)\n      options.onChanged(mode, defaultOnChanged);\n    else\n      defaultOnChanged(mode);\n  }\n  watch(state, onChanged, { flush: \"post\", immediate: true });\n  tryOnMounted(() => onChanged(state.value));\n  const auto = computed({\n    get() {\n      return emitAuto ? store.value : state.value;\n    },\n    set(v) {\n      store.value = v;\n    }\n  });\n  return Object.assign(auto, { store, system, state });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useConfirmDialog(revealed = shallowRef(false)) {\n  const confirmHook = createEventHook();\n  const cancelHook = createEventHook();\n  const revealHook = createEventHook();\n  let _resolve = noop;\n  const reveal = (data) => {\n    revealHook.trigger(data);\n    revealed.value = true;\n    return new Promise((resolve) => {\n      _resolve = resolve;\n    });\n  };\n  const confirm = (data) => {\n    revealed.value = false;\n    confirmHook.trigger(data);\n    _resolve({ data, isCanceled: false });\n  };\n  const cancel = (data) => {\n    revealed.value = false;\n    cancelHook.trigger(data);\n    _resolve({ data, isCanceled: true });\n  };\n  return {\n    isRevealed: computed(() => revealed.value),\n    reveal,\n    confirm,\n    cancel,\n    onReveal: revealHook.on,\n    onConfirm: confirmHook.on,\n    onCancel: cancelHook.on\n  };\n}\n\nfunction useCountdown(initialCountdown, options) {\n  var _a, _b;\n  const remaining = shallowRef(toValue(initialCountdown));\n  const intervalController = useIntervalFn(() => {\n    var _a2, _b2;\n    const value = remaining.value - 1;\n    remaining.value = value < 0 ? 0 : value;\n    (_a2 = options == null ? void 0 : options.onTick) == null ? void 0 : _a2.call(options);\n    if (remaining.value <= 0) {\n      intervalController.pause();\n      (_b2 = options == null ? void 0 : options.onComplete) == null ? void 0 : _b2.call(options);\n    }\n  }, (_a = options == null ? void 0 : options.interval) != null ? _a : 1e3, { immediate: (_b = options == null ? void 0 : options.immediate) != null ? _b : false });\n  const reset = (countdown) => {\n    var _a2;\n    remaining.value = (_a2 = toValue(countdown)) != null ? _a2 : toValue(initialCountdown);\n  };\n  const stop = () => {\n    intervalController.pause();\n    reset();\n  };\n  const resume = () => {\n    if (!intervalController.isActive.value) {\n      if (remaining.value > 0) {\n        intervalController.resume();\n      }\n    }\n  };\n  const start = (countdown) => {\n    reset(countdown);\n    intervalController.resume();\n  };\n  return {\n    remaining,\n    reset,\n    stop,\n    start,\n    pause: intervalController.pause,\n    resume,\n    isActive: intervalController.isActive\n  };\n}\n\nfunction useCssVar(prop, target, options = {}) {\n  const { window = defaultWindow, initialValue, observe = false } = options;\n  const variable = shallowRef(initialValue);\n  const elRef = computed(() => {\n    var _a;\n    return unrefElement(target) || ((_a = window == null ? void 0 : window.document) == null ? void 0 : _a.documentElement);\n  });\n  function updateCssVar() {\n    var _a;\n    const key = toValue(prop);\n    const el = toValue(elRef);\n    if (el && window && key) {\n      const value = (_a = window.getComputedStyle(el).getPropertyValue(key)) == null ? void 0 : _a.trim();\n      variable.value = value || variable.value || initialValue;\n    }\n  }\n  if (observe) {\n    useMutationObserver(elRef, updateCssVar, {\n      attributeFilter: [\"style\", \"class\"],\n      window\n    });\n  }\n  watch(\n    [elRef, () => toValue(prop)],\n    (_, old) => {\n      if (old[0] && old[1])\n        old[0].style.removeProperty(old[1]);\n      updateCssVar();\n    },\n    { immediate: true }\n  );\n  watch(\n    [variable, elRef],\n    ([val, el]) => {\n      const raw_prop = toValue(prop);\n      if ((el == null ? void 0 : el.style) && raw_prop) {\n        if (val == null)\n          el.style.removeProperty(raw_prop);\n        else\n          el.style.setProperty(raw_prop, val);\n      }\n    },\n    { immediate: true }\n  );\n  return variable;\n}\n\nfunction useCurrentElement(rootComponent) {\n  const vm = getCurrentInstance();\n  const currentElement = computedWithControl(\n    () => null,\n    () => rootComponent ? unrefElement(rootComponent) : vm.proxy.$el\n  );\n  onUpdated(currentElement.trigger);\n  onMounted(currentElement.trigger);\n  return currentElement;\n}\n\nfunction useCycleList(list, options) {\n  const state = shallowRef(getInitialValue());\n  const listRef = toRef(list);\n  const index = computed({\n    get() {\n      var _a;\n      const targetList = listRef.value;\n      let index2 = (options == null ? void 0 : options.getIndexOf) ? options.getIndexOf(state.value, targetList) : targetList.indexOf(state.value);\n      if (index2 < 0)\n        index2 = (_a = options == null ? void 0 : options.fallbackIndex) != null ? _a : 0;\n      return index2;\n    },\n    set(v) {\n      set(v);\n    }\n  });\n  function set(i) {\n    const targetList = listRef.value;\n    const length = targetList.length;\n    const index2 = (i % length + length) % length;\n    const value = targetList[index2];\n    state.value = value;\n    return value;\n  }\n  function shift(delta = 1) {\n    return set(index.value + delta);\n  }\n  function next(n = 1) {\n    return shift(n);\n  }\n  function prev(n = 1) {\n    return shift(-n);\n  }\n  function getInitialValue() {\n    var _a, _b;\n    return (_b = toValue((_a = options == null ? void 0 : options.initialValue) != null ? _a : toValue(list)[0])) != null ? _b : void 0;\n  }\n  watch(listRef, () => set(index.value));\n  return {\n    state,\n    index,\n    next,\n    prev,\n    go: set\n  };\n}\n\nfunction useDark(options = {}) {\n  const {\n    valueDark = \"dark\",\n    valueLight = \"\"\n  } = options;\n  const mode = useColorMode({\n    ...options,\n    onChanged: (mode2, defaultHandler) => {\n      var _a;\n      if (options.onChanged)\n        (_a = options.onChanged) == null ? void 0 : _a.call(options, mode2 === \"dark\", defaultHandler, mode2);\n      else\n        defaultHandler(mode2);\n    },\n    modes: {\n      dark: valueDark,\n      light: valueLight\n    }\n  });\n  const system = computed(() => mode.system.value);\n  const isDark = computed({\n    get() {\n      return mode.value === \"dark\";\n    },\n    set(v) {\n      const modeVal = v ? \"dark\" : \"light\";\n      if (system.value === modeVal)\n        mode.value = \"auto\";\n      else\n        mode.value = modeVal;\n    }\n  });\n  return isDark;\n}\n\nfunction fnBypass(v) {\n  return v;\n}\nfunction fnSetSource(source, value) {\n  return source.value = value;\n}\nfunction defaultDump(clone) {\n  return clone ? typeof clone === \"function\" ? clone : cloneFnJSON : fnBypass;\n}\nfunction defaultParse(clone) {\n  return clone ? typeof clone === \"function\" ? clone : cloneFnJSON : fnBypass;\n}\nfunction useManualRefHistory(source, options = {}) {\n  const {\n    clone = false,\n    dump = defaultDump(clone),\n    parse = defaultParse(clone),\n    setSource = fnSetSource\n  } = options;\n  function _createHistoryRecord() {\n    return markRaw({\n      snapshot: dump(source.value),\n      timestamp: timestamp()\n    });\n  }\n  const last = ref(_createHistoryRecord());\n  const undoStack = ref([]);\n  const redoStack = ref([]);\n  const _setSource = (record) => {\n    setSource(source, parse(record.snapshot));\n    last.value = record;\n  };\n  const commit = () => {\n    undoStack.value.unshift(last.value);\n    last.value = _createHistoryRecord();\n    if (options.capacity && undoStack.value.length > options.capacity)\n      undoStack.value.splice(options.capacity, Number.POSITIVE_INFINITY);\n    if (redoStack.value.length)\n      redoStack.value.splice(0, redoStack.value.length);\n  };\n  const clear = () => {\n    undoStack.value.splice(0, undoStack.value.length);\n    redoStack.value.splice(0, redoStack.value.length);\n  };\n  const undo = () => {\n    const state = undoStack.value.shift();\n    if (state) {\n      redoStack.value.unshift(last.value);\n      _setSource(state);\n    }\n  };\n  const redo = () => {\n    const state = redoStack.value.shift();\n    if (state) {\n      undoStack.value.unshift(last.value);\n      _setSource(state);\n    }\n  };\n  const reset = () => {\n    _setSource(last.value);\n  };\n  const history = computed(() => [last.value, ...undoStack.value]);\n  const canUndo = computed(() => undoStack.value.length > 0);\n  const canRedo = computed(() => redoStack.value.length > 0);\n  return {\n    source,\n    undoStack,\n    redoStack,\n    last,\n    history,\n    canUndo,\n    canRedo,\n    clear,\n    commit,\n    reset,\n    undo,\n    redo\n  };\n}\n\nfunction useRefHistory(source, options = {}) {\n  const {\n    deep = false,\n    flush = \"pre\",\n    eventFilter,\n    shouldCommit = () => true\n  } = options;\n  const {\n    eventFilter: composedFilter,\n    pause,\n    resume: resumeTracking,\n    isActive: isTracking\n  } = pausableFilter(eventFilter);\n  let lastRawValue = source.value;\n  const {\n    ignoreUpdates,\n    ignorePrevAsyncUpdates,\n    stop\n  } = watchIgnorable(\n    source,\n    commit,\n    { deep, flush, eventFilter: composedFilter }\n  );\n  function setSource(source2, value) {\n    ignorePrevAsyncUpdates();\n    ignoreUpdates(() => {\n      source2.value = value;\n      lastRawValue = value;\n    });\n  }\n  const manualHistory = useManualRefHistory(source, { ...options, clone: options.clone || deep, setSource });\n  const { clear, commit: manualCommit } = manualHistory;\n  function commit() {\n    ignorePrevAsyncUpdates();\n    if (!shouldCommit(lastRawValue, source.value))\n      return;\n    lastRawValue = source.value;\n    manualCommit();\n  }\n  function resume(commitNow) {\n    resumeTracking();\n    if (commitNow)\n      commit();\n  }\n  function batch(fn) {\n    let canceled = false;\n    const cancel = () => canceled = true;\n    ignoreUpdates(() => {\n      fn(cancel);\n    });\n    if (!canceled)\n      commit();\n  }\n  function dispose() {\n    stop();\n    clear();\n  }\n  return {\n    ...manualHistory,\n    isTracking,\n    pause,\n    resume,\n    commit,\n    batch,\n    dispose\n  };\n}\n\nfunction useDebouncedRefHistory(source, options = {}) {\n  const filter = options.debounce ? debounceFilter(options.debounce) : void 0;\n  const history = useRefHistory(source, { ...options, eventFilter: filter });\n  return {\n    ...history\n  };\n}\n\nfunction useDeviceMotion(options = {}) {\n  const {\n    window = defaultWindow,\n    requestPermissions = false,\n    eventFilter = bypassFilter\n  } = options;\n  const isSupported = useSupported(() => typeof DeviceMotionEvent !== \"undefined\");\n  const requirePermissions = useSupported(() => isSupported.value && \"requestPermission\" in DeviceMotionEvent && typeof DeviceMotionEvent.requestPermission === \"function\");\n  const permissionGranted = shallowRef(false);\n  const acceleration = ref({ x: null, y: null, z: null });\n  const rotationRate = ref({ alpha: null, beta: null, gamma: null });\n  const interval = shallowRef(0);\n  const accelerationIncludingGravity = ref({\n    x: null,\n    y: null,\n    z: null\n  });\n  function init() {\n    if (window) {\n      const onDeviceMotion = createFilterWrapper(\n        eventFilter,\n        (event) => {\n          var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n          acceleration.value = {\n            x: ((_a = event.acceleration) == null ? void 0 : _a.x) || null,\n            y: ((_b = event.acceleration) == null ? void 0 : _b.y) || null,\n            z: ((_c = event.acceleration) == null ? void 0 : _c.z) || null\n          };\n          accelerationIncludingGravity.value = {\n            x: ((_d = event.accelerationIncludingGravity) == null ? void 0 : _d.x) || null,\n            y: ((_e = event.accelerationIncludingGravity) == null ? void 0 : _e.y) || null,\n            z: ((_f = event.accelerationIncludingGravity) == null ? void 0 : _f.z) || null\n          };\n          rotationRate.value = {\n            alpha: ((_g = event.rotationRate) == null ? void 0 : _g.alpha) || null,\n            beta: ((_h = event.rotationRate) == null ? void 0 : _h.beta) || null,\n            gamma: ((_i = event.rotationRate) == null ? void 0 : _i.gamma) || null\n          };\n          interval.value = event.interval;\n        }\n      );\n      useEventListener(window, \"devicemotion\", onDeviceMotion, { passive: true });\n    }\n  }\n  const ensurePermissions = async () => {\n    if (!requirePermissions.value)\n      permissionGranted.value = true;\n    if (permissionGranted.value)\n      return;\n    if (requirePermissions.value) {\n      const requestPermission = DeviceMotionEvent.requestPermission;\n      try {\n        const response = await requestPermission();\n        if (response === \"granted\") {\n          permissionGranted.value = true;\n          init();\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  };\n  if (isSupported.value) {\n    if (requestPermissions && requirePermissions.value) {\n      ensurePermissions().then(() => init());\n    } else {\n      init();\n    }\n  }\n  return {\n    acceleration,\n    accelerationIncludingGravity,\n    rotationRate,\n    interval,\n    isSupported,\n    requirePermissions,\n    ensurePermissions,\n    permissionGranted\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useDeviceOrientation(options = {}) {\n  const { window = defaultWindow } = options;\n  const isSupported = useSupported(() => window && \"DeviceOrientationEvent\" in window);\n  const isAbsolute = shallowRef(false);\n  const alpha = shallowRef(null);\n  const beta = shallowRef(null);\n  const gamma = shallowRef(null);\n  if (window && isSupported.value) {\n    useEventListener(window, \"deviceorientation\", (event) => {\n      isAbsolute.value = event.absolute;\n      alpha.value = event.alpha;\n      beta.value = event.beta;\n      gamma.value = event.gamma;\n    }, { passive: true });\n  }\n  return {\n    isSupported,\n    isAbsolute,\n    alpha,\n    beta,\n    gamma\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useDevicePixelRatio(options = {}) {\n  const {\n    window = defaultWindow\n  } = options;\n  const pixelRatio = shallowRef(1);\n  const query = useMediaQuery(() => `(resolution: ${pixelRatio.value}dppx)`, options);\n  let stop = noop;\n  if (window) {\n    stop = watchImmediate(query, () => pixelRatio.value = window.devicePixelRatio);\n  }\n  return {\n    pixelRatio: readonly(pixelRatio),\n    stop\n  };\n}\n\nfunction useDevicesList(options = {}) {\n  const {\n    navigator = defaultNavigator,\n    requestPermissions = false,\n    constraints = { audio: true, video: true },\n    onUpdated\n  } = options;\n  const devices = ref([]);\n  const videoInputs = computed(() => devices.value.filter((i) => i.kind === \"videoinput\"));\n  const audioInputs = computed(() => devices.value.filter((i) => i.kind === \"audioinput\"));\n  const audioOutputs = computed(() => devices.value.filter((i) => i.kind === \"audiooutput\"));\n  const isSupported = useSupported(() => navigator && navigator.mediaDevices && navigator.mediaDevices.enumerateDevices);\n  const permissionGranted = shallowRef(false);\n  let stream;\n  async function update() {\n    if (!isSupported.value)\n      return;\n    devices.value = await navigator.mediaDevices.enumerateDevices();\n    onUpdated == null ? void 0 : onUpdated(devices.value);\n    if (stream) {\n      stream.getTracks().forEach((t) => t.stop());\n      stream = null;\n    }\n  }\n  async function ensurePermissions() {\n    const deviceName = constraints.video ? \"camera\" : \"microphone\";\n    if (!isSupported.value)\n      return false;\n    if (permissionGranted.value)\n      return true;\n    const { state, query } = usePermission(deviceName, { controls: true });\n    await query();\n    if (state.value !== \"granted\") {\n      let granted = true;\n      try {\n        const allDevices = await navigator.mediaDevices.enumerateDevices();\n        const hasCamera = allDevices.some((device) => device.kind === \"videoinput\");\n        const hasMicrophone = allDevices.some((device) => device.kind === \"audioinput\" || device.kind === \"audiooutput\");\n        constraints.video = hasCamera ? constraints.video : false;\n        constraints.audio = hasMicrophone ? constraints.audio : false;\n        stream = await navigator.mediaDevices.getUserMedia(constraints);\n      } catch (e) {\n        stream = null;\n        granted = false;\n      }\n      update();\n      permissionGranted.value = granted;\n    } else {\n      permissionGranted.value = true;\n    }\n    return permissionGranted.value;\n  }\n  if (isSupported.value) {\n    if (requestPermissions)\n      ensurePermissions();\n    useEventListener(navigator.mediaDevices, \"devicechange\", update, { passive: true });\n    update();\n  }\n  return {\n    devices,\n    ensurePermissions,\n    permissionGranted,\n    videoInputs,\n    audioInputs,\n    audioOutputs,\n    isSupported\n  };\n}\n\nfunction useDisplayMedia(options = {}) {\n  var _a;\n  const enabled = shallowRef((_a = options.enabled) != null ? _a : false);\n  const video = options.video;\n  const audio = options.audio;\n  const { navigator = defaultNavigator } = options;\n  const isSupported = useSupported(() => {\n    var _a2;\n    return (_a2 = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : _a2.getDisplayMedia;\n  });\n  const constraint = { audio, video };\n  const stream = shallowRef();\n  async function _start() {\n    var _a2;\n    if (!isSupported.value || stream.value)\n      return;\n    stream.value = await navigator.mediaDevices.getDisplayMedia(constraint);\n    (_a2 = stream.value) == null ? void 0 : _a2.getTracks().forEach((t) => useEventListener(t, \"ended\", stop, { passive: true }));\n    return stream.value;\n  }\n  async function _stop() {\n    var _a2;\n    (_a2 = stream.value) == null ? void 0 : _a2.getTracks().forEach((t) => t.stop());\n    stream.value = void 0;\n  }\n  function stop() {\n    _stop();\n    enabled.value = false;\n  }\n  async function start() {\n    await _start();\n    if (stream.value)\n      enabled.value = true;\n    return stream.value;\n  }\n  watch(\n    enabled,\n    (v) => {\n      if (v)\n        _start();\n      else\n        _stop();\n    },\n    { immediate: true }\n  );\n  return {\n    isSupported,\n    stream,\n    start,\n    stop,\n    enabled\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useDocumentVisibility(options = {}) {\n  const { document = defaultDocument } = options;\n  if (!document)\n    return shallowRef(\"visible\");\n  const visibility = shallowRef(document.visibilityState);\n  useEventListener(document, \"visibilitychange\", () => {\n    visibility.value = document.visibilityState;\n  }, { passive: true });\n  return visibility;\n}\n\nfunction useDraggable(target, options = {}) {\n  var _a;\n  const {\n    pointerTypes,\n    preventDefault,\n    stopPropagation,\n    exact,\n    onMove,\n    onEnd,\n    onStart,\n    initialValue,\n    axis = \"both\",\n    draggingElement = defaultWindow,\n    containerElement,\n    handle: draggingHandle = target,\n    buttons = [0]\n  } = options;\n  const position = ref(\n    (_a = toValue(initialValue)) != null ? _a : { x: 0, y: 0 }\n  );\n  const pressedDelta = ref();\n  const filterEvent = (e) => {\n    if (pointerTypes)\n      return pointerTypes.includes(e.pointerType);\n    return true;\n  };\n  const handleEvent = (e) => {\n    if (toValue(preventDefault))\n      e.preventDefault();\n    if (toValue(stopPropagation))\n      e.stopPropagation();\n  };\n  const start = (e) => {\n    var _a2;\n    if (!toValue(buttons).includes(e.button))\n      return;\n    if (toValue(options.disabled) || !filterEvent(e))\n      return;\n    if (toValue(exact) && e.target !== toValue(target))\n      return;\n    const container = toValue(containerElement);\n    const containerRect = (_a2 = container == null ? void 0 : container.getBoundingClientRect) == null ? void 0 : _a2.call(container);\n    const targetRect = toValue(target).getBoundingClientRect();\n    const pos = {\n      x: e.clientX - (container ? targetRect.left - containerRect.left + container.scrollLeft : targetRect.left),\n      y: e.clientY - (container ? targetRect.top - containerRect.top + container.scrollTop : targetRect.top)\n    };\n    if ((onStart == null ? void 0 : onStart(pos, e)) === false)\n      return;\n    pressedDelta.value = pos;\n    handleEvent(e);\n  };\n  const move = (e) => {\n    if (toValue(options.disabled) || !filterEvent(e))\n      return;\n    if (!pressedDelta.value)\n      return;\n    const container = toValue(containerElement);\n    const targetRect = toValue(target).getBoundingClientRect();\n    let { x, y } = position.value;\n    if (axis === \"x\" || axis === \"both\") {\n      x = e.clientX - pressedDelta.value.x;\n      if (container)\n        x = Math.min(Math.max(0, x), container.scrollWidth - targetRect.width);\n    }\n    if (axis === \"y\" || axis === \"both\") {\n      y = e.clientY - pressedDelta.value.y;\n      if (container)\n        y = Math.min(Math.max(0, y), container.scrollHeight - targetRect.height);\n    }\n    position.value = {\n      x,\n      y\n    };\n    onMove == null ? void 0 : onMove(position.value, e);\n    handleEvent(e);\n  };\n  const end = (e) => {\n    if (toValue(options.disabled) || !filterEvent(e))\n      return;\n    if (!pressedDelta.value)\n      return;\n    pressedDelta.value = void 0;\n    onEnd == null ? void 0 : onEnd(position.value, e);\n    handleEvent(e);\n  };\n  if (isClient) {\n    const config = () => {\n      var _a2;\n      return {\n        capture: (_a2 = options.capture) != null ? _a2 : true,\n        passive: !toValue(preventDefault)\n      };\n    };\n    useEventListener(draggingHandle, \"pointerdown\", start, config);\n    useEventListener(draggingElement, \"pointermove\", move, config);\n    useEventListener(draggingElement, \"pointerup\", end, config);\n  }\n  return {\n    ...toRefs(position),\n    position,\n    isDragging: computed(() => !!pressedDelta.value),\n    style: computed(\n      () => `left:${position.value.x}px;top:${position.value.y}px;`\n    )\n  };\n}\n\nfunction useDropZone(target, options = {}) {\n  var _a, _b;\n  const isOverDropZone = shallowRef(false);\n  const files = shallowRef(null);\n  let counter = 0;\n  let isValid = true;\n  if (isClient) {\n    const _options = typeof options === \"function\" ? { onDrop: options } : options;\n    const multiple = (_a = _options.multiple) != null ? _a : true;\n    const preventDefaultForUnhandled = (_b = _options.preventDefaultForUnhandled) != null ? _b : false;\n    const getFiles = (event) => {\n      var _a2, _b2;\n      const list = Array.from((_b2 = (_a2 = event.dataTransfer) == null ? void 0 : _a2.files) != null ? _b2 : []);\n      return list.length === 0 ? null : multiple ? list : [list[0]];\n    };\n    const checkDataTypes = (types) => {\n      const dataTypes = unref(_options.dataTypes);\n      if (typeof dataTypes === \"function\")\n        return dataTypes(types);\n      if (!(dataTypes == null ? void 0 : dataTypes.length))\n        return true;\n      if (types.length === 0)\n        return false;\n      return types.every(\n        (type) => dataTypes.some((allowedType) => type.includes(allowedType))\n      );\n    };\n    const checkValidity = (items) => {\n      const types = Array.from(items != null ? items : []).map((item) => item.type);\n      const dataTypesValid = checkDataTypes(types);\n      const multipleFilesValid = multiple || items.length <= 1;\n      return dataTypesValid && multipleFilesValid;\n    };\n    const isSafari = () => /^(?:(?!chrome|android).)*safari/i.test(navigator.userAgent) && !(\"chrome\" in window);\n    const handleDragEvent = (event, eventType) => {\n      var _a2, _b2, _c, _d, _e, _f;\n      const dataTransferItemList = (_a2 = event.dataTransfer) == null ? void 0 : _a2.items;\n      isValid = (_b2 = dataTransferItemList && checkValidity(dataTransferItemList)) != null ? _b2 : false;\n      if (preventDefaultForUnhandled) {\n        event.preventDefault();\n      }\n      if (!isSafari() && !isValid) {\n        if (event.dataTransfer) {\n          event.dataTransfer.dropEffect = \"none\";\n        }\n        return;\n      }\n      event.preventDefault();\n      if (event.dataTransfer) {\n        event.dataTransfer.dropEffect = \"copy\";\n      }\n      const currentFiles = getFiles(event);\n      switch (eventType) {\n        case \"enter\":\n          counter += 1;\n          isOverDropZone.value = true;\n          (_c = _options.onEnter) == null ? void 0 : _c.call(_options, null, event);\n          break;\n        case \"over\":\n          (_d = _options.onOver) == null ? void 0 : _d.call(_options, null, event);\n          break;\n        case \"leave\":\n          counter -= 1;\n          if (counter === 0)\n            isOverDropZone.value = false;\n          (_e = _options.onLeave) == null ? void 0 : _e.call(_options, null, event);\n          break;\n        case \"drop\":\n          counter = 0;\n          isOverDropZone.value = false;\n          if (isValid) {\n            files.value = currentFiles;\n            (_f = _options.onDrop) == null ? void 0 : _f.call(_options, currentFiles, event);\n          }\n          break;\n      }\n    };\n    useEventListener(target, \"dragenter\", (event) => handleDragEvent(event, \"enter\"));\n    useEventListener(target, \"dragover\", (event) => handleDragEvent(event, \"over\"));\n    useEventListener(target, \"dragleave\", (event) => handleDragEvent(event, \"leave\"));\n    useEventListener(target, \"drop\", (event) => handleDragEvent(event, \"drop\"));\n  }\n  return {\n    files,\n    isOverDropZone\n  };\n}\n\nfunction useResizeObserver(target, callback, options = {}) {\n  const { window = defaultWindow, ...observerOptions } = options;\n  let observer;\n  const isSupported = useSupported(() => window && \"ResizeObserver\" in window);\n  const cleanup = () => {\n    if (observer) {\n      observer.disconnect();\n      observer = void 0;\n    }\n  };\n  const targets = computed(() => {\n    const _targets = toValue(target);\n    return Array.isArray(_targets) ? _targets.map((el) => unrefElement(el)) : [unrefElement(_targets)];\n  });\n  const stopWatch = watch(\n    targets,\n    (els) => {\n      cleanup();\n      if (isSupported.value && window) {\n        observer = new ResizeObserver(callback);\n        for (const _el of els) {\n          if (_el)\n            observer.observe(_el, observerOptions);\n        }\n      }\n    },\n    { immediate: true, flush: \"post\" }\n  );\n  const stop = () => {\n    cleanup();\n    stopWatch();\n  };\n  tryOnScopeDispose(stop);\n  return {\n    isSupported,\n    stop\n  };\n}\n\nfunction useElementBounding(target, options = {}) {\n  const {\n    reset = true,\n    windowResize = true,\n    windowScroll = true,\n    immediate = true,\n    updateTiming = \"sync\"\n  } = options;\n  const height = shallowRef(0);\n  const bottom = shallowRef(0);\n  const left = shallowRef(0);\n  const right = shallowRef(0);\n  const top = shallowRef(0);\n  const width = shallowRef(0);\n  const x = shallowRef(0);\n  const y = shallowRef(0);\n  function recalculate() {\n    const el = unrefElement(target);\n    if (!el) {\n      if (reset) {\n        height.value = 0;\n        bottom.value = 0;\n        left.value = 0;\n        right.value = 0;\n        top.value = 0;\n        width.value = 0;\n        x.value = 0;\n        y.value = 0;\n      }\n      return;\n    }\n    const rect = el.getBoundingClientRect();\n    height.value = rect.height;\n    bottom.value = rect.bottom;\n    left.value = rect.left;\n    right.value = rect.right;\n    top.value = rect.top;\n    width.value = rect.width;\n    x.value = rect.x;\n    y.value = rect.y;\n  }\n  function update() {\n    if (updateTiming === \"sync\")\n      recalculate();\n    else if (updateTiming === \"next-frame\")\n      requestAnimationFrame(() => recalculate());\n  }\n  useResizeObserver(target, update);\n  watch(() => unrefElement(target), (ele) => !ele && update());\n  useMutationObserver(target, update, {\n    attributeFilter: [\"style\", \"class\"]\n  });\n  if (windowScroll)\n    useEventListener(\"scroll\", update, { capture: true, passive: true });\n  if (windowResize)\n    useEventListener(\"resize\", update, { passive: true });\n  tryOnMounted(() => {\n    if (immediate)\n      update();\n  });\n  return {\n    height,\n    bottom,\n    left,\n    right,\n    top,\n    width,\n    x,\n    y,\n    update\n  };\n}\n\nfunction useElementByPoint(options) {\n  const {\n    x,\n    y,\n    document = defaultDocument,\n    multiple,\n    interval = \"requestAnimationFrame\",\n    immediate = true\n  } = options;\n  const isSupported = useSupported(() => {\n    if (toValue(multiple))\n      return document && \"elementsFromPoint\" in document;\n    return document && \"elementFromPoint\" in document;\n  });\n  const element = shallowRef(null);\n  const cb = () => {\n    var _a, _b;\n    element.value = toValue(multiple) ? (_a = document == null ? void 0 : document.elementsFromPoint(toValue(x), toValue(y))) != null ? _a : [] : (_b = document == null ? void 0 : document.elementFromPoint(toValue(x), toValue(y))) != null ? _b : null;\n  };\n  const controls = interval === \"requestAnimationFrame\" ? useRafFn(cb, { immediate }) : useIntervalFn(cb, interval, { immediate });\n  return {\n    isSupported,\n    element,\n    ...controls\n  };\n}\n\nfunction useElementHover(el, options = {}) {\n  const {\n    delayEnter = 0,\n    delayLeave = 0,\n    triggerOnRemoval = false,\n    window = defaultWindow\n  } = options;\n  const isHovered = shallowRef(false);\n  let timer;\n  const toggle = (entering) => {\n    const delay = entering ? delayEnter : delayLeave;\n    if (timer) {\n      clearTimeout(timer);\n      timer = void 0;\n    }\n    if (delay)\n      timer = setTimeout(() => isHovered.value = entering, delay);\n    else\n      isHovered.value = entering;\n  };\n  if (!window)\n    return isHovered;\n  useEventListener(el, \"mouseenter\", () => toggle(true), { passive: true });\n  useEventListener(el, \"mouseleave\", () => toggle(false), { passive: true });\n  if (triggerOnRemoval) {\n    onElementRemoval(\n      computed(() => unrefElement(el)),\n      () => toggle(false)\n    );\n  }\n  return isHovered;\n}\n\nfunction useElementSize(target, initialSize = { width: 0, height: 0 }, options = {}) {\n  const { window = defaultWindow, box = \"content-box\" } = options;\n  const isSVG = computed(() => {\n    var _a, _b;\n    return (_b = (_a = unrefElement(target)) == null ? void 0 : _a.namespaceURI) == null ? void 0 : _b.includes(\"svg\");\n  });\n  const width = shallowRef(initialSize.width);\n  const height = shallowRef(initialSize.height);\n  const { stop: stop1 } = useResizeObserver(\n    target,\n    ([entry]) => {\n      const boxSize = box === \"border-box\" ? entry.borderBoxSize : box === \"content-box\" ? entry.contentBoxSize : entry.devicePixelContentBoxSize;\n      if (window && isSVG.value) {\n        const $elem = unrefElement(target);\n        if ($elem) {\n          const rect = $elem.getBoundingClientRect();\n          width.value = rect.width;\n          height.value = rect.height;\n        }\n      } else {\n        if (boxSize) {\n          const formatBoxSize = toArray(boxSize);\n          width.value = formatBoxSize.reduce((acc, { inlineSize }) => acc + inlineSize, 0);\n          height.value = formatBoxSize.reduce((acc, { blockSize }) => acc + blockSize, 0);\n        } else {\n          width.value = entry.contentRect.width;\n          height.value = entry.contentRect.height;\n        }\n      }\n    },\n    options\n  );\n  tryOnMounted(() => {\n    const ele = unrefElement(target);\n    if (ele) {\n      width.value = \"offsetWidth\" in ele ? ele.offsetWidth : initialSize.width;\n      height.value = \"offsetHeight\" in ele ? ele.offsetHeight : initialSize.height;\n    }\n  });\n  const stop2 = watch(\n    () => unrefElement(target),\n    (ele) => {\n      width.value = ele ? initialSize.width : 0;\n      height.value = ele ? initialSize.height : 0;\n    }\n  );\n  function stop() {\n    stop1();\n    stop2();\n  }\n  return {\n    width,\n    height,\n    stop\n  };\n}\n\nfunction useIntersectionObserver(target, callback, options = {}) {\n  const {\n    root,\n    rootMargin = \"0px\",\n    threshold = 0,\n    window = defaultWindow,\n    immediate = true\n  } = options;\n  const isSupported = useSupported(() => window && \"IntersectionObserver\" in window);\n  const targets = computed(() => {\n    const _target = toValue(target);\n    return toArray(_target).map(unrefElement).filter(notNullish);\n  });\n  let cleanup = noop;\n  const isActive = shallowRef(immediate);\n  const stopWatch = isSupported.value ? watch(\n    () => [targets.value, unrefElement(root), isActive.value],\n    ([targets2, root2]) => {\n      cleanup();\n      if (!isActive.value)\n        return;\n      if (!targets2.length)\n        return;\n      const observer = new IntersectionObserver(\n        callback,\n        {\n          root: unrefElement(root2),\n          rootMargin,\n          threshold\n        }\n      );\n      targets2.forEach((el) => el && observer.observe(el));\n      cleanup = () => {\n        observer.disconnect();\n        cleanup = noop;\n      };\n    },\n    { immediate, flush: \"post\" }\n  ) : noop;\n  const stop = () => {\n    cleanup();\n    stopWatch();\n    isActive.value = false;\n  };\n  tryOnScopeDispose(stop);\n  return {\n    isSupported,\n    isActive,\n    pause() {\n      cleanup();\n      isActive.value = false;\n    },\n    resume() {\n      isActive.value = true;\n    },\n    stop\n  };\n}\n\nfunction useElementVisibility(element, options = {}) {\n  const {\n    window = defaultWindow,\n    scrollTarget,\n    threshold = 0,\n    rootMargin,\n    once = false\n  } = options;\n  const elementIsVisible = shallowRef(false);\n  const { stop } = useIntersectionObserver(\n    element,\n    (intersectionObserverEntries) => {\n      let isIntersecting = elementIsVisible.value;\n      let latestTime = 0;\n      for (const entry of intersectionObserverEntries) {\n        if (entry.time >= latestTime) {\n          latestTime = entry.time;\n          isIntersecting = entry.isIntersecting;\n        }\n      }\n      elementIsVisible.value = isIntersecting;\n      if (once) {\n        watchOnce(elementIsVisible, () => {\n          stop();\n        });\n      }\n    },\n    {\n      root: scrollTarget,\n      window,\n      threshold,\n      rootMargin: toValue(rootMargin)\n    }\n  );\n  return elementIsVisible;\n}\n\nconst events = /* @__PURE__ */ new Map();\n\n// @__NO_SIDE_EFFECTS__\nfunction useEventBus(key) {\n  const scope = getCurrentScope();\n  function on(listener) {\n    var _a;\n    const listeners = events.get(key) || /* @__PURE__ */ new Set();\n    listeners.add(listener);\n    events.set(key, listeners);\n    const _off = () => off(listener);\n    (_a = scope == null ? void 0 : scope.cleanups) == null ? void 0 : _a.push(_off);\n    return _off;\n  }\n  function once(listener) {\n    function _listener(...args) {\n      off(_listener);\n      listener(...args);\n    }\n    return on(_listener);\n  }\n  function off(listener) {\n    const listeners = events.get(key);\n    if (!listeners)\n      return;\n    listeners.delete(listener);\n    if (!listeners.size)\n      reset();\n  }\n  function reset() {\n    events.delete(key);\n  }\n  function emit(event, payload) {\n    var _a;\n    (_a = events.get(key)) == null ? void 0 : _a.forEach((v) => v(event, payload));\n  }\n  return { on, once, off, emit, reset };\n}\n\nfunction resolveNestedOptions$1(options) {\n  if (options === true)\n    return {};\n  return options;\n}\nfunction useEventSource(url, events = [], options = {}) {\n  const event = shallowRef(null);\n  const data = shallowRef(null);\n  const status = shallowRef(\"CONNECTING\");\n  const eventSource = ref(null);\n  const error = shallowRef(null);\n  const urlRef = toRef(url);\n  const lastEventId = shallowRef(null);\n  let explicitlyClosed = false;\n  let retried = 0;\n  const {\n    withCredentials = false,\n    immediate = true,\n    autoConnect = true,\n    autoReconnect,\n    serializer = {\n      read: (v) => v\n    }\n  } = options;\n  const close = () => {\n    if (isClient && eventSource.value) {\n      eventSource.value.close();\n      eventSource.value = null;\n      status.value = \"CLOSED\";\n      explicitlyClosed = true;\n    }\n  };\n  const _init = () => {\n    if (explicitlyClosed || typeof urlRef.value === \"undefined\")\n      return;\n    const es = new EventSource(urlRef.value, { withCredentials });\n    status.value = \"CONNECTING\";\n    eventSource.value = es;\n    es.onopen = () => {\n      status.value = \"OPEN\";\n      error.value = null;\n    };\n    es.onerror = (e) => {\n      status.value = \"CLOSED\";\n      error.value = e;\n      if (es.readyState === 2 && !explicitlyClosed && autoReconnect) {\n        es.close();\n        const {\n          retries = -1,\n          delay = 1e3,\n          onFailed\n        } = resolveNestedOptions$1(autoReconnect);\n        retried += 1;\n        if (typeof retries === \"number\" && (retries < 0 || retried < retries))\n          setTimeout(_init, delay);\n        else if (typeof retries === \"function\" && retries())\n          setTimeout(_init, delay);\n        else\n          onFailed == null ? void 0 : onFailed();\n      }\n    };\n    es.onmessage = (e) => {\n      var _a;\n      event.value = null;\n      data.value = (_a = serializer.read(e.data)) != null ? _a : null;\n      lastEventId.value = e.lastEventId;\n    };\n    for (const event_name of events) {\n      useEventListener(es, event_name, (e) => {\n        var _a, _b;\n        event.value = event_name;\n        data.value = (_a = serializer.read(e.data)) != null ? _a : null;\n        lastEventId.value = (_b = e.lastEventId) != null ? _b : null;\n      }, { passive: true });\n    }\n  };\n  const open = () => {\n    if (!isClient)\n      return;\n    close();\n    explicitlyClosed = false;\n    retried = 0;\n    _init();\n  };\n  if (immediate)\n    open();\n  if (autoConnect)\n    watch(urlRef, open);\n  tryOnScopeDispose(close);\n  return {\n    eventSource,\n    event,\n    data,\n    status,\n    error,\n    open,\n    close,\n    lastEventId\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useEyeDropper(options = {}) {\n  const { initialValue = \"\" } = options;\n  const isSupported = useSupported(() => typeof window !== \"undefined\" && \"EyeDropper\" in window);\n  const sRGBHex = shallowRef(initialValue);\n  async function open(openOptions) {\n    if (!isSupported.value)\n      return;\n    const eyeDropper = new window.EyeDropper();\n    const result = await eyeDropper.open(openOptions);\n    sRGBHex.value = result.sRGBHex;\n    return result;\n  }\n  return { isSupported, sRGBHex, open };\n}\n\nfunction useFavicon(newIcon = null, options = {}) {\n  const {\n    baseUrl = \"\",\n    rel = \"icon\",\n    document = defaultDocument\n  } = options;\n  const favicon = toRef(newIcon);\n  const applyIcon = (icon) => {\n    const elements = document == null ? void 0 : document.head.querySelectorAll(`link[rel*=\"${rel}\"]`);\n    if (!elements || elements.length === 0) {\n      const link = document == null ? void 0 : document.createElement(\"link\");\n      if (link) {\n        link.rel = rel;\n        link.href = `${baseUrl}${icon}`;\n        link.type = `image/${icon.split(\".\").pop()}`;\n        document == null ? void 0 : document.head.append(link);\n      }\n      return;\n    }\n    elements == null ? void 0 : elements.forEach((el) => el.href = `${baseUrl}${icon}`);\n  };\n  watch(\n    favicon,\n    (i, o) => {\n      if (typeof i === \"string\" && i !== o)\n        applyIcon(i);\n    },\n    { immediate: true }\n  );\n  return favicon;\n}\n\nconst payloadMapping = {\n  json: \"application/json\",\n  text: \"text/plain\"\n};\nfunction isFetchOptions(obj) {\n  return obj && containsProp(obj, \"immediate\", \"refetch\", \"initialData\", \"timeout\", \"beforeFetch\", \"afterFetch\", \"onFetchError\", \"fetch\", \"updateDataOnError\");\n}\nconst reAbsolute = /^(?:[a-z][a-z\\d+\\-.]*:)?\\/\\//i;\nfunction isAbsoluteURL(url) {\n  return reAbsolute.test(url);\n}\nfunction headersToObject(headers) {\n  if (typeof Headers !== \"undefined\" && headers instanceof Headers)\n    return Object.fromEntries(headers.entries());\n  return headers;\n}\nfunction combineCallbacks(combination, ...callbacks) {\n  if (combination === \"overwrite\") {\n    return async (ctx) => {\n      let callback;\n      for (let i = callbacks.length - 1; i >= 0; i--) {\n        if (callbacks[i] != null) {\n          callback = callbacks[i];\n          break;\n        }\n      }\n      if (callback)\n        return { ...ctx, ...await callback(ctx) };\n      return ctx;\n    };\n  } else {\n    return async (ctx) => {\n      for (const callback of callbacks) {\n        if (callback)\n          ctx = { ...ctx, ...await callback(ctx) };\n      }\n      return ctx;\n    };\n  }\n}\nfunction createFetch(config = {}) {\n  const _combination = config.combination || \"chain\";\n  const _options = config.options || {};\n  const _fetchOptions = config.fetchOptions || {};\n  function useFactoryFetch(url, ...args) {\n    const computedUrl = computed(() => {\n      const baseUrl = toValue(config.baseUrl);\n      const targetUrl = toValue(url);\n      return baseUrl && !isAbsoluteURL(targetUrl) ? joinPaths(baseUrl, targetUrl) : targetUrl;\n    });\n    let options = _options;\n    let fetchOptions = _fetchOptions;\n    if (args.length > 0) {\n      if (isFetchOptions(args[0])) {\n        options = {\n          ...options,\n          ...args[0],\n          beforeFetch: combineCallbacks(_combination, _options.beforeFetch, args[0].beforeFetch),\n          afterFetch: combineCallbacks(_combination, _options.afterFetch, args[0].afterFetch),\n          onFetchError: combineCallbacks(_combination, _options.onFetchError, args[0].onFetchError)\n        };\n      } else {\n        fetchOptions = {\n          ...fetchOptions,\n          ...args[0],\n          headers: {\n            ...headersToObject(fetchOptions.headers) || {},\n            ...headersToObject(args[0].headers) || {}\n          }\n        };\n      }\n    }\n    if (args.length > 1 && isFetchOptions(args[1])) {\n      options = {\n        ...options,\n        ...args[1],\n        beforeFetch: combineCallbacks(_combination, _options.beforeFetch, args[1].beforeFetch),\n        afterFetch: combineCallbacks(_combination, _options.afterFetch, args[1].afterFetch),\n        onFetchError: combineCallbacks(_combination, _options.onFetchError, args[1].onFetchError)\n      };\n    }\n    return useFetch(computedUrl, fetchOptions, options);\n  }\n  return useFactoryFetch;\n}\nfunction useFetch(url, ...args) {\n  var _a, _b;\n  const supportsAbort = typeof AbortController === \"function\";\n  let fetchOptions = {};\n  let options = {\n    immediate: true,\n    refetch: false,\n    timeout: 0,\n    updateDataOnError: false\n  };\n  const config = {\n    method: \"GET\",\n    type: \"text\",\n    payload: void 0\n  };\n  if (args.length > 0) {\n    if (isFetchOptions(args[0]))\n      options = { ...options, ...args[0] };\n    else\n      fetchOptions = args[0];\n  }\n  if (args.length > 1) {\n    if (isFetchOptions(args[1]))\n      options = { ...options, ...args[1] };\n  }\n  const {\n    fetch = (_b = (_a = defaultWindow) == null ? void 0 : _a.fetch) != null ? _b : globalThis == null ? void 0 : globalThis.fetch,\n    initialData,\n    timeout\n  } = options;\n  const responseEvent = createEventHook();\n  const errorEvent = createEventHook();\n  const finallyEvent = createEventHook();\n  const isFinished = shallowRef(false);\n  const isFetching = shallowRef(false);\n  const aborted = shallowRef(false);\n  const statusCode = shallowRef(null);\n  const response = shallowRef(null);\n  const error = shallowRef(null);\n  const data = shallowRef(initialData || null);\n  const canAbort = computed(() => supportsAbort && isFetching.value);\n  let controller;\n  let timer;\n  const abort = (reason) => {\n    if (supportsAbort) {\n      controller == null ? void 0 : controller.abort(reason);\n      controller = new AbortController();\n      controller.signal.onabort = () => aborted.value = true;\n      fetchOptions = {\n        ...fetchOptions,\n        signal: controller.signal\n      };\n    }\n  };\n  const loading = (isLoading) => {\n    isFetching.value = isLoading;\n    isFinished.value = !isLoading;\n  };\n  if (timeout)\n    timer = useTimeoutFn(abort, timeout, { immediate: false });\n  let executeCounter = 0;\n  const execute = async (throwOnFailed = false) => {\n    var _a2, _b2;\n    abort();\n    loading(true);\n    error.value = null;\n    statusCode.value = null;\n    aborted.value = false;\n    executeCounter += 1;\n    const currentExecuteCounter = executeCounter;\n    const defaultFetchOptions = {\n      method: config.method,\n      headers: {}\n    };\n    const payload = toValue(config.payload);\n    if (payload) {\n      const headers = headersToObject(defaultFetchOptions.headers);\n      const proto = Object.getPrototypeOf(payload);\n      if (!config.payloadType && payload && (proto === Object.prototype || Array.isArray(proto)) && !(payload instanceof FormData))\n        config.payloadType = \"json\";\n      if (config.payloadType)\n        headers[\"Content-Type\"] = (_a2 = payloadMapping[config.payloadType]) != null ? _a2 : config.payloadType;\n      defaultFetchOptions.body = config.payloadType === \"json\" ? JSON.stringify(payload) : payload;\n    }\n    let isCanceled = false;\n    const context = {\n      url: toValue(url),\n      options: {\n        ...defaultFetchOptions,\n        ...fetchOptions\n      },\n      cancel: () => {\n        isCanceled = true;\n      }\n    };\n    if (options.beforeFetch)\n      Object.assign(context, await options.beforeFetch(context));\n    if (isCanceled || !fetch) {\n      loading(false);\n      return Promise.resolve(null);\n    }\n    let responseData = null;\n    if (timer)\n      timer.start();\n    return fetch(\n      context.url,\n      {\n        ...defaultFetchOptions,\n        ...context.options,\n        headers: {\n          ...headersToObject(defaultFetchOptions.headers),\n          ...headersToObject((_b2 = context.options) == null ? void 0 : _b2.headers)\n        }\n      }\n    ).then(async (fetchResponse) => {\n      response.value = fetchResponse;\n      statusCode.value = fetchResponse.status;\n      responseData = await fetchResponse.clone()[config.type]();\n      if (!fetchResponse.ok) {\n        data.value = initialData || null;\n        throw new Error(fetchResponse.statusText);\n      }\n      if (options.afterFetch) {\n        ({ data: responseData } = await options.afterFetch({\n          data: responseData,\n          response: fetchResponse,\n          context,\n          execute\n        }));\n      }\n      data.value = responseData;\n      responseEvent.trigger(fetchResponse);\n      return fetchResponse;\n    }).catch(async (fetchError) => {\n      let errorData = fetchError.message || fetchError.name;\n      if (options.onFetchError) {\n        ({ error: errorData, data: responseData } = await options.onFetchError({\n          data: responseData,\n          error: fetchError,\n          response: response.value,\n          context,\n          execute\n        }));\n      }\n      error.value = errorData;\n      if (options.updateDataOnError)\n        data.value = responseData;\n      errorEvent.trigger(fetchError);\n      if (throwOnFailed)\n        throw fetchError;\n      return null;\n    }).finally(() => {\n      if (currentExecuteCounter === executeCounter)\n        loading(false);\n      if (timer)\n        timer.stop();\n      finallyEvent.trigger(null);\n    });\n  };\n  const refetch = toRef(options.refetch);\n  watch(\n    [\n      refetch,\n      toRef(url)\n    ],\n    ([refetch2]) => refetch2 && execute(),\n    { deep: true }\n  );\n  const shell = {\n    isFinished: readonly(isFinished),\n    isFetching: readonly(isFetching),\n    statusCode,\n    response,\n    error,\n    data,\n    canAbort,\n    aborted,\n    abort,\n    execute,\n    onFetchResponse: responseEvent.on,\n    onFetchError: errorEvent.on,\n    onFetchFinally: finallyEvent.on,\n    // method\n    get: setMethod(\"GET\"),\n    put: setMethod(\"PUT\"),\n    post: setMethod(\"POST\"),\n    delete: setMethod(\"DELETE\"),\n    patch: setMethod(\"PATCH\"),\n    head: setMethod(\"HEAD\"),\n    options: setMethod(\"OPTIONS\"),\n    // type\n    json: setType(\"json\"),\n    text: setType(\"text\"),\n    blob: setType(\"blob\"),\n    arrayBuffer: setType(\"arrayBuffer\"),\n    formData: setType(\"formData\")\n  };\n  function setMethod(method) {\n    return (payload, payloadType) => {\n      if (!isFetching.value) {\n        config.method = method;\n        config.payload = payload;\n        config.payloadType = payloadType;\n        if (isRef(config.payload)) {\n          watch(\n            [\n              refetch,\n              toRef(config.payload)\n            ],\n            ([refetch2]) => refetch2 && execute(),\n            { deep: true }\n          );\n        }\n        return {\n          ...shell,\n          then(onFulfilled, onRejected) {\n            return waitUntilFinished().then(onFulfilled, onRejected);\n          }\n        };\n      }\n      return void 0;\n    };\n  }\n  function waitUntilFinished() {\n    return new Promise((resolve, reject) => {\n      until(isFinished).toBe(true).then(() => resolve(shell)).catch(reject);\n    });\n  }\n  function setType(type) {\n    return () => {\n      if (!isFetching.value) {\n        config.type = type;\n        return {\n          ...shell,\n          then(onFulfilled, onRejected) {\n            return waitUntilFinished().then(onFulfilled, onRejected);\n          }\n        };\n      }\n      return void 0;\n    };\n  }\n  if (options.immediate)\n    Promise.resolve().then(() => execute());\n  return {\n    ...shell,\n    then(onFulfilled, onRejected) {\n      return waitUntilFinished().then(onFulfilled, onRejected);\n    }\n  };\n}\nfunction joinPaths(start, end) {\n  if (!start.endsWith(\"/\") && !end.startsWith(\"/\")) {\n    return `${start}/${end}`;\n  }\n  if (start.endsWith(\"/\") && end.startsWith(\"/\")) {\n    return `${start.slice(0, -1)}${end}`;\n  }\n  return `${start}${end}`;\n}\n\nconst DEFAULT_OPTIONS = {\n  multiple: true,\n  accept: \"*\",\n  reset: false,\n  directory: false\n};\nfunction prepareInitialFiles(files) {\n  if (!files)\n    return null;\n  if (files instanceof FileList)\n    return files;\n  const dt = new DataTransfer();\n  for (const file of files) {\n    dt.items.add(file);\n  }\n  return dt.files;\n}\nfunction useFileDialog(options = {}) {\n  const {\n    document = defaultDocument\n  } = options;\n  const files = ref(prepareInitialFiles(options.initialFiles));\n  const { on: onChange, trigger: changeTrigger } = createEventHook();\n  const { on: onCancel, trigger: cancelTrigger } = createEventHook();\n  const inputRef = computed(() => {\n    var _a;\n    const input = (_a = unrefElement(options.input)) != null ? _a : document ? document.createElement(\"input\") : void 0;\n    if (input) {\n      input.type = \"file\";\n      input.onchange = (event) => {\n        const result = event.target;\n        files.value = result.files;\n        changeTrigger(files.value);\n      };\n      input.oncancel = () => {\n        cancelTrigger();\n      };\n    }\n    return input;\n  });\n  const reset = () => {\n    files.value = null;\n    if (inputRef.value && inputRef.value.value) {\n      inputRef.value.value = \"\";\n      changeTrigger(null);\n    }\n  };\n  const applyOptions = (options2) => {\n    const el = inputRef.value;\n    if (!el)\n      return;\n    el.multiple = toValue(options2.multiple);\n    el.accept = toValue(options2.accept);\n    el.webkitdirectory = toValue(options2.directory);\n    if (hasOwn(options2, \"capture\"))\n      el.capture = toValue(options2.capture);\n  };\n  const open = (localOptions) => {\n    const el = inputRef.value;\n    if (!el)\n      return;\n    const mergedOptions = {\n      ...DEFAULT_OPTIONS,\n      ...options,\n      ...localOptions\n    };\n    applyOptions(mergedOptions);\n    if (toValue(mergedOptions.reset))\n      reset();\n    el.click();\n  };\n  watchEffect(() => {\n    applyOptions(options);\n  });\n  return {\n    files: readonly(files),\n    open,\n    reset,\n    onCancel,\n    onChange\n  };\n}\n\nfunction useFileSystemAccess(options = {}) {\n  const {\n    window: _window = defaultWindow,\n    dataType = \"Text\"\n  } = options;\n  const window = _window;\n  const isSupported = useSupported(() => window && \"showSaveFilePicker\" in window && \"showOpenFilePicker\" in window);\n  const fileHandle = shallowRef();\n  const data = shallowRef();\n  const file = shallowRef();\n  const fileName = computed(() => {\n    var _a, _b;\n    return (_b = (_a = file.value) == null ? void 0 : _a.name) != null ? _b : \"\";\n  });\n  const fileMIME = computed(() => {\n    var _a, _b;\n    return (_b = (_a = file.value) == null ? void 0 : _a.type) != null ? _b : \"\";\n  });\n  const fileSize = computed(() => {\n    var _a, _b;\n    return (_b = (_a = file.value) == null ? void 0 : _a.size) != null ? _b : 0;\n  });\n  const fileLastModified = computed(() => {\n    var _a, _b;\n    return (_b = (_a = file.value) == null ? void 0 : _a.lastModified) != null ? _b : 0;\n  });\n  async function open(_options = {}) {\n    if (!isSupported.value)\n      return;\n    const [handle] = await window.showOpenFilePicker({ ...toValue(options), ..._options });\n    fileHandle.value = handle;\n    await updateData();\n  }\n  async function create(_options = {}) {\n    if (!isSupported.value)\n      return;\n    fileHandle.value = await window.showSaveFilePicker({ ...options, ..._options });\n    data.value = void 0;\n    await updateData();\n  }\n  async function save(_options = {}) {\n    if (!isSupported.value)\n      return;\n    if (!fileHandle.value)\n      return saveAs(_options);\n    if (data.value) {\n      const writableStream = await fileHandle.value.createWritable();\n      await writableStream.write(data.value);\n      await writableStream.close();\n    }\n    await updateFile();\n  }\n  async function saveAs(_options = {}) {\n    if (!isSupported.value)\n      return;\n    fileHandle.value = await window.showSaveFilePicker({ ...options, ..._options });\n    if (data.value) {\n      const writableStream = await fileHandle.value.createWritable();\n      await writableStream.write(data.value);\n      await writableStream.close();\n    }\n    await updateFile();\n  }\n  async function updateFile() {\n    var _a;\n    file.value = await ((_a = fileHandle.value) == null ? void 0 : _a.getFile());\n  }\n  async function updateData() {\n    var _a, _b;\n    await updateFile();\n    const type = toValue(dataType);\n    if (type === \"Text\")\n      data.value = await ((_a = file.value) == null ? void 0 : _a.text());\n    else if (type === \"ArrayBuffer\")\n      data.value = await ((_b = file.value) == null ? void 0 : _b.arrayBuffer());\n    else if (type === \"Blob\")\n      data.value = file.value;\n  }\n  watch(() => toValue(dataType), updateData);\n  return {\n    isSupported,\n    data,\n    file,\n    fileName,\n    fileMIME,\n    fileSize,\n    fileLastModified,\n    open,\n    create,\n    save,\n    saveAs,\n    updateData\n  };\n}\n\nfunction useFocus(target, options = {}) {\n  const { initialValue = false, focusVisible = false, preventScroll = false } = options;\n  const innerFocused = shallowRef(false);\n  const targetElement = computed(() => unrefElement(target));\n  const listenerOptions = { passive: true };\n  useEventListener(targetElement, \"focus\", (event) => {\n    var _a, _b;\n    if (!focusVisible || ((_b = (_a = event.target).matches) == null ? void 0 : _b.call(_a, \":focus-visible\")))\n      innerFocused.value = true;\n  }, listenerOptions);\n  useEventListener(targetElement, \"blur\", () => innerFocused.value = false, listenerOptions);\n  const focused = computed({\n    get: () => innerFocused.value,\n    set(value) {\n      var _a, _b;\n      if (!value && innerFocused.value)\n        (_a = targetElement.value) == null ? void 0 : _a.blur();\n      else if (value && !innerFocused.value)\n        (_b = targetElement.value) == null ? void 0 : _b.focus({ preventScroll });\n    }\n  });\n  watch(\n    targetElement,\n    () => {\n      focused.value = initialValue;\n    },\n    { immediate: true, flush: \"post\" }\n  );\n  return { focused };\n}\n\nconst EVENT_FOCUS_IN = \"focusin\";\nconst EVENT_FOCUS_OUT = \"focusout\";\nconst PSEUDO_CLASS_FOCUS_WITHIN = \":focus-within\";\nfunction useFocusWithin(target, options = {}) {\n  const { window = defaultWindow } = options;\n  const targetElement = computed(() => unrefElement(target));\n  const _focused = shallowRef(false);\n  const focused = computed(() => _focused.value);\n  const activeElement = useActiveElement(options);\n  if (!window || !activeElement.value) {\n    return { focused };\n  }\n  const listenerOptions = { passive: true };\n  useEventListener(targetElement, EVENT_FOCUS_IN, () => _focused.value = true, listenerOptions);\n  useEventListener(targetElement, EVENT_FOCUS_OUT, () => {\n    var _a, _b, _c;\n    return _focused.value = (_c = (_b = (_a = targetElement.value) == null ? void 0 : _a.matches) == null ? void 0 : _b.call(_a, PSEUDO_CLASS_FOCUS_WITHIN)) != null ? _c : false;\n  }, listenerOptions);\n  return { focused };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useFps(options) {\n  var _a;\n  const fps = shallowRef(0);\n  if (typeof performance === \"undefined\")\n    return fps;\n  const every = (_a = options == null ? void 0 : options.every) != null ? _a : 10;\n  let last = performance.now();\n  let ticks = 0;\n  useRafFn(() => {\n    ticks += 1;\n    if (ticks >= every) {\n      const now = performance.now();\n      const diff = now - last;\n      fps.value = Math.round(1e3 / (diff / ticks));\n      last = now;\n      ticks = 0;\n    }\n  });\n  return fps;\n}\n\nconst eventHandlers = [\n  \"fullscreenchange\",\n  \"webkitfullscreenchange\",\n  \"webkitendfullscreen\",\n  \"mozfullscreenchange\",\n  \"MSFullscreenChange\"\n];\nfunction useFullscreen(target, options = {}) {\n  const {\n    document = defaultDocument,\n    autoExit = false\n  } = options;\n  const targetRef = computed(() => {\n    var _a;\n    return (_a = unrefElement(target)) != null ? _a : document == null ? void 0 : document.documentElement;\n  });\n  const isFullscreen = shallowRef(false);\n  const requestMethod = computed(() => {\n    return [\n      \"requestFullscreen\",\n      \"webkitRequestFullscreen\",\n      \"webkitEnterFullscreen\",\n      \"webkitEnterFullScreen\",\n      \"webkitRequestFullScreen\",\n      \"mozRequestFullScreen\",\n      \"msRequestFullscreen\"\n    ].find((m) => document && m in document || targetRef.value && m in targetRef.value);\n  });\n  const exitMethod = computed(() => {\n    return [\n      \"exitFullscreen\",\n      \"webkitExitFullscreen\",\n      \"webkitExitFullScreen\",\n      \"webkitCancelFullScreen\",\n      \"mozCancelFullScreen\",\n      \"msExitFullscreen\"\n    ].find((m) => document && m in document || targetRef.value && m in targetRef.value);\n  });\n  const fullscreenEnabled = computed(() => {\n    return [\n      \"fullScreen\",\n      \"webkitIsFullScreen\",\n      \"webkitDisplayingFullscreen\",\n      \"mozFullScreen\",\n      \"msFullscreenElement\"\n    ].find((m) => document && m in document || targetRef.value && m in targetRef.value);\n  });\n  const fullscreenElementMethod = [\n    \"fullscreenElement\",\n    \"webkitFullscreenElement\",\n    \"mozFullScreenElement\",\n    \"msFullscreenElement\"\n  ].find((m) => document && m in document);\n  const isSupported = useSupported(() => targetRef.value && document && requestMethod.value !== void 0 && exitMethod.value !== void 0 && fullscreenEnabled.value !== void 0);\n  const isCurrentElementFullScreen = () => {\n    if (fullscreenElementMethod)\n      return (document == null ? void 0 : document[fullscreenElementMethod]) === targetRef.value;\n    return false;\n  };\n  const isElementFullScreen = () => {\n    if (fullscreenEnabled.value) {\n      if (document && document[fullscreenEnabled.value] != null) {\n        return document[fullscreenEnabled.value];\n      } else {\n        const target2 = targetRef.value;\n        if ((target2 == null ? void 0 : target2[fullscreenEnabled.value]) != null) {\n          return Boolean(target2[fullscreenEnabled.value]);\n        }\n      }\n    }\n    return false;\n  };\n  async function exit() {\n    if (!isSupported.value || !isFullscreen.value)\n      return;\n    if (exitMethod.value) {\n      if ((document == null ? void 0 : document[exitMethod.value]) != null) {\n        await document[exitMethod.value]();\n      } else {\n        const target2 = targetRef.value;\n        if ((target2 == null ? void 0 : target2[exitMethod.value]) != null)\n          await target2[exitMethod.value]();\n      }\n    }\n    isFullscreen.value = false;\n  }\n  async function enter() {\n    if (!isSupported.value || isFullscreen.value)\n      return;\n    if (isElementFullScreen())\n      await exit();\n    const target2 = targetRef.value;\n    if (requestMethod.value && (target2 == null ? void 0 : target2[requestMethod.value]) != null) {\n      await target2[requestMethod.value]();\n      isFullscreen.value = true;\n    }\n  }\n  async function toggle() {\n    await (isFullscreen.value ? exit() : enter());\n  }\n  const handlerCallback = () => {\n    const isElementFullScreenValue = isElementFullScreen();\n    if (!isElementFullScreenValue || isElementFullScreenValue && isCurrentElementFullScreen())\n      isFullscreen.value = isElementFullScreenValue;\n  };\n  const listenerOptions = { capture: false, passive: true };\n  useEventListener(document, eventHandlers, handlerCallback, listenerOptions);\n  useEventListener(() => unrefElement(targetRef), eventHandlers, handlerCallback, listenerOptions);\n  tryOnMounted(handlerCallback, false);\n  if (autoExit)\n    tryOnScopeDispose(exit);\n  return {\n    isSupported,\n    isFullscreen,\n    enter,\n    exit,\n    toggle\n  };\n}\n\nfunction mapGamepadToXbox360Controller(gamepad) {\n  return computed(() => {\n    if (gamepad.value) {\n      return {\n        buttons: {\n          a: gamepad.value.buttons[0],\n          b: gamepad.value.buttons[1],\n          x: gamepad.value.buttons[2],\n          y: gamepad.value.buttons[3]\n        },\n        bumper: {\n          left: gamepad.value.buttons[4],\n          right: gamepad.value.buttons[5]\n        },\n        triggers: {\n          left: gamepad.value.buttons[6],\n          right: gamepad.value.buttons[7]\n        },\n        stick: {\n          left: {\n            horizontal: gamepad.value.axes[0],\n            vertical: gamepad.value.axes[1],\n            button: gamepad.value.buttons[10]\n          },\n          right: {\n            horizontal: gamepad.value.axes[2],\n            vertical: gamepad.value.axes[3],\n            button: gamepad.value.buttons[11]\n          }\n        },\n        dpad: {\n          up: gamepad.value.buttons[12],\n          down: gamepad.value.buttons[13],\n          left: gamepad.value.buttons[14],\n          right: gamepad.value.buttons[15]\n        },\n        back: gamepad.value.buttons[8],\n        start: gamepad.value.buttons[9]\n      };\n    }\n    return null;\n  });\n}\n// @__NO_SIDE_EFFECTS__\nfunction useGamepad(options = {}) {\n  const {\n    navigator = defaultNavigator\n  } = options;\n  const isSupported = useSupported(() => navigator && \"getGamepads\" in navigator);\n  const gamepads = ref([]);\n  const onConnectedHook = createEventHook();\n  const onDisconnectedHook = createEventHook();\n  const stateFromGamepad = (gamepad) => {\n    const hapticActuators = [];\n    const vibrationActuator = \"vibrationActuator\" in gamepad ? gamepad.vibrationActuator : null;\n    if (vibrationActuator)\n      hapticActuators.push(vibrationActuator);\n    if (gamepad.hapticActuators)\n      hapticActuators.push(...gamepad.hapticActuators);\n    return {\n      id: gamepad.id,\n      index: gamepad.index,\n      connected: gamepad.connected,\n      mapping: gamepad.mapping,\n      timestamp: gamepad.timestamp,\n      vibrationActuator: gamepad.vibrationActuator,\n      hapticActuators,\n      axes: gamepad.axes.map((axes) => axes),\n      buttons: gamepad.buttons.map((button) => ({ pressed: button.pressed, touched: button.touched, value: button.value }))\n    };\n  };\n  const updateGamepadState = () => {\n    const _gamepads = (navigator == null ? void 0 : navigator.getGamepads()) || [];\n    for (const gamepad of _gamepads) {\n      if (gamepad && gamepads.value[gamepad.index])\n        gamepads.value[gamepad.index] = stateFromGamepad(gamepad);\n    }\n  };\n  const { isActive, pause, resume } = useRafFn(updateGamepadState);\n  const onGamepadConnected = (gamepad) => {\n    if (!gamepads.value.some(({ index }) => index === gamepad.index)) {\n      gamepads.value.push(stateFromGamepad(gamepad));\n      onConnectedHook.trigger(gamepad.index);\n    }\n    resume();\n  };\n  const onGamepadDisconnected = (gamepad) => {\n    gamepads.value = gamepads.value.filter((x) => x.index !== gamepad.index);\n    onDisconnectedHook.trigger(gamepad.index);\n  };\n  const listenerOptions = { passive: true };\n  useEventListener(\"gamepadconnected\", (e) => onGamepadConnected(e.gamepad), listenerOptions);\n  useEventListener(\"gamepaddisconnected\", (e) => onGamepadDisconnected(e.gamepad), listenerOptions);\n  tryOnMounted(() => {\n    const _gamepads = (navigator == null ? void 0 : navigator.getGamepads()) || [];\n    for (const gamepad of _gamepads) {\n      if (gamepad && gamepads.value[gamepad.index])\n        onGamepadConnected(gamepad);\n    }\n  });\n  pause();\n  return {\n    isSupported,\n    onConnected: onConnectedHook.on,\n    onDisconnected: onDisconnectedHook.on,\n    gamepads,\n    pause,\n    resume,\n    isActive\n  };\n}\n\nfunction useGeolocation(options = {}) {\n  const {\n    enableHighAccuracy = true,\n    maximumAge = 3e4,\n    timeout = 27e3,\n    navigator = defaultNavigator,\n    immediate = true\n  } = options;\n  const isSupported = useSupported(() => navigator && \"geolocation\" in navigator);\n  const locatedAt = shallowRef(null);\n  const error = shallowRef(null);\n  const coords = ref({\n    accuracy: 0,\n    latitude: Number.POSITIVE_INFINITY,\n    longitude: Number.POSITIVE_INFINITY,\n    altitude: null,\n    altitudeAccuracy: null,\n    heading: null,\n    speed: null\n  });\n  function updatePosition(position) {\n    locatedAt.value = position.timestamp;\n    coords.value = position.coords;\n    error.value = null;\n  }\n  let watcher;\n  function resume() {\n    if (isSupported.value) {\n      watcher = navigator.geolocation.watchPosition(\n        updatePosition,\n        (err) => error.value = err,\n        {\n          enableHighAccuracy,\n          maximumAge,\n          timeout\n        }\n      );\n    }\n  }\n  if (immediate)\n    resume();\n  function pause() {\n    if (watcher && navigator)\n      navigator.geolocation.clearWatch(watcher);\n  }\n  tryOnScopeDispose(() => {\n    pause();\n  });\n  return {\n    isSupported,\n    coords,\n    locatedAt,\n    error,\n    resume,\n    pause\n  };\n}\n\nconst defaultEvents$1 = [\"mousemove\", \"mousedown\", \"resize\", \"keydown\", \"touchstart\", \"wheel\"];\nconst oneMinute = 6e4;\nfunction useIdle(timeout = oneMinute, options = {}) {\n  const {\n    initialState = false,\n    listenForVisibilityChange = true,\n    events = defaultEvents$1,\n    window = defaultWindow,\n    eventFilter = throttleFilter(50)\n  } = options;\n  const idle = shallowRef(initialState);\n  const lastActive = shallowRef(timestamp());\n  let timer;\n  const reset = () => {\n    idle.value = false;\n    clearTimeout(timer);\n    timer = setTimeout(() => idle.value = true, timeout);\n  };\n  const onEvent = createFilterWrapper(\n    eventFilter,\n    () => {\n      lastActive.value = timestamp();\n      reset();\n    }\n  );\n  if (window) {\n    const document = window.document;\n    const listenerOptions = { passive: true };\n    for (const event of events)\n      useEventListener(window, event, onEvent, listenerOptions);\n    if (listenForVisibilityChange) {\n      useEventListener(document, \"visibilitychange\", () => {\n        if (!document.hidden)\n          onEvent();\n      }, listenerOptions);\n    }\n    if (!initialState)\n      reset();\n  }\n  return {\n    idle,\n    lastActive,\n    reset\n  };\n}\n\nasync function loadImage(options) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    const { src, srcset, sizes, class: clazz, loading, crossorigin, referrerPolicy, width, height, decoding, fetchPriority, ismap, usemap } = options;\n    img.src = src;\n    if (srcset != null)\n      img.srcset = srcset;\n    if (sizes != null)\n      img.sizes = sizes;\n    if (clazz != null)\n      img.className = clazz;\n    if (loading != null)\n      img.loading = loading;\n    if (crossorigin != null)\n      img.crossOrigin = crossorigin;\n    if (referrerPolicy != null)\n      img.referrerPolicy = referrerPolicy;\n    if (width != null)\n      img.width = width;\n    if (height != null)\n      img.height = height;\n    if (decoding != null)\n      img.decoding = decoding;\n    if (fetchPriority != null)\n      img.fetchPriority = fetchPriority;\n    if (ismap != null)\n      img.isMap = ismap;\n    if (usemap != null)\n      img.useMap = usemap;\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n  });\n}\nfunction useImage(options, asyncStateOptions = {}) {\n  const state = useAsyncState(\n    () => loadImage(toValue(options)),\n    void 0,\n    {\n      resetOnExecute: true,\n      ...asyncStateOptions\n    }\n  );\n  watch(\n    () => toValue(options),\n    () => state.execute(asyncStateOptions.delay),\n    { deep: true }\n  );\n  return state;\n}\n\nfunction resolveElement(el) {\n  if (typeof Window !== \"undefined\" && el instanceof Window)\n    return el.document.documentElement;\n  if (typeof Document !== \"undefined\" && el instanceof Document)\n    return el.documentElement;\n  return el;\n}\n\nconst ARRIVED_STATE_THRESHOLD_PIXELS = 1;\nfunction useScroll(element, options = {}) {\n  const {\n    throttle = 0,\n    idle = 200,\n    onStop = noop,\n    onScroll = noop,\n    offset = {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    },\n    observe: _observe = {\n      mutation: false\n    },\n    eventListenerOptions = {\n      capture: false,\n      passive: true\n    },\n    behavior = \"auto\",\n    window = defaultWindow,\n    onError = (e) => {\n      console.error(e);\n    }\n  } = options;\n  const observe = typeof _observe === \"boolean\" ? {\n    mutation: _observe\n  } : _observe;\n  const internalX = shallowRef(0);\n  const internalY = shallowRef(0);\n  const x = computed({\n    get() {\n      return internalX.value;\n    },\n    set(x2) {\n      scrollTo(x2, void 0);\n    }\n  });\n  const y = computed({\n    get() {\n      return internalY.value;\n    },\n    set(y2) {\n      scrollTo(void 0, y2);\n    }\n  });\n  function scrollTo(_x, _y) {\n    var _a, _b, _c, _d;\n    if (!window)\n      return;\n    const _element = toValue(element);\n    if (!_element)\n      return;\n    (_c = _element instanceof Document ? window.document.body : _element) == null ? void 0 : _c.scrollTo({\n      top: (_a = toValue(_y)) != null ? _a : y.value,\n      left: (_b = toValue(_x)) != null ? _b : x.value,\n      behavior: toValue(behavior)\n    });\n    const scrollContainer = ((_d = _element == null ? void 0 : _element.document) == null ? void 0 : _d.documentElement) || (_element == null ? void 0 : _element.documentElement) || _element;\n    if (x != null)\n      internalX.value = scrollContainer.scrollLeft;\n    if (y != null)\n      internalY.value = scrollContainer.scrollTop;\n  }\n  const isScrolling = shallowRef(false);\n  const arrivedState = reactive({\n    left: true,\n    right: false,\n    top: true,\n    bottom: false\n  });\n  const directions = reactive({\n    left: false,\n    right: false,\n    top: false,\n    bottom: false\n  });\n  const onScrollEnd = (e) => {\n    if (!isScrolling.value)\n      return;\n    isScrolling.value = false;\n    directions.left = false;\n    directions.right = false;\n    directions.top = false;\n    directions.bottom = false;\n    onStop(e);\n  };\n  const onScrollEndDebounced = useDebounceFn(onScrollEnd, throttle + idle);\n  const setArrivedState = (target) => {\n    var _a;\n    if (!window)\n      return;\n    const el = ((_a = target == null ? void 0 : target.document) == null ? void 0 : _a.documentElement) || (target == null ? void 0 : target.documentElement) || unrefElement(target);\n    const { display, flexDirection, direction } = getComputedStyle(el);\n    const directionMultipler = direction === \"rtl\" ? -1 : 1;\n    const scrollLeft = el.scrollLeft;\n    directions.left = scrollLeft < internalX.value;\n    directions.right = scrollLeft > internalX.value;\n    const left = Math.abs(scrollLeft * directionMultipler) <= (offset.left || 0);\n    const right = Math.abs(scrollLeft * directionMultipler) + el.clientWidth >= el.scrollWidth - (offset.right || 0) - ARRIVED_STATE_THRESHOLD_PIXELS;\n    if (display === \"flex\" && flexDirection === \"row-reverse\") {\n      arrivedState.left = right;\n      arrivedState.right = left;\n    } else {\n      arrivedState.left = left;\n      arrivedState.right = right;\n    }\n    internalX.value = scrollLeft;\n    let scrollTop = el.scrollTop;\n    if (target === window.document && !scrollTop)\n      scrollTop = window.document.body.scrollTop;\n    directions.top = scrollTop < internalY.value;\n    directions.bottom = scrollTop > internalY.value;\n    const top = Math.abs(scrollTop) <= (offset.top || 0);\n    const bottom = Math.abs(scrollTop) + el.clientHeight >= el.scrollHeight - (offset.bottom || 0) - ARRIVED_STATE_THRESHOLD_PIXELS;\n    if (display === \"flex\" && flexDirection === \"column-reverse\") {\n      arrivedState.top = bottom;\n      arrivedState.bottom = top;\n    } else {\n      arrivedState.top = top;\n      arrivedState.bottom = bottom;\n    }\n    internalY.value = scrollTop;\n  };\n  const onScrollHandler = (e) => {\n    var _a;\n    if (!window)\n      return;\n    const eventTarget = (_a = e.target.documentElement) != null ? _a : e.target;\n    setArrivedState(eventTarget);\n    isScrolling.value = true;\n    onScrollEndDebounced(e);\n    onScroll(e);\n  };\n  useEventListener(\n    element,\n    \"scroll\",\n    throttle ? useThrottleFn(onScrollHandler, throttle, true, false) : onScrollHandler,\n    eventListenerOptions\n  );\n  tryOnMounted(() => {\n    try {\n      const _element = toValue(element);\n      if (!_element)\n        return;\n      setArrivedState(_element);\n    } catch (e) {\n      onError(e);\n    }\n  });\n  if ((observe == null ? void 0 : observe.mutation) && element != null && element !== window && element !== document) {\n    useMutationObserver(\n      element,\n      () => {\n        const _element = toValue(element);\n        if (!_element)\n          return;\n        setArrivedState(_element);\n      },\n      {\n        attributes: true,\n        childList: true,\n        subtree: true\n      }\n    );\n  }\n  useEventListener(\n    element,\n    \"scrollend\",\n    onScrollEnd,\n    eventListenerOptions\n  );\n  return {\n    x,\n    y,\n    isScrolling,\n    arrivedState,\n    directions,\n    measure() {\n      const _element = toValue(element);\n      if (window && _element)\n        setArrivedState(_element);\n    }\n  };\n}\n\nfunction useInfiniteScroll(element, onLoadMore, options = {}) {\n  var _a;\n  const {\n    direction = \"bottom\",\n    interval = 100,\n    canLoadMore = () => true\n  } = options;\n  const state = reactive(useScroll(\n    element,\n    {\n      ...options,\n      offset: {\n        [direction]: (_a = options.distance) != null ? _a : 0,\n        ...options.offset\n      }\n    }\n  ));\n  const promise = ref();\n  const isLoading = computed(() => !!promise.value);\n  const observedElement = computed(() => {\n    return resolveElement(toValue(element));\n  });\n  const isElementVisible = useElementVisibility(observedElement);\n  function checkAndLoad() {\n    state.measure();\n    if (!observedElement.value || !isElementVisible.value || !canLoadMore(observedElement.value))\n      return;\n    const { scrollHeight, clientHeight, scrollWidth, clientWidth } = observedElement.value;\n    const isNarrower = direction === \"bottom\" || direction === \"top\" ? scrollHeight <= clientHeight : scrollWidth <= clientWidth;\n    if (state.arrivedState[direction] || isNarrower) {\n      if (!promise.value) {\n        promise.value = Promise.all([\n          onLoadMore(state),\n          new Promise((resolve) => setTimeout(resolve, interval))\n        ]).finally(() => {\n          promise.value = null;\n          nextTick(() => checkAndLoad());\n        });\n      }\n    }\n  }\n  const stop = watch(\n    () => [state.arrivedState[direction], isElementVisible.value],\n    checkAndLoad,\n    { immediate: true }\n  );\n  tryOnUnmounted(stop);\n  return {\n    isLoading,\n    reset() {\n      nextTick(() => checkAndLoad());\n    }\n  };\n}\n\nconst defaultEvents = [\"mousedown\", \"mouseup\", \"keydown\", \"keyup\"];\n// @__NO_SIDE_EFFECTS__\nfunction useKeyModifier(modifier, options = {}) {\n  const {\n    events = defaultEvents,\n    document = defaultDocument,\n    initial = null\n  } = options;\n  const state = shallowRef(initial);\n  if (document) {\n    events.forEach((listenerEvent) => {\n      useEventListener(document, listenerEvent, (evt) => {\n        if (typeof evt.getModifierState === \"function\")\n          state.value = evt.getModifierState(modifier);\n      }, { passive: true });\n    });\n  }\n  return state;\n}\n\nfunction useLocalStorage(key, initialValue, options = {}) {\n  const { window = defaultWindow } = options;\n  return useStorage(key, initialValue, window == null ? void 0 : window.localStorage, options);\n}\n\nconst DefaultMagicKeysAliasMap = {\n  ctrl: \"control\",\n  command: \"meta\",\n  cmd: \"meta\",\n  option: \"alt\",\n  up: \"arrowup\",\n  down: \"arrowdown\",\n  left: \"arrowleft\",\n  right: \"arrowright\"\n};\n\nfunction useMagicKeys(options = {}) {\n  const {\n    reactive: useReactive = false,\n    target = defaultWindow,\n    aliasMap = DefaultMagicKeysAliasMap,\n    passive = true,\n    onEventFired = noop\n  } = options;\n  const current = reactive(/* @__PURE__ */ new Set());\n  const obj = {\n    toJSON() {\n      return {};\n    },\n    current\n  };\n  const refs = useReactive ? reactive(obj) : obj;\n  const metaDeps = /* @__PURE__ */ new Set();\n  const shiftDeps = /* @__PURE__ */ new Set();\n  const usedKeys = /* @__PURE__ */ new Set();\n  function setRefs(key, value) {\n    if (key in refs) {\n      if (useReactive)\n        refs[key] = value;\n      else\n        refs[key].value = value;\n    }\n  }\n  function reset() {\n    current.clear();\n    for (const key of usedKeys)\n      setRefs(key, false);\n  }\n  function updateRefs(e, value) {\n    var _a, _b;\n    const key = (_a = e.key) == null ? void 0 : _a.toLowerCase();\n    const code = (_b = e.code) == null ? void 0 : _b.toLowerCase();\n    const values = [code, key].filter(Boolean);\n    if (key) {\n      if (value)\n        current.add(key);\n      else\n        current.delete(key);\n    }\n    for (const key2 of values) {\n      usedKeys.add(key2);\n      setRefs(key2, value);\n    }\n    if (key === \"shift\" && !value) {\n      const shiftDepsArray = Array.from(shiftDeps);\n      const shiftIndex = shiftDepsArray.indexOf(\"shift\");\n      shiftDepsArray.forEach((key2, index) => {\n        if (index >= shiftIndex) {\n          current.delete(key2);\n          setRefs(key2, false);\n        }\n      });\n      shiftDeps.clear();\n    } else if (typeof e.getModifierState === \"function\" && e.getModifierState(\"Shift\") && value) {\n      [...current, ...values].forEach((key2) => shiftDeps.add(key2));\n    }\n    if (key === \"meta\" && !value) {\n      metaDeps.forEach((key2) => {\n        current.delete(key2);\n        setRefs(key2, false);\n      });\n      metaDeps.clear();\n    } else if (typeof e.getModifierState === \"function\" && e.getModifierState(\"Meta\") && value) {\n      [...current, ...values].forEach((key2) => metaDeps.add(key2));\n    }\n  }\n  useEventListener(target, \"keydown\", (e) => {\n    updateRefs(e, true);\n    return onEventFired(e);\n  }, { passive });\n  useEventListener(target, \"keyup\", (e) => {\n    updateRefs(e, false);\n    return onEventFired(e);\n  }, { passive });\n  useEventListener(\"blur\", reset, { passive });\n  useEventListener(\"focus\", reset, { passive });\n  const proxy = new Proxy(\n    refs,\n    {\n      get(target2, prop, rec) {\n        if (typeof prop !== \"string\")\n          return Reflect.get(target2, prop, rec);\n        prop = prop.toLowerCase();\n        if (prop in aliasMap)\n          prop = aliasMap[prop];\n        if (!(prop in refs)) {\n          if (/[+_-]/.test(prop)) {\n            const keys = prop.split(/[+_-]/g).map((i) => i.trim());\n            refs[prop] = computed(() => keys.map((key) => toValue(proxy[key])).every(Boolean));\n          } else {\n            refs[prop] = shallowRef(false);\n          }\n        }\n        const r = Reflect.get(target2, prop, rec);\n        return useReactive ? toValue(r) : r;\n      }\n    }\n  );\n  return proxy;\n}\n\nfunction usingElRef(source, cb) {\n  if (toValue(source))\n    cb(toValue(source));\n}\nfunction timeRangeToArray(timeRanges) {\n  let ranges = [];\n  for (let i = 0; i < timeRanges.length; ++i)\n    ranges = [...ranges, [timeRanges.start(i), timeRanges.end(i)]];\n  return ranges;\n}\nfunction tracksToArray(tracks) {\n  return Array.from(tracks).map(({ label, kind, language, mode, activeCues, cues, inBandMetadataTrackDispatchType }, id) => ({ id, label, kind, language, mode, activeCues, cues, inBandMetadataTrackDispatchType }));\n}\nconst defaultOptions = {\n  src: \"\",\n  tracks: []\n};\nfunction useMediaControls(target, options = {}) {\n  target = toRef(target);\n  options = {\n    ...defaultOptions,\n    ...options\n  };\n  const {\n    document = defaultDocument\n  } = options;\n  const listenerOptions = { passive: true };\n  const currentTime = shallowRef(0);\n  const duration = shallowRef(0);\n  const seeking = shallowRef(false);\n  const volume = shallowRef(1);\n  const waiting = shallowRef(false);\n  const ended = shallowRef(false);\n  const playing = shallowRef(false);\n  const rate = shallowRef(1);\n  const stalled = shallowRef(false);\n  const buffered = ref([]);\n  const tracks = ref([]);\n  const selectedTrack = shallowRef(-1);\n  const isPictureInPicture = shallowRef(false);\n  const muted = shallowRef(false);\n  const supportsPictureInPicture = document && \"pictureInPictureEnabled\" in document;\n  const sourceErrorEvent = createEventHook();\n  const playbackErrorEvent = createEventHook();\n  const disableTrack = (track) => {\n    usingElRef(target, (el) => {\n      if (track) {\n        const id = typeof track === \"number\" ? track : track.id;\n        el.textTracks[id].mode = \"disabled\";\n      } else {\n        for (let i = 0; i < el.textTracks.length; ++i)\n          el.textTracks[i].mode = \"disabled\";\n      }\n      selectedTrack.value = -1;\n    });\n  };\n  const enableTrack = (track, disableTracks = true) => {\n    usingElRef(target, (el) => {\n      const id = typeof track === \"number\" ? track : track.id;\n      if (disableTracks)\n        disableTrack();\n      el.textTracks[id].mode = \"showing\";\n      selectedTrack.value = id;\n    });\n  };\n  const togglePictureInPicture = () => {\n    return new Promise((resolve, reject) => {\n      usingElRef(target, async (el) => {\n        if (supportsPictureInPicture) {\n          if (!isPictureInPicture.value) {\n            el.requestPictureInPicture().then(resolve).catch(reject);\n          } else {\n            document.exitPictureInPicture().then(resolve).catch(reject);\n          }\n        }\n      });\n    });\n  };\n  watchEffect(() => {\n    if (!document)\n      return;\n    const el = toValue(target);\n    if (!el)\n      return;\n    const src = toValue(options.src);\n    let sources = [];\n    if (!src)\n      return;\n    if (typeof src === \"string\")\n      sources = [{ src }];\n    else if (Array.isArray(src))\n      sources = src;\n    else if (isObject(src))\n      sources = [src];\n    el.querySelectorAll(\"source\").forEach((e) => {\n      e.remove();\n    });\n    sources.forEach(({ src: src2, type, media }) => {\n      const source = document.createElement(\"source\");\n      source.setAttribute(\"src\", src2);\n      source.setAttribute(\"type\", type || \"\");\n      source.setAttribute(\"media\", media || \"\");\n      useEventListener(source, \"error\", sourceErrorEvent.trigger, listenerOptions);\n      el.appendChild(source);\n    });\n    el.load();\n  });\n  watch([target, volume], () => {\n    const el = toValue(target);\n    if (!el)\n      return;\n    el.volume = volume.value;\n  });\n  watch([target, muted], () => {\n    const el = toValue(target);\n    if (!el)\n      return;\n    el.muted = muted.value;\n  });\n  watch([target, rate], () => {\n    const el = toValue(target);\n    if (!el)\n      return;\n    el.playbackRate = rate.value;\n  });\n  watchEffect(() => {\n    if (!document)\n      return;\n    const textTracks = toValue(options.tracks);\n    const el = toValue(target);\n    if (!textTracks || !textTracks.length || !el)\n      return;\n    el.querySelectorAll(\"track\").forEach((e) => e.remove());\n    textTracks.forEach(({ default: isDefault, kind, label, src, srcLang }, i) => {\n      const track = document.createElement(\"track\");\n      track.default = isDefault || false;\n      track.kind = kind;\n      track.label = label;\n      track.src = src;\n      track.srclang = srcLang;\n      if (track.default)\n        selectedTrack.value = i;\n      el.appendChild(track);\n    });\n  });\n  const { ignoreUpdates: ignoreCurrentTimeUpdates } = watchIgnorable(currentTime, (time) => {\n    const el = toValue(target);\n    if (!el)\n      return;\n    el.currentTime = time;\n  });\n  const { ignoreUpdates: ignorePlayingUpdates } = watchIgnorable(playing, (isPlaying) => {\n    const el = toValue(target);\n    if (!el)\n      return;\n    if (isPlaying) {\n      el.play().catch((e) => {\n        playbackErrorEvent.trigger(e);\n        throw e;\n      });\n    } else {\n      el.pause();\n    }\n  });\n  useEventListener(\n    target,\n    \"timeupdate\",\n    () => ignoreCurrentTimeUpdates(() => currentTime.value = toValue(target).currentTime),\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"durationchange\",\n    () => duration.value = toValue(target).duration,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"progress\",\n    () => buffered.value = timeRangeToArray(toValue(target).buffered),\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"seeking\",\n    () => seeking.value = true,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"seeked\",\n    () => seeking.value = false,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    [\"waiting\", \"loadstart\"],\n    () => {\n      waiting.value = true;\n      ignorePlayingUpdates(() => playing.value = false);\n    },\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"loadeddata\",\n    () => waiting.value = false,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"playing\",\n    () => {\n      waiting.value = false;\n      ended.value = false;\n      ignorePlayingUpdates(() => playing.value = true);\n    },\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"ratechange\",\n    () => rate.value = toValue(target).playbackRate,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"stalled\",\n    () => stalled.value = true,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"ended\",\n    () => ended.value = true,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"pause\",\n    () => ignorePlayingUpdates(() => playing.value = false),\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"play\",\n    () => ignorePlayingUpdates(() => playing.value = true),\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"enterpictureinpicture\",\n    () => isPictureInPicture.value = true,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"leavepictureinpicture\",\n    () => isPictureInPicture.value = false,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"volumechange\",\n    () => {\n      const el = toValue(target);\n      if (!el)\n        return;\n      volume.value = el.volume;\n      muted.value = el.muted;\n    },\n    listenerOptions\n  );\n  const listeners = [];\n  const stop = watch([target], () => {\n    const el = toValue(target);\n    if (!el)\n      return;\n    stop();\n    listeners[0] = useEventListener(el.textTracks, \"addtrack\", () => tracks.value = tracksToArray(el.textTracks), listenerOptions);\n    listeners[1] = useEventListener(el.textTracks, \"removetrack\", () => tracks.value = tracksToArray(el.textTracks), listenerOptions);\n    listeners[2] = useEventListener(el.textTracks, \"change\", () => tracks.value = tracksToArray(el.textTracks), listenerOptions);\n  });\n  tryOnScopeDispose(() => listeners.forEach((listener) => listener()));\n  return {\n    currentTime,\n    duration,\n    waiting,\n    seeking,\n    ended,\n    stalled,\n    buffered,\n    playing,\n    rate,\n    // Volume\n    volume,\n    muted,\n    // Tracks\n    tracks,\n    selectedTrack,\n    enableTrack,\n    disableTrack,\n    // Picture in Picture\n    supportsPictureInPicture,\n    togglePictureInPicture,\n    isPictureInPicture,\n    // Events\n    onSourceError: sourceErrorEvent.on,\n    onPlaybackError: playbackErrorEvent.on\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useMemoize(resolver, options) {\n  const initCache = () => {\n    if (options == null ? void 0 : options.cache)\n      return shallowReactive(options.cache);\n    return shallowReactive(/* @__PURE__ */ new Map());\n  };\n  const cache = initCache();\n  const generateKey = (...args) => (options == null ? void 0 : options.getKey) ? options.getKey(...args) : JSON.stringify(args);\n  const _loadData = (key, ...args) => {\n    cache.set(key, resolver(...args));\n    return cache.get(key);\n  };\n  const loadData = (...args) => _loadData(generateKey(...args), ...args);\n  const deleteData = (...args) => {\n    cache.delete(generateKey(...args));\n  };\n  const clearData = () => {\n    cache.clear();\n  };\n  const memoized = (...args) => {\n    const key = generateKey(...args);\n    if (cache.has(key))\n      return cache.get(key);\n    return _loadData(key, ...args);\n  };\n  memoized.load = loadData;\n  memoized.delete = deleteData;\n  memoized.clear = clearData;\n  memoized.generateKey = generateKey;\n  memoized.cache = cache;\n  return memoized;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useMemory(options = {}) {\n  const memory = ref();\n  const isSupported = useSupported(() => typeof performance !== \"undefined\" && \"memory\" in performance);\n  if (isSupported.value) {\n    const { interval = 1e3 } = options;\n    useIntervalFn(() => {\n      memory.value = performance.memory;\n    }, interval, { immediate: options.immediate, immediateCallback: options.immediateCallback });\n  }\n  return { isSupported, memory };\n}\n\nconst UseMouseBuiltinExtractors = {\n  page: (event) => [event.pageX, event.pageY],\n  client: (event) => [event.clientX, event.clientY],\n  screen: (event) => [event.screenX, event.screenY],\n  movement: (event) => event instanceof MouseEvent ? [event.movementX, event.movementY] : null\n};\nfunction useMouse(options = {}) {\n  const {\n    type = \"page\",\n    touch = true,\n    resetOnTouchEnds = false,\n    initialValue = { x: 0, y: 0 },\n    window = defaultWindow,\n    target = window,\n    scroll = true,\n    eventFilter\n  } = options;\n  let _prevMouseEvent = null;\n  let _prevScrollX = 0;\n  let _prevScrollY = 0;\n  const x = shallowRef(initialValue.x);\n  const y = shallowRef(initialValue.y);\n  const sourceType = shallowRef(null);\n  const extractor = typeof type === \"function\" ? type : UseMouseBuiltinExtractors[type];\n  const mouseHandler = (event) => {\n    const result = extractor(event);\n    _prevMouseEvent = event;\n    if (result) {\n      [x.value, y.value] = result;\n      sourceType.value = \"mouse\";\n    }\n    if (window) {\n      _prevScrollX = window.scrollX;\n      _prevScrollY = window.scrollY;\n    }\n  };\n  const touchHandler = (event) => {\n    if (event.touches.length > 0) {\n      const result = extractor(event.touches[0]);\n      if (result) {\n        [x.value, y.value] = result;\n        sourceType.value = \"touch\";\n      }\n    }\n  };\n  const scrollHandler = () => {\n    if (!_prevMouseEvent || !window)\n      return;\n    const pos = extractor(_prevMouseEvent);\n    if (_prevMouseEvent instanceof MouseEvent && pos) {\n      x.value = pos[0] + window.scrollX - _prevScrollX;\n      y.value = pos[1] + window.scrollY - _prevScrollY;\n    }\n  };\n  const reset = () => {\n    x.value = initialValue.x;\n    y.value = initialValue.y;\n  };\n  const mouseHandlerWrapper = eventFilter ? (event) => eventFilter(() => mouseHandler(event), {}) : (event) => mouseHandler(event);\n  const touchHandlerWrapper = eventFilter ? (event) => eventFilter(() => touchHandler(event), {}) : (event) => touchHandler(event);\n  const scrollHandlerWrapper = eventFilter ? () => eventFilter(() => scrollHandler(), {}) : () => scrollHandler();\n  if (target) {\n    const listenerOptions = { passive: true };\n    useEventListener(target, [\"mousemove\", \"dragover\"], mouseHandlerWrapper, listenerOptions);\n    if (touch && type !== \"movement\") {\n      useEventListener(target, [\"touchstart\", \"touchmove\"], touchHandlerWrapper, listenerOptions);\n      if (resetOnTouchEnds)\n        useEventListener(target, \"touchend\", reset, listenerOptions);\n    }\n    if (scroll && type === \"page\")\n      useEventListener(window, \"scroll\", scrollHandlerWrapper, listenerOptions);\n  }\n  return {\n    x,\n    y,\n    sourceType\n  };\n}\n\nfunction useMouseInElement(target, options = {}) {\n  const {\n    windowResize = true,\n    windowScroll = true,\n    handleOutside = true,\n    window = defaultWindow\n  } = options;\n  const type = options.type || \"page\";\n  const { x, y, sourceType } = useMouse(options);\n  const targetRef = shallowRef(target != null ? target : window == null ? void 0 : window.document.body);\n  const elementX = shallowRef(0);\n  const elementY = shallowRef(0);\n  const elementPositionX = shallowRef(0);\n  const elementPositionY = shallowRef(0);\n  const elementHeight = shallowRef(0);\n  const elementWidth = shallowRef(0);\n  const isOutside = shallowRef(true);\n  function update() {\n    if (!window)\n      return;\n    const el = unrefElement(targetRef);\n    if (!el || !(el instanceof Element))\n      return;\n    const {\n      left,\n      top,\n      width,\n      height\n    } = el.getBoundingClientRect();\n    elementPositionX.value = left + (type === \"page\" ? window.pageXOffset : 0);\n    elementPositionY.value = top + (type === \"page\" ? window.pageYOffset : 0);\n    elementHeight.value = height;\n    elementWidth.value = width;\n    const elX = x.value - elementPositionX.value;\n    const elY = y.value - elementPositionY.value;\n    isOutside.value = width === 0 || height === 0 || elX < 0 || elY < 0 || elX > width || elY > height;\n    if (handleOutside || !isOutside.value) {\n      elementX.value = elX;\n      elementY.value = elY;\n    }\n  }\n  const stopFnList = [];\n  function stop() {\n    stopFnList.forEach((fn) => fn());\n    stopFnList.length = 0;\n  }\n  tryOnMounted(() => {\n    update();\n  });\n  if (window) {\n    const {\n      stop: stopResizeObserver\n    } = useResizeObserver(targetRef, update);\n    const {\n      stop: stopMutationObserver\n    } = useMutationObserver(targetRef, update, {\n      attributeFilter: [\"style\", \"class\"]\n    });\n    const stopWatch = watch(\n      [targetRef, x, y],\n      update\n    );\n    stopFnList.push(\n      stopResizeObserver,\n      stopMutationObserver,\n      stopWatch\n    );\n    useEventListener(\n      document,\n      \"mouseleave\",\n      () => isOutside.value = true,\n      { passive: true }\n    );\n    if (windowScroll) {\n      stopFnList.push(\n        useEventListener(\"scroll\", update, { capture: true, passive: true })\n      );\n    }\n    if (windowResize) {\n      stopFnList.push(\n        useEventListener(\"resize\", update, { passive: true })\n      );\n    }\n  }\n  return {\n    x,\n    y,\n    sourceType,\n    elementX,\n    elementY,\n    elementPositionX,\n    elementPositionY,\n    elementHeight,\n    elementWidth,\n    isOutside,\n    stop\n  };\n}\n\nfunction useMousePressed(options = {}) {\n  const {\n    touch = true,\n    drag = true,\n    capture = false,\n    initialValue = false,\n    window = defaultWindow\n  } = options;\n  const pressed = shallowRef(initialValue);\n  const sourceType = shallowRef(null);\n  if (!window) {\n    return {\n      pressed,\n      sourceType\n    };\n  }\n  const onPressed = (srcType) => (event) => {\n    var _a;\n    pressed.value = true;\n    sourceType.value = srcType;\n    (_a = options.onPressed) == null ? void 0 : _a.call(options, event);\n  };\n  const onReleased = (event) => {\n    var _a;\n    pressed.value = false;\n    sourceType.value = null;\n    (_a = options.onReleased) == null ? void 0 : _a.call(options, event);\n  };\n  const target = computed(() => unrefElement(options.target) || window);\n  const listenerOptions = { passive: true, capture };\n  useEventListener(target, \"mousedown\", onPressed(\"mouse\"), listenerOptions);\n  useEventListener(window, \"mouseleave\", onReleased, listenerOptions);\n  useEventListener(window, \"mouseup\", onReleased, listenerOptions);\n  if (drag) {\n    useEventListener(target, \"dragstart\", onPressed(\"mouse\"), listenerOptions);\n    useEventListener(window, \"drop\", onReleased, listenerOptions);\n    useEventListener(window, \"dragend\", onReleased, listenerOptions);\n  }\n  if (touch) {\n    useEventListener(target, \"touchstart\", onPressed(\"touch\"), listenerOptions);\n    useEventListener(window, \"touchend\", onReleased, listenerOptions);\n    useEventListener(window, \"touchcancel\", onReleased, listenerOptions);\n  }\n  return {\n    pressed,\n    sourceType\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useNavigatorLanguage(options = {}) {\n  const { window = defaultWindow } = options;\n  const navigator = window == null ? void 0 : window.navigator;\n  const isSupported = useSupported(() => navigator && \"language\" in navigator);\n  const language = shallowRef(navigator == null ? void 0 : navigator.language);\n  useEventListener(window, \"languagechange\", () => {\n    if (navigator)\n      language.value = navigator.language;\n  }, { passive: true });\n  return {\n    isSupported,\n    language\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useNetwork(options = {}) {\n  const { window = defaultWindow } = options;\n  const navigator = window == null ? void 0 : window.navigator;\n  const isSupported = useSupported(() => navigator && \"connection\" in navigator);\n  const isOnline = shallowRef(true);\n  const saveData = shallowRef(false);\n  const offlineAt = shallowRef(void 0);\n  const onlineAt = shallowRef(void 0);\n  const downlink = shallowRef(void 0);\n  const downlinkMax = shallowRef(void 0);\n  const rtt = shallowRef(void 0);\n  const effectiveType = shallowRef(void 0);\n  const type = shallowRef(\"unknown\");\n  const connection = isSupported.value && navigator.connection;\n  function updateNetworkInformation() {\n    if (!navigator)\n      return;\n    isOnline.value = navigator.onLine;\n    offlineAt.value = isOnline.value ? void 0 : Date.now();\n    onlineAt.value = isOnline.value ? Date.now() : void 0;\n    if (connection) {\n      downlink.value = connection.downlink;\n      downlinkMax.value = connection.downlinkMax;\n      effectiveType.value = connection.effectiveType;\n      rtt.value = connection.rtt;\n      saveData.value = connection.saveData;\n      type.value = connection.type;\n    }\n  }\n  const listenerOptions = { passive: true };\n  if (window) {\n    useEventListener(window, \"offline\", () => {\n      isOnline.value = false;\n      offlineAt.value = Date.now();\n    }, listenerOptions);\n    useEventListener(window, \"online\", () => {\n      isOnline.value = true;\n      onlineAt.value = Date.now();\n    }, listenerOptions);\n  }\n  if (connection)\n    useEventListener(connection, \"change\", updateNetworkInformation, listenerOptions);\n  updateNetworkInformation();\n  return {\n    isSupported,\n    isOnline: readonly(isOnline),\n    saveData: readonly(saveData),\n    offlineAt: readonly(offlineAt),\n    onlineAt: readonly(onlineAt),\n    downlink: readonly(downlink),\n    downlinkMax: readonly(downlinkMax),\n    effectiveType: readonly(effectiveType),\n    rtt: readonly(rtt),\n    type: readonly(type)\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useNow(options = {}) {\n  const {\n    controls: exposeControls = false,\n    interval = \"requestAnimationFrame\",\n    immediate = true\n  } = options;\n  const now = ref(/* @__PURE__ */ new Date());\n  const update = () => now.value = /* @__PURE__ */ new Date();\n  const controls = interval === \"requestAnimationFrame\" ? useRafFn(update, { immediate }) : useIntervalFn(update, interval, { immediate });\n  if (exposeControls) {\n    return {\n      now,\n      ...controls\n    };\n  } else {\n    return now;\n  }\n}\n\nfunction useObjectUrl(object) {\n  const url = shallowRef();\n  const release = () => {\n    if (url.value)\n      URL.revokeObjectURL(url.value);\n    url.value = void 0;\n  };\n  watch(\n    () => toValue(object),\n    (newObject) => {\n      release();\n      if (newObject)\n        url.value = URL.createObjectURL(newObject);\n    },\n    { immediate: true }\n  );\n  tryOnScopeDispose(release);\n  return readonly(url);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useClamp(value, min, max) {\n  if (typeof value === \"function\" || isReadonly(value))\n    return computed(() => clamp(toValue(value), toValue(min), toValue(max)));\n  const _value = ref(value);\n  return computed({\n    get() {\n      return _value.value = clamp(_value.value, toValue(min), toValue(max));\n    },\n    set(value2) {\n      _value.value = clamp(value2, toValue(min), toValue(max));\n    }\n  });\n}\n\nfunction useOffsetPagination(options) {\n  const {\n    total = Number.POSITIVE_INFINITY,\n    pageSize = 10,\n    page = 1,\n    onPageChange = noop,\n    onPageSizeChange = noop,\n    onPageCountChange = noop\n  } = options;\n  const currentPageSize = useClamp(pageSize, 1, Number.POSITIVE_INFINITY);\n  const pageCount = computed(() => Math.max(\n    1,\n    Math.ceil(toValue(total) / toValue(currentPageSize))\n  ));\n  const currentPage = useClamp(page, 1, pageCount);\n  const isFirstPage = computed(() => currentPage.value === 1);\n  const isLastPage = computed(() => currentPage.value === pageCount.value);\n  if (isRef(page)) {\n    syncRef(page, currentPage, {\n      direction: isReadonly(page) ? \"ltr\" : \"both\"\n    });\n  }\n  if (isRef(pageSize)) {\n    syncRef(pageSize, currentPageSize, {\n      direction: isReadonly(pageSize) ? \"ltr\" : \"both\"\n    });\n  }\n  function prev() {\n    currentPage.value--;\n  }\n  function next() {\n    currentPage.value++;\n  }\n  const returnValue = {\n    currentPage,\n    currentPageSize,\n    pageCount,\n    isFirstPage,\n    isLastPage,\n    prev,\n    next\n  };\n  watch(currentPage, () => {\n    onPageChange(reactive(returnValue));\n  });\n  watch(currentPageSize, () => {\n    onPageSizeChange(reactive(returnValue));\n  });\n  watch(pageCount, () => {\n    onPageCountChange(reactive(returnValue));\n  });\n  return returnValue;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useOnline(options = {}) {\n  const { isOnline } = useNetwork(options);\n  return isOnline;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePageLeave(options = {}) {\n  const { window = defaultWindow } = options;\n  const isLeft = shallowRef(false);\n  const handler = (event) => {\n    if (!window)\n      return;\n    event = event || window.event;\n    const from = event.relatedTarget || event.toElement;\n    isLeft.value = !from;\n  };\n  if (window) {\n    const listenerOptions = { passive: true };\n    useEventListener(window, \"mouseout\", handler, listenerOptions);\n    useEventListener(window.document, \"mouseleave\", handler, listenerOptions);\n    useEventListener(window.document, \"mouseenter\", handler, listenerOptions);\n  }\n  return isLeft;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useScreenOrientation(options = {}) {\n  const {\n    window = defaultWindow\n  } = options;\n  const isSupported = useSupported(() => window && \"screen\" in window && \"orientation\" in window.screen);\n  const screenOrientation = isSupported.value ? window.screen.orientation : {};\n  const orientation = ref(screenOrientation.type);\n  const angle = shallowRef(screenOrientation.angle || 0);\n  if (isSupported.value) {\n    useEventListener(window, \"orientationchange\", () => {\n      orientation.value = screenOrientation.type;\n      angle.value = screenOrientation.angle;\n    }, { passive: true });\n  }\n  const lockOrientation = (type) => {\n    if (isSupported.value && typeof screenOrientation.lock === \"function\")\n      return screenOrientation.lock(type);\n    return Promise.reject(new Error(\"Not supported\"));\n  };\n  const unlockOrientation = () => {\n    if (isSupported.value && typeof screenOrientation.unlock === \"function\")\n      screenOrientation.unlock();\n  };\n  return {\n    isSupported,\n    orientation,\n    angle,\n    lockOrientation,\n    unlockOrientation\n  };\n}\n\nfunction useParallax(target, options = {}) {\n  const {\n    deviceOrientationTiltAdjust = (i) => i,\n    deviceOrientationRollAdjust = (i) => i,\n    mouseTiltAdjust = (i) => i,\n    mouseRollAdjust = (i) => i,\n    window = defaultWindow\n  } = options;\n  const orientation = reactive(useDeviceOrientation({ window }));\n  const screenOrientation = reactive(useScreenOrientation({ window }));\n  const {\n    elementX: x,\n    elementY: y,\n    elementWidth: width,\n    elementHeight: height\n  } = useMouseInElement(target, { handleOutside: false, window });\n  const source = computed(() => {\n    if (orientation.isSupported && (orientation.alpha != null && orientation.alpha !== 0 || orientation.gamma != null && orientation.gamma !== 0)) {\n      return \"deviceOrientation\";\n    }\n    return \"mouse\";\n  });\n  const roll = computed(() => {\n    if (source.value === \"deviceOrientation\") {\n      let value;\n      switch (screenOrientation.orientation) {\n        case \"landscape-primary\":\n          value = orientation.gamma / 90;\n          break;\n        case \"landscape-secondary\":\n          value = -orientation.gamma / 90;\n          break;\n        case \"portrait-primary\":\n          value = -orientation.beta / 90;\n          break;\n        case \"portrait-secondary\":\n          value = orientation.beta / 90;\n          break;\n        default:\n          value = -orientation.beta / 90;\n      }\n      return deviceOrientationRollAdjust(value);\n    } else {\n      const value = -(y.value - height.value / 2) / height.value;\n      return mouseRollAdjust(value);\n    }\n  });\n  const tilt = computed(() => {\n    if (source.value === \"deviceOrientation\") {\n      let value;\n      switch (screenOrientation.orientation) {\n        case \"landscape-primary\":\n          value = orientation.beta / 90;\n          break;\n        case \"landscape-secondary\":\n          value = -orientation.beta / 90;\n          break;\n        case \"portrait-primary\":\n          value = orientation.gamma / 90;\n          break;\n        case \"portrait-secondary\":\n          value = -orientation.gamma / 90;\n          break;\n        default:\n          value = orientation.gamma / 90;\n      }\n      return deviceOrientationTiltAdjust(value);\n    } else {\n      const value = (x.value - width.value / 2) / width.value;\n      return mouseTiltAdjust(value);\n    }\n  });\n  return { roll, tilt, source };\n}\n\nfunction useParentElement(element = useCurrentElement()) {\n  const parentElement = shallowRef();\n  const update = () => {\n    const el = unrefElement(element);\n    if (el)\n      parentElement.value = el.parentElement;\n  };\n  tryOnMounted(update);\n  watch(() => toValue(element), update);\n  return parentElement;\n}\n\nfunction usePerformanceObserver(options, callback) {\n  const {\n    window = defaultWindow,\n    immediate = true,\n    ...performanceOptions\n  } = options;\n  const isSupported = useSupported(() => window && \"PerformanceObserver\" in window);\n  let observer;\n  const stop = () => {\n    observer == null ? void 0 : observer.disconnect();\n  };\n  const start = () => {\n    if (isSupported.value) {\n      stop();\n      observer = new PerformanceObserver(callback);\n      observer.observe(performanceOptions);\n    }\n  };\n  tryOnScopeDispose(stop);\n  if (immediate)\n    start();\n  return {\n    isSupported,\n    start,\n    stop\n  };\n}\n\nconst defaultState = {\n  x: 0,\n  y: 0,\n  pointerId: 0,\n  pressure: 0,\n  tiltX: 0,\n  tiltY: 0,\n  width: 0,\n  height: 0,\n  twist: 0,\n  pointerType: null\n};\nconst keys = /* @__PURE__ */ Object.keys(defaultState);\nfunction usePointer(options = {}) {\n  const {\n    target = defaultWindow\n  } = options;\n  const isInside = shallowRef(false);\n  const state = shallowRef(options.initialValue || {});\n  Object.assign(state.value, defaultState, state.value);\n  const handler = (event) => {\n    isInside.value = true;\n    if (options.pointerTypes && !options.pointerTypes.includes(event.pointerType))\n      return;\n    state.value = objectPick(event, keys, false);\n  };\n  if (target) {\n    const listenerOptions = { passive: true };\n    useEventListener(target, [\"pointerdown\", \"pointermove\", \"pointerup\"], handler, listenerOptions);\n    useEventListener(target, \"pointerleave\", () => isInside.value = false, listenerOptions);\n  }\n  return {\n    ...toRefs(state),\n    isInside\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePointerLock(target, options = {}) {\n  const { document = defaultDocument } = options;\n  const isSupported = useSupported(() => document && \"pointerLockElement\" in document);\n  const element = shallowRef();\n  const triggerElement = shallowRef();\n  let targetElement;\n  if (isSupported.value) {\n    const listenerOptions = { passive: true };\n    useEventListener(document, \"pointerlockchange\", () => {\n      var _a;\n      const currentElement = (_a = document.pointerLockElement) != null ? _a : element.value;\n      if (targetElement && currentElement === targetElement) {\n        element.value = document.pointerLockElement;\n        if (!element.value)\n          targetElement = triggerElement.value = null;\n      }\n    }, listenerOptions);\n    useEventListener(document, \"pointerlockerror\", () => {\n      var _a;\n      const currentElement = (_a = document.pointerLockElement) != null ? _a : element.value;\n      if (targetElement && currentElement === targetElement) {\n        const action = document.pointerLockElement ? \"release\" : \"acquire\";\n        throw new Error(`Failed to ${action} pointer lock.`);\n      }\n    }, listenerOptions);\n  }\n  async function lock(e) {\n    var _a;\n    if (!isSupported.value)\n      throw new Error(\"Pointer Lock API is not supported by your browser.\");\n    triggerElement.value = e instanceof Event ? e.currentTarget : null;\n    targetElement = e instanceof Event ? (_a = unrefElement(target)) != null ? _a : triggerElement.value : unrefElement(e);\n    if (!targetElement)\n      throw new Error(\"Target element undefined.\");\n    targetElement.requestPointerLock();\n    return await until(element).toBe(targetElement);\n  }\n  async function unlock() {\n    if (!element.value)\n      return false;\n    document.exitPointerLock();\n    await until(element).toBeNull();\n    return true;\n  }\n  return {\n    isSupported,\n    element,\n    triggerElement,\n    lock,\n    unlock\n  };\n}\n\nfunction usePointerSwipe(target, options = {}) {\n  const targetRef = toRef(target);\n  const {\n    threshold = 50,\n    onSwipe,\n    onSwipeEnd,\n    onSwipeStart,\n    disableTextSelect = false\n  } = options;\n  const posStart = reactive({ x: 0, y: 0 });\n  const updatePosStart = (x, y) => {\n    posStart.x = x;\n    posStart.y = y;\n  };\n  const posEnd = reactive({ x: 0, y: 0 });\n  const updatePosEnd = (x, y) => {\n    posEnd.x = x;\n    posEnd.y = y;\n  };\n  const distanceX = computed(() => posStart.x - posEnd.x);\n  const distanceY = computed(() => posStart.y - posEnd.y);\n  const { max, abs } = Math;\n  const isThresholdExceeded = computed(() => max(abs(distanceX.value), abs(distanceY.value)) >= threshold);\n  const isSwiping = shallowRef(false);\n  const isPointerDown = shallowRef(false);\n  const direction = computed(() => {\n    if (!isThresholdExceeded.value)\n      return \"none\";\n    if (abs(distanceX.value) > abs(distanceY.value)) {\n      return distanceX.value > 0 ? \"left\" : \"right\";\n    } else {\n      return distanceY.value > 0 ? \"up\" : \"down\";\n    }\n  });\n  const eventIsAllowed = (e) => {\n    var _a, _b, _c;\n    const isReleasingButton = e.buttons === 0;\n    const isPrimaryButton = e.buttons === 1;\n    return (_c = (_b = (_a = options.pointerTypes) == null ? void 0 : _a.includes(e.pointerType)) != null ? _b : isReleasingButton || isPrimaryButton) != null ? _c : true;\n  };\n  const listenerOptions = { passive: true };\n  const stops = [\n    useEventListener(target, \"pointerdown\", (e) => {\n      if (!eventIsAllowed(e))\n        return;\n      isPointerDown.value = true;\n      const eventTarget = e.target;\n      eventTarget == null ? void 0 : eventTarget.setPointerCapture(e.pointerId);\n      const { clientX: x, clientY: y } = e;\n      updatePosStart(x, y);\n      updatePosEnd(x, y);\n      onSwipeStart == null ? void 0 : onSwipeStart(e);\n    }, listenerOptions),\n    useEventListener(target, \"pointermove\", (e) => {\n      if (!eventIsAllowed(e))\n        return;\n      if (!isPointerDown.value)\n        return;\n      const { clientX: x, clientY: y } = e;\n      updatePosEnd(x, y);\n      if (!isSwiping.value && isThresholdExceeded.value)\n        isSwiping.value = true;\n      if (isSwiping.value)\n        onSwipe == null ? void 0 : onSwipe(e);\n    }, listenerOptions),\n    useEventListener(target, \"pointerup\", (e) => {\n      if (!eventIsAllowed(e))\n        return;\n      if (isSwiping.value)\n        onSwipeEnd == null ? void 0 : onSwipeEnd(e, direction.value);\n      isPointerDown.value = false;\n      isSwiping.value = false;\n    }, listenerOptions)\n  ];\n  tryOnMounted(() => {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    (_b = (_a = targetRef.value) == null ? void 0 : _a.style) == null ? void 0 : _b.setProperty(\"touch-action\", \"pan-y\");\n    if (disableTextSelect) {\n      (_d = (_c = targetRef.value) == null ? void 0 : _c.style) == null ? void 0 : _d.setProperty(\"-webkit-user-select\", \"none\");\n      (_f = (_e = targetRef.value) == null ? void 0 : _e.style) == null ? void 0 : _f.setProperty(\"-ms-user-select\", \"none\");\n      (_h = (_g = targetRef.value) == null ? void 0 : _g.style) == null ? void 0 : _h.setProperty(\"user-select\", \"none\");\n    }\n  });\n  const stop = () => stops.forEach((s) => s());\n  return {\n    isSwiping: readonly(isSwiping),\n    direction: readonly(direction),\n    posStart: readonly(posStart),\n    posEnd: readonly(posEnd),\n    distanceX,\n    distanceY,\n    stop\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePreferredColorScheme(options) {\n  const isLight = useMediaQuery(\"(prefers-color-scheme: light)\", options);\n  const isDark = useMediaQuery(\"(prefers-color-scheme: dark)\", options);\n  return computed(() => {\n    if (isDark.value)\n      return \"dark\";\n    if (isLight.value)\n      return \"light\";\n    return \"no-preference\";\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePreferredContrast(options) {\n  const isMore = useMediaQuery(\"(prefers-contrast: more)\", options);\n  const isLess = useMediaQuery(\"(prefers-contrast: less)\", options);\n  const isCustom = useMediaQuery(\"(prefers-contrast: custom)\", options);\n  return computed(() => {\n    if (isMore.value)\n      return \"more\";\n    if (isLess.value)\n      return \"less\";\n    if (isCustom.value)\n      return \"custom\";\n    return \"no-preference\";\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePreferredLanguages(options = {}) {\n  const { window = defaultWindow } = options;\n  if (!window)\n    return shallowRef([\"en\"]);\n  const navigator = window.navigator;\n  const value = shallowRef(navigator.languages);\n  useEventListener(window, \"languagechange\", () => {\n    value.value = navigator.languages;\n  }, { passive: true });\n  return value;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePreferredReducedMotion(options) {\n  const isReduced = useMediaQuery(\"(prefers-reduced-motion: reduce)\", options);\n  return computed(() => {\n    if (isReduced.value)\n      return \"reduce\";\n    return \"no-preference\";\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePreferredReducedTransparency(options) {\n  const isReduced = useMediaQuery(\"(prefers-reduced-transparency: reduce)\", options);\n  return computed(() => {\n    if (isReduced.value)\n      return \"reduce\";\n    return \"no-preference\";\n  });\n}\n\nfunction usePrevious(value, initialValue) {\n  const previous = shallowRef(initialValue);\n  watch(\n    toRef(value),\n    (_, oldValue) => {\n      previous.value = oldValue;\n    },\n    { flush: \"sync\" }\n  );\n  return readonly(previous);\n}\n\nconst topVarName = \"--vueuse-safe-area-top\";\nconst rightVarName = \"--vueuse-safe-area-right\";\nconst bottomVarName = \"--vueuse-safe-area-bottom\";\nconst leftVarName = \"--vueuse-safe-area-left\";\nfunction useScreenSafeArea() {\n  const top = shallowRef(\"\");\n  const right = shallowRef(\"\");\n  const bottom = shallowRef(\"\");\n  const left = shallowRef(\"\");\n  if (isClient) {\n    const topCssVar = useCssVar(topVarName);\n    const rightCssVar = useCssVar(rightVarName);\n    const bottomCssVar = useCssVar(bottomVarName);\n    const leftCssVar = useCssVar(leftVarName);\n    topCssVar.value = \"env(safe-area-inset-top, 0px)\";\n    rightCssVar.value = \"env(safe-area-inset-right, 0px)\";\n    bottomCssVar.value = \"env(safe-area-inset-bottom, 0px)\";\n    leftCssVar.value = \"env(safe-area-inset-left, 0px)\";\n    tryOnMounted(update);\n    useEventListener(\"resize\", useDebounceFn(update), { passive: true });\n  }\n  function update() {\n    top.value = getValue(topVarName);\n    right.value = getValue(rightVarName);\n    bottom.value = getValue(bottomVarName);\n    left.value = getValue(leftVarName);\n  }\n  return {\n    top,\n    right,\n    bottom,\n    left,\n    update\n  };\n}\nfunction getValue(position) {\n  return getComputedStyle(document.documentElement).getPropertyValue(position);\n}\n\nfunction useScriptTag(src, onLoaded = noop, options = {}) {\n  const {\n    immediate = true,\n    manual = false,\n    type = \"text/javascript\",\n    async = true,\n    crossOrigin,\n    referrerPolicy,\n    noModule,\n    defer,\n    document = defaultDocument,\n    attrs = {},\n    nonce = void 0\n  } = options;\n  const scriptTag = shallowRef(null);\n  let _promise = null;\n  const loadScript = (waitForScriptLoad) => new Promise((resolve, reject) => {\n    const resolveWithElement = (el2) => {\n      scriptTag.value = el2;\n      resolve(el2);\n      return el2;\n    };\n    if (!document) {\n      resolve(false);\n      return;\n    }\n    let shouldAppend = false;\n    let el = document.querySelector(`script[src=\"${toValue(src)}\"]`);\n    if (!el) {\n      el = document.createElement(\"script\");\n      el.type = type;\n      el.async = async;\n      el.src = toValue(src);\n      if (defer)\n        el.defer = defer;\n      if (crossOrigin)\n        el.crossOrigin = crossOrigin;\n      if (noModule)\n        el.noModule = noModule;\n      if (referrerPolicy)\n        el.referrerPolicy = referrerPolicy;\n      if (nonce) {\n        el.nonce = nonce;\n      }\n      Object.entries(attrs).forEach(([name, value]) => el == null ? void 0 : el.setAttribute(name, value));\n      shouldAppend = true;\n    } else if (el.hasAttribute(\"data-loaded\")) {\n      resolveWithElement(el);\n    }\n    const listenerOptions = {\n      passive: true\n    };\n    useEventListener(el, \"error\", (event) => reject(event), listenerOptions);\n    useEventListener(el, \"abort\", (event) => reject(event), listenerOptions);\n    useEventListener(el, \"load\", () => {\n      el.setAttribute(\"data-loaded\", \"true\");\n      onLoaded(el);\n      resolveWithElement(el);\n    }, listenerOptions);\n    if (shouldAppend)\n      el = document.head.appendChild(el);\n    if (!waitForScriptLoad)\n      resolveWithElement(el);\n  });\n  const load = (waitForScriptLoad = true) => {\n    if (!_promise)\n      _promise = loadScript(waitForScriptLoad);\n    return _promise;\n  };\n  const unload = () => {\n    if (!document)\n      return;\n    _promise = null;\n    if (scriptTag.value)\n      scriptTag.value = null;\n    const el = document.querySelector(`script[src=\"${toValue(src)}\"]`);\n    if (el)\n      document.head.removeChild(el);\n  };\n  if (immediate && !manual)\n    tryOnMounted(load);\n  if (!manual)\n    tryOnUnmounted(unload);\n  return { scriptTag, load, unload };\n}\n\nfunction checkOverflowScroll(ele) {\n  const style = window.getComputedStyle(ele);\n  if (style.overflowX === \"scroll\" || style.overflowY === \"scroll\" || style.overflowX === \"auto\" && ele.clientWidth < ele.scrollWidth || style.overflowY === \"auto\" && ele.clientHeight < ele.scrollHeight) {\n    return true;\n  } else {\n    const parent = ele.parentNode;\n    if (!parent || parent.tagName === \"BODY\")\n      return false;\n    return checkOverflowScroll(parent);\n  }\n}\nfunction preventDefault(rawEvent) {\n  const e = rawEvent || window.event;\n  const _target = e.target;\n  if (checkOverflowScroll(_target))\n    return false;\n  if (e.touches.length > 1)\n    return true;\n  if (e.preventDefault)\n    e.preventDefault();\n  return false;\n}\nconst elInitialOverflow = /* @__PURE__ */ new WeakMap();\nfunction useScrollLock(element, initialState = false) {\n  const isLocked = shallowRef(initialState);\n  let stopTouchMoveListener = null;\n  let initialOverflow = \"\";\n  watch(toRef(element), (el) => {\n    const target = resolveElement(toValue(el));\n    if (target) {\n      const ele = target;\n      if (!elInitialOverflow.get(ele))\n        elInitialOverflow.set(ele, ele.style.overflow);\n      if (ele.style.overflow !== \"hidden\")\n        initialOverflow = ele.style.overflow;\n      if (ele.style.overflow === \"hidden\")\n        return isLocked.value = true;\n      if (isLocked.value)\n        return ele.style.overflow = \"hidden\";\n    }\n  }, {\n    immediate: true\n  });\n  const lock = () => {\n    const el = resolveElement(toValue(element));\n    if (!el || isLocked.value)\n      return;\n    if (isIOS) {\n      stopTouchMoveListener = useEventListener(\n        el,\n        \"touchmove\",\n        (e) => {\n          preventDefault(e);\n        },\n        { passive: false }\n      );\n    }\n    el.style.overflow = \"hidden\";\n    isLocked.value = true;\n  };\n  const unlock = () => {\n    const el = resolveElement(toValue(element));\n    if (!el || !isLocked.value)\n      return;\n    if (isIOS)\n      stopTouchMoveListener == null ? void 0 : stopTouchMoveListener();\n    el.style.overflow = initialOverflow;\n    elInitialOverflow.delete(el);\n    isLocked.value = false;\n  };\n  tryOnScopeDispose(unlock);\n  return computed({\n    get() {\n      return isLocked.value;\n    },\n    set(v) {\n      if (v)\n        lock();\n      else unlock();\n    }\n  });\n}\n\nfunction useSessionStorage(key, initialValue, options = {}) {\n  const { window = defaultWindow } = options;\n  return useStorage(key, initialValue, window == null ? void 0 : window.sessionStorage, options);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useShare(shareOptions = {}, options = {}) {\n  const { navigator = defaultNavigator } = options;\n  const _navigator = navigator;\n  const isSupported = useSupported(() => _navigator && \"canShare\" in _navigator);\n  const share = async (overrideOptions = {}) => {\n    if (isSupported.value) {\n      const data = {\n        ...toValue(shareOptions),\n        ...toValue(overrideOptions)\n      };\n      let granted = true;\n      if (data.files && _navigator.canShare)\n        granted = _navigator.canShare({ files: data.files });\n      if (granted)\n        return _navigator.share(data);\n    }\n  };\n  return {\n    isSupported,\n    share\n  };\n}\n\nconst defaultSortFn = (source, compareFn) => source.sort(compareFn);\nconst defaultCompare = (a, b) => a - b;\nfunction useSorted(...args) {\n  var _a, _b, _c, _d;\n  const [source] = args;\n  let compareFn = defaultCompare;\n  let options = {};\n  if (args.length === 2) {\n    if (typeof args[1] === \"object\") {\n      options = args[1];\n      compareFn = (_a = options.compareFn) != null ? _a : defaultCompare;\n    } else {\n      compareFn = (_b = args[1]) != null ? _b : defaultCompare;\n    }\n  } else if (args.length > 2) {\n    compareFn = (_c = args[1]) != null ? _c : defaultCompare;\n    options = (_d = args[2]) != null ? _d : {};\n  }\n  const {\n    dirty = false,\n    sortFn = defaultSortFn\n  } = options;\n  if (!dirty)\n    return computed(() => sortFn([...toValue(source)], compareFn));\n  watchEffect(() => {\n    const result = sortFn(toValue(source), compareFn);\n    if (isRef(source))\n      source.value = result;\n    else\n      source.splice(0, source.length, ...result);\n  });\n  return source;\n}\n\nfunction useSpeechRecognition(options = {}) {\n  const {\n    interimResults = true,\n    continuous = true,\n    maxAlternatives = 1,\n    window = defaultWindow\n  } = options;\n  const lang = toRef(options.lang || \"en-US\");\n  const isListening = shallowRef(false);\n  const isFinal = shallowRef(false);\n  const result = shallowRef(\"\");\n  const error = shallowRef(void 0);\n  let recognition;\n  const start = () => {\n    isListening.value = true;\n  };\n  const stop = () => {\n    isListening.value = false;\n  };\n  const toggle = (value = !isListening.value) => {\n    if (value) {\n      start();\n    } else {\n      stop();\n    }\n  };\n  const SpeechRecognition = window && (window.SpeechRecognition || window.webkitSpeechRecognition);\n  const isSupported = useSupported(() => SpeechRecognition);\n  if (isSupported.value) {\n    recognition = new SpeechRecognition();\n    recognition.continuous = continuous;\n    recognition.interimResults = interimResults;\n    recognition.lang = toValue(lang);\n    recognition.maxAlternatives = maxAlternatives;\n    recognition.onstart = () => {\n      isListening.value = true;\n      isFinal.value = false;\n    };\n    watch(lang, (lang2) => {\n      if (recognition && !isListening.value)\n        recognition.lang = lang2;\n    });\n    recognition.onresult = (event) => {\n      const currentResult = event.results[event.resultIndex];\n      const { transcript } = currentResult[0];\n      isFinal.value = currentResult.isFinal;\n      result.value = transcript;\n      error.value = void 0;\n    };\n    recognition.onerror = (event) => {\n      error.value = event;\n    };\n    recognition.onend = () => {\n      isListening.value = false;\n      recognition.lang = toValue(lang);\n    };\n    watch(isListening, (newValue, oldValue) => {\n      if (newValue === oldValue)\n        return;\n      if (newValue)\n        recognition.start();\n      else\n        recognition.stop();\n    });\n  }\n  tryOnScopeDispose(() => {\n    stop();\n  });\n  return {\n    isSupported,\n    isListening,\n    isFinal,\n    recognition,\n    result,\n    error,\n    toggle,\n    start,\n    stop\n  };\n}\n\nfunction useSpeechSynthesis(text, options = {}) {\n  const {\n    pitch = 1,\n    rate = 1,\n    volume = 1,\n    window = defaultWindow,\n    onBoundary\n  } = options;\n  const synth = window && window.speechSynthesis;\n  const isSupported = useSupported(() => synth);\n  const isPlaying = shallowRef(false);\n  const status = shallowRef(\"init\");\n  const spokenText = toRef(text || \"\");\n  const lang = toRef(options.lang || \"en-US\");\n  const error = shallowRef(void 0);\n  const toggle = (value = !isPlaying.value) => {\n    isPlaying.value = value;\n  };\n  const bindEventsForUtterance = (utterance2) => {\n    utterance2.lang = toValue(lang);\n    utterance2.voice = toValue(options.voice) || null;\n    utterance2.pitch = toValue(pitch);\n    utterance2.rate = toValue(rate);\n    utterance2.volume = toValue(volume);\n    utterance2.onstart = () => {\n      isPlaying.value = true;\n      status.value = \"play\";\n    };\n    utterance2.onpause = () => {\n      isPlaying.value = false;\n      status.value = \"pause\";\n    };\n    utterance2.onresume = () => {\n      isPlaying.value = true;\n      status.value = \"play\";\n    };\n    utterance2.onend = () => {\n      isPlaying.value = false;\n      status.value = \"end\";\n    };\n    utterance2.onerror = (event) => {\n      error.value = event;\n    };\n    utterance2.onboundary = (event) => {\n      onBoundary == null ? void 0 : onBoundary(event);\n    };\n  };\n  const utterance = computed(() => {\n    isPlaying.value = false;\n    status.value = \"init\";\n    const newUtterance = new SpeechSynthesisUtterance(spokenText.value);\n    bindEventsForUtterance(newUtterance);\n    return newUtterance;\n  });\n  const speak = () => {\n    synth.cancel();\n    if (utterance)\n      synth.speak(utterance.value);\n  };\n  const stop = () => {\n    synth.cancel();\n    isPlaying.value = false;\n  };\n  if (isSupported.value) {\n    bindEventsForUtterance(utterance.value);\n    watch(lang, (lang2) => {\n      if (utterance.value && !isPlaying.value)\n        utterance.value.lang = lang2;\n    });\n    if (options.voice) {\n      watch(options.voice, () => {\n        synth.cancel();\n      });\n    }\n    watch(isPlaying, () => {\n      if (isPlaying.value)\n        synth.resume();\n      else\n        synth.pause();\n    });\n  }\n  tryOnScopeDispose(() => {\n    isPlaying.value = false;\n  });\n  return {\n    isSupported,\n    isPlaying,\n    status,\n    utterance,\n    error,\n    stop,\n    toggle,\n    speak\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useStepper(steps, initialStep) {\n  const stepsRef = ref(steps);\n  const stepNames = computed(() => Array.isArray(stepsRef.value) ? stepsRef.value : Object.keys(stepsRef.value));\n  const index = ref(stepNames.value.indexOf(initialStep != null ? initialStep : stepNames.value[0]));\n  const current = computed(() => at(index.value));\n  const isFirst = computed(() => index.value === 0);\n  const isLast = computed(() => index.value === stepNames.value.length - 1);\n  const next = computed(() => stepNames.value[index.value + 1]);\n  const previous = computed(() => stepNames.value[index.value - 1]);\n  function at(index2) {\n    if (Array.isArray(stepsRef.value))\n      return stepsRef.value[index2];\n    return stepsRef.value[stepNames.value[index2]];\n  }\n  function get(step) {\n    if (!stepNames.value.includes(step))\n      return;\n    return at(stepNames.value.indexOf(step));\n  }\n  function goTo(step) {\n    if (stepNames.value.includes(step))\n      index.value = stepNames.value.indexOf(step);\n  }\n  function goToNext() {\n    if (isLast.value)\n      return;\n    index.value++;\n  }\n  function goToPrevious() {\n    if (isFirst.value)\n      return;\n    index.value--;\n  }\n  function goBackTo(step) {\n    if (isAfter(step))\n      goTo(step);\n  }\n  function isNext(step) {\n    return stepNames.value.indexOf(step) === index.value + 1;\n  }\n  function isPrevious(step) {\n    return stepNames.value.indexOf(step) === index.value - 1;\n  }\n  function isCurrent(step) {\n    return stepNames.value.indexOf(step) === index.value;\n  }\n  function isBefore(step) {\n    return index.value < stepNames.value.indexOf(step);\n  }\n  function isAfter(step) {\n    return index.value > stepNames.value.indexOf(step);\n  }\n  return {\n    steps: stepsRef,\n    stepNames,\n    index,\n    current,\n    next,\n    previous,\n    isFirst,\n    isLast,\n    at,\n    get,\n    goTo,\n    goToNext,\n    goToPrevious,\n    goBackTo,\n    isNext,\n    isPrevious,\n    isCurrent,\n    isBefore,\n    isAfter\n  };\n}\n\nfunction useStorageAsync(key, initialValue, storage, options = {}) {\n  var _a;\n  const {\n    flush = \"pre\",\n    deep = true,\n    listenToStorageChanges = true,\n    writeDefaults = true,\n    mergeDefaults = false,\n    shallow,\n    window = defaultWindow,\n    eventFilter,\n    onError = (e) => {\n      console.error(e);\n    },\n    onReady\n  } = options;\n  const rawInit = toValue(initialValue);\n  const type = guessSerializerType(rawInit);\n  const data = (shallow ? shallowRef : ref)(toValue(initialValue));\n  const serializer = (_a = options.serializer) != null ? _a : StorageSerializers[type];\n  if (!storage) {\n    try {\n      storage = getSSRHandler(\"getDefaultStorageAsync\", () => {\n        var _a2;\n        return (_a2 = defaultWindow) == null ? void 0 : _a2.localStorage;\n      })();\n    } catch (e) {\n      onError(e);\n    }\n  }\n  async function read(event) {\n    if (!storage || event && event.key !== key)\n      return;\n    try {\n      const rawValue = event ? event.newValue : await storage.getItem(key);\n      if (rawValue == null) {\n        data.value = rawInit;\n        if (writeDefaults && rawInit !== null)\n          await storage.setItem(key, await serializer.write(rawInit));\n      } else if (mergeDefaults) {\n        const value = await serializer.read(rawValue);\n        if (typeof mergeDefaults === \"function\")\n          data.value = mergeDefaults(value, rawInit);\n        else if (type === \"object\" && !Array.isArray(value))\n          data.value = { ...rawInit, ...value };\n        else data.value = value;\n      } else {\n        data.value = await serializer.read(rawValue);\n      }\n    } catch (e) {\n      onError(e);\n    }\n  }\n  const promise = new Promise((resolve) => {\n    read().then(() => {\n      onReady == null ? void 0 : onReady(data.value);\n      resolve(data);\n    });\n  });\n  if (window && listenToStorageChanges)\n    useEventListener(window, \"storage\", (e) => Promise.resolve().then(() => read(e)), { passive: true });\n  if (storage) {\n    watchWithFilter(\n      data,\n      async () => {\n        try {\n          if (data.value == null)\n            await storage.removeItem(key);\n          else\n            await storage.setItem(key, await serializer.write(data.value));\n        } catch (e) {\n          onError(e);\n        }\n      },\n      {\n        flush,\n        deep,\n        eventFilter\n      }\n    );\n  }\n  Object.assign(data, {\n    then: promise.then.bind(promise),\n    catch: promise.catch.bind(promise)\n  });\n  return data;\n}\n\nlet _id = 0;\nfunction useStyleTag(css, options = {}) {\n  const isLoaded = shallowRef(false);\n  const {\n    document = defaultDocument,\n    immediate = true,\n    manual = false,\n    id = `vueuse_styletag_${++_id}`\n  } = options;\n  const cssRef = shallowRef(css);\n  let stop = () => {\n  };\n  const load = () => {\n    if (!document)\n      return;\n    const el = document.getElementById(id) || document.createElement(\"style\");\n    if (!el.isConnected) {\n      el.id = id;\n      if (options.nonce)\n        el.nonce = options.nonce;\n      if (options.media)\n        el.media = options.media;\n      document.head.appendChild(el);\n    }\n    if (isLoaded.value)\n      return;\n    stop = watch(\n      cssRef,\n      (value) => {\n        el.textContent = value;\n      },\n      { immediate: true }\n    );\n    isLoaded.value = true;\n  };\n  const unload = () => {\n    if (!document || !isLoaded.value)\n      return;\n    stop();\n    document.head.removeChild(document.getElementById(id));\n    isLoaded.value = false;\n  };\n  if (immediate && !manual)\n    tryOnMounted(load);\n  if (!manual)\n    tryOnScopeDispose(unload);\n  return {\n    id,\n    css: cssRef,\n    unload,\n    load,\n    isLoaded: readonly(isLoaded)\n  };\n}\n\nfunction useSwipe(target, options = {}) {\n  const {\n    threshold = 50,\n    onSwipe,\n    onSwipeEnd,\n    onSwipeStart,\n    passive = true\n  } = options;\n  const coordsStart = reactive({ x: 0, y: 0 });\n  const coordsEnd = reactive({ x: 0, y: 0 });\n  const diffX = computed(() => coordsStart.x - coordsEnd.x);\n  const diffY = computed(() => coordsStart.y - coordsEnd.y);\n  const { max, abs } = Math;\n  const isThresholdExceeded = computed(() => max(abs(diffX.value), abs(diffY.value)) >= threshold);\n  const isSwiping = shallowRef(false);\n  const direction = computed(() => {\n    if (!isThresholdExceeded.value)\n      return \"none\";\n    if (abs(diffX.value) > abs(diffY.value)) {\n      return diffX.value > 0 ? \"left\" : \"right\";\n    } else {\n      return diffY.value > 0 ? \"up\" : \"down\";\n    }\n  });\n  const getTouchEventCoords = (e) => [e.touches[0].clientX, e.touches[0].clientY];\n  const updateCoordsStart = (x, y) => {\n    coordsStart.x = x;\n    coordsStart.y = y;\n  };\n  const updateCoordsEnd = (x, y) => {\n    coordsEnd.x = x;\n    coordsEnd.y = y;\n  };\n  const listenerOptions = { passive, capture: !passive };\n  const onTouchEnd = (e) => {\n    if (isSwiping.value)\n      onSwipeEnd == null ? void 0 : onSwipeEnd(e, direction.value);\n    isSwiping.value = false;\n  };\n  const stops = [\n    useEventListener(target, \"touchstart\", (e) => {\n      if (e.touches.length !== 1)\n        return;\n      const [x, y] = getTouchEventCoords(e);\n      updateCoordsStart(x, y);\n      updateCoordsEnd(x, y);\n      onSwipeStart == null ? void 0 : onSwipeStart(e);\n    }, listenerOptions),\n    useEventListener(target, \"touchmove\", (e) => {\n      if (e.touches.length !== 1)\n        return;\n      const [x, y] = getTouchEventCoords(e);\n      updateCoordsEnd(x, y);\n      if (listenerOptions.capture && !listenerOptions.passive && Math.abs(diffX.value) > Math.abs(diffY.value))\n        e.preventDefault();\n      if (!isSwiping.value && isThresholdExceeded.value)\n        isSwiping.value = true;\n      if (isSwiping.value)\n        onSwipe == null ? void 0 : onSwipe(e);\n    }, listenerOptions),\n    useEventListener(target, [\"touchend\", \"touchcancel\"], onTouchEnd, listenerOptions)\n  ];\n  const stop = () => stops.forEach((s) => s());\n  return {\n    isSwiping,\n    direction,\n    coordsStart,\n    coordsEnd,\n    lengthX: diffX,\n    lengthY: diffY,\n    stop,\n    // TODO: Remove in the next major version\n    isPassiveEventSupported: true\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useTemplateRefsList() {\n  const refs = ref([]);\n  refs.value.set = (el) => {\n    if (el)\n      refs.value.push(el);\n  };\n  onBeforeUpdate(() => {\n    refs.value.length = 0;\n  });\n  return refs;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useTextDirection(options = {}) {\n  const {\n    document = defaultDocument,\n    selector = \"html\",\n    observe = false,\n    initialValue = \"ltr\"\n  } = options;\n  function getValue() {\n    var _a, _b;\n    return (_b = (_a = document == null ? void 0 : document.querySelector(selector)) == null ? void 0 : _a.getAttribute(\"dir\")) != null ? _b : initialValue;\n  }\n  const dir = ref(getValue());\n  tryOnMounted(() => dir.value = getValue());\n  if (observe && document) {\n    useMutationObserver(\n      document.querySelector(selector),\n      () => dir.value = getValue(),\n      { attributes: true }\n    );\n  }\n  return computed({\n    get() {\n      return dir.value;\n    },\n    set(v) {\n      var _a, _b;\n      dir.value = v;\n      if (!document)\n        return;\n      if (dir.value)\n        (_a = document.querySelector(selector)) == null ? void 0 : _a.setAttribute(\"dir\", dir.value);\n      else\n        (_b = document.querySelector(selector)) == null ? void 0 : _b.removeAttribute(\"dir\");\n    }\n  });\n}\n\nfunction getRangesFromSelection(selection) {\n  var _a;\n  const rangeCount = (_a = selection.rangeCount) != null ? _a : 0;\n  return Array.from({ length: rangeCount }, (_, i) => selection.getRangeAt(i));\n}\n// @__NO_SIDE_EFFECTS__\nfunction useTextSelection(options = {}) {\n  const {\n    window = defaultWindow\n  } = options;\n  const selection = ref(null);\n  const text = computed(() => {\n    var _a, _b;\n    return (_b = (_a = selection.value) == null ? void 0 : _a.toString()) != null ? _b : \"\";\n  });\n  const ranges = computed(() => selection.value ? getRangesFromSelection(selection.value) : []);\n  const rects = computed(() => ranges.value.map((range) => range.getBoundingClientRect()));\n  function onSelectionChange() {\n    selection.value = null;\n    if (window)\n      selection.value = window.getSelection();\n  }\n  if (window)\n    useEventListener(window.document, \"selectionchange\", onSelectionChange, { passive: true });\n  return {\n    text,\n    rects,\n    ranges,\n    selection\n  };\n}\n\nfunction tryRequestAnimationFrame(window = defaultWindow, fn) {\n  if (window && typeof window.requestAnimationFrame === \"function\") {\n    window.requestAnimationFrame(fn);\n  } else {\n    fn();\n  }\n}\nfunction useTextareaAutosize(options = {}) {\n  var _a, _b;\n  const { window = defaultWindow } = options;\n  const textarea = toRef(options == null ? void 0 : options.element);\n  const input = toRef((_a = options == null ? void 0 : options.input) != null ? _a : \"\");\n  const styleProp = (_b = options == null ? void 0 : options.styleProp) != null ? _b : \"height\";\n  const textareaScrollHeight = shallowRef(1);\n  const textareaOldWidth = shallowRef(0);\n  function triggerResize() {\n    var _a2;\n    if (!textarea.value)\n      return;\n    let height = \"\";\n    textarea.value.style[styleProp] = \"1px\";\n    textareaScrollHeight.value = (_a2 = textarea.value) == null ? void 0 : _a2.scrollHeight;\n    const _styleTarget = toValue(options == null ? void 0 : options.styleTarget);\n    if (_styleTarget)\n      _styleTarget.style[styleProp] = `${textareaScrollHeight.value}px`;\n    else\n      height = `${textareaScrollHeight.value}px`;\n    textarea.value.style[styleProp] = height;\n  }\n  watch([input, textarea], () => nextTick(triggerResize), { immediate: true });\n  watch(textareaScrollHeight, () => {\n    var _a2;\n    return (_a2 = options == null ? void 0 : options.onResize) == null ? void 0 : _a2.call(options);\n  });\n  useResizeObserver(textarea, ([{ contentRect }]) => {\n    if (textareaOldWidth.value === contentRect.width)\n      return;\n    tryRequestAnimationFrame(window, () => {\n      textareaOldWidth.value = contentRect.width;\n      triggerResize();\n    });\n  });\n  if (options == null ? void 0 : options.watch)\n    watch(options.watch, triggerResize, { immediate: true, deep: true });\n  return {\n    textarea,\n    input,\n    triggerResize\n  };\n}\n\nfunction useThrottledRefHistory(source, options = {}) {\n  const { throttle = 200, trailing = true } = options;\n  const filter = throttleFilter(throttle, trailing);\n  const history = useRefHistory(source, { ...options, eventFilter: filter });\n  return {\n    ...history\n  };\n}\n\nconst DEFAULT_UNITS = [\n  { max: 6e4, value: 1e3, name: \"second\" },\n  { max: 276e4, value: 6e4, name: \"minute\" },\n  { max: 72e6, value: 36e5, name: \"hour\" },\n  { max: 5184e5, value: 864e5, name: \"day\" },\n  { max: 24192e5, value: 6048e5, name: \"week\" },\n  { max: 28512e6, value: 2592e6, name: \"month\" },\n  { max: Number.POSITIVE_INFINITY, value: 31536e6, name: \"year\" }\n];\nconst DEFAULT_MESSAGES = {\n  justNow: \"just now\",\n  past: (n) => n.match(/\\d/) ? `${n} ago` : n,\n  future: (n) => n.match(/\\d/) ? `in ${n}` : n,\n  month: (n, past) => n === 1 ? past ? \"last month\" : \"next month\" : `${n} month${n > 1 ? \"s\" : \"\"}`,\n  year: (n, past) => n === 1 ? past ? \"last year\" : \"next year\" : `${n} year${n > 1 ? \"s\" : \"\"}`,\n  day: (n, past) => n === 1 ? past ? \"yesterday\" : \"tomorrow\" : `${n} day${n > 1 ? \"s\" : \"\"}`,\n  week: (n, past) => n === 1 ? past ? \"last week\" : \"next week\" : `${n} week${n > 1 ? \"s\" : \"\"}`,\n  hour: (n) => `${n} hour${n > 1 ? \"s\" : \"\"}`,\n  minute: (n) => `${n} minute${n > 1 ? \"s\" : \"\"}`,\n  second: (n) => `${n} second${n > 1 ? \"s\" : \"\"}`,\n  invalid: \"\"\n};\nfunction DEFAULT_FORMATTER(date) {\n  return date.toISOString().slice(0, 10);\n}\n// @__NO_SIDE_EFFECTS__\nfunction useTimeAgo(time, options = {}) {\n  const {\n    controls: exposeControls = false,\n    updateInterval = 3e4\n  } = options;\n  const { now, ...controls } = useNow({ interval: updateInterval, controls: true });\n  const timeAgo = computed(() => formatTimeAgo(new Date(toValue(time)), options, toValue(now)));\n  if (exposeControls) {\n    return {\n      timeAgo,\n      ...controls\n    };\n  } else {\n    return timeAgo;\n  }\n}\nfunction formatTimeAgo(from, options = {}, now = Date.now()) {\n  var _a;\n  const {\n    max,\n    messages = DEFAULT_MESSAGES,\n    fullDateFormatter = DEFAULT_FORMATTER,\n    units = DEFAULT_UNITS,\n    showSecond = false,\n    rounding = \"round\"\n  } = options;\n  const roundFn = typeof rounding === \"number\" ? (n) => +n.toFixed(rounding) : Math[rounding];\n  const diff = +now - +from;\n  const absDiff = Math.abs(diff);\n  function getValue(diff2, unit) {\n    return roundFn(Math.abs(diff2) / unit.value);\n  }\n  function format(diff2, unit) {\n    const val = getValue(diff2, unit);\n    const past = diff2 > 0;\n    const str = applyFormat(unit.name, val, past);\n    return applyFormat(past ? \"past\" : \"future\", str, past);\n  }\n  function applyFormat(name, val, isPast) {\n    const formatter = messages[name];\n    if (typeof formatter === \"function\")\n      return formatter(val, isPast);\n    return formatter.replace(\"{0}\", val.toString());\n  }\n  if (absDiff < 6e4 && !showSecond)\n    return messages.justNow;\n  if (typeof max === \"number\" && absDiff > max)\n    return fullDateFormatter(new Date(from));\n  if (typeof max === \"string\") {\n    const unitMax = (_a = units.find((i) => i.name === max)) == null ? void 0 : _a.max;\n    if (unitMax && absDiff > unitMax)\n      return fullDateFormatter(new Date(from));\n  }\n  for (const [idx, unit] of units.entries()) {\n    const val = getValue(diff, unit);\n    if (val <= 0 && units[idx - 1])\n      return format(diff, units[idx - 1]);\n    if (absDiff < unit.max)\n      return format(diff, unit);\n  }\n  return messages.invalid;\n}\n\nconst UNITS = [\n  { name: \"year\", ms: 31536e6 },\n  { name: \"month\", ms: 2592e6 },\n  { name: \"week\", ms: 6048e5 },\n  { name: \"day\", ms: 864e5 },\n  { name: \"hour\", ms: 36e5 },\n  { name: \"minute\", ms: 6e4 },\n  { name: \"second\", ms: 1e3 }\n];\nfunction useTimeAgoIntl(time, options = {}) {\n  const {\n    controls: exposeControls = false,\n    updateInterval = 3e4\n  } = options;\n  const { now, ...controls } = useNow({ interval: updateInterval, controls: true });\n  const result = computed(\n    () => getTimeAgoIntlResult(new Date(toValue(time)), options, toValue(now))\n  );\n  const parts = computed(() => result.value.parts);\n  const timeAgoIntl = computed(\n    () => formatTimeAgoIntlParts(parts.value, {\n      ...options,\n      locale: result.value.resolvedLocale\n    })\n  );\n  return exposeControls ? { timeAgoIntl, parts, ...controls } : timeAgoIntl;\n}\nfunction formatTimeAgoIntl(from, options = {}, now = Date.now()) {\n  const { parts, resolvedLocale } = getTimeAgoIntlResult(from, options, now);\n  return formatTimeAgoIntlParts(parts, {\n    ...options,\n    locale: resolvedLocale\n  });\n}\nfunction getTimeAgoIntlResult(from, options = {}, now = Date.now()) {\n  const {\n    locale,\n    relativeTimeFormatOptions = { numeric: \"auto\" }\n  } = options;\n  const rtf = new Intl.RelativeTimeFormat(locale, relativeTimeFormatOptions);\n  const { locale: resolvedLocale } = rtf.resolvedOptions();\n  const diff = +from - +now;\n  const absDiff = Math.abs(diff);\n  for (const { name, ms } of UNITS) {\n    if (absDiff >= ms) {\n      return {\n        resolvedLocale,\n        parts: rtf.formatToParts(Math.round(diff / ms), name)\n      };\n    }\n  }\n  return {\n    resolvedLocale,\n    parts: rtf.formatToParts(0, \"second\")\n  };\n}\nfunction formatTimeAgoIntlParts(parts, options = {}) {\n  const {\n    insertSpace = true,\n    joinParts,\n    locale\n  } = options;\n  if (typeof joinParts === \"function\")\n    return joinParts(parts, locale);\n  if (!insertSpace)\n    return parts.map((part) => part.value).join(\"\");\n  return parts.map((part) => part.value.trim()).join(\" \");\n}\n\nfunction useTimeoutPoll(fn, interval, options = {}) {\n  const {\n    immediate = true,\n    immediateCallback = false\n  } = options;\n  const { start } = useTimeoutFn(loop, interval, { immediate });\n  const isActive = shallowRef(false);\n  async function loop() {\n    if (!isActive.value)\n      return;\n    await fn();\n    start();\n  }\n  function resume() {\n    if (!isActive.value) {\n      isActive.value = true;\n      if (immediateCallback)\n        fn();\n      start();\n    }\n  }\n  function pause() {\n    isActive.value = false;\n  }\n  if (immediate && isClient)\n    resume();\n  tryOnScopeDispose(pause);\n  return {\n    isActive,\n    pause,\n    resume\n  };\n}\n\nfunction useTimestamp(options = {}) {\n  const {\n    controls: exposeControls = false,\n    offset = 0,\n    immediate = true,\n    interval = \"requestAnimationFrame\",\n    callback\n  } = options;\n  const ts = shallowRef(timestamp() + offset);\n  const update = () => ts.value = timestamp() + offset;\n  const cb = callback ? () => {\n    update();\n    callback(ts.value);\n  } : update;\n  const controls = interval === \"requestAnimationFrame\" ? useRafFn(cb, { immediate }) : useIntervalFn(cb, interval, { immediate });\n  if (exposeControls) {\n    return {\n      timestamp: ts,\n      ...controls\n    };\n  } else {\n    return ts;\n  }\n}\n\nfunction useTitle(newTitle = null, options = {}) {\n  var _a, _b, _c;\n  const {\n    document = defaultDocument,\n    restoreOnUnmount = (t) => t\n  } = options;\n  const originalTitle = (_a = document == null ? void 0 : document.title) != null ? _a : \"\";\n  const title = toRef((_b = newTitle != null ? newTitle : document == null ? void 0 : document.title) != null ? _b : null);\n  const isReadonly = !!(newTitle && typeof newTitle === \"function\");\n  function format(t) {\n    if (!(\"titleTemplate\" in options))\n      return t;\n    const template = options.titleTemplate || \"%s\";\n    return typeof template === \"function\" ? template(t) : toValue(template).replace(/%s/g, t);\n  }\n  watch(\n    title,\n    (newValue, oldValue) => {\n      if (newValue !== oldValue && document)\n        document.title = format(newValue != null ? newValue : \"\");\n    },\n    { immediate: true }\n  );\n  if (options.observe && !options.titleTemplate && document && !isReadonly) {\n    useMutationObserver(\n      (_c = document.head) == null ? void 0 : _c.querySelector(\"title\"),\n      () => {\n        if (document && document.title !== title.value)\n          title.value = format(document.title);\n      },\n      { childList: true }\n    );\n  }\n  tryOnScopeDispose(() => {\n    if (restoreOnUnmount) {\n      const restoredTitle = restoreOnUnmount(originalTitle, title.value || \"\");\n      if (restoredTitle != null && document)\n        document.title = restoredTitle;\n    }\n  });\n  return title;\n}\n\nconst _TransitionPresets = {\n  easeInSine: [0.12, 0, 0.39, 0],\n  easeOutSine: [0.61, 1, 0.88, 1],\n  easeInOutSine: [0.37, 0, 0.63, 1],\n  easeInQuad: [0.11, 0, 0.5, 0],\n  easeOutQuad: [0.5, 1, 0.89, 1],\n  easeInOutQuad: [0.45, 0, 0.55, 1],\n  easeInCubic: [0.32, 0, 0.67, 0],\n  easeOutCubic: [0.33, 1, 0.68, 1],\n  easeInOutCubic: [0.65, 0, 0.35, 1],\n  easeInQuart: [0.5, 0, 0.75, 0],\n  easeOutQuart: [0.25, 1, 0.5, 1],\n  easeInOutQuart: [0.76, 0, 0.24, 1],\n  easeInQuint: [0.64, 0, 0.78, 0],\n  easeOutQuint: [0.22, 1, 0.36, 1],\n  easeInOutQuint: [0.83, 0, 0.17, 1],\n  easeInExpo: [0.7, 0, 0.84, 0],\n  easeOutExpo: [0.16, 1, 0.3, 1],\n  easeInOutExpo: [0.87, 0, 0.13, 1],\n  easeInCirc: [0.55, 0, 1, 0.45],\n  easeOutCirc: [0, 0.55, 0.45, 1],\n  easeInOutCirc: [0.85, 0, 0.15, 1],\n  easeInBack: [0.36, 0, 0.66, -0.56],\n  easeOutBack: [0.34, 1.56, 0.64, 1],\n  easeInOutBack: [0.68, -0.6, 0.32, 1.6]\n};\nconst TransitionPresets = /* @__PURE__ */ Object.assign({}, { linear: identity }, _TransitionPresets);\nfunction createEasingFunction([p0, p1, p2, p3]) {\n  const a = (a1, a2) => 1 - 3 * a2 + 3 * a1;\n  const b = (a1, a2) => 3 * a2 - 6 * a1;\n  const c = (a1) => 3 * a1;\n  const calcBezier = (t, a1, a2) => ((a(a1, a2) * t + b(a1, a2)) * t + c(a1)) * t;\n  const getSlope = (t, a1, a2) => 3 * a(a1, a2) * t * t + 2 * b(a1, a2) * t + c(a1);\n  const getTforX = (x) => {\n    let aGuessT = x;\n    for (let i = 0; i < 4; ++i) {\n      const currentSlope = getSlope(aGuessT, p0, p2);\n      if (currentSlope === 0)\n        return aGuessT;\n      const currentX = calcBezier(aGuessT, p0, p2) - x;\n      aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n  };\n  return (x) => p0 === p1 && p2 === p3 ? x : calcBezier(getTforX(x), p1, p3);\n}\nfunction lerp(a, b, alpha) {\n  return a + alpha * (b - a);\n}\nfunction toVec(t) {\n  return (typeof t === \"number\" ? [t] : t) || [];\n}\nfunction executeTransition(source, from, to, options = {}) {\n  var _a, _b;\n  const {\n    window = defaultWindow\n  } = options;\n  const fromVal = toValue(from);\n  const toVal = toValue(to);\n  const v1 = toVec(fromVal);\n  const v2 = toVec(toVal);\n  const duration = (_a = toValue(options.duration)) != null ? _a : 1e3;\n  const startedAt = Date.now();\n  const endAt = Date.now() + duration;\n  const trans = typeof options.transition === \"function\" ? options.transition : (_b = toValue(options.transition)) != null ? _b : identity;\n  const ease = typeof trans === \"function\" ? trans : createEasingFunction(trans);\n  return new Promise((resolve) => {\n    source.value = fromVal;\n    const tick = () => {\n      var _a2;\n      if ((_a2 = options.abort) == null ? void 0 : _a2.call(options)) {\n        resolve();\n        return;\n      }\n      const now = Date.now();\n      const alpha = ease((now - startedAt) / duration);\n      const arr = toVec(source.value).map((n, i) => lerp(v1[i], v2[i], alpha));\n      if (Array.isArray(source.value))\n        source.value = arr.map((n, i) => {\n          var _a3, _b2;\n          return lerp((_a3 = v1[i]) != null ? _a3 : 0, (_b2 = v2[i]) != null ? _b2 : 0, alpha);\n        });\n      else if (typeof source.value === \"number\")\n        source.value = arr[0];\n      if (now < endAt) {\n        window == null ? void 0 : window.requestAnimationFrame(tick);\n      } else {\n        source.value = toVal;\n        resolve();\n      }\n    };\n    tick();\n  });\n}\nfunction useTransition(source, options = {}) {\n  let currentId = 0;\n  const sourceVal = () => {\n    const v = toValue(source);\n    return typeof v === \"number\" ? v : v.map(toValue);\n  };\n  const outputRef = ref(sourceVal());\n  watch(sourceVal, async (to) => {\n    var _a, _b;\n    if (toValue(options.disabled))\n      return;\n    const id = ++currentId;\n    if (options.delay)\n      await promiseTimeout(toValue(options.delay));\n    if (id !== currentId)\n      return;\n    const toVal = Array.isArray(to) ? to.map(toValue) : toValue(to);\n    (_a = options.onStarted) == null ? void 0 : _a.call(options);\n    await executeTransition(outputRef, outputRef.value, toVal, {\n      ...options,\n      abort: () => {\n        var _a2;\n        return id !== currentId || ((_a2 = options.abort) == null ? void 0 : _a2.call(options));\n      }\n    });\n    (_b = options.onFinished) == null ? void 0 : _b.call(options);\n  }, { deep: true });\n  watch(() => toValue(options.disabled), (disabled) => {\n    if (disabled) {\n      currentId++;\n      outputRef.value = sourceVal();\n    }\n  });\n  tryOnScopeDispose(() => {\n    currentId++;\n  });\n  return computed(() => toValue(options.disabled) ? sourceVal() : outputRef.value);\n}\n\nfunction useUrlSearchParams(mode = \"history\", options = {}) {\n  const {\n    initialValue = {},\n    removeNullishValues = true,\n    removeFalsyValues = false,\n    write: enableWrite = true,\n    writeMode = \"replace\",\n    window = defaultWindow,\n    stringify = (params) => params.toString()\n  } = options;\n  if (!window)\n    return reactive(initialValue);\n  const state = reactive({});\n  function getRawParams() {\n    if (mode === \"history\") {\n      return window.location.search || \"\";\n    } else if (mode === \"hash\") {\n      const hash = window.location.hash || \"\";\n      const index = hash.indexOf(\"?\");\n      return index > 0 ? hash.slice(index) : \"\";\n    } else {\n      return (window.location.hash || \"\").replace(/^#/, \"\");\n    }\n  }\n  function constructQuery(params) {\n    const stringified = stringify(params);\n    if (mode === \"history\")\n      return `${stringified ? `?${stringified}` : \"\"}${window.location.hash || \"\"}`;\n    if (mode === \"hash-params\")\n      return `${window.location.search || \"\"}${stringified ? `#${stringified}` : \"\"}`;\n    const hash = window.location.hash || \"#\";\n    const index = hash.indexOf(\"?\");\n    if (index > 0)\n      return `${window.location.search || \"\"}${hash.slice(0, index)}${stringified ? `?${stringified}` : \"\"}`;\n    return `${window.location.search || \"\"}${hash}${stringified ? `?${stringified}` : \"\"}`;\n  }\n  function read() {\n    return new URLSearchParams(getRawParams());\n  }\n  function updateState(params) {\n    const unusedKeys = new Set(Object.keys(state));\n    for (const key of params.keys()) {\n      const paramsForKey = params.getAll(key);\n      state[key] = paramsForKey.length > 1 ? paramsForKey : params.get(key) || \"\";\n      unusedKeys.delete(key);\n    }\n    Array.from(unusedKeys).forEach((key) => delete state[key]);\n  }\n  const { pause, resume } = pausableWatch(\n    state,\n    () => {\n      const params = new URLSearchParams(\"\");\n      Object.keys(state).forEach((key) => {\n        const mapEntry = state[key];\n        if (Array.isArray(mapEntry))\n          mapEntry.forEach((value) => params.append(key, value));\n        else if (removeNullishValues && mapEntry == null)\n          params.delete(key);\n        else if (removeFalsyValues && !mapEntry)\n          params.delete(key);\n        else\n          params.set(key, mapEntry);\n      });\n      write(params, false);\n    },\n    { deep: true }\n  );\n  function write(params, shouldUpdate, shouldWriteHistory = true) {\n    pause();\n    if (shouldUpdate)\n      updateState(params);\n    if (writeMode === \"replace\") {\n      window.history.replaceState(\n        window.history.state,\n        window.document.title,\n        window.location.pathname + constructQuery(params)\n      );\n    } else {\n      if (shouldWriteHistory) {\n        window.history.pushState(\n          window.history.state,\n          window.document.title,\n          window.location.pathname + constructQuery(params)\n        );\n      }\n    }\n    nextTick(() => resume());\n  }\n  function onChanged() {\n    if (!enableWrite)\n      return;\n    write(read(), true, false);\n  }\n  const listenerOptions = { passive: true };\n  useEventListener(window, \"popstate\", onChanged, listenerOptions);\n  if (mode !== \"history\")\n    useEventListener(window, \"hashchange\", onChanged, listenerOptions);\n  const initial = read();\n  if (initial.keys().next().value)\n    updateState(initial);\n  else\n    Object.assign(state, initialValue);\n  return state;\n}\n\nfunction useUserMedia(options = {}) {\n  var _a, _b;\n  const enabled = shallowRef((_a = options.enabled) != null ? _a : false);\n  const autoSwitch = shallowRef((_b = options.autoSwitch) != null ? _b : true);\n  const constraints = ref(options.constraints);\n  const { navigator = defaultNavigator } = options;\n  const isSupported = useSupported(() => {\n    var _a2;\n    return (_a2 = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : _a2.getUserMedia;\n  });\n  const stream = shallowRef();\n  function getDeviceOptions(type) {\n    switch (type) {\n      case \"video\": {\n        if (constraints.value)\n          return constraints.value.video || false;\n        break;\n      }\n      case \"audio\": {\n        if (constraints.value)\n          return constraints.value.audio || false;\n        break;\n      }\n    }\n  }\n  async function _start() {\n    if (!isSupported.value || stream.value)\n      return;\n    stream.value = await navigator.mediaDevices.getUserMedia({\n      video: getDeviceOptions(\"video\"),\n      audio: getDeviceOptions(\"audio\")\n    });\n    return stream.value;\n  }\n  function _stop() {\n    var _a2;\n    (_a2 = stream.value) == null ? void 0 : _a2.getTracks().forEach((t) => t.stop());\n    stream.value = void 0;\n  }\n  function stop() {\n    _stop();\n    enabled.value = false;\n  }\n  async function start() {\n    await _start();\n    if (stream.value)\n      enabled.value = true;\n    return stream.value;\n  }\n  async function restart() {\n    _stop();\n    return await start();\n  }\n  watch(\n    enabled,\n    (v) => {\n      if (v)\n        _start();\n      else _stop();\n    },\n    { immediate: true }\n  );\n  watch(\n    constraints,\n    () => {\n      if (autoSwitch.value && stream.value)\n        restart();\n    },\n    { immediate: true }\n  );\n  tryOnScopeDispose(() => {\n    stop();\n  });\n  return {\n    isSupported,\n    stream,\n    start,\n    stop,\n    restart,\n    constraints,\n    enabled,\n    autoSwitch\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useVModel(props, key, emit, options = {}) {\n  var _a, _b, _c;\n  const {\n    clone = false,\n    passive = false,\n    eventName,\n    deep = false,\n    defaultValue,\n    shouldEmit\n  } = options;\n  const vm = getCurrentInstance();\n  const _emit = emit || (vm == null ? void 0 : vm.emit) || ((_a = vm == null ? void 0 : vm.$emit) == null ? void 0 : _a.bind(vm)) || ((_c = (_b = vm == null ? void 0 : vm.proxy) == null ? void 0 : _b.$emit) == null ? void 0 : _c.bind(vm == null ? void 0 : vm.proxy));\n  let event = eventName;\n  if (!key) {\n    key = \"modelValue\";\n  }\n  event = event || `update:${key.toString()}`;\n  const cloneFn = (val) => !clone ? val : typeof clone === \"function\" ? clone(val) : cloneFnJSON(val);\n  const getValue = () => isDef(props[key]) ? cloneFn(props[key]) : defaultValue;\n  const triggerEmit = (value) => {\n    if (shouldEmit) {\n      if (shouldEmit(value))\n        _emit(event, value);\n    } else {\n      _emit(event, value);\n    }\n  };\n  if (passive) {\n    const initialValue = getValue();\n    const proxy = ref(initialValue);\n    let isUpdating = false;\n    watch(\n      () => props[key],\n      (v) => {\n        if (!isUpdating) {\n          isUpdating = true;\n          proxy.value = cloneFn(v);\n          nextTick(() => isUpdating = false);\n        }\n      }\n    );\n    watch(\n      proxy,\n      (v) => {\n        if (!isUpdating && (v !== props[key] || deep))\n          triggerEmit(v);\n      },\n      { deep }\n    );\n    return proxy;\n  } else {\n    return computed({\n      get() {\n        return getValue();\n      },\n      set(value) {\n        triggerEmit(value);\n      }\n    });\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useVModels(props, emit, options = {}) {\n  const ret = {};\n  for (const key in props) {\n    ret[key] = useVModel(\n      props,\n      key,\n      emit,\n      options\n    );\n  }\n  return ret;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useVibrate(options) {\n  const {\n    pattern = [],\n    interval = 0,\n    navigator = defaultNavigator\n  } = options || {};\n  const isSupported = useSupported(() => typeof navigator !== \"undefined\" && \"vibrate\" in navigator);\n  const patternRef = toRef(pattern);\n  let intervalControls;\n  const vibrate = (pattern2 = patternRef.value) => {\n    if (isSupported.value)\n      navigator.vibrate(pattern2);\n  };\n  const stop = () => {\n    if (isSupported.value)\n      navigator.vibrate(0);\n    intervalControls == null ? void 0 : intervalControls.pause();\n  };\n  if (interval > 0) {\n    intervalControls = useIntervalFn(\n      vibrate,\n      interval,\n      {\n        immediate: false,\n        immediateCallback: false\n      }\n    );\n  }\n  return {\n    isSupported,\n    pattern,\n    intervalControls,\n    vibrate,\n    stop\n  };\n}\n\nfunction useVirtualList(list, options) {\n  const { containerStyle, wrapperProps, scrollTo, calculateRange, currentList, containerRef } = \"itemHeight\" in options ? useVerticalVirtualList(options, list) : useHorizontalVirtualList(options, list);\n  return {\n    list: currentList,\n    scrollTo,\n    containerProps: {\n      ref: containerRef,\n      onScroll: () => {\n        calculateRange();\n      },\n      style: containerStyle\n    },\n    wrapperProps\n  };\n}\nfunction useVirtualListResources(list) {\n  const containerRef = shallowRef(null);\n  const size = useElementSize(containerRef);\n  const currentList = ref([]);\n  const source = shallowRef(list);\n  const state = ref({ start: 0, end: 10 });\n  return { state, source, currentList, size, containerRef };\n}\nfunction createGetViewCapacity(state, source, itemSize) {\n  return (containerSize) => {\n    if (typeof itemSize === \"number\")\n      return Math.ceil(containerSize / itemSize);\n    const { start = 0 } = state.value;\n    let sum = 0;\n    let capacity = 0;\n    for (let i = start; i < source.value.length; i++) {\n      const size = itemSize(i);\n      sum += size;\n      capacity = i;\n      if (sum > containerSize)\n        break;\n    }\n    return capacity - start;\n  };\n}\nfunction createGetOffset(source, itemSize) {\n  return (scrollDirection) => {\n    if (typeof itemSize === \"number\")\n      return Math.floor(scrollDirection / itemSize) + 1;\n    let sum = 0;\n    let offset = 0;\n    for (let i = 0; i < source.value.length; i++) {\n      const size = itemSize(i);\n      sum += size;\n      if (sum >= scrollDirection) {\n        offset = i;\n        break;\n      }\n    }\n    return offset + 1;\n  };\n}\nfunction createCalculateRange(type, overscan, getOffset, getViewCapacity, { containerRef, state, currentList, source }) {\n  return () => {\n    const element = containerRef.value;\n    if (element) {\n      const offset = getOffset(type === \"vertical\" ? element.scrollTop : element.scrollLeft);\n      const viewCapacity = getViewCapacity(type === \"vertical\" ? element.clientHeight : element.clientWidth);\n      const from = offset - overscan;\n      const to = offset + viewCapacity + overscan;\n      state.value = {\n        start: from < 0 ? 0 : from,\n        end: to > source.value.length ? source.value.length : to\n      };\n      currentList.value = source.value.slice(state.value.start, state.value.end).map((ele, index) => ({\n        data: ele,\n        index: index + state.value.start\n      }));\n    }\n  };\n}\nfunction createGetDistance(itemSize, source) {\n  return (index) => {\n    if (typeof itemSize === \"number\") {\n      const size2 = index * itemSize;\n      return size2;\n    }\n    const size = source.value.slice(0, index).reduce((sum, _, i) => sum + itemSize(i), 0);\n    return size;\n  };\n}\nfunction useWatchForSizes(size, list, containerRef, calculateRange) {\n  watch([size.width, size.height, () => toValue(list), containerRef], () => {\n    calculateRange();\n  });\n}\nfunction createComputedTotalSize(itemSize, source) {\n  return computed(() => {\n    if (typeof itemSize === \"number\")\n      return source.value.length * itemSize;\n    return source.value.reduce((sum, _, index) => sum + itemSize(index), 0);\n  });\n}\nconst scrollToDictionaryForElementScrollKey = {\n  horizontal: \"scrollLeft\",\n  vertical: \"scrollTop\"\n};\nfunction createScrollTo(type, calculateRange, getDistance, containerRef) {\n  return (index) => {\n    if (containerRef.value) {\n      containerRef.value[scrollToDictionaryForElementScrollKey[type]] = getDistance(index);\n      calculateRange();\n    }\n  };\n}\nfunction useHorizontalVirtualList(options, list) {\n  const resources = useVirtualListResources(list);\n  const { state, source, currentList, size, containerRef } = resources;\n  const containerStyle = { overflowX: \"auto\" };\n  const { itemWidth, overscan = 5 } = options;\n  const getViewCapacity = createGetViewCapacity(state, source, itemWidth);\n  const getOffset = createGetOffset(source, itemWidth);\n  const calculateRange = createCalculateRange(\"horizontal\", overscan, getOffset, getViewCapacity, resources);\n  const getDistanceLeft = createGetDistance(itemWidth, source);\n  const offsetLeft = computed(() => getDistanceLeft(state.value.start));\n  const totalWidth = createComputedTotalSize(itemWidth, source);\n  useWatchForSizes(size, list, containerRef, calculateRange);\n  const scrollTo = createScrollTo(\"horizontal\", calculateRange, getDistanceLeft, containerRef);\n  const wrapperProps = computed(() => {\n    return {\n      style: {\n        height: \"100%\",\n        width: `${totalWidth.value - offsetLeft.value}px`,\n        marginLeft: `${offsetLeft.value}px`,\n        display: \"flex\"\n      }\n    };\n  });\n  return {\n    scrollTo,\n    calculateRange,\n    wrapperProps,\n    containerStyle,\n    currentList,\n    containerRef\n  };\n}\nfunction useVerticalVirtualList(options, list) {\n  const resources = useVirtualListResources(list);\n  const { state, source, currentList, size, containerRef } = resources;\n  const containerStyle = { overflowY: \"auto\" };\n  const { itemHeight, overscan = 5 } = options;\n  const getViewCapacity = createGetViewCapacity(state, source, itemHeight);\n  const getOffset = createGetOffset(source, itemHeight);\n  const calculateRange = createCalculateRange(\"vertical\", overscan, getOffset, getViewCapacity, resources);\n  const getDistanceTop = createGetDistance(itemHeight, source);\n  const offsetTop = computed(() => getDistanceTop(state.value.start));\n  const totalHeight = createComputedTotalSize(itemHeight, source);\n  useWatchForSizes(size, list, containerRef, calculateRange);\n  const scrollTo = createScrollTo(\"vertical\", calculateRange, getDistanceTop, containerRef);\n  const wrapperProps = computed(() => {\n    return {\n      style: {\n        width: \"100%\",\n        height: `${totalHeight.value - offsetTop.value}px`,\n        marginTop: `${offsetTop.value}px`\n      }\n    };\n  });\n  return {\n    calculateRange,\n    scrollTo,\n    containerStyle,\n    wrapperProps,\n    currentList,\n    containerRef\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useWakeLock(options = {}) {\n  const {\n    navigator = defaultNavigator,\n    document = defaultDocument\n  } = options;\n  const requestedType = shallowRef(false);\n  const sentinel = shallowRef(null);\n  const documentVisibility = useDocumentVisibility({ document });\n  const isSupported = useSupported(() => navigator && \"wakeLock\" in navigator);\n  const isActive = computed(() => !!sentinel.value && documentVisibility.value === \"visible\");\n  if (isSupported.value) {\n    useEventListener(sentinel, \"release\", () => {\n      var _a, _b;\n      requestedType.value = (_b = (_a = sentinel.value) == null ? void 0 : _a.type) != null ? _b : false;\n    }, { passive: true });\n    whenever(\n      () => documentVisibility.value === \"visible\" && (document == null ? void 0 : document.visibilityState) === \"visible\" && requestedType.value,\n      (type) => {\n        requestedType.value = false;\n        forceRequest(type);\n      }\n    );\n  }\n  async function forceRequest(type) {\n    var _a;\n    await ((_a = sentinel.value) == null ? void 0 : _a.release());\n    sentinel.value = isSupported.value ? await navigator.wakeLock.request(type) : null;\n  }\n  async function request(type) {\n    if (documentVisibility.value === \"visible\")\n      await forceRequest(type);\n    else\n      requestedType.value = type;\n  }\n  async function release() {\n    requestedType.value = false;\n    const s = sentinel.value;\n    sentinel.value = null;\n    await (s == null ? void 0 : s.release());\n  }\n  return {\n    sentinel,\n    isSupported,\n    isActive,\n    request,\n    forceRequest,\n    release\n  };\n}\n\nfunction useWebNotification(options = {}) {\n  const {\n    window = defaultWindow,\n    requestPermissions: _requestForPermissions = true\n  } = options;\n  const defaultWebNotificationOptions = options;\n  const isSupported = useSupported(() => {\n    if (!window || !(\"Notification\" in window))\n      return false;\n    if (Notification.permission === \"granted\")\n      return true;\n    try {\n      const notification2 = new Notification(\"\");\n      notification2.onshow = () => {\n        notification2.close();\n      };\n    } catch (e) {\n      if (e.name === \"TypeError\")\n        return false;\n    }\n    return true;\n  });\n  const permissionGranted = shallowRef(isSupported.value && \"permission\" in Notification && Notification.permission === \"granted\");\n  const notification = ref(null);\n  const ensurePermissions = async () => {\n    if (!isSupported.value)\n      return;\n    if (!permissionGranted.value && Notification.permission !== \"denied\") {\n      const result = await Notification.requestPermission();\n      if (result === \"granted\")\n        permissionGranted.value = true;\n    }\n    return permissionGranted.value;\n  };\n  const { on: onClick, trigger: clickTrigger } = createEventHook();\n  const { on: onShow, trigger: showTrigger } = createEventHook();\n  const { on: onError, trigger: errorTrigger } = createEventHook();\n  const { on: onClose, trigger: closeTrigger } = createEventHook();\n  const show = async (overrides) => {\n    if (!isSupported.value || !permissionGranted.value)\n      return;\n    const options2 = Object.assign({}, defaultWebNotificationOptions, overrides);\n    notification.value = new Notification(options2.title || \"\", options2);\n    notification.value.onclick = clickTrigger;\n    notification.value.onshow = showTrigger;\n    notification.value.onerror = errorTrigger;\n    notification.value.onclose = closeTrigger;\n    return notification.value;\n  };\n  const close = () => {\n    if (notification.value)\n      notification.value.close();\n    notification.value = null;\n  };\n  if (_requestForPermissions)\n    tryOnMounted(ensurePermissions);\n  tryOnScopeDispose(close);\n  if (isSupported.value && window) {\n    const document = window.document;\n    useEventListener(document, \"visibilitychange\", (e) => {\n      e.preventDefault();\n      if (document.visibilityState === \"visible\") {\n        close();\n      }\n    });\n  }\n  return {\n    isSupported,\n    notification,\n    ensurePermissions,\n    permissionGranted,\n    show,\n    close,\n    onClick,\n    onShow,\n    onError,\n    onClose\n  };\n}\n\nconst DEFAULT_PING_MESSAGE = \"ping\";\nfunction resolveNestedOptions(options) {\n  if (options === true)\n    return {};\n  return options;\n}\nfunction useWebSocket(url, options = {}) {\n  const {\n    onConnected,\n    onDisconnected,\n    onError,\n    onMessage,\n    immediate = true,\n    autoConnect = true,\n    autoClose = true,\n    protocols = []\n  } = options;\n  const data = ref(null);\n  const status = shallowRef(\"CLOSED\");\n  const wsRef = ref();\n  const urlRef = toRef(url);\n  let heartbeatPause;\n  let heartbeatResume;\n  let explicitlyClosed = false;\n  let retried = 0;\n  let bufferedData = [];\n  let retryTimeout;\n  let pongTimeoutWait;\n  const _sendBuffer = () => {\n    if (bufferedData.length && wsRef.value && status.value === \"OPEN\") {\n      for (const buffer of bufferedData)\n        wsRef.value.send(buffer);\n      bufferedData = [];\n    }\n  };\n  const resetRetry = () => {\n    if (retryTimeout != null) {\n      clearTimeout(retryTimeout);\n      retryTimeout = void 0;\n    }\n  };\n  const resetHeartbeat = () => {\n    clearTimeout(pongTimeoutWait);\n    pongTimeoutWait = void 0;\n  };\n  const close = (code = 1e3, reason) => {\n    resetRetry();\n    if (!isClient && !isWorker || !wsRef.value)\n      return;\n    explicitlyClosed = true;\n    resetHeartbeat();\n    heartbeatPause == null ? void 0 : heartbeatPause();\n    wsRef.value.close(code, reason);\n    wsRef.value = void 0;\n  };\n  const send = (data2, useBuffer = true) => {\n    if (!wsRef.value || status.value !== \"OPEN\") {\n      if (useBuffer)\n        bufferedData.push(data2);\n      return false;\n    }\n    _sendBuffer();\n    wsRef.value.send(data2);\n    return true;\n  };\n  const _init = () => {\n    if (explicitlyClosed || typeof urlRef.value === \"undefined\")\n      return;\n    const ws = new WebSocket(urlRef.value, protocols);\n    wsRef.value = ws;\n    status.value = \"CONNECTING\";\n    ws.onopen = () => {\n      status.value = \"OPEN\";\n      retried = 0;\n      onConnected == null ? void 0 : onConnected(ws);\n      heartbeatResume == null ? void 0 : heartbeatResume();\n      _sendBuffer();\n    };\n    ws.onclose = (ev) => {\n      status.value = \"CLOSED\";\n      resetHeartbeat();\n      heartbeatPause == null ? void 0 : heartbeatPause();\n      onDisconnected == null ? void 0 : onDisconnected(ws, ev);\n      if (!explicitlyClosed && options.autoReconnect && (wsRef.value == null || ws === wsRef.value)) {\n        const {\n          retries = -1,\n          delay = 1e3,\n          onFailed\n        } = resolveNestedOptions(options.autoReconnect);\n        const checkRetires = typeof retries === \"function\" ? retries : () => typeof retries === \"number\" && (retries < 0 || retried < retries);\n        if (checkRetires(retried)) {\n          retried += 1;\n          retryTimeout = setTimeout(_init, delay);\n        } else {\n          onFailed == null ? void 0 : onFailed();\n        }\n      }\n    };\n    ws.onerror = (e) => {\n      onError == null ? void 0 : onError(ws, e);\n    };\n    ws.onmessage = (e) => {\n      if (options.heartbeat) {\n        resetHeartbeat();\n        const {\n          message = DEFAULT_PING_MESSAGE,\n          responseMessage = message\n        } = resolveNestedOptions(options.heartbeat);\n        if (e.data === toValue(responseMessage))\n          return;\n      }\n      data.value = e.data;\n      onMessage == null ? void 0 : onMessage(ws, e);\n    };\n  };\n  if (options.heartbeat) {\n    const {\n      message = DEFAULT_PING_MESSAGE,\n      interval = 1e3,\n      pongTimeout = 1e3\n    } = resolveNestedOptions(options.heartbeat);\n    const { pause, resume } = useIntervalFn(\n      () => {\n        send(toValue(message), false);\n        if (pongTimeoutWait != null)\n          return;\n        pongTimeoutWait = setTimeout(() => {\n          close();\n          explicitlyClosed = false;\n        }, pongTimeout);\n      },\n      interval,\n      { immediate: false }\n    );\n    heartbeatPause = pause;\n    heartbeatResume = resume;\n  }\n  if (autoClose) {\n    if (isClient)\n      useEventListener(\"beforeunload\", () => close(), { passive: true });\n    tryOnScopeDispose(close);\n  }\n  const open = () => {\n    if (!isClient && !isWorker)\n      return;\n    close();\n    explicitlyClosed = false;\n    retried = 0;\n    _init();\n  };\n  if (immediate)\n    open();\n  if (autoConnect)\n    watch(urlRef, open);\n  return {\n    data,\n    status,\n    close,\n    send,\n    open,\n    ws: wsRef\n  };\n}\n\nfunction useWebWorker(arg0, workerOptions, options) {\n  const {\n    window = defaultWindow\n  } = options != null ? options : {};\n  const data = ref(null);\n  const worker = shallowRef();\n  const post = (...args) => {\n    if (!worker.value)\n      return;\n    worker.value.postMessage(...args);\n  };\n  const terminate = function terminate2() {\n    if (!worker.value)\n      return;\n    worker.value.terminate();\n  };\n  if (window) {\n    if (typeof arg0 === \"string\")\n      worker.value = new Worker(arg0, workerOptions);\n    else if (typeof arg0 === \"function\")\n      worker.value = arg0();\n    else\n      worker.value = arg0;\n    worker.value.onmessage = (e) => {\n      data.value = e.data;\n    };\n    tryOnScopeDispose(() => {\n      if (worker.value)\n        worker.value.terminate();\n    });\n  }\n  return {\n    data,\n    post,\n    terminate,\n    worker\n  };\n}\n\nfunction depsParser(deps, localDeps) {\n  if (deps.length === 0 && localDeps.length === 0)\n    return \"\";\n  const depsString = deps.map((dep) => `'${dep}'`).toString();\n  const depsFunctionString = localDeps.filter((dep) => typeof dep === \"function\").map((fn) => {\n    const str = fn.toString();\n    if (str.trim().startsWith(\"function\")) {\n      return str;\n    } else {\n      const name = fn.name;\n      return `const ${name} = ${str}`;\n    }\n  }).join(\";\");\n  const importString = `importScripts(${depsString});`;\n  return `${depsString.trim() === \"\" ? \"\" : importString} ${depsFunctionString}`;\n}\n\nfunction jobRunner(userFunc) {\n  return (e) => {\n    const userFuncArgs = e.data[0];\n    return Promise.resolve(userFunc.apply(void 0, userFuncArgs)).then((result) => {\n      postMessage([\"SUCCESS\", result]);\n    }).catch((error) => {\n      postMessage([\"ERROR\", error]);\n    });\n  };\n}\n\nfunction createWorkerBlobUrl(fn, deps, localDeps) {\n  const blobCode = `${depsParser(deps, localDeps)}; onmessage=(${jobRunner})(${fn})`;\n  const blob = new Blob([blobCode], { type: \"text/javascript\" });\n  const url = URL.createObjectURL(blob);\n  return url;\n}\n\nfunction useWebWorkerFn(fn, options = {}) {\n  const {\n    dependencies = [],\n    localDependencies = [],\n    timeout,\n    window = defaultWindow\n  } = options;\n  const worker = ref();\n  const workerStatus = shallowRef(\"PENDING\");\n  const promise = ref({});\n  const timeoutId = shallowRef();\n  const workerTerminate = (status = \"PENDING\") => {\n    if (worker.value && worker.value._url && window) {\n      worker.value.terminate();\n      URL.revokeObjectURL(worker.value._url);\n      promise.value = {};\n      worker.value = void 0;\n      window.clearTimeout(timeoutId.value);\n      workerStatus.value = status;\n    }\n  };\n  workerTerminate();\n  tryOnScopeDispose(workerTerminate);\n  const generateWorker = () => {\n    const blobUrl = createWorkerBlobUrl(fn, dependencies, localDependencies);\n    const newWorker = new Worker(blobUrl);\n    newWorker._url = blobUrl;\n    newWorker.onmessage = (e) => {\n      const { resolve = () => {\n      }, reject = () => {\n      } } = promise.value;\n      const [status, result] = e.data;\n      switch (status) {\n        case \"SUCCESS\":\n          resolve(result);\n          workerTerminate(status);\n          break;\n        default:\n          reject(result);\n          workerTerminate(\"ERROR\");\n          break;\n      }\n    };\n    newWorker.onerror = (e) => {\n      const { reject = () => {\n      } } = promise.value;\n      e.preventDefault();\n      reject(e);\n      workerTerminate(\"ERROR\");\n    };\n    if (timeout) {\n      timeoutId.value = setTimeout(\n        () => workerTerminate(\"TIMEOUT_EXPIRED\"),\n        timeout\n      );\n    }\n    return newWorker;\n  };\n  const callWorker = (...fnArgs) => new Promise((resolve, reject) => {\n    var _a;\n    promise.value = {\n      resolve,\n      reject\n    };\n    (_a = worker.value) == null ? void 0 : _a.postMessage([[...fnArgs]]);\n    workerStatus.value = \"RUNNING\";\n  });\n  const workerFn = (...fnArgs) => {\n    if (workerStatus.value === \"RUNNING\") {\n      console.error(\n        \"[useWebWorkerFn] You can only run one instance of the worker at a time.\"\n      );\n      return Promise.reject();\n    }\n    worker.value = generateWorker();\n    return callWorker(...fnArgs);\n  };\n  return {\n    workerFn,\n    workerStatus,\n    workerTerminate\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useWindowFocus(options = {}) {\n  const { window = defaultWindow } = options;\n  if (!window)\n    return shallowRef(false);\n  const focused = shallowRef(window.document.hasFocus());\n  const listenerOptions = { passive: true };\n  useEventListener(window, \"blur\", () => {\n    focused.value = false;\n  }, listenerOptions);\n  useEventListener(window, \"focus\", () => {\n    focused.value = true;\n  }, listenerOptions);\n  return focused;\n}\n\nfunction useWindowScroll(options = {}) {\n  const { window = defaultWindow, ...rest } = options;\n  return useScroll(window, rest);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useWindowSize(options = {}) {\n  const {\n    window = defaultWindow,\n    initialWidth = Number.POSITIVE_INFINITY,\n    initialHeight = Number.POSITIVE_INFINITY,\n    listenOrientation = true,\n    includeScrollbar = true,\n    type = \"inner\"\n  } = options;\n  const width = shallowRef(initialWidth);\n  const height = shallowRef(initialHeight);\n  const update = () => {\n    if (window) {\n      if (type === \"outer\") {\n        width.value = window.outerWidth;\n        height.value = window.outerHeight;\n      } else if (type === \"visual\" && window.visualViewport) {\n        const { width: visualViewportWidth, height: visualViewportHeight, scale } = window.visualViewport;\n        width.value = Math.round(visualViewportWidth * scale);\n        height.value = Math.round(visualViewportHeight * scale);\n      } else if (includeScrollbar) {\n        width.value = window.innerWidth;\n        height.value = window.innerHeight;\n      } else {\n        width.value = window.document.documentElement.clientWidth;\n        height.value = window.document.documentElement.clientHeight;\n      }\n    }\n  };\n  update();\n  tryOnMounted(update);\n  const listenerOptions = { passive: true };\n  useEventListener(\"resize\", update, listenerOptions);\n  if (window && type === \"visual\" && window.visualViewport) {\n    useEventListener(window.visualViewport, \"resize\", update, listenerOptions);\n  }\n  if (listenOrientation) {\n    const matches = useMediaQuery(\"(orientation: portrait)\");\n    watch(matches, () => update());\n  }\n  return { width, height };\n}\n\nexport { DefaultMagicKeysAliasMap, StorageSerializers, TransitionPresets, computedAsync as asyncComputed, breakpointsAntDesign, breakpointsBootstrapV5, breakpointsElement, breakpointsMasterCss, breakpointsPrimeFlex, breakpointsQuasar, breakpointsSematic, breakpointsTailwind, breakpointsVuetify, breakpointsVuetifyV2, breakpointsVuetifyV3, cloneFnJSON, computedAsync, computedInject, createFetch, createReusableTemplate, createTemplatePromise, createUnrefFn, customStorageEventName, defaultDocument, defaultLocation, defaultNavigator, defaultWindow, executeTransition, formatTimeAgo, formatTimeAgoIntl, formatTimeAgoIntlParts, getSSRHandler, mapGamepadToXbox360Controller, onClickOutside, onElementRemoval, onKeyDown, onKeyPressed, onKeyStroke, onKeyUp, onLongPress, onStartTyping, provideSSRWidth, setSSRHandler, templateRef, unrefElement, useActiveElement, useAnimate, useAsyncQueue, useAsyncState, useBase64, useBattery, useBluetooth, useBreakpoints, useBroadcastChannel, useBrowserLocation, useCached, useClipboard, useClipboardItems, useCloned, useColorMode, useConfirmDialog, useCountdown, useCssVar, useCurrentElement, useCycleList, useDark, useDebouncedRefHistory, useDeviceMotion, useDeviceOrientation, useDevicePixelRatio, useDevicesList, useDisplayMedia, useDocumentVisibility, useDraggable, useDropZone, useElementBounding, useElementByPoint, useElementHover, useElementSize, useElementVisibility, useEventBus, useEventListener, useEventSource, useEyeDropper, useFavicon, useFetch, useFileDialog, useFileSystemAccess, useFocus, useFocusWithin, useFps, useFullscreen, useGamepad, useGeolocation, useIdle, useImage, useInfiniteScroll, useIntersectionObserver, useKeyModifier, useLocalStorage, useMagicKeys, useManualRefHistory, useMediaControls, useMediaQuery, useMemoize, useMemory, useMounted, useMouse, useMouseInElement, useMousePressed, useMutationObserver, useNavigatorLanguage, useNetwork, useNow, useObjectUrl, useOffsetPagination, useOnline, usePageLeave, useParallax, useParentElement, usePerformanceObserver, usePermission, usePointer, usePointerLock, usePointerSwipe, usePreferredColorScheme, usePreferredContrast, usePreferredDark, usePreferredLanguages, usePreferredReducedMotion, usePreferredReducedTransparency, usePrevious, useRafFn, useRefHistory, useResizeObserver, useSSRWidth, useScreenOrientation, useScreenSafeArea, useScriptTag, useScroll, useScrollLock, useSessionStorage, useShare, useSorted, useSpeechRecognition, useSpeechSynthesis, useStepper, useStorage, useStorageAsync, useStyleTag, useSupported, useSwipe, useTemplateRefsList, useTextDirection, useTextSelection, useTextareaAutosize, useThrottledRefHistory, useTimeAgo, useTimeAgoIntl, useTimeoutPoll, useTimestamp, useTitle, useTransition, useUrlSearchParams, useUserMedia, useVModel, useVModels, useVibrate, useVirtualList, useWakeLock, useWebNotification, useWebSocket, useWebWorker, useWebWorkerFn, useWindowFocus, useWindowScroll, useWindowSize };\n","import { shallowRef, watchEffect, readonly, watch, customRef, getCurrentScope, onScopeDispose, effectScope, getCurrentInstance, hasInjectionContext, inject, provide, ref, isRef, unref, toValue as toValue$1, computed, reactive, toRefs as toRefs$1, toRef as toRef$1, shallowReadonly, onBeforeMount, nextTick, onBeforeUnmount, onMounted, onUnmounted, isReactive } from 'vue';\n\nfunction computedEager(fn, options) {\n  var _a;\n  const result = shallowRef();\n  watchEffect(() => {\n    result.value = fn();\n  }, {\n    ...options,\n    flush: (_a = options == null ? void 0 : options.flush) != null ? _a : \"sync\"\n  });\n  return readonly(result);\n}\n\nfunction computedWithControl(source, fn, options = {}) {\n  let v = void 0;\n  let track;\n  let trigger;\n  let dirty = true;\n  const update = () => {\n    dirty = true;\n    trigger();\n  };\n  watch(source, update, { flush: \"sync\", ...options });\n  const get = typeof fn === \"function\" ? fn : fn.get;\n  const set = typeof fn === \"function\" ? void 0 : fn.set;\n  const result = customRef((_track, _trigger) => {\n    track = _track;\n    trigger = _trigger;\n    return {\n      get() {\n        if (dirty) {\n          v = get(v);\n          dirty = false;\n        }\n        track();\n        return v;\n      },\n      set(v2) {\n        set == null ? void 0 : set(v2);\n      }\n    };\n  });\n  result.trigger = update;\n  return result;\n}\n\nfunction tryOnScopeDispose(fn) {\n  if (getCurrentScope()) {\n    onScopeDispose(fn);\n    return true;\n  }\n  return false;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createEventHook() {\n  const fns = /* @__PURE__ */ new Set();\n  const off = (fn) => {\n    fns.delete(fn);\n  };\n  const clear = () => {\n    fns.clear();\n  };\n  const on = (fn) => {\n    fns.add(fn);\n    const offFn = () => off(fn);\n    tryOnScopeDispose(offFn);\n    return {\n      off: offFn\n    };\n  };\n  const trigger = (...args) => {\n    return Promise.all(Array.from(fns).map((fn) => fn(...args)));\n  };\n  return {\n    on,\n    off,\n    trigger,\n    clear\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createGlobalState(stateFactory) {\n  let initialized = false;\n  let state;\n  const scope = effectScope(true);\n  return (...args) => {\n    if (!initialized) {\n      state = scope.run(() => stateFactory(...args));\n      initialized = true;\n    }\n    return state;\n  };\n}\n\nconst localProvidedStateMap = /* @__PURE__ */ new WeakMap();\n\nconst injectLocal = /* @__NO_SIDE_EFFECTS__ */ (...args) => {\n  var _a;\n  const key = args[0];\n  const instance = (_a = getCurrentInstance()) == null ? void 0 : _a.proxy;\n  if (instance == null && !hasInjectionContext())\n    throw new Error(\"injectLocal must be called in setup\");\n  if (instance && localProvidedStateMap.has(instance) && key in localProvidedStateMap.get(instance))\n    return localProvidedStateMap.get(instance)[key];\n  return inject(...args);\n};\n\nfunction provideLocal(key, value) {\n  var _a;\n  const instance = (_a = getCurrentInstance()) == null ? void 0 : _a.proxy;\n  if (instance == null)\n    throw new Error(\"provideLocal must be called in setup\");\n  if (!localProvidedStateMap.has(instance))\n    localProvidedStateMap.set(instance, /* @__PURE__ */ Object.create(null));\n  const localProvidedState = localProvidedStateMap.get(instance);\n  localProvidedState[key] = value;\n  return provide(key, value);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createInjectionState(composable, options) {\n  const key = (options == null ? void 0 : options.injectionKey) || Symbol(composable.name || \"InjectionState\");\n  const defaultValue = options == null ? void 0 : options.defaultValue;\n  const useProvidingState = (...args) => {\n    const state = composable(...args);\n    provideLocal(key, state);\n    return state;\n  };\n  const useInjectedState = () => injectLocal(key, defaultValue);\n  return [useProvidingState, useInjectedState];\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createRef(value, deep) {\n  if (deep === true) {\n    return ref(value);\n  } else {\n    return shallowRef(value);\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createSharedComposable(composable) {\n  let subscribers = 0;\n  let state;\n  let scope;\n  const dispose = () => {\n    subscribers -= 1;\n    if (scope && subscribers <= 0) {\n      scope.stop();\n      state = void 0;\n      scope = void 0;\n    }\n  };\n  return (...args) => {\n    subscribers += 1;\n    if (!scope) {\n      scope = effectScope(true);\n      state = scope.run(() => composable(...args));\n    }\n    tryOnScopeDispose(dispose);\n    return state;\n  };\n}\n\nfunction extendRef(ref, extend, { enumerable = false, unwrap = true } = {}) {\n  for (const [key, value] of Object.entries(extend)) {\n    if (key === \"value\")\n      continue;\n    if (isRef(value) && unwrap) {\n      Object.defineProperty(ref, key, {\n        get() {\n          return value.value;\n        },\n        set(v) {\n          value.value = v;\n        },\n        enumerable\n      });\n    } else {\n      Object.defineProperty(ref, key, { value, enumerable });\n    }\n  }\n  return ref;\n}\n\nfunction get(obj, key) {\n  if (key == null)\n    return unref(obj);\n  return unref(obj)[key];\n}\n\nfunction isDefined(v) {\n  return unref(v) != null;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction makeDestructurable(obj, arr) {\n  if (typeof Symbol !== \"undefined\") {\n    const clone = { ...obj };\n    Object.defineProperty(clone, Symbol.iterator, {\n      enumerable: false,\n      value() {\n        let index = 0;\n        return {\n          next: () => ({\n            value: arr[index++],\n            done: index > arr.length\n          })\n        };\n      }\n    });\n    return clone;\n  } else {\n    return Object.assign([...arr], obj);\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction reactify(fn, options) {\n  const unrefFn = (options == null ? void 0 : options.computedGetter) === false ? unref : toValue$1;\n  return function(...args) {\n    return computed(() => fn.apply(this, args.map((i) => unrefFn(i))));\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction reactifyObject(obj, optionsOrKeys = {}) {\n  let keys = [];\n  let options;\n  if (Array.isArray(optionsOrKeys)) {\n    keys = optionsOrKeys;\n  } else {\n    options = optionsOrKeys;\n    const { includeOwnProperties = true } = optionsOrKeys;\n    keys.push(...Object.keys(obj));\n    if (includeOwnProperties)\n      keys.push(...Object.getOwnPropertyNames(obj));\n  }\n  return Object.fromEntries(\n    keys.map((key) => {\n      const value = obj[key];\n      return [\n        key,\n        typeof value === \"function\" ? reactify(value.bind(obj), options) : value\n      ];\n    })\n  );\n}\n\nfunction toReactive(objectRef) {\n  if (!isRef(objectRef))\n    return reactive(objectRef);\n  const proxy = new Proxy({}, {\n    get(_, p, receiver) {\n      return unref(Reflect.get(objectRef.value, p, receiver));\n    },\n    set(_, p, value) {\n      if (isRef(objectRef.value[p]) && !isRef(value))\n        objectRef.value[p].value = value;\n      else\n        objectRef.value[p] = value;\n      return true;\n    },\n    deleteProperty(_, p) {\n      return Reflect.deleteProperty(objectRef.value, p);\n    },\n    has(_, p) {\n      return Reflect.has(objectRef.value, p);\n    },\n    ownKeys() {\n      return Object.keys(objectRef.value);\n    },\n    getOwnPropertyDescriptor() {\n      return {\n        enumerable: true,\n        configurable: true\n      };\n    }\n  });\n  return reactive(proxy);\n}\n\nfunction reactiveComputed(fn) {\n  return toReactive(computed(fn));\n}\n\nfunction reactiveOmit(obj, ...keys) {\n  const flatKeys = keys.flat();\n  const predicate = flatKeys[0];\n  return reactiveComputed(() => typeof predicate === \"function\" ? Object.fromEntries(Object.entries(toRefs$1(obj)).filter(([k, v]) => !predicate(toValue$1(v), k))) : Object.fromEntries(Object.entries(toRefs$1(obj)).filter((e) => !flatKeys.includes(e[0]))));\n}\n\nconst isClient = typeof window !== \"undefined\" && typeof document !== \"undefined\";\nconst isWorker = typeof WorkerGlobalScope !== \"undefined\" && globalThis instanceof WorkerGlobalScope;\nconst isDef = (val) => typeof val !== \"undefined\";\nconst notNullish = (val) => val != null;\nconst assert = (condition, ...infos) => {\n  if (!condition)\n    console.warn(...infos);\n};\nconst toString = Object.prototype.toString;\nconst isObject = (val) => toString.call(val) === \"[object Object]\";\nconst now = () => Date.now();\nconst timestamp = () => +Date.now();\nconst clamp = (n, min, max) => Math.min(max, Math.max(min, n));\nconst noop = () => {\n};\nconst rand = (min, max) => {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\nconst hasOwn = (val, key) => Object.prototype.hasOwnProperty.call(val, key);\nconst isIOS = /* @__PURE__ */ getIsIOS();\nfunction getIsIOS() {\n  var _a, _b;\n  return isClient && ((_a = window == null ? void 0 : window.navigator) == null ? void 0 : _a.userAgent) && (/iP(?:ad|hone|od)/.test(window.navigator.userAgent) || ((_b = window == null ? void 0 : window.navigator) == null ? void 0 : _b.maxTouchPoints) > 2 && /iPad|Macintosh/.test(window == null ? void 0 : window.navigator.userAgent));\n}\n\nfunction toRef(...args) {\n  if (args.length !== 1)\n    return toRef$1(...args);\n  const r = args[0];\n  return typeof r === \"function\" ? readonly(customRef(() => ({ get: r, set: noop }))) : ref(r);\n}\nconst resolveRef = toRef;\n\nfunction reactivePick(obj, ...keys) {\n  const flatKeys = keys.flat();\n  const predicate = flatKeys[0];\n  return reactiveComputed(() => typeof predicate === \"function\" ? Object.fromEntries(Object.entries(toRefs$1(obj)).filter(([k, v]) => predicate(toValue$1(v), k))) : Object.fromEntries(flatKeys.map((k) => [k, toRef(obj, k)])));\n}\n\nfunction refAutoReset(defaultValue, afterMs = 1e4) {\n  return customRef((track, trigger) => {\n    let value = toValue$1(defaultValue);\n    let timer;\n    const resetAfter = () => setTimeout(() => {\n      value = toValue$1(defaultValue);\n      trigger();\n    }, toValue$1(afterMs));\n    tryOnScopeDispose(() => {\n      clearTimeout(timer);\n    });\n    return {\n      get() {\n        track();\n        return value;\n      },\n      set(newValue) {\n        value = newValue;\n        trigger();\n        clearTimeout(timer);\n        timer = resetAfter();\n      }\n    };\n  });\n}\n\nfunction createFilterWrapper(filter, fn) {\n  function wrapper(...args) {\n    return new Promise((resolve, reject) => {\n      Promise.resolve(filter(() => fn.apply(this, args), { fn, thisArg: this, args })).then(resolve).catch(reject);\n    });\n  }\n  return wrapper;\n}\nconst bypassFilter = (invoke) => {\n  return invoke();\n};\nfunction debounceFilter(ms, options = {}) {\n  let timer;\n  let maxTimer;\n  let lastRejector = noop;\n  const _clearTimeout = (timer2) => {\n    clearTimeout(timer2);\n    lastRejector();\n    lastRejector = noop;\n  };\n  let lastInvoker;\n  const filter = (invoke) => {\n    const duration = toValue$1(ms);\n    const maxDuration = toValue$1(options.maxWait);\n    if (timer)\n      _clearTimeout(timer);\n    if (duration <= 0 || maxDuration !== void 0 && maxDuration <= 0) {\n      if (maxTimer) {\n        _clearTimeout(maxTimer);\n        maxTimer = void 0;\n      }\n      return Promise.resolve(invoke());\n    }\n    return new Promise((resolve, reject) => {\n      lastRejector = options.rejectOnCancel ? reject : resolve;\n      lastInvoker = invoke;\n      if (maxDuration && !maxTimer) {\n        maxTimer = setTimeout(() => {\n          if (timer)\n            _clearTimeout(timer);\n          maxTimer = void 0;\n          resolve(lastInvoker());\n        }, maxDuration);\n      }\n      timer = setTimeout(() => {\n        if (maxTimer)\n          _clearTimeout(maxTimer);\n        maxTimer = void 0;\n        resolve(invoke());\n      }, duration);\n    });\n  };\n  return filter;\n}\nfunction throttleFilter(...args) {\n  let lastExec = 0;\n  let timer;\n  let isLeading = true;\n  let lastRejector = noop;\n  let lastValue;\n  let ms;\n  let trailing;\n  let leading;\n  let rejectOnCancel;\n  if (!isRef(args[0]) && typeof args[0] === \"object\")\n    ({ delay: ms, trailing = true, leading = true, rejectOnCancel = false } = args[0]);\n  else\n    [ms, trailing = true, leading = true, rejectOnCancel = false] = args;\n  const clear = () => {\n    if (timer) {\n      clearTimeout(timer);\n      timer = void 0;\n      lastRejector();\n      lastRejector = noop;\n    }\n  };\n  const filter = (_invoke) => {\n    const duration = toValue$1(ms);\n    const elapsed = Date.now() - lastExec;\n    const invoke = () => {\n      return lastValue = _invoke();\n    };\n    clear();\n    if (duration <= 0) {\n      lastExec = Date.now();\n      return invoke();\n    }\n    if (elapsed > duration && (leading || !isLeading)) {\n      lastExec = Date.now();\n      invoke();\n    } else if (trailing) {\n      lastValue = new Promise((resolve, reject) => {\n        lastRejector = rejectOnCancel ? reject : resolve;\n        timer = setTimeout(() => {\n          lastExec = Date.now();\n          isLeading = true;\n          resolve(invoke());\n          clear();\n        }, Math.max(0, duration - elapsed));\n      });\n    }\n    if (!leading && !timer)\n      timer = setTimeout(() => isLeading = true, duration);\n    isLeading = false;\n    return lastValue;\n  };\n  return filter;\n}\nfunction pausableFilter(extendFilter = bypassFilter, options = {}) {\n  const {\n    initialState = \"active\"\n  } = options;\n  const isActive = toRef(initialState === \"active\");\n  function pause() {\n    isActive.value = false;\n  }\n  function resume() {\n    isActive.value = true;\n  }\n  const eventFilter = (...args) => {\n    if (isActive.value)\n      extendFilter(...args);\n  };\n  return { isActive: readonly(isActive), pause, resume, eventFilter };\n}\n\nfunction promiseTimeout(ms, throwOnTimeout = false, reason = \"Timeout\") {\n  return new Promise((resolve, reject) => {\n    if (throwOnTimeout)\n      setTimeout(() => reject(reason), ms);\n    else\n      setTimeout(resolve, ms);\n  });\n}\nfunction identity(arg) {\n  return arg;\n}\nfunction createSingletonPromise(fn) {\n  let _promise;\n  function wrapper() {\n    if (!_promise)\n      _promise = fn();\n    return _promise;\n  }\n  wrapper.reset = async () => {\n    const _prev = _promise;\n    _promise = void 0;\n    if (_prev)\n      await _prev;\n  };\n  return wrapper;\n}\nfunction invoke(fn) {\n  return fn();\n}\nfunction containsProp(obj, ...props) {\n  return props.some((k) => k in obj);\n}\nfunction increaseWithUnit(target, delta) {\n  var _a;\n  if (typeof target === \"number\")\n    return target + delta;\n  const value = ((_a = target.match(/^-?\\d+\\.?\\d*/)) == null ? void 0 : _a[0]) || \"\";\n  const unit = target.slice(value.length);\n  const result = Number.parseFloat(value) + delta;\n  if (Number.isNaN(result))\n    return target;\n  return result + unit;\n}\nfunction pxValue(px) {\n  return px.endsWith(\"rem\") ? Number.parseFloat(px) * 16 : Number.parseFloat(px);\n}\nfunction objectPick(obj, keys, omitUndefined = false) {\n  return keys.reduce((n, k) => {\n    if (k in obj) {\n      if (!omitUndefined || obj[k] !== void 0)\n        n[k] = obj[k];\n    }\n    return n;\n  }, {});\n}\nfunction objectOmit(obj, keys, omitUndefined = false) {\n  return Object.fromEntries(Object.entries(obj).filter(([key, value]) => {\n    return (!omitUndefined || value !== void 0) && !keys.includes(key);\n  }));\n}\nfunction objectEntries(obj) {\n  return Object.entries(obj);\n}\nfunction toArray(value) {\n  return Array.isArray(value) ? value : [value];\n}\n\nfunction cacheStringFunction(fn) {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (str) => {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n}\nconst hyphenateRE = /\\B([A-Z])/g;\nconst hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, \"-$1\").toLowerCase());\nconst camelizeRE = /-(\\w)/g;\nconst camelize = cacheStringFunction((str) => {\n  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : \"\");\n});\n\nfunction getLifeCycleTarget(target) {\n  return target || getCurrentInstance();\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useDebounceFn(fn, ms = 200, options = {}) {\n  return createFilterWrapper(\n    debounceFilter(ms, options),\n    fn\n  );\n}\n\nfunction refDebounced(value, ms = 200, options = {}) {\n  const debounced = ref(toValue$1(value));\n  const updater = useDebounceFn(() => {\n    debounced.value = value.value;\n  }, ms, options);\n  watch(value, () => updater());\n  return shallowReadonly(debounced);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction refDefault(source, defaultValue) {\n  return computed({\n    get() {\n      var _a;\n      return (_a = source.value) != null ? _a : defaultValue;\n    },\n    set(value) {\n      source.value = value;\n    }\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useThrottleFn(fn, ms = 200, trailing = false, leading = true, rejectOnCancel = false) {\n  return createFilterWrapper(\n    throttleFilter(ms, trailing, leading, rejectOnCancel),\n    fn\n  );\n}\n\nfunction refThrottled(value, delay = 200, trailing = true, leading = true) {\n  if (delay <= 0)\n    return value;\n  const throttled = ref(toValue$1(value));\n  const updater = useThrottleFn(() => {\n    throttled.value = value.value;\n  }, delay, trailing, leading);\n  watch(value, () => updater());\n  return throttled;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction refWithControl(initial, options = {}) {\n  let source = initial;\n  let track;\n  let trigger;\n  const ref = customRef((_track, _trigger) => {\n    track = _track;\n    trigger = _trigger;\n    return {\n      get() {\n        return get();\n      },\n      set(v) {\n        set(v);\n      }\n    };\n  });\n  function get(tracking = true) {\n    if (tracking)\n      track();\n    return source;\n  }\n  function set(value, triggering = true) {\n    var _a, _b;\n    if (value === source)\n      return;\n    const old = source;\n    if (((_a = options.onBeforeChange) == null ? void 0 : _a.call(options, value, old)) === false)\n      return;\n    source = value;\n    (_b = options.onChanged) == null ? void 0 : _b.call(options, value, old);\n    if (triggering)\n      trigger();\n  }\n  const untrackedGet = () => get(false);\n  const silentSet = (v) => set(v, false);\n  const peek = () => get(false);\n  const lay = (v) => set(v, false);\n  return extendRef(\n    ref,\n    {\n      get,\n      set,\n      untrackedGet,\n      silentSet,\n      peek,\n      lay\n    },\n    { enumerable: true }\n  );\n}\nconst controlledRef = refWithControl;\n\nfunction set(...args) {\n  if (args.length === 2) {\n    const [ref, value] = args;\n    ref.value = value;\n  }\n  if (args.length === 3) {\n    const [target, key, value] = args;\n    target[key] = value;\n  }\n}\n\nfunction watchWithFilter(source, cb, options = {}) {\n  const {\n    eventFilter = bypassFilter,\n    ...watchOptions\n  } = options;\n  return watch(\n    source,\n    createFilterWrapper(\n      eventFilter,\n      cb\n    ),\n    watchOptions\n  );\n}\n\nfunction watchPausable(source, cb, options = {}) {\n  const {\n    eventFilter: filter,\n    initialState = \"active\",\n    ...watchOptions\n  } = options;\n  const { eventFilter, pause, resume, isActive } = pausableFilter(filter, { initialState });\n  const stop = watchWithFilter(\n    source,\n    cb,\n    {\n      ...watchOptions,\n      eventFilter\n    }\n  );\n  return { stop, pause, resume, isActive };\n}\n\nfunction syncRef(left, right, ...[options]) {\n  const {\n    flush = \"sync\",\n    deep = false,\n    immediate = true,\n    direction = \"both\",\n    transform = {}\n  } = options || {};\n  const watchers = [];\n  const transformLTR = \"ltr\" in transform && transform.ltr || ((v) => v);\n  const transformRTL = \"rtl\" in transform && transform.rtl || ((v) => v);\n  if (direction === \"both\" || direction === \"ltr\") {\n    watchers.push(watchPausable(\n      left,\n      (newValue) => {\n        watchers.forEach((w) => w.pause());\n        right.value = transformLTR(newValue);\n        watchers.forEach((w) => w.resume());\n      },\n      { flush, deep, immediate }\n    ));\n  }\n  if (direction === \"both\" || direction === \"rtl\") {\n    watchers.push(watchPausable(\n      right,\n      (newValue) => {\n        watchers.forEach((w) => w.pause());\n        left.value = transformRTL(newValue);\n        watchers.forEach((w) => w.resume());\n      },\n      { flush, deep, immediate }\n    ));\n  }\n  const stop = () => {\n    watchers.forEach((w) => w.stop());\n  };\n  return stop;\n}\n\nfunction syncRefs(source, targets, options = {}) {\n  const {\n    flush = \"sync\",\n    deep = false,\n    immediate = true\n  } = options;\n  const targetsArray = toArray(targets);\n  return watch(\n    source,\n    (newValue) => targetsArray.forEach((target) => target.value = newValue),\n    { flush, deep, immediate }\n  );\n}\n\nfunction toRefs(objectRef, options = {}) {\n  if (!isRef(objectRef))\n    return toRefs$1(objectRef);\n  const result = Array.isArray(objectRef.value) ? Array.from({ length: objectRef.value.length }) : {};\n  for (const key in objectRef.value) {\n    result[key] = customRef(() => ({\n      get() {\n        return objectRef.value[key];\n      },\n      set(v) {\n        var _a;\n        const replaceRef = (_a = toValue$1(options.replaceRef)) != null ? _a : true;\n        if (replaceRef) {\n          if (Array.isArray(objectRef.value)) {\n            const copy = [...objectRef.value];\n            copy[key] = v;\n            objectRef.value = copy;\n          } else {\n            const newObject = { ...objectRef.value, [key]: v };\n            Object.setPrototypeOf(newObject, Object.getPrototypeOf(objectRef.value));\n            objectRef.value = newObject;\n          }\n        } else {\n          objectRef.value[key] = v;\n        }\n      }\n    }));\n  }\n  return result;\n}\n\nconst toValue = toValue$1;\nconst resolveUnref = toValue$1;\n\nfunction tryOnBeforeMount(fn, sync = true, target) {\n  const instance = getLifeCycleTarget(target);\n  if (instance)\n    onBeforeMount(fn, target);\n  else if (sync)\n    fn();\n  else\n    nextTick(fn);\n}\n\nfunction tryOnBeforeUnmount(fn, target) {\n  const instance = getLifeCycleTarget(target);\n  if (instance)\n    onBeforeUnmount(fn, target);\n}\n\nfunction tryOnMounted(fn, sync = true, target) {\n  const instance = getLifeCycleTarget(target);\n  if (instance)\n    onMounted(fn, target);\n  else if (sync)\n    fn();\n  else\n    nextTick(fn);\n}\n\nfunction tryOnUnmounted(fn, target) {\n  const instance = getLifeCycleTarget(target);\n  if (instance)\n    onUnmounted(fn, target);\n}\n\nfunction createUntil(r, isNot = false) {\n  function toMatch(condition, { flush = \"sync\", deep = false, timeout, throwOnTimeout } = {}) {\n    let stop = null;\n    const watcher = new Promise((resolve) => {\n      stop = watch(\n        r,\n        (v) => {\n          if (condition(v) !== isNot) {\n            if (stop)\n              stop();\n            else\n              nextTick(() => stop == null ? void 0 : stop());\n            resolve(v);\n          }\n        },\n        {\n          flush,\n          deep,\n          immediate: true\n        }\n      );\n    });\n    const promises = [watcher];\n    if (timeout != null) {\n      promises.push(\n        promiseTimeout(timeout, throwOnTimeout).then(() => toValue$1(r)).finally(() => stop == null ? void 0 : stop())\n      );\n    }\n    return Promise.race(promises);\n  }\n  function toBe(value, options) {\n    if (!isRef(value))\n      return toMatch((v) => v === value, options);\n    const { flush = \"sync\", deep = false, timeout, throwOnTimeout } = options != null ? options : {};\n    let stop = null;\n    const watcher = new Promise((resolve) => {\n      stop = watch(\n        [r, value],\n        ([v1, v2]) => {\n          if (isNot !== (v1 === v2)) {\n            if (stop)\n              stop();\n            else\n              nextTick(() => stop == null ? void 0 : stop());\n            resolve(v1);\n          }\n        },\n        {\n          flush,\n          deep,\n          immediate: true\n        }\n      );\n    });\n    const promises = [watcher];\n    if (timeout != null) {\n      promises.push(\n        promiseTimeout(timeout, throwOnTimeout).then(() => toValue$1(r)).finally(() => {\n          stop == null ? void 0 : stop();\n          return toValue$1(r);\n        })\n      );\n    }\n    return Promise.race(promises);\n  }\n  function toBeTruthy(options) {\n    return toMatch((v) => Boolean(v), options);\n  }\n  function toBeNull(options) {\n    return toBe(null, options);\n  }\n  function toBeUndefined(options) {\n    return toBe(void 0, options);\n  }\n  function toBeNaN(options) {\n    return toMatch(Number.isNaN, options);\n  }\n  function toContains(value, options) {\n    return toMatch((v) => {\n      const array = Array.from(v);\n      return array.includes(value) || array.includes(toValue$1(value));\n    }, options);\n  }\n  function changed(options) {\n    return changedTimes(1, options);\n  }\n  function changedTimes(n = 1, options) {\n    let count = -1;\n    return toMatch(() => {\n      count += 1;\n      return count >= n;\n    }, options);\n  }\n  if (Array.isArray(toValue$1(r))) {\n    const instance = {\n      toMatch,\n      toContains,\n      changed,\n      changedTimes,\n      get not() {\n        return createUntil(r, !isNot);\n      }\n    };\n    return instance;\n  } else {\n    const instance = {\n      toMatch,\n      toBe,\n      toBeTruthy,\n      toBeNull,\n      toBeNaN,\n      toBeUndefined,\n      changed,\n      changedTimes,\n      get not() {\n        return createUntil(r, !isNot);\n      }\n    };\n    return instance;\n  }\n}\nfunction until(r) {\n  return createUntil(r);\n}\n\nfunction defaultComparator(value, othVal) {\n  return value === othVal;\n}\n// @__NO_SIDE_EFFECTS__\nfunction useArrayDifference(...args) {\n  var _a, _b;\n  const list = args[0];\n  const values = args[1];\n  let compareFn = (_a = args[2]) != null ? _a : defaultComparator;\n  const {\n    symmetric = false\n  } = (_b = args[3]) != null ? _b : {};\n  if (typeof compareFn === \"string\") {\n    const key = compareFn;\n    compareFn = (value, othVal) => value[key] === othVal[key];\n  }\n  const diff1 = computed(() => toValue$1(list).filter((x) => toValue$1(values).findIndex((y) => compareFn(x, y)) === -1));\n  if (symmetric) {\n    const diff2 = computed(() => toValue$1(values).filter((x) => toValue$1(list).findIndex((y) => compareFn(x, y)) === -1));\n    return computed(() => symmetric ? [...toValue$1(diff1), ...toValue$1(diff2)] : toValue$1(diff1));\n  } else {\n    return diff1;\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayEvery(list, fn) {\n  return computed(() => toValue$1(list).every((element, index, array) => fn(toValue$1(element), index, array)));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayFilter(list, fn) {\n  return computed(() => toValue$1(list).map((i) => toValue$1(i)).filter(fn));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayFind(list, fn) {\n  return computed(() => toValue$1(\n    toValue$1(list).find((element, index, array) => fn(toValue$1(element), index, array))\n  ));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayFindIndex(list, fn) {\n  return computed(() => toValue$1(list).findIndex((element, index, array) => fn(toValue$1(element), index, array)));\n}\n\nfunction findLast(arr, cb) {\n  let index = arr.length;\n  while (index-- > 0) {\n    if (cb(arr[index], index, arr))\n      return arr[index];\n  }\n  return void 0;\n}\n// @__NO_SIDE_EFFECTS__\nfunction useArrayFindLast(list, fn) {\n  return computed(() => toValue$1(\n    !Array.prototype.findLast ? findLast(toValue$1(list), (element, index, array) => fn(toValue$1(element), index, array)) : toValue$1(list).findLast((element, index, array) => fn(toValue$1(element), index, array))\n  ));\n}\n\nfunction isArrayIncludesOptions(obj) {\n  return isObject(obj) && containsProp(obj, \"formIndex\", \"comparator\");\n}\n// @__NO_SIDE_EFFECTS__\nfunction useArrayIncludes(...args) {\n  var _a;\n  const list = args[0];\n  const value = args[1];\n  let comparator = args[2];\n  let formIndex = 0;\n  if (isArrayIncludesOptions(comparator)) {\n    formIndex = (_a = comparator.fromIndex) != null ? _a : 0;\n    comparator = comparator.comparator;\n  }\n  if (typeof comparator === \"string\") {\n    const key = comparator;\n    comparator = (element, value2) => element[key] === toValue$1(value2);\n  }\n  comparator = comparator != null ? comparator : (element, value2) => element === toValue$1(value2);\n  return computed(() => toValue$1(list).slice(formIndex).some((element, index, array) => comparator(\n    toValue$1(element),\n    toValue$1(value),\n    index,\n    toValue$1(array)\n  )));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayJoin(list, separator) {\n  return computed(() => toValue$1(list).map((i) => toValue$1(i)).join(toValue$1(separator)));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayMap(list, fn) {\n  return computed(() => toValue$1(list).map((i) => toValue$1(i)).map(fn));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayReduce(list, reducer, ...args) {\n  const reduceCallback = (sum, value, index) => reducer(toValue$1(sum), toValue$1(value), index);\n  return computed(() => {\n    const resolved = toValue$1(list);\n    return args.length ? resolved.reduce(reduceCallback, typeof args[0] === \"function\" ? toValue$1(args[0]()) : toValue$1(args[0])) : resolved.reduce(reduceCallback);\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArraySome(list, fn) {\n  return computed(() => toValue$1(list).some((element, index, array) => fn(toValue$1(element), index, array)));\n}\n\nfunction uniq(array) {\n  return Array.from(new Set(array));\n}\nfunction uniqueElementsBy(array, fn) {\n  return array.reduce((acc, v) => {\n    if (!acc.some((x) => fn(v, x, array)))\n      acc.push(v);\n    return acc;\n  }, []);\n}\n// @__NO_SIDE_EFFECTS__\nfunction useArrayUnique(list, compareFn) {\n  return computed(() => {\n    const resolvedList = toValue$1(list).map((element) => toValue$1(element));\n    return compareFn ? uniqueElementsBy(resolvedList, compareFn) : uniq(resolvedList);\n  });\n}\n\nfunction useCounter(initialValue = 0, options = {}) {\n  let _initialValue = unref(initialValue);\n  const count = shallowRef(initialValue);\n  const {\n    max = Number.POSITIVE_INFINITY,\n    min = Number.NEGATIVE_INFINITY\n  } = options;\n  const inc = (delta = 1) => count.value = Math.max(Math.min(max, count.value + delta), min);\n  const dec = (delta = 1) => count.value = Math.min(Math.max(min, count.value - delta), max);\n  const get = () => count.value;\n  const set = (val) => count.value = Math.max(min, Math.min(max, val));\n  const reset = (val = _initialValue) => {\n    _initialValue = val;\n    return set(val);\n  };\n  return { count: shallowReadonly(count), inc, dec, get, set, reset };\n}\n\nconst REGEX_PARSE = /^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[T\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/i;\nconst REGEX_FORMAT = /[YMDHhms]o|\\[([^\\]]+)\\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|z{1,4}|SSS/g;\nfunction defaultMeridiem(hours, minutes, isLowercase, hasPeriod) {\n  let m = hours < 12 ? \"AM\" : \"PM\";\n  if (hasPeriod)\n    m = m.split(\"\").reduce((acc, curr) => acc += `${curr}.`, \"\");\n  return isLowercase ? m.toLowerCase() : m;\n}\nfunction formatOrdinal(num) {\n  const suffixes = [\"th\", \"st\", \"nd\", \"rd\"];\n  const v = num % 100;\n  return num + (suffixes[(v - 20) % 10] || suffixes[v] || suffixes[0]);\n}\nfunction formatDate(date, formatStr, options = {}) {\n  var _a;\n  const years = date.getFullYear();\n  const month = date.getMonth();\n  const days = date.getDate();\n  const hours = date.getHours();\n  const minutes = date.getMinutes();\n  const seconds = date.getSeconds();\n  const milliseconds = date.getMilliseconds();\n  const day = date.getDay();\n  const meridiem = (_a = options.customMeridiem) != null ? _a : defaultMeridiem;\n  const stripTimeZone = (dateString) => {\n    var _a2;\n    return (_a2 = dateString.split(\" \")[1]) != null ? _a2 : \"\";\n  };\n  const matches = {\n    Yo: () => formatOrdinal(years),\n    YY: () => String(years).slice(-2),\n    YYYY: () => years,\n    M: () => month + 1,\n    Mo: () => formatOrdinal(month + 1),\n    MM: () => `${month + 1}`.padStart(2, \"0\"),\n    MMM: () => date.toLocaleDateString(toValue$1(options.locales), { month: \"short\" }),\n    MMMM: () => date.toLocaleDateString(toValue$1(options.locales), { month: \"long\" }),\n    D: () => String(days),\n    Do: () => formatOrdinal(days),\n    DD: () => `${days}`.padStart(2, \"0\"),\n    H: () => String(hours),\n    Ho: () => formatOrdinal(hours),\n    HH: () => `${hours}`.padStart(2, \"0\"),\n    h: () => `${hours % 12 || 12}`.padStart(1, \"0\"),\n    ho: () => formatOrdinal(hours % 12 || 12),\n    hh: () => `${hours % 12 || 12}`.padStart(2, \"0\"),\n    m: () => String(minutes),\n    mo: () => formatOrdinal(minutes),\n    mm: () => `${minutes}`.padStart(2, \"0\"),\n    s: () => String(seconds),\n    so: () => formatOrdinal(seconds),\n    ss: () => `${seconds}`.padStart(2, \"0\"),\n    SSS: () => `${milliseconds}`.padStart(3, \"0\"),\n    d: () => day,\n    dd: () => date.toLocaleDateString(toValue$1(options.locales), { weekday: \"narrow\" }),\n    ddd: () => date.toLocaleDateString(toValue$1(options.locales), { weekday: \"short\" }),\n    dddd: () => date.toLocaleDateString(toValue$1(options.locales), { weekday: \"long\" }),\n    A: () => meridiem(hours, minutes),\n    AA: () => meridiem(hours, minutes, false, true),\n    a: () => meridiem(hours, minutes, true),\n    aa: () => meridiem(hours, minutes, true, true),\n    z: () => stripTimeZone(date.toLocaleDateString(toValue$1(options.locales), { timeZoneName: \"shortOffset\" })),\n    zz: () => stripTimeZone(date.toLocaleDateString(toValue$1(options.locales), { timeZoneName: \"shortOffset\" })),\n    zzz: () => stripTimeZone(date.toLocaleDateString(toValue$1(options.locales), { timeZoneName: \"shortOffset\" })),\n    zzzz: () => stripTimeZone(date.toLocaleDateString(toValue$1(options.locales), { timeZoneName: \"longOffset\" }))\n  };\n  return formatStr.replace(REGEX_FORMAT, (match, $1) => {\n    var _a2, _b;\n    return (_b = $1 != null ? $1 : (_a2 = matches[match]) == null ? void 0 : _a2.call(matches)) != null ? _b : match;\n  });\n}\nfunction normalizeDate(date) {\n  if (date === null)\n    return new Date(Number.NaN);\n  if (date === void 0)\n    return /* @__PURE__ */ new Date();\n  if (date instanceof Date)\n    return new Date(date);\n  if (typeof date === \"string\" && !/Z$/i.test(date)) {\n    const d = date.match(REGEX_PARSE);\n    if (d) {\n      const m = d[2] - 1 || 0;\n      const ms = (d[7] || \"0\").substring(0, 3);\n      return new Date(d[1], m, d[3] || 1, d[4] || 0, d[5] || 0, d[6] || 0, ms);\n    }\n  }\n  return new Date(date);\n}\n// @__NO_SIDE_EFFECTS__\nfunction useDateFormat(date, formatStr = \"HH:mm:ss\", options = {}) {\n  return computed(() => formatDate(normalizeDate(toValue$1(date)), toValue$1(formatStr), options));\n}\n\nfunction useIntervalFn(cb, interval = 1e3, options = {}) {\n  const {\n    immediate = true,\n    immediateCallback = false\n  } = options;\n  let timer = null;\n  const isActive = shallowRef(false);\n  function clean() {\n    if (timer) {\n      clearInterval(timer);\n      timer = null;\n    }\n  }\n  function pause() {\n    isActive.value = false;\n    clean();\n  }\n  function resume() {\n    const intervalValue = toValue$1(interval);\n    if (intervalValue <= 0)\n      return;\n    isActive.value = true;\n    if (immediateCallback)\n      cb();\n    clean();\n    if (isActive.value)\n      timer = setInterval(cb, intervalValue);\n  }\n  if (immediate && isClient)\n    resume();\n  if (isRef(interval) || typeof interval === \"function\") {\n    const stopWatch = watch(interval, () => {\n      if (isActive.value && isClient)\n        resume();\n    });\n    tryOnScopeDispose(stopWatch);\n  }\n  tryOnScopeDispose(pause);\n  return {\n    isActive: shallowReadonly(isActive),\n    pause,\n    resume\n  };\n}\n\nfunction useInterval(interval = 1e3, options = {}) {\n  const {\n    controls: exposeControls = false,\n    immediate = true,\n    callback\n  } = options;\n  const counter = shallowRef(0);\n  const update = () => counter.value += 1;\n  const reset = () => {\n    counter.value = 0;\n  };\n  const controls = useIntervalFn(\n    callback ? () => {\n      update();\n      callback(counter.value);\n    } : update,\n    interval,\n    { immediate }\n  );\n  if (exposeControls) {\n    return {\n      counter: shallowReadonly(counter),\n      reset,\n      ...controls\n    };\n  } else {\n    return shallowReadonly(counter);\n  }\n}\n\nfunction useLastChanged(source, options = {}) {\n  var _a;\n  const ms = shallowRef((_a = options.initialValue) != null ? _a : null);\n  watch(\n    source,\n    () => ms.value = timestamp(),\n    options\n  );\n  return shallowReadonly(ms);\n}\n\nfunction useTimeoutFn(cb, interval, options = {}) {\n  const {\n    immediate = true,\n    immediateCallback = false\n  } = options;\n  const isPending = shallowRef(false);\n  let timer;\n  function clear() {\n    if (timer) {\n      clearTimeout(timer);\n      timer = void 0;\n    }\n  }\n  function stop() {\n    isPending.value = false;\n    clear();\n  }\n  function start(...args) {\n    if (immediateCallback)\n      cb();\n    clear();\n    isPending.value = true;\n    timer = setTimeout(() => {\n      isPending.value = false;\n      timer = void 0;\n      cb(...args);\n    }, toValue$1(interval));\n  }\n  if (immediate) {\n    isPending.value = true;\n    if (isClient)\n      start();\n  }\n  tryOnScopeDispose(stop);\n  return {\n    isPending: shallowReadonly(isPending),\n    start,\n    stop\n  };\n}\n\nfunction useTimeout(interval = 1e3, options = {}) {\n  const {\n    controls: exposeControls = false,\n    callback\n  } = options;\n  const controls = useTimeoutFn(\n    callback != null ? callback : noop,\n    interval,\n    options\n  );\n  const ready = computed(() => !controls.isPending.value);\n  if (exposeControls) {\n    return {\n      ready,\n      ...controls\n    };\n  } else {\n    return ready;\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useToNumber(value, options = {}) {\n  const {\n    method = \"parseFloat\",\n    radix,\n    nanToZero\n  } = options;\n  return computed(() => {\n    let resolved = toValue$1(value);\n    if (typeof method === \"function\")\n      resolved = method(resolved);\n    else if (typeof resolved === \"string\")\n      resolved = Number[method](resolved, radix);\n    if (nanToZero && Number.isNaN(resolved))\n      resolved = 0;\n    return resolved;\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useToString(value) {\n  return computed(() => `${toValue$1(value)}`);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useToggle(initialValue = false, options = {}) {\n  const {\n    truthyValue = true,\n    falsyValue = false\n  } = options;\n  const valueIsRef = isRef(initialValue);\n  const _value = shallowRef(initialValue);\n  function toggle(value) {\n    if (arguments.length) {\n      _value.value = value;\n      return _value.value;\n    } else {\n      const truthy = toValue$1(truthyValue);\n      _value.value = _value.value === truthy ? toValue$1(falsyValue) : truthy;\n      return _value.value;\n    }\n  }\n  if (valueIsRef)\n    return toggle;\n  else\n    return [_value, toggle];\n}\n\nfunction watchArray(source, cb, options) {\n  let oldList = (options == null ? void 0 : options.immediate) ? [] : [...typeof source === \"function\" ? source() : Array.isArray(source) ? source : toValue$1(source)];\n  return watch(source, (newList, _, onCleanup) => {\n    const oldListRemains = Array.from({ length: oldList.length });\n    const added = [];\n    for (const obj of newList) {\n      let found = false;\n      for (let i = 0; i < oldList.length; i++) {\n        if (!oldListRemains[i] && obj === oldList[i]) {\n          oldListRemains[i] = true;\n          found = true;\n          break;\n        }\n      }\n      if (!found)\n        added.push(obj);\n    }\n    const removed = oldList.filter((_2, i) => !oldListRemains[i]);\n    cb(newList, oldList, added, removed, onCleanup);\n    oldList = [...newList];\n  }, options);\n}\n\nfunction watchAtMost(source, cb, options) {\n  const {\n    count,\n    ...watchOptions\n  } = options;\n  const current = shallowRef(0);\n  const stop = watchWithFilter(\n    source,\n    (...args) => {\n      current.value += 1;\n      if (current.value >= toValue$1(count))\n        nextTick(() => stop());\n      cb(...args);\n    },\n    watchOptions\n  );\n  return { count: current, stop };\n}\n\nfunction watchDebounced(source, cb, options = {}) {\n  const {\n    debounce = 0,\n    maxWait = void 0,\n    ...watchOptions\n  } = options;\n  return watchWithFilter(\n    source,\n    cb,\n    {\n      ...watchOptions,\n      eventFilter: debounceFilter(debounce, { maxWait })\n    }\n  );\n}\n\nfunction watchDeep(source, cb, options) {\n  return watch(\n    source,\n    cb,\n    {\n      ...options,\n      deep: true\n    }\n  );\n}\n\nfunction watchIgnorable(source, cb, options = {}) {\n  const {\n    eventFilter = bypassFilter,\n    ...watchOptions\n  } = options;\n  const filteredCb = createFilterWrapper(\n    eventFilter,\n    cb\n  );\n  let ignoreUpdates;\n  let ignorePrevAsyncUpdates;\n  let stop;\n  if (watchOptions.flush === \"sync\") {\n    let ignore = false;\n    ignorePrevAsyncUpdates = () => {\n    };\n    ignoreUpdates = (updater) => {\n      ignore = true;\n      updater();\n      ignore = false;\n    };\n    stop = watch(\n      source,\n      (...args) => {\n        if (!ignore)\n          filteredCb(...args);\n      },\n      watchOptions\n    );\n  } else {\n    const disposables = [];\n    let ignoreCounter = 0;\n    let syncCounter = 0;\n    ignorePrevAsyncUpdates = () => {\n      ignoreCounter = syncCounter;\n    };\n    disposables.push(\n      watch(\n        source,\n        () => {\n          syncCounter++;\n        },\n        { ...watchOptions, flush: \"sync\" }\n      )\n    );\n    ignoreUpdates = (updater) => {\n      const syncCounterPrev = syncCounter;\n      updater();\n      ignoreCounter += syncCounter - syncCounterPrev;\n    };\n    disposables.push(\n      watch(\n        source,\n        (...args) => {\n          const ignore = ignoreCounter > 0 && ignoreCounter === syncCounter;\n          ignoreCounter = 0;\n          syncCounter = 0;\n          if (ignore)\n            return;\n          filteredCb(...args);\n        },\n        watchOptions\n      )\n    );\n    stop = () => {\n      disposables.forEach((fn) => fn());\n    };\n  }\n  return { stop, ignoreUpdates, ignorePrevAsyncUpdates };\n}\n\nfunction watchImmediate(source, cb, options) {\n  return watch(\n    source,\n    cb,\n    {\n      ...options,\n      immediate: true\n    }\n  );\n}\n\nfunction watchOnce(source, cb, options) {\n  return watch(\n    source,\n    cb,\n    {\n      ...options,\n      once: true\n    }\n  );\n}\n\nfunction watchThrottled(source, cb, options = {}) {\n  const {\n    throttle = 0,\n    trailing = true,\n    leading = true,\n    ...watchOptions\n  } = options;\n  return watchWithFilter(\n    source,\n    cb,\n    {\n      ...watchOptions,\n      eventFilter: throttleFilter(throttle, trailing, leading)\n    }\n  );\n}\n\nfunction watchTriggerable(source, cb, options = {}) {\n  let cleanupFn;\n  function onEffect() {\n    if (!cleanupFn)\n      return;\n    const fn = cleanupFn;\n    cleanupFn = void 0;\n    fn();\n  }\n  function onCleanup(callback) {\n    cleanupFn = callback;\n  }\n  const _cb = (value, oldValue) => {\n    onEffect();\n    return cb(value, oldValue, onCleanup);\n  };\n  const res = watchIgnorable(source, _cb, options);\n  const { ignoreUpdates } = res;\n  const trigger = () => {\n    let res2;\n    ignoreUpdates(() => {\n      res2 = _cb(getWatchSources(source), getOldValue(source));\n    });\n    return res2;\n  };\n  return {\n    ...res,\n    trigger\n  };\n}\nfunction getWatchSources(sources) {\n  if (isReactive(sources))\n    return sources;\n  if (Array.isArray(sources))\n    return sources.map((item) => toValue$1(item));\n  return toValue$1(sources);\n}\nfunction getOldValue(source) {\n  return Array.isArray(source) ? source.map(() => void 0) : void 0;\n}\n\nfunction whenever(source, cb, options) {\n  const stop = watch(\n    source,\n    (v, ov, onInvalidate) => {\n      if (v) {\n        if (options == null ? void 0 : options.once)\n          nextTick(() => stop());\n        cb(v, ov, onInvalidate);\n      }\n    },\n    {\n      ...options,\n      once: false\n    }\n  );\n  return stop;\n}\n\nexport { assert, refAutoReset as autoResetRef, bypassFilter, camelize, clamp, computedEager, computedWithControl, containsProp, computedWithControl as controlledComputed, controlledRef, createEventHook, createFilterWrapper, createGlobalState, createInjectionState, reactify as createReactiveFn, createRef, createSharedComposable, createSingletonPromise, debounceFilter, refDebounced as debouncedRef, watchDebounced as debouncedWatch, computedEager as eagerComputed, extendRef, formatDate, get, getLifeCycleTarget, hasOwn, hyphenate, identity, watchIgnorable as ignorableWatch, increaseWithUnit, injectLocal, invoke, isClient, isDef, isDefined, isIOS, isObject, isWorker, makeDestructurable, noop, normalizeDate, notNullish, now, objectEntries, objectOmit, objectPick, pausableFilter, watchPausable as pausableWatch, promiseTimeout, provideLocal, pxValue, rand, reactify, reactifyObject, reactiveComputed, reactiveOmit, reactivePick, refAutoReset, refDebounced, refDefault, refThrottled, refWithControl, resolveRef, resolveUnref, set, syncRef, syncRefs, throttleFilter, refThrottled as throttledRef, watchThrottled as throttledWatch, timestamp, toArray, toReactive, toRef, toRefs, toValue, tryOnBeforeMount, tryOnBeforeUnmount, tryOnMounted, tryOnScopeDispose, tryOnUnmounted, until, useArrayDifference, useArrayEvery, useArrayFilter, useArrayFind, useArrayFindIndex, useArrayFindLast, useArrayIncludes, useArrayJoin, useArrayMap, useArrayReduce, useArraySome, useArrayUnique, useCounter, useDateFormat, refDebounced as useDebounce, useDebounceFn, useInterval, useIntervalFn, useLastChanged, refThrottled as useThrottle, useThrottleFn, useTimeout, useTimeoutFn, useToNumber, useToString, useToggle, watchArray, watchAtMost, watchDebounced, watchDeep, watchIgnorable, watchImmediate, watchOnce, watchPausable, watchThrottled, watchTriggerable, watchWithFilter, whenever };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * ACU Visualizer - Parent Style Injection Composable\n *\n *  iframe \n *  teleport  CSS  window.parent.document.head\n */\n\nimport { computed, onMounted, onUnmounted, ref, watch } from 'vue';\nimport { FONTS, THEMES, useConfigStore } from '../stores/useConfigStore';\nimport { useThemeStore } from '../stores/useThemeStore';\nimport { getCore } from '../utils/index';\n\n//  CSS ?raw \nimport compiledStyles from '../styles/index.scss?raw';\n\n//  ID \nconst STYLE_ID_PREFIX = 'acu-styles';\n\n//  ID\nconst DYNAMIC_FONT_ID = 'acu-dynamic-font';\n\n//  CSS ID\nconst THEME_CUSTOM_ID = 'acu-theme-custom';\n\ndeclare function getScriptId(): string;\n\n/**\n *  Hex  RGB \n * @param hex -  \"#d35400\"  \"d35400\"\n * @returns  \"211, 84, 0\"\n */\nfunction hexToRgb(hex: string): string {\n  const h = hex.replace('#', '');\n  const bigint = parseInt(h, 16);\n  const r = (bigint >> 16) & 255;\n  const g = (bigint >> 8) & 255;\n  const b = bigint & 255;\n  return `${r}, ${g}, ${b}`;\n}\n\n/**\n *  Composable\n *\n * \n * 1. \n * 2.  CSS \n * 3. \n * 4. \n * 5. \n */\nexport function useParentStyleInjection() {\n  const configStore = useConfigStore();\n  const themeStore = useThemeStore();\n  const { $ } = getCore();\n\n  //  document\n  const getParentDoc = () => {\n    try {\n      return window.parent?.document || document;\n    } catch {\n      return document;\n    }\n  };\n\n  //  ID\n  const scriptId = computed(() => {\n    try {\n      return getScriptId();\n    } catch {\n      return 'acu-visualizer';\n    }\n  });\n\n  // \n  const baseStyleEl = ref<HTMLStyleElement | null>(null);\n  const dynamicStyleEl = ref<HTMLStyleElement | null>(null);\n  const fontStyleEl = ref<HTMLStyleElement | null>(null);\n  const themeCustomStyleEl = ref<HTMLStyleElement | null>(null);\n\n  // \n  const isInitialized = ref(false);\n\n  //  URL \n  const FONT_IMPORT_URLS: Record<string, string> = {\n    hanchan: 'https://fontsapi.zeoseven.com/3/main/result.css',\n    maple: 'https://fontsapi.zeoseven.com/442/main/result.css',\n    huiwen: 'https://fontsapi.zeoseven.com/256/main/result.css',\n    cooper: 'https://fontsapi.zeoseven.com/482/main/result.css',\n    yffyt: 'https://fontsapi.zeoseven.com/446/main/result.css',\n    fusion: 'https://fontsapi.zeoseven.com/570/main/result.css',\n    wenkai: 'https://fontsapi.zeoseven.com/292/main/result.css',\n    notosans: 'https://fontsapi.zeoseven.com/69/main/result.css',\n    zhuque: 'https://fontsapi.zeoseven.com/7/main/result.css',\n  };\n\n  // \n  const loadedFonts = new Set<string>();\n\n  /**\n   * \n   */\n  const loadFont = (fontId: string): void => {\n    const url = FONT_IMPORT_URLS[fontId];\n    if (!url || fontId === 'default' || loadedFonts.has(fontId)) {\n      return;\n    }\n\n    const parentDoc = getParentDoc();\n    const linkId = `acu-font-${fontId}`;\n\n    // \n    if (parentDoc.getElementById(linkId)) {\n      loadedFonts.add(fontId);\n      return;\n    }\n\n    //  link \n    const link = parentDoc.createElement('link');\n    link.id = linkId;\n    link.rel = 'stylesheet';\n    link.href = url;\n    link.setAttribute('data-source', 'acu-visualizer-font');\n    parentDoc.head.appendChild(link);\n\n    loadedFonts.add(fontId);\n  };\n\n  /**\n   *  CSS \n   */\n  const getFontFamilyValue = (): string => {\n    const fontId = configStore.config.fontFamily || 'default';\n    const font = FONTS.find(f => f.id === fontId);\n    return font?.val || FONTS[0].val;\n  };\n\n  /**\n   * \n   * \n   */\n  const injectBaseStyles = (): void => {\n    const parentDoc = getParentDoc();\n    const styleId = `${STYLE_ID_PREFIX}-base-${scriptId.value}`;\n\n    // \n    if (parentDoc.getElementById(styleId)) {\n      console.info('[ACU Styles] Base styles already injected');\n      baseStyleEl.value = parentDoc.getElementById(styleId) as HTMLStyleElement;\n      return;\n    }\n\n    // \n    const styleEl = parentDoc.createElement('style');\n    styleEl.id = styleId;\n    styleEl.setAttribute('data-source', 'acu-visualizer');\n    styleEl.textContent = compiledStyles;\n    parentDoc.head.appendChild(styleEl);\n    baseStyleEl.value = styleEl;\n\n    console.info('[ACU Styles] Base styles injected');\n  };\n\n  /**\n   * \n   */\n  const injectFontStyles = (): void => {\n    const parentDoc = getParentDoc();\n    const styleId = `${DYNAMIC_FONT_ID}-${scriptId.value}`;\n\n    // \n    parentDoc.getElementById(styleId)?.remove();\n\n    // \n    const styleEl = parentDoc.createElement('style');\n    styleEl.id = styleId;\n    styleEl.setAttribute('data-source', 'acu-visualizer');\n\n    const fontFamily = getFontFamilyValue();\n    styleEl.textContent = `\n      /*  */\n      .acu-wrapper,\n      .acu-modal-container,\n      .acu-attachment-picker-overlay,\n      .acu-app .acu-toast,\n      .acu-edit-dialog,\n      .acu-cell-menu,\n      .acu-nav-container,\n      #acu-ghost-preview {\n        font-family: ${fontFamily} !important;\n      }\n\n      /*  */\n      .acu-wrapper p,\n      .acu-wrapper div:not(.fa):not(.fas):not(.far):not(.fab),\n      .acu-wrapper span:not(.fa):not(.fas):not(.far):not(.fab),\n      .acu-wrapper label,\n      .acu-wrapper button,\n      .acu-wrapper a,\n      .acu-wrapper input,\n      .acu-wrapper select,\n      .acu-wrapper textarea,\n      .acu-wrapper th,\n      .acu-wrapper td,\n      .acu-modal-container p,\n      .acu-modal-container div:not(.fa):not(.fas):not(.far):not(.fab),\n      .acu-modal-container span:not(.fa):not(.fas):not(.far):not(.fab),\n      .acu-modal-container label,\n      .acu-modal-container button,\n      .acu-modal-container a,\n      .acu-modal-container input,\n      .acu-modal-container select,\n      .acu-modal-container textarea,\n      .acu-modal-container th,\n      .acu-modal-container td {\n        font-family: ${fontFamily} !important;\n      }\n\n      /* Toast -  .acu-app  */\n      .acu-app .acu-toast,\n      .acu-app .acu-toast p,\n      .acu-app .acu-toast div,\n      .acu-app .acu-toast span,\n      .acu-app .acu-toast-message {\n        font-family: ${fontFamily} !important;\n        color: var(--acu-text-main) !important;\n        text-shadow: none !important;\n      }\n\n      /* Toast  */\n      .acu-app .acu-toast i {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n        color: var(--acu-text-main) !important;\n      }\n\n      /* Tab/ -  */\n      .acu-tab-btn,\n      .acu-tab-btn span,\n      .acu-tab-btn i,\n      .acu-nav-btn,\n      .acu-nav-btn span,\n      .acu-nav-btn i {\n        font-family: ${fontFamily} !important;\n        text-shadow: none !important;\n        color: var(--acu-text-main) !important;\n      }\n\n      /*  - () */\n      .acu-nav-btn.active,\n      .acu-nav-btn.active span,\n      .acu-nav-btn.active i {\n        background: var(--acu-text-main) !important;\n        background-color: var(--acu-text-main) !important;\n        color: var(--acu-bg-panel) !important;\n      }\n\n      /*  */\n      .acu-data-card,\n      .acu-data-card p,\n      .acu-data-card div:not(.fa):not(.fas):not(.far):not(.fab),\n      .acu-data-card span:not(.fa):not(.fas):not(.far):not(.fab),\n      .acu-card-label,\n      .acu-card-value,\n      .acu-grid-label,\n      .acu-grid-value,\n      .acu-full-label,\n      .acu-full-value,\n      .acu-editable-title {\n        font-family: ${fontFamily} !important;\n        text-shadow: none !important;\n      }\n\n      /*  */\n      .acu-panel-title,\n      .acu-settings-label,\n      .acu-btn-block,\n      .acu-nav-btn,\n      .acu-edit-textarea {\n        font-family: ${fontFamily} !important;\n      }\n\n      /*  Font Awesome  */\n      .acu-wrapper i.fa,\n      .acu-wrapper i.fas,\n      .acu-wrapper i.far,\n      .acu-wrapper i.fab,\n      .acu-wrapper .fa,\n      .acu-wrapper .fas,\n      .acu-wrapper .far,\n      .acu-wrapper .fab,\n      .acu-modal-container i.fa,\n      .acu-modal-container i.fas,\n      .acu-modal-container i.far,\n      .acu-modal-container i.fab,\n      .acu-modal-container .fa,\n      .acu-modal-container .fas,\n      .acu-modal-container .far,\n      .acu-modal-container .fab {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n      }\n\n      /*  -  text-shadow */\n      .acu-wrapper p,\n      .acu-wrapper div,\n      .acu-wrapper span,\n      .acu-wrapper label,\n      .acu-wrapper button,\n      .acu-modal-container p,\n      .acu-modal-container div,\n      .acu-modal-container span,\n      .acu-modal-container label,\n      .acu-modal-container button {\n        text-shadow: none !important;\n      }\n\n      /*  -  +  */\n      .acu-editable-title,\n      .acu-panel-title {\n        color: var(--acu-title-color) !important;\n        font-family: ${fontFamily} !important;\n      }\n\n      /*  */\n      .acu-dash-title,\n      .acu-dash-title span,\n      .acu-dash-title-text {\n        font-family: ${fontFamily} !important;\n        color: var(--acu-title-color) !important;\n        text-shadow: none !important;\n      }\n\n      /*  */\n      .acu-dash-title i,\n      .acu-dash-empty i,\n      .acu-dash-card i,\n      .acu-dash-npc-item i {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n        color: var(--acu-text-sub) !important;\n      }\n\n      /*  */\n      .acu-dash-empty,\n      .acu-dash-empty span {\n        font-family: ${fontFamily} !important;\n        color: var(--acu-text-sub) !important;\n        text-shadow: none !important;\n      }\n\n      /* \"\" */\n      .acu-empty-state,\n      .acu-empty-state p,\n      .acu-empty-state span,\n      .acu-no-data {\n        font-family: ${fontFamily} !important;\n        color: var(--acu-text-sub) !important;\n        text-shadow: none !important;\n      }\n\n      /*  */\n      .acu-empty-state i {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n        color: var(--acu-text-sub) !important;\n      }\n\n      /*  label -  */\n      label.acu-card-label,\n      label.acu-grid-label,\n      label.acu-full-label,\n      .acu-data-card label.acu-card-label,\n      .acu-data-card label.acu-grid-label,\n      .acu-data-card label.acu-full-label,\n      .acu-wrapper label.acu-card-label,\n      .acu-wrapper label.acu-grid-label,\n      .acu-wrapper label.acu-full-label {\n        font-family: ${fontFamily} !important;\n        font-size: calc(var(--acu-font-size, 13px) - 2px) !important;\n        text-shadow: none !important;\n      }\n\n      /* hint -  */\n      .acu-wrapper .hint,\n      .acu-wrapper .acu-text-sub,\n      .acu-modal-container .hint,\n      .acu-modal-container .acu-text-sub,\n      .acu-settings-label .hint {\n        color: var(--acu-text-sub) !important;\n        font-size: calc(var(--acu-font-size, 13px) - 2px) !important;\n      }\n\n      /* Tab/Nav  Font Awesome */\n      .acu-tab-btn i,\n      .acu-nav-btn i {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n      }\n\n      /*  */\n      .acu-manual-update-dialog p,\n      .acu-manual-update-dialog div,\n      .acu-manual-update-dialog span,\n      .acu-manual-update-dialog label,\n      .acu-modal-body p,\n      .acu-modal-body div,\n      .acu-modal-body span,\n      .acu-modal-body label {\n        color: var(--acu-text-main) !important;\n        text-shadow: none !important;\n      }\n\n      /*  -  */\n      .acu-modal-back,\n      .acu-modal-back i,\n      .acu-back-btn,\n      .acu-back-btn i {\n        color: var(--acu-text-main) !important;\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n      }\n\n      /*  */\n      .acu-modal-close i,\n      .acu-close-pill i {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n        color: inherit !important;\n      }\n\n      /*  -  */\n      .acu-wrapper button,\n      .acu-modal-container button,\n      .acu-close-pill,\n      .acu-tool-btn,\n      .acu-btn,\n      .acu-btn-primary,\n      .acu-btn-secondary,\n      .acu-btn-danger,\n      .acu-btn-save,\n      .btn-cancel,\n      .btn-confirm,\n      .acu-preset-dropdown-btn,\n      .acu-modal-btn,\n      .acu-action-btn,\n      .acu-page-btn,\n      .acu-dialog-btn {\n        font-family: ${fontFamily} !important;\n      }\n\n      /* CSS */\n      .acu-theme-panel button,\n      .acu-css-actions button,\n      .acu-css-actions .acu-tool-btn {\n        font-family: ${fontFamily} !important;\n      }\n\n      /*  */\n      .acu-avatar-manager-modal button,\n      .acu-avatar-manager-modal label,\n      .acu-avatar-manager-modal span,\n      .acu-avatar-manager button,\n      .acu-avatar-manager label,\n      .acu-avatar-manager span,\n      .acu-avatar-dialog button,\n      .acu-avatar-dialog label,\n      .acu-avatar-dialog span {\n        font-family: ${fontFamily} !important;\n      }\n\n      /*  -  */\n      .acu-modal-header i:not(.acu-close-pill i),\n      .acu-settings-title i {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n        color: var(--acu-text-main) !important;\n      }\n    `;\n\n    parentDoc.head.appendChild(styleEl);\n    fontStyleEl.value = styleEl;\n\n    console.info('[ACU Styles] Font styles injected');\n  };\n\n  /**\n   * \n   */\n  const createDynamicStyleElement = (): void => {\n    const parentDoc = getParentDoc();\n    const styleId = `${STYLE_ID_PREFIX}-dynamic-${scriptId.value}`;\n\n    // \n    parentDoc.getElementById(styleId)?.remove();\n\n    // \n    const styleEl = parentDoc.createElement('style');\n    styleEl.id = styleId;\n    styleEl.setAttribute('data-source', 'acu-visualizer');\n    parentDoc.head.appendChild(styleEl);\n    dynamicStyleEl.value = styleEl;\n\n    console.info('[ACU Styles] Dynamic styles element created');\n  };\n\n  /**\n   *  CSS \n   */\n  const updateDynamicVariables = (): void => {\n    if (!dynamicStyleEl.value) return;\n\n    const config = configStore.config;\n    const highlightColor = configStore.highlightColorObj;\n    const highlightManualColor = configStore.highlightManualColorObj;\n    const highlightAiColor = configStore.highlightAiColorObj;\n    const titleColor = configStore.titleColorObj;\n\n    // \n    const gridColumnsCss =\n      config.gridColumns && config.gridColumns > 0\n        ? `repeat(${config.gridColumns}, 1fr)`\n        : 'repeat(auto-fill, minmax(110px, 1fr))';\n\n    //  CSS \n    const dynamicCSS = `\n      .acu-wrapper,\n      .acu-modal-container,\n      .acu-attachment-picker-overlay,\n      .acu-app .acu-toast,\n      .acu-cell-menu {\n        /*  */\n        --acu-card-width: ${config.cardWidth || 280}px;\n        --acu-font-size: ${config.fontSize || 13}px;\n\n        /*  () */\n        --acu-highlight: ${highlightColor.main};\n        --acu-highlight-bg: ${highlightColor.bg};\n        --acu-accent: ${highlightColor.main};\n\n        /*  */\n        --acu-highlight-manual: ${highlightManualColor.main};\n        --acu-highlight-manual-bg: ${highlightManualColor.bg};\n\n        /* AI */\n        --acu-highlight-ai: ${highlightAiColor.main};\n        --acu-highlight-ai-bg: ${highlightAiColor.bg};\n\n        /*  */\n        --acu-title-color: ${titleColor.main};\n        --acu-title-color-bg: ${titleColor.bg};\n        --acu-title-color-rgb: ${hexToRgb(titleColor.main)};\n\n        /*  */\n        --acu-nav-cols: ${gridColumnsCss};\n\n        /*  */\n        --acu-text-max-height: ${config.limitLongText !== false ? '80px' : 'none'};\n        --acu-text-overflow: ${config.limitLongText !== false ? 'auto' : 'visible'};\n      }\n\n      /* ============================================================\n       *  ()\n       * ============================================================ */\n\n      /*  () -  */\n      .acu-cell-changed-manual .acu-grid-value,\n      .acu-cell-changed-manual .acu-full-value,\n      .acu-cell-changed-manual .acu-card-value,\n      .acu-cell-changed-manual .acu-grid-value *,\n      .acu-cell-changed-manual .acu-full-value *,\n      .acu-cell-changed-manual .acu-card-value *,\n      .acu-row-changed-manual .acu-editable-title {\n        color: var(--acu-highlight-manual) !important;\n        font-weight: 600;\n      }\n\n      /* AI () -  */\n      .acu-cell-changed-ai .acu-grid-value,\n      .acu-cell-changed-ai .acu-full-value,\n      .acu-cell-changed-ai .acu-card-value,\n      .acu-cell-changed-ai .acu-grid-value *,\n      .acu-cell-changed-ai .acu-full-value *,\n      .acu-cell-changed-ai .acu-card-value *,\n      .acu-row-changed-ai .acu-editable-title {\n        color: var(--acu-highlight-ai) !important;\n        font-weight: 600;\n      }\n\n      /*  () */\n      .acu-cell-changed:not(.acu-cell-changed-manual):not(.acu-cell-changed-ai) .acu-grid-value,\n      .acu-cell-changed:not(.acu-cell-changed-manual):not(.acu-cell-changed-ai) .acu-full-value,\n      .acu-cell-changed:not(.acu-cell-changed-manual):not(.acu-cell-changed-ai) .acu-card-value,\n      .acu-cell-changed:not(.acu-cell-changed-manual):not(.acu-cell-changed-ai) .acu-grid-value *,\n      .acu-cell-changed:not(.acu-cell-changed-manual):not(.acu-cell-changed-ai) .acu-full-value *,\n      .acu-cell-changed:not(.acu-cell-changed-manual):not(.acu-cell-changed-ai) .acu-card-value *,\n      .acu-highlight-changed {\n        color: var(--acu-title-color) !important;\n        font-weight: 600;\n      }\n\n      /* ============================================================\n       *  - \n       *  + !important \n       * ============================================================ */\n\n      /*  (Range Input)  */\n      .acu-wrapper input[type=\"range\"],\n      .acu-modal-container input[type=\"range\"],\n      .acu-settings-control input[type=\"range\"] {\n        -webkit-appearance: none !important;\n        -moz-appearance: none !important;\n        appearance: none !important;\n        background: transparent !important;\n        background-color: transparent !important;\n        background-image: none !important;\n        border: none !important;\n        box-shadow: none !important;\n        outline: none !important;\n        width: 120px !important;\n        height: 20px !important;\n      }\n\n      /*  - Webkit */\n      .acu-wrapper input[type=\"range\"]::-webkit-slider-thumb,\n      .acu-modal-container input[type=\"range\"]::-webkit-slider-thumb,\n      .acu-settings-control input[type=\"range\"]::-webkit-slider-thumb {\n        -webkit-appearance: none !important;\n        appearance: none !important;\n        width: 16px !important;\n        height: 16px !important;\n        background: var(--acu-title-color) !important;\n        background-color: var(--acu-title-color) !important;\n        background-image: none !important;\n        border-radius: 50% !important;\n        border: none !important;\n        margin-top: -5px !important;\n        cursor: pointer !important;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;\n      }\n\n      /*  - Webkit */\n      .acu-wrapper input[type=\"range\"]::-webkit-slider-runnable-track,\n      .acu-modal-container input[type=\"range\"]::-webkit-slider-runnable-track,\n      .acu-settings-control input[type=\"range\"]::-webkit-slider-runnable-track {\n        -webkit-appearance: none !important;\n        width: 100% !important;\n        height: 6px !important;\n        background: var(--acu-border) !important;\n        background-color: var(--acu-border) !important;\n        background-image: none !important;\n        border-radius: 3px !important;\n        border: none !important;\n        cursor: pointer !important;\n        box-shadow: none !important;\n      }\n\n      /*  - Firefox */\n      .acu-wrapper input[type=\"range\"]::-moz-range-thumb,\n      .acu-modal-container input[type=\"range\"]::-moz-range-thumb,\n      .acu-settings-control input[type=\"range\"]::-moz-range-thumb {\n        -moz-appearance: none !important;\n        width: 16px !important;\n        height: 16px !important;\n        background: var(--acu-title-color) !important;\n        background-color: var(--acu-title-color) !important;\n        background-image: none !important;\n        border-radius: 50% !important;\n        border: none !important;\n        cursor: pointer !important;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;\n      }\n\n      /*  - Firefox */\n      .acu-wrapper input[type=\"range\"]::-moz-range-track,\n      .acu-modal-container input[type=\"range\"]::-moz-range-track,\n      .acu-settings-control input[type=\"range\"]::-moz-range-track {\n        -moz-appearance: none !important;\n        width: 100% !important;\n        height: 6px !important;\n        background: var(--acu-border) !important;\n        background-color: var(--acu-border) !important;\n        background-image: none !important;\n        border-radius: 3px !important;\n        border: none !important;\n        cursor: pointer !important;\n        box-shadow: none !important;\n      }\n\n      /* /  */\n      .acu-wrapper input[type=\"text\"],\n      .acu-wrapper input[type=\"number\"],\n      .acu-wrapper input[type=\"password\"],\n      .acu-wrapper select,\n      .acu-wrapper textarea,\n      .acu-modal-container input[type=\"text\"],\n      .acu-modal-container input[type=\"number\"],\n      .acu-modal-container input[type=\"password\"],\n      .acu-modal-container select,\n      .acu-modal-container textarea,\n      .acu-settings-control input[type=\"text\"],\n      .acu-settings-control input[type=\"number\"],\n      .acu-settings-control select {\n        background: var(--acu-card-bg) !important;\n        background-color: var(--acu-card-bg) !important;\n        background-image: none !important;\n        border: 1px solid var(--acu-border) !important;\n        border-radius: 6px !important;\n        color: var(--acu-text-main) !important;\n        font-family: inherit !important;\n        font-size: 13px !important;\n        text-shadow: none !important;\n        box-shadow: none !important;\n        backdrop-filter: none !important;\n        filter: none !important;\n      }\n\n      .acu-wrapper input[type=\"text\"]:hover,\n      .acu-wrapper input[type=\"number\"]:hover,\n      .acu-wrapper select:hover,\n      .acu-modal-container input[type=\"text\"]:hover,\n      .acu-modal-container input[type=\"number\"]:hover,\n      .acu-modal-container select:hover,\n      .acu-settings-control input:hover,\n      .acu-settings-control select:hover {\n        border-color: var(--acu-title-color) !important;\n        background: var(--acu-card-bg) !important;\n        background-color: var(--acu-card-bg) !important;\n        background-image: none !important;\n        box-shadow: 0 0 0 2px var(--acu-title-color-bg) !important;\n      }\n\n      .acu-wrapper input[type=\"text\"]:focus,\n      .acu-wrapper input[type=\"number\"]:focus,\n      .acu-wrapper select:focus,\n      .acu-modal-container input[type=\"text\"]:focus,\n      .acu-modal-container input[type=\"number\"]:focus,\n      .acu-modal-container select:focus,\n      .acu-settings-control input:focus,\n      .acu-settings-control select:focus {\n        border-color: var(--acu-title-color) !important;\n        background: var(--acu-card-bg) !important;\n        background-color: var(--acu-card-bg) !important;\n        background-image: none !important;\n        box-shadow: 0 0 0 2px var(--acu-title-color-bg) !important;\n        outline: none !important;\n      }\n\n      /*  */\n      .acu-wrapper select,\n      .acu-modal-container select,\n      .acu-settings-control select {\n        -webkit-appearance: none !important;\n        -moz-appearance: none !important;\n        appearance: none !important;\n        padding-right: 30px !important;\n        background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23666'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E\") !important;\n        background-repeat: no-repeat !important;\n        background-position: right 8px center !important;\n        background-size: 16px !important;\n      }\n\n      /*   */\n      .acu-wrapper::-webkit-scrollbar,\n      .acu-wrapper *::-webkit-scrollbar,\n      .acu-modal-container::-webkit-scrollbar,\n      .acu-modal-container *::-webkit-scrollbar {\n        width: 6px !important;\n        height: 6px !important;\n      }\n\n      .acu-wrapper::-webkit-scrollbar-track,\n      .acu-wrapper *::-webkit-scrollbar-track,\n      .acu-modal-container::-webkit-scrollbar-track,\n      .acu-modal-container *::-webkit-scrollbar-track {\n        background: transparent !important;\n        background-color: transparent !important;\n      }\n\n      .acu-wrapper::-webkit-scrollbar-thumb,\n      .acu-wrapper *::-webkit-scrollbar-thumb,\n      .acu-modal-container::-webkit-scrollbar-thumb,\n      .acu-modal-container *::-webkit-scrollbar-thumb {\n        background: var(--acu-border) !important;\n        background-color: var(--acu-border) !important;\n        background-image: none !important;\n        border-radius: 3px !important;\n        border: none !important;\n        box-shadow: none !important;\n      }\n\n      .acu-wrapper::-webkit-scrollbar-thumb:hover,\n      .acu-wrapper *::-webkit-scrollbar-thumb:hover,\n      .acu-modal-container::-webkit-scrollbar-thumb:hover,\n      .acu-modal-container *::-webkit-scrollbar-thumb:hover {\n        background: var(--acu-text-sub) !important;\n        background-color: var(--acu-text-sub) !important;\n      }\n\n      /*   -  font-family */\n      /* font-size  !important .acu-global-time-primary { font-size: 1.4em } */\n      .acu-wrapper,\n      .acu-wrapper p,\n      .acu-wrapper div,\n      .acu-wrapper span,\n      .acu-wrapper label,\n      .acu-wrapper li,\n      .acu-wrapper a,\n      .acu-wrapper button,\n      .acu-wrapper th,\n      .acu-wrapper td,\n      .acu-modal-container,\n      .acu-modal-container p,\n      .acu-modal-container div,\n      .acu-modal-container span,\n      .acu-modal-container label,\n      .acu-modal-container li,\n      .acu-modal-container a,\n      .acu-modal-container button,\n      .acu-modal-container th,\n      .acu-modal-container td {\n        font-family: var(--acu-font-family) !important;\n        font-size: var(--acu-font-size, 13px);\n        text-shadow: none !important;\n        line-height: 1.5;\n      }\n\n      /*  -  */\n      .acu-settings-label,\n      .acu-card-label,\n      .acu-grid-label,\n      .acu-full-label,\n      .acu-wrapper .acu-card-value,\n      .acu-wrapper .acu-grid-value,\n      .acu-modal-container .acu-modal-body {\n        color: var(--acu-text-main) !important;\n        font-size: var(--acu-font-size, 13px) !important;\n      }\n\n      /*  */\n      .acu-wrapper .hint,\n      .acu-wrapper .acu-text-sub,\n      .acu-modal-container .hint,\n      .acu-modal-container .acu-text-sub,\n      .acu-settings-label .hint {\n        color: var(--acu-text-sub) !important;\n        font-size: 11px !important;\n      }\n\n      /*  -  --acu-title-color  */\n      .acu-wrapper h1,\n      .acu-wrapper h2,\n      .acu-wrapper h3,\n      .acu-wrapper h4,\n      .acu-wrapper h5,\n      .acu-wrapper h6,\n      .acu-modal-container h1,\n      .acu-modal-container h2,\n      .acu-modal-container h3,\n      .acu-modal-container h4,\n      .acu-modal-container h5,\n      .acu-modal-container h6 {\n        color: var(--acu-title-color) !important;\n        text-shadow: none !important;\n        font-weight: 600 !important;\n      }\n\n      /*  -  --acu-text-main */\n      .acu-settings-title,\n      .acu-modal-title {\n        color: var(--acu-text-main) !important;\n        text-shadow: none !important;\n        font-weight: 600 !important;\n      }\n\n      /*  -  --acu-title-color +  */\n      .acu-panel-title,\n      .acu-editable-title,\n      .acu-card-label,\n      .acu-grid-label,\n      .acu-full-label {\n        color: var(--acu-title-color) !important;\n        font-family: var(--acu-font-family) !important;\n        text-shadow: none !important;\n        font-weight: 600 !important;\n      }\n\n      /* Tab  -  */\n      .acu-tab-btn,\n      .acu-tab-btn span,\n      .acu-nav-btn,\n      .acu-action-btn {\n        font-family: var(--acu-font-family) !important;\n        font-size: var(--acu-font-size, 13px) !important;\n        text-shadow: none !important;\n      }\n\n\n      /* Tab  */\n      .acu-tab-btn,\n      .acu-nav-btn,\n      .acu-action-btn {\n        font-family: var(--acu-font-family) !important;\n        font-size: var(--acu-font-size, 13px) !important;\n        text-shadow: none !important;\n      }\n\n      /*  */\n      .acu-settings-section .acu-settings-title,\n      .acu-config-section h4,\n      .acu-collapse-header,\n      .acu-collapse-title,\n      summary {\n        font-family: var(--acu-font-family) !important;\n        font-size: var(--acu-font-size, 13px) !important;\n        color: var(--acu-text-main) !important;\n        text-shadow: none !important;\n      }\n\n      /*  - Font Awesome  */\n      .acu-wrapper i.fa,\n      .acu-wrapper i.fas,\n      .acu-wrapper i.far,\n      .acu-wrapper i.fab,\n      .acu-wrapper .fa,\n      .acu-wrapper .fas,\n      .acu-wrapper .far,\n      .acu-wrapper .fab,\n      .acu-modal-container i.fa,\n      .acu-modal-container i.fas,\n      .acu-modal-container i.far,\n      .acu-modal-container i.fab,\n      .acu-modal-container .fa,\n      .acu-modal-container .fas,\n      .acu-modal-container .far,\n      .acu-modal-container .fab {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n      }\n    `;\n\n    dynamicStyleEl.value.textContent = dynamicCSS;\n  };\n\n  /**\n   *  CSS \n   */\n  const createThemeCustomStyleElement = (): void => {\n    const parentDoc = getParentDoc();\n    const styleId = `${THEME_CUSTOM_ID}-${scriptId.value}`;\n\n    // \n    parentDoc.getElementById(styleId)?.remove();\n\n    // \n    const styleEl = parentDoc.createElement('style');\n    styleEl.id = styleId;\n    styleEl.setAttribute('data-source', 'acu-visualizer-theme');\n    parentDoc.head.appendChild(styleEl);\n    themeCustomStyleEl.value = styleEl;\n\n    console.info('[ACU Styles] Theme custom styles element created');\n  };\n\n  /**\n   *  CSS\n   *  themeStore  CSS\n   */\n  const updateThemeCustomStyles = (): void => {\n    if (!themeCustomStyleEl.value) return;\n\n    //  themeStore  CSS\n    const customCSS = themeStore.getFullInjectedCSS();\n    themeCustomStyleEl.value.textContent = customCSS;\n\n    console.info('[ACU Styles] Theme custom styles updated');\n  };\n\n  /**\n   * \n   *  .acu-theme-* \n   */\n  const applyTheme = (themeId?: string): void => {\n    const parentDoc = getParentDoc();\n    const wrapper = parentDoc.querySelector('.acu-wrapper');\n    if (!wrapper) return;\n\n    const targetTheme = themeId || configStore.config.theme || 'retro';\n\n    // \n    THEMES.forEach(theme => {\n      wrapper.classList.remove(`acu-theme-${theme.id}`);\n    });\n\n    // \n    wrapper.classList.add(`acu-theme-${targetTheme}`);\n\n    console.info(`[ACU Styles] Theme applied: ${targetTheme}`);\n  };\n\n  /**\n   * \n   */\n  const applyLayout = (layout?: 'vertical' | 'horizontal'): void => {\n    const parentDoc = getParentDoc();\n    const display = parentDoc.querySelector('.acu-data-display');\n    if (!display) return;\n\n    const targetLayout = layout || configStore.config.layout || 'vertical';\n\n    display.classList.remove('acu-layout-vertical', 'acu-layout-horizontal');\n    display.classList.add(`acu-layout-${targetLayout}`);\n\n    console.info(`[ACU Styles] Layout applied: ${targetLayout}`);\n  };\n\n  /**\n   * \n   */\n  const applyFont = (fontId?: string): void => {\n    const targetFontId = fontId || configStore.config.fontFamily || 'default';\n\n    // \n    loadFont(targetFontId);\n\n    // \n    injectFontStyles();\n\n    console.info(`[ACU Styles] Font applied: ${targetFontId}`);\n  };\n\n  /**\n   * \n   * \n   */\n  const applyAllStyles = (): void => {\n    updateDynamicVariables();\n    updateThemeCustomStyles();\n    applyTheme();\n    applyLayout();\n    applyFont();\n  };\n\n  /**\n   * \n   */\n  const cleanup = (): void => {\n    const parentDoc = getParentDoc();\n    const id = scriptId.value;\n\n    // \n    parentDoc.getElementById(`${STYLE_ID_PREFIX}-base-${id}`)?.remove();\n\n    // \n    parentDoc.getElementById(`${STYLE_ID_PREFIX}-dynamic-${id}`)?.remove();\n\n    // \n    parentDoc.getElementById(`${DYNAMIC_FONT_ID}-${id}`)?.remove();\n\n    //  link\n    loadedFonts.forEach(fontId => {\n      parentDoc.getElementById(`acu-font-${fontId}`)?.remove();\n    });\n    loadedFonts.clear();\n\n    // \n    parentDoc.getElementById(`${THEME_CUSTOM_ID}-${id}`)?.remove();\n\n    baseStyleEl.value = null;\n    dynamicStyleEl.value = null;\n    fontStyleEl.value = null;\n    themeCustomStyleEl.value = null;\n    isInitialized.value = false;\n\n    console.info('[ACU Styles] Styles cleaned up');\n  };\n\n  /**\n   * \n   */\n  const init = (): void => {\n    if (isInitialized.value) {\n      console.info('[ACU Styles] Already initialized');\n      return;\n    }\n\n    // \n    injectBaseStyles();\n\n    // \n    applyFont();\n\n    // \n    createDynamicStyleElement();\n\n    // \n    createThemeCustomStyleElement();\n\n    // \n    themeStore.loadFromStorage();\n\n    // \n    updateDynamicVariables();\n\n    // \n    updateThemeCustomStyles();\n\n    isInitialized.value = true;\n    console.info('[ACU Styles] Style system initialized');\n  };\n\n  // \n  watch(\n    () => configStore.config,\n    newConfig => {\n      if (!isInitialized.value) return;\n\n      // \n      updateDynamicVariables();\n\n      // \n      applyTheme(newConfig.theme);\n\n      // \n      applyLayout(newConfig.layout);\n    },\n    { deep: true },\n  );\n\n  // \n  watch(\n    () => configStore.config.fontFamily,\n    newFontId => {\n      if (!isInitialized.value) return;\n      applyFont(newFontId);\n    },\n  );\n\n  // \n  watch(\n    [\n      () => themeStore.currentThemeVars,\n      () => themeStore.currentHighlight,\n      () => themeStore.customCSS,\n      () => themeStore.backgroundConfig,\n    ],\n    () => {\n      if (!isInitialized.value) return;\n      updateThemeCustomStyles();\n    },\n    { deep: true },\n  );\n\n  // \n  onMounted(() => {\n    init();\n  });\n\n  onUnmounted(() => {\n    cleanup();\n  });\n\n  return {\n    // \n    isInitialized,\n\n    // \n    init,\n    cleanup,\n    updateDynamicVariables,\n    updateThemeCustomStyles,\n    applyTheme,\n    applyLayout,\n    applyFont,\n    applyAllStyles,\n\n    // \n    baseStyleEl,\n    dynamicStyleEl,\n    fontStyleEl,\n    themeCustomStyleEl,\n  };\n}\n\n// \nexport type UseParentStyleInjection = ReturnType<typeof useParentStyleInjection>;\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Composable\n *  AutoCardUpdater \n *\n * \n * -  api.getSettings() / api.updateSettings() \n * -  localStorage  shujuku_*_allSettings_v2\n */\n\nimport { ref } from 'vue';\nimport { getCore } from '../utils';\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport interface DbSettings {\n  /** AI */\n  autoUpdateThreshold?: number;\n  /** N */\n  autoUpdateFrequency?: number;\n  /**  */\n  updateBatchSize?: number;\n  /** X */\n  skipUpdateFloors?: number;\n  /**  */\n  [key: string]: unknown;\n}\n\n/**  ( API ) */\nexport interface TableInfo {\n  /**  key ( sheet_0) */\n  key: string;\n  /**  */\n  name: string;\n  /** / */\n  isSummaryOrOutline: boolean;\n}\n\n/**  */\nexport interface PresetExecuteResult {\n  success: boolean;\n  message: string;\n  affectedTables?: string[];\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n *  Key ()\n * @returns localStorage \n */\nfunction findDatabaseSettingsKey(): string {\n  // \n  const direct80 = 'shujuku_v80_allSettings_v2';\n  if (localStorage.getItem(direct80)) return direct80;\n\n  const direct70 = 'shujuku_v70_allSettings_v2';\n  if (localStorage.getItem(direct70)) return direct70;\n\n  // \n  const keys = Object.keys(localStorage || {});\n  const found = keys.find(k => /^shujuku_.*_allSettings_v2$/.test(k));\n\n  return found || direct80;\n}\n\n/**\n *  localStorage \n */\nfunction readFromLocalStorage(): DbSettings {\n  try {\n    const key = findDatabaseSettingsKey();\n    const raw = localStorage.getItem(key);\n    return raw ? JSON.parse(raw) : {};\n  } catch (e) {\n    console.warn('[ACU]  localStorage :', e);\n    return {};\n  }\n}\n\n/**\n *  localStorage\n */\nfunction writeToLocalStorage(settings: DbSettings): void {\n  try {\n    const key = findDatabaseSettingsKey();\n    const existing = readFromLocalStorage();\n    localStorage.setItem(key, JSON.stringify({ ...existing, ...settings }));\n  } catch (e) {\n    console.warn('[ACU]  localStorage :', e);\n  }\n}\n\n// ============================================================\n// Composable\n// ============================================================\n\nexport function useDbSettings() {\n  /**  */\n  const settings = ref<DbSettings>({});\n\n  /**  */\n  const isLoading = ref(false);\n\n  /**  */\n  const isInitialized = ref(false);\n\n  /**\n   * \n   *  localStorage \n   */\n  async function loadSettings(): Promise<DbSettings> {\n    isLoading.value = true;\n\n    try {\n      //  localStorage \n      const localSettings = readFromLocalStorage();\n      settings.value = localSettings;\n      console.info('[ACU]  localStorage ');\n      return localSettings;\n    } catch (e) {\n      console.error('[ACU] :', e);\n      settings.value = {};\n      return {};\n    } finally {\n      isLoading.value = false;\n      isInitialized.value = true;\n    }\n  }\n\n  /**\n   * \n   *  API localStorage\n   * @param newSettings \n   */\n  async function saveSettings(newSettings: Partial<DbSettings>): Promise<boolean> {\n    try {\n      const api = getCore().getDB();\n\n      // \n      const mergedSettings = { ...settings.value, ...newSettings };\n\n      //  API\n      if (api && typeof api.updateSettings === 'function') {\n        await api.updateSettings(mergedSettings);\n        settings.value = mergedSettings;\n        console.info('[ACU]  API ');\n        return true;\n      }\n\n      //  localStorage\n      writeToLocalStorage(mergedSettings);\n      settings.value = mergedSettings;\n      console.info('[ACU]  localStorage ');\n      return true;\n    } catch (e) {\n      console.error('[ACU] :', e);\n      //  localStorage\n      try {\n        writeToLocalStorage({ ...settings.value, ...newSettings });\n        settings.value = { ...settings.value, ...newSettings };\n        return true;\n      } catch {\n        return false;\n      }\n    }\n  }\n\n  /**\n   * \n   * @param key \n   * @param value \n   */\n  async function updateSetting<K extends keyof DbSettings>(key: K, value: DbSettings[K]): Promise<void> {\n    await saveSettings({ [key]: value } as Partial<DbSettings>);\n  }\n\n  /**\n   * \n   *  api.manualUpdate() api.triggerUpdate()\n   */\n  async function executeManualUpdate(): Promise<boolean> {\n    try {\n      const api = getCore().getDB();\n\n      if (!api) {\n        console.warn('[ACU]  API ');\n        return false;\n      }\n\n      //  manualUpdate\n      if (typeof api.manualUpdate === 'function') {\n        await api.manualUpdate();\n        console.info('[ACU]  (manualUpdate)');\n        return true;\n      }\n\n      //  triggerUpdate\n      if (typeof api.triggerUpdate === 'function') {\n        const result = await api.triggerUpdate();\n        console.info('[ACU]  (triggerUpdate):', result);\n        return !!result;\n      }\n\n      console.warn('[ACU] ');\n      return false;\n    } catch (e) {\n      console.error('[ACU] :', e);\n      return false;\n    }\n  }\n\n  /**\n   * \n   *  UI\n   */\n  function getTableList(): TableInfo[] {\n    try {\n      const api = getCore().getDB();\n\n      if (!api) {\n        console.warn('[ACU]  API ');\n        return [];\n      }\n\n      //  API\n      if (typeof api.getTableList === 'function') {\n        const list = api.getTableList();\n        console.info('[ACU] :', list?.length || 0);\n        return list || [];\n      }\n\n      //  exportTableAsJson \n      if (typeof api.exportTableAsJson === 'function') {\n        const data = api.exportTableAsJson();\n        if (data && typeof data === 'object') {\n          const tables: TableInfo[] = [];\n          Object.keys(data).forEach(key => {\n            if (!key.startsWith('sheet_')) return;\n            const table = data[key];\n            const name = table?.name || key;\n            // /\n            const isSummaryOrOutline =\n              name.includes('') ||\n              name.includes('') ||\n              name.toLowerCase().includes('summary') ||\n              name.toLowerCase().includes('outline');\n            tables.push({ key, name, isSummaryOrOutline });\n          });\n          console.info('[ACU]  exportTableAsJson :', tables.length);\n          return tables;\n        }\n      }\n\n      console.warn('[ACU] ');\n      return [];\n    } catch (e) {\n      console.error('[ACU] :', e);\n      return [];\n    }\n  }\n\n  /**\n   *  API\n   * \n   *\n   * @param presetSettings \n   * @param targetTableNames =\n   * @param silent \n   */\n  async function executeWithPreset(\n    presetSettings: Partial<DbSettings>,\n    targetTableNames: string[] = [],\n    silent = false,\n  ): Promise<PresetExecuteResult> {\n    try {\n      const api = getCore().getDB();\n\n      if (!api) {\n        return { success: false, message: ' API ' };\n      }\n\n      //  API: executeWithPreset\n      if (typeof api.executeWithPreset === 'function') {\n        const result = await api.executeWithPreset({\n          settings: {\n            autoUpdateThreshold: presetSettings.autoUpdateThreshold,\n            updateBatchSize: presetSettings.updateBatchSize,\n            skipUpdateFloors: presetSettings.skipUpdateFloors,\n            autoUpdateFrequency: presetSettings.autoUpdateFrequency,\n          },\n          targetTableNames: targetTableNames.length > 0 ? targetTableNames : null,\n          silent,\n        });\n        console.info('[ACU] executeWithPreset :', result);\n        return result as PresetExecuteResult;\n      }\n\n      // \n      console.info('[ACU] : saveSettings + executeManualUpdate');\n      await saveSettings(presetSettings);\n      const success = await executeManualUpdate();\n      return {\n        success,\n        message: success ? '' : '',\n      };\n    } catch (e) {\n      console.error('[ACU] :', e);\n      return { success: false, message: String(e) };\n    }\n  }\n\n  return {\n    // \n    settings,\n    isLoading,\n    isInitialized,\n\n    // \n    loadSettings,\n    saveSettings,\n    updateSetting,\n    executeManualUpdate,\n    getTableList,\n    executeWithPreset,\n\n    // \n    findDatabaseSettingsKey,\n  };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Composable\n * \n *\n * \n * - : api.exportTableAsJson()\n * - : api.getTableTemplate() ( updateConfig)\n * - : extensionSettings.__userscripts[shujuku_*]  localStorage \n * - : chat[].TavernDB_ACU_IsolatedData\n *\n * \n * - 9.5: localStorage shujuku_*_allSettings_v2\n * - 10.5+: extensionSettings shujuku_v*__userscript_settings_v1\n * - 12.1: extensionSettings shujuku_v104__userscript_settings_v1\n */\n\nimport { computed, ref } from 'vue';\nimport { getCore } from '../utils';\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n */\nexport interface TableUpdateStatus {\n  /**  key ( sheet_0) */\n  sheetKey: string;\n  /**  */\n  name: string;\n  /**  (-1=, 0=, >0=) */\n  updateFrequency: number;\n  /**  */\n  effectiveFrequency: number;\n  /**  AI  (10 = ) */\n  lastUpdatedAiFloor: number;\n  /**  chat  (0-1 = ) */\n  lastUpdatedChatIndex: number;\n  /**  AI  */\n  unrecordedFloors: number;\n  /**  AI  */\n  totalAiFloors: number;\n  /** chat.length */\n  totalFloors: number;\n  /**  */\n  hasHistory: boolean;\n  /** / */\n  isSummaryOrOutline: boolean;\n  /**  */\n  orderNo: number;\n}\n\n/**\n *  localStorage \n */\nexport interface DbGlobalSettings {\n  /**  */\n  dataIsolationEnabled: boolean;\n  /**  */\n  dataIsolationCode: string;\n  /**  */\n  autoUpdateFrequency: number;\n  /**  */\n  skipUpdateFloors: number;\n}\n\n/**\n * \n */\ninterface ChatMessage {\n  is_user?: boolean;\n  mes?: string;\n  TavernDB_ACU_IsolatedData?: Record<string, IsolatedDataEntry>;\n  TavernDB_ACU_Identity?: string;\n  TavernDB_ACU_ModifiedKeys?: string[];\n  TavernDB_ACU_UpdateGroupKeys?: string[];\n  TavernDB_ACU_IndependentData?: Record<string, unknown>;\n  TavernDB_ACU_Data?: Record<string, unknown>;\n  TavernDB_ACU_SummaryData?: Record<string, unknown>;\n  [key: string]: unknown;\n}\n\n/**\n * \n */\ninterface IsolatedDataEntry {\n  independentData?: Record<string, unknown>;\n  modifiedKeys?: string[];\n  updateGroupKeys?: string[];\n}\n\n/**\n * \n */\ninterface LastUpdateResult {\n  /** AI 1 */\n  aiFloor: number;\n  /** chat 0 */\n  chatIndex: number;\n  /**  */\n  hasHistory: boolean;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n * @param key  \"shujuku_v104__userscript_settings_v1\"\n * @returns  104 0\n */\nfunction extractVersionNumber(key: string): number {\n  const match = key.match(/shujuku_v?(\\d+)/i);\n  return match ? parseInt(match[1], 10) : 0;\n}\n\n/**\n * \n * @param keys \n * @param pattern \n * @returns  null\n */\nfunction findHighestVersionKey(keys: string[], pattern: RegExp): string | null {\n  const matchedKeys = keys.filter(k => pattern.test(k));\n  if (matchedKeys.length === 0) return null;\n\n  // \n  matchedKeys.sort((a, b) => extractVersionNumber(b) - extractVersionNumber(a));\n  return matchedKeys[0];\n}\n\n/**\n * \n */\ninterface DbConfigCache {\n  versionPrefix: string; //  \"shujuku_v104\"\n  isolationCode: string;\n  userscripts: Record<string, unknown>;\n}\nlet dbConfigCache: DbConfigCache | null = null;\n\n/**\n * \n * 9.5 / 10.5+ / 12.1\n *  \n */\nfunction getDbGlobalSettings(): DbGlobalSettings {\n  const w = window.parent || window;\n  const defaultSettings: DbGlobalSettings = {\n    dataIsolationEnabled: false,\n    dataIsolationCode: '',\n    autoUpdateFrequency: 2,\n    skipUpdateFloors: 0,\n  };\n\n  try {\n    // []  SillyTavern extensionSettings  (10.5+)\n    const context = (\n      w as unknown as {\n        SillyTavern?: { getContext?: () => { extensionSettings?: { __userscripts?: Record<string, unknown> } } };\n      }\n    ).SillyTavern?.getContext?.();\n    const userscripts = context?.extensionSettings?.__userscripts;\n\n    if (userscripts) {\n      const allKeys = Object.keys(userscripts);\n\n      //  \n      // : shujuku_v__userscript_settings_v1 (10.5+/12.1)\n      const settingsKey = findHighestVersionKey(allKeys, /shujuku_v\\d+__userscript_settings_v1/i);\n\n      if (settingsKey && userscripts[settingsKey]) {\n        const raw = userscripts[settingsKey];\n        const settingsContainer = typeof raw === 'string' ? JSON.parse(raw) : (raw as Record<string, unknown>);\n\n        //  shujuku_v104\n        const versionPrefix = settingsKey.replace(/__userscript_settings_v1$/i, '');\n\n        //  globalMeta \n        const globalMetaKey = `${versionPrefix}_globalMeta_v1`;\n        let activeIsolationCode = '';\n        if (settingsContainer[globalMetaKey]) {\n          const metaRaw = settingsContainer[globalMetaKey];\n          const meta = typeof metaRaw === 'string' ? JSON.parse(metaRaw) : (metaRaw as Record<string, unknown>);\n          activeIsolationCode = String(meta.activeIsolationCode || '');\n        }\n\n        //  profile \n        const profileSettingsKey = `${versionPrefix}_profile_v1__${encodeURIComponent(activeIsolationCode) || '__default__'}__settings`;\n        let profileSettings: Record<string, unknown> = {};\n\n        if (settingsContainer[profileSettingsKey]) {\n          const profRaw = settingsContainer[profileSettingsKey];\n          profileSettings = typeof profRaw === 'string' ? JSON.parse(profRaw) : (profRaw as Record<string, unknown>);\n        }\n\n        // \n        dbConfigCache = {\n          versionPrefix,\n          isolationCode: activeIsolationCode,\n          userscripts: settingsContainer,\n        };\n\n        //   activeIsolationCode \n        //  profileSettings \n        const isIsolationEnabled = activeIsolationCode !== '';\n\n        return {\n          dataIsolationEnabled: isIsolationEnabled,\n          dataIsolationCode: activeIsolationCode,\n          autoUpdateFrequency: Number(profileSettings.autoUpdateFrequency) || 2,\n          skipUpdateFloors: Number(profileSettings.skipUpdateFloors) || 0,\n        };\n      }\n    }\n\n    // []  localStorage  9.5\n    const localStorage = (w as Window & { localStorage: Storage }).localStorage;\n    if (localStorage) {\n      const keys = Object.keys(localStorage);\n      //  localStorage \n      const localKey = findHighestVersionKey(keys, /shujuku.*settings/i);\n\n      if (localKey) {\n        const settings = JSON.parse(localStorage.getItem(localKey) || '{}');\n        return {\n          dataIsolationEnabled: !!settings.dataIsolationEnabled,\n          dataIsolationCode: String(settings.dataIsolationCode || ''),\n          autoUpdateFrequency: Number(settings.autoUpdateFrequency) || 2,\n          skipUpdateFloors: Number(settings.skipUpdateFloors) || 0,\n        };\n      }\n    }\n  } catch (e) {\n    console.warn('[ACU] :', e);\n  }\n\n  dbConfigCache = null;\n  return defaultSettings;\n}\n\n/**\n *  extensionSettings \n *  10.5  getTableTemplate() API \n * @returns  null\n */\nfunction getTemplateFromSettings(): Record<\n  string,\n  {\n    name?: string;\n    updateConfig?: {\n      updateFrequency?: number;\n      contextDepth?: number;\n      batchSize?: number;\n      skipFloors?: number;\n    };\n    orderNo?: number;\n  }\n> | null {\n  if (!dbConfigCache) return null;\n\n  try {\n    const { versionPrefix, isolationCode, userscripts } = dbConfigCache;\n\n    //  profile \n    const profileTemplateKey = `${versionPrefix}_profile_v1__${encodeURIComponent(isolationCode) || '__default__'}__template`;\n\n    if (userscripts[profileTemplateKey]) {\n      const templateRaw = userscripts[profileTemplateKey];\n      const template =\n        typeof templateRaw === 'string' ? JSON.parse(templateRaw) : (templateRaw as Record<string, unknown>);\n      return template as Record<\n        string,\n        {\n          name?: string;\n          updateConfig?: {\n            updateFrequency?: number;\n            contextDepth?: number;\n            batchSize?: number;\n            skipFloors?: number;\n          };\n          orderNo?: number;\n        }\n      >;\n    }\n  } catch (e) {\n    console.warn('[ACU] :', e);\n  }\n\n  return null;\n}\n\n/**\n * /\n */\nfunction checkIsSummaryOrOutline(name: string): boolean {\n  const lowerName = name.toLowerCase();\n  return (\n    name.includes('') || name.includes('') || lowerName.includes('summary') || lowerName.includes('outline')\n  );\n}\n\n/**\n * \n * : .kilocode//10.5index .js  6882-6950 \n *\n * @param sheetKey  key\n * @param chat \n * @param settings \n * @param isSummary /\n * @returns \n */\nfunction getLastUpdatedPosition(\n  sheetKey: string,\n  chat: ChatMessage[],\n  settings: DbGlobalSettings,\n  isSummary: boolean,\n): LastUpdateResult {\n  const currentIsolationKey = settings.dataIsolationEnabled ? settings.dataIsolationCode : '';\n\n  // \n  for (let i = chat.length - 1; i >= 0; i--) {\n    const msg = chat[i];\n    if (msg.is_user) continue;\n\n    let wasUpdated = false;\n\n    // [1]  TavernDB_ACU_IsolatedData\n    const isolatedData = msg.TavernDB_ACU_IsolatedData;\n    if (isolatedData && isolatedData[currentIsolationKey]) {\n      const tagData = isolatedData[currentIsolationKey];\n      const updateGroupKeys = tagData.updateGroupKeys || [];\n      const modifiedKeys = tagData.modifiedKeys || [];\n      const independentData = tagData.independentData || {};\n\n      if (updateGroupKeys.length > 0 && modifiedKeys.length > 0) {\n        wasUpdated = updateGroupKeys.includes(sheetKey);\n      } else if (modifiedKeys.includes(sheetKey)) {\n        wasUpdated = true;\n      } else if (independentData[sheetKey]) {\n        wasUpdated = true;\n      }\n    }\n\n    // [2] \n    if (!wasUpdated) {\n      const msgIdentity = msg.TavernDB_ACU_Identity;\n      let isLegacyMatch = false;\n\n      if (settings.dataIsolationEnabled) {\n        isLegacyMatch = msgIdentity === settings.dataIsolationCode;\n      } else {\n        // \n        isLegacyMatch = !msgIdentity;\n      }\n\n      if (isLegacyMatch) {\n        const modifiedKeys = msg.TavernDB_ACU_ModifiedKeys || [];\n        const updateGroupKeys = msg.TavernDB_ACU_UpdateGroupKeys || [];\n\n        if (updateGroupKeys.length > 0 && modifiedKeys.length > 0) {\n          wasUpdated = updateGroupKeys.includes(sheetKey);\n        } else if (modifiedKeys.includes(sheetKey)) {\n          wasUpdated = true;\n        } else if (\n          //  ModifiedKeys \n          msg.TavernDB_ACU_IndependentData &&\n          (msg.TavernDB_ACU_IndependentData as Record<string, unknown>)[sheetKey]\n        ) {\n          wasUpdated = true;\n        } else if (\n          isSummary &&\n          msg.TavernDB_ACU_SummaryData &&\n          (msg.TavernDB_ACU_SummaryData as Record<string, unknown>)[sheetKey]\n        ) {\n          wasUpdated = true;\n        } else if (\n          !isSummary &&\n          msg.TavernDB_ACU_Data &&\n          (msg.TavernDB_ACU_Data as Record<string, unknown>)[sheetKey]\n        ) {\n          wasUpdated = true;\n        }\n      }\n    }\n\n    if (wasUpdated) {\n      //  AI 1\n      const aiFloor = chat.slice(0, i + 1).filter(m => !m.is_user).length;\n      return {\n        aiFloor,\n        chatIndex: i,\n        hasHistory: true,\n      };\n    }\n  }\n\n  return {\n    aiFloor: 0,\n    chatIndex: -1,\n    hasHistory: false,\n  };\n}\n\n// ============================================================\n// Composable\n// ============================================================\n\n/**\n *  Composable\n * \n *\n * \n * \n *  App.vue TableStatusBoard \n */\n\n// ============================================================\n//  ()\n// ============================================================\n\n/**  */\nconst statusList = ref<TableUpdateStatus[]>([]);\n\n/**  */\nconst isLoading = ref(false);\n\n/**  */\nconst lastRefreshTime = ref<Date | null>(null);\n\n/**  AI  */\nconst currentTotalAiFloors = ref(0);\n\n/**  */\nconst currentTotalFloors = ref(0);\n\n// ============================================================\n// \n// ============================================================\n\nexport function useTableUpdateStatus() {\n  /**\n   * \n   * @returns \n   */\n  async function refresh(): Promise<TableUpdateStatus[]> {\n    if (isLoading.value) {\n      console.info('[ACU] ');\n      return statusList.value;\n    }\n\n    isLoading.value = true;\n    const startTime = Date.now();\n\n    try {\n      const api = getCore().getDB();\n      const tableData = api?.exportTableAsJson?.();\n\n      if (!tableData) {\n        console.warn('[ACU] ');\n        statusList.value = [];\n        return [];\n      }\n\n      //  dbConfigCache\n      const settings = getDbGlobalSettings();\n\n      //   API  extensionSettings\n      // 10.5  getTableTemplate() API extensionSettings \n      let template: Record<\n        string,\n        {\n          name?: string;\n          updateConfig?: {\n            updateFrequency?: number;\n            contextDepth?: number;\n            batchSize?: number;\n            skipFloors?: number;\n          };\n          orderNo?: number;\n        }\n      > | null = null;\n\n      if (typeof api?.getTableTemplate === 'function') {\n        // 12.1+  API\n        template = api.getTableTemplate() as typeof template;\n      } else {\n        // 10.5  extensionSettings \n        template = getTemplateFromSettings();\n      }\n\n      // \n      const w = window.parent || window;\n      const chat: ChatMessage[] =\n        (w as unknown as { SillyTavern?: { getContext?: () => { chat?: ChatMessage[] } } }).SillyTavern?.getContext?.()\n          ?.chat || [];\n\n      // \n      const totalFloors = chat.length;\n      const totalAiFloors = chat.filter(m => !m.is_user).length;\n      currentTotalFloors.value = totalFloors;\n      currentTotalAiFloors.value = totalAiFloors;\n\n      const results: TableUpdateStatus[] = [];\n\n      //  key \n      const sheetKeys = Object.keys(tableData)\n        .filter(k => k.startsWith('sheet_'))\n        .sort((a, b) => {\n          //  orderNo _acu_orderNo\n          const orderA =\n            template?.[a]?.orderNo ?? (tableData[a] as { _acu_orderNo?: number })?._acu_orderNo ?? Infinity;\n          const orderB =\n            template?.[b]?.orderNo ?? (tableData[b] as { _acu_orderNo?: number })?._acu_orderNo ?? Infinity;\n          return orderA - orderB;\n        });\n\n      // \n      for (const sheetKey of sheetKeys) {\n        const tableDataEntry = tableData[sheetKey] as {\n          name?: string;\n          _acu_orderNo?: number;\n        };\n        //  \n        const templateEntry = template?.[sheetKey];\n\n        //  > \n        const name = templateEntry?.name || tableDataEntry?.name;\n        if (!name) continue;\n\n        //   updateConfig\n        const updateConfig = templateEntry?.updateConfig || {};\n        const rawFreq = updateConfig.updateFrequency ?? -1;\n\n        // \n        // -1 = \n        // 0 = \n        // >0 = \n        const effectiveFreq = rawFreq === -1 ? settings.autoUpdateFrequency : rawFreq;\n\n        const isSummaryOrOutline = checkIsSummaryOrOutline(name);\n\n        // \n        const { aiFloor, chatIndex, hasHistory } = getLastUpdatedPosition(sheetKey, chat, settings, isSummaryOrOutline);\n\n        //  AI \n        const unrecordedFloors = hasHistory ? totalAiFloors - aiFloor : totalAiFloors;\n\n        results.push({\n          sheetKey,\n          name,\n          updateFrequency: rawFreq,\n          effectiveFrequency: effectiveFreq,\n          lastUpdatedAiFloor: aiFloor,\n          lastUpdatedChatIndex: chatIndex,\n          unrecordedFloors,\n          totalAiFloors,\n          totalFloors,\n          hasHistory,\n          isSummaryOrOutline,\n          orderNo: templateEntry?.orderNo ?? tableDataEntry?._acu_orderNo ?? 999,\n        });\n      }\n\n      statusList.value = results;\n      lastRefreshTime.value = new Date();\n\n      console.info(\n        `[ACU]  ${results.length} : ${settings.autoUpdateFrequency}`,\n      );\n      return results;\n    } catch (e) {\n      console.error('[ACU] :', e);\n      statusList.value = [];\n      return [];\n    } finally {\n      //  500ms\n      const elapsed = Date.now() - startTime;\n      if (elapsed < 500) {\n        await new Promise(resolve => setTimeout(resolve, 500 - elapsed));\n      }\n      isLoading.value = false;\n    }\n  }\n\n  /**\n   * \n   * @param item \n   * @returns  \"AI/\"  \"\"\n   */\n  function formatLastUpdate(item: TableUpdateStatus): string {\n    if (!item.hasHistory) {\n      return '';\n    }\n    return `${item.lastUpdatedAiFloor}/${item.lastUpdatedChatIndex}`;\n  }\n\n  /**\n   * \n   * @param item \n   * @returns CSS \n   */\n  function getUnrecordedClass(item: TableUpdateStatus): string {\n    if (!item.hasHistory) return '';\n    if (item.effectiveFrequency === 0) return ''; // \n\n    const ratio = item.unrecordedFloors / item.effectiveFrequency;\n    if (ratio >= 2) return 'danger'; // 2\n    if (ratio >= 1) return 'warning'; // \n    return 'success'; // \n  }\n\n  return {\n    /**  */\n    statusList: computed(() => statusList.value),\n    /**  */\n    isLoading: computed(() => isLoading.value),\n    /**  */\n    lastRefreshTime: computed(() => lastRefreshTime.value),\n    /**  AI  */\n    currentTotalAiFloors: computed(() => currentTotalAiFloors.value),\n    /**  */\n    currentTotalFloors: computed(() => currentTotalFloors.value),\n    /**  */\n    refresh,\n    /**  */\n    formatLastUpdate,\n    /**  */\n    getUnrecordedClass,\n  };\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = z;","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Composable\n * \n *\n * \n */\n\nimport { klona } from 'klona';\nimport { computed, ref } from 'vue';\nimport { z } from 'zod';\n\n// ============================================================\n// Schema \n// ============================================================\n\n/**  Schema */\nexport const UpdateSettingsSchema = z.object({\n  /** AI */\n  autoUpdateThreshold: z.number().min(1).max(500).default(3),\n  /**  */\n  updateBatchSize: z.number().min(1).max(50).default(3),\n  /** X */\n  skipUpdateFloors: z.number().min(0).max(20).default(0),\n  /** N */\n  autoUpdateFrequency: z.number().min(1).max(100).default(1),\n});\n\n/**  Schema */\nexport const AutoTriggerConfigSchema = z.object({\n  /**  */\n  enabled: z.boolean().default(false),\n  /**  */\n  onEmptyCell: z.boolean().default(true),\n  /**  */\n  onIndexGap: z.boolean().default(true),\n  /**  () */\n  targetTables: z.array(z.string()).default(['', '']),\n  /**  (=) */\n  updateTargetTables: z.array(z.string()).default([]),\n  /**  (=) */\n  emptyCheckColumns: z.array(z.string()).default([]),\n});\n\n/**  Schema */\nexport const UpdatePresetSchema = z.object({\n  /**  ID */\n  id: z.string(),\n  /**  */\n  name: z.string().min(1).max(50),\n  /**  */\n  createdAt: z.number(),\n  /**  */\n  settings: UpdateSettingsSchema,\n  /**  */\n  autoTrigger: AutoTriggerConfigSchema.optional().transform(v => AutoTriggerConfigSchema.parse(v ?? {})),\n});\n\n/**  Schema */\nexport const PresetStorageSchema = z.object({\n  /**  */\n  presets: z.array(UpdatePresetSchema).default([]),\n  /**  ID */\n  activePresetId: z.string().nullable().default(null),\n  /**  ID */\n  autoFixPresetId: z.string().nullable().default(null),\n  /**  */\n  globalAutoTriggerEnabled: z.boolean().default(false),\n  /**  */\n  globalAutoExecuteEnabled: z.boolean().default(false),\n});\n\n// ============================================================\n// \n// ============================================================\n\nexport type UpdateSettings = z.infer<typeof UpdateSettingsSchema>;\nexport type AutoTriggerConfig = z.infer<typeof AutoTriggerConfigSchema>;\nexport type UpdatePreset = z.infer<typeof UpdatePresetSchema>;\nexport type PresetStorage = z.infer<typeof PresetStorageSchema>;\n\n// ============================================================\n// \n// ============================================================\n\n/**  ID */\nconst SCRIPT_ID = 'acu-visualizer';\n\n/**  */\nconst STORAGE_KEY = 'updatePresets';\n\n/**  */\nconst DEFAULT_PRESET: Omit<UpdatePreset, 'id' | 'createdAt'> = {\n  name: '',\n  settings: {\n    autoUpdateThreshold: 3,\n    updateBatchSize: 3,\n    skipUpdateFloors: 0,\n    autoUpdateFrequency: 1,\n  },\n  autoTrigger: {\n    enabled: false,\n    onEmptyCell: true,\n    onIndexGap: true,\n    targetTables: ['', ''],\n    updateTargetTables: [], // \n  },\n};\n\n// ============================================================\n// \n// ============================================================\n\n/**\n *  ID\n */\nfunction generateId(): string {\n  return `preset_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * \n */\nfunction getScriptVariables(): Record<string, unknown> {\n  try {\n    //  API\n    if (typeof getVariables === 'function') {\n      return getVariables({ type: 'script', script_id: SCRIPT_ID }) || {};\n    }\n  } catch (e) {\n    console.warn('[ACU Presets] getVariables  localStorage ');\n  }\n\n  //  localStorage\n  try {\n    const data = localStorage.getItem(`acu_${STORAGE_KEY}`);\n    return data ? JSON.parse(data) : {};\n  } catch {\n    return {};\n  }\n}\n\n/**\n * \n */\nfunction saveScriptVariables(data: Record<string, unknown>): void {\n  try {\n    //  API\n    if (typeof replaceVariables === 'function') {\n      replaceVariables(klona(data), { type: 'script', script_id: SCRIPT_ID });\n      return;\n    }\n  } catch (e) {\n    console.warn('[ACU Presets] replaceVariables  localStorage ');\n  }\n\n  //  localStorage\n  try {\n    localStorage.setItem(`acu_${STORAGE_KEY}`, JSON.stringify(data));\n  } catch (e) {\n    console.error('[ACU Presets]  localStorage :', e);\n  }\n}\n\n// ============================================================\n// Composable\n// ============================================================\n\nexport function useUpdatePresets() {\n  /**  */\n  const storage = ref<PresetStorage>({\n    presets: [],\n    activePresetId: null,\n    autoFixPresetId: null,\n    globalAutoTriggerEnabled: false,\n    globalAutoExecuteEnabled: false,\n  });\n\n  /**  */\n  const isLoaded = ref(false);\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**  */\n  const presets = computed(() => storage.value.presets);\n\n  /**  */\n  const activePreset = computed(() => {\n    const id = storage.value.activePresetId;\n    return id ? storage.value.presets.find(p => p.id === id) || null : null;\n  });\n\n  /**  */\n  const autoFixPreset = computed(() => {\n    const id = storage.value.autoFixPresetId;\n    return id ? storage.value.presets.find(p => p.id === id) || null : null;\n  });\n\n  /**  */\n  const hasPresets = computed(() => storage.value.presets.length > 0);\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function loadPresets(): void {\n    try {\n      const data = getScriptVariables();\n      const raw = data[STORAGE_KEY];\n\n      if (raw) {\n        const parsed = PresetStorageSchema.safeParse(raw);\n        if (parsed.success) {\n          storage.value = parsed.data;\n          console.info('[ACU Presets] :', parsed.data.presets.length);\n        } else {\n          console.warn('[ACU Presets] ');\n          storage.value = PresetStorageSchema.parse({});\n        }\n      } else {\n        storage.value = PresetStorageSchema.parse({});\n      }\n\n      isLoaded.value = true;\n    } catch (e) {\n      console.error('[ACU Presets] :', e);\n      storage.value = PresetStorageSchema.parse({});\n      isLoaded.value = true;\n    }\n  }\n\n  /**\n   * \n   */\n  function savePresets(): void {\n    try {\n      const data = getScriptVariables();\n      data[STORAGE_KEY] = klona(storage.value);\n      saveScriptVariables(data);\n      console.info('[ACU Presets] ');\n    } catch (e) {\n      console.error('[ACU Presets] :', e);\n    }\n  }\n\n  /**\n   * \n   * @param name \n   * @returns  null\n   */\n  function findPresetByName(name: string): UpdatePreset | null {\n    const trimmedName = name.trim();\n    return storage.value.presets.find(p => p.name.trim() === trimmedName) || null;\n  }\n\n  /**\n   * \n   * @param name \n   * @param settings \n   * @param autoTrigger \n   */\n  function createPreset(\n    name: string,\n    settings: Partial<UpdateSettings> = {},\n    autoTrigger: Partial<AutoTriggerConfig> = {},\n  ): UpdatePreset {\n    const preset: UpdatePreset = {\n      id: generateId(),\n      name,\n      createdAt: Date.now(),\n      settings: UpdateSettingsSchema.parse({ ...DEFAULT_PRESET.settings, ...settings }),\n      autoTrigger: AutoTriggerConfigSchema.parse({ ...DEFAULT_PRESET.autoTrigger, ...autoTrigger }),\n    };\n\n    storage.value.presets.push(preset);\n    savePresets();\n\n    console.info('[ACU Presets] :', preset.name);\n    return preset;\n  }\n\n  /**\n   * \n   * @param name \n   * @param settings \n   * @param autoTrigger \n   * @returns { preset, isNew } \n   */\n  function createOrUpdatePreset(\n    name: string,\n    settings: Partial<UpdateSettings> = {},\n    autoTrigger: Partial<AutoTriggerConfig> = {},\n  ): { preset: UpdatePreset; isNew: boolean } {\n    const existing = findPresetByName(name);\n\n    if (existing) {\n      // \n      updatePreset(existing.id, {\n        settings: UpdateSettingsSchema.parse({ ...DEFAULT_PRESET.settings, ...settings }),\n        autoTrigger: AutoTriggerConfigSchema.parse({ ...DEFAULT_PRESET.autoTrigger, ...autoTrigger }),\n      });\n      console.info('[ACU Presets] :', name);\n      return { preset: existing, isNew: false };\n    } else {\n      // \n      const preset = createPreset(name, settings, autoTrigger);\n      return { preset, isNew: true };\n    }\n  }\n\n  /**\n   * \n   * @param id  ID\n   * @param updates \n   */\n  function updatePreset(id: string, updates: Partial<Omit<UpdatePreset, 'id' | 'createdAt'>>): boolean {\n    const index = storage.value.presets.findIndex(p => p.id === id);\n    if (index === -1) {\n      console.warn('[ACU Presets] :', id);\n      return false;\n    }\n\n    const preset = storage.value.presets[index];\n\n    if (updates.name !== undefined) {\n      preset.name = updates.name;\n    }\n    if (updates.settings !== undefined) {\n      preset.settings = UpdateSettingsSchema.parse({ ...preset.settings, ...updates.settings });\n    }\n    if (updates.autoTrigger !== undefined) {\n      preset.autoTrigger = AutoTriggerConfigSchema.parse({ ...preset.autoTrigger, ...updates.autoTrigger });\n    }\n\n    savePresets();\n    console.info('[ACU Presets] :', preset.name);\n    return true;\n  }\n\n  /**\n   * \n   * @param id  ID\n   */\n  function deletePreset(id: string): boolean {\n    const index = storage.value.presets.findIndex(p => p.id === id);\n    if (index === -1) {\n      console.warn('[ACU Presets] :', id);\n      return false;\n    }\n\n    const preset = storage.value.presets[index];\n    storage.value.presets.splice(index, 1);\n\n    // \n    if (storage.value.activePresetId === id) {\n      storage.value.activePresetId = null;\n    }\n    if (storage.value.autoFixPresetId === id) {\n      storage.value.autoFixPresetId = null;\n    }\n\n    savePresets();\n    console.info('[ACU Presets] :', preset.name);\n    return true;\n  }\n\n  /**\n   * \n   * @param id  IDnull \n   */\n  function setActivePreset(id: string | null): void {\n    storage.value.activePresetId = id;\n    savePresets();\n  }\n\n  /**\n   * \n   * @param id  IDnull \n   */\n  function setAutoFixPreset(id: string | null): void {\n    storage.value.autoFixPresetId = id;\n    savePresets();\n  }\n\n  /**\n   * \n   * @param id  ID\n   * @param newName \n   */\n  function duplicatePreset(id: string, newName?: string): UpdatePreset | null {\n    const source = storage.value.presets.find(p => p.id === id);\n    if (!source) {\n      console.warn('[ACU Presets] :', id);\n      return null;\n    }\n\n    return createPreset(newName || `${source.name} ()`, klona(source.settings), klona(source.autoTrigger));\n  }\n\n  /**\n   * \n   * @param name \n   * @param currentSettings \n   */\n  function createFromCurrent(name: string, currentSettings: Partial<UpdateSettings>): UpdatePreset {\n    return createPreset(name, currentSettings);\n  }\n\n  /**\n   * \n   * @param id  ID\n   */\n  function getPresetSettings(id: string): UpdateSettings | null {\n    const preset = storage.value.presets.find(p => p.id === id);\n    return preset ? klona(preset.settings) : null;\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**  */\n  const globalAutoTriggerEnabled = computed(() => storage.value.globalAutoTriggerEnabled);\n\n  /**  */\n  const globalAutoExecuteEnabled = computed(() => storage.value.globalAutoExecuteEnabled);\n\n  /**\n   * \n   */\n  function setGlobalAutoTrigger(enabled: boolean): void {\n    storage.value.globalAutoTriggerEnabled = enabled;\n    // \n    if (!enabled) {\n      storage.value.globalAutoExecuteEnabled = false;\n    }\n    savePresets();\n    console.info('[ACU Presets] :', enabled);\n  }\n\n  /**\n   * \n   */\n  function setGlobalAutoExecute(enabled: boolean): void {\n    storage.value.globalAutoExecuteEnabled = enabled;\n    savePresets();\n    console.info('[ACU Presets] :', enabled);\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  // \n  if (!isLoaded.value) {\n    loadPresets();\n  }\n\n  return {\n    // \n    storage,\n    presets,\n    activePreset,\n    autoFixPreset,\n    hasPresets,\n    isLoaded,\n    globalAutoTriggerEnabled,\n    globalAutoExecuteEnabled,\n\n    // \n    loadPresets,\n    savePresets,\n    createPreset,\n    createOrUpdatePreset,\n    findPresetByName,\n    updatePreset,\n    deletePreset,\n    setActivePreset,\n    setAutoFixPreset,\n    duplicatePreset,\n    createFromCurrent,\n    getPresetSettings,\n    setGlobalAutoTrigger,\n    setGlobalAutoExecute,\n\n    // Schema\n    UpdateSettingsSchema,\n    AutoTriggerConfigSchema,\n    UpdatePresetSchema,\n  };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * useApiCallbacks.ts -  API \n *\n *  API  index.ts  Vue Composable\n * \n *\n * 6.4.1.ts  registerTableUpdateCallback  registerTableFillStartCallback\n */\n\nimport { onMounted, onUnmounted } from 'vue';\nimport { useDataStore } from '../stores/useDataStore';\nimport { useUIStore } from '../stores/useUIStore';\nimport type { RawDatabaseData, TableRow } from '../types';\nimport { getCore, getTableData } from '../utils/index';\nimport { useDbSettings } from './useDbSettings';\nimport { saveSnapshot as saveRowSnapshot } from './useRowHistory';\nimport { useTableUpdateStatus } from './useTableUpdateStatus';\nimport { toast } from './useToast';\nimport { useUpdatePresets } from './useUpdatePresets';\n\n// \nlet tableUpdateCallback: (() => void) | null = null;\nlet tableFillStartCallback: (() => void) | null = null;\n\n// \nlet isShuttingDown = false;\n\n/**\n * API  Composable\n *\n * \n * - \n * - \n * - /\n */\nexport function useApiCallbacks() {\n  const dataStore = useDataStore();\n  const uiStore = useUIStore();\n  const presetsManager = useUpdatePresets();\n  const dbSettings = useDbSettings();\n  const tableUpdateStatus = useTableUpdateStatus();\n\n  // \n  let lastIssueNotifyTime = 0;\n  const NOTIFY_COOLDOWN = 30000; // 30\n\n  // \n  let isAutoUpdating = false;\n\n  /**\n   * ID\n   */\n  function getCurrentChatId(): string {\n    try {\n      const ST = (window as any).SillyTavern || (window.parent as any)?.SillyTavern || (window.top as any)?.SillyTavern;\n      if (ST?.getCurrentChatId) {\n        const chatId = ST.getCurrentChatId();\n        if (chatId) return chatId;\n      }\n      if (ST?.chat_metadata?.chat_id) {\n        return String(ST.chat_metadata.chat_id);\n      }\n    } catch (e) {\n      console.warn('[ACU]  chatId :', e);\n    }\n    return 'default';\n  }\n\n  /**\n   * \n   */\n  function hasRowChanged(oldRow: (string | number)[] | undefined, newRow: (string | number)[] | undefined): boolean {\n    if (!oldRow && !newRow) return false;\n    if (!oldRow || !newRow) return true;\n    if (oldRow.length !== newRow.length) return true;\n\n    for (let i = 0; i < oldRow.length; i++) {\n      const oldVal = String(oldRow[i] ?? '').trim();\n      const newVal = String(newRow[i] ?? '').trim();\n      // 'null'  'undefined' \n      const normalizedOld = oldVal === 'null' || oldVal === 'undefined' ? '' : oldVal;\n      const normalizedNew = newVal === 'null' || newVal === 'undefined' ? '' : newVal;\n      if (normalizedOld !== normalizedNew) return true;\n    }\n    return false;\n  }\n\n  /**\n   *  AI \n   *  tableUpdateCallback  IndexedDB\n   */\n  async function saveAiChangesToHistory(oldData: RawDatabaseData, newData: RawDatabaseData): Promise<void> {\n    const chatId = getCurrentChatId();\n    if (!chatId) {\n      console.warn('[ACU]  chatId AI ');\n      return;\n    }\n\n    let savedCount = 0;\n\n    for (const sheetId in newData) {\n      if (!sheetId.startsWith('sheet_')) continue;\n\n      const newSheet = newData[sheetId];\n      const oldSheet = oldData[sheetId];\n\n      if (!newSheet?.content || !Array.isArray(newSheet.content)) continue;\n\n      const tableName = newSheet.name || sheetId.replace('sheet_', '');\n      const headers = newSheet.content[0] || [];\n\n      // \n      for (let rowIdx = 1; rowIdx < newSheet.content.length; rowIdx++) {\n        const realRowIdx = rowIdx - 1;\n        const newRow = newSheet.content[rowIdx];\n        const oldRow = oldSheet?.content?.[rowIdx];\n\n        // \n        if (hasRowChanged(oldRow, newRow)) {\n          // \n          if (oldRow && Array.isArray(oldRow)) {\n            //  TableRow \n            const tableRow: TableRow = {\n              index: realRowIdx,\n              key: `${tableName}-row-${realRowIdx}`,\n              cells: oldRow.map((val, i) => ({\n                colIndex: i,\n                key: String(headers[i] || `col_${i}`),\n                value: String(val ?? ''),\n              })),\n            };\n\n            try {\n              await saveRowSnapshot(chatId, tableName, tableRow, 'ai');\n              savedCount++;\n            } catch (err) {\n              console.warn('[ACU]  AI :', err);\n            }\n          }\n        }\n      }\n    }\n\n    if (savedCount > 0) {\n      console.info(`[ACU]  ${savedCount}  AI `);\n    }\n  }\n\n  /**\n   *  API \n   */\n  function registerCallbacks() {\n    const { getDB } = getCore();\n    const api = getDB();\n\n    if (!api) {\n      console.warn('[ACU]  API ');\n      return;\n    }\n\n    isShuttingDown = false;\n\n    // \n    if (api.registerTableUpdateCallback) {\n      tableUpdateCallback = async () => {\n        // \n        if (isShuttingDown) return;\n\n        // \n        if (uiStore.isEditingOrder || dataStore.isSaving) return;\n\n        // AI\n        const oldSnapshot = dataStore.snapshot;\n\n        // \n        const newData = getTableData();\n        if (newData) {\n          // \n          if (oldSnapshot) {\n            await saveAiChangesToHistory(oldSnapshot, newData);\n          }\n\n          const processedData = dataStore.setStagedData(newData);\n\n          // syncNewTablesToVisibleTabs \"\"\"\"\n          //  Tab \n\n          //  AI  AI \n          dataStore.generateDiffMap(processedData);\n\n          // \n          uiStore.triggerAiNotify();\n\n          // \n          tableUpdateStatus.refresh();\n\n          // \n          if (presetsManager.globalAutoTriggerEnabled.value) {\n            // \n            dataStore.checkIntegrity(newData);\n\n            // \n            checkAndNotifyIssues();\n          } else {\n            // \n            dataStore.clearIntegrityIssues();\n          }\n        }\n      };\n      api.registerTableUpdateCallback(tableUpdateCallback);\n      console.info('[ACU] ');\n    }\n\n    //  + \n    //  6.4.1.ts:4556-4568\n    if (api.registerTableFillStartCallback) {\n      tableFillStartCallback = () => {\n        // \n        if (isShuttingDown) return;\n\n        // AI \n        dataStore.saveLastState();\n\n        //  AI \n        uiStore.setAiGenerating(true);\n\n        // A. diffMap\n        //  diffMap pendingDeletes\n        if (dataStore.diffMap && dataStore.diffMap.size > 0) {\n          console.info('[ACU] ');\n          return;\n        }\n\n        // B. \n        const currentData = getTableData();\n        if (currentData && Object.keys(currentData).length > 0) {\n          dataStore.saveSnapshot(currentData);\n          console.info('[ACU] ');\n        }\n      };\n      api.registerTableFillStartCallback(tableFillStartCallback);\n      console.info('[ACU]  ()');\n    }\n  }\n\n  /**\n   *  API \n   */\n  function unregisterCallbacks() {\n    isShuttingDown = true;\n\n    const { getDB } = getCore();\n    const api = getDB();\n\n    if (!api) return;\n\n    try {\n      if (api.registerTableUpdateCallback && tableUpdateCallback) {\n        //  API  unregister \n        if (typeof api.unregisterTableUpdateCallback === 'function') {\n          api.unregisterTableUpdateCallback(tableUpdateCallback);\n        }\n        tableUpdateCallback = null;\n        console.info('[ACU] ');\n      }\n\n      if (api.registerTableFillStartCallback && tableFillStartCallback) {\n        if (typeof api.unregisterTableFillStartCallback === 'function') {\n          api.unregisterTableFillStartCallback(tableFillStartCallback);\n        }\n        tableFillStartCallback = null;\n        console.info('[ACU] ');\n      }\n    } catch (e) {\n      console.warn('[ACU] :', e);\n    }\n  }\n\n  /**\n   * \n   */\n  async function checkAndNotifyIssues() {\n    // \n    // \n    if (!presetsManager.globalAutoTriggerEnabled.value) {\n      return;\n    }\n\n    // \n    if (!dataStore.hasIntegrityIssues) return;\n\n    // \n    const now = Date.now();\n    if (now - lastIssueNotifyTime < NOTIFY_COOLDOWN) return;\n\n    // \n    if (isAutoUpdating) return;\n\n    // \n    const autoFixPreset = presetsManager.autoFixPreset.value;\n\n    if (autoFixPreset && autoFixPreset.autoTrigger.enabled) {\n      //  - \n      let shouldTrigger = false;\n\n      // \n      const problematicTables = dataStore.problematicTables;\n      if (problematicTables && problematicTables.length > 0) {\n        // \n        shouldTrigger = true;\n      }\n\n      if (shouldTrigger) {\n        lastIssueNotifyTime = now;\n        const summary = dataStore.getIntegritySummary();\n\n        // \n        isAutoUpdating = true;\n        toast.info(` ${summary}...`);\n        console.info('[ACU] :', summary);\n\n        try {\n          //  API: executeWithPreset + \n          const targetTables = autoFixPreset.autoTrigger.updateTargetTables || [];\n          const result = await dbSettings.executeWithPreset(\n            {\n              autoUpdateThreshold: autoFixPreset.settings.autoUpdateThreshold,\n              autoUpdateFrequency: autoFixPreset.settings.autoUpdateFrequency,\n              updateBatchSize: autoFixPreset.settings.updateBatchSize,\n              skipUpdateFloors: autoFixPreset.settings.skipUpdateFloors,\n            },\n            targetTables,\n          );\n\n          if (result.success) {\n            toast.success(' ');\n          } else {\n            toast.warning(' ' + (result.message || ''));\n          }\n        } catch (error) {\n          console.error('[ACU] :', error);\n          toast.error(' ');\n        } finally {\n          isAutoUpdating = false;\n        }\n      }\n    }\n    //  - /\n  }\n\n  // \n  onMounted(() => {\n    registerCallbacks();\n  });\n\n  onUnmounted(() => {\n    unregisterCallbacks();\n  });\n\n  // \n  return {\n    registerCallbacks,\n    unregisterCallbacks,\n    checkAndNotifyIssues,\n  };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Composable\n *  saveDataToDatabase \n * : ()10.3+\n */\n\nimport { watchDebounced } from '@vueuse/core';\nimport { klona } from 'klona';\nimport type { WatchStopHandle } from 'vue';\nimport { useConfigStore } from '../stores/useConfigStore';\nimport { useDataStore } from '../stores/useDataStore';\nimport type { RawDatabaseData } from '../types';\nimport { getCore, getTableData } from '../utils/index';\nimport { toast } from './useToast';\n\n/**\n *  ACU  ( localStorage )\n * 10.3+  shujuku_v100_allSettings_v2\n *  shujuku_v34_allSettings_v2\n */\nfunction findACUSettingsKey(storage: Storage): string | null {\n  const keys = Object.keys(storage);\n  //  v100+ 10.3+ \n  const v100Key = keys.find(\n    k => k.match(/^shujuku_v\\d+_allSettings_v2$/) && parseInt(k.match(/v(\\d+)/)?.[1] || '0') >= 100,\n  );\n  if (v100Key) return v100Key;\n\n  // \n  const anyKey = keys.find(k => k.match(/^shujuku_v\\d+_allSettings_v2$/));\n  if (anyKey) return anyKey;\n\n  return null;\n}\n\n// ============================================================\n//  ()\n// ============================================================\n\n/**\n * \n * @param key  \"shujuku_v104__userscript_settings_v1\"\n * @returns  104 0\n */\nfunction extractVersionNumber(key: string): number {\n  const match = key.match(/shujuku_v?(\\d+)/i);\n  return match ? parseInt(match[1], 10) : 0;\n}\n\n/**\n * \n * @param keys \n * @param pattern \n * @returns  null\n */\nfunction findHighestVersionKey(keys: string[], pattern: RegExp): string | null {\n  const matchedKeys = keys.filter(k => pattern.test(k));\n  if (matchedKeys.length === 0) return null;\n\n  // \n  matchedKeys.sort((a, b) => extractVersionNumber(b) - extractVersionNumber(a));\n  return matchedKeys[0];\n}\n\n/**\n * \n * 9.5 / 10.5+ / 12.1\n * @returns \n */\nfunction getActiveIsolationCode(): string {\n  const w = window.parent || window;\n\n  try {\n    // []  SillyTavern extensionSettings  (10.5+)\n    const context = (\n      w as unknown as {\n        SillyTavern?: { getContext?: () => { extensionSettings?: { __userscripts?: Record<string, unknown> } } };\n      }\n    ).SillyTavern?.getContext?.();\n    const userscripts = context?.extensionSettings?.__userscripts;\n\n    if (userscripts) {\n      const allKeys = Object.keys(userscripts);\n\n      //  \n      // : shujuku_v__userscript_settings_v1 (10.5+/12.1)\n      const settingsKey = findHighestVersionKey(allKeys, /shujuku_v\\d+__userscript_settings_v1/i);\n\n      if (settingsKey && userscripts[settingsKey]) {\n        const raw = userscripts[settingsKey];\n        const settingsContainer = typeof raw === 'string' ? JSON.parse(raw) : (raw as Record<string, unknown>);\n\n        //  shujuku_v104\n        const versionPrefix = settingsKey.replace(/__userscript_settings_v1$/i, '');\n\n        //  globalMeta \n        const globalMetaKey = `${versionPrefix}_globalMeta_v1`;\n        if (settingsContainer[globalMetaKey]) {\n          const metaRaw = settingsContainer[globalMetaKey];\n          const meta = typeof metaRaw === 'string' ? JSON.parse(metaRaw) : (metaRaw as Record<string, unknown>);\n          const activeCode = String(meta.activeIsolationCode || '');\n          if (activeCode) {\n            console.info(`[ACU] : \"${activeCode}\" (from extensionSettings)`);\n          }\n          return activeCode;\n        }\n      }\n    }\n\n    // []  localStorage  9.5\n    let storage = window.localStorage;\n    let settingsKey = findACUSettingsKey(storage);\n\n    //  iframe  localStorage \n    if (!settingsKey && window.parent) {\n      try {\n        storage = window.parent.localStorage;\n        settingsKey = findACUSettingsKey(storage);\n      } catch {\n        // ignore cross-origin access\n      }\n    }\n\n    if (settingsKey) {\n      const settingsStr = storage.getItem(settingsKey);\n      if (settingsStr) {\n        const settings = JSON.parse(settingsStr);\n        if (settings.dataIsolationEnabled && settings.dataIsolationCode) {\n          console.info(`[ACU] : \"${settings.dataIsolationCode}\" (from localStorage: ${settingsKey})`);\n          return settings.dataIsolationCode;\n        }\n      }\n    }\n  } catch (e) {\n    console.warn('[ACU] :', e);\n  }\n\n  return '';\n}\n\n// ============================================================\n// 10.3+  (SheetGuide) \n// 9.5\n// ============================================================\n\n/** 10.3+  */\nconst CHAT_SHEET_GUIDE_FIELD = 'TavernDB_ACU_InternalSheetGuide';\n/**  */\nconst CHAT_SHEET_GUIDE_VERSION = 1;\n/**  */\nconst TABLE_ORDER_FIELD = 'orderNo';\n\n/**  */\ninterface SheetGuideSlot {\n  data: Record<string, unknown>;\n  updatedAt: number;\n  reason: string;\n}\n\n/**  */\ninterface SheetGuideContainer {\n  version: number;\n  tags: Record<string, SheetGuideSlot>;\n}\n\n/**\n *  + \n *  10.3  normalizeGuideData_ACU \n */\nfunction buildSheetGuideData(rawData: RawDatabaseData): Record<string, unknown> {\n  const out: Record<string, unknown> = { mate: { type: 'chatSheets', version: 1 } };\n\n  Object.keys(rawData).forEach(k => {\n    if (!k.startsWith('sheet_')) return;\n    const sheet = rawData[k] as Record<string, unknown> | undefined;\n    if (!sheet || typeof sheet !== 'object') return;\n\n    // 10.3normalizeGuideData_ACU\n    const content = sheet.content as (string | number)[][] | undefined;\n    const headerRow = Array.isArray(content) && Array.isArray(content[0]) ? content[0] : [null];\n\n    out[k] = {\n      uid: sheet.uid || k,\n      name: sheet.name || k,\n      sourceData: sheet.sourceData || {\n        note: '',\n        initNode: '',\n        insertNode: '',\n        updateNode: '',\n        deleteNode: '',\n      },\n      content: [headerRow], // \n      updateConfig: sheet.updateConfig || {\n        uiSentinel: -1,\n        contextDepth: -1,\n        updateFrequency: -1,\n        batchSize: -1,\n        skipFloors: -1,\n      },\n      exportConfig: sheet.exportConfig || {\n        enabled: false,\n        splitByRow: false,\n        entryName: (sheet.name as string) || k,\n        entryType: 'constant',\n        keywords: '',\n        preventRecursion: true,\n        injectionTemplate: '',\n      },\n      [TABLE_ORDER_FIELD]: (sheet as Record<string, unknown>)[TABLE_ORDER_FIELD] ?? undefined,\n    };\n  });\n\n  return out;\n}\n/**\n *  chat[0] 10.3+ \n * 9.5\n * @param ST SillyTavern \n * @param configKey \n * @param guideData \n */\nfunction updateSheetGuide(ST: any, configKey: string, guideData: Record<string, unknown>): boolean {\n  //  chat \n  if (!ST?.chat || ST.chat.length === 0) {\n    console.info('[ACU] ');\n    return false;\n  }\n\n  const firstMsg = ST.chat[0];\n  if (!firstMsg) {\n    console.info('[ACU] chat[0] ');\n    return false;\n  }\n\n  try {\n    // \n    let container: SheetGuideContainer | null = null;\n    const raw = firstMsg[CHAT_SHEET_GUIDE_FIELD];\n\n    if (raw) {\n      if (typeof raw === 'string') {\n        try {\n          container = JSON.parse(raw) as SheetGuideContainer;\n        } catch {\n          container = null;\n        }\n      } else if (typeof raw === 'object') {\n        container = raw as SheetGuideContainer;\n      }\n    }\n\n    // \n    if (!container || typeof container !== 'object') {\n      container = { version: CHAT_SHEET_GUIDE_VERSION, tags: {} };\n    }\n    if (!container.tags || typeof container.tags !== 'object') {\n      container.tags = {};\n    }\n\n    // \n    container.version = CHAT_SHEET_GUIDE_VERSION;\n    container.tags[configKey] = {\n      data: guideData,\n      updatedAt: Date.now(),\n      reason: 'vue_visualizer_save',\n    };\n\n    //  chat[0]\n    firstMsg[CHAT_SHEET_GUIDE_FIELD] = container;\n    console.info(\n      `[ACU]  chat[0]  (tag=${configKey || ''}, tables=${Object.keys(guideData).filter(k => k.startsWith('sheet_')).length})`,\n    );\n    return true;\n  } catch (e) {\n    console.warn('[ACU] :', e);\n    return false;\n  }\n}\n\n/**\n * \n */\nfunction getSheetGuideInfo(\n  ST: any,\n  configKey: string,\n): {\n  exists: boolean;\n  updatedAt: number | null;\n  reason: string | null;\n  tableCount: number;\n} {\n  const defaultResult = { exists: false, updatedAt: null, reason: null, tableCount: 0 };\n\n  if (!ST?.chat?.[0]) return defaultResult;\n\n  try {\n    let container = ST.chat[0][CHAT_SHEET_GUIDE_FIELD];\n    if (!container) return defaultResult;\n\n    if (typeof container === 'string') {\n      try {\n        container = JSON.parse(container);\n      } catch {\n        return defaultResult;\n      }\n    }\n\n    const slot = container?.tags?.[configKey];\n    if (!slot) return defaultResult;\n\n    const tableCount = Object.keys(slot.data || {}).filter(k => k.startsWith('sheet_')).length;\n\n    return {\n      exists: true,\n      updatedAt: slot.updatedAt || null,\n      reason: slot.reason || null,\n      tableCount,\n    };\n  } catch {\n    return defaultResult;\n  }\n}\n\nexport function useDataPersistence() {\n  const dataStore = useDataStore();\n  const configStore = useConfigStore();\n\n  // ============================================================\n  //  ( - )\n  // ============================================================\n\n  /**\n   *  ( executeCoreSave)\n   * \n   * @param dataToUse \n   * @param commitDeletes \n   * @param targetIndex  (-1 )\n   */\n  async function executeFullSave(\n    dataToUse: RawDatabaseData,\n    commitDeletes: boolean,\n    targetIndex: number = -1,\n  ): Promise<RawDatabaseData | null> {\n    // \n    const finalData = klona(dataToUse);\n\n    // A. \n    if (commitDeletes && dataStore.pendingDeletes.size > 0) {\n      for (const sheetId in finalData) {\n        if (sheetId === 'mate') continue;\n\n        const sheet = finalData[sheetId];\n        if (!sheet || !sheet.name || !sheet.content) continue;\n\n        const newContent: (string | number)[][] = [sheet.content[0]]; // \n        for (let i = 1; i < sheet.content.length; i++) {\n          const realIdx = i - 1;\n          // \n          if (!dataStore.pendingDeletes.has(`${sheet.name}-row-${realIdx}`)) {\n            newContent.push(sheet.content[i]);\n          }\n        }\n        sheet.content = newContent;\n      }\n    }\n\n    try {\n      // B.  SillyTavern \n      let ST = (window as any).SillyTavern || (window.parent ? (window.parent as any).SillyTavern : null);\n      if (!ST && (window as any).top && (window as any).top.SillyTavern) {\n        ST = (window as any).top.SillyTavern;\n      }\n\n      // C.  Key 9.5 / 10.5+ / 12.1\n      const configKey = getActiveIsolationCode();\n\n      // D. \n      if (ST && ST.chat && ST.chat.length > 0) {\n        let targetMsg: any = null;\n        let targetMsgIndex = -1;\n\n        //  >  AI  >  AI \n        if (targetIndex >= 0 && targetIndex < ST.chat.length) {\n          targetMsgIndex = targetIndex;\n          targetMsg = ST.chat[targetMsgIndex];\n        } else {\n          // 1.  ACU  AI  ()\n          for (let i = ST.chat.length - 1; i >= 0; i--) {\n            if (!ST.chat[i].is_user && ST.chat[i].TavernDB_ACU_IsolatedData) {\n              targetMsgIndex = i;\n              targetMsg = ST.chat[i];\n              break;\n            }\n          }\n          // 2.  AI \n          if (!targetMsg) {\n            for (let i = ST.chat.length - 1; i >= 0; i--) {\n              if (!ST.chat[i].is_user) {\n                targetMsgIndex = i;\n                targetMsg = ST.chat[i];\n                break;\n              }\n            }\n          }\n        }\n\n        // \n        if (targetMsg) {\n          //  Key\n          let finalKey = configKey;\n          if (targetMsg.TavernDB_ACU_IsolatedData) {\n            const existingKeys = Object.keys(targetMsg.TavernDB_ACU_IsolatedData);\n            if (existingKeys.length > 0) {\n              finalKey = existingKeys[0]; //  Key\n            }\n          } else {\n            targetMsg.TavernDB_ACU_IsolatedData = {};\n          }\n\n          // \n          if (!targetMsg.TavernDB_ACU_IsolatedData[finalKey]) {\n            targetMsg.TavernDB_ACU_IsolatedData[finalKey] = {\n              independentData: {},\n              modifiedKeys: [],\n              updateGroupKeys: [],\n            };\n          }\n\n          const tagData = targetMsg.TavernDB_ACU_IsolatedData[finalKey];\n          if (!tagData.independentData) tagData.independentData = {};\n\n          //  sheet \n          const sheetsToSave = Object.keys(finalData).filter(k => k.startsWith('sheet_'));\n          sheetsToSave.forEach(k => {\n            tagData.independentData[k] = klona(finalData[k]);\n          });\n\n          //  Key\n          const existingKeys: string[] = tagData.modifiedKeys || [];\n          tagData.modifiedKeys = [...new Set([...existingKeys, ...sheetsToSave])];\n\n          // F. 10.3+ \n          // 9.5\n          // 10.3+ merge \n          if (sheetsToSave.length > 0) {\n            const guideData = buildSheetGuideData(finalData);\n            if (Object.keys(guideData).some(k => k.startsWith('sheet_'))) {\n              updateSheetGuide(ST, finalKey, guideData);\n            }\n          }\n\n          // \n          if (ST.saveChat) {\n            await ST.saveChat();\n\n            // E.  API  ( saveChat )\n            await syncWorldbook();\n\n            return { ...finalData, _savedToFloor: targetMsgIndex } as unknown as RawDatabaseData;\n          }\n        }\n      }\n    } catch (directErr) {\n      console.error('[ACU] Core save error:', directErr);\n      throw directErr;\n    }\n\n    //  saveChat \n    await syncWorldbook();\n\n    return finalData;\n  }\n\n  // ============================================================\n  //  ()\n  // ============================================================\n\n  /**\n   * \n   * @param ST SillyTavern \n   * @param tableId  ID (sheet_xxx)\n   * @param configKey \n   * @returns  -1\n   */\n  function findFloorForTable(ST: any, tableId: string, configKey: string): number {\n    if (!ST || !ST.chat) return -1;\n\n    // \n    for (let i = ST.chat.length - 1; i >= 0; i--) {\n      const msg = ST.chat[i];\n      if (msg.is_user) continue;\n\n      //  TavernDB_ACU_IsolatedData\n      if (msg.TavernDB_ACU_IsolatedData && typeof msg.TavernDB_ACU_IsolatedData === 'object') {\n        // \n        const tagData = msg.TavernDB_ACU_IsolatedData[configKey];\n        if (tagData && tagData.independentData && tagData.independentData[tableId]) {\n          return i;\n        }\n\n        // \n        if (\n          !configKey &&\n          msg.TavernDB_ACU_IsolatedData[''] &&\n          msg.TavernDB_ACU_IsolatedData[''].independentData &&\n          msg.TavernDB_ACU_IsolatedData[''].independentData[tableId]\n        ) {\n          return i;\n        }\n      }\n\n      // \n      if (msg.TavernDB_ACU_IndependentData && msg.TavernDB_ACU_IndependentData[tableId]) {\n        //  Identity \n        if (configKey && msg.TavernDB_ACU_Identity && msg.TavernDB_ACU_Identity !== configKey) {\n          continue;\n        }\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  /**\n   *  ()\n   * \n   * @param dataToUse \n   * @param commitDeletes \n   * @param modifiedTableIds  ID \n   */\n  async function executeIncrementalSave(\n    dataToUse: RawDatabaseData,\n    commitDeletes: boolean,\n    modifiedTableIds: string[],\n  ): Promise<RawDatabaseData | null> {\n    if (modifiedTableIds.length === 0) return null;\n\n    console.info('[ACU] :', modifiedTableIds);\n\n    // \n    const finalData = klona(dataToUse);\n\n    // A.  ()\n    if (commitDeletes && dataStore.pendingDeletes.size > 0) {\n      for (const sheetId of modifiedTableIds) {\n        if (sheetId === 'mate') continue;\n\n        const sheet = finalData[sheetId];\n        if (!sheet || !sheet.name || !sheet.content) continue;\n\n        const newContent: (string | number)[][] = [sheet.content[0]]; // \n        let hasDeletes = false;\n        for (let i = 1; i < sheet.content.length; i++) {\n          const realIdx = i - 1;\n          if (!dataStore.pendingDeletes.has(`${sheet.name}-row-${realIdx}`)) {\n            newContent.push(sheet.content[i]);\n          } else {\n            hasDeletes = true;\n          }\n        }\n        if (hasDeletes) {\n          sheet.content = newContent;\n        }\n      }\n    }\n\n    try {\n      // B.  SillyTavern \n      let ST = (window as any).SillyTavern || (window.parent ? (window.parent as any).SillyTavern : null);\n      if (!ST && (window as any).top && (window as any).top.SillyTavern) {\n        ST = (window as any).top.SillyTavern;\n      }\n\n      // C.  Key 9.5 / 10.5+ / 12.1\n      const configKey = getActiveIsolationCode();\n\n      // D. \n      const floorMap = new Map<number, Set<string>>(); // floorIndex -> Set<tableId>\n      const newTables = new Set<string>(); // \n\n      for (const tableId of modifiedTableIds) {\n        const floorIdx = findFloorForTable(ST, tableId, configKey);\n        if (floorIdx !== -1) {\n          if (!floorMap.has(floorIdx)) floorMap.set(floorIdx, new Set());\n          floorMap.get(floorIdx)!.add(tableId);\n        } else {\n          newTables.add(tableId);\n        }\n      }\n\n      // E.  AI  ()\n      if (newTables.size > 0) {\n        let targetIndex = -1;\n        //  AI \n        for (let i = ST.chat.length - 1; i >= 0; i--) {\n          if (!ST.chat[i].is_user && ST.chat[i].TavernDB_ACU_IsolatedData) {\n            targetIndex = i;\n            break;\n          }\n        }\n        //  AI \n        if (targetIndex === -1) {\n          for (let i = ST.chat.length - 1; i >= 0; i--) {\n            if (!ST.chat[i].is_user) {\n              targetIndex = i;\n              break;\n            }\n          }\n        }\n\n        if (targetIndex !== -1) {\n          if (!floorMap.has(targetIndex)) floorMap.set(targetIndex, new Set());\n          newTables.forEach(t => floorMap.get(targetIndex)!.add(t));\n          console.info(`[ACU]  ${Array.from(newTables).join(', ')}  ${targetIndex}`);\n        } else {\n          console.warn('[ACU]  AI ');\n        }\n      }\n\n      // F.  ()\n      let savedAny = false;\n      for (const [floorIdx, tableIds] of floorMap.entries()) {\n        const targetMsg = ST.chat[floorIdx];\n        if (!targetMsg) continue;\n\n        // 1. \n        let isolatedData = targetMsg.TavernDB_ACU_IsolatedData;\n        //  ()\n        if (typeof isolatedData === 'string') {\n          try {\n            isolatedData = JSON.parse(isolatedData);\n          } catch {\n            isolatedData = {};\n          }\n        }\n        if (!isolatedData || typeof isolatedData !== 'object') {\n          isolatedData = {};\n        }\n\n        // 2. \n        //  \"\"  key undefined\n        const slotKey = configKey || '';\n\n        if (!isolatedData[slotKey]) {\n          isolatedData[slotKey] = {\n            independentData: {},\n            modifiedKeys: [],\n            updateGroupKeys: [],\n          };\n        }\n\n        const currentTagData = isolatedData[slotKey];\n        if (!currentTagData.independentData) currentTagData.independentData = {};\n\n        // 3. \n        const tablesToUpdate = Array.from(tableIds);\n        tablesToUpdate.forEach(tableId => {\n          //  finalData \n          if (finalData[tableId]) {\n            currentTagData.independentData[tableId] = klona(finalData[tableId]);\n          }\n        });\n\n        // 4.  modifiedKeys\n        const existingKeys = currentTagData.modifiedKeys || [];\n        currentTagData.modifiedKeys = [...new Set([...existingKeys, ...tablesToUpdate])];\n\n        // 5. \n        targetMsg.TavernDB_ACU_IsolatedData = isolatedData;\n\n        // 6.  ()\n        if (configKey) {\n          targetMsg.TavernDB_ACU_Identity = configKey;\n        }\n        //  IndependentData\n        //  ()\n        targetMsg.TavernDB_ACU_IndependentData = currentTagData.independentData;\n        targetMsg.TavernDB_ACU_ModifiedKeys = currentTagData.modifiedKeys;\n        targetMsg.TavernDB_ACU_UpdateGroupKeys = currentTagData.updateGroupKeys;\n\n        savedAny = true;\n        console.info(`[ACU]  ${floorIdx}: ${tablesToUpdate.join(', ')}`);\n      }\n\n      // G. \n      if (savedAny) {\n        //  ()\n\n        if (ST.saveChat) {\n          await ST.saveChat();\n          await syncWorldbook();\n          // \n          return finalData;\n        }\n      }\n    } catch (e) {\n      console.error('[ACU] Incremental save error:', e);\n      throw e;\n    }\n\n    await syncWorldbook();\n    return finalData;\n  }\n\n  /**\n   * \n   */\n  async function syncWorldbook(): Promise<void> {\n    const api = getCore().getDB();\n    if (api && api.syncWorldbookEntries) {\n      try {\n        await api.syncWorldbookEntries({ createIfNeeded: true });\n      } catch (syncErr) {\n        console.warn('[ACU] Worldbook sync failed after save:', syncErr);\n      }\n    } else {\n      console.warn('[ACU] syncWorldbookEntries API not found, skipping sync.');\n    }\n  }\n\n  // ============================================================\n  //  ( saveDataToDatabase)\n  // ============================================================\n\n  /**\n   * \n   * @param tableData  ( API )\n   * @param skipRender  UI \n   * @param commitDeletes \n   * @param targetIndex  (-1 )\n   * @returns \n   */\n  async function saveToDatabase(\n    tableData: RawDatabaseData | null = null,\n    skipRender: boolean = false,\n    commitDeletes: boolean = false,\n    targetIndex: number = -1,\n  ): Promise<boolean> {\n    // 1. \n    if (dataStore.isSaving) {\n      console.warn('[ACU] Save already in progress');\n      return false;\n    }\n\n    // 2. \n    let dataToUse = dataStore.getStagedData();\n    if (!dataToUse) {\n      dataToUse = tableData || getTableData();\n    }\n\n    if (!dataToUse) {\n      console.warn('[ACU] ');\n      return false;\n    }\n\n    const { $ } = getCore();\n    const $saveBtn = $?.('#acu-btn-save-global, #acu-parent-container #acu-btn-save-global');\n    let originalIcon = '';\n\n    try {\n      // \n      dataStore.isSaving = true;\n\n      if (!skipRender && $saveBtn?.length) {\n        originalIcon = $saveBtn.html();\n        $saveBtn.html('<i class=\"fa-solid fa-spinner fa-spin\"></i>').prop('disabled', true);\n      }\n\n      //  ()\n      let savedData: RawDatabaseData | null = null;\n\n      if (targetIndex >= 0) {\n        // [2]  ()\n        console.info('[ACU]  ()...');\n        savedData = await executeFullSave(dataToUse, commitDeletes, targetIndex);\n      } else {\n        // [1]  ()\n        console.info('[ACU]  ()...');\n        const modifiedTableIds = dataStore.getModifiedTableIds();\n\n        if (modifiedTableIds.length === 0) {\n          console.info('[ACU] ');\n          //  true ()\n          // \n          return true;\n        }\n\n        savedData = await executeIncrementalSave(dataToUse, commitDeletes, modifiedTableIds);\n      }\n\n      if (!skipRender) {\n        // \n        const savedFloor = (savedData as any)?._savedToFloor;\n        if (savedFloor !== undefined) {\n          toast.success(` ${savedFloor}  ()`);\n        } else if (savedData) {\n          // \n          toast.success('');\n        }\n\n        // \n        const parentDoc = window.parent?.document || document;\n        $(parentDoc).find('.acu-highlight-changed').removeClass('acu-highlight-changed');\n        $saveBtn?.removeClass('acu-save-alert');\n\n        // \n        dataStore.clearChanges(commitDeletes);\n\n        // \n        dataStore.stagedData = null;\n\n        // \n        if (savedData) {\n          dataStore.saveSnapshot(savedData);\n        }\n      }\n\n      // \n      await syncWorldbook();\n\n      return true;\n    } catch (e) {\n      console.error('[ACU] Save failed:', e);\n      if (!skipRender) {\n        toast.error(': ' + (e as Error).message);\n      }\n      return false;\n    } finally {\n      // \n      setTimeout(() => {\n        dataStore.isSaving = false;\n        if (!skipRender && $saveBtn?.length) {\n          $saveBtn.html(originalIcon || '<i class=\"fa-solid fa-save\"></i>').prop('disabled', false);\n        }\n      }, 100);\n    }\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param data \n   */\n  function saveSnapshot(data: RawDatabaseData): void {\n    dataStore.saveSnapshot(data);\n  }\n\n  /**\n   * \n   */\n  function loadSnapshot(): RawDatabaseData | null {\n    return dataStore.loadSnapshot();\n  }\n\n  /**\n   * \n   */\n  function clearSnapshot(): void {\n    dataStore.clearSnapshot();\n  }\n\n  // ============================================================\n  //  ( purgeFloorRange)\n  // ============================================================\n\n  /**\n   * \n   * @param startIdx \n   * @param endIdx \n   */\n  async function purgeFloorRange(startIdx: number, endIdx: number): Promise<void> {\n    if (dataStore.isSaving) return;\n\n    //  SillyTavern \n    let ST = (window as any).SillyTavern || (window.parent ? (window.parent as any).SillyTavern : null);\n    if (!ST && (window as any).top && (window as any).top.SillyTavern) {\n      ST = (window as any).top.SillyTavern;\n    }\n\n    if (!ST || !ST.chat) {\n      toast.error(' SillyTavern ');\n      return;\n    }\n\n    // \n    const maxIdx = ST.chat.length - 1;\n    startIdx = Math.max(0, startIdx);\n    endIdx = Math.min(maxIdx, endIdx);\n\n    if (isNaN(startIdx) || isNaN(endIdx) || startIdx > endIdx) {\n      toast.warning('');\n      return;\n    }\n\n    // \n    dataStore.isSaving = true;\n\n    try {\n      console.log(`[ACU-Purge] : ${startIdx} - ${endIdx}`);\n\n      let changesCount = 0;\n\n      // \n      const keysToDelete = [\n        'TavernDB_ACU_Data',\n        'TavernDB_ACU_SummaryData',\n        'TavernDB_ACU_IndependentData',\n        'TavernDB_ACU_Identity',\n        'TavernDB_ACU_IsolatedData',\n        'TavernDB_ACU_ModifiedKeys',\n        'TavernDB_ACU_UpdateGroupKeys',\n      ];\n\n      // \n      for (let i = startIdx; i <= endIdx; i++) {\n        const msg = ST.chat[i];\n        if (!msg) continue;\n\n        let messageModified = false;\n        for (const key of keysToDelete) {\n          if (Object.prototype.hasOwnProperty.call(msg, key)) {\n            delete msg[key];\n            messageModified = true;\n          }\n        }\n\n        if (messageModified) {\n          changesCount++;\n        }\n      }\n\n      // \n      if (changesCount > 0) {\n        // \n        if (ST.saveChat) {\n          await ST.saveChat();\n        }\n\n        // \n        await syncWorldbook();\n\n        //  merge \n        //  diff \n        const latestData = getTableData();\n        if (latestData) {\n          dataStore.saveSnapshot(latestData);\n        } else {\n          dataStore.clearSnapshot();\n        }\n        dataStore.clearChanges(true);\n\n        toast.success(` ${changesCount} `);\n      } else {\n        toast.info('');\n      }\n    } catch (e) {\n      console.error('[ACU] Purge Error:', e);\n      toast.error(': ' + (e as Error).message);\n    } finally {\n      dataStore.isSaving = false;\n    }\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * \n   * @param sheetKeys  key  ( ['sheet_0', 'sheet_2'])\n   * @param startIdx  (chat )\n   * @param endIdx  (chat )\n   * @returns \n   */\n  async function purgeTableDataByRange(\n    sheetKeys: string[],\n    startIdx: number,\n    endIdx: number,\n  ): Promise<{ changed: boolean; changedCount: number }> {\n    // \n    const keys = Array.isArray(sheetKeys)\n      ? [...new Set(sheetKeys.filter(k => typeof k === 'string' && k.startsWith('sheet_')))]\n      : [];\n\n    if (keys.length === 0) {\n      return { changed: false, changedCount: 0 };\n    }\n\n    //  SillyTavern \n    let ST = (window as any).SillyTavern || (window.parent ? (window.parent as any).SillyTavern : null);\n    if (!ST && (window as any).top && (window as any).top.SillyTavern) {\n      ST = (window as any).top.SillyTavern;\n    }\n\n    if (!ST?.chat || ST.chat.length === 0) {\n      toast.error(' SillyTavern ');\n      return { changed: false, changedCount: 0 };\n    }\n\n    // \n    const maxIdx = ST.chat.length - 1;\n    startIdx = Math.max(0, startIdx);\n    endIdx = Math.min(maxIdx, endIdx);\n\n    if (isNaN(startIdx) || isNaN(endIdx) || startIdx > endIdx) {\n      toast.warning('');\n      return { changed: false, changedCount: 0 };\n    }\n\n    // \n    if (dataStore.isSaving) {\n      toast.warning('');\n      return { changed: false, changedCount: 0 };\n    }\n    dataStore.isSaving = true;\n\n    //  key\n    const removeKeyFromArray = (arr: string[], key: string): { arr: string[]; changed: boolean } => {\n      if (!Array.isArray(arr) || arr.length === 0) return { arr, changed: false };\n      const next = arr.filter(x => x !== key);\n      return { arr: next, changed: next.length !== arr.length };\n    };\n\n    try {\n      console.info(`[ACU-AdvancedPurge]  [${keys.join(', ')}]  ${startIdx}-${endIdx} `);\n\n      let changedAny = false;\n      let changedCount = 0;\n\n      // \n      for (let i = startIdx; i <= endIdx; i++) {\n        const msg = ST.chat[i];\n        if (!msg || msg.is_user) continue;\n\n        let msgChanged = false;\n\n        //  TavernDB_ACU_IsolatedData (10.3+ )\n        if (msg.TavernDB_ACU_IsolatedData && typeof msg.TavernDB_ACU_IsolatedData === 'object') {\n          // \n          Object.keys(msg.TavernDB_ACU_IsolatedData).forEach(tagKey => {\n            const tagData = msg.TavernDB_ACU_IsolatedData[tagKey];\n            if (!tagData || typeof tagData !== 'object') return;\n\n            //  independentData \n            if (tagData.independentData && typeof tagData.independentData === 'object') {\n              keys.forEach(k => {\n                if (tagData.independentData[k]) {\n                  delete tagData.independentData[k];\n                  msgChanged = true;\n                }\n              });\n            }\n\n            //  modifiedKeys \n            if (Array.isArray(tagData.modifiedKeys)) {\n              keys.forEach(k => {\n                const r = removeKeyFromArray(tagData.modifiedKeys, k);\n                if (r.changed) {\n                  tagData.modifiedKeys = r.arr;\n                  msgChanged = true;\n                }\n              });\n            }\n\n            //  updateGroupKeys \n            if (Array.isArray(tagData.updateGroupKeys)) {\n              keys.forEach(k => {\n                const r = removeKeyFromArray(tagData.updateGroupKeys, k);\n                if (r.changed) {\n                  tagData.updateGroupKeys = r.arr;\n                  msgChanged = true;\n                }\n              });\n            }\n\n            //  independentData \n            if (\n              tagData.independentData &&\n              Object.keys(tagData.independentData).length === 0 &&\n              (!tagData.modifiedKeys || tagData.modifiedKeys.length === 0) &&\n              (!tagData.updateGroupKeys || tagData.updateGroupKeys.length === 0)\n            ) {\n              delete msg.TavernDB_ACU_IsolatedData[tagKey];\n              msgChanged = true;\n            }\n          });\n\n          //  IsolatedData \n          if (Object.keys(msg.TavernDB_ACU_IsolatedData).length === 0) {\n            delete msg.TavernDB_ACU_IsolatedData;\n            msgChanged = true;\n          }\n        }\n\n        // \n        if (msg.TavernDB_ACU_IndependentData && typeof msg.TavernDB_ACU_IndependentData === 'object') {\n          keys.forEach(k => {\n            if (msg.TavernDB_ACU_IndependentData[k]) {\n              delete msg.TavernDB_ACU_IndependentData[k];\n              msgChanged = true;\n            }\n          });\n        }\n\n        if (Array.isArray(msg.TavernDB_ACU_ModifiedKeys)) {\n          keys.forEach(k => {\n            const r = removeKeyFromArray(msg.TavernDB_ACU_ModifiedKeys, k);\n            if (r.changed) {\n              msg.TavernDB_ACU_ModifiedKeys = r.arr;\n              msgChanged = true;\n            }\n          });\n        }\n\n        if (Array.isArray(msg.TavernDB_ACU_UpdateGroupKeys)) {\n          keys.forEach(k => {\n            const r = removeKeyFromArray(msg.TavernDB_ACU_UpdateGroupKeys, k);\n            if (r.changed) {\n              msg.TavernDB_ACU_UpdateGroupKeys = r.arr;\n              msgChanged = true;\n            }\n          });\n        }\n\n        if (msg.TavernDB_ACU_Data && typeof msg.TavernDB_ACU_Data === 'object') {\n          keys.forEach(k => {\n            if (msg.TavernDB_ACU_Data[k]) {\n              delete msg.TavernDB_ACU_Data[k];\n              msgChanged = true;\n            }\n          });\n        }\n\n        if (msg.TavernDB_ACU_SummaryData && typeof msg.TavernDB_ACU_SummaryData === 'object') {\n          keys.forEach(k => {\n            if (msg.TavernDB_ACU_SummaryData[k]) {\n              delete msg.TavernDB_ACU_SummaryData[k];\n              msgChanged = true;\n            }\n          });\n        }\n\n        if (msgChanged) {\n          changedAny = true;\n          changedCount++;\n        }\n      }\n\n      // \n      if (changedAny) {\n        if (ST.saveChat) {\n          await ST.saveChat();\n        }\n\n        // \n        await syncWorldbook();\n\n        //  merge \n        //  diff \n        const latestData = getTableData();\n        if (latestData) {\n          dataStore.saveSnapshot(latestData);\n        } else {\n          dataStore.clearSnapshot();\n        }\n        dataStore.clearChanges(true);\n\n        console.info(`[ACU-AdvancedPurge]  ${changedCount} `);\n      }\n\n      return { changed: changedAny, changedCount };\n    } catch (e) {\n      console.error('[ACU-AdvancedPurge] :', e);\n      throw e;\n    } finally {\n      dataStore.isSaving = false;\n    }\n  }\n\n  // ============================================================\n  //  ()\n  // ============================================================\n\n  /**  WatchStop  */\n  let autoSaveStop: WatchStopHandle | null = null;\n\n  /**\n   * \n   * @param delay  (),  5000ms\n   */\n  function setupAutoSave(delay = 5000): void {\n    // \n    if (autoSaveStop) {\n      autoSaveStop();\n      autoSaveStop = null;\n    }\n\n    //  VueUse  watchDebounced \n    // watchDebounced  WatchStopHandle\n    autoSaveStop = watchDebounced(\n      () => dataStore.tables,\n      async () => {\n        // \n        if (dataStore.hasChanges && configStore.config.autoSave) {\n          try {\n            console.info('[ACU] ...');\n            await dataStore.saveToDatabase();\n            console.info('[ACU] ');\n          } catch (error) {\n            console.error('[ACU] :', error);\n          }\n        }\n      },\n      { debounce: delay, deep: true },\n    );\n\n    console.info(`[ACU] : ${delay}ms`);\n  }\n\n  /**\n   * \n   */\n  function stopAutoSave(): void {\n    if (autoSaveStop) {\n      autoSaveStop();\n      autoSaveStop = null;\n      console.info('[ACU] ');\n    }\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * : \n   */\n  async function initDataPersistence(): Promise<void> {\n    console.info('[ACU] ...');\n\n    // 1. \n    await dataStore.loadFromDatabase();\n\n    // 2.  ()\n    if (configStore.config.autoSave) {\n      setupAutoSave(configStore.config.autoSaveDelay || 5000);\n    }\n\n    console.info('[ACU] ');\n  }\n\n  // ============================================================\n  //  API\n  // ============================================================\n\n  return {\n    // \n    saveToDatabase,\n    syncWorldbook,\n\n    // \n    saveSnapshot,\n    loadSnapshot,\n    clearSnapshot,\n\n    // \n    purgeFloorRange,\n    purgeTableDataByRange,\n\n    // \n    setupAutoSave,\n    stopAutoSave,\n\n    // \n    initDataPersistence,\n\n    // \n    getTableData,\n\n    // Store  ()\n    dataStore,\n  };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Composable\n *  src//index.ts\n */\n\nimport { toast } from './useToast';\n\n//  index.ts \n// \nif (typeof (window as any).__acu_hidden_prompt === 'undefined') {\n  (window as any).__acu_hidden_prompt = '';\n}\n\n// DOM \nconst domCleanupFns: (() => void)[] = [];\n\n// \nlet isProcessing = false;\n\n/**\n * \n * @param prompt \n */\nexport function setHiddenPrompt(prompt: string) {\n  (window as any).__acu_hidden_prompt = prompt;\n  console.info('[ACU] :', prompt.substring(0, 50));\n}\n\n/**\n * \n */\nexport function getHiddenPrompt(): string {\n  return (window as any).__acu_hidden_prompt || '';\n}\n\n/**\n *  DOM \n *  src//index.ts  setupSendIntercept \n */\nexport function setupSendIntercept() {\n  // \n  cleanupSendIntercept();\n\n  const parentDoc = window.parent.document;\n  const textarea = parentDoc.getElementById('send_textarea') as HTMLTextAreaElement;\n  const sendBtn = parentDoc.getElementById('send_but') as HTMLElement;\n\n  if (!textarea || !sendBtn) {\n    console.warn('[ACU] 1');\n    setTimeout(setupSendIntercept, 1000);\n    return;\n  }\n\n  // \n  const handleSend = async (e: Event) => {\n    // \n    if (isProcessing) return;\n\n    // \n    const hiddenPrompt = getHiddenPrompt();\n    if (!hiddenPrompt.trim()) return;\n\n    // \n    e.preventDefault();\n    e.stopImmediatePropagation();\n\n    isProcessing = true;\n\n    try {\n      // \n      const userInput = textarea.value.trim();\n\n      //  + \n      const wrappedPrompt = `${hiddenPrompt}`;\n      const combinedMessage = userInput ? `${wrappedPrompt}\\n${userInput}` : wrappedPrompt;\n\n      console.info('[ACU] :', combinedMessage.substring(0, 80));\n\n      //  /send  12s \n      //  as user \n      const parentWin = window.parent as any;\n      if (parentWin.TavernHelper && parentWin.TavernHelper.triggerSlash) {\n        await parentWin.TavernHelper.triggerSlash(`/send as=user ${combinedMessage}`);\n      } else {\n        console.error('[ACU] TavernHelper.triggerSlash ');\n        throw new Error('TavernHelper API unavailable');\n      }\n\n      console.info('[ACU]  ');\n\n      // \n      setHiddenPrompt('');\n\n      // \n      textarea.value = '';\n      textarea.dispatchEvent(new Event('input', { bubbles: true }));\n\n      // \n      await new Promise(resolve => setTimeout(resolve, 50));\n\n      //  click\n      // -  AI continue \n      // -  capture \n      sendBtn.click();\n\n      console.info('[ACU]  ');\n    } catch (err) {\n      console.error('[ACU] :', err);\n      toast.error('');\n    } finally {\n      //  click \n      setTimeout(() => {\n        isProcessing = false;\n      }, 100);\n    }\n  };\n\n  // capture \n  const clickHandler = (e: MouseEvent) => {\n    handleSend(e);\n  };\n  sendBtn.addEventListener('click', clickHandler, { capture: true });\n  domCleanupFns.push(() => sendBtn.removeEventListener('click', clickHandler, { capture: true }));\n\n  //  Enter capture \n  //  Enter  click click \n  //  keydown capture \n  const keydownHandler = (e: KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      //  Enter \n      const hiddenPrompt = getHiddenPrompt();\n      if (!hiddenPrompt.trim()) return;\n\n      //  Enter \n      e.preventDefault();\n      e.stopImmediatePropagation();\n\n      //  click click \n      sendBtn.click();\n    }\n  };\n  textarea.addEventListener('keydown', keydownHandler, { capture: true });\n  domCleanupFns.push(() => textarea.removeEventListener('keydown', keydownHandler, { capture: true }));\n\n  console.info('[ACU] ');\n}\n\n/**\n *  DOM \n */\nexport function cleanupSendIntercept() {\n  domCleanupFns.forEach(fn => fn());\n  domCleanupFns.length = 0;\n}\n\n/**\n * \n * \n * @param text \n * @param separator \n * @param targetSelector \n */\nexport function appendPromptToInput(text: string, separator: string = '\\n', targetSelector: string = '#send_textarea') {\n  const parentDoc = window.parent.document;\n  const textarea = parentDoc.querySelector(targetSelector) as HTMLTextAreaElement | HTMLInputElement | null;\n  //  ( UA )\n  const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\n  if (textarea) {\n    const currentVal = textarea.value || '';\n    // \n    const newVal = currentVal ? currentVal + separator + text : text;\n\n    textarea.value = newVal;\n    textarea.dispatchEvent(new Event('input', { bubbles: true }));\n\n    if (!isMobile) {\n      textarea.focus();\n      //  textarea  setSelectionRange\n      if ('setSelectionRange' in textarea) {\n        textarea.setSelectionRange(newVal.length, newVal.length);\n      }\n    }\n    console.info('[ACU] :', targetSelector);\n  } else {\n    console.warn('[ACU] :', targetSelector);\n  }\n}\n\n// \nlet lastFocusedInput: HTMLTextAreaElement | HTMLInputElement | null = null;\nlet focusListenerSetup = false;\n\n/**\n *  ACU \n * ACU \n */\nfunction isACUInternalInput(el: HTMLElement): boolean {\n  //  id  class  acu \n  const id = el.id || '';\n  const className = el.className || '';\n\n  if (id.startsWith('acu') || id.includes('-acu-')) {\n    return true;\n  }\n\n  if (className.includes('acu-')) {\n    return true;\n  }\n\n  //  ACU \n  const acuContainer = el.closest('#acu-parent-container, .acu-wrapper, .acu-modal-container');\n  if (acuContainer) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * \n * \n *  ACU \n */\nexport function setupFocusTracking() {\n  if (focusListenerSetup) return;\n\n  const parentDoc = window.parent.document;\n\n  //  focusin  focus\n  parentDoc.addEventListener(\n    'focusin',\n    (e: FocusEvent) => {\n      const target = e.target as HTMLElement;\n      if (\n        target &&\n        (target.tagName === 'TEXTAREA' || (target.tagName === 'INPUT' && (target as HTMLInputElement).type === 'text'))\n      ) {\n        //  ACU \n        if (isACUInternalInput(target)) {\n          console.info('[ACU]  ACU :', target.id || target.className);\n          return;\n        }\n\n        lastFocusedInput = target as HTMLTextAreaElement | HTMLInputElement;\n        console.info('[ACU] :', target.id || target.className);\n      }\n    },\n    true,\n  );\n\n  focusListenerSetup = true;\n  console.info('[ACU] ');\n}\n\n/**\n * \n */\nexport function getLastFocusedInput(): HTMLTextAreaElement | HTMLInputElement | null {\n  return lastFocusedInput;\n}\n\n/**\n * \n */\nexport function setTargetInput(input: HTMLTextAreaElement | HTMLInputElement | null) {\n  lastFocusedInput = input;\n}\n\n/**\n * \n * \n * @param text \n * @param separator \n */\nexport function appendToActiveInput(text: string, separator: string = ' ') {\n  // \n  if (lastFocusedInput && lastFocusedInput.isConnected) {\n    const input = lastFocusedInput;\n    const currentVal = input.value || '';\n    const newVal = currentVal ? currentVal + separator + text : text;\n\n    input.value = newVal;\n    input.dispatchEvent(new Event('input', { bubbles: true }));\n\n    // \n    input.focus();\n    if ('setSelectionRange' in input) {\n      input.setSelectionRange(newVal.length, newVal.length);\n    }\n    console.info('[ACU] :', input.id || input.className);\n  } else {\n    // \n    appendPromptToInput(text, separator);\n  }\n}\n\n/**\n *  Composable\n */\nexport function useHiddenPrompt() {\n  return {\n    setHiddenPrompt,\n    getHiddenPrompt,\n    setupSendIntercept,\n    cleanupSendIntercept,\n    appendPromptToInput,\n    appendToActiveInput,\n    setupFocusTracking,\n    getLastFocusedInput,\n    setTargetInput,\n  };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Composable\n *  CoreActions \n */\n\nimport { useDataStore } from '../stores/useDataStore';\nimport { getBadgeStyle, getCore } from '../utils';\nimport { useDataPersistence } from './useDataPersistence';\nimport { appendToActiveInput } from './useHiddenPrompt';\nimport { toast } from './useToast';\n\nexport function useCoreActions() {\n  const { saveToDatabase, getTableData, saveSnapshot, loadSnapshot } = useDataPersistence();\n  const dataStore = useDataStore();\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param tableKey  Key (sheetId 'sheet_0')\n   * @param rowIdx  ()\n   */\n  const insertRow = async (tableKey: string, rowIdx: number) => {\n    //  stagedData API \n    let rawData = dataStore.getStagedData();\n    if (!rawData) {\n      rawData = getTableData();\n    }\n    if (!rawData) {\n      console.warn('[ACU insertRow] ');\n      toast.error('');\n      return;\n    }\n\n    const sheet = rawData[tableKey];\n    if (!sheet?.content) {\n      console.warn('[ACU insertRow] :', tableKey, ':', Object.keys(rawData));\n      toast.error('');\n      return;\n    }\n\n    const content = sheet.content;\n    const colCount = content[0] ? content[0].length : 2;\n\n    // \n    const newRow = new Array(colCount).fill('');\n    // \n    if (colCount > 0) newRow[0] = String(content.length);\n\n    // rowIdx  0 content[0]  +2\n    content.splice(rowIdx + 2, 0, newRow);\n\n    toast.info('...');\n\n    //  stagedData saveToDatabase \n    dataStore.setStagedData(rawData);\n\n    //  manualDiffMap saveToDatabase \n    //  tableKey rowKey getModifiedTableIds \n    const tableName = sheet.name || tableKey.replace('sheet_', '');\n    const newRowIndex = rowIdx + 1; // \n    const rowKey = dataStore.getRowKey(tableName, newRowIndex);\n    dataStore.manualDiffMap.add(rowKey);\n    console.info(`[ACU insertRow] : ${rowKey}`);\n\n    // \n    dataStore.saveLastState();\n\n    // \n    const success = await saveToDatabase(rawData, false, true);\n    if (success) {\n      toast.success('');\n    }\n  };\n\n  /**\n   * \n   * @param content \n   */\n  const copyContent = (content: string) => {\n    const parentWin = window.parent || window;\n    // \n    if ((parentWin as any).TavernHelper && (parentWin as any).TavernHelper.triggerSlash) {\n      try {\n        const safeContent = content.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n');\n        (parentWin as any).TavernHelper.triggerSlash(`/clipboard-set \"${safeContent}\"`);\n        toast.success('');\n        return;\n      } catch (err) {\n        console.warn('', err);\n      }\n    }\n\n    //  textarea\n    const textArea = document.createElement('textarea');\n    textArea.value = content;\n    textArea.style.position = 'fixed';\n    textArea.style.left = '-9999px';\n    document.body.appendChild(textArea);\n    textArea.select();\n    try {\n      document.execCommand('copy');\n      toast.success('');\n    } catch (err) {\n      prompt(':', content);\n    }\n    document.body.removeChild(textArea);\n  };\n\n  /**\n   * \n   * @param tableName \n   * @param rowIdx \n   * @param $card  DOM  (jQuery )\n   */\n  const toggleDelete = (tableName: string, rowIdx: number, $card: any) => {\n    //  $card \n    if (!($card && $card.length)) {\n      const { $ } = getCore();\n      if ($) {\n        const parentDoc = window.parent.document;\n        // \n        const $cell = $(parentDoc).find(`.acu-editable-title[data-tname=\"${tableName}\"][data-row=\"${rowIdx}\"]`);\n        if ($cell.length) {\n          $card = $cell.closest('.acu-data-card');\n        }\n      }\n    }\n\n    if (!($card && $card.find)) {\n      console.warn('[ACU] toggleDelete failed: card element not found', { tableName, rowIdx });\n      return;\n    }\n\n    const deleteKey = `${tableName}-row-${rowIdx}`;\n\n    if (dataStore.isPendingDelete(deleteKey)) {\n      // \n      dataStore.toggleDelete(deleteKey);\n      $card.find('.acu-badge-pending').remove();\n      toast.success('');\n    } else {\n      // \n      dataStore.toggleDelete(deleteKey);\n      if ($card.find('.acu-badge-pending').length === 0) {\n        $card.append('<div class=\"acu-badge-pending\"></div>');\n      }\n      toast.warning('');\n    }\n\n    //  ( UI  store )\n    //  pendingDeletes \n  };\n\n  /**\n   *  ()\n   * @param text \n   */\n  const setInput = (text: string) => {\n    appendToActiveInput(text, ' ');\n  };\n\n  /**\n   * \n   * @param cellData \n   * @param newVal \n   * @param context \n   */\n  const editCell = (cellData: any, newVal: string, context?: Document) => {\n    const { tableKey, rowIdx, colIdx, $cell } = cellData;\n    const { $ } = getCore();\n    const doc = context || document;\n\n    let freshData = dataStore.getStagedData();\n    if (!freshData) freshData = getTableData();\n    if (!freshData) freshData = loadSnapshot();\n\n    if (freshData) {\n      const sheet = freshData[tableKey];\n      if (sheet?.content && sheet.content[rowIdx + 1]) {\n        sheet.content[rowIdx + 1][colIdx] = newVal;\n        dataStore.setStagedData(freshData);\n        saveSnapshot(freshData);\n      }\n    }\n\n    $cell.attr('data-val', encodeURIComponent(newVal));\n    $cell.data('val', encodeURIComponent(newVal));\n\n    let $displayTarget = $cell;\n    if ($cell.hasClass('acu-grid-item')) $displayTarget = $cell.find('.acu-grid-value');\n    else if ($cell.hasClass('acu-full-item')) $displayTarget = $cell.find('.acu-full-value');\n\n    const badgeStyle = getBadgeStyle(newVal);\n    if (badgeStyle && !$cell.hasClass('acu-editable-title')) {\n      $displayTarget.html(`<span class=\"acu-badge ${badgeStyle}\">${newVal}</span>`);\n    } else {\n      $displayTarget.text(newVal);\n    }\n\n    $displayTarget.addClass('acu-highlight-changed');\n    if ($cell.hasClass('acu-editable-title')) $cell.addClass('acu-highlight-changed');\n\n    //  Diff -  updateCell\n    dataStore.updateCell(tableKey, rowIdx, colIdx, newVal);\n\n    // UI \n    const $saveBtn = $(doc).find('#acu-btn-save-global');\n    $saveBtn.addClass('acu-save-alert');\n\n    toast.info('');\n  };\n\n  return {\n    insertRow,\n    copyContent,\n    toggleDelete,\n    setInput,\n    editCell,\n  };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  (VueUse )\n *\n * /\n *\n * \n * - \n * - \n * - \n */\n\nimport { useSwipe, useTextSelection, type UseSwipeDirection } from '@vueuse/core';\nimport { computed, onUnmounted, ref, watch, type Ref } from 'vue';\n\n// ============================================================\n// \n// ============================================================\n\nexport interface MobileGestureOptions {\n  /**  */\n  layout: 'horizontal' | 'vertical';\n  /**  */\n  threshold?: number;\n  /**  */\n  edgeThreshold?: number;\n  /**  */\n  onInsertRow?: () => void;\n  /**  */\n  onToggleDelete?: () => void;\n}\n\nexport interface CardGestureOptions {\n  /**  */\n  layout: 'horizontal' | 'vertical';\n  /**  */\n  onInsertRow: () => void;\n  /**  */\n  onToggleDelete: () => void;\n  /**\n   *  50\n   * : topH > 50 / botH > 50\n   */\n  horizontalThreshold?: number;\n  /**\n   *  40\n   * : leftW > 40 / rightW > 40\n   */\n  verticalThreshold?: number;\n  /**  5 */\n  edgeThreshold?: number;\n  /**\n   *  400\n   * : 400ms\n   */\n  longPressDelay?: number;\n  /**\n   *  5\n   * : Math.abs(deltaX) > 5 || Math.abs(deltaY) > 5\n   */\n  longPressCancelThreshold?: number;\n}\n\nexport interface GestureState {\n  /**  */\n  isSwiping: Ref<boolean>;\n  /**  */\n  isSelecting: Ref<boolean>;\n  /**  */\n  isAtEdge: Ref<boolean>;\n  /**  */\n  direction: Ref<UseSwipeDirection | null>;\n  /**  */\n  gestureType: Ref<'insert' | 'delete' | null>;\n}\n\n// ============================================================\n//  Composable ()\n// ============================================================\n\n/**\n *  - \n *\n * \n *\n * @example\n * ```vue\n * <script setup>\n * const containerRef = ref<HTMLElement>();\n * const { isSwiping, isSelecting, gestureType } = useMobileGestures(containerRef, {\n *   layout: 'horizontal',\n *   threshold: 80,\n *   onInsertRow: () => console.log(''),\n *   onToggleDelete: () => console.log(''),\n * });\n * </script>\n * ```\n */\nexport function useMobileGestures(target: Ref<HTMLElement | undefined>, options: MobileGestureOptions): GestureState {\n  const { layout, threshold = 80, edgeThreshold = 10, onInsertRow, onToggleDelete } = options;\n\n  // \n  const { text: selectedText } = useTextSelection();\n  const isSelecting = computed(() => selectedText.value.length > 0);\n\n  // \n  const isAtEdge = ref(false);\n  const scrollDirection = ref<'start' | 'end' | null>(null);\n\n  // \n  const gestureType = ref<'insert' | 'delete' | null>(null);\n\n  /**\n   * \n   */\n  const checkScrollEdge = (element: HTMLElement) => {\n    if (layout === 'horizontal') {\n      // \n      const atTop = element.scrollTop <= edgeThreshold;\n      const atBottom = element.scrollTop + element.clientHeight >= element.scrollHeight - edgeThreshold;\n\n      isAtEdge.value = atTop || atBottom;\n      scrollDirection.value = atTop ? 'start' : atBottom ? 'end' : null;\n    } else {\n      // \n      const atLeft = element.scrollLeft <= edgeThreshold;\n      const atRight = element.scrollLeft + element.clientWidth >= element.scrollWidth - edgeThreshold;\n\n      isAtEdge.value = atLeft || atRight;\n      scrollDirection.value = atLeft ? 'start' : atRight ? 'end' : null;\n    }\n  };\n\n  /**\n   * \n   */\n  const handleSwipeComplete = (dir: UseSwipeDirection, lengthX: number, lengthY: number) => {\n    if (isSelecting.value) {\n      console.info('[ACU Mobile] ');\n      return;\n    }\n\n    if (layout === 'horizontal' && dir === 'down' && lengthY > threshold && scrollDirection.value === 'start') {\n      //  - \n      console.info('[ACU Mobile]  - ');\n      gestureType.value = 'insert';\n      onInsertRow?.();\n    } else if (layout === 'horizontal' && dir === 'up' && lengthY > threshold && scrollDirection.value === 'end') {\n      //  - \n      console.info('[ACU Mobile]  - ');\n      gestureType.value = 'delete';\n      onToggleDelete?.();\n    } else if (layout === 'vertical' && dir === 'right' && lengthX > threshold) {\n      //  - \n      console.info('[ACU Mobile]  - ');\n      gestureType.value = 'delete';\n      onToggleDelete?.();\n    } else if (layout === 'vertical' && dir === 'left' && lengthX > threshold) {\n      //  - \n      console.info('[ACU Mobile]  - ');\n      gestureType.value = 'insert';\n      onInsertRow?.();\n    }\n\n    // \n    setTimeout(() => {\n      gestureType.value = null;\n    }, 300);\n  };\n\n  //  VueUse  useSwipe\n  const { direction, lengthX, lengthY, isSwiping } = useSwipe(target, {\n    passive: false,\n    threshold: 10,\n    onSwipeStart(e) {\n      // \n      if (isSelecting.value) {\n        e.preventDefault();\n        return;\n      }\n\n      // \n      if (target.value) {\n        checkScrollEdge(target.value);\n      }\n    },\n    onSwipe(_e) {\n      if (isSelecting.value) return;\n\n      // \n      if (target.value) {\n        checkScrollEdge(target.value);\n      }\n    },\n    onSwipeEnd(_e, dir) {\n      if (isSelecting.value) return;\n      if (dir) {\n        handleSwipeComplete(dir, Math.abs(lengthX.value), Math.abs(lengthY.value));\n      }\n    },\n  });\n\n  return {\n    isSwiping,\n    isSelecting,\n    isAtEdge,\n    direction,\n    gestureType,\n  };\n}\n\n// ============================================================\n//  Composable\n// ============================================================\n\n/**\n *  -  Touch \n *\n *  DataCard \n *  6.4.1.ts \n */\nexport function useCardGestures(cardRef: Ref<HTMLElement | undefined>, options: CardGestureOptions) {\n  const {\n    layout,\n    onInsertRow,\n    onToggleDelete,\n    //  50px 40px\n    horizontalThreshold = 50,\n    verticalThreshold = 40,\n    edgeThreshold = 5,\n    //  400ms\n    longPressDelay = 400,\n    //  5px \n    longPressCancelThreshold = 5,\n  } = options;\n\n  // \n  const threshold = layout === 'horizontal' ? horizontalThreshold : verticalThreshold;\n\n  //  VueUse\n  const { text } = useTextSelection();\n  const isSelectingVueUse = computed(() => text.value.length > 0);\n\n  //  false touchstart  checkScrollEdge \n  const scrolledToEdge = ref(false);\n  const atStart = ref(false);\n  const atEnd = ref(false);\n\n  // \n  const gestureType = ref<'insert' | 'delete' | null>(null);\n\n  // \n  const isSwiping = ref(false);\n  const touchStartX = ref(0);\n  const touchStartY = ref(0);\n  const lengthX = ref(0);\n  const lengthY = ref(0);\n\n  // ============================================================\n  // \n  //  touchmove \n  // ============================================================\n  const directionLocked = ref<'horizontal' | 'vertical' | null>(null);\n  const DIRECTION_LOCK_THRESHOLD = 10; //  10px \n\n  // ============================================================\n  // \n  // \n  // ============================================================\n  const gestureLocked = ref(false);\n\n  // ============================================================\n  // 2 scrollHeight \n  // .acu-pull-overlay  scrollHeight\n  //  touchstart \n  // ============================================================\n  const initialScrollHeight = ref(0);\n  const initialClientHeight = ref(0);\n  const initialIsShortCard = ref(false);\n\n  // \n  const parentScrollStart = ref(0); // touchstart  scrollLeft\n  const parentScrollContainer = ref<HTMLElement | null>(null); // \n\n  // ============================================================\n  // shouldBlockClick \n  //  touchstart \n  // ============================================================\n  const shouldBlockClick = ref(false);\n\n  // \n  const longPressTimer = ref<ReturnType<typeof setTimeout> | null>(null);\n  const isSelectionMode = ref(false);\n\n  /**\n   * \n   */\n  const checkScrollEdge = (e?: Event) => {\n    const target = e?.currentTarget as HTMLElement | undefined;\n    const el = target || cardRef.value;\n    if (!el) return;\n\n    if (layout === 'horizontal') {\n      // \n      atStart.value = el.scrollTop <= edgeThreshold;\n      atEnd.value = el.scrollTop + el.clientHeight >= el.scrollHeight - edgeThreshold;\n    } else {\n      // \n      atStart.value = el.scrollLeft <= edgeThreshold;\n      atEnd.value = el.scrollLeft + el.clientWidth >= el.scrollWidth - edgeThreshold;\n    }\n\n    scrolledToEdge.value = atStart.value || atEnd.value;\n  };\n\n  /**\n   *  window.getSelection()\n   */\n  const hasNativeSelection = (): boolean => {\n    const selection = window.getSelection();\n    return selection ? selection.toString().length > 0 : false;\n  };\n\n  /**\n   * \n   */\n  const isSelecting = computed(() => isSelectingVueUse.value || hasNativeSelection());\n\n  /**\n   * \n   * \n   */\n  const handleTouchStart = (e: TouchEvent) => {\n    const el = cardRef.value;\n    if (!el) return;\n\n    // \n    shouldBlockClick.value = false;\n    isSelectionMode.value = false;\n    gestureType.value = null;\n    directionLocked.value = null; // \n    gestureLocked.value = false; // \n\n    // \n    if (longPressTimer.value) {\n      clearTimeout(longPressTimer.value);\n      longPressTimer.value = null;\n    }\n\n    // \n    if (hasNativeSelection()) {\n      shouldBlockClick.value = true;\n    }\n\n    const touch = e.touches[0];\n    touchStartX.value = touch.clientX;\n    touchStartY.value = touch.clientY;\n    lengthX.value = 0;\n    lengthY.value = 0;\n    isSwiping.value = true;\n\n    // \n    if (layout === 'horizontal') {\n      const scrollContainer = el.closest('.acu-data-display') as HTMLElement | null;\n      parentScrollContainer.value = scrollContainer;\n      parentScrollStart.value = scrollContainer?.scrollLeft ?? 0;\n    }\n\n    //  atStart/atEnd  touchmove \n    // \"\" atStart  true touchmove \n    checkScrollEdge();\n\n    // 2 0 \n    initialScrollHeight.value = el.scrollHeight;\n    initialClientHeight.value = el.clientHeight;\n    initialIsShortCard.value = el.scrollHeight <= el.clientHeight + 2;\n\n    // 400ms\n    longPressTimer.value = setTimeout(() => {\n      isSelectionMode.value = true;\n      // \n      shouldBlockClick.value = true;\n    }, longPressDelay);\n  };\n\n  /**\n   * \n   * \n   */\n  const handleTouchMove = (e: TouchEvent) => {\n    const el = cardRef.value;\n    if (!el || !isSwiping.value) return;\n\n    const touch = e.touches[0];\n    const deltaX = touch.clientX - touchStartX.value;\n    const deltaY = touch.clientY - touchStartY.value;\n\n    lengthX.value = deltaX;\n    lengthY.value = deltaY;\n\n    //  5px\n    if (Math.abs(deltaX) > longPressCancelThreshold || Math.abs(deltaY) > longPressCancelThreshold) {\n      if (longPressTimer.value) {\n        clearTimeout(longPressTimer.value);\n        longPressTimer.value = null;\n      }\n    }\n\n    // \n    const nativeSelection = hasNativeSelection();\n    if (shouldBlockClick.value || isSelectionMode.value || nativeSelection) {\n      shouldBlockClick.value = true; // \n      return; // /\n    }\n\n    // \n    checkScrollEdge();\n\n    // ============================================================\n    // \n    // \n    // ============================================================\n    if (\n      !directionLocked.value &&\n      (Math.abs(deltaX) > DIRECTION_LOCK_THRESHOLD || Math.abs(deltaY) > DIRECTION_LOCK_THRESHOLD)\n    ) {\n      directionLocked.value = Math.abs(deltaX) > Math.abs(deltaY) ? 'horizontal' : 'vertical';\n      console.info('[ACU Card] :', directionLocked.value);\n    }\n\n    if (layout === 'horizontal') {\n      const scrollTop = el.scrollTop;\n\n      // 2\n      const isShortCard = initialIsShortCard.value;\n\n      // ============================================================\n      // \n      //  touchmove \n      // \n      // ============================================================\n      if (isShortCard) {\n        // \n        if (\n          !directionLocked.value &&\n          (Math.abs(deltaX) > DIRECTION_LOCK_THRESHOLD || Math.abs(deltaY) > DIRECTION_LOCK_THRESHOLD)\n        ) {\n          directionLocked.value = Math.abs(deltaX) > Math.abs(deltaY) ? 'horizontal' : 'vertical';\n          console.info('[ACU Card] :', directionLocked.value);\n        }\n\n        // \n        if (directionLocked.value === 'horizontal') {\n          if (!gestureLocked.value) {\n            gestureType.value = null;\n          }\n          // \n          if (parentScrollContainer.value) {\n            parentScrollContainer.value.scrollLeft = parentScrollStart.value - deltaX;\n          }\n          return; // \n        }\n\n        // \n        if (directionLocked.value === 'vertical' || (directionLocked.value === null && Math.abs(deltaY) > 5)) {\n          // \n          if (e.cancelable) e.preventDefault();\n          e.stopPropagation();\n\n          // deltaY * 0.6 30px\n          const displayHeight = Math.abs(deltaY) * 0.6;\n          const newGestureType = deltaY > 0 ? 'insert' : 'delete';\n\n          // 3.2/3.3 gestureType\n          //  gestureType \n          //  gestureType\n          if (displayHeight > 30) {\n            gestureType.value = newGestureType;\n            gestureLocked.value = true;\n          } else if (!gestureLocked.value) {\n            // \n            gestureType.value = null;\n          }\n          //  gestureType\n        }\n\n        return; // \n      }\n\n      // ============================================================\n      // \n      // ============================================================\n\n      // \n      // \n      if (directionLocked.value === 'horizontal') {\n        if (!gestureLocked.value) {\n          gestureType.value = null;\n        }\n\n        // \n        if (parentScrollContainer.value) {\n          parentScrollContainer.value.scrollLeft = parentScrollStart.value - deltaX;\n        }\n        return; // \n      }\n\n      // \n      if (directionLocked.value === 'vertical') {\n        // 1 -1  -2\n        const scrollHeight = el.scrollHeight;\n        const clientHeight = el.clientHeight;\n\n        // \n        const isPullDown = deltaY > 0 && scrollTop <= 0;\n        // \n        const isPullUp = deltaY < 0 && scrollTop + clientHeight >= scrollHeight - 2;\n\n        if (isPullDown || isPullUp) {\n          // \n          if (e.cancelable) e.preventDefault();\n          e.stopPropagation();\n\n          // deltaY * 0.6 30px\n          const displayHeight = Math.abs(deltaY) * 0.6;\n          const newGestureType = isPullDown ? 'insert' : 'delete';\n\n          // 3.2/3.3 gestureType\n          if (displayHeight > 30) {\n            gestureType.value = newGestureType;\n            gestureLocked.value = true;\n          } else if (!gestureLocked.value) {\n            gestureType.value = null;\n          }\n        } else if (!gestureLocked.value) {\n          gestureType.value = null;\n        }\n      }\n    } else if (layout === 'vertical' && Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 10) {\n      //  10px\n      // \n      if (e.cancelable) e.preventDefault();\n      e.stopPropagation();\n\n      // deltaX * 0.7 28px ( 40px)\n      const displayWidth = Math.abs(deltaX) * 0.7;\n      if (deltaX > 0 && displayWidth > 28) {\n        //  -> \n        gestureType.value = 'delete';\n      } else if (deltaX < 0 && displayWidth > 28) {\n        //  -> \n        gestureType.value = 'insert';\n      } else {\n        gestureType.value = null;\n      }\n    }\n  };\n\n  /**\n   * \n   * \n   */\n  const handleTouchEnd = (_e: TouchEvent) => {\n    const el = cardRef.value;\n    if (!el) return;\n\n    // \n    if (longPressTimer.value) {\n      clearTimeout(longPressTimer.value);\n      longPressTimer.value = null;\n    }\n\n    const deltaX = lengthX.value;\n    const deltaY = lengthY.value;\n\n    // 3.1\n    // /handleTouchEnd \n    //  directionLocked\n    if (layout === 'horizontal' && directionLocked.value === 'horizontal') {\n      console.info('[ACU Card TouchEnd] ');\n      isSwiping.value = false;\n      gestureType.value = null;\n      gestureLocked.value = false;\n      return;\n    }\n\n    // \n    console.info('[ACU Card TouchEnd] ', {\n      layout,\n      deltaX: deltaX.toFixed(1),\n      deltaY: deltaY.toFixed(1),\n      threshold,\n      isSelectionMode: isSelectionMode.value,\n      hasNativeSelection: hasNativeSelection(),\n      shouldBlockClick: shouldBlockClick.value,\n      gestureType: gestureType.value,\n    });\n\n    // \n    // \"\"\n    //  touchstart \n    if (isSelectionMode.value || hasNativeSelection()) {\n      console.info('[ACU Card TouchEnd] ');\n      shouldBlockClick.value = true;\n      isSwiping.value = false;\n      gestureType.value = null;\n      return;\n    }\n\n    // \n    if (shouldBlockClick.value) {\n      console.info('[ACU Card TouchEnd] shouldBlockClick ');\n      isSwiping.value = false;\n      gestureType.value = null;\n      return;\n    }\n\n    if (layout === 'horizontal') {\n      // \n      const scrollTop = el.scrollTop;\n      const scrollHeight = el.scrollHeight;\n      const clientHeight = el.clientHeight;\n\n      // 2\n      const isShortCard = initialIsShortCard.value;\n\n      const isPullDown = deltaY > 0 && (scrollTop <= 0 || isShortCard);\n      // 1 -1  -2\n      const isPullUp = deltaY < 0 && (scrollTop + clientHeight >= scrollHeight - 2 || isShortCard);\n\n      console.info('[ACU Card TouchEnd] ', {\n        scrollTop,\n        scrollHeight,\n        clientHeight,\n        isShortCard,\n        isPullDown,\n        isPullUp,\n        deltaY: deltaY.toFixed(1),\n        threshold,\n        : isPullDown && deltaY > threshold,\n        : isPullUp && Math.abs(deltaY) > threshold,\n      });\n\n      //  > 50px ( indicator height > 50)\n      //  deltaY * 0.6  height deltaY > 83.3 \n      //  topH > 50 threshold 50\n      if (isPullDown && deltaY > threshold) {\n        console.info('[ACU Card]  (deltaY:', deltaY, ')');\n        onInsertRow();\n      } else if (isPullUp && Math.abs(deltaY) > threshold) {\n        console.info('[ACU Card]  (deltaY:', deltaY, ')');\n        onToggleDelete();\n      } else {\n        console.info('[ACU Card TouchEnd] ');\n      }\n    } else if (layout === 'vertical') {\n      console.info('[ACU Card TouchEnd] ', {\n        deltaX: deltaX.toFixed(1),\n        threshold,\n        '()': deltaX > threshold,\n        '()': deltaX < -threshold,\n      });\n\n      //  > 40px\n      if (deltaX > threshold) {\n        // \n        console.info('[ACU Card]  (deltaX:', deltaX, ')');\n        onToggleDelete();\n      } else if (deltaX < -threshold) {\n        // \n        console.info('[ACU Card]  (deltaX:', deltaX, ')');\n        onInsertRow();\n      } else {\n        console.info('[ACU Card TouchEnd] ');\n      }\n    }\n\n    // \n    setTimeout(() => {\n      gestureType.value = null;\n      gestureLocked.value = false; // \n    }, 300);\n\n    isSwiping.value = false;\n  };\n\n  //  cardRef \n  watch(\n    cardRef,\n    (el, oldEl) => {\n      // \n      if (oldEl) {\n        oldEl.removeEventListener('touchstart', handleTouchStart);\n        oldEl.removeEventListener('touchmove', handleTouchMove);\n        oldEl.removeEventListener('touchend', handleTouchEnd);\n      }\n\n      // \n      if (el) {\n        el.addEventListener('touchstart', handleTouchStart, { passive: true });\n        el.addEventListener('touchmove', handleTouchMove, { passive: false });\n        el.addEventListener('touchend', handleTouchEnd, { passive: true });\n\n        // \n        checkScrollEdge();\n      }\n    },\n    { immediate: true },\n  );\n\n  // \n  onUnmounted(() => {\n    const el = cardRef.value;\n    if (el) {\n      el.removeEventListener('touchstart', handleTouchStart);\n      el.removeEventListener('touchmove', handleTouchMove);\n      el.removeEventListener('touchend', handleTouchEnd);\n    }\n    // \n    if (longPressTimer.value) {\n      clearTimeout(longPressTimer.value);\n      longPressTimer.value = null;\n    }\n  });\n\n  return {\n    /**  VueUse  API */\n    isSelecting,\n    /**  */\n    scrolledToEdge,\n    /**  */\n    atStart,\n    /**  */\n    atEnd,\n    /**  */\n    isSwiping,\n    /**  */\n    gestureType,\n    /**  */\n    checkScrollEdge,\n    /**  */\n    lengthX,\n    /**  */\n    lengthY,\n    /**  */\n    shouldBlockClick,\n    /**  */\n    isSelectionMode,\n  };\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n *  Composable\n *\n * \n *\n */\nexport function useSelectionGuardEnhanced() {\n  const { text } = useTextSelection();\n\n  // \n  const isSelecting = computed(() => text.value.length > 0);\n\n  // \n  const wasSelecting = ref(false);\n  const selectionEndTimer = ref<ReturnType<typeof setTimeout> | null>(null);\n\n  // \n  watch(isSelecting, newValue => {\n    if (!newValue && wasSelecting.value) {\n      // \n      selectionEndTimer.value = setTimeout(() => {\n        wasSelecting.value = false;\n      }, 100);\n    } else if (newValue) {\n      wasSelecting.value = true;\n      if (selectionEndTimer.value) {\n        clearTimeout(selectionEndTimer.value);\n        selectionEndTimer.value = null;\n      }\n    }\n  });\n\n  /**\n   * \n   */\n  const shouldBlockInteraction = () => {\n    return isSelecting.value || wasSelecting.value;\n  };\n\n  /**\n   * \n   */\n  const clearSelection = () => {\n    const selection = window.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n    }\n  };\n\n  return {\n    /**  */\n    selectedText: text,\n    /**  */\n    isSelecting,\n    /**  */\n    wasSelecting: computed(() => wasSelecting.value),\n    /**  */\n    shouldBlockInteraction,\n    /**  */\n    clearSelection,\n  };\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nconst MOBILE_REGEX = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;\n\n/**\n * \n *  UA\n */\nfunction checkIsMobileLayout(): boolean {\n  //  F12 \n  if (typeof window !== 'undefined') {\n    if (window.innerWidth <= 768) return true;\n    if (window.innerWidth > 1024) return false;\n  }\n  //  UA \n  return MOBILE_REGEX.test(navigator.userAgent);\n}\n\n/**\n * \n *  F12 \n */\nexport function useIsMobile() {\n  const isMobile = ref(checkIsMobileLayout());\n\n  //  F12 \n  if (typeof window !== 'undefined') {\n    const checkMobile = () => {\n      isMobile.value = checkIsMobileLayout();\n    };\n\n    window.addEventListener('resize', checkMobile);\n    onUnmounted(() => {\n      window.removeEventListener('resize', checkMobile);\n    });\n  }\n\n  return {\n    isMobile,\n    /**  */\n    isTouchDevice: computed(() => 'ontouchstart' in window || navigator.maxTouchPoints > 0),\n  };\n}\n\n// ============================================================\n// \n// ============================================================\n\nexport interface GestureIndicatorConfig {\n  /**  */\n  insertIcon: string;\n  /**  */\n  insertText: string;\n  /**  */\n  deleteIcon: string;\n  /**  */\n  deleteText: string;\n  /**  */\n  undoDeleteIcon: string;\n  /**  */\n  undoDeleteText: string;\n}\n\n/**\n * \n */\nexport function getGestureIndicatorConfig(): GestureIndicatorConfig {\n  return {\n    insertIcon: 'fas fa-plus-circle',\n    insertText: '',\n    deleteIcon: 'fas fa-trash-alt',\n    deleteText: '',\n    undoDeleteIcon: 'fas fa-undo',\n    undoDeleteText: '',\n  };\n}\n\n/**\n * \n */\nexport function getGestureIndicator(\n  gestureType: 'insert' | 'delete' | null,\n  isDeleting: boolean,\n): { icon: string; text: string; type: 'success' | 'danger' | 'warning' | null } | null {\n  if (!gestureType) return null;\n\n  const config = getGestureIndicatorConfig();\n\n  if (gestureType === 'insert') {\n    return {\n      icon: config.insertIcon,\n      text: config.insertText,\n      type: 'success',\n    };\n  }\n\n  if (gestureType === 'delete') {\n    if (isDeleting) {\n      return {\n        icon: config.undoDeleteIcon,\n        text: config.undoDeleteText,\n        type: 'warning',\n      };\n    }\n    return {\n      icon: config.deleteIcon,\n      text: config.deleteText,\n      type: 'danger',\n    };\n  }\n\n  return null;\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * VueUse \n *  VueUse \n *\n * \n * - useDraggableWithSnap:  + \n * - useAutoHeight: \n * - useCopyWithFeedback: \n * - useSelectionGuard: \n * - useParentEventListener: \n * - useDebouncedSave: \n */\nimport { onClickOutside, useClipboard, useDebounceFn, useDraggable, useEventListener, useResizeObserver, useStorage, useTextSelection, useThrottleFn, watchDebounced, } from '@vueuse/core';\nimport { computed, ref } from 'vue';\n// ============================================================\n//  + \n// ============================================================\n/**\n *  + \n *\n *  VueUse  useDraggable\n *  iframe \n *\n * @example\n * ```vue\n * <script setup>\n * const ballRef = ref<HTMLElement>();\n * const { x, y, style, isDragging } = useDraggableWithSnap(ballRef, {\n *   initialX: 100,\n *   initialY: 100,\n *   useParentWindow: true,\n *   onPositionChange: (x, y) => console.log(':', x, y)\n * });\n * </script>\n * <template>\n *   <div ref=\"ballRef\" :style=\"style\"></div>\n * </template>\n * ```\n */\nexport function useDraggableWithSnap(target, options = {}) {\n    const { initialX = 100, initialY = 100, edgePadding = 10, elementWidth = 50, onPositionChange, useParentWindow = false, } = options;\n    //  iframe\n    const getTargetWindow = () => {\n        if (useParentWindow && window.parent && window.parent !== window) {\n            return window.parent;\n        }\n        return window;\n    };\n    // \n    const getTargetDocument = () => {\n        return getTargetWindow().document;\n    };\n    // \n    const getScreenSize = () => {\n        const targetWindow = getTargetWindow();\n        return {\n            width: targetWindow.innerWidth,\n            height: targetWindow.innerHeight,\n        };\n    };\n    // \n    const getSnapThreshold = () => {\n        return options.snapThreshold ?? getScreenSize().width / 2;\n    };\n    // \n    const wasDragging = ref(false);\n    // \n    let dragStartX = 0;\n    let dragStartY = 0;\n    const DRAG_THRESHOLD = 5; //  5 \n    //  iframe \n    const draggingElement = computed(() => {\n        if (useParentWindow) {\n            try {\n                return getTargetDocument();\n            }\n            catch {\n                return document;\n            }\n        }\n        return document;\n    });\n    const { x, y, isDragging } = useDraggable(target, {\n        initialValue: {\n            x: initialX,\n            y: initialY,\n        },\n        // \n        draggingElement,\n        onStart(_position, event) {\n            wasDragging.value = false;\n            //  iframe \n            dragStartX = event.clientX;\n            dragStartY = event.clientY;\n        },\n        onMove(_position, event) {\n            // \n            const mouseX = event.clientX;\n            const mouseY = event.clientY;\n            const dx = Math.abs(mouseX - dragStartX);\n            const dy = Math.abs(mouseY - dragStartY);\n            if (dx > DRAG_THRESHOLD || dy > DRAG_THRESHOLD) {\n                wasDragging.value = true;\n            }\n        },\n        onEnd() {\n            if (wasDragging.value) {\n                const { width: screenWidth, height: screenHeight } = getScreenSize();\n                // \n                // \n                // \n                if (x.value < edgePadding) {\n                    x.value = edgePadding;\n                }\n                if (x.value > screenWidth - elementWidth - edgePadding) {\n                    x.value = screenWidth - elementWidth - edgePadding;\n                }\n                // \n                if (y.value < edgePadding) {\n                    y.value = edgePadding;\n                }\n                if (y.value > screenHeight - elementWidth - edgePadding) {\n                    y.value = screenHeight - elementWidth - edgePadding;\n                }\n                // \n                onPositionChange?.(x.value, y.value);\n                //  wasDragging click handler \n                // \n            }\n        },\n    });\n    // \n    const style = computed(() => ({\n        left: `${x.value}px`,\n        top: `${y.value}px`,\n        cursor: isDragging.value ? 'grabbing' : 'grab',\n    }));\n    return {\n        x,\n        y,\n        isDragging,\n        wasDragging,\n        style,\n        /**  */\n        reset: () => {\n            x.value = initialX;\n            y.value = initialY;\n            onPositionChange?.(x.value, y.value);\n        },\n    };\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n *  ResizeObserver \n * \n *\n * @example\n * ```vue\n * <script setup>\n * const contentRef = ref<HTMLElement>();\n * const { height, heightStyle } = useAutoHeight(contentRef, {\n *   minHeight: 200,\n *   maxHeightRatio: 0.8,\n *   onHeightChange: (h) => console.log(':', h)\n * });\n * </script>\n * <template>\n *   <div :style=\"heightStyle\">\n *     <div ref=\"contentRef\"></div>\n *   </div>\n * </template>\n * ```\n */\nexport function useAutoHeight(contentRef, options = {}) {\n    const { minHeight = 200, maxHeightRatio = 0.8, padding = 100, onHeightChange, useParentWindow = false } = options;\n    const height = ref(minHeight);\n    // \n    const getParentHeight = () => {\n        if (useParentWindow && window.parent && window.parent !== window) {\n            return window.parent.innerHeight;\n        }\n        return window.innerHeight;\n    };\n    // \n    useResizeObserver(contentRef, entries => {\n        const entry = entries[0];\n        if (!entry)\n            return;\n        const contentHeight = entry.contentRect.height;\n        const parentHeight = getParentHeight();\n        const maxHeight = parentHeight * maxHeightRatio;\n        const newHeight = Math.max(minHeight, Math.min(contentHeight + padding, maxHeight));\n        height.value = newHeight;\n        onHeightChange?.(newHeight);\n    });\n    // \n    const heightStyle = computed(() => ({\n        height: `${height.value}px`,\n        maxHeight: `${getParentHeight() * maxHeightRatio}px`,\n    }));\n    return {\n        height,\n        heightStyle,\n        /**  */\n        reset: () => {\n            height.value = minHeight;\n            onHeightChange?.(minHeight);\n        },\n    };\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n * \n * -  +  + () + paddingclamp  [min, max] \n * -  * 0.8\n *\n * @param contentRef - \n * @param panelType - normal/dashboard/options\n * @param showPagination -  configStore \n * @param options - \n *\n * @example\n * ```vue\n * <script setup>\n * const contentRef = ref<HTMLElement>();\n * const configStore = useConfigStore();\n * const panelType = computed(() => activeTab.value === 'dashboard' ? 'dashboard' : 'normal');\n *\n * const { height, heightStyle } = useSmartHeight(\n *   contentRef,\n *   panelType,\n *   computed(() => configStore.config.showPagination),\n *   {\n *     onHeightChange: (h) => console.log(':', h)\n *   }\n * );\n * </script>\n * <template>\n *   <div :style=\"heightStyle\">\n *     <div ref=\"contentRef\"></div>\n *   </div>\n * </template>\n * ```\n */\nexport function useSmartHeight(contentRef, panelType, showPagination, options = {}) {\n    const { minHeight = 200, maxHeightRatio = 0.8, headerHeight = 42, paginationHeight = 56, contentPadding = 25, onHeightChange, } = options;\n    const height = ref(minHeight);\n    //  iframe \n    const getParentHeight = () => {\n        if (window.parent && window.parent !== window) {\n            return window.parent.innerHeight;\n        }\n        return window.innerHeight;\n    };\n    // \n    const getMaxHeight = () => {\n        return getParentHeight() * maxHeightRatio;\n    };\n    // \n    const getPanelType = () => {\n        return typeof panelType === 'string' ? panelType : panelType.value;\n    };\n    // \n    const getShowPagination = () => {\n        return typeof showPagination === 'boolean' ? showPagination : showPagination.value;\n    };\n    // \n    useResizeObserver(contentRef, entries => {\n        const entry = entries[0];\n        if (!entry)\n            return;\n        const currentPanelType = getPanelType();\n        // \n        if (currentPanelType === 'dashboard') {\n            const maxH = getMaxHeight();\n            console.info('[ACU useSmartHeight] :', {\n                maxH,\n                parentHeight: getParentHeight(),\n                ratio: maxHeightRatio,\n            });\n            height.value = maxH;\n            onHeightChange?.(maxH);\n            return;\n        }\n        // \n        const contentHeight = entry.contentRect.height;\n        const paginationH = getShowPagination() ? paginationHeight : 0;\n        //  +  +  + \n        const totalHeight = headerHeight + contentHeight + contentPadding + paginationH;\n        // Clamp  [minHeight, maxHeight] \n        const maxH = getMaxHeight();\n        const newHeight = Math.max(minHeight, Math.min(totalHeight, maxH));\n        height.value = newHeight;\n        onHeightChange?.(newHeight);\n    });\n    // \n    if (typeof panelType !== 'string') {\n        watch(panelType, newType => {\n            if (newType === 'dashboard') {\n                const maxH = getMaxHeight();\n                console.info('[ACU useSmartHeight] :', maxH);\n                height.value = maxH;\n                onHeightChange?.(maxH);\n            }\n        });\n    }\n    // \n    if (typeof showPagination !== 'boolean') {\n        watch(showPagination, () => {\n            // \n            if (contentRef.value) {\n                const contentHeight = contentRef.value.scrollHeight;\n                const currentPanelType = getPanelType();\n                if (currentPanelType !== 'dashboard') {\n                    const paginationH = getShowPagination() ? paginationHeight : 0;\n                    const totalHeight = headerHeight + contentHeight + contentPadding + paginationH;\n                    const maxH = getMaxHeight();\n                    const newHeight = Math.max(minHeight, Math.min(totalHeight, maxH));\n                    height.value = newHeight;\n                    onHeightChange?.(newHeight);\n                }\n            }\n        });\n    }\n    // \n    const heightStyle = computed(() => ({\n        height: `${height.value}px`,\n        maxHeight: `${getMaxHeight()}px`,\n    }));\n    return {\n        /**  */\n        height,\n        /**  */\n        heightStyle,\n        /**  */\n        maxHeight: computed(() => getMaxHeight()),\n        /**  */\n        reset: () => {\n            height.value = minHeight;\n            onHeightChange?.(minHeight);\n        },\n        /**  */\n        maximize: () => {\n            const maxH = getMaxHeight();\n            height.value = maxH;\n            onHeightChange?.(maxH);\n        },\n        /**  */\n        recalculate: () => {\n            if (contentRef.value) {\n                const currentPanelType = getPanelType();\n                if (currentPanelType === 'dashboard') {\n                    const maxH = getMaxHeight();\n                    height.value = maxH;\n                    onHeightChange?.(maxH);\n                }\n                else {\n                    const contentHeight = contentRef.value.scrollHeight;\n                    const paginationH = getShowPagination() ? paginationHeight : 0;\n                    const totalHeight = headerHeight + contentHeight + contentPadding + paginationH;\n                    const maxH = getMaxHeight();\n                    const newHeight = Math.max(minHeight, Math.min(totalHeight, maxH));\n                    height.value = newHeight;\n                    onHeightChange?.(newHeight);\n                }\n            }\n        },\n    };\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n *  VueUse  useClipboard toastr \n *\n * @example\n * ```vue\n * <script setup>\n * const { copyWithToast, copied } = useCopyWithFeedback();\n *\n * const handleCopy = async () => {\n *   const success = await copyWithToast('');\n *   if (success) {\n *     console.log('');\n *   }\n * };\n * </script>\n * ```\n */\nexport function useCopyWithFeedback() {\n    const { copy, copied, isSupported } = useClipboard();\n    /**\n     *  toast \n     */\n    const copyWithToast = async (text, successMessage = '') => {\n        // \n        const { toast } = await import('./useToast');\n        if (!isSupported.value) {\n            console.warn('[ACU]  API ');\n            toast.warning('');\n            return false;\n        }\n        try {\n            await copy(text);\n            if (copied.value) {\n                toast.success(successMessage);\n                return true;\n            }\n            return false;\n        }\n        catch (error) {\n            console.error('[ACU] :', error);\n            toast.error('');\n            return false;\n        }\n    };\n    return {\n        copyWithToast,\n        copied,\n        isSupported,\n        /**  */\n        copy,\n    };\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n * \n *\n * @example\n * ```vue\n * <script setup>\n * const { isSelecting, shouldBlockInteraction } = useSelectionGuard();\n *\n * const handleClick = () => {\n *   if (shouldBlockInteraction()) return;\n *   // \n * };\n * </script>\n * ```\n */\nexport function useSelectionGuard() {\n    const { text } = useTextSelection();\n    const isSelecting = computed(() => text.value.length > 0);\n    /**\n     * \n     */\n    const shouldBlockInteraction = () => isSelecting.value;\n    return {\n        /**  */\n        selectedText: text,\n        /**  */\n        isSelecting,\n        /**  */\n        shouldBlockInteraction,\n    };\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n *  iframe \n *\n * @example\n * ```vue\n * <script setup>\n * useParentEventListener('resize', () => {\n *   console.log('');\n * });\n *\n * useParentEventListener('keydown', (e) => {\n *   if (e.key === 'Escape') {\n *     console.log(' Escape');\n *   }\n * });\n * </script>\n * ```\n */\nexport function useParentEventListener(event, handler, options) {\n    const targetWindow = window.parent && window.parent !== window ? window.parent : window;\n    return useEventListener(targetWindow, event, handler, options);\n}\n/**\n * \n */\nexport function useParentDocumentEventListener(event, handler, options) {\n    const targetDocument = window.parent && window.parent !== window ? window.parent.document : document;\n    return useEventListener(targetDocument, event, handler, options);\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n * \n *\n * @example\n * ```vue\n * <script setup>\n * const data = ref({ name: 'test' });\n *\n * useDebouncedSave(\n *   () => data.value,\n *   async (data) => {\n *     await saveToServer(data);\n *   },\n *   {\n *     delay: 500,\n *     onSuccess: () => console.log(''),\n *     onError: (err) => console.error('', err)\n *   }\n * );\n * </script>\n * ```\n */\nexport function useDebouncedSave(source, saveFn, options = {}) {\n    const { delay = 500, deep = true, onSuccess, onError } = options;\n    const isSaving = ref(false);\n    const lastError = ref(null);\n    watchDebounced(source, async (newValue) => {\n        isSaving.value = true;\n        lastError.value = null;\n        try {\n            await saveFn(newValue);\n            onSuccess?.();\n        }\n        catch (error) {\n            lastError.value = error;\n            console.error('[ACU] :', error);\n            onError?.(error);\n        }\n        finally {\n            isSaving.value = false;\n        }\n    }, { debounce: delay, deep });\n    return {\n        /**  */\n        isSaving,\n        /**  */\n        lastError,\n    };\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n * @example\n * ```vue\n * <script setup>\n * const position = useACUStorage('ball_position', { x: 100, y: 100 });\n * </script>\n * ```\n */\nexport function useACUStorage(key, defaultValue) {\n    return useStorage(`acu_${key}`, defaultValue);\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n *  onClickOutside\n *\n * @example\n * ```vue\n * <script setup>\n * const menuRef = ref<HTMLElement>();\n * const visible = ref(true);\n *\n * useClickOutsideClose(menuRef, () => {\n *   visible.value = false;\n * }, {\n *   ignore: ['.acu-trigger-button']\n * });\n * </script>\n * ```\n */\nexport function useClickOutsideClose(target, callback, options) {\n    const { ignore = [], enabled = true } = options ?? {};\n    onClickOutside(target, event => {\n        // \n        const isEnabled = typeof enabled === 'boolean' ? enabled : enabled.value;\n        if (!isEnabled)\n            return;\n        // \n        const clickedElement = event.target;\n        const shouldIgnore = ignore.some(selector => clickedElement.closest(selector));\n        if (!shouldIgnore) {\n            callback();\n        }\n    }, { ignore });\n}\n// ============================================================\n//  VueUse \n// ============================================================\nexport { onClickOutside, useClipboard, useDebounceFn, useDraggable, useEventListener, useResizeObserver, useStorage, useTextSelection, useThrottleFn, watchDebounced, };\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * Swipe  Composable\n *\n * Swipe \n *\n * \n */\n\nimport { onUnmounted, ref } from 'vue';\nimport { useConfigStore } from '../stores/useConfigStore';\nimport { useDataStore } from '../stores/useDataStore';\nimport { getCore } from '../utils/index';\nimport { toast } from './useToast';\n\n// ============================================================\n// \n// ============================================================\n\n/** Swipe  */\nexport interface SwipeEnhancementConfig {\n  /**  Swipe  */\n  clearTableOnSwipe: boolean;\n}\n\n/** SillyTavern  */\ninterface STChatMessage {\n  is_user?: boolean;\n  swipe_id?: number;\n  swipes?: string[];\n  [key: string]: unknown;\n}\n\n// ============================================================\n// \n// ============================================================\n\nconst DEFAULT_CONFIG: SwipeEnhancementConfig = {\n  clearTableOnSwipe: true,\n};\n\n// ============================================================\n// \n// ============================================================\n\n/**\n *  SillyTavern Context chat \n */\nfunction getSillyTavernContext(): any {\n  const win = window.parent || window;\n  const ST = (win as any).SillyTavern || (win as any).top?.SillyTavern;\n  if (ST && typeof ST.getContext === 'function') {\n    return ST.getContext();\n  }\n  return null;\n}\n\n// ============================================================\n// Composable \n// ============================================================\n\nexport function useSwipeEnhancement() {\n  const dataStore = useDataStore();\n  const configStore = useConfigStore();\n\n  // \n  const isProcessing = ref(false);\n  const config = ref<SwipeEnhancementConfig>({ ...DEFAULT_CONFIG });\n\n  // \n  const cleanupFns: Array<() => void> = [];\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function updateConfig(newConfig: Partial<SwipeEnhancementConfig>) {\n    config.value = { ...config.value, ...newConfig };\n    console.info('[ACU Swipe] :', config.value);\n  }\n\n  /**\n   * \n   */\n  function getConfig(): SwipeEnhancementConfig {\n    return { ...config.value };\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  async function clearFloorData(floorIndex: number): Promise<boolean> {\n    try {\n      await dataStore.purgeFloorRange(floorIndex, floorIndex);\n      console.info(`[ACU Swipe]  ${floorIndex} `);\n      return true;\n    } catch (e) {\n      console.error('[ACU Swipe] :', e);\n      return false;\n    }\n  }\n\n  /**\n   * \n   */\n  function willTriggerNewGeneration(message: STChatMessage): boolean {\n    if (message.is_user) return false;\n\n    const currentSwipeId = message.swipe_id ?? 0;\n    const totalSwipes = message.swipes?.length ?? 1;\n\n    return currentSwipeId >= totalSwipes - 1;\n  }\n\n  /**\n   *  ACU \n   */\n  function hasACUData(message: STChatMessage): boolean {\n    //  TavernDB_ACU_IsolatedData \n    const isolatedData = (message as any).TavernDB_ACU_IsolatedData;\n    if (!isolatedData || typeof isolatedData !== 'object') {\n      return false;\n    }\n    // \n    return Object.keys(isolatedData).length > 0;\n  }\n\n  /**\n   *  Swipe  -  A\n   */\n  async function handleSwipeClearOnly(): Promise<void> {\n    console.info('[ACU Swipe] handleSwipeClearOnly ');\n\n    if (isProcessing.value) {\n      console.info('[ACU Swipe] ');\n      return;\n    }\n\n    const ctx = getSillyTavernContext();\n    if (!ctx?.chat?.length) {\n      console.warn('[ACU Swipe] SillyTavern context.chat ');\n      return;\n    }\n\n    const lastIndex = ctx.chat.length - 1;\n    const lastMessage = ctx.chat[lastIndex] as STChatMessage;\n\n    console.info('[ACU Swipe] :', {\n      index: lastIndex,\n      is_user: lastMessage.is_user,\n      swipe_id: lastMessage.swipe_id,\n      swipes_length: lastMessage.swipes?.length,\n    });\n\n    // \n    if (!willTriggerNewGeneration(lastMessage)) {\n      console.info('[ACU Swipe]  swipe');\n      return;\n    }\n\n    //  ACU \n    const hasData = hasACUData(lastMessage);\n    console.info('[ACU Swipe]  ACU :', hasData);\n\n    if (!hasData) {\n      console.info('[ACU Swipe]  ACU ');\n      return;\n    }\n\n    isProcessing.value = true;\n    try {\n      console.info('[ACU Swipe] ', lastIndex, '');\n      const success = await clearFloorData(lastIndex);\n      if (success) {\n        toast.info('Swipe: ');\n      }\n    } finally {\n      isProcessing.value = false;\n    }\n  }\n\n  /**\n   *  Swipe \n   *  configStore \n   */\n  async function handleSwipe(event?: Event): Promise<void> {\n    //  configStore \n    const clearEnabled = configStore.config.clearTableOnSwipe ?? config.value.clearTableOnSwipe;\n\n    console.info('[ACU Swipe] handleSwipe ', { clearEnabled });\n\n    if (!clearEnabled) {\n      console.info('[ACU Swipe] ');\n      return;\n    }\n\n    console.info('[ACU Swipe] ');\n    await handleSwipeClearOnly();\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function initDesktopListener() {\n    const { $ } = getCore();\n    if (!$) {\n      console.warn('[ACU Swipe] jQuery ');\n      return;\n    }\n\n    const parentDoc = window.parent.document;\n\n    //  SillyTavern \n    const handler = async (e: Event) => {\n      const target = e.target as HTMLElement;\n      const swipeBtn = target.closest('.swipe_right');\n\n      //  swipe \n      if (!swipeBtn) return;\n\n      // \n      if ((e as any).__acu_processed) return;\n\n      //  configStore \n      const clearEnabled = configStore.config.clearTableOnSwipe ?? config.value.clearTableOnSwipe;\n      if (!clearEnabled) return;\n\n      console.info('[ACU Swipe]  swipe_right ');\n\n      // 1. \n      e.preventDefault();\n      e.stopImmediatePropagation();\n\n      try {\n        // 2.  ()\n        await handleSwipe(e);\n      } catch (err) {\n        console.error('[ACU Swipe]  Swipe', err);\n      }\n\n      console.info('[ACU Swipe]  Swipe');\n\n      // 3.  ()\n      const newEvent = new MouseEvent('click', {\n        bubbles: true,\n        cancelable: true,\n        view: window.parent,\n      });\n      (newEvent as any).__acu_processed = true;\n      swipeBtn.dispatchEvent(newEvent);\n    };\n\n    //  capture: true \n    parentDoc.addEventListener('click', handler, { capture: true });\n\n    // \n    cleanupFns.push(() => {\n      parentDoc.removeEventListener('click', handler, { capture: true });\n      console.info('[ACU Swipe] ');\n    });\n\n    console.info('[ACU Swipe]  ()');\n  }\n\n  /**\n   *  click \n   *\n   *  MESSAGE_SWIPED  Swipe AI \n   *  eventMakeFirst  listener \n   */\n  function initTavernEventListener() {\n    //  click \n    let lastProcessedSwipeTime = 0;\n    const DEBOUNCE_MS = 500;\n\n    const handleMessageSwiped = async (message_id: number) => {\n      //  configStore \n      const clearEnabled = configStore.config.clearTableOnSwipe ?? config.value.clearTableOnSwipe;\n      if (!clearEnabled) return;\n\n      //  click \n      const now = Date.now();\n      if (now - lastProcessedSwipeTime < DEBOUNCE_MS) {\n        console.info('[ACU Swipe] ');\n        return;\n      }\n      lastProcessedSwipeTime = now;\n\n      console.info('[ACU Swipe] MESSAGE_SWIPED message_id:', message_id);\n\n      //  handleSwipeClearOnly \n      const ctx = getSillyTavernContext();\n      if (!ctx?.chat?.length) return;\n\n      const lastIndex = ctx.chat.length - 1;\n      const lastMessage = ctx.chat[lastIndex] as STChatMessage;\n\n      if (!willTriggerNewGeneration(lastMessage)) {\n        console.info('[ACU Swipe]  swipe');\n        return;\n      }\n\n      if (!hasACUData(lastMessage)) {\n        console.info('[ACU Swipe]  ACU ');\n        return;\n      }\n\n      console.info('[ACU Swipe] ...');\n      await handleSwipeClearOnly();\n    };\n\n    //  eventMakeFirst  listener \n    //  AI \n    const { stop } = eventMakeFirst(tavern_events.MESSAGE_SWIPED, errorCatched(handleMessageSwiped));\n\n    cleanupFns.push(() => {\n      stop();\n      console.info('[ACU Swipe] ');\n    });\n\n    console.info('[ACU Swipe]  (MESSAGE_SWIPED)');\n  }\n\n  /**\n   * \n   */\n  function init() {\n    initDesktopListener();\n    initTavernEventListener();\n    console.info('[ACU Swipe] Swipe ');\n  }\n\n  /**\n   * \n   */\n  function cleanup() {\n    cleanupFns.forEach(fn => fn());\n    cleanupFns.length = 0;\n    console.info('[ACU Swipe] Swipe ');\n  }\n\n  // \n  onUnmounted(() => {\n    cleanup();\n  });\n\n  // ============================================================\n  // \n  // ============================================================\n\n  return {\n    // \n    isProcessing,\n    config,\n\n    // \n    updateConfig,\n    getConfig,\n\n    // \n    clearFloorData,\n    handleSwipe,\n    handleSwipeClearOnly,\n\n    // \n    willTriggerNewGeneration,\n\n    // \n    init,\n    cleanup,\n  };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n *  Composable\n *\n * \n *\n * @example\n * ```typescript\n * import { buildPrompt } from './usePromptBuild';\n * import type { DrawResult } from './usePromptBuild';\n *\n * const result: DrawResult = {\n *   luck: { id: 'lucky', name: '', prompt: '...', weight: 15, color: '#90ee90' },\n *   words: ['', ''],\n * };\n *\n * const prompt = buildPrompt(result);\n * console.log(prompt);\n * ```\n */\n\nimport type { LuckTier, LuckTier as LuckTierType } from './useDraw';\n\n// ============================================\n// \n// ============================================\n\n/**\n * \n */\nexport interface DrawResult {\n  /**  */\n  luck: LuckTier;\n  /**  */\n  words: string[];\n}\n\n/**\n * \n */\nexport interface FullDrawResult extends DrawResult {\n  /**  */\n  dimensions?: Array<{\n    dimensionName: string;\n    tierName: string;\n    prompt: string;\n  }>;\n  /**  */\n  finalPrompt?: string;\n}\n\n// ============================================\n// \n// ============================================\n\n/**\n * \n * \n */\nconst TEMPLATE_PARTS = {\n  HEADER: '<>',\n  LUCK: '<user>{{luck}}',\n  WORDS: `[ {{words}} ]`,\n  DIMENSIONS: '{{dimensions}}</>',\n};\n\n/**\n * \n */\nexport const DEFAULT_TEMPLATE = `${TEMPLATE_PARTS.HEADER}\n${TEMPLATE_PARTS.LUCK}\n${TEMPLATE_PARTS.WORDS}\n${TEMPLATE_PARTS.DIMENSIONS}`;\n\n//  DEFAULT_TEMPLATE\nexport const TEMPLATE_SIMPLE = `${TEMPLATE_PARTS.HEADER}\\n${TEMPLATE_PARTS.LUCK}`;\nexport const TEMPLATE_FULL = `${TEMPLATE_PARTS.HEADER}\\n${TEMPLATE_PARTS.LUCK}\\n${TEMPLATE_PARTS.WORDS}`;\nexport const TEMPLATE_WITH_DIMENSIONS = DEFAULT_TEMPLATE;\n\n// ============================================\n// \n// ============================================\n\n/**\n * \n *\n * @param result - \n * @returns \n */\nexport function buildPrompt(result: DrawResult): string {\n  //  FullDrawResult \n  return buildFullPrompt({\n    luck: result.luck,\n    words: result.words,\n    dimensions: [],\n  });\n}\n\n/**\n * \n *\n * @param result - \n * @returns \n */\nexport function buildFullPrompt(result: FullDrawResult): string {\n  const { luck, words, dimensions } = result;\n\n  const parts: string[] = [TEMPLATE_PARTS.HEADER];\n\n  // 1.  ()\n  if (luck.prompt) {\n    parts.push(luck.prompt);\n  }\n\n  // 2.  ()\n  if (words && words.length > 0) {\n    const wordsText = TEMPLATE_PARTS.WORDS.replace('{{words}}', words.join(''));\n    parts.push(wordsText);\n  }\n\n  // 3.  ()\n  if (dimensions && dimensions.length > 0) {\n    const dimensionsText = dimensions\n      .filter(d => d.prompt && d.prompt.trim())\n      .map(d => d.prompt)\n      .join('\\n');\n\n    if (dimensionsText) {\n      parts.push(dimensionsText);\n    }\n  }\n\n  return parts.join('\\n');\n}\n\n/**\n * \n *\n * @param template - \n * @param result - \n * @returns \n *\n * @example\n * ```typescript\n * const customTemplate = `\\n: {{luck}}\\n: {{words}}`;\n * const prompt = buildPromptWithTemplate(customTemplate, result);\n * ```\n */\nexport function buildPromptWithTemplate(template: string, result: DrawResult): string {\n  const { luck, words } = result;\n\n  return template.replace('{{luck}}', luck.prompt).replace('{{words}}', words.join(''));\n}\n\n/**\n * \n *\n * @param template - \n * @returns \n */\nexport function validateTemplate(template: string): {\n  valid: boolean;\n  hasLuckPlaceholder: boolean;\n  hasWordsPlaceholder: boolean;\n  hasDimensionsPlaceholder: boolean;\n} {\n  return {\n    valid: template.includes('{{luck}}'),\n    hasLuckPlaceholder: template.includes('{{luck}}'),\n    hasWordsPlaceholder: template.includes('{{words}}'),\n    hasDimensionsPlaceholder: template.includes('{{dimensions}}'),\n  };\n}\n\n/**\n * \n *\n * @param template - \n * @returns \n */\nexport function extractPlaceholders(template: string): string[] {\n  const regex = /\\{\\{(\\w+)\\}\\}/g;\n  const placeholders: string[] = [];\n  let match;\n\n  while ((match = regex.exec(template)) !== null) {\n    if (!placeholders.includes(match[1])) {\n      placeholders.push(match[1]);\n    }\n  }\n\n  return placeholders;\n}\n\n/**\n * \n *\n * @param prompt - \n * @param maxLength - 100\n * @returns \n */\nexport function previewPrompt(prompt: string, maxLength = 100): string {\n  if (prompt.length <= maxLength) {\n    return prompt;\n  }\n  return prompt.slice(0, maxLength) + '...';\n}\n\n/**\n * \n *\n * @param words - \n * @param separator - \n * @returns \n */\nexport function formatWords(words: string[], separator = ''): string {\n  return words.join(separator);\n}\n\n// ============================================\n// Composable Vue 3\n// ============================================\n\nimport { computed, ref, type Ref } from 'vue';\n\nexport interface UsePromptBuildOptions {\n  /**  */\n  customTemplate?: string;\n}\n\nexport interface UsePromptBuildReturn {\n  /**  */\n  result: Ref<DrawResult | null>;\n  /**  */\n  prompt: Ref<string>;\n  /**  */\n  preview: Ref<string>;\n  /**  */\n  setResult: (luck: LuckTierType, words: string[]) => void;\n  /**  */\n  clear: () => void;\n  /**  */\n  buildWithTemplate: (template: string) => string;\n}\n\n/**\n *  Composable\n *\n * \n *\n * @example\n * ```typescript\n * const { result, prompt, preview, setResult } = usePromptBuild();\n *\n * // \n * setResult(luck, ['1', '2']);\n *\n * // \n * console.log(prompt.value);\n * console.log(preview.value); // \n * ```\n */\nexport function usePromptBuild(options: UsePromptBuildOptions = {}): UsePromptBuildReturn {\n  const { customTemplate } = options;\n\n  const result = ref<DrawResult | null>(null);\n\n  // \n  const prompt = computed(() => {\n    if (!result.value) return '';\n\n    if (customTemplate) {\n      return buildPromptWithTemplate(customTemplate, result.value);\n    }\n\n    return buildPrompt(result.value);\n  });\n\n  // \n  const preview = computed(() => previewPrompt(prompt.value, 100));\n\n  // \n  function setResult(luck: LuckTierType, words: string[]): void {\n    result.value = { luck, words };\n    console.info('[usePromptBuild] :', preview.value);\n  }\n\n  // \n  function clear(): void {\n    result.value = null;\n  }\n\n  // \n  function buildWithTemplate(template: string): string {\n    if (!result.value) return '';\n    return buildPromptWithTemplate(template, result.value);\n  }\n\n  return {\n    result,\n    prompt,\n    preview,\n    setResult,\n    clear,\n    buildWithTemplate,\n  };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * useFullscreenSupport - \n *\n * \n * 1. CSS  (position: fixed) - ACU  z-index\n * 2.  (requestFullscreen) -  ACU \n * 3.  iframe  -  iframe  DOM \n *\n * \n * -  fullscreenchange \n * -  or iframe \n * -  .acu-wrapper \n * - \n * - \n */\n\nimport { onMounted, onUnmounted, ref, nextTick } from 'vue';\n\n/**  */\nexport interface FullscreenState {\n  /**  */\n  isFullscreen: boolean;\n  /**  document iframe  document */\n  fullscreenDocument: Document | null;\n  /**  */\n  fullscreenElement: Element | null;\n  /** ACU  */\n  isMigrated: boolean;\n}\n\n/** ACU wrapper  */\nlet originalParent: Element | null = null;\n\n/**  */\nlet styleCleanup: (() => void) | null = null;\n\n/**  */\nlet originalBallPosition: { left: string; top: string } | null = null;\n\n/**  */\nlet copiedStyleElements: HTMLElement[] = [];\n\n/**\n *  Composable\n */\nexport function useFullscreenSupport() {\n  const state = ref<FullscreenState>({\n    isFullscreen: false,\n    fullscreenDocument: null,\n    fullscreenElement: null,\n    isMigrated: false,\n  });\n\n  // \n  const eventListeners: Array<{ doc: Document; handler: () => void }> = [];\n  //  MutationObserver \n  let iframeObserver: MutationObserver | null = null;\n\n  /**\n   *  ACU  Vue \n   *  index.ts \n   */\n  function getACUContainer(): HTMLElement | null {\n    const parentDoc = window.parent?.document || document;\n    //  #acu-parent-container Vue \n    const container = parentDoc.getElementById('acu-parent-container');\n    if (container) return container;\n    //  .acu-appVue App \n    return parentDoc.querySelector('.acu-app') as HTMLElement | null;\n  }\n\n  /**\n   *  ACU wrapper \n   * @deprecated  getACUContainer() \n   */\n  function getACUWrapper(): HTMLElement | null {\n    const parentDoc = window.parent?.document || document;\n    return parentDoc.querySelector('.acu-wrapper') as HTMLElement | null;\n  }\n\n  /**\n   * \n   *  iframe\n   */\n  function detectFullscreenElement(): { doc: Document; element: Element | null } {\n    const parentDoc = window.parent?.document || document;\n\n    // 1. \n    const mainFullscreen = parentDoc.fullscreenElement;\n    if (mainFullscreen) {\n      return { doc: parentDoc, element: mainFullscreen };\n    }\n\n    // 2.  iframe\n    const streamingIframes = parentDoc.querySelectorAll('.mes_streaming iframe');\n    for (const iframe of streamingIframes) {\n      const iframeEl = iframe as HTMLIFrameElement;\n      try {\n        const iframeDoc = iframeEl.contentDocument;\n        if (iframeDoc?.fullscreenElement) {\n          return { doc: iframeDoc, element: iframeDoc.fullscreenElement };\n        }\n      } catch (e) {\n        //  iframe\n        console.warn('[ACU Fullscreen] Cannot access iframe:', e);\n      }\n    }\n\n    return { doc: parentDoc, element: null };\n  }\n\n  /**\n   * \n   */\n  function getFloatingBall(): HTMLElement | null {\n    const container = getACUContainer();\n    if (!container) return null;\n    return container.querySelector('.acu-floating-ball-vue') as HTMLElement | null;\n  }\n\n  /**\n   * \n   *  CSS  Vue \n   */\n  function adjustBallPositionForFullscreen(fullscreenElement: Element): void {\n    const container = getACUContainer();\n    if (!container) return;\n\n    // \n    const rect = fullscreenElement.getBoundingClientRect();\n    const ballSize = 50; // \n    const padding = 20;\n\n    // \n    const newLeft = padding;\n    const newTop = rect.height - ballSize - padding;\n\n    //  CSS  !important  Vue \n    container.style.setProperty('--acu-fullscreen-ball-left', `${newLeft}px`);\n    container.style.setProperty('--acu-fullscreen-ball-top', `${newTop}px`);\n\n    // \n    container.classList.add('acu-fullscreen-mode');\n\n    console.info(\n      `[ACU Fullscreen] Adjusted ball position: left=${newLeft}px, top=${newTop}px (fullscreen height=${rect.height}px)`,\n    );\n  }\n\n  /**\n   * \n   */\n  function restoreBallPosition(): void {\n    const container = getACUContainer();\n    if (!container) return;\n\n    // \n    container.classList.remove('acu-fullscreen-mode');\n\n    //  CSS \n    container.style.removeProperty('--acu-fullscreen-ball-left');\n    container.style.removeProperty('--acu-fullscreen-ball-top');\n\n    console.info('[ACU Fullscreen] Restored ball position');\n  }\n\n  /**\n   *  ACU \n   *  ACU \n   */\n  function migrateToFullscreen(fullscreenElement: Element, targetDoc: Document): void {\n    const container = getACUContainer();\n    if (!container) {\n      console.warn('[ACU Fullscreen] ACU container not found');\n      return;\n    }\n\n    // \n    if (!originalParent) {\n      originalParent = container.parentElement;\n    }\n\n    //  iframe  ACU  iframe\n    const parentDoc = window.parent?.document || document;\n    if (targetDoc !== parentDoc) {\n      console.info('[ACU Fullscreen] Fullscreen in iframe, copying ACU styles...');\n\n      // \n      cleanupCopiedStyles();\n\n      //  ACU  document\n      copyACUStyles(parentDoc, targetDoc);\n    }\n\n    //  ACU \n    fullscreenElement.appendChild(container);\n\n    // \n    container.style.position = 'fixed';\n    container.style.top = '0';\n    container.style.left = '0';\n    container.style.width = '100%';\n    container.style.height = '100%';\n    container.style.zIndex = '2147483647'; //  z-index\n    container.style.pointerEvents = 'none'; // \n\n    // \n    const acuApp = container.querySelector('.acu-app') as HTMLElement;\n    if (acuApp) {\n      acuApp.style.pointerEvents = 'auto';\n    }\n\n    state.value.isMigrated = true;\n    console.info('[ACU Fullscreen] ACU container migrated to fullscreen element');\n\n    //  DOM \n    nextTick(() => {\n      adjustBallPositionForFullscreen(fullscreenElement);\n    });\n  }\n\n  /**\n   *  ACU  document\n   * @param sourceDoc  document\n   * @param targetDoc  document iframe\n   */\n  function copyACUStyles(sourceDoc: Document, targetDoc: Document): void {\n    //  ACU \n    const acuStyleSelectors = [\n      'style[data-source=\"acu-visualizer\"]',\n      'style[id*=\"acu-styles\"]',\n      'style[id*=\"acu-dynamic\"]',\n      'style[id*=\"acu-theme\"]',\n    ];\n\n    for (const selector of acuStyleSelectors) {\n      const styleElements = sourceDoc.querySelectorAll(selector);\n      styleElements.forEach(originalStyle => {\n        const clonedStyle = originalStyle.cloneNode(true) as HTMLElement;\n        //  ID \n        if (clonedStyle.id) {\n          clonedStyle.id = `fullscreen-${clonedStyle.id}`;\n        }\n        clonedStyle.setAttribute('data-fullscreen-copy', 'true');\n        targetDoc.head.appendChild(clonedStyle);\n        copiedStyleElements.push(clonedStyle);\n        console.info('[ACU Fullscreen] Copied style:', clonedStyle.id || 'anonymous');\n      });\n    }\n\n    //  Font Awesome \n    const faStyles = sourceDoc.querySelectorAll('link[href*=\"fontawesome\"], link[href*=\"font-awesome\"]');\n    faStyles.forEach(link => {\n      const clonedLink = link.cloneNode(true) as HTMLElement;\n      clonedLink.setAttribute('data-fullscreen-copy', 'true');\n      targetDoc.head.appendChild(clonedLink);\n      copiedStyleElements.push(clonedLink);\n    });\n\n    console.info(`[ACU Fullscreen] Copied ${copiedStyleElements.length} style elements`);\n  }\n\n  /**\n   * \n   */\n  function cleanupCopiedStyles(): void {\n    for (const el of copiedStyleElements) {\n      try {\n        el.remove();\n      } catch (e) {\n        // \n      }\n    }\n    copiedStyleElements = [];\n  }\n\n  /**\n   *  ACU \n   */\n  function restoreFromFullscreen(): void {\n    const container = getACUContainer();\n    if (!container || !originalParent) {\n      return;\n    }\n\n    // \n    restoreBallPosition();\n\n    // \n    originalParent.appendChild(container);\n\n    // \n    cleanupCopiedStyles();\n\n    // \n    if (styleCleanup) {\n      styleCleanup();\n      styleCleanup = null;\n    }\n\n    // \n    container.style.position = '';\n    container.style.top = '';\n    container.style.left = '';\n    container.style.width = '';\n    container.style.height = '';\n    container.style.zIndex = '';\n    container.style.pointerEvents = '';\n\n    // \n    const acuApp = container.querySelector('.acu-app') as HTMLElement;\n    if (acuApp) {\n      acuApp.style.pointerEvents = '';\n    }\n\n    state.value.isMigrated = false;\n    originalParent = null;\n    console.info('[ACU Fullscreen] ACU container restored from fullscreen');\n  }\n\n  /**\n   * \n   */\n  function handleFullscreenChange(): void {\n    const { doc, element } = detectFullscreenElement();\n\n    if (element) {\n      // \n      state.value.isFullscreen = true;\n      state.value.fullscreenDocument = doc;\n      state.value.fullscreenElement = element;\n\n      //  ACU\n      migrateToFullscreen(element, doc);\n    } else {\n      // \n      state.value.isFullscreen = false;\n      state.value.fullscreenDocument = null;\n      state.value.fullscreenElement = null;\n\n      //  ACU\n      restoreFromFullscreen();\n    }\n  }\n\n  /**\n   *  document \n   */\n  function addFullscreenListener(doc: Document): void {\n    const handler = () => handleFullscreenChange();\n    doc.addEventListener('fullscreenchange', handler);\n    eventListeners.push({ doc, handler });\n  }\n\n  /**\n   *  iframe\n   */\n  function scanAndListenIframes(): void {\n    const parentDoc = window.parent?.document || document;\n    const iframes = parentDoc.querySelectorAll('.mes_streaming iframe');\n\n    for (const iframe of iframes) {\n      const iframeEl = iframe as HTMLIFrameElement;\n      try {\n        const iframeDoc = iframeEl.contentDocument;\n        if (iframeDoc) {\n          // \n          const alreadyListening = eventListeners.some(l => l.doc === iframeDoc);\n          if (!alreadyListening) {\n            addFullscreenListener(iframeDoc);\n            console.info('[ACU Fullscreen] Added listener to iframe:', iframeEl.id || 'anonymous');\n          }\n\n          //  iframe\n          (iframeEl.contentWindow as any).getACUMountPoint = () => {\n            return iframeDoc.body;\n          };\n          (iframeEl.contentWindow as any).isFullscreen = () => {\n            return !!iframeDoc.fullscreenElement;\n          };\n        }\n      } catch (e) {\n        //  iframe\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  function init(): void {\n    const parentDoc = window.parent?.document || document;\n\n    // 1. \n    addFullscreenListener(parentDoc);\n\n    // 2.  iframe \n    scanAndListenIframes();\n\n    // 3.  MutationObserver  iframe\n    iframeObserver = new MutationObserver(mutations => {\n      for (const mutation of mutations) {\n        if (mutation.type === 'childList') {\n          //  iframe\n          const hasNewIframe = Array.from(mutation.addedNodes).some(node => {\n            if (node instanceof Element) {\n              return node.matches('.mes_streaming') || node.querySelector('.mes_streaming');\n            }\n            return false;\n          });\n\n          if (hasNewIframe) {\n            //  iframe \n            setTimeout(scanAndListenIframes, 500);\n          }\n        }\n      }\n    });\n\n    // \n    const chatContainer = parentDoc.querySelector('#chat');\n    if (chatContainer) {\n      iframeObserver.observe(chatContainer, {\n        childList: true,\n        subtree: true,\n      });\n    }\n\n    console.info('[ACU Fullscreen] Initialized');\n  }\n\n  /**\n   * \n   */\n  function cleanup(): void {\n    // \n    for (const { doc, handler } of eventListeners) {\n      try {\n        doc.removeEventListener('fullscreenchange', handler);\n      } catch (e) {\n        // document \n      }\n    }\n    eventListeners.length = 0;\n\n    //  MutationObserver\n    if (iframeObserver) {\n      iframeObserver.disconnect();\n      iframeObserver = null;\n    }\n\n    // \n    cleanupCopiedStyles();\n\n    // \n    if (styleCleanup) {\n      styleCleanup();\n      styleCleanup = null;\n    }\n\n    //  ACU\n    if (state.value.isMigrated) {\n      restoreFromFullscreen();\n    }\n\n    console.info('[ACU Fullscreen] Cleaned up');\n  }\n\n  // \n  onMounted(() => {\n    init();\n  });\n\n  onUnmounted(() => {\n    cleanup();\n  });\n\n  return {\n    /**  */\n    state,\n    /**  onMounted */\n    init,\n    /**  */\n    cleanup,\n    /**  */\n    checkFullscreen: handleFullscreenChange,\n  };\n}\n\n/**\n * \n *  util/streaming.ts  iframe\n */\nexport function exposeFullscreenAPI(iframeWindow: Window, iframeDocument: Document): void {\n  (iframeWindow as any).getACUMountPoint = () => iframeDocument.body;\n  (iframeWindow as any).isFullscreen = () => !!iframeDocument.fullscreenElement;\n  (iframeWindow as any).requestACUMigration = () => {\n    // \n    const event = new CustomEvent('acu-fullscreen-check');\n    window.parent?.document?.dispatchEvent(event);\n  };\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, Fragment as _Fragment, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = [\"title\"];\nconst _hoisted_2 = { class: \"ball-emoji\" };\nconst _hoisted_3 = {\n    key: 1,\n    class: \"acu-issue-badge\"\n};\nimport { computed, onMounted, onUnmounted, ref, watch } from 'vue';\nimport { useDraggableWithSnap, useParentEventListener } from '../composables';\nimport { useBallAppearanceStore, useDataStore, useUIStore } from '../stores';\nimport { hexToRgba } from '../utils';\n// ============================================================\n// Store \n// ============================================================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'FloatingBall',\n    setup(__props, { expose: __expose }) {\n        /**\n         * FloatingBall.vue - \n         *  VueUse useDraggableWithSnap \n         *  iframe  window.parent \n         *  AI \n         */\n        const uiStore = useUIStore();\n        const dataStore = useDataStore();\n        const ballAppearanceStore = useBallAppearanceStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const hasIntegrityIssues = computed(() => dataStore.hasIntegrityIssues);\n        /**  */\n        const issueTooltip = computed(() => {\n            if (!hasIntegrityIssues.value)\n                return '';\n            return dataStore.getIntegritySummary();\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const appearance = computed(() => ballAppearanceStore.appearance);\n        /**  */\n        const imageStyle = computed(() => {\n            const app = appearance.value;\n            if (app.type !== 'image' || !app.content)\n                return {};\n            return {\n                backgroundImage: `url('${app.content}')`,\n                backgroundPosition: `${app.imageOffsetX ?? 50}% ${app.imageOffsetY ?? 50}%`,\n                backgroundSize: `${app.imageScale ?? 150}%`,\n                backgroundRepeat: 'no-repeat',\n            };\n        });\n        /** AI  -  */\n        const isAiNotifying = ref(false);\n        /** AI  */\n        const isAiGenerating = computed(() => uiStore.isAiGenerating);\n        /**\n         *  AI \n         * \n         */\n        function triggerAiNotify() {\n            isAiNotifying.value = true;\n            console.info('[ACU FloatingBall] AI ');\n        }\n        /**\n         *  AI \n         */\n        function clearAiNotify() {\n            isAiNotifying.value = false;\n            console.info('[ACU FloatingBall] ');\n        }\n        /**  class  */\n        const ballClasses = computed(() => {\n            // \n            //  enableNotifyAnimation \n            const showAnimation = (isAiGenerating.value || isAiNotifying.value) && appearance.value.enableNotifyAnimation !== false;\n            return {\n                docked: isDocked.value,\n                'has-issues': hasIntegrityIssues.value,\n                'ai-notify': showAnimation,\n                'anim-ripple': showAnimation && appearance.value.notifyAnimation === 'ripple',\n                'anim-arc': showAnimation && appearance.value.notifyAnimation === 'arc',\n            };\n        });\n        /**  CSS  */\n        const ballStyle = computed(() => {\n            const app = appearance.value;\n            return {\n                '--ball-size': `${app.size}px`,\n                '--ball-border-color': app.borderColor,\n                '--ball-border-color-rgba': hexToRgba(app.borderColor, app.borderOpacity),\n                '--ball-bg-color': hexToRgba(app.bgColor, app.bgOpacity),\n                ...positionStyle.value,\n            };\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  iframe */\n        function getTargetWindowSize() {\n            const targetWindow = window.parent && window.parent !== window ? window.parent : window;\n            return {\n                width: targetWindow.innerWidth,\n                height: targetWindow.innerHeight,\n            };\n        }\n        /**  */\n        function getDefaultPosition() {\n            const { height: winHeight } = getTargetWindowSize();\n            return {\n                x: 20,\n                y: winHeight - 150,\n            };\n        }\n        // ============================================================\n        // \n        // ============================================================\n        const ballRef = ref();\n        /**  */\n        const isDocked = ref(false);\n        /**  (/) */\n        let clickTimer = null;\n        // ============================================================\n        //  VueUse \n        // ============================================================\n        const defaultPos = getDefaultPosition();\n        const { x, y, style: positionStyle, isDragging, wasDragging, } = useDraggableWithSnap(ballRef, {\n            initialX: defaultPos.x,\n            initialY: defaultPos.y,\n            edgePadding: 10,\n            elementWidth: computed(() => appearance.value.size).value,\n            useParentWindow: true,\n            onPositionChange: (newX, newY) => {\n                console.info('[ACU FloatingBall] :', newX, newY);\n            },\n        });\n        // ============================================================\n        // /\n        // ============================================================\n        function handleClick(e) {\n            console.log('[ACU FloatingBall] handleClick, wasDragging:', wasDragging.value, 'isDragging:', isDragging.value);\n            // \n            if (wasDragging.value) {\n                wasDragging.value = false;\n                e.stopPropagation();\n                console.log('[ACU FloatingBall] ');\n                return;\n            }\n            //  AI \n            if (isAiNotifying.value) {\n                clearAiNotify();\n            }\n            // \n            if (isDocked.value) {\n                isDocked.value = false;\n                e.stopPropagation();\n                return;\n            }\n            // /\n            if (clickTimer) {\n                //  - \n                clearTimeout(clickTimer);\n                clickTimer = null;\n                isDocked.value = true;\n                console.info('[ACU FloatingBall]  - ');\n            }\n            else {\n                // \n                clickTimer = setTimeout(() => {\n                    clickTimer = null;\n                    uiStore.openPanel();\n                    console.info('[ACU FloatingBall]  - ');\n                }, 250);\n            }\n        }\n        // ============================================================\n        //  resize \n        // ============================================================\n        useParentEventListener('resize', () => {\n            const { width: winWidth, height: winHeight } = getTargetWindowSize();\n            const ballSize = appearance.value.size;\n            const padding = 10;\n            let needUpdate = false;\n            // \n            if (x.value > winWidth - ballSize - padding) {\n                x.value = winWidth - ballSize - padding;\n                needUpdate = true;\n            }\n            if (y.value > winHeight - ballSize - padding) {\n                y.value = winHeight - ballSize - padding;\n                needUpdate = true;\n            }\n            if (x.value < padding) {\n                x.value = padding;\n                needUpdate = true;\n            }\n            if (y.value < padding) {\n                y.value = padding;\n                needUpdate = true;\n            }\n            if (needUpdate) {\n                console.info('[ACU FloatingBall] ');\n            }\n        });\n        // ============================================================\n        // \n        // ============================================================\n        onMounted(() => {\n            // \n            // ballAppearanceStore.loadFromGlobalVariables(); //  ConfigManager \n        });\n        //  AI \n        watch(() => uiStore.aiNotifySignal, () => {\n            console.info('[ACU FloatingBall]  AI ');\n            triggerAiNotify();\n        });\n        onUnmounted(() => {\n            if (clickTimer) {\n                clearTimeout(clickTimer);\n            }\n        });\n        // ============================================================\n        // \n        // ============================================================\n        __expose({\n            /**  */\n            resetPosition: () => {\n                const defaultY = (window.parent?.innerHeight ?? window.innerHeight) - 150;\n                x.value = 20;\n                y.value = defaultY;\n            },\n            /**  */\n            setDocked: (docked) => {\n                isDocked.value = docked;\n            },\n            /**  AI  */\n            triggerAiNotify,\n            /**  AI  */\n            clearAiNotify,\n            /**  */\n            getAppearance: () => appearance.value,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                ref_key: \"ballRef\",\n                ref: ballRef,\n                class: _normalizeClass([\"acu-floating-ball-vue\", ballClasses.value]),\n                style: _normalizeStyle(ballStyle.value),\n                title: hasIntegrityIssues.value ? issueTooltip.value : '',\n                onClick: handleClick\n            }, [\n                _createCommentVNode(\"  -  \"),\n                (!isDocked.value)\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                        _createCommentVNode(\" FontAwesome  \"),\n                        (appearance.value.type === 'icon')\n                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                key: 0,\n                                class: _normalizeClass(['fa-solid', appearance.value.content])\n                            }, null, 2 /* CLASS */))\n                            : (appearance.value.type === 'emoji')\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\" Emoji \"),\n                                    _createElementVNode(\"span\", _hoisted_2, _toDisplayString(appearance.value.content), 1 /* TEXT */)\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                : (appearance.value.type === 'image' && appearance.value.content)\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                        _createCommentVNode(\"  -  div + background-image  \"),\n                                        _createElementVNode(\"div\", {\n                                            class: _normalizeClass([\"ball-image\", { 'ball-image-invert': appearance.value.imageInvert }]),\n                                            style: _normalizeStyle(imageStyle.value)\n                                        }, null, 6 /* CLASS, STYLE */)\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    : _createCommentVNode(\"v-if\", true)\n                    ], 64 /* STABLE_FRAGMENT */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                (hasIntegrityIssues.value && !isDocked.value)\n                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, \"!\"))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 14 /* CLASS, STYLE, PROPS */, _hoisted_1));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./FloatingBall.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./FloatingBall.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"popup-buttons-grid\" };\nconst _hoisted_2 = [\"title\", \"onClick\"];\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'HiddenButtonsPopup',\n    props: {\n        visible: { type: Boolean },\n        buttons: {},\n        isPinned: { type: Boolean, default: false }\n    },\n    emits: [\"close\", \"button-click\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * HiddenButtonsPopup - \n         *\n         * :\n         * - \n         * - \n         * - title\n         *\n         * :\n         * - MainPanel \"\"\n         */\n        const props = __props;\n        const emit = __emit;\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const getButtonClass = (buttonId) => {\n            const classes = [];\n            // \n            if (buttonId === 'purge') {\n                classes.push('btn-danger');\n            }\n            // \n            if (buttonId === 'pin') {\n                classes.push('btn-toggle');\n                if (props.isPinned) {\n                    classes.push('active');\n                }\n            }\n            return classes;\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const handleButtonClick = (buttonId) => {\n            emit('button-click', buttonId);\n            emit('close');\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"hidden-popup\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-hidden-buttons-popup\",\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.buttons, (btn) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: btn.id,\n                                        class: _normalizeClass([\"popup-button\", getButtonClass(btn.id)]),\n                                        title: btn.label,\n                                        onClick: _withModifiers(($event) => (handleButtonClick(btn.id)), [\"stop\"])\n                                    }, [\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(['fa-solid', btn.icon])\n                                        }, null, 2 /* CLASS */)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_2));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./HiddenButtonsPopup.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HiddenButtonsPopup.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HiddenButtonsPopup.vue?vue&type=style&index=0&id=5d2fcd0e&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5d2fcd0e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"acu-panel-content\" };\nconst _hoisted_2 = { class: \"acu-nav-actions-area\" };\nconst _hoisted_3 = [\"title\", \"onClick\", \"onMousedown\", \"onTouchstartPassive\"];\nconst _hoisted_4 = {\n    key: 0,\n    class: \"secondary-indicator\"\n};\nconst _hoisted_5 = [\"title\", \"onClick\"];\nconst _hoisted_6 = {\n    key: 0,\n    class: \"acu-action-btn-wrapper\"\n};\nimport { useEventListener, useStorage } from '@vueuse/core';\nimport { computed, onMounted, onUnmounted, ref, watchEffect } from 'vue';\nimport { useCellLock, useSmartHeight } from '../composables';\nimport { NAV_BUTTONS, useConfigStore, useUIStore } from '../stores';\nimport HiddenButtonsPopup from './HiddenButtonsPopup.vue';\nconst WINDOW_CONFIG_KEY = 'acu_win_config';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MainPanel',\n    props: {\n        title: { default: 'ACU ' },\n        theme: { default: 'retro' },\n        layout: { default: 'vertical' },\n        isCollapsed: { type: Boolean, default: false },\n        isPinned: { type: Boolean, default: false },\n        isContentHidden: { type: Boolean, default: false },\n        lockPanel: { type: Boolean, default: false },\n        hasChanges: { type: Boolean, default: false },\n        panelType: { default: 'normal' }\n    },\n    emits: [\"refresh\", \"save\", \"save-as\", \"undo\", \"manual-update\", \"purge\", \"settings\", \"open-native\", \"toggle-pin\", \"toggle\", \"close\", \"hide-content\", \"height-change\", \"width-change\", \"collapse-tab\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * MainPanel.vue - \n         *\n         * \n         * 1. acu-data-display - \n         * 2. acu-resize-handle - \n         * 3. acu-nav-container - \n         *    - acu-nav-tabs-area - Tab \n         *    - acu-nav-separator - \n         *    - acu-nav-actions-area - \n         *\n         *  VueUse \n         * - useStorage: \n         * - useSmartHeight: \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Stores & Composables\n        // ============================================================\n        const uiStore = useUIStore();\n        const cellLock = useCellLock();\n        const configStore = useConfigStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const DEFAULT_VISIBLE_BUTTONS = ['save', 'refresh', 'settings', 'pin', 'toggle'];\n        /**  -  buttonsConfig  config */\n        const visibleButtons = computed(() => {\n            //  buttonsConfig refs configUI \n            const buttonsConfig = configStore.buttonsConfig;\n            let order = buttonsConfig.buttonOrder || NAV_BUTTONS.map((b) => b.id);\n            //  visibleButtons \n            const visibleIds = buttonsConfig.visibleButtons?.length > 0 ? [...buttonsConfig.visibleButtons] : [...DEFAULT_VISIBLE_BUTTONS];\n            // Tab collapseTab \n            if (configStore.config.collapseTabBar && configStore.config.showCollapseTabButton !== false) {\n                if (!visibleIds.includes('collapseTab')) {\n                    visibleIds.push('collapseTab');\n                }\n                //  collapseTab  order \n                if (!order.includes('collapseTab')) {\n                    //  settings \n                    const settingsIndex = order.indexOf('settings');\n                    if (settingsIndex >= 0) {\n                        order = [...order.slice(0, settingsIndex), 'collapseTab', ...order.slice(settingsIndex)];\n                    }\n                    else {\n                        order = [...order, 'collapseTab'];\n                    }\n                }\n            }\n            else {\n                // Tab collapseTab \n                const collapseIndex = visibleIds.indexOf('collapseTab');\n                if (collapseIndex > -1) {\n                    visibleIds.splice(collapseIndex, 1);\n                }\n            }\n            console.info('[ACU MainPanel] :', {\n                order,\n                visibleIds,\n                buttonsConfigVisible: buttonsConfig.visibleButtons,\n                collapseTabBar: configStore.config.collapseTabBar,\n                showCollapseTabButton: configStore.config.showCollapseTabButton,\n            });\n            return order\n                .map((id) => NAV_BUTTONS.find((b) => b.id === id))\n                .filter((btn) => {\n                if (!btn)\n                    return false;\n                // \n                return visibleIds.includes(btn.id);\n            });\n        });\n        /**  */\n        const hiddenButtons = computed(() => configStore.hiddenButtons);\n        /**  */\n        const hasHiddenButtons = computed(() => configStore.hasHiddenButtons);\n        /**  */\n        const isHiddenPopupVisible = ref(false);\n        /**  */\n        const toggleHiddenPopup = () => {\n            isHiddenPopupVisible.value = !isHiddenPopupVisible.value;\n        };\n        /**  */\n        const handleHiddenButtonClick = (buttonId) => {\n            isHiddenPopupVisible.value = false;\n            emitButtonAction(buttonId);\n        };\n        /**  */\n        const isRefreshing = ref(false);\n        /**  */\n        const getButtonClass = (buttonId) => {\n            const classes = [];\n            // \n            if (buttonId === 'purge') {\n                classes.push('acu-btn-danger');\n            }\n            // \n            if (buttonId === 'pin') {\n                classes.push('acu-btn-toggle');\n                if (props.isPinned) {\n                    classes.push('active');\n                }\n            }\n            // \n            if (buttonId === 'save' && props.hasChanges) {\n                classes.push('has-changes');\n            }\n            // \n            if (buttonId === 'refresh' && isRefreshing.value) {\n                classes.push('refreshing');\n            }\n            return classes;\n        };\n        /**  */\n        const getButtonStyle = (buttonId) => {\n            const styles = {};\n            // \n            if (buttonId === 'purge') {\n                styles.color = '#e74c3c';\n            }\n            // \n            if (buttonId === 'pin' && props.isPinned) {\n                styles.color = 'var(--acu-title-color)';\n                styles.borderColor = 'var(--acu-title-color)';\n                styles.background = 'var(--acu-btn-hover)';\n            }\n            return styles;\n        };\n        // ============================================================\n        //  ActionBar.vue \n        // ============================================================\n        let longPressTimer = null;\n        const isLongPress = ref(false);\n        const popupButtonId = ref(null);\n        /**\n         *  ID\n         * @param buttonId  ID\n         */\n        const getSecondaryId = (buttonId) => {\n            return configStore.getSecondaryButtonId(buttonId);\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const hasSecondary = (buttonId) => {\n            return getSecondaryId(buttonId) !== null;\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const getButtonIcon = (buttonId) => {\n            const btn = NAV_BUTTONS.find((b) => b.id === buttonId);\n            return btn?.icon || 'fa-circle';\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const getButtonLabel = (buttonId) => {\n            const btn = NAV_BUTTONS.find((b) => b.id === buttonId);\n            return btn?.label || buttonId;\n        };\n        /**\n         *  title\n         * @param buttonId  ID\n         */\n        const getButtonTitle = (buttonId) => {\n            const label = getButtonLabel(buttonId);\n            const secondaryId = getSecondaryId(buttonId);\n            if (secondaryId) {\n                const secondaryLabel = getButtonLabel(secondaryId);\n                return `${label} (: ${secondaryLabel})`;\n            }\n            return label;\n        };\n        /**  */\n        const startLongPress = (buttonId) => {\n            const secondaryId = getSecondaryId(buttonId);\n            console.log('[ACU MainPanel] startLongPress:', buttonId, 'secondaryId:', secondaryId, 'groups:', configStore.buttonGroups);\n            if (!secondaryId) {\n                console.log('[ACU MainPanel] No secondary button for:', buttonId);\n                return;\n            }\n            isLongPress.value = false;\n            longPressTimer = setTimeout(() => {\n                isLongPress.value = true;\n                console.log('[ACU MainPanel] Long press triggered for:', buttonId, 'directExec:', configStore.longPressDirectExec);\n                // \n                if (configStore.longPressDirectExec) {\n                    // \n                    console.log('[ACU MainPanel] Direct exec:', secondaryId);\n                    emitButtonAction(secondaryId);\n                }\n                else {\n                    // \n                    console.log('[ACU MainPanel] Popup button:', secondaryId);\n                    popupButtonId.value = buttonId;\n                    // 3\n                    setTimeout(() => {\n                        if (popupButtonId.value === buttonId) {\n                            popupButtonId.value = null;\n                        }\n                    }, 3000);\n                }\n            }, 600);\n        };\n        /**  */\n        const endLongPress = () => {\n            if (longPressTimer) {\n                clearTimeout(longPressTimer);\n                longPressTimer = null;\n            }\n        };\n        /**\n         * \n         * @param primaryId  ID\n         */\n        const handleSecondaryClick = (primaryId) => {\n            const secondaryId = getSecondaryId(primaryId);\n            if (secondaryId) {\n                emitButtonAction(secondaryId);\n            }\n            popupButtonId.value = null;\n        };\n        /**  */\n        const emitButtonAction = (actionId) => {\n            switch (actionId) {\n                case 'save':\n                    emit('save');\n                    break;\n                case 'saveAs':\n                    emit('save-as');\n                    break;\n                case 'undo':\n                    emit('undo');\n                    break;\n                case 'refresh':\n                    emit('refresh');\n                    break;\n                case 'manualUpdate':\n                    emit('manual-update');\n                    break;\n                case 'purge':\n                    emit('purge');\n                    break;\n                case 'pin':\n                    emit('toggle-pin');\n                    break;\n                case 'toggle':\n                    emit('toggle');\n                    break;\n                case 'director':\n                    uiStore.directorDialog = true;\n                    break;\n                case 'settings':\n                    emit('settings');\n                    break;\n                case 'openNative':\n                    emit('open-native');\n                    break;\n                case 'collapseTab':\n                    emit('collapse-tab');\n                    break;\n                default:\n                    console.warn(`[MainPanel]  ID: ${actionId}`);\n            }\n        };\n        /**  */\n        const handleButtonClick = (buttonId) => {\n            // \n            if (isLongPress.value) {\n                isLongPress.value = false;\n                return;\n            }\n            // \n            if (buttonId === 'refresh') {\n                isRefreshing.value = true;\n                // 1\n                setTimeout(() => {\n                    isRefreshing.value = false;\n                }, 1000);\n            }\n            emitButtonAction(buttonId);\n        };\n        // ============================================================\n        // Refs\n        // ============================================================\n        const panelRef = ref();\n        const dataAreaRef = ref();\n        const navContainerRef = ref();\n        const resizeHandleRef = ref();\n        // ============================================================\n        // \n        // ============================================================\n        // ============================================================\n        //  6.4.1.ts renderInterface \n        //  useStorage  localStorage\n        // \n        // ============================================================\n        const DEFAULT_CENTERED_CONFIG = { width: 400, left: '50%', bottom: '50%', isCentered: true };\n        //  localStorage \n        let preCheckSavedWin = null;\n        let needResetToCenter = false;\n        try {\n            const rawValue = localStorage.getItem(WINDOW_CONFIG_KEY);\n            preCheckSavedWin = rawValue ? JSON.parse(rawValue) : null;\n        }\n        catch (e) {\n            preCheckSavedWin = null;\n        }\n        //  6.4.1  + \n        // 1. \n        if (!preCheckSavedWin) {\n            needResetToCenter = true;\n            console.info('[ACU MainPanel] ');\n        }\n        else if (\n        // 2. bottom \n        // bottom  100px \n        !preCheckSavedWin.isCentered &&\n            typeof preCheckSavedWin.bottom === 'number' &&\n            preCheckSavedWin.bottom < 100) {\n            needResetToCenter = true;\n            console.warn('[ACU MainPanel]  (bottom=' + preCheckSavedWin.bottom + ')');\n        }\n        if (needResetToCenter) {\n            localStorage.setItem(WINDOW_CONFIG_KEY, JSON.stringify(DEFAULT_CENTERED_CONFIG));\n            //  6.4.1 tab\n            // \n            localStorage.removeItem('acu_active_tab');\n            console.info('[ACU MainPanel]  activeTab');\n        }\n        const windowConfig = useStorage(WINDOW_CONFIG_KEY, DEFAULT_CENTERED_CONFIG);\n        // ============================================================\n        //  - \n        // ============================================================\n        /** / */\n        function isMobileDevice() {\n            // \n            const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n            // \n            const mobileUA = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n            //  768px \n            const isSmallScreen = window.innerWidth < 768;\n            return hasTouch && (mobileUA || isSmallScreen);\n        }\n        /**\n         * \n         * \n         * \n         */\n        function getMobileSafeBottomMargin() {\n            if (!isMobileDevice()) {\n                return 0;\n            }\n            //  50px\n            return configStore.config.mobileSafeAreaBottom ?? 50;\n        }\n        /**  */\n        function getParentWindowSize() {\n            return {\n                width: window.parent?.innerWidth ?? window.innerWidth,\n                height: window.parent?.innerHeight ?? window.innerHeight,\n            };\n        }\n        /**\n         * \n         *  6.4.1  renderInterface \n         * 1. \n         * 2.  bottom \n         */\n        function validateAndFixWindowPosition() {\n            const config = windowConfig.value;\n            const { width: parentWidth, height: parentHeight } = getParentWindowSize();\n            console.info('[ACU MainPanel] :', JSON.stringify(config), 'parentHeight:', parentHeight);\n            //  6.4.1\n            if (!config || config.left === undefined || config.bottom === undefined) {\n                console.warn('[ACU MainPanel] ');\n                windowConfig.value = {\n                    width: config?.width || 400,\n                    left: '50%',\n                    bottom: '50%',\n                    isCentered: true,\n                };\n                return;\n            }\n            //  left  bottom  '50%'\n            if (config.isCentered) {\n                // left  bottom  '50%'\n                if (config.left !== '50%' || config.bottom !== '50%') {\n                    console.warn('[ACU MainPanel]  50%');\n                    windowConfig.value = {\n                        ...config,\n                        left: '50%',\n                        bottom: '50%',\n                    };\n                }\n                return;\n            }\n            // \n            let needUpdate = false;\n            let resetToCenter = false;\n            let newLeft = config.left;\n            const newBottom = config.bottom;\n            const safeBottomMargin = getMobileSafeBottomMargin();\n            // \n            const minSafeBottom = Math.max(safeBottomMargin, 50);\n            //  bottom \n            if (typeof config.bottom === 'number') {\n                // \n                if (config.bottom < minSafeBottom) {\n                    console.warn(`[ACU MainPanel]  (${config.bottom}px < ${minSafeBottom}px)`);\n                    resetToCenter = true;\n                }\n                else if (config.bottom > parentHeight - 50) {\n                    // \n                    console.warn(`[ACU MainPanel]  (${config.bottom}px > ${parentHeight - 50}px)`);\n                    resetToCenter = true;\n                }\n            }\n            else if (config.bottom !== '50%') {\n                // bottom  '50%'\n                console.warn('[ACU MainPanel]  bottom ');\n                resetToCenter = true;\n            }\n            //  left \n            if (typeof config.left === 'number') {\n                const maxLeft = parentWidth - 50;\n                if (config.left < -200) {\n                    newLeft = -200;\n                    needUpdate = true;\n                }\n                else if (config.left > maxLeft) {\n                    newLeft = Math.max(0, maxLeft);\n                    needUpdate = true;\n                }\n            }\n            else if (config.left !== '50%') {\n                // left  '50%'\n                console.warn('[ACU MainPanel]  left ');\n                resetToCenter = true;\n            }\n            // \n            if (resetToCenter) {\n                windowConfig.value = {\n                    width: config.width || 400,\n                    left: '50%',\n                    bottom: '50%',\n                    isCentered: true,\n                };\n                console.info('[ACU MainPanel] ');\n                return;\n            }\n            // \n            if (needUpdate) {\n                console.info('[ACU MainPanel] ');\n                windowConfig.value = {\n                    ...config,\n                    left: newLeft,\n                    bottom: newBottom,\n                };\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        // ============================================================\n        //  iframe  DOM \n        // Vue 3  (:style)  +  iframe \n        //  watchEffect  DOM  style  CSS \n        // ============================================================\n        watchEffect(() => {\n            if (!panelRef.value)\n                return;\n            //  6.4.1\n            let savedWin = windowConfig.value;\n            if (!savedWin) {\n                savedWin = { width: 400, left: '50%', bottom: '50%', isCentered: true };\n            }\n            const el = panelRef.value;\n            //  6.4.1\n            if (savedWin.width) {\n                el.style.setProperty('--acu-win-width', `${savedWin.width}px`);\n            }\n            if (savedWin.left !== undefined) {\n                const leftValue = typeof savedWin.left === 'number' ? `${savedWin.left}px` : savedWin.left;\n                el.style.setProperty('--acu-win-left', leftValue);\n            }\n            if (savedWin.bottom !== undefined) {\n                const bottomValue = typeof savedWin.bottom === 'number' ? `${savedWin.bottom}px` : savedWin.bottom;\n                el.style.setProperty('--acu-win-bottom', bottomValue);\n            }\n            //  transform top \n            if (savedWin.isCentered) {\n                //  top CSS \n                //  CSS \n                el.style.setProperty('--acu-win-left', '50%');\n                el.style.removeProperty('--acu-win-bottom');\n                el.style.transform = 'translate(-50%, -50%)';\n            }\n            else {\n                //  bottom \n                el.style.transform = 'none';\n            }\n        });\n        // ============================================================\n        //  jQuery $('body').on() \n        // src//index.vue \n        //  $  window.parent.$ $('body')  body\n        // ============================================================\n        /**\n         * \n         *  jQuery  body\n         * \n         * 1.  $('body').on()  move/up  $  jQuery\n         * 2.  5px \n         * 3.  click \n         */\n        function handleHeaderPointerDown(e) {\n            // \n            if (props.lockPanel)\n                return;\n            // \n            const target = e.target;\n            if (target.closest('.acu-resize-handle, .acu-slider, input'))\n                return;\n            // /\n            if (e.button !== 0)\n                return;\n            const navEl = navContainerRef.value;\n            if (!navEl || !panelRef.value)\n                return;\n            // \n            const startX = e.clientX;\n            const startY = e.clientY;\n            const rect = panelRef.value.getBoundingClientRect();\n            const startLeft = rect.left;\n            const winH = window.parent?.innerHeight ?? window.innerHeight;\n            const startBottom = winH - rect.bottom;\n            let isDragging = false;\n            let wasDragging = false;\n            const handlePointerMove = (moveE) => {\n                const originalEvent = moveE.originalEvent;\n                const dx = originalEvent.clientX - startX;\n                const dy = originalEvent.clientY - startY;\n                //  5px \n                if (!isDragging && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\n                    isDragging = true;\n                    wasDragging = true;\n                    // \n                    windowConfig.value.isCentered = false;\n                }\n                if (isDragging) {\n                    moveE.preventDefault();\n                    let newLeft = startLeft + dx;\n                    let newBottom = startBottom - dy;\n                    // \n                    const parentWidth = window.parent?.innerWidth ?? window.innerWidth;\n                    const safeBottomMargin = getMobileSafeBottomMargin();\n                    const maxLeft = parentWidth - 50;\n                    const minBottom = safeBottomMargin; // \n                    const maxBottom = winH - 50;\n                    if (newLeft < -200)\n                        newLeft = -200;\n                    if (newLeft > maxLeft)\n                        newLeft = maxLeft;\n                    if (newBottom < minBottom)\n                        newBottom = minBottom;\n                    if (newBottom > maxBottom)\n                        newBottom = maxBottom;\n                    windowConfig.value.left = newLeft;\n                    windowConfig.value.bottom = newBottom;\n                }\n            };\n            const handlePointerUp = () => {\n                //  jQuery $('body')  body\n                $('body').off('pointermove', handlePointerMove);\n                $('body').off('pointerup', handlePointerUp);\n                if (wasDragging) {\n                    //  click \n                    const preventClick = (clickE) => {\n                        clickE.stopPropagation();\n                        clickE.preventDefault();\n                        navEl.removeEventListener('click', preventClick, true);\n                    };\n                    navEl.addEventListener('click', preventClick, true);\n                    console.info('[ACU MainPanel] ');\n                }\n            };\n            //  jQuery  body $  window.parent.$\n            $('body').on('pointermove', handlePointerMove);\n            $('body').on('pointerup', handlePointerUp);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const contentInnerRef = ref();\n        /**  */\n        const isManualHeight = ref(false);\n        /**  */\n        const panelHeight = ref(0);\n        /**  */\n        const panelTypeRef = computed(() => props.panelType);\n        /**  store  */\n        const showPaginationRef = computed(() => configStore.config.showPagination);\n        // ============================================================\n        //  - \n        // ============================================================\n        onMounted(() => {\n            // \n            validateAndFixWindowPosition();\n            //  iframe \n            const navEl = navContainerRef.value;\n            if (navEl) {\n                navEl.addEventListener('pointerdown', handleHeaderPointerDown);\n                console.info('[ACU MainPanel] ');\n            }\n            // \n            const resizeEl = resizeHandleRef.value;\n            if (resizeEl) {\n                resizeEl.addEventListener('pointerdown', startWidthResize);\n                console.info('[ACU MainPanel] ');\n            }\n        });\n        // \n        onUnmounted(() => {\n            const navEl = navContainerRef.value;\n            if (navEl) {\n                navEl.removeEventListener('pointerdown', handleHeaderPointerDown);\n            }\n            const resizeEl = resizeHandleRef.value;\n            if (resizeEl) {\n                resizeEl.removeEventListener('pointerdown', startWidthResize);\n            }\n        });\n        //  resize\n        useEventListener(window.parent ?? window, 'resize', () => {\n            validateAndFixWindowPosition();\n        });\n        //  composable\n        const { height: autoHeight, recalculate: recalculateHeight } = useSmartHeight(contentInnerRef, panelTypeRef, showPaginationRef, {\n            minHeight: 200,\n            maxHeightRatio: 0.8,\n            headerHeight: 42,\n            paginationHeight: 56,\n            contentPadding: 25,\n            onHeightChange: height => {\n                if (!isManualHeight.value && dataAreaRef.value) {\n                    panelHeight.value = height;\n                    emit('height-change', height);\n                }\n            },\n        });\n        // \n        /**\n         * \n         * \n         */\n        const startHeightDrag = (e, handleEl) => {\n            if (e.button !== 0)\n                return;\n            e.preventDefault();\n            e.stopPropagation();\n            if (!dataAreaRef.value)\n                return;\n            handleEl.setPointerCapture(e.pointerId);\n            isManualHeight.value = true;\n            const startY = e.clientY;\n            const startHeight = dataAreaRef.value.offsetHeight;\n            const handlePointerMove = (moveE) => {\n                if (!dataAreaRef.value)\n                    return;\n                const dy = startY - moveE.clientY;\n                let newHeight = startHeight + dy;\n                //  200px CSS  max-height: calc(100vh - bottom) \n                const minHeight = 200;\n                newHeight = Math.max(minHeight, newHeight);\n                dataAreaRef.value.style.height = `${newHeight}px`;\n                panelHeight.value = newHeight;\n                emit('height-change', newHeight);\n            };\n            const handlePointerUp = (upE) => {\n                handleEl.releasePointerCapture(upE.pointerId);\n                handleEl.removeEventListener('pointermove', handlePointerMove);\n                handleEl.removeEventListener('pointerup', handlePointerUp);\n            };\n            handleEl.addEventListener('pointermove', handlePointerMove);\n            handleEl.addEventListener('pointerup', handlePointerUp);\n        };\n        /**\n         * \n         *\n         * \n         * 1. \n         * 2.  setTimeout + rAF \n         * 3.  scrollHeight \n         *\n         * \n         * - \n         * - \n         */\n        const resetHeight = () => {\n            if (!dataAreaRef.value)\n                return;\n            // 1. \n            isManualHeight.value = false;\n            // 2. \n            dataAreaRef.value.style.height = '';\n            dataAreaRef.value.style.minHeight = '';\n            dataAreaRef.value.style.maxHeight = '';\n            // 3.  setTimeout \n            // 50ms  rAF \n            setTimeout(() => {\n                requestAnimationFrame(() => {\n                    if (!dataAreaRef.value)\n                        return;\n                    // 4. \n                    const minHeight = 200;\n                    //  -  - \n                    const parentHeight = window.parent?.innerHeight ?? window.innerHeight;\n                    const navEl = navContainerRef.value;\n                    const navHeight = navEl ? navEl.offsetHeight : 0;\n                    const maxHeight = parentHeight - navHeight - 20;\n                    // 5. \n                    const hasRelationshipGraph = dataAreaRef.value.querySelector('.acu-relationship-graph');\n                    if (hasRelationshipGraph) {\n                        const finalHeight = maxHeight;\n                        dataAreaRef.value.style.height = `${finalHeight}px`;\n                        panelHeight.value = finalHeight;\n                        console.info(`[ACU] :  ${finalHeight}`);\n                        emit('height-change', finalHeight);\n                        return;\n                    }\n                    // 6. \n                    const isHorizontal = configStore.config.layout === 'horizontal';\n                    let naturalHeight;\n                    if (isHorizontal) {\n                        // \n                        const cardsContainer = dataAreaRef.value.querySelector('.acu-cards-container');\n                        if (cardsContainer) {\n                            const cards = cardsContainer.querySelectorAll('.acu-data-card');\n                            let maxCardHeight = 0;\n                            cards.forEach(card => {\n                                const cardEl = card;\n                                // scrollHeight \n                                const cardContentHeight = cardEl.scrollHeight;\n                                if (cardContentHeight > maxCardHeight) {\n                                    maxCardHeight = cardContentHeight;\n                                }\n                            });\n                            // \n                            const toolbar = dataAreaRef.value.querySelector('.acu-table-toolbar');\n                            const pagination = dataAreaRef.value.querySelector('.acu-pagination-container');\n                            const toolbarHeight = toolbar ? toolbar.offsetHeight : 0;\n                            const paginationHeight = pagination ? pagination.offsetHeight : 0;\n                            //  padding\n                            const containerStyle = window.getComputedStyle(cardsContainer);\n                            const containerPadding = parseFloat(containerStyle.paddingTop) + parseFloat(containerStyle.paddingBottom);\n                            naturalHeight = maxCardHeight + toolbarHeight + paginationHeight + containerPadding;\n                            console.info(`[ACU] : maxCard=${maxCardHeight}, toolbar=${toolbarHeight}, pagination=${paginationHeight}, padding=${containerPadding}`);\n                        }\n                        else {\n                            naturalHeight = dataAreaRef.value.scrollHeight;\n                        }\n                    }\n                    else {\n                        // \n                        const contentEl = dataAreaRef.value.querySelector('.acu-panel-content');\n                        if (contentEl) {\n                            const firstChild = contentEl.firstElementChild;\n                            if (firstChild) {\n                                naturalHeight = firstChild.offsetHeight + 20;\n                            }\n                            else {\n                                naturalHeight = contentEl.scrollHeight;\n                            }\n                        }\n                        else {\n                            naturalHeight = dataAreaRef.value.scrollHeight;\n                        }\n                    }\n                    // 7.  minHeight maxHeight\n                    const finalHeight = Math.min(maxHeight, Math.max(minHeight, naturalHeight));\n                    // 8. \n                    //  auto \n                    // \n                    //  Dashboard auto\n                    const isSpecialHorizontal = isHorizontal && dataAreaRef.value.querySelector('.acu-cards-container');\n                    if (!hasRelationshipGraph && !isSpecialHorizontal) {\n                        dataAreaRef.value.style.height = '';\n                        // \n                        const actualHeight = dataAreaRef.value.offsetHeight;\n                        panelHeight.value = actualHeight;\n                        console.info(`[ACU] (Auto): actual=${actualHeight}, horizontal=${isHorizontal}`);\n                        emit('height-change', actualHeight);\n                    }\n                    else {\n                        dataAreaRef.value.style.height = `${finalHeight}px`;\n                        panelHeight.value = finalHeight;\n                        console.info(`[ACU] (Fixed): natural=${naturalHeight}, max=${maxHeight}, final=${finalHeight}, horizontal=${isHorizontal}`);\n                        emit('height-change', finalHeight);\n                    }\n                });\n            }, 50);\n        };\n        // ============================================================\n        //  Pointer Events API + setPointerCapture\n        // ============================================================\n        /**\n         * \n         *  jQuery $('body').on() \n         */\n        function startWidthResize(e) {\n            // \n            if (e.button !== 0)\n                return;\n            e.preventDefault();\n            e.stopPropagation();\n            const handleEl = resizeHandleRef.value;\n            if (!handleEl || !panelRef.value)\n                return;\n            const startX = e.clientX;\n            const rect = panelRef.value.getBoundingClientRect();\n            const startWidth = rect.width;\n            const handlePointerMove = (moveE) => {\n                const originalEvent = moveE.originalEvent;\n                const dx = originalEvent.clientX - startX;\n                let newWidth = startWidth + dx;\n                // \n                const minWidth = 300;\n                const parentWidth = window.parent?.innerWidth ?? window.innerWidth;\n                const maxWidth = parentWidth - 10;\n                if (newWidth < minWidth)\n                    newWidth = minWidth;\n                if (newWidth > maxWidth)\n                    newWidth = maxWidth;\n                windowConfig.value.width = newWidth;\n                emit('width-change', newWidth);\n            };\n            const handlePointerUp = () => {\n                //  jQuery $('body')  body\n                $('body').off('pointermove', handlePointerMove);\n                $('body').off('pointerup', handlePointerUp);\n                console.info('[ACU MainPanel] :', windowConfig.value.width);\n            };\n            //  jQuery  body $  window.parent.$\n            $('body').on('pointermove', handlePointerMove);\n            $('body').on('pointerup', handlePointerUp);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        const hideContent = () => {\n            emit('hide-content');\n        };\n        // ============================================================\n        // \n        // ============================================================\n        __expose({\n            /**  */\n            getPanelElement: () => panelRef.value,\n            /**  */\n            getDataAreaElement: () => dataAreaRef.value,\n            /**  */\n            getCurrentHeight: () => panelHeight.value,\n            /**  */\n            resetPosition: () => {\n                windowConfig.value = {\n                    width: 400,\n                    left: '50%',\n                    bottom: '50%',\n                    isCentered: true,\n                };\n            },\n            /**  */\n            exitCenteredMode: () => {\n                if (!windowConfig.value.isCentered)\n                    return;\n                const parentWidth = window.parent?.innerWidth ?? window.innerWidth;\n                windowConfig.value = {\n                    ...windowConfig.value,\n                    isCentered: false,\n                    // \n                    bottom: typeof windowConfig.value.bottom === 'number' && windowConfig.value.bottom >= 50\n                        ? windowConfig.value.bottom\n                        : 100,\n                    left: typeof windowConfig.value.left === 'number' ? windowConfig.value.left : parentWidth / 2 - 200,\n                };\n                console.info('[ACU MainPanel] ');\n            },\n            /**  */\n            resetHeight,\n            /**  */\n            recalculateHeight,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                ref_key: \"panelRef\",\n                ref: panelRef,\n                class: _normalizeClass([\"acu-wrapper\", [\n                        `acu-theme-${__props.theme}`,\n                        `acu-layout-${__props.layout}`,\n                        {\n                            collapsed: __props.isCollapsed,\n                            pinned: __props.isPinned,\n                            'acu-centered-mode': _unref(windowConfig).isCentered,\n                        },\n                    ]])\n            }, [\n                _createCommentVNode(\" 1.  \"),\n                _createElementVNode(\"div\", {\n                    ref_key: \"dataAreaRef\",\n                    ref: dataAreaRef,\n                    class: _normalizeClass([\"acu-data-display\", {\n                            visible: !__props.isContentHidden,\n                            'acu-layout-horizontal': __props.layout === 'horizontal',\n                            'acu-layout-vertical': __props.layout === 'vertical',\n                        }])\n                }, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _renderSlot(_ctx.$slots, \"default\")\n                    ])\n                ], 2 /* CLASS */),\n                _createCommentVNode(\" 2.  \"),\n                _createCommentVNode(\"  onMounted  iframe  \"),\n                (!__props.lockPanel)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        ref_key: \"resizeHandleRef\",\n                        ref: resizeHandleRef,\n                        class: \"acu-resize-handle\"\n                    }, null, 512 /* NEED_PATCH */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" 3.  \"),\n                _createCommentVNode(\"  onMounted  \"),\n                _createElementVNode(\"div\", {\n                    ref_key: \"navContainerRef\",\n                    ref: navContainerRef,\n                    class: _normalizeClass([\"acu-nav-container\", { 'acu-locked': __props.lockPanel }])\n                }, [\n                    _createCommentVNode(\" Tab  ( slot TabBar  .acu-nav-tabs-area) \"),\n                    _renderSlot(_ctx.$slots, \"tabs\"),\n                    _createCommentVNode(\"  \"),\n                    _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"acu-nav-separator\" }, null, -1 /* CACHED */)),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createCommentVNode(\"  \"),\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(visibleButtons.value, (btn) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: btn.id,\n                                class: \"acu-action-btn-wrapper\"\n                            }, [\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-action-btn\", getButtonClass(btn.id)]),\n                                    title: getButtonTitle(btn.id),\n                                    style: _normalizeStyle(getButtonStyle(btn.id)),\n                                    onClick: _withModifiers(($event) => (handleButtonClick(btn.id)), [\"stop\"]),\n                                    onMousedown: _withModifiers(($event) => (startLongPress(btn.id)), [\"stop\"]),\n                                    onMouseup: _withModifiers(endLongPress, [\"stop\"]),\n                                    onMouseleave: endLongPress,\n                                    onTouchstartPassive: _withModifiers(($event) => (startLongPress(btn.id)), [\"stop\"]),\n                                    onTouchend: _withModifiers(endLongPress, [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(['fa-solid', btn.icon])\n                                    }, null, 2 /* CLASS */),\n                                    _createCommentVNode(\"  \"),\n                                    (hasSecondary(btn.id))\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 46 /* CLASS, STYLE, PROPS, NEED_HYDRATION */, _hoisted_3),\n                                _createCommentVNode(\"  \"),\n                                _createVNode(_Transition, { name: \"popup\" }, {\n                                    default: _withCtx(() => [\n                                        (popupButtonId.value === btn.id && getSecondaryId(btn.id))\n                                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                                key: 0,\n                                                class: \"acu-action-btn acu-popup-btn\",\n                                                title: getButtonLabel(getSecondaryId(btn.id)),\n                                                onClick: _withModifiers(($event) => (handleSecondaryClick(btn.id)), [\"stop\"])\n                                            }, [\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass(['fa-solid', getButtonIcon(getSecondaryId(btn.id))])\n                                                }, null, 2 /* CLASS */)\n                                            ], 8 /* PROPS */, _hoisted_5))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _: 2 /* DYNAMIC */\n                                }, 1024 /* DYNAMIC_SLOTS */)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */)),\n                        _createCommentVNode(\"  \"),\n                        (hasHiddenButtons.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-action-btn acu-more-btn\", { active: isHiddenPopupVisible.value }]),\n                                    title: \"\",\n                                    onClick: _withModifiers(toggleHiddenPopup, [\"stop\"])\n                                }, [...(_cache[1] || (_cache[1] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-chevron-up\" }, null, -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  actions-area  action  \"),\n                        _createVNode(HiddenButtonsPopup, {\n                            visible: isHiddenPopupVisible.value,\n                            buttons: hiddenButtons.value,\n                            \"is-pinned\": __props.isPinned,\n                            onClose: _cache[0] || (_cache[0] = ($event) => (isHiddenPopupVisible.value = false)),\n                            onButtonClick: handleHiddenButtonClick\n                        }, null, 8 /* PROPS */, [\"visible\", \"buttons\", \"is-pinned\"]),\n                        _createCommentVNode(\" Tab actions-area  action  \"),\n                        _renderSlot(_ctx.$slots, \"tabs-popup\")\n                    ])\n                ], 2 /* CLASS */)\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"acu-tab-bar\" };\nconst _hoisted_2 = [\"title\", \"draggable\", \"onClick\", \"onDragstart\", \"onDragover\", \"onDrop\"];\nimport { computed, ref, watch } from 'vue';\nimport { useDataStore } from '../stores/useDataStore';\nimport { getSmartTabIcon, TAB_DASHBOARD, TAB_OPTIONS, TAB_RELATIONSHIP_GRAPH, useUIStore } from '../stores/useUIStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TabBar',\n    props: {\n        tabs: {},\n        activeTab: {},\n        showDashboard: { type: Boolean, default: true },\n        hasOptionsTabs: { type: Boolean, default: false },\n        hasRelationshipGraph: { type: Boolean, default: false },\n        isEditingOrder: { type: Boolean, default: false },\n        gridColumns: { default: 'repeat(auto-fill, minmax(90px, 1fr))' }\n    },\n    emits: [\"tab-change\", \"order-change\", \"exit-editing\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * TabBar.vue - \n         *  Tab \n         *\n         *  useUIStore  visibleTabs  Tab\n         * -  visibleTabs  Tab\n         * -  visibleTabs \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Store\n        // ============================================================\n        const uiStore = useUIStore();\n        const dataStore = useDataStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  Tab  () */\n        const sortedTabs = ref([]);\n        /**\n         *  Tab (//)\n         */\n        function isSpecialTab(tabId) {\n            return tabId === TAB_DASHBOARD || tabId === TAB_OPTIONS || tabId === TAB_RELATIONSHIP_GRAPH;\n        }\n        /**\n         *  Tab \n         * visibleTabs  (name) Tab  ID\n         * @param nameOrId  Tab  ID\n         */\n        function createTabObject(nameOrId) {\n            //  Tab  ID\n            if (nameOrId === TAB_DASHBOARD) {\n                return { id: TAB_DASHBOARD, name: '', icon: 'fas fa-home' };\n            }\n            if (nameOrId === TAB_RELATIONSHIP_GRAPH) {\n                return { id: TAB_RELATIONSHIP_GRAPH, name: '', icon: 'fas fa-project-diagram' };\n            }\n            if (nameOrId === TAB_OPTIONS) {\n                return { id: TAB_OPTIONS, name: '', icon: 'fas fa-sliders-h' };\n            }\n            // \n            return sortedTabs.value.find(t => t.name === nameOrId);\n        }\n        /**\n         *  Tab \n         * -  visibleTabs  ->  -> \n         * -  visibleTabs \n         */\n        const allVisibleTabs = computed(() => {\n            const visibleTabs = uiStore.visibleTabs;\n            // 1. \n            if (!visibleTabs || visibleTabs.length === 0) {\n                const tabs = [];\n                // \n                if (props.showDashboard) {\n                    tabs.push({ id: TAB_DASHBOARD, name: '', icon: 'fas fa-home' });\n                }\n                // \n                tabs.push(...sortedTabs.value);\n                // \n                if (props.hasRelationshipGraph) {\n                    tabs.push({ id: TAB_RELATIONSHIP_GRAPH, name: '', icon: 'fas fa-project-diagram' });\n                }\n                // \n                if (props.hasOptionsTabs) {\n                    tabs.push({ id: TAB_OPTIONS, name: '', icon: 'fas fa-sliders-h' });\n                }\n                return tabs;\n            }\n            // 2. \n            return visibleTabs\n                .map(tabId => createTabObject(tabId))\n                .filter((tab) => {\n                //  undefined  Tab\n                if (!tab)\n                    return false;\n                if (tab.id === TAB_DASHBOARD && !props.showDashboard)\n                    return false;\n                if (tab.id === TAB_RELATIONSHIP_GRAPH && !props.hasRelationshipGraph)\n                    return false;\n                if (tab.id === TAB_OPTIONS && !props.hasOptionsTabs)\n                    return false;\n                return true;\n            });\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         *  Tab \n         * @param tabName Tab \n         */\n        function hasTabIssues(tabName) {\n            return dataStore.hasTableIssues(tabName);\n        }\n        /**\n         *  Tab  AI \n         * @param tabName Tab \n         */\n        function hasTabAiChanges(tabName) {\n            return dataStore.hasTableAiChanges(tabName);\n        }\n        /**\n         *  Tab  tooltip\n         * @param tab Tab \n         */\n        function getTabTooltip(tab) {\n            if (hasTabIssues(tab.name)) {\n                const issues = dataStore.getTableIssues(tab.name);\n                return `  ${issues.length} `;\n            }\n            return tab.name;\n        }\n        /**  Tab */\n        let draggedTab = null;\n        /**  Tab */\n        let dropTargetTab = null;\n        // ============================================================\n        //  props \n        // ============================================================\n        watch(() => props.tabs, newTabs => {\n            sortedTabs.value = [...newTabs];\n        }, { immediate: true, deep: true });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         *  Tab\n         */\n        const selectTab = (tabId) => {\n            //  Tab\n            if (props.isEditingOrder)\n                return;\n            emit('tab-change', tabId);\n        };\n        /**\n         * \n         */\n        const exitEditingOrder = () => {\n            emit('exit-editing');\n        };\n        // ============================================================\n        //  ( HTML5 Drag & Drop)\n        // ============================================================\n        const handleDragStart = (e, tab) => {\n            if (!props.isEditingOrder) {\n                e.preventDefault();\n                return;\n            }\n            draggedTab = tab;\n            if (e.dataTransfer) {\n                e.dataTransfer.effectAllowed = 'move';\n                e.dataTransfer.setData('text/plain', tab.id);\n            }\n            // \n            e.target.classList.add('dragging');\n        };\n        const handleDragOver = (e, tab) => {\n            if (!props.isEditingOrder || !draggedTab)\n                return;\n            e.preventDefault();\n            dropTargetTab = tab;\n        };\n        const handleDrop = (e, tab) => {\n            if (!props.isEditingOrder || !draggedTab)\n                return;\n            e.preventDefault();\n            const fromIndex = sortedTabs.value.findIndex(t => t.id === draggedTab.id);\n            const toIndex = sortedTabs.value.findIndex(t => t.id === tab.id);\n            if (fromIndex !== -1 && toIndex !== -1 && fromIndex !== toIndex) {\n                // \n                const [removed] = sortedTabs.value.splice(fromIndex, 1);\n                sortedTabs.value.splice(toIndex, 0, removed);\n                // \n                emit('order-change', sortedTabs.value.map(t => t.id));\n            }\n            draggedTab = null;\n            dropTargetTab = null;\n        };\n        const handleDragEnd = (e) => {\n            e.target.classList.remove('dragging');\n            draggedTab = null;\n            dropTargetTab = null;\n        };\n        // ============================================================\n        // \n        // ============================================================\n        __expose({\n            /**  */\n            getCurrentOrder: () => sortedTabs.value.map(t => t.id),\n            /**  Tab */\n            getVisibleTabs: () => allVisibleTabs.value.map(t => t.id),\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"acu-order-controls\", { visible: __props.isEditingOrder }])\n                }, [\n                    _createElementVNode(\"span\", null, [\n                        _cache[1] || (_cache[1] = _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }, null, -1 /* CACHED */)),\n                        _cache[2] || (_cache[2] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-order-done-btn\",\n                            onClick: exitEditingOrder\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ], 2 /* CLASS */),\n                _createCommentVNode(\" Tab  \"),\n                _createElementVNode(\"div\", {\n                    class: \"acu-nav-tabs-area\",\n                    style: _normalizeStyle({ '--acu-nav-cols': __props.gridColumns })\n                }, [\n                    _createCommentVNode(\"  Tab  \"),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(allVisibleTabs.value, (tab) => {\n                        return (_openBlock(), _createElementBlock(\"button\", {\n                            key: tab.id,\n                            class: _normalizeClass([\"acu-nav-btn\", {\n                                    active: __props.activeTab === tab.id,\n                                    'drag-handle': __props.isEditingOrder,\n                                    'has-issues': !isSpecialTab(tab.id) && hasTabIssues(tab.name),\n                                    'has-ai-changes': !isSpecialTab(tab.id) && !hasTabIssues(tab.name) && hasTabAiChanges(tab.name),\n                                }]),\n                            title: getTabTooltip(tab),\n                            draggable: __props.isEditingOrder,\n                            onClick: _withModifiers(($event) => (selectTab(tab.id)), [\"stop\"]),\n                            onDragstart: ($event) => (handleDragStart($event, tab)),\n                            onDragover: _withModifiers(($event) => (handleDragOver($event, tab)), [\"prevent\"]),\n                            onDrop: ($event) => (handleDrop($event, tab)),\n                            onDragend: handleDragEnd\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(tab.icon || _unref(getSmartTabIcon)(tab.name))\n                            }, null, 2 /* CLASS */),\n                            _createElementVNode(\"span\", null, _toDisplayString(tab.name), 1 /* TEXT */)\n                        ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_2));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ], 4 /* STYLE */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TabBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TabBar.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/* unplugin-vue-components disabled */import script from \"./Badge.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Badge.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Badge',\n    props: {\n        value: {},\n        type: { default: 'default' }\n    },\n    setup(__props) {\n        /**\n         * Badge \n         * \n         *\n         * \n         * - default: \n         * - level:  ( Lv.)\n         * - percent:  ( %)\n         * - male/female: \n         * - number: \n         * - success/warning/danger: \n         */\n        const props = __props;\n        /**\n         * \n         */\n        const detectedType = computed(() => {\n            // \n            if (props.type !== 'default')\n                return props.type;\n            const value = String(props.value);\n            // : Lv.  LV.  lv.\n            if (/Lv\\.?\\s*\\d+/i.test(value))\n                return 'level';\n            // : %\n            if (/\\d+(\\.\\d+)?%/.test(value))\n                return 'percent';\n            //  ()\n            if (value === '')\n                return 'male';\n            if (value === '')\n                return 'female';\n            //  ( Primary )\n            if (/^[+-]?\\d+(\\.\\d+)?$/.test(value.trim()))\n                return 'number';\n            // \n            return 'default';\n        });\n        /**\n         *  CSS \n         */\n        const badgeClass = computed(() => {\n            const type = detectedType.value;\n            // \n            if (['primary', 'secondary', 'outline', 'outline-primary'].includes(type)) {\n                return `acu-badge-${type}`;\n            }\n            //  ( SCSS )\n            return `acu-badge-${type}`;\n        });\n        /**\n         * \n         */\n        const displayValue = computed(() => {\n            const val = props.value;\n            if (val === null || val === undefined || val === '') {\n                return '-';\n            }\n            return String(val);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n                class: _normalizeClass([\"acu-badge\", badgeClass.value])\n            }, _toDisplayString(displayValue.value), 3 /* TEXT, CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./InlineEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./InlineEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { vModelText as _vModelText, withModifiers as _withModifiers, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport { nextTick, onBeforeUnmount, onMounted, ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'InlineEditor',\n    props: {\n        value: {},\n        minHeight: { default: 24 }\n    },\n    emits: [\"save\", \"cancel\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * InlineEditor \n         * \n         *\n         * \n         * - \n         * -  scrollHeight\n         * - Escape \n         * - Enter Shift+Enter \n         * - \n         * - \n         * -  pointerdown/mousedown \n         */\n        const props = __props;\n        const emit = __emit;\n        // \n        const textareaRef = ref();\n        // \n        const localValue = ref(String(props.value));\n        // \n        const hasSaved = ref(false);\n        // \n        const hasTextSelection = ref(false);\n        /**\n         * \n         */\n        const checkTextSelection = () => {\n            const selection = window.getSelection();\n            hasTextSelection.value = selection !== null && selection.toString().length > 0;\n        };\n        /**\n         *  scrollHeight\n         *  6.4.1.ts  autoResize \n         *\n         *  maxHeight textarea \n         *  textarea\n         */\n        const autoResize = () => {\n            const textarea = textareaRef.value;\n            if (!textarea)\n                return;\n            // \n            const currentHeight = textarea.offsetHeight;\n            //  0  scrollHeight\n            //  visibility: hidden \n            const originalVisibility = textarea.style.visibility;\n            textarea.style.visibility = 'hidden';\n            textarea.style.height = '0px';\n            // \n            const scrollHeight = textarea.scrollHeight;\n            const newHeight = Math.max(scrollHeight, props.minHeight);\n            // \n            textarea.style.visibility = originalVisibility;\n            // \n            if (newHeight === currentHeight && currentHeight > 0) {\n                textarea.style.height = `${currentHeight}px`;\n                return;\n            }\n            // \n            textarea.style.height = `${newHeight}px`;\n        };\n        /**\n         * \n         */\n        watch(localValue, () => {\n            nextTick(autoResize);\n        });\n        /**\n         * \n         * \n         */\n        const handleSave = () => {\n            if (hasSaved.value)\n                return;\n            hasSaved.value = true;\n            // \n            const originalValue = String(props.value);\n            if (localValue.value !== originalValue) {\n                emit('save', localValue.value);\n            }\n            else {\n                // \n                emit('cancel');\n            }\n        };\n        /**\n         * \n         */\n        const handleKeydown = (e) => {\n            if (e.key === 'Escape') {\n                // Escape \n                e.preventDefault();\n                e.stopPropagation();\n                hasSaved.value = true; //  blur \n                emit('cancel');\n            }\n            else if (e.key === 'Enter' && !e.shiftKey) {\n                // Enter  Shift+Enter\n                e.preventDefault();\n                e.stopPropagation();\n                handleSave();\n            }\n            // Shift+Enter \n        };\n        /**\n         *  touchstart \n         * \n         */\n        const handleTouchStart = (e) => {\n            // \n            e.stopPropagation();\n            // \n        };\n        /**\n         *  touchmove \n         *  textarea \n         */\n        const handleTouchMove = (e) => {\n            // \n            checkTextSelection();\n            if (hasTextSelection.value) {\n                // \n                // \n                e.stopPropagation();\n                return;\n            }\n            //  textarea \n            e.stopPropagation();\n            //  textarea \n        };\n        /**\n         * \n         */\n        onMounted(() => {\n            nextTick(() => {\n                const textarea = textareaRef.value;\n                if (!textarea)\n                    return;\n                //  scrollHeight\n                // \n                const scrollHeight = textarea.scrollHeight;\n                const initialHeight = Math.max(scrollHeight, props.minHeight);\n                textarea.style.height = `${initialHeight}px`;\n                // \n                textarea.focus();\n                const len = textarea.value.length;\n                textarea.setSelectionRange(len, len);\n            });\n            //  selectionchange \n            document.addEventListener('selectionchange', checkTextSelection);\n        });\n        /**\n         * \n         */\n        onBeforeUnmount(() => {\n            document.removeEventListener('selectionchange', checkTextSelection);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"acu-inline-editor\",\n                onClick: _cache[5] || (_cache[5] = _withModifiers(() => { }, [\"stop\"])),\n                onMousedown: _cache[6] || (_cache[6] = _withModifiers(() => { }, [\"stop\"])),\n                onPointerdown: _cache[7] || (_cache[7] = _withModifiers(() => { }, [\"stop\"]))\n            }, [\n                _withDirectives(_createElementVNode(\"textarea\", {\n                    ref_key: \"textareaRef\",\n                    ref: textareaRef,\n                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localValue).value = $event)),\n                    class: \"acu-edit-textarea\",\n                    onBlur: handleSave,\n                    onKeydown: handleKeydown,\n                    onClick: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"])),\n                    onMousedown: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"stop\"])),\n                    onPointerdown: _cache[3] || (_cache[3] = _withModifiers(() => { }, [\"stop\"])),\n                    onTouchstart: handleTouchStart,\n                    onTouchmove: handleTouchMove,\n                    onTouchend: _cache[4] || (_cache[4] = _withModifiers(() => { }, [\"stop\"]))\n                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                    [_vModelText, localValue.value]\n                ])\n            ], 32 /* NEED_HYDRATION */));\n        };\n    }\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, Fragment as _Fragment, withModifiers as _withModifiers, renderList as _renderList } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"acu-card-header\"\n};\nconst _hoisted_2 = {\n    key: 0,\n    class: \"acu-card-index\"\n};\nconst _hoisted_3 = {\n    key: 0,\n    class: \"fas fa-lock acu-title-lock-icon\"\n};\nconst _hoisted_4 = {\n    key: 4,\n    class: \"acu-history-btns\"\n};\nconst _hoisted_5 = [\"disabled\"];\nconst _hoisted_6 = { class: \"acu-card-main-grid\" };\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = { class: \"acu-grid-label\" };\nconst _hoisted_9 = { class: \"acu-grid-value\" };\nconst _hoisted_10 = {\n    key: 0,\n    class: \"fas fa-lock acu-lock-icon\"\n};\nconst _hoisted_11 = {\n    key: 0,\n    class: \"acu-card-full-area\"\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = { class: \"acu-full-label\" };\nconst _hoisted_14 = { class: \"acu-full-value\" };\nconst _hoisted_15 = { key: 1 };\nconst _hoisted_16 = {\n    key: 0,\n    class: \"fas fa-lock acu-lock-icon\"\n};\nconst _hoisted_17 = { class: \"acu-card-body\" };\nconst _hoisted_18 = [\"onClick\"];\nconst _hoisted_19 = { class: \"acu-card-label\" };\nconst _hoisted_20 = { class: \"acu-card-value\" };\nconst _hoisted_21 = {\n    key: 0,\n    class: \"fas fa-lock acu-lock-icon\"\n};\nconst _hoisted_22 = { class: \"acu-pull-icon\" };\nconst _hoisted_23 = { class: \"acu-pull-text\" };\nconst _hoisted_24 = {\n    key: 3,\n    class: \"acu-stamp-delete\"\n};\nimport { computed, ref, watch, watchEffect } from 'vue';\nimport { useCardGestures, useCellLock, useIsMobile, useRowHistory, useSelectionGuardEnhanced } from '../composables';\nimport { toast } from '../composables/useToast';\nimport { useDataStore } from '../stores/useDataStore';\nimport { useUIStore } from '../stores/useUIStore';\nimport Badge from './Badge.vue';\nimport InlineEditor from './InlineEditor.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DataCard',\n    props: {\n        data: {},\n        tableId: {},\n        tableName: {},\n        isChanged: { type: Boolean, default: false },\n        layout: { default: 'vertical' },\n        viewMode: { default: 'card' },\n        showIndex: { type: Boolean, default: true },\n        showHeader: { type: Boolean, default: true },\n        titleColIndex: { default: 1 },\n        showHistoryButton: { type: Boolean, default: true },\n        customHighlights: { default: undefined },\n        allowEdit: { type: Boolean, default: true }\n    },\n    emits: [\"cellClick\", \"insertRow\", \"toggleDelete\", \"contextMenu\", \"showHistory\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * DataCard  \n         *\n         * \n         * - /\n         * - \n         * - \n         * - \n         * - -  VueUse useSwipe\n         * - \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // \n        // ============================================================\n        const cardRef = ref();\n        const editingCell = ref(null);\n        const isUndoing = ref(false);\n        const dataStore = useDataStore();\n        const uiStore = useUIStore();\n        const cellLock = useCellLock();\n        const rowHistory = useRowHistory();\n        //  DOM refs iframe \n        const pullTopRef = ref();\n        const pullBottomRef = ref();\n        const swipeLeftRef = ref();\n        const swipeRightRef = ref();\n        // \n        const { isMobile } = useIsMobile();\n        // \n        const showEdgeHint = ref(false);\n        const edgeHintTimer = ref(null);\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const rowKey = computed(() => `${props.tableName}-row-${props.data.index}`);\n        /**  */\n        const isDeleting = computed(() => dataStore.pendingDeletes.has(rowKey.value));\n        /**  */\n        const titleCell = computed(() => {\n            if (props.titleColIndex >= 0 && props.data.cells.length > props.titleColIndex) {\n                return props.data.cells[props.titleColIndex];\n            }\n            return null;\n        });\n        /** 0 */\n        const displayCells = computed(() => {\n            //  0  ( null )\n            let cells = props.data.cells.filter((_, idx) => idx > 0);\n            // \n            if (props.showHeader && titleCell.value && props.titleColIndex > 0) {\n                cells = cells.filter((_, idx) => idx + 1 !== props.titleColIndex); // +1 0\n            }\n            return cells;\n        });\n        /**  */\n        const isFullWidthCell = (cell) => {\n            const value = String(cell.value);\n            const key = cell.key.toLowerCase();\n            //  50 \n            return (value.length > 50 ||\n                key.includes('') ||\n                key.includes('') ||\n                key.includes('') ||\n                key.includes('') ||\n                key.includes('detail') ||\n                key.includes('description'));\n        };\n        /** Grid  */\n        const gridCells = computed(() => displayCells.value.filter(cell => !isFullWidthCell(cell)));\n        /** Full-Width  */\n        const fullWidthCells = computed(() => displayCells.value.filter(cell => isFullWidthCell(cell)));\n        /**  fallback */\n        const currentRowLockKey = computed(() => {\n            const headers = props.data.cells.map(c => c.key);\n            const rowData = props.data.cells.map(c => String(c.value ?? ''));\n            return cellLock.getRowKey(props.tableName, rowData, headers, props.data.index);\n        });\n        /**  */\n        const isCurrentRowLocked = computed(() => {\n            if (!uiStore.isLockEditMode)\n                return false;\n            const key = currentRowLockKey.value;\n            if (!key)\n                return false;\n            return cellLock.isRowLockedPending(props.tableName, key);\n        });\n        /**  */\n        const isTitleLocked = computed(() => {\n            if (!uiStore.isLockEditMode || !titleCell.value)\n                return false;\n            const key = currentRowLockKey.value;\n            if (!key)\n                return false;\n            return cellLock.isCellLockedPending(props.tableName, key, titleCell.value.key);\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         *  CSS class\n         * @param colIndex \n         * @returns CSS class \n         */\n        function getCellChangeClass(colIndex) {\n            // 1. \n            if (props.customHighlights?.has(colIndex)) {\n                return {\n                    'acu-cell-changed': true,\n                    'acu-cell-changed-manual': true,\n                };\n            }\n            // 2.  store \n            const cellId = `${props.tableName}-${props.data.index}-${colIndex}`;\n            const changeType = dataStore.getCellChangeType(cellId);\n            return {\n                'acu-cell-changed': changeType !== null,\n                'acu-cell-changed-manual': changeType === 'manual',\n                'acu-cell-changed-ai': changeType === 'ai',\n            };\n        }\n        /**\n         *  CSS class\n         * AI\n         */\n        const rowHighlightClass = computed(() => {\n            const changeType = dataStore.getRowChangeType(props.tableName, props.data.index, props.data.cells.length);\n            // \n            if (changeType === 'manual') {\n                return 'acu-highlight-changed acu-highlight-manual';\n            }\n            else if (changeType === 'ai') {\n                return 'acu-highlight-changed acu-highlight-ai';\n            }\n            return '';\n        });\n        // ============================================================\n        //  (VueUse )\n        // ============================================================\n        /**  */\n        const { isSelecting, shouldBlockInteraction, wasSelecting } = useSelectionGuardEnhanced();\n        /**  */\n        const handleInsertRow = () => {\n            console.info('[ACU DataCard] ');\n            emit('insertRow');\n        };\n        const handleToggleDelete = () => {\n            console.info('[ACU DataCard] ', { isDeleting: isDeleting.value });\n            emit('toggleDelete');\n        };\n        /**  composable */\n        const { isSwiping, gestureType, atStart, atEnd, checkScrollEdge, lengthX, lengthY } = useCardGestures(cardRef, {\n            layout: props.layout,\n            horizontalThreshold: 50, // \n            verticalThreshold: 40, // \n            edgeThreshold: 10,\n            onInsertRow: handleInsertRow,\n            onToggleDelete: handleToggleDelete,\n        });\n        /**  */\n        const pullHeight = computed(() => {\n            if (props.layout !== 'horizontal')\n                return 0;\n            const absY = Math.abs(lengthY?.value || 0);\n            return Math.min(absY * 0.6, 120);\n        });\n        const pullOpacity = computed(() => {\n            return Math.min(pullHeight.value / 80, 1);\n        });\n        /**  */\n        const swipeWidth = computed(() => {\n            if (props.layout !== 'vertical')\n                return 0;\n            const absX = Math.abs(lengthX?.value || 0);\n            return Math.min(absX * 0.7, 120);\n        });\n        const swipeOpacity = computed(() => {\n            return Math.min(swipeWidth.value / 60, 1);\n        });\n        // ============================================================\n        //  iframe  DOM \n        // Vue 3  (:style)  +  iframe \n        //  watchEffect  DOM  style \n        // ============================================================\n        // \n        watchEffect(() => {\n            if (pullTopRef.value) {\n                pullTopRef.value.style.height = `${pullHeight.value}px`;\n                pullTopRef.value.style.opacity = String(pullOpacity.value);\n            }\n            if (pullBottomRef.value) {\n                pullBottomRef.value.style.height = `${pullHeight.value}px`;\n                pullBottomRef.value.style.opacity = String(pullOpacity.value);\n            }\n        });\n        // \n        watchEffect(() => {\n            if (swipeLeftRef.value) {\n                swipeLeftRef.value.style.width = `${swipeWidth.value}px`;\n                swipeLeftRef.value.style.opacity = String(swipeOpacity.value);\n            }\n            if (swipeRightRef.value) {\n                swipeRightRef.value.style.width = `${swipeWidth.value}px`;\n                swipeRightRef.value.style.opacity = String(swipeOpacity.value);\n            }\n        });\n        // \n        watch([atStart, atEnd], ([start, end]) => {\n            if (isMobile.value && (start || end)) {\n                // \n                if (edgeHintTimer.value) {\n                    clearTimeout(edgeHintTimer.value);\n                }\n                showEdgeHint.value = true;\n                // 2\n                edgeHintTimer.value = setTimeout(() => {\n                    showEdgeHint.value = false;\n                }, 2000);\n            }\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        const handleScroll = (e) => {\n            checkScrollEdge(e);\n        };\n        /**\n         *  CSS class\n         * @param colIndex \n         */\n        function getCellLockClass(colIndex) {\n            // \n            if (!uiStore.isLockEditMode) {\n                return {};\n            }\n            const cell = props.data.cells[colIndex];\n            if (!cell)\n                return {};\n            const rowKey = currentRowLockKey.value;\n            if (!rowKey)\n                return {};\n            const isLocked = cellLock.isCellLockedPending(props.tableName, rowKey, cell.key);\n            const isRowLocked = cellLock.isRowLockedPending(props.tableName, rowKey);\n            return {\n                'acu-cell-locked': isLocked || isRowLocked,\n                'acu-cell-row-locked': isRowLocked,\n            };\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const handleRowLock = () => {\n            const rowKey = currentRowLockKey.value;\n            if (!rowKey) {\n                console.warn('[ACU] ');\n                return;\n            }\n            const headers = props.data.cells.map(c => c.key);\n            const rowData = props.data.cells.map(c => String(c.value ?? ''));\n            const isNowLocked = cellLock.toggleRowLock(props.tableName, rowKey, headers, rowData);\n            console.info(`[ACU] : ${rowKey} -> ${isNowLocked ? '' : ''}`);\n        };\n        /**\n         * \n         */\n        const handleCellClick = (colIndex) => {\n            // \n            if (shouldBlockInteraction() || wasSelecting.value) {\n                console.info('[ACU] ');\n                return;\n            }\n            // \n            if (isSwiping.value) {\n                console.info('[ACU] ');\n                return;\n            }\n            // \n            if (isDeleting.value) {\n                console.info('[ACU] ');\n                return;\n            }\n            // \n            if (!props.allowEdit) {\n                emit('cellClick', props.data.index, colIndex);\n                return;\n            }\n            // ========================================\n            // \n            // ========================================\n            if (uiStore.isLockEditMode) {\n                const cell = props.data.cells[colIndex];\n                if (!cell)\n                    return;\n                const rowKey = currentRowLockKey.value;\n                if (!rowKey) {\n                    console.warn('[ACU] ');\n                    return;\n                }\n                // \n                const cellValue = String(cell.value ?? '');\n                const isNowLocked = cellLock.toggleCellLock(props.tableName, rowKey, cell.key, cellValue);\n                console.info(`[ACU] : ${cell.key} -> ${isNowLocked ? '' : ''}`);\n                return;\n            }\n            // ========================================\n            // \n            // ========================================\n            editingCell.value = colIndex;\n            emit('cellClick', props.data.index, colIndex);\n        };\n        /**\n         * \n         * - \n         * - \n         */\n        const handleTitleClick = () => {\n            if (props.titleColIndex < 0 || !titleCell.value)\n                return;\n            // \n            if (isDeleting.value) {\n                console.info('[ACU] ');\n                return;\n            }\n            // \n            if (!props.allowEdit) {\n                emit('cellClick', props.data.index, props.titleColIndex);\n                return;\n            }\n            // ========================================\n            // \n            // ========================================\n            if (uiStore.isLockEditMode) {\n                const rowKey = currentRowLockKey.value;\n                if (!rowKey) {\n                    console.warn('[ACU] ');\n                    return;\n                }\n                const cellValue = String(titleCell.value.value ?? '');\n                const isNowLocked = cellLock.toggleCellLock(props.tableName, rowKey, titleCell.value.key, cellValue);\n                console.info(`[ACU] : ${titleCell.value.key} -> ${isNowLocked ? '' : ''}`);\n                return;\n            }\n            // ========================================\n            // \n            // ========================================\n            console.info('[ACU DataCard]  colIndex:', props.titleColIndex);\n            editingCell.value = props.titleColIndex;\n            emit('cellClick', props.data.index, props.titleColIndex);\n        };\n        /**\n         * \n         */\n        const handleCellSave = (colIndex, value) => {\n            //  store  ( tableName  tableId processToTableData  sheet.name)\n            dataStore.updateCell(props.tableName, props.data.index, colIndex, value);\n            // \n            //  API  AI \n            const cell = props.data.cells[colIndex];\n            const rowKey = currentRowLockKey.value;\n            if (cell && rowKey) {\n                // \n                if (cellLock.isCellLocked(props.tableName, rowKey, cell.key)) {\n                    cellLock.updateLockedValue(props.tableName, rowKey, cell.key, value);\n                    console.info('[ACU] :', cell.key, '->', value);\n                }\n            }\n            // \n            editingCell.value = null;\n        };\n        /**\n         * \n         */\n        const handleUndoRow = async () => {\n            if (isUndoing.value)\n                return;\n            isUndoing.value = true;\n            try {\n                // \n                const snapshots = await rowHistory.getSnapshots(props.tableName, props.data.index);\n                if (snapshots.length === 0) {\n                    toast.warning('');\n                    return;\n                }\n                // \n                const latest = snapshots[0];\n                // \n                let changedCount = 0;\n                for (const [colIndex, value] of Object.entries(latest.cells)) {\n                    const idx = Number(colIndex);\n                    const currentValue = props.data.cells[idx]?.value;\n                    if (currentValue !== value) {\n                        //  skipHistory \n                        dataStore.updateCell(props.tableName, props.data.index, idx, value, { skipHistory: true });\n                        changedCount++;\n                    }\n                }\n                if (changedCount > 0) {\n                    toast.success(` ${changedCount} `);\n                }\n                else {\n                    toast.info('');\n                }\n            }\n            catch (err) {\n                console.error('[ACU] :', err);\n                toast.error('');\n            }\n            finally {\n                isUndoing.value = false;\n            }\n        };\n        /**\n         *  PC \n         * \n         */\n        const handleContextMenu = (e) => {\n            //  UA  PC \n            // useIsMobile  window.innerWidth < 768 \n            const MOBILE_UA_REGEX = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;\n            const isTrulyMobile = MOBILE_UA_REGEX.test(navigator.userAgent);\n            if (isTrulyMobile) {\n                console.info('[ACU] ');\n                return;\n            }\n            emit('contextMenu', e, props.data.index);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                ref_key: \"cardRef\",\n                ref: cardRef,\n                class: _normalizeClass([\"acu-data-card\", [\n                        rowHighlightClass.value,\n                        {\n                            'acu-editing-lock': editingCell.value !== null,\n                            'acu-style-list': __props.viewMode === 'list',\n                            'acu-style-card': __props.viewMode === 'card',\n                            'acu-swiping': _unref(isSwiping),\n                        },\n                    ]]),\n                onContextmenu: _withModifiers(handleContextMenu, [\"prevent\"]),\n                onScroll: handleScroll\n            }, [\n                _createCommentVNode(\"  prepend  \"),\n                _createCommentVNode(\"  v-show  v-if  DOM  watchEffect  \"),\n                _withDirectives(_createElementVNode(\"div\", {\n                    ref_key: \"pullTopRef\",\n                    ref: pullTopRef,\n                    class: \"acu-pull-overlay acu-pull-top\"\n                }, [...(_cache[6] || (_cache[6] = [\n                        _createElementVNode(\"div\", { class: \"acu-pull-icon\" }, [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }),\n                            _createElementVNode(\"span\", { class: \"acu-pull-text\" }, \"\")\n                        ], -1 /* CACHED */)\n                    ]))], 512 /* NEED_PATCH */), [\n                    [_vShow, __props.layout === 'horizontal' && _unref(isMobile) && _unref(gestureType) === 'insert']\n                ]),\n                _createCommentVNode(\"  \"),\n                (__props.showHeader)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                        (__props.showIndex)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, \"#\" + _toDisplayString(__props.data.index + 1), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        (titleCell.value && editingCell.value === __props.titleColIndex && !_unref(uiStore).isLockEditMode)\n                            ? (_openBlock(), _createBlock(InlineEditor, {\n                                key: 1,\n                                class: \"acu-title-editor\",\n                                value: titleCell.value.value,\n                                onSave: _cache[0] || (_cache[0] = ($event) => (handleCellSave(__props.titleColIndex, $event))),\n                                onCancel: _cache[1] || (_cache[1] = ($event) => (editingCell.value = null))\n                            }, null, 8 /* PROPS */, [\"value\"]))\n                            : (titleCell.value)\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"span\", {\n                                        class: _normalizeClass([\"acu-editable-title\", { 'acu-title-locked': isTitleLocked.value }]),\n                                        onClick: handleTitleClick\n                                    }, [\n                                        _createTextVNode(_toDisplayString(titleCell.value.value || '') + \" \", 1 /* TEXT */),\n                                        (isTitleLocked.value)\n                                            ? (_openBlock(), _createElementBlock(\"i\", _hoisted_3))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ], 2 /* CLASS */)\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        (_unref(uiStore).isLockEditMode)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 3,\n                                class: _normalizeClass([\"acu-row-lock-btn\", { 'acu-row-locked': isCurrentRowLocked.value }]),\n                                title: \"/\",\n                                onClick: _withModifiers(handleRowLock, [\"stop\"])\n                            }, [\n                                _createElementVNode(\"i\", {\n                                    class: _normalizeClass(isCurrentRowLocked.value ? 'fas fa-lock' : 'fas fa-lock-open')\n                                }, null, 2 /* CLASS */)\n                            ], 2 /* CLASS */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        (__props.showHistoryButton && !_unref(uiStore).isLockEditMode)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-icon-btn\", { 'acu-loading': isUndoing.value }]),\n                                    disabled: isUndoing.value,\n                                    title: \"\",\n                                    onClick: _withModifiers(handleUndoRow, [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(isUndoing.value ? 'fas fa-spinner fa-spin' : 'fas fa-undo')\n                                    }, null, 2 /* CLASS */)\n                                ], 10 /* CLASS, PROPS */, _hoisted_5),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-icon-btn\",\n                                    title: \"\",\n                                    onClick: _cache[2] || (_cache[2] = _withModifiers(($event) => (emit('showHistory')), [\"stop\"]))\n                                }, [...(_cache[7] || (_cache[7] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */)\n                                    ]))])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  - Card  \"),\n                (__props.viewMode === 'card')\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\" Card  \"),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(gridCells.value, (cell) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: cell.colIndex,\n                                    class: _normalizeClass([\"acu-grid-item\", [getCellChangeClass(cell.colIndex), getCellLockClass(cell.colIndex)]]),\n                                    onClick: ($event) => (handleCellClick(cell.colIndex))\n                                }, [\n                                    _createElementVNode(\"label\", _hoisted_8, _toDisplayString(cell.key), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", _hoisted_9, [\n                                        (editingCell.value === cell.colIndex && !_unref(uiStore).isLockEditMode)\n                                            ? (_openBlock(), _createBlock(InlineEditor, {\n                                                key: 0,\n                                                value: cell.value,\n                                                onSave: ($event) => (handleCellSave(cell.colIndex, $event)),\n                                                onCancel: _cache[3] || (_cache[3] = ($event) => (editingCell.value = null))\n                                            }, null, 8 /* PROPS */, [\"value\", \"onSave\"]))\n                                            : (_openBlock(), _createBlock(Badge, {\n                                                key: 1,\n                                                value: cell.value\n                                            }, null, 8 /* PROPS */, [\"value\"]))\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    (_unref(uiStore).isLockEditMode && getCellLockClass(cell.colIndex)['acu-cell-locked'])\n                                        ? (_openBlock(), _createElementBlock(\"i\", _hoisted_10))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 10 /* CLASS, PROPS */, _hoisted_7));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\" Full-Width  \"),\n                        (fullWidthCells.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(fullWidthCells.value, (cell) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: cell.colIndex,\n                                        class: _normalizeClass([\"acu-full-item\", [getCellChangeClass(cell.colIndex), getCellLockClass(cell.colIndex)]]),\n                                        onClick: ($event) => (handleCellClick(cell.colIndex))\n                                    }, [\n                                        _createElementVNode(\"label\", _hoisted_13, _toDisplayString(cell.key), 1 /* TEXT */),\n                                        _createElementVNode(\"div\", _hoisted_14, [\n                                            (editingCell.value === cell.colIndex && !_unref(uiStore).isLockEditMode)\n                                                ? (_openBlock(), _createBlock(InlineEditor, {\n                                                    key: 0,\n                                                    value: cell.value,\n                                                    \"max-height\": 300,\n                                                    onSave: ($event) => (handleCellSave(cell.colIndex, $event)),\n                                                    onCancel: _cache[4] || (_cache[4] = ($event) => (editingCell.value = null))\n                                                }, null, 8 /* PROPS */, [\"value\", \"onSave\"]))\n                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_15, _toDisplayString(cell.value || '-'), 1 /* TEXT */))\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        (_unref(uiStore).isLockEditMode && getCellLockClass(cell.colIndex)['acu-cell-locked'])\n                                            ? (_openBlock(), _createElementBlock(\"i\", _hoisted_16))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_12));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 64 /* STABLE_FRAGMENT */))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                        _createCommentVNode(\"  - List  \"),\n                        _createElementVNode(\"div\", _hoisted_17, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayCells.value, (cell) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: cell.colIndex,\n                                    class: _normalizeClass([\"acu-card-row\", [getCellChangeClass(cell.colIndex), getCellLockClass(cell.colIndex)]]),\n                                    onClick: ($event) => (handleCellClick(cell.colIndex))\n                                }, [\n                                    _createElementVNode(\"label\", _hoisted_19, _toDisplayString(cell.key) + \":\", 1 /* TEXT */),\n                                    _createElementVNode(\"div\", _hoisted_20, [\n                                        (editingCell.value === cell.colIndex && !_unref(uiStore).isLockEditMode)\n                                            ? (_openBlock(), _createBlock(InlineEditor, {\n                                                key: 0,\n                                                value: cell.value,\n                                                onSave: ($event) => (handleCellSave(cell.colIndex, $event)),\n                                                onCancel: _cache[5] || (_cache[5] = ($event) => (editingCell.value = null))\n                                            }, null, 8 /* PROPS */, [\"value\", \"onSave\"]))\n                                            : (_openBlock(), _createBlock(Badge, {\n                                                key: 1,\n                                                value: cell.value\n                                            }, null, 8 /* PROPS */, [\"value\"]))\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    (_unref(uiStore).isLockEditMode && getCellLockClass(cell.colIndex)['acu-cell-locked'])\n                                        ? (_openBlock(), _createElementBlock(\"i\", _hoisted_21))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 10 /* CLASS, PROPS */, _hoisted_18));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])\n                    ], 64 /* STABLE_FRAGMENT */)),\n                _createCommentVNode(\"  append  \"),\n                _createCommentVNode(\"  v-show  v-if  DOM  watchEffect  \"),\n                _withDirectives(_createElementVNode(\"div\", {\n                    ref_key: \"pullBottomRef\",\n                    ref: pullBottomRef,\n                    class: _normalizeClass([\"acu-pull-overlay acu-pull-bottom\", { 'acu-pull-restore': isDeleting.value }])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_22, [\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isDeleting.value ? 'fa-solid fa-undo' : 'fa-solid fa-trash')\n                        }, null, 2 /* CLASS */),\n                        _createElementVNode(\"span\", _hoisted_23, _toDisplayString(isDeleting.value ? '' : ''), 1 /* TEXT */)\n                    ])\n                ], 2 /* CLASS */), [\n                    [_vShow, __props.layout === 'horizontal' && _unref(isMobile) && _unref(gestureType) === 'delete']\n                ]),\n                _createCommentVNode(\"  () \"),\n                (isDeleting.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, \"\"))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  .acu-swipe-overlay  \"),\n                _createCommentVNode(\"  v-show  v-if  DOM  watchEffect  \"),\n                (__props.layout === 'vertical' && _unref(isMobile))\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 4 }, [\n                        _createCommentVNode(\"  \"),\n                        _withDirectives(_createElementVNode(\"div\", {\n                            ref_key: \"swipeLeftRef\",\n                            ref: swipeLeftRef,\n                            class: _normalizeClass([\"acu-swipe-overlay acu-swipe-left\", { 'acu-swipe-restore': isDeleting.value }])\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(isDeleting.value ? 'fa-solid fa-undo' : 'fa-solid fa-trash')\n                            }, null, 2 /* CLASS */)\n                        ], 2 /* CLASS */), [\n                            [_vShow, _unref(gestureType) === 'delete']\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _withDirectives(_createElementVNode(\"div\", {\n                            ref_key: \"swipeRightRef\",\n                            ref: swipeRightRef,\n                            class: \"acu-swipe-overlay acu-swipe-right\"\n                        }, [...(_cache[8] || (_cache[8] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */)\n                            ]))], 512 /* NEED_PATCH */), [\n                            [_vShow, _unref(gestureType) === 'insert']\n                        ])\n                    ], 64 /* STABLE_FRAGMENT */))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 34 /* CLASS, NEED_HYDRATION */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DataCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DataCard.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { useDivinationStore } from '../stores/useDivinationStore';\nimport { useUIStore } from '../stores/useUIStore';\nimport type { DivinationResult } from '../types';\nimport { appendToActiveInput, useHiddenPrompt } from './useHiddenPrompt';\nimport { buildFullPrompt } from './usePromptBuild';\nimport { toast } from './useToast';\n\n//  ChatMessage \ntype ChatMessage = {\n  message_id: number;\n  name: string;\n  role: 'system' | 'assistant' | 'user';\n  is_hidden: boolean;\n  message: string;\n  data: Record<string, any>;\n  extra: Record<string, any>;\n};\n\n/**\n *  Composable\n *\n * \n * 1. \n * 2. \n * 3. /\n */\nexport function useDivinationAction() {\n  const divinationStore = useDivinationStore() as any;\n  const uiStore = useUIStore();\n  const { setHiddenPrompt, setupSendIntercept } = useHiddenPrompt();\n\n  /**\n   * \n   */\n  function buildPromptFromResult(result: DivinationResult): string {\n    const dimensionsForPrompt = result.dimensions.map(d => ({\n      dimensionName: d.name,\n      tierName: d.value,\n      prompt: d.prompt,\n    }));\n\n    // \n    const config = divinationStore.config;\n    const customTemplate =\n      config && typeof config === 'object' && 'value' in config\n        ? (config as any).value?.customTemplate\n        : config?.customTemplate;\n\n    if (customTemplate && customTemplate.trim()) {\n      let prompt = customTemplate;\n\n      // 1. \n      const luckPrompt = result.luck.prompt || '';\n      const wordsStr = result.words.join('');\n\n      //  Map ( -> Prompt)\n      const dimensionMap = new Map<string, string>();\n      result.dimensions.forEach(d => {\n        if (d.prompt && d.prompt.trim()) {\n          dimensionMap.set(d.name, d.prompt);\n        }\n      });\n\n      const usedDimensions = new Set<string>();\n\n      // 2.  {{luck}}\n      prompt = prompt.replace(/\\{\\{luck\\}\\}/gi, luckPrompt);\n\n      // 3.  {{words}}\n      prompt = prompt.replace(/\\{\\{words\\}\\}/gi, wordsStr);\n\n      // 4.  {{}} \n      for (const [name, dimPrompt] of dimensionMap.entries()) {\n        //  {{}}\n        // \n        const escapedName = name.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n        const regex = new RegExp(`\\\\{\\\\{${escapedName}\\\\}\\\\}`, 'gi');\n\n        if (regex.test(prompt)) {\n          prompt = prompt.replace(regex, dimPrompt);\n          usedDimensions.add(name);\n        }\n      }\n\n      // 5.  {{dimensions}} ()\n      const remainingPrompts: string[] = [];\n      for (const [name, dimPrompt] of dimensionMap.entries()) {\n        if (!usedDimensions.has(name)) {\n          remainingPrompts.push(dimPrompt);\n        }\n      }\n      const dimensionsText = remainingPrompts.join('\\n');\n      prompt = prompt.replace(/\\{\\{dimensions\\}\\}/gi, dimensionsText);\n\n      return prompt;\n    }\n\n    return buildFullPrompt({\n      luck: result.luck,\n      words: result.words,\n      dimensions: dimensionsForPrompt,\n    });\n  }\n\n  /**\n   * \n   * @param result \n   * @param action  ('reveal' | 'hide' | 'reroll') 'reveal'\n   */\n  function confirmDivination(result: DivinationResult, action: 'reveal' | 'hide' | 'reroll' = 'reveal') {\n    const prompt = buildPromptFromResult(result);\n\n    if (action === 'reroll') {\n      // \n      injectIntoLastUserMessage(prompt);\n    } else if (action === 'hide') {\n      // \n      setHiddenPrompt(prompt);\n      setupSendIntercept();\n      toast.success('');\n    } else {\n      //  (reveal)\n      appendToActiveInput(prompt, '\\n');\n      toast.success('');\n    }\n\n    uiStore.closeDivinationOverlay();\n  }\n\n  /**\n   * \n   */\n  async function injectIntoLastUserMessage(prompt: string): Promise<void> {\n    const parentWin = window.parent as any;\n    //  TavernHelper \n    const getChatMessagesFn = parentWin.getChatMessages || parentWin.TavernHelper?.getChatMessages;\n    const setChatMessagesFn = parentWin.setChatMessages || parentWin.TavernHelper?.setChatMessages;\n    const getLastMessageIdFn = parentWin.getLastMessageId || parentWin.TavernHelper?.getLastMessageId;\n\n    if (!getChatMessagesFn || !setChatMessagesFn) {\n      console.error('[ACU] getChatMessages/setChatMessages not found in parent window or TavernHelper');\n      toast.error('');\n      return;\n    }\n\n    //  ID\n    const lastMsgId = getLastMessageIdFn?.() ?? 999;\n    //  50 \n    const startFloor = Math.max(0, lastMsgId - 50);\n    // \n    const allMessages = getChatMessagesFn(`${startFloor}-${lastMsgId}`) as ChatMessage[];\n\n    // \n    let lastUserMsg: ChatMessage | undefined;\n    for (let i = allMessages.length - 1; i >= 0; i--) {\n      if (allMessages[i].role === 'user') {\n        lastUserMsg = allMessages[i];\n        break;\n      }\n    }\n\n    console.info(\n      '[ACU Divination] :',\n      `${startFloor}-${lastMsgId}`,\n      ':',\n      allMessages.length,\n      ' ID:',\n      lastUserMsg?.message_id,\n    );\n\n    if (!lastUserMsg) {\n      toast.warning('');\n      appendToActiveInput(prompt, '\\n');\n      return;\n    }\n\n    //  prompt \n    const cleanPrompt = prompt\n      .replace(/<[^>]*>/g, '')\n      .replace(/<\\/>/g, '')\n      .trim();\n\n    const newDirective = `<>\\n${cleanPrompt}\\n</>`;\n    //  g  test()  lastIndex  replace() \n    // \n    const regex = /<[\\s\\S]*?<\\/>/;\n    const content = lastUserMsg.message || '';\n\n    let newContent: string;\n    if (regex.test(content)) {\n      newContent = content.replace(regex, newDirective);\n    } else {\n      newContent = newDirective + '\\n' + content;\n    }\n\n    await setChatMessagesFn([\n      {\n        message_id: lastUserMsg.message_id,\n        message: newContent,\n      },\n    ]);\n\n    toast.success('');\n  }\n\n  /**\n   * \n   */\n  async function triggerQuickReroll(): Promise<void> {\n    //  ( performDivination )\n    if (!divinationStore.isLoaded) divinationStore.loadConfig();\n    await uiStore.initDivinationSystem();\n\n    //  ()\n    if (divinationStore.categories.length === 0) {\n      await divinationStore.loadFromWorldbook();\n      if (divinationStore.categories.length === 0) {\n        await divinationStore.syncFromACU();\n        await divinationStore.loadFromWorldbook();\n      }\n    } else {\n      divinationStore.loadFromWorldbook();\n    }\n\n    const result = divinationStore.performDivination();\n    if (result) {\n      const config = divinationStore.config;\n      // config  ref \n      const flipMode = (config as any).value?.flipMode ?? config?.flipMode;\n\n      if (flipMode === 'skip') {\n        const prompt = buildPromptFromResult(result);\n        await injectIntoLastUserMessage(prompt);\n      } else {\n        uiStore.openDivinationOverlay(result, true); // true = isQuickReroll\n      }\n    } else {\n      toast.error('');\n    }\n  }\n\n  /**\n   * \n   */\n  async function performDivination(): Promise<void> {\n    // \n    // \n    if (!divinationStore.isLoaded) {\n      divinationStore.loadConfig();\n    }\n\n    //  (UI Store )\n    //  loadConfig \n    await uiStore.initDivinationSystem();\n\n    //  ()\n    if (divinationStore.categories.length === 0) {\n      console.info('[ACU] ...');\n      await divinationStore.loadFromWorldbook();\n\n      //  ACU \n      if (divinationStore.categories.length === 0) {\n        console.info('[ACU]  ACU ...');\n        await divinationStore.syncFromACU();\n        // \n        await divinationStore.loadFromWorldbook();\n      }\n    } else {\n      // \n      divinationStore.loadFromWorldbook();\n    }\n\n    if (divinationStore.categories.length === 0) {\n      toast.warning(' \"Random\"  \"\" ');\n    }\n\n    // \n    const result = divinationStore.performDivination();\n\n    if (result) {\n      // \n      // divinationStore.config  ref .value \n      //  setup  storeToRefs  ref store.config \n      // \n      const config = divinationStore.config;\n      const flipMode =\n        config && typeof config === 'object' && 'value' in config ? (config as any).value?.flipMode : config?.flipMode;\n\n      if (flipMode === 'skip') {\n        const prompt = buildPromptFromResult(result);\n        setHiddenPrompt(prompt);\n        setupSendIntercept();\n        toast.success('');\n      } else {\n        uiStore.openDivinationOverlay(result);\n      }\n    } else {\n      toast.error('');\n    }\n  }\n\n  return {\n    performDivination,\n    confirmDivination,\n    triggerQuickReroll,\n  };\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"acu-embedded-options\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_3 = { class: \"acu-embedded-options-list\" };\nconst _hoisted_4 = { class: \"acu-embedded-option-rows\" };\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = {\n    key: 0,\n    class: \"acu-embedded-option-tags\"\n};\nconst _hoisted_7 = { class: \"acu-embedded-option-text\" };\nimport { computed } from 'vue';\nimport { useCoreActions } from '../../composables/useCoreActions';\nimport { toast } from '../../composables/useToast';\nimport { isOptionTable, parseOptionItems } from '../../utils/optionParser';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'EmbeddedOptionsPanel',\n    props: {\n        tables: {}\n    },\n    setup(__props) {\n        /**\n         * \n         * \n         */\n        const props = __props;\n        // ============================================================\n        // Composables\n        // ============================================================\n        const { setInput } = useCoreActions();\n        // ============================================================\n        // Computed\n        // ============================================================\n        /** \"\" */\n        const optionTables = computed(() => {\n            return props.tables.filter(t => isOptionTable(t.name));\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function getOptionItems(table) {\n            return parseOptionItems(table);\n        }\n        /**\n         * \n         */\n        function handleOptionClick(text) {\n            if (text.trim()) {\n                setInput(text.trim());\n                toast.success('');\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                (optionTables.value.length === 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [...(_cache[0] || (_cache[0] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-inbox\" }, null, -1 /* CACHED */),\n                            _createTextVNode(\" \\\"\\\" \", -1 /* CACHED */)\n                        ]))]))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(optionTables.value, (table) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: table.id,\n                                    class: \"acu-embedded-option-group\"\n                                }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_4, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getOptionItems(table), (optionItem, optIdx) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: optIdx,\n                                                class: \"acu-embedded-option-row\",\n                                                title: \"\",\n                                                onClick: _withModifiers(($event) => (handleOptionClick(optionItem.text)), [\"stop\"])\n                                            }, [\n                                                _createCommentVNode(\"  (Tag ) \"),\n                                                (optionItem.tags.length > 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(optionItem.tags, (tag, tagIdx) => {\n                                                            return (_openBlock(), _createElementBlock(\"span\", {\n                                                                key: tagIdx,\n                                                                class: \"acu-badge\"\n                                                            }, _toDisplayString(tag), 1 /* TEXT */));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                                _createCommentVNode(\"  () \"),\n                                                _createElementVNode(\"div\", _hoisted_7, _toDisplayString(optionItem.text), 1 /* TEXT */)\n                                            ], 8 /* PROPS */, _hoisted_5));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ]));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])\n                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./EmbeddedOptionsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EmbeddedOptionsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"acu-global-header\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"acu-global-location\"\n};\nconst _hoisted_3 = { class: \"location-path\" };\nconst _hoisted_4 = { class: \"location-part\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"location-sep\"\n};\nconst _hoisted_6 = {\n    key: 1,\n    class: \"acu-global-time-group\"\n};\nconst _hoisted_7 = {\n    key: 0,\n    class: \"acu-global-time-primary\"\n};\nconst _hoisted_8 = { class: \"acu-global-time-secondary\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"acu-badge-outline is-highlight\"\n};\nconst _hoisted_10 = {\n    key: 1,\n    class: \"acu-badge-outline\",\n    title: \"\"\n};\nconst _hoisted_11 = { class: \"acu-global-body\" };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"acu-global-item layout-inline\"\n};\nconst _hoisted_13 = { class: \"item-icon\" };\nconst _hoisted_14 = { class: \"item-content\" };\nconst _hoisted_15 = { class: \"item-label\" };\nconst _hoisted_16 = { class: \"item-value\" };\nconst _hoisted_17 = { class: \"item-icon\" };\nconst _hoisted_18 = { class: \"item-content\" };\nconst _hoisted_19 = { class: \"item-label\" };\nconst _hoisted_20 = { class: \"item-value\" };\nconst _hoisted_21 = {\n    key: 1,\n    class: \"acu-global-item layout-inline people-group\"\n};\nconst _hoisted_22 = { class: \"item-content\" };\nconst _hoisted_23 = { class: \"item-label\" };\nconst _hoisted_24 = { class: \"acu-global-person-list\" };\nconst _hoisted_25 = {\n    key: 0,\n    class: \"acu-global-footer\"\n};\nconst _hoisted_26 = { class: \"acu-global-item layout-block system-notice\" };\nconst _hoisted_27 = { class: \"item-icon\" };\nconst _hoisted_28 = { class: \"item-content\" };\nconst _hoisted_29 = { class: \"item-label\" };\nconst _hoisted_30 = { class: \"item-value\" };\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'GlobalStatusWidget',\n    props: {\n        tableData: {},\n        isEditing: { type: Boolean }\n    },\n    emits: [\"row-click\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Smart Parser Logic\n        // ============================================================\n        //  (Global )\n        const firstRow = computed(() => {\n            if (!props.tableData || props.tableData.rows.length === 0)\n                return null;\n            return props.tableData.rows[0];\n        });\n        // \n        const parsedData = computed(() => {\n            const row = firstRow.value;\n            if (!row)\n                return null;\n            const result = {\n                locationCols: [],\n                timeCols: {\n                    current: null,\n                    passed: null,\n                    last: null,\n                },\n                weatherCol: null,\n                peopleCol: null,\n                attributes: [],\n                footer: null,\n            };\n            // 1. \n            row.cells.forEach(cell => {\n                const key = cell.key.toLowerCase();\n                const valueStr = String(cell.value || '');\n                if (!valueStr)\n                    return; // \n                // Time: \n                if (['', 'time', 'date', 'clock'].some(k => key.includes(k))) {\n                    if (['', '', 'passed', 'elapse'].some(k => key.includes(k))) {\n                        result.timeCols.passed = cell;\n                    }\n                    else if (['', 'last', 'prev'].some(k => key.includes(k))) {\n                        result.timeCols.last = cell;\n                    }\n                    else if (!result.timeCols.current || key.length < result.timeCols.current.key.length) {\n                        //  Current Current ()\n                        //  Current\n                        //  Current  Attribute\n                        if (result.timeCols.current)\n                            result.attributes.push(result.timeCols.current);\n                        result.timeCols.current = cell;\n                    }\n                    else {\n                        result.attributes.push(cell);\n                    }\n                    return;\n                }\n                // Location:  (\"\")\n                if (['', '', '', 'loc', 'place', 'area', 'zone'].some(k => key.includes(k)) && !key.includes('')) {\n                    result.locationCols.push(cell);\n                    return;\n                }\n                // Weather\n                if (['', '', 'weather', 'climate'].some(k => key.includes(k))) {\n                    result.weatherCol = cell;\n                    return;\n                }\n                // People\n                if (['', 'npc', 'chara', '', 'role'].some(k => key.includes(k))) {\n                    result.peopleCol = cell;\n                    return;\n                }\n                // Attributes ()\n                result.attributes.push(cell);\n            });\n            // 2.  Attributes ->  Footer ()\n            //  > 30  Footer\n            let maxLen = 0;\n            let footerIdx = -1;\n            result.attributes.forEach((attr, idx) => {\n                const len = String(attr.value).length;\n                // \n                const isSystem = ['', '', '', 'sys', 'info'].some(k => attr.key.toLowerCase().includes(k));\n                if (isSystem || (len > 30 && len > maxLen)) {\n                    maxLen = len;\n                    footerIdx = idx;\n                }\n            });\n            if (footerIdx !== -1) {\n                result.footer = result.attributes[footerIdx];\n                result.attributes.splice(footerIdx, 1);\n            }\n            return result;\n        });\n        // ============================================================\n        // Display Helpers\n        // ============================================================\n        // Location Display\n        const locationText = computed(() => {\n            const cols = parsedData.value?.locationCols;\n            if (!cols || cols.length === 0)\n                return '';\n            // \n            return cols\n                .sort((a, b) => a.colIndex - b.colIndex)\n                .map(c => c.value)\n                .join('  ');\n        });\n        const locationParts = computed(() => {\n            const cols = parsedData.value?.locationCols;\n            if (!cols || cols.length === 0)\n                return [];\n            return cols.sort((a, b) => a.colIndex - b.colIndex).map(c => c.value);\n        });\n        // Time Display\n        const timeData = computed(() => ({\n            current: parsedData.value?.timeCols.current?.value,\n            passed: parsedData.value?.timeCols.passed?.value,\n            last: parsedData.value?.timeCols.last?.value,\n        }));\n        // Weather Display\n        const weatherData = computed(() => {\n            const col = parsedData.value?.weatherCol;\n            if (!col)\n                return null;\n            return { label: col.key, value: String(col.value) };\n        });\n        function getWeatherIcon(value) {\n            const v = value.toLowerCase();\n            if (v.includes('') || v.includes('sun') || v.includes('clear'))\n                return 'fa-sun';\n            if (v.includes('') || v.includes('cloud') || v.includes('overcast'))\n                return 'fa-cloud';\n            if (v.includes('') || v.includes('rain'))\n                return 'fa-cloud-showers-heavy';\n            if (v.includes('') || v.includes('snow'))\n                return 'fa-snowflake';\n            if (v.includes('') || v.includes('thunder') || v.includes('storm'))\n                return 'fa-bolt';\n            if (v.includes('') || v.includes('fog') || v.includes('mist'))\n                return 'fa-smog';\n            if (v.includes('') || v.includes('wind'))\n                return 'fa-wind';\n            if (v.includes('') || v.includes('hurricane'))\n                return 'fa-hurricane';\n            return 'fa-cloud-sun';\n        }\n        // People Display\n        const peopleCol = computed(() => parsedData.value?.peopleCol);\n        const peopleList = computed(() => {\n            const col = peopleCol.value;\n            if (!col || !col.value)\n                return [];\n            // \n            return String(col.value)\n                .split(/[,/&]/)\n                .map(s => s.trim())\n                .filter(s => s);\n        });\n        // Attributes Display\n        const attributes = computed(() => {\n            if (!parsedData.value)\n                return [];\n            return parsedData.value.attributes.map(cell => ({\n                key: cell.key,\n                value: String(cell.value),\n                isLong: String(cell.value).length > 15,\n            }));\n        });\n        const footerData = computed(() => {\n            const col = parsedData.value?.footer;\n            if (!col)\n                return null;\n            return { key: col.key, value: String(col.value) };\n        });\n        function getAttributeIcon(key) {\n            const k = key.toLowerCase();\n            if (['', '', '', 'money', 'gold', 'coin'].some(w => k.includes(w)))\n                return 'fa-coins';\n            if (['', '', '', 'sys', 'info', 'notice'].some(w => k.includes(w)))\n                return 'fa-bell';\n            if (['', 'state', 'status', 'hp', 'mp'].some(w => k.includes(w)))\n                return 'fa-heart-pulse';\n            if (['', 'level', 'lv', 'rank'].some(w => k.includes(w)))\n                return 'fa-layer-group';\n            return 'fa-info-circle';\n        }\n        function handleWidgetClick() {\n            if (props.isEditing)\n                return;\n            if (firstRow.value) {\n                emit('row-click', firstRow.value);\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"acu-global-widget\", { 'is-editing': __props.isEditing, 'acu-dash-interactive': !__props.isEditing }]),\n                onClick: _withModifiers(handleWidgetClick, [\"stop\"])\n            }, [\n                _createCommentVNode(\"  (Location + Time) \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\" Location (H1) \"),\n                    (locationText.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"i\", { class: \"fas fa-map-marker-alt\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(locationParts.value, (part, index) => {\n                                    return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n                                        _createElementVNode(\"span\", _hoisted_4, _toDisplayString(part), 1 /* TEXT */),\n                                        (index < locationParts.value.length - 1)\n                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, \"\"))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ], 64 /* STABLE_FRAGMENT */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" Time Group \"),\n                    (timeData.value.current || timeData.value.passed || timeData.value.last)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                            _createCommentVNode(\" Current Time \"),\n                            (timeData.value.current)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                    _cache[1] || (_cache[1] = _createElementVNode(\"i\", { class: \"fas fa-clock\" }, null, -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", null, _toDisplayString(timeData.value.current), 1 /* TEXT */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" Secondary Times \"),\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _createCommentVNode(\" Passed Time Badge \"),\n                                (timeData.value.passed)\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, [\n                                        _cache[2] || (_cache[2] = _createElementVNode(\"i\", { class: \"fas fa-hourglass-half\" }, null, -1 /* CACHED */)),\n                                        _createTextVNode(\" \" + _toDisplayString(timeData.value.passed), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createCommentVNode(\" Last Time \"),\n                                (timeData.value.last)\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, [\n                                        _cache[3] || (_cache[3] = _createElementVNode(\"i\", { class: \"fas fa-history\" }, null, -1 /* CACHED */)),\n                                        _createTextVNode(\" \" + _toDisplayString(timeData.value.last), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  (Body) \"),\n                _createElementVNode(\"div\", _hoisted_11, [\n                    _createCommentVNode(\"  \"),\n                    (weatherData.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                            _createElementVNode(\"div\", _hoisted_13, [\n                                _createElementVNode(\"i\", {\n                                    class: _normalizeClass(['fas', getWeatherIcon(weatherData.value.value)])\n                                }, null, 2 /* CLASS */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_14, [\n                                _createElementVNode(\"div\", _hoisted_15, _toDisplayString(weatherData.value.label), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_16, _toDisplayString(weatherData.value.value), 1 /* TEXT */)\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\"  () \"),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(attributes.value, (attr) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: attr.key,\n                            class: _normalizeClass([\"acu-global-item\", attr.isLong ? 'layout-block' : 'layout-inline'])\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_17, [\n                                _createElementVNode(\"i\", {\n                                    class: _normalizeClass(['fas', getAttributeIcon(attr.key)])\n                                }, null, 2 /* CLASS */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_18, [\n                                _createElementVNode(\"div\", _hoisted_19, _toDisplayString(attr.key), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_20, _toDisplayString(attr.value), 1 /* TEXT */)\n                            ])\n                        ], 2 /* CLASS */));\n                    }), 128 /* KEYED_FRAGMENT */)),\n                    _createCommentVNode(\"  (Tag Group) \"),\n                    (peopleCol.value && peopleList.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                            _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"item-icon\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-users\" })\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_22, [\n                                _createElementVNode(\"div\", _hoisted_23, _toDisplayString(peopleCol.value.key), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_24, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(peopleList.value, (person, idx) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: idx,\n                                            class: \"person-tag\"\n                                        }, _toDisplayString(person), 1 /* TEXT */));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  (Footer: System Notice / Long Text) \"),\n                (footerData.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [\n                        _createElementVNode(\"div\", _hoisted_26, [\n                            _createElementVNode(\"div\", _hoisted_27, [\n                                _createElementVNode(\"i\", {\n                                    class: _normalizeClass(['fas', getAttributeIcon(footerData.value.key)])\n                                }, null, 2 /* CLASS */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_28, [\n                                _createElementVNode(\"div\", _hoisted_29, _toDisplayString(footerData.value.key), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_30, _toDisplayString(footerData.value.value), 1 /* TEXT */)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./GlobalStatusWidget.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GlobalStatusWidget.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = { class: \"acu-status-board\" };\nconst _hoisted_2 = { class: \"acu-status-board-header\" };\nconst _hoisted_3 = { class: \"acu-status-board-summary\" };\nconst _hoisted_4 = { class: \"acu-status-board-actions\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"acu-status-toolbar\"\n};\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = [\"disabled\", \"title\"];\nconst _hoisted_10 = [\"disabled\"];\nconst _hoisted_11 = [\"title\"];\nconst _hoisted_12 = { class: \"acu-status-table-wrapper\" };\nconst _hoisted_13 = { class: \"acu-status-table\" };\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = { class: \"acu-status-freq\" };\nconst _hoisted_17 = [\"value\", \"onInput\"];\nconst _hoisted_18 = {\n    key: 0,\n    class: \"acu-status-disabled\"\n};\nconst _hoisted_19 = { key: 1 };\nconst _hoisted_20 = {\n    key: 2,\n    class: \"acu-status-global-hint\"\n};\nconst _hoisted_21 = { class: \"acu-status-last-update\" };\nconst _hoisted_22 = { key: 0 };\nconst _hoisted_23 = { key: 1 };\nimport { computed, onMounted, ref } from 'vue';\nimport { useDataPersistence } from '../../composables/useDataPersistence';\nimport { useTableUpdateStatus } from '../../composables/useTableUpdateStatus';\nimport { toast } from '../../composables/useToast';\nimport { useDataStore } from '../../stores/useDataStore';\nimport { useUIStore } from '../../stores/useUIStore';\nimport { getCore } from '../../utils';\n// ============================================================\n// Emits\n// ============================================================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TableStatusBoard',\n    emits: [\"tableClick\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * \n         * \n         */\n        const emit = __emit;\n        // ============================================================\n        // Composable\n        // ============================================================\n        const dataStore = useDataStore();\n        const uiStore = useUIStore();\n        const { statusList, isLoading, currentTotalAiFloors, refresh, formatLastUpdate, getUnrecordedClass } = useTableUpdateStatus();\n        const { purgeTableDataByRange } = useDataPersistence();\n        // ============================================================\n        // State\n        // ============================================================\n        // \n        const isEditing = ref(false);\n        //  key \n        const selectedKeys = ref(new Set());\n        //  (sheetKey -> newFrequency)\n        const pendingFrequencyChanges = ref(new Map());\n        // \n        const pendingNewTables = ref([]);\n        // ============================================================\n        // Computed\n        // ============================================================\n        // /\n        const toggleButtonState = computed(() => {\n            if (selectedKeys.value.size === 0)\n                return 'disabled';\n            const selectedItems = statusList.value.filter(s => selectedKeys.value.has(s.sheetKey));\n            // \n            const currentFrequencies = selectedItems.map(s => {\n                if (pendingFrequencyChanges.value.has(s.sheetKey)) {\n                    return pendingFrequencyChanges.value.get(s.sheetKey);\n                }\n                return s.effectiveFrequency;\n            });\n            const allDisabled = currentFrequencies.every(freq => freq === 0);\n            const allEnabled = currentFrequencies.every(freq => freq !== 0);\n            if (allDisabled)\n                return 'enable'; //   \"\"\n            if (allEnabled)\n                return 'disable'; //   \"\"\n            return 'mixed'; //   \n        });\n        // \n        const hasPendingChanges = computed(() => {\n            return pendingFrequencyChanges.value.size > 0 || pendingNewTables.value.length > 0;\n        });\n        // ============================================================\n        // AI \n        // ============================================================\n        /**\n         *  AI \n         * @param tableName \n         */\n        function hasTableAiChanges(tableName) {\n            const aiDiffMap = dataStore.aiDiffMap;\n            if (!aiDiffMap || aiDiffMap.size === 0)\n                return false;\n            //  aiDiffMap\n            // key : \"-row-\"  \"--\"\n            for (const key of aiDiffMap) {\n                if (key.startsWith(`${tableName}-`)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        /**\n         * \n         * AI \n         */\n        const sortedStatusList = computed(() => {\n            return [...statusList.value].sort((a, b) => {\n                const aHasAi = hasTableAiChanges(a.name);\n                const bHasAi = hasTableAiChanges(b.name);\n                if (aHasAi !== bHasAi)\n                    return bHasAi ? 1 : -1;\n                return a.orderNo - b.orderNo;\n            });\n        });\n        // ============================================================\n        // Methods\n        // ============================================================\n        /**\n         * \n         */\n        function enterEditMode() {\n            isEditing.value = true;\n            //  toastr \n            toast.info('');\n        }\n        /**\n         * \n         */\n        function exitEditMode() {\n            isEditing.value = false;\n            selectedKeys.value.clear();\n            pendingFrequencyChanges.value.clear();\n            pendingNewTables.value = [];\n        }\n        /**\n         * \n         */\n        function toggleSelect(sheetKey) {\n            if (selectedKeys.value.has(sheetKey)) {\n                selectedKeys.value.delete(sheetKey);\n            }\n            else {\n                selectedKeys.value.add(sheetKey);\n            }\n        }\n        /**\n         * /\n         */\n        function toggleSelectAll() {\n            if (selectedKeys.value.size === statusList.value.length) {\n                selectedKeys.value.clear();\n            }\n            else {\n                statusList.value.forEach(item => selectedKeys.value.add(item.sheetKey));\n            }\n        }\n        /**\n         * \n         */\n        function getEditingFrequency(item) {\n            if (pendingFrequencyChanges.value.has(item.sheetKey)) {\n                return pendingFrequencyChanges.value.get(item.sheetKey);\n            }\n            return item.updateFrequency;\n        }\n        /**\n         * \n         */\n        function handleFrequencyChange(sheetKey, event) {\n            const input = event.target;\n            const value = parseInt(input.value, 10);\n            if (!isNaN(value)) {\n                pendingFrequencyChanges.value.set(sheetKey, value);\n            }\n        }\n        /**\n         * \n         */\n        async function handleRefresh() {\n            await refresh();\n        }\n        // \n        function handleExport() {\n            if (selectedKeys.value.size === 0)\n                return;\n            const api = getCore().getDB();\n            if (!api?.getTableTemplate) {\n                toast.error(' API ');\n                return;\n            }\n            try {\n                const fullTemplate = api.getTableTemplate();\n                if (!fullTemplate) {\n                    toast.error('');\n                    return;\n                }\n                // \n                const exportTemplate = {\n                    mate: fullTemplate.mate || {\n                        type: 'chatSheets',\n                        version: 1,\n                        updateConfigUiSentinel: -1,\n                    },\n                };\n                selectedKeys.value.forEach(sheetKey => {\n                    if (fullTemplate[sheetKey]) {\n                        exportTemplate[sheetKey] = fullTemplate[sheetKey];\n                    }\n                });\n                //  JSON \n                const jsonStr = JSON.stringify(exportTemplate, null, 2);\n                const blob = new Blob([jsonStr], { type: 'application/json' });\n                const url = URL.createObjectURL(blob);\n                const a = document.createElement('a');\n                a.href = url;\n                a.download = `tables_export_${Date.now()}.json`;\n                a.click();\n                URL.revokeObjectURL(url);\n                toast.success(` ${selectedKeys.value.size} `);\n            }\n            catch (e) {\n                console.error('[ACU] :', e);\n                toast.error(`: ${e instanceof Error ? e.message : String(e)}`);\n            }\n        }\n        // \n        async function handleDelete() {\n            if (selectedKeys.value.size === 0)\n                return;\n            // \n            if (!confirm(` ${selectedKeys.value.size} \\n\\n\\n1. \\n2. \\n\\n`)) {\n                return;\n            }\n            const api = getCore().getDB();\n            if (!api?.getTableTemplate || !api?.importTemplateFromData) {\n                toast.error(' API ');\n                return;\n            }\n            try {\n                // 1. \n                toast.info('...');\n                const tablesToDelete = Array.from(selectedKeys.value);\n                //  (0  )\n                const purgeResult = await purgeTableDataByRange(tablesToDelete, 0, 9999999);\n                if (purgeResult.changed) {\n                    toast.success(` ${purgeResult.changedCount} `);\n                }\n                // 2. \n                const template = api.getTableTemplate();\n                if (!template) {\n                    toast.error('');\n                    return;\n                }\n                // \n                selectedKeys.value.forEach(sheetKey => {\n                    delete template[sheetKey];\n                });\n                // \n                const result = await api.importTemplateFromData(template);\n                if (result.success) {\n                    toast.success(` ${selectedKeys.value.size} `);\n                    selectedKeys.value.clear();\n                    await refresh();\n                }\n                else {\n                    toast.error(`: ${result.message}`);\n                }\n            }\n            catch (e) {\n                console.error('[ACU] :', e);\n                toast.error(`: ${e instanceof Error ? e.message : String(e)}`);\n            }\n        }\n        // \n        function handleOpenPurgeDialog() {\n            uiStore.openAdvancedPurgeDialog({\n                // \n                initialStartFloor: undefined,\n                initialEndFloor: undefined,\n            }, {\n                onConfirm: async () => {\n                    await refresh();\n                    selectedKeys.value.clear();\n                },\n            }, {\n                // \n                selectedTableKeys: Array.from(selectedKeys.value),\n            });\n        }\n        // \n        function handleOpenAddDialog() {\n            uiStore.openAddTableDialog((tables) => {\n                pendingNewTables.value.push(...tables);\n                toast.success(` ${tables.length} `);\n            });\n        }\n        // /\n        function handleToggleEnabled() {\n            if (selectedKeys.value.size === 0)\n                return;\n            //  computed \n            const action = toggleButtonState.value;\n            if (action === 'mixed')\n                return;\n            const newFreq = action === 'enable' ? -1 : 0;\n            // \n            selectedKeys.value.forEach(sheetKey => {\n                pendingFrequencyChanges.value.set(sheetKey, newFreq);\n            });\n            toast.success(action === 'enable' ? '' : '');\n        }\n        // \n        async function handleSave() {\n            // \n            if (!hasPendingChanges.value && pendingFrequencyChanges.value.size === 0) {\n                exitEditMode();\n                return;\n            }\n            const api = getCore().getDB();\n            if (!api?.getTableTemplate || !api?.importTemplateFromData) {\n                toast.error(' API ');\n                return;\n            }\n            try {\n                // 1. \n                const template = api.getTableTemplate();\n                if (!template) {\n                    toast.error('');\n                    return;\n                }\n                let changeCount = 0;\n                // 2. \n                for (const [sheetKey, newFreq] of pendingFrequencyChanges.value) {\n                    if (template[sheetKey]?.updateConfig) {\n                        template[sheetKey].updateConfig.updateFrequency = newFreq;\n                        changeCount++;\n                    }\n                }\n                // 3. \n                for (const newTable of pendingNewTables.value) {\n                    const newKey = `sheet_${newTable.uid || Date.now()}_${Math.random().toString(36).slice(2, 8)}`;\n                    template[newKey] = newTable;\n                    changeCount++;\n                }\n                // 4.  API \n                const result = await api.importTemplateFromData(template);\n                if (result.success) {\n                    toast.success(` ${changeCount} `);\n                    // \n                    exitEditMode();\n                    // \n                    await refresh();\n                }\n                else {\n                    toast.error(`: ${result.message}`);\n                }\n            }\n            catch (e) {\n                console.error('[ACU] :', e);\n                toast.error(`: ${e instanceof Error ? e.message : String(e)}`);\n            }\n        }\n        /**\n         * \n         */\n        function handleTableClick(item) {\n            emit('tableClick', item.sheetKey, item.name);\n        }\n        /**\n         * \n         */\n        function handleRowClick(item) {\n            if (isEditing.value) {\n                toggleSelect(item.sheetKey);\n            }\n            else {\n                handleTableClick(item);\n            }\n        }\n        // ============================================================\n        // Lifecycle\n        // ============================================================\n        onMounted(() => {\n            // \n            refresh();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"span\", _hoisted_3, \"  \" + _toDisplayString(_unref(statusList).length) + \"   AI \" + _toDisplayString(_unref(currentTotalAiFloors)), 1 /* TEXT */),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _createCommentVNode(\"  \"),\n                        (isEditing.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-tool-btn\",\n                                    title: \"\",\n                                    onClick: _withModifiers(toggleSelectAll, [\"stop\"])\n                                }, [...(_cache[2] || (_cache[2] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-check-double\" }, null, -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-tool-btn\",\n                                    disabled: selectedKeys.value.size === 0,\n                                    title: \"\",\n                                    onClick: _withModifiers(handleExport, [\"stop\"])\n                                }, [...(_cache[3] || (_cache[3] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-file-export\" }, null, -1 /* CACHED */)\n                                    ]))], 8 /* PROPS */, _hoisted_6),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-tool-btn\",\n                                    disabled: selectedKeys.value.size === 0,\n                                    title: \"\",\n                                    onClick: _withModifiers(handleDelete, [\"stop\"])\n                                }, [...(_cache[4] || (_cache[4] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */)\n                                    ]))], 8 /* PROPS */, _hoisted_7),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-tool-btn\",\n                                    title: \"\",\n                                    onClick: _withModifiers(handleOpenAddDialog, [\"stop\"])\n                                }, [...(_cache[5] || (_cache[5] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-tool-btn\",\n                                    disabled: selectedKeys.value.size === 0,\n                                    title: \"\",\n                                    onClick: _withModifiers(handleOpenPurgeDialog, [\"stop\"])\n                                }, [...(_cache[6] || (_cache[6] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-eraser\" }, null, -1 /* CACHED */)\n                                    ]))], 8 /* PROPS */, _hoisted_8),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-tool-btn\",\n                                    disabled: toggleButtonState.value === 'mixed' || selectedKeys.value.size === 0,\n                                    title: toggleButtonState.value === 'enable' ? '' : '',\n                                    onClick: _withModifiers(handleToggleEnabled, [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(['fas', toggleButtonState.value === 'enable' ? 'fa-play' : 'fa-ban'])\n                                    }, null, 2 /* CLASS */)\n                                ], 8 /* PROPS */, _hoisted_9)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-icon-btn\",\n                            disabled: _unref(isLoading),\n                            title: \"\",\n                            onClick: _withModifiers(handleRefresh, [\"stop\"])\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass([\"fas fa-redo\", { 'acu-animate-spin': _unref(isLoading) }])\n                            }, null, 2 /* CLASS */)\n                        ], 8 /* PROPS */, _hoisted_10),\n                        _createCommentVNode(\" / \"),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-icon-btn\",\n                            title: isEditing.value ? '' : '',\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (isEditing.value ? handleSave() : enterEditMode()), [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(['fas', isEditing.value ? 'fa-check' : 'fa-edit'])\n                            }, null, 2 /* CLASS */)\n                        ], 8 /* PROPS */, _hoisted_11)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_12, [\n                    _createElementVNode(\"table\", _hoisted_13, [\n                        _cache[9] || (_cache[9] = _createElementVNode(\"thead\", null, [\n                            _createElementVNode(\"tr\", null, [\n                                _createElementVNode(\"th\", { class: \"acu-status-col-name\" }, \"\"),\n                                _createElementVNode(\"th\", { class: \"acu-status-col-freq\" }, \"\"),\n                                _createElementVNode(\"th\", { class: \"acu-status-col-unrecorded\" }, \"\"),\n                                _createElementVNode(\"th\", { class: \"acu-status-col-last\" }, \"\")\n                            ])\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"tbody\", null, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(sortedStatusList.value, (item) => {\n                                return (_openBlock(), _createElementBlock(\"tr\", {\n                                    key: item.sheetKey,\n                                    class: _normalizeClass({\n                                        'acu-row-selected': isEditing.value && selectedKeys.value.has(item.sheetKey),\n                                        'acu-highlight-ai': hasTableAiChanges(item.name) && !isEditing.value,\n                                    }),\n                                    onClick: _withModifiers(($event) => (handleRowClick(item)), [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"td\", {\n                                        class: _normalizeClass([\"acu-status-name\", { 'acu-highlight-ai': hasTableAiChanges(item.name) && !isEditing.value }])\n                                    }, [\n                                        _createElementVNode(\"span\", {\n                                            style: _normalizeStyle({ cursor: isEditing.value ? 'default' : 'pointer' }),\n                                            onClick: _withModifiers(($event) => (isEditing.value ? null : handleTableClick(item)), [\"stop\"])\n                                        }, _toDisplayString(item.name), 13 /* TEXT, STYLE, PROPS */, _hoisted_15)\n                                    ], 2 /* CLASS */),\n                                    _createElementVNode(\"td\", _hoisted_16, [\n                                        _createCommentVNode(\"  \"),\n                                        (isEditing.value)\n                                            ? (_openBlock(), _createElementBlock(\"input\", {\n                                                key: 0,\n                                                type: \"number\",\n                                                value: getEditingFrequency(item),\n                                                min: \"-1\",\n                                                class: \"acu-freq-input\",\n                                                onInput: ($event) => (handleFrequencyChange(item.sheetKey, $event)),\n                                                onClick: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"]))\n                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_17))\n                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createCommentVNode(\"  \"),\n                                                (item.effectiveFrequency === 0)\n                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_18, \"\"))\n                                                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_19, _toDisplayString(item.effectiveFrequency), 1 /* TEXT */)),\n                                                (item.updateFrequency === -1)\n                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_20, \"()\"))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ], 64 /* STABLE_FRAGMENT */))\n                                    ]),\n                                    _createElementVNode(\"td\", {\n                                        class: _normalizeClass([\"acu-status-unrecorded\", _unref(getUnrecordedClass)(item)])\n                                    }, _toDisplayString(item.hasHistory ? item.unrecordedFloors : ''), 3 /* TEXT, CLASS */),\n                                    _createElementVNode(\"td\", _hoisted_21, [\n                                        _createCommentVNode(\" : AI/ \"),\n                                        _createTextVNode(\" \" + _toDisplayString(_unref(formatLastUpdate)(item)), 1 /* TEXT */)\n                                    ])\n                                ], 10 /* CLASS, PROPS */, _hoisted_14));\n                            }), 128 /* KEYED_FRAGMENT */)),\n                            _createCommentVNode(\"  \"),\n                            (_unref(statusList).length === 0 && !_unref(isLoading))\n                                ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_22, [...(_cache[7] || (_cache[7] = [\n                                        _createElementVNode(\"td\", {\n                                            colspan: \"4\",\n                                            class: \"acu-status-empty\"\n                                        }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-inbox\" }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            (_unref(isLoading) && _unref(statusList).length === 0)\n                                ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_23, [...(_cache[8] || (_cache[8] = [\n                                        _createElementVNode(\"td\", {\n                                            colspan: \"4\",\n                                            class: \"acu-status-loading\"\n                                        }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-spinner fa-spin\" }),\n                                            _createTextVNode(\" ... \")\n                                        ], -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TableStatusBoard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TableStatusBoard.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, createBlock as _createBlock, createVNode as _createVNode, unref as _unref, normalizeProps as _normalizeProps, guardReactiveProps as _guardReactiveProps, mergeProps as _mergeProps, normalizeStyle as _normalizeStyle, vShow as _vShow, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = [\"draggable\"];\nconst _hoisted_2 = {\n    key: 0,\n    class: \"acu-dash-count\"\n};\nconst _hoisted_3 = { class: \"acu-dash-actions\" };\nconst _hoisted_4 = [\"title\"];\nconst _hoisted_5 = [\"title\"];\nconst _hoisted_6 = [\"title\", \"onClick\"];\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = { class: \"acu-dash-npc-text\" };\nconst _hoisted_9 = [\"title\", \"onClick\"];\nconst _hoisted_10 = [\"title\", \"onClick\"];\nconst _hoisted_11 = [\"title\", \"onClick\"];\nconst _hoisted_12 = { key: 1 };\nconst _hoisted_13 = { class: \"acu-dash-npc-grid\" };\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = { class: \"acu-dash-npc-text\" };\nconst _hoisted_16 = [\"title\", \"onClick\"];\nconst _hoisted_17 = [\"title\", \"onClick\"];\nconst _hoisted_18 = [\"title\", \"onClick\"];\nconst _hoisted_19 = { key: 1 };\nconst _hoisted_20 = [\"onClick\"];\nconst _hoisted_21 = { class: \"acu-dash-list-text\" };\nconst _hoisted_22 = [\"title\", \"onClick\"];\nconst _hoisted_23 = [\"title\", \"onClick\"];\nconst _hoisted_24 = [\"title\", \"onClick\"];\nconst _hoisted_25 = [\"title\", \"onClick\"];\nconst _hoisted_26 = { key: 1 };\nconst _hoisted_27 = { class: \"acu-dash-list\" };\nconst _hoisted_28 = [\"onClick\"];\nconst _hoisted_29 = { class: \"acu-dash-list-text\" };\nconst _hoisted_30 = [\"title\", \"onClick\"];\nconst _hoisted_31 = [\"title\", \"onClick\"];\nconst _hoisted_32 = [\"title\", \"onClick\"];\nconst _hoisted_33 = [\"title\", \"onClick\"];\nconst _hoisted_34 = { key: 1 };\nconst _hoisted_35 = { class: \"acu-dash-empty\" };\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { useCoreActions } from '../../composables/useCoreActions';\nimport { useDivinationAction } from '../../composables/useDivinationAction';\nimport { LIST_ITEM_HEIGHT, useGridVirtualScroll, useListVirtualScroll } from '../../composables/useVirtualScroll';\nimport { useTagLibraryStore } from '../../stores/useTagLibraryStore';\nimport { getSmartTabIcon, useUIStore } from '../../stores/useUIStore';\nimport { WIDGET_ACTIONS } from '../../types';\nimport EmbeddedOptionsPanel from './EmbeddedOptionsPanel.vue';\nimport GlobalStatusWidget from './GlobalStatusWidget.vue';\nimport TableStatusBoard from './TableStatusBoard.vue';\n\nimport { h } from 'vue';\nconst VIRTUAL_SCROLL_THRESHOLD = 30;\n/**  */\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DashboardWidget',\n    props: {\n        config: {},\n        tableData: {},\n        isEditing: { type: Boolean },\n        diffMap: {},\n        aiDiffMap: {},\n        searchTerm: {},\n        allTables: {}\n    },\n    emits: [\"navigate\", \"row-click\", \"row-edit\", \"action\", \"remove\", \"resize\", \"config-actions\", \"drag-start\", \"drag-end\", \"drop\"],\n    setup(__props, { emit: __emit }) {\n        const uiStore = useUIStore();\n        const tagLibraryStore = useTagLibraryStore();\n        const { setInput } = useCoreActions();\n        const { performDivination } = useDivinationAction();\n        // ============================================================\n        // \n        // ============================================================\n        onMounted(async () => {\n            // \n            await tagLibraryStore.loadLibrary();\n        });\n        // Props\n        const props = __props;\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const isCollapsed = ref(false);\n        /**  */\n        let previousCollapsedState = false;\n        /** Infinity  */\n        const currentMaxLevel = ref(Infinity);\n        /** / */\n        const collapsedPaths = ref(new Set());\n        // \n        watch(() => props.isEditing, editing => {\n            if (editing) {\n                // \n                previousCollapsedState = isCollapsed.value;\n                isCollapsed.value = true;\n            }\n            else {\n                // \n                isCollapsed.value = previousCollapsedState;\n            }\n        }, { immediate: true });\n        // Emits\n        const emit = __emit;\n        // ============================================================\n        // Computed\n        // ============================================================\n        /**  */\n        const totalCount = computed(() => props.tableData?.rows.length ?? 0);\n        /**  */\n        const rowCount = computed(() => displayRows.value.length);\n        /**  -  */\n        const displayTitle = computed(() => {\n            // \n            if (props.tableData?.name) {\n                return props.tableData.name;\n            }\n            // \n            return props.config.title;\n        });\n        /**  -  */\n        const displayIcon = computed(() => {\n            // 1. \n            if (props.config.icon && props.config.icon !== 'fa-table') {\n                return props.config.icon;\n            }\n            // 2. \n            const titleToMatch = props.tableData?.name || props.config.title;\n            if (titleToMatch) {\n                const smartIcon = getSmartTabIcon(titleToMatch);\n                //  'fas '  ['fas', icon]\n                return smartIcon.replace('fas ', '');\n            }\n            return 'fa-table';\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /** \"\" */\n        const hierarchyColumn = computed(() => {\n            if (!props.tableData)\n                return null;\n            return props.tableData.headers.find(h => h.includes('')) ?? null;\n        });\n        /**  */\n        const isHierarchyMode = computed(() => !!hierarchyColumn.value);\n        /**\n         * \n         *  A //\n         *  B /\n         * \n         */\n        function getRowFullPath(row) {\n            const displayValue = getDisplayValue(row);\n            if (!hierarchyColumn.value)\n                return displayValue;\n            const cell = row.cells.find(c => c.key === hierarchyColumn.value);\n            const hierarchyValue = cell?.value ? String(cell.value).trim() : '';\n            // \n            if (!hierarchyValue) {\n                return displayValue;\n            }\n            // \n            const lastPart = hierarchyValue.split('/').pop() ?? '';\n            if (lastPart === displayValue) {\n                //  A\n                return hierarchyValue;\n            }\n            else {\n                //  B\n                return hierarchyValue + '/' + displayValue;\n            }\n        }\n        /**\n         * \n         */\n        function getRowParentPath(row) {\n            const fullPath = getRowFullPath(row);\n            const lastSlash = fullPath.lastIndexOf('/');\n            return lastSlash > 0 ? fullPath.substring(0, lastSlash) : '';\n        }\n        /**  /  */\n        function getRowLevel(row) {\n            const fullPath = getRowFullPath(row);\n            if (!fullPath)\n                return 1;\n            //  /  + 1 = \n            return (fullPath.match(/\\//g) || []).length + 1;\n        }\n        /**  */\n        function rowHasChildren(row) {\n            if (!props.tableData || !isHierarchyMode.value)\n                return false;\n            const rowPath = getRowFullPath(row);\n            // \n            return props.tableData.rows.some(otherRow => {\n                if (otherRow.key === row.key)\n                    return false;\n                const otherPath = getRowFullPath(otherRow);\n                return otherPath.startsWith(rowPath + '/');\n            });\n        }\n        /**  */\n        function isRowCollapsed(row) {\n            const parentPath = getRowParentPath(row);\n            if (!parentPath)\n                return false;\n            // \n            const pathParts = parentPath.split('/');\n            let currentPath = '';\n            for (const part of pathParts) {\n                currentPath = currentPath ? currentPath + '/' + part : part;\n                if (collapsedPaths.value.has(currentPath)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n        /**  */\n        function toggleRowCollapse(row) {\n            const rowPath = getRowFullPath(row);\n            if (collapsedPaths.value.has(rowPath)) {\n                collapsedPaths.value.delete(rowPath);\n            }\n            else {\n                collapsedPaths.value.add(rowPath);\n            }\n            // \n            collapsedPaths.value = new Set(collapsedPaths.value);\n        }\n        /**  */\n        function isRowExpanded(row) {\n            const rowPath = getRowFullPath(row);\n            return !collapsedPaths.value.has(rowPath);\n        }\n        /**  */\n        const maxLevelInData = computed(() => {\n            if (!isHierarchyMode.value || !props.tableData)\n                return 1;\n            let maxLevel = 1;\n            for (const row of props.tableData.rows) {\n                const level = getRowLevel(row);\n                if (level > maxLevel)\n                    maxLevel = level;\n            }\n            return maxLevel;\n        });\n        /**  */\n        const isFullyExpanded = computed(() => {\n            return currentMaxLevel.value >= maxLevelInData.value;\n        });\n        /**  */\n        function goBackLevel() {\n            if (currentMaxLevel.value > 1) {\n                //  Infinity  - 1\n                if (currentMaxLevel.value === Infinity || currentMaxLevel.value > maxLevelInData.value) {\n                    currentMaxLevel.value = maxLevelInData.value - 1;\n                }\n                else {\n                    currentMaxLevel.value--;\n                }\n            }\n        }\n        /** / */\n        function toggleExpandCollapse() {\n            if (isFullyExpanded.value) {\n                //    1 \n                currentMaxLevel.value = 1;\n                // \n                if (props.tableData) {\n                    const newCollapsed = new Set();\n                    for (const row of props.tableData.rows) {\n                        if (rowHasChildren(row)) {\n                            newCollapsed.add(getRowFullPath(row));\n                        }\n                    }\n                    collapsedPaths.value = newCollapsed;\n                }\n            }\n            else {\n                //   \n                currentMaxLevel.value = Infinity;\n                // \n                collapsedPaths.value = new Set();\n            }\n        }\n        /**  1  */\n        const canGoBack = computed(() => {\n            return currentMaxLevel.value > 1;\n        });\n        /**  &&  1  */\n        const showBackButton = computed(() => {\n            return isHierarchyMode.value && canGoBack.value;\n        });\n        /** / &&  1  */\n        const showExpandCollapseButton = computed(() => {\n            return isHierarchyMode.value && maxLevelInData.value > 1;\n        });\n        // ============================================================\n        // AI \n        // ============================================================\n        /**  AI  */\n        function isRowAiChanged(row) {\n            if (!props.tableData || !props.aiDiffMap)\n                return false;\n            const tableName = props.tableData.name;\n            //  rowKey : tableName-row-rowIndex\n            const rowKey = `${tableName}-row-${row.index}`;\n            if (props.aiDiffMap.has(rowKey))\n                return true;\n            //  cellKey : tableName-rowIndex-colIndex\n            //  AI  cellKey\n            for (let colIdx = 0; colIdx < row.cells.length; colIdx++) {\n                const cellKey = `${tableName}-${row.index}-${colIdx}`;\n                if (props.aiDiffMap.has(cellKey))\n                    return true;\n            }\n            return false;\n        }\n        /**  AI  */\n        const hasAiUpdate = computed(() => {\n            if (!props.tableData || !props.aiDiffMap)\n                return false;\n            return props.tableData.rows.some(row => isRowAiChanged(row));\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function isRowMatchSearch(row) {\n            if (!props.searchTerm)\n                return false;\n            const searchLower = props.searchTerm.toLowerCase().trim();\n            if (!searchLower)\n                return false;\n            return row.cells.some(cell => String(cell.value).toLowerCase().includes(searchLower));\n        }\n        // ============================================================\n        // +\n        // ============================================================\n        /**\n         * \n         * - \n         * - \n         */\n        function sortByHierarchy(rows) {\n            // \n            const pathToIndex = new Map();\n            for (const row of rows) {\n                pathToIndex.set(getRowFullPath(row), row.index);\n            }\n            return [...rows].sort((a, b) => {\n                const pathA = getRowFullPath(a);\n                const pathB = getRowFullPath(b);\n                // \n                if (pathA === pathB) {\n                    return a.index - b.index;\n                }\n                // \n                if (pathB.startsWith(pathA + '/')) {\n                    // B  A A \n                    return -1;\n                }\n                if (pathA.startsWith(pathB + '/')) {\n                    // A  B B \n                    return 1;\n                }\n                // \n                const partsA = pathA.split('/');\n                const partsB = pathB.split('/');\n                // \n                let commonPrefixLength = 0;\n                for (let i = 0; i < Math.min(partsA.length, partsB.length); i++) {\n                    if (partsA[i] !== partsB[i]) {\n                        break;\n                    }\n                    commonPrefixLength = i + 1;\n                }\n                // \n                const branchPathA = partsA.slice(0, commonPrefixLength + 1).join('/');\n                const branchPathB = partsB.slice(0, commonPrefixLength + 1).join('/');\n                // \n                const branchIndexA = pathToIndex.get(branchPathA);\n                const branchIndexB = pathToIndex.get(branchPathB);\n                if (branchIndexA !== undefined && branchIndexB !== undefined) {\n                    // \n                    return branchIndexA - branchIndexB;\n                }\n                // \n                return branchPathA.localeCompare(branchPathB);\n            });\n        }\n        /**\n         * +\n         * - : \n         * - :  + \n         * - : AI \n         */\n        const displayRows = computed(() => {\n            if (!props.tableData)\n                return [];\n            let rows = [...props.tableData.rows];\n            // \n            if (props.searchTerm) {\n                rows = rows.filter(row => isRowMatchSearch(row));\n            }\n            // \n            if (isHierarchyMode.value && currentMaxLevel.value !== Infinity) {\n                rows = rows.filter(row => getRowLevel(row) <= currentMaxLevel.value);\n            }\n            // \n            if (isHierarchyMode.value && collapsedPaths.value.size > 0) {\n                rows = rows.filter(row => !isRowCollapsed(row));\n            }\n            // \n            if (isHierarchyMode.value) {\n                rows = sortByHierarchy(rows);\n                // AI \n                // \n                return rows;\n            }\n            // AI \n            return rows.sort((a, b) => {\n                const aAi = isRowAiChanged(a);\n                const bAi = isRowAiChanged(b);\n                if (aAi !== bAi)\n                    return bAi ? 1 : -1;\n                return a.index - b.index;\n            });\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const useVirtual = computed(() => displayRows.value.length > VIRTUAL_SCROLL_THRESHOLD);\n        // \n        const { list: virtualListRows, containerProps: listContainerProps, wrapperProps: listWrapperProps, } = useListVirtualScroll(displayRows);\n        // \n        const { list: virtualGridRowGroups, containerProps: gridContainerProps, wrapperProps: gridWrapperProps, } = useGridVirtualScroll(displayRows);\n        /**  class */\n        const bodyClass = computed(() => ({\n            'acu-dash-body-scrollable': true,\n        }));\n        // ============================================================\n        //  - \n        // ============================================================\n        /**\n         * \n         * \n         */\n        const displayedInteractiveTags = computed(() => {\n            const config = props.config;\n            const displayedIds = config?.widgetTagConfig?.displayedTagIds || [];\n            return displayedIds\n                .map(id => tagLibraryStore.getTagById(id))\n                .filter((tag) => tag !== undefined);\n        });\n        /**\n         * \n         * \n         */\n        const displayedCategories = computed(() => {\n            const config = props.config;\n            const displayedIds = config?.widgetTagConfig?.displayedCategoryIds || [];\n            return displayedIds\n                .map(id => tagLibraryStore.getCategoryById(id))\n                .filter((cat) => cat !== undefined);\n        });\n        /**\n         * \n         */\n        function getCategoryDisplayName(category) {\n            const parts = category.path.split('/');\n            return parts[parts.length - 1];\n        }\n        /**\n         * \n         *  emoji  emoji\n         */\n        function getCategoryButtonLabel(category) {\n            //  iconemoji emoji\n            if (category.icon) {\n                return category.icon;\n            }\n            //  emoji\n            return getCategoryDisplayName(category);\n        }\n        function isFontAwesome(icon) {\n            return icon.startsWith('fa') || icon.includes(' fa-');\n        }\n        /**  goToTable  */\n        const filteredActions = computed(() => {\n            return props.config.actions.filter(actionId => actionId !== 'goToTable');\n        });\n        /**  goToTable  settings settings  */\n        const filteredActionsNoSettings = computed(() => {\n            return props.config.actions.filter(actionId => actionId !== 'goToTable' && actionId !== 'settings');\n        });\n        // ============================================================\n        // Methods - \n        // ============================================================\n        /**\n         *  ( titleColumn displayColumns)\n         */\n        /**\n         * \n         * >1 \n         */\n        function getTagCount(row) {\n            const displayTagsCount = getDisplayTags(row).length;\n            const interactiveTagsCount = getInteractiveTags(row).length;\n            // displayedInteractiveTags  displayedCategories \n            const staticTagsCount = displayedInteractiveTags.value.length;\n            const categoryTagsCount = displayedCategories.value.length;\n            return displayTagsCount + interactiveTagsCount + staticTagsCount + categoryTagsCount;\n        }\n        /**\n         *  ( titleColumn displayColumns)\n         */\n        function getDisplayValue(row) {\n            const { titleColumn, displayColumns } = props.config;\n            //  titleColumn\n            if (titleColumn) {\n                const cell = row.cells.find(c => c.key.toLowerCase() === titleColumn.toLowerCase() || c.key.toLowerCase().includes(titleColumn.toLowerCase()));\n                if (cell && cell.value) {\n                    return String(cell.value);\n                }\n            }\n            //  displayColumns\n            if (displayColumns.length > 0) {\n                for (const colName of displayColumns) {\n                    const cell = row.cells.find(c => c.key.toLowerCase().includes(colName.toLowerCase()));\n                    if (cell && cell.value) {\n                        return String(cell.value);\n                    }\n                }\n            }\n            // \n            const firstCell = row.cells.find(c => c.value && String(c.value).trim());\n            return firstCell ? String(firstCell.value) : ` ${row.index + 1}`;\n        }\n        /**\n         *  ()\n         * \n         */\n        function getSecondaryValue(row) {\n            const { displayColumns } = props.config;\n            const primaryValue = getDisplayValue(row);\n            // \n            if (displayColumns.length > 1) {\n                // \n                for (let i = 1; i < displayColumns.length; i++) {\n                    const colName = displayColumns[i];\n                    const cell = row.cells.find(c => c.key.toLowerCase().includes(colName.toLowerCase()));\n                    if (cell && cell.value) {\n                        const val = String(cell.value);\n                        // \n                        if (val !== primaryValue) {\n                            return val;\n                        }\n                    }\n                }\n            }\n            return null;\n        }\n        /**\n         * \n         */\n        function isRowChanged(row) {\n            if (!props.tableData)\n                return false;\n            const tableName = props.tableData.name;\n            //  rowKey : tableName-row-rowIndex\n            const rowKey = `${tableName}-row-${row.index}`;\n            if (props.diffMap.has(rowKey))\n                return true;\n            //  cellKey : tableName-rowIndex-colIndex\n            for (let colIdx = 0; colIdx < row.cells.length; colIdx++) {\n                const cellKey = `${tableName}-${row.index}-${colIdx}`;\n                if (props.diffMap.has(cellKey))\n                    return true;\n            }\n            return false;\n        }\n        /**\n         *  ( displayTagColumns )\n         */\n        function getDisplayTags(row) {\n            const displayTagColumns = props.config.displayTagColumns;\n            if (!displayTagColumns || displayTagColumns.length === 0) {\n                return [];\n            }\n            const tags = [];\n            for (const colName of displayTagColumns) {\n                // \n                const cell = row.cells.find(c => c.key.toLowerCase() === colName.toLowerCase() || c.key.toLowerCase().includes(colName.toLowerCase()));\n                if (cell && cell.value) {\n                    const value = String(cell.value).trim();\n                    if (value) {\n                        tags.push({ column: colName, value });\n                    }\n                }\n            }\n            return tags;\n        }\n        /**  */\n        const TAG_SEPARATORS = /[,;|/]/;\n        /**\n         *  ( interactiveTagConfig )\n         * \n         */\n        function getInteractiveTags(row) {\n            const tagConfig = props.config.interactiveTagConfig;\n            if (!tagConfig || tagConfig.sourceColumns.length === 0) {\n                return [];\n            }\n            const result = [];\n            const tagDefinitions = tagConfig.tagDefinitions || [];\n            // \n            for (const colName of tagConfig.sourceColumns) {\n                const cell = row.cells.find(c => c.key.toLowerCase() === colName.toLowerCase() || c.key.toLowerCase().includes(colName.toLowerCase()));\n                if (cell && cell.value) {\n                    const rawValue = String(cell.value).trim();\n                    if (!rawValue)\n                        continue;\n                    // \n                    const values = rawValue\n                        .split(TAG_SEPARATORS)\n                        .map(v => v.trim())\n                        .filter(Boolean);\n                    for (const value of values) {\n                        // \n                        const matchedDef = tagDefinitions.find(def => def.label.toLowerCase() === value.toLowerCase());\n                        if (matchedDef) {\n                            // \n                            result.push({ tag: matchedDef, value, matchedDefinition: true });\n                        }\n                        else {\n                            // \n                            const defaultTag = {\n                                id: `dynamic_${value}`,\n                                label: value,\n                                promptTemplate: '{{value}}', // \n                                isFixed: false,\n                            };\n                            result.push({ tag: defaultTag, value, matchedDefinition: false });\n                        }\n                    }\n                }\n            }\n            return result;\n        }\n        /**\n         *  tooltip\n         */\n        function getTagTooltip(tag) {\n            if (!tag.promptTemplate)\n                return tag.label;\n            // \n            let preview = tag.promptTemplate;\n            preview = preview.replace(/\\{\\{value\\}\\}/gi, `[${tag.label}]`);\n            preview = preview.replace(/\\{\\{rowTitle\\}\\}/gi, '[]');\n            preview = preview.replace(/\\{\\{playerName\\}\\}/gi, '[]');\n            return preview.length > 50 ? preview.substring(0, 50) + '...' : preview;\n        }\n        /**\n         *  - TagDefinition\n         * @param tag \n         * @param row \n         */\n        function handleInteractiveTagClick(tag, row) {\n            // \n            let prompt = tag.promptTemplate;\n            // {{value}} - \n            prompt = prompt.replace(/\\{\\{value\\}\\}/gi, tag.label);\n            // {{rowTitle}} - \n            const rowTitle = getDisplayValue(row);\n            prompt = prompt.replace(/\\{\\{rowTitle\\}\\}/gi, rowTitle);\n            // {{playerName}} - \n            const playerName = getPlayerName();\n            prompt = prompt.replace(/\\{\\{playerName\\}\\}/gi, playerName);\n            // {{tableName}} - \n            const tableName = props.tableData?.name || props.config.title || '';\n            prompt = prompt.replace(/\\{\\{tableName\\}\\}/gi, tableName);\n            // \n            if (prompt) {\n                setInput(prompt);\n            }\n        }\n        /**\n         * \n         * @param tag \n         * @param rowData \n         * @returns \n         */\n        function resolveTagPrompt(tag, rowData) {\n            let prompt = tag.promptTemplate;\n            // {{value}} - \n            prompt = prompt.replace(/\\{\\{value\\}\\}/gi, tag.label);\n            // {{rowTitle}} - \n            if (rowData?.title) {\n                prompt = prompt.replace(/\\{\\{rowTitle\\}\\}/gi, rowData.title);\n            }\n            else {\n                prompt = prompt.replace(/\\{\\{rowTitle\\}\\}/gi, '');\n            }\n            // {{playerName}} -  {{user}}\n            const playerName = getPlayerName();\n            prompt = prompt.replace(/\\{\\{playerName\\}\\}/gi, playerName);\n            // {{tableName}} - \n            const tableName = props.tableData?.name || props.config.title || '';\n            prompt = prompt.replace(/\\{\\{tableName\\}\\}/gi, tableName);\n            return prompt.trim();\n        }\n        /**\n         * InteractiveTag\n         * @param tag \n         * @param rowData \n         */\n        function handleNewInteractiveTagClick(tag, rowData) {\n            const resolvedPrompt = resolveTagPrompt(tag, rowData);\n            // \n            const category = tagLibraryStore.getCategoryById(tag.categoryId);\n            const isLocation = category ? category.path.includes('') || category.path.includes('Location') : false;\n            // \n            // \n            if (tag.allowPreEdit || isLocation) {\n                // \n                uiStore.openTagPreEditDialog({\n                    tagLabel: tag.label,\n                    resolvedPrompt,\n                    showCompanions: isLocation,\n                    widgetId: props.config.id,\n                });\n            }\n            else if (resolvedPrompt) {\n                // \n                setInput(resolvedPrompt);\n            }\n        }\n        /**\n         * \n         * @param category \n         * @param rowData \n         */\n        function handleCategoryClick(category, rowData) {\n            uiStore.openCategorySelectDialog({\n                categoryId: category.id,\n                rowContext: rowData,\n                widgetId: props.config.id,\n            });\n        }\n        /**\n         * \n         * @param tag \n         * @param rowContext \n         */\n        function handleCategoryTagSelect(tag, rowContext) {\n            handleNewInteractiveTagClick(tag, rowContext);\n        }\n        /**\n         *  tooltip\n         */\n        function getNewTagTooltip(tag) {\n            if (!tag.promptTemplate)\n                return tag.label;\n            // \n            let preview = tag.promptTemplate;\n            preview = preview.replace(/\\{\\{value\\}\\}/gi, `[${tag.label}]`);\n            preview = preview.replace(/\\{\\{rowTitle\\}\\}/gi, '[]');\n            preview = preview.replace(/\\{\\{playerName\\}\\}/gi, '[]');\n            preview = preview.replace(/\\{\\{tableName\\}\\}/gi, '[]');\n            return preview.length > 50 ? preview.substring(0, 50) + '...' : preview;\n        }\n        /**\n         * \n         */\n        function getPlayerName() {\n            const parentWin = window.parent || window;\n            try {\n                const ctx = parentWin.SillyTavern?.getContext?.();\n                if (ctx?.name1) {\n                    return ctx.name1;\n                }\n            }\n            catch (e) {\n                console.warn('[ACU] ', e);\n            }\n            return '{{user}}';\n        }\n        // ============================================================\n        // Methods - \n        // ============================================================\n        /**\n         * \n         */\n        function handleConfigActions() {\n            uiStore.openWidgetActionsDialog({\n                widgetId: props.config.id,\n                currentActions: props.config.actions,\n            });\n        }\n        function getActionIcon(actionId) {\n            return WIDGET_ACTIONS[actionId]?.icon ?? 'fa-question';\n        }\n        function hasSecondaryIcon(actionId) {\n            return !!WIDGET_ACTIONS[actionId]?.secondaryIcon;\n        }\n        function getSecondaryIcon(actionId) {\n            return WIDGET_ACTIONS[actionId]?.secondaryIcon ?? '';\n        }\n        function getActionTooltip(actionId) {\n            return WIDGET_ACTIONS[actionId]?.tooltip ?? actionId;\n        }\n        function handleAction(actionId) {\n            // \n            if (actionId === 'settings') {\n                // headers  string[]\n                const tableHeaders = props.tableData?.headers ?? [];\n                uiStore.openWidgetSettingsDialog({\n                    widgetId: props.config.id,\n                    widgetConfig: props.config,\n                    tableHeaders,\n                });\n                return;\n            }\n            // \n            if (actionId === 'nativeEdit') {\n                //  tableId \n                openNativeEditor(props.config.tableId);\n                return;\n            }\n            // \n            if (actionId === 'divination') {\n                performDivination();\n                return;\n            }\n            // \n            //  tableId ( updateStatus )\n            // App.vue  tableId ( manualUpdate)\n            emit('action', actionId, props.config.tableId || '');\n        }\n        /**\n         * \n         * @param tableId  ID ( tableId )\n         */\n        function openNativeEditor(tableId) {\n            try {\n                const parentWin = window.parent || window;\n                const api = parentWin.AutoCardUpdaterAPI;\n                if (tableId && api?.openTableEditor) {\n                    //  tableId\n                    api.openTableEditor(tableId);\n                }\n                else if (api?.openVisualizer) {\n                    //  tableId\n                    api.openVisualizer();\n                    console.info('[ACU] ');\n                    // \n                    uiStore.isCollapsed = true;\n                }\n                else if (api?.openModal) {\n                    // \n                    api.openModal();\n                }\n                else {\n                    console.warn('[ACU] API ');\n                }\n            }\n            catch (e) {\n                console.error('[ACU] ', e);\n            }\n        }\n        // ============================================================\n        // Methods - \n        // ============================================================\n        function handleNavigate() {\n            if (props.config.tableId) {\n                emit('navigate', props.config.tableId);\n            }\n        }\n        /**\n         * \n         * @param tableId  ID\n         */\n        function handleStatusTableClick(tableId) {\n            emit('navigate', tableId);\n        }\n        /**\n         *  - \n         */\n        function handleTitleTextClick() {\n            if (!props.isEditing && props.config.tableId) {\n                emit('navigate', props.config.tableId);\n            }\n        }\n        /**\n         * - /\n         */\n        function handleTitleAreaClick() {\n            if (!props.isEditing) {\n                isCollapsed.value = !isCollapsed.value;\n            }\n        }\n        /**\n         *  - \n         * ()\n         */\n        function handleRowClick(row) {\n            if (props.config.tableId) {\n                emit('row-edit', props.config.tableId, row);\n            }\n        }\n        function handleEditRow(row) {\n            if (props.config.tableId) {\n                emit('row-edit', props.config.tableId, row);\n            }\n        }\n        // ============================================================\n        // Methods - \n        // ============================================================\n        /**\n         * \n         */\n        function startResize(e) {\n            e.preventDefault();\n            // : 1 -> 2, 2 -> 1\n            const newColSpan = props.config.colSpan === 1 ? 2 : 1;\n            emit('resize', props.config.id, newColSpan);\n        }\n        /**\n         * \n         */\n        function handleDragStart(e) {\n            if (!props.isEditing) {\n                e.preventDefault();\n                return;\n            }\n            e.dataTransfer?.setData('text/plain', props.config.id);\n            emit('drag-start', props.config.id);\n        }\n        /**\n         * \n         */\n        function handleDragEnd() {\n            emit('drag-end');\n        }\n        /**\n         * \n         */\n        function handleDrop(e) {\n            e.preventDefault();\n            emit('drop', props.config.id);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"acu-dash-widget\", {\n                        'acu-dash-widget-wide': __props.config.colSpan === 2,\n                        'acu-dash-widget-editing': __props.isEditing,\n                        'acu-highlight-ai-table': hasAiUpdate.value && !__props.searchTerm,\n                    }]),\n                draggable: __props.isEditing,\n                onDragstart: handleDragStart,\n                onDragend: handleDragEnd,\n                onDragover: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"prevent\"])),\n                onDrop: handleDrop\n            }, [\n                _createCommentVNode(\"  () \"),\n                (__props.isEditing)\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                        _createElementVNode(\"button\", {\n                            class: \"acu-widget-remove\",\n                            title: \"\",\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (emit('remove', __props.config.id)), [\"stop\"]))\n                        }, [...(_cache[3] || (_cache[3] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-widget-config\",\n                            title: \"\",\n                            onClick: _withModifiers(handleConfigActions, [\"stop\"])\n                        }, [...(_cache[4] || (_cache[4] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"div\", {\n                            class: \"acu-widget-resize\",\n                            title: \"\",\n                            onMousedown: _withModifiers(startResize, [\"stop\"]),\n                            onTouchstart: _withModifiers(startResize, [\"stop\"])\n                        }, [...(_cache[5] || (_cache[5] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-expand-alt\" }, null, -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */)\n                    ], 64 /* STABLE_FRAGMENT */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  - / \"),\n                _createCommentVNode(\"  \"),\n                (__props.config.displayStyle !== 'global' || __props.isEditing)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 1,\n                        class: _normalizeClass([\"acu-dash-title\", { 'acu-dash-title-clickable': !__props.isEditing }]),\n                        style: { \"font-size\": \"1.2em !important\" },\n                        onClick: handleTitleAreaClick\n                    }, [\n                        _createElementVNode(\"span\", {\n                            class: \"acu-dash-title-text\",\n                            onClick: _withModifiers(handleTitleTextClick, [\"stop\"])\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(['fas', displayIcon.value])\n                            }, null, 2 /* CLASS */),\n                            _createTextVNode(\" \" + _toDisplayString(displayTitle.value) + \" \", 1 /* TEXT */),\n                            (rowCount.value > 0)\n                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, _toDisplayString(rowCount.value), 1 /* TEXT */))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createCommentVNode(\" 1 \"),\n                            (showBackButton.value)\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 0,\n                                    class: \"acu-icon-btn\",\n                                    title: \"\",\n                                    onClick: _withModifiers(goBackLevel, [\"stop\"])\n                                }, [...(_cache[6] || (_cache[6] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-arrow-left\" }, null, -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" / \"),\n                            (showExpandCollapseButton.value)\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 1,\n                                    class: \"acu-icon-btn\",\n                                    title: isFullyExpanded.value ? '' : '',\n                                    onClick: _withModifiers(toggleExpandCollapse, [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(['fas', isFullyExpanded.value ? 'fa-compress-alt' : 'fa-expand-alt'])\n                                    }, null, 2 /* CLASS */)\n                                ], 8 /* PROPS */, _hoisted_4))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  (updateStatus ) \"),\n                            (__props.config.type !== 'updateStatus')\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 2,\n                                    class: \"acu-icon-btn\",\n                                    title: getActionTooltip('settings'),\n                                    onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (handleAction('settings')), [\"stop\"]))\n                                }, [...(_cache[7] || (_cache[7] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-cog\" }, null, -1 /* CACHED */)\n                                    ]))], 8 /* PROPS */, _hoisted_5))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredActionsNoSettings.value, (actionId) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: actionId,\n                                    class: _normalizeClass([\"acu-icon-btn\", { 'acu-dual-icon': hasSecondaryIcon(actionId) }]),\n                                    title: getActionTooltip(actionId),\n                                    onClick: _withModifiers(($event) => (handleAction(actionId)), [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(['fas', getActionIcon(actionId)])\n                                    }, null, 2 /* CLASS */),\n                                    (hasSecondaryIcon(actionId))\n                                        ? (_openBlock(), _createElementBlock(\"i\", {\n                                            key: 0,\n                                            class: _normalizeClass([\"fas icon-secondary\", getSecondaryIcon(actionId)])\n                                        }, null, 2 /* CLASS */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 10 /* CLASS, PROPS */, _hoisted_6));\n                            }), 128 /* KEYED_FRAGMENT */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass([\"fas acu-dash-collapse-icon\", isCollapsed.value ? 'fa-chevron-down' : 'fa-chevron-up'])\n                            }, null, 2 /* CLASS */)\n                        ])\n                    ], 2 /* CLASS */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  (, ) \"),\n                _withDirectives(_createElementVNode(\"div\", {\n                    class: _normalizeClass([\"acu-dash-body\", bodyClass.value])\n                }, [\n                    _createCommentVNode(\" :  \"),\n                    (__props.config.type === 'updateStatus')\n                        ? (_openBlock(), _createBlock(TableStatusBoard, {\n                            key: 0,\n                            onTableClick: handleStatusTableClick\n                        }))\n                        : (__props.config.type === 'optionsPanel')\n                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                _createCommentVNode(\" :  \"),\n                                _createVNode(EmbeddedOptionsPanel, {\n                                    tables: __props.allTables ?? [],\n                                    onNavigate: handleNavigate\n                                }, null, 8 /* PROPS */, [\"tables\"])\n                            ], 64 /* STABLE_FRAGMENT */))\n                            : (__props.config.displayStyle === 'global')\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createCommentVNode(\"  () \"),\n                                    _createVNode(GlobalStatusWidget, {\n                                        \"table-data\": __props.tableData,\n                                        \"is-editing\": __props.isEditing,\n                                        onRowClick: handleRowClick\n                                    }, null, 8 /* PROPS */, [\"table-data\", \"is-editing\"])\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (__props.tableData && displayRows.value.length > 0)\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createCommentVNode(\" ============================================================ \"),\n                                        _createCommentVNode(\"  (NPC) -  \"),\n                                        _createCommentVNode(\" ============================================================ \"),\n                                        (__props.config.displayStyle === 'grid')\n                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                                _createCommentVNode(\"  \"),\n                                                (useVirtual.value)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _mergeProps({ key: 0 }, _unref(gridContainerProps), { class: \"acu-dash-virtual-container\" }), [\n                                                        _createElementVNode(\"div\", _normalizeProps(_guardReactiveProps(_unref(gridWrapperProps))), [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(virtualGridRowGroups), ({ data: rowGroup, index: groupIndex }) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: groupIndex,\n                                                                    class: \"acu-dash-npc-grid\"\n                                                                }, [\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(rowGroup, (row) => {\n                                                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                                                            key: row.key,\n                                                                            class: _normalizeClass([\"acu-dash-npc-item acu-dash-interactive\", {\n                                                                                    'acu-highlight-changed': isRowChanged(row),\n                                                                                    'acu-highlight-ai': isRowAiChanged(row) && !__props.searchTerm,\n                                                                                }]),\n                                                                            onClick: _withModifiers(($event) => (handleRowClick(row)), [\"stop\"])\n                                                                        }, [\n                                                                            _createElementVNode(\"span\", _hoisted_8, _toDisplayString(getDisplayValue(row)), 1 /* TEXT */),\n                                                                            _createCommentVNode(\"  \"),\n                                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getDisplayTags(row), (tag) => {\n                                                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                                                    key: tag.column,\n                                                                                    class: \"acu-dash-display-tag\"\n                                                                                }, _toDisplayString(tag.value), 1 /* TEXT */));\n                                                                            }), 128 /* KEYED_FRAGMENT */)),\n                                                                            _createCommentVNode(\"  \"),\n                                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getInteractiveTags(row), (item) => {\n                                                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                                                    key: item.tag.id,\n                                                                                    class: _normalizeClass([\"acu-dash-interactive-tag\", { fixed: item.tag.isFixed }]),\n                                                                                    title: getTagTooltip(item.tag),\n                                                                                    onClick: _withModifiers(($event) => (handleInteractiveTagClick(item.tag, row)), [\"stop\"])\n                                                                                }, _toDisplayString(item.value), 11 /* TEXT, CLASS, PROPS */, _hoisted_9));\n                                                                            }), 128 /* KEYED_FRAGMENT */)),\n                                                                            _createCommentVNode(\"  -  \"),\n                                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayedInteractiveTags.value, (newTag) => {\n                                                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                                                    key: newTag.id,\n                                                                                    class: \"acu-dash-category-btn\",\n                                                                                    title: getNewTagTooltip(newTag),\n                                                                                    onClick: _withModifiers(($event) => (handleNewInteractiveTagClick(newTag, { title: getDisplayValue(row), value: getDisplayValue(row) })), [\"stop\"])\n                                                                                }, _toDisplayString(newTag.label), 9 /* TEXT, PROPS */, _hoisted_10));\n                                                                            }), 128 /* KEYED_FRAGMENT */)),\n                                                                            _createCommentVNode(\"  \"),\n                                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayedCategories.value, (category) => {\n                                                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                                                    key: category.id,\n                                                                                    class: \"acu-dash-category-btn\",\n                                                                                    title: ` ${getCategoryDisplayName(category)} `,\n                                                                                    onClick: _withModifiers(($event) => (handleCategoryClick(category, { title: getDisplayValue(row), value: getDisplayValue(row) })), [\"stop\"])\n                                                                                }, [\n                                                                                    (isFontAwesome(getCategoryButtonLabel(category)))\n                                                                                        ? (_openBlock(), _createElementBlock(\"i\", {\n                                                                                            key: 0,\n                                                                                            class: _normalizeClass(getCategoryButtonLabel(category))\n                                                                                        }, null, 2 /* CLASS */))\n                                                                                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_12, _toDisplayString(getCategoryButtonLabel(category)), 1 /* TEXT */))\n                                                                                ], 8 /* PROPS */, _hoisted_11));\n                                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                                        ], 10 /* CLASS, PROPS */, _hoisted_7));\n                                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                                ]));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ], 16 /* FULL_PROPS */)\n                                                    ], 16 /* FULL_PROPS */))\n                                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                        _createCommentVNode(\"  \"),\n                                                        _createElementVNode(\"div\", _hoisted_13, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayRows.value, (row) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: row.key,\n                                                                    class: _normalizeClass([\"acu-dash-npc-item acu-dash-interactive\", {\n                                                                            'acu-highlight-changed': isRowChanged(row),\n                                                                            'acu-highlight-ai': isRowAiChanged(row) && !__props.searchTerm,\n                                                                        }]),\n                                                                    onClick: _withModifiers(($event) => (handleRowClick(row)), [\"stop\"])\n                                                                }, [\n                                                                    _createElementVNode(\"span\", _hoisted_15, _toDisplayString(getDisplayValue(row)), 1 /* TEXT */),\n                                                                    _createCommentVNode(\"  \"),\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getDisplayTags(row), (tag) => {\n                                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                                            key: tag.column,\n                                                                            class: \"acu-dash-display-tag\"\n                                                                        }, _toDisplayString(tag.value), 1 /* TEXT */));\n                                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                                    _createCommentVNode(\"  \"),\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getInteractiveTags(row), (item) => {\n                                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                                            key: item.tag.id,\n                                                                            class: _normalizeClass([\"acu-dash-interactive-tag\", { fixed: item.tag.isFixed }]),\n                                                                            title: getTagTooltip(item.tag),\n                                                                            onClick: _withModifiers(($event) => (handleInteractiveTagClick(item.tag, row)), [\"stop\"])\n                                                                        }, _toDisplayString(item.value), 11 /* TEXT, CLASS, PROPS */, _hoisted_16));\n                                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                                    _createCommentVNode(\"  -  \"),\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayedInteractiveTags.value, (newTag) => {\n                                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                                            key: newTag.id,\n                                                                            class: \"acu-dash-category-btn\",\n                                                                            title: getNewTagTooltip(newTag),\n                                                                            onClick: _withModifiers(($event) => (handleNewInteractiveTagClick(newTag, { title: getDisplayValue(row), value: getDisplayValue(row) })), [\"stop\"])\n                                                                        }, _toDisplayString(newTag.label), 9 /* TEXT, PROPS */, _hoisted_17));\n                                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                                    _createCommentVNode(\"  \"),\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayedCategories.value, (category) => {\n                                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                                            key: category.id,\n                                                                            class: \"acu-dash-category-btn\",\n                                                                            title: ` ${getCategoryDisplayName(category)} `,\n                                                                            onClick: _withModifiers(($event) => (handleCategoryClick(category, { title: getDisplayValue(row), value: getDisplayValue(row) })), [\"stop\"])\n                                                                        }, [\n                                                                            (isFontAwesome(getCategoryButtonLabel(category)))\n                                                                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                                                                    key: 0,\n                                                                                    class: _normalizeClass(getCategoryButtonLabel(category))\n                                                                                }, null, 2 /* CLASS */))\n                                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_19, _toDisplayString(getCategoryButtonLabel(category)), 1 /* TEXT */))\n                                                                        ], 8 /* PROPS */, _hoisted_18));\n                                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                                ], 10 /* CLASS, PROPS */, _hoisted_14));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ])\n                                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                            ], 64 /* STABLE_FRAGMENT */))\n                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createCommentVNode(\" ============================================================ \"),\n                                                _createCommentVNode(\"  () -  \"),\n                                                _createCommentVNode(\" ============================================================ \"),\n                                                _createCommentVNode(\"  \"),\n                                                (useVirtual.value)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _mergeProps({ key: 0 }, _unref(listContainerProps), { class: \"acu-dash-virtual-container\" }), [\n                                                        _createElementVNode(\"div\", _mergeProps(_unref(listWrapperProps), { class: \"acu-dash-list\" }), [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(virtualListRows), ({ data: row }) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: row.key,\n                                                                    class: _normalizeClass([\"acu-dash-list-item acu-dash-interactive\", {\n                                                                            'acu-highlight-changed': isRowChanged(row),\n                                                                            'acu-highlight-ai': isRowAiChanged(row) && !__props.searchTerm,\n                                                                            'acu-multi-tags': getTagCount(row) > 1,\n                                                                        }]),\n                                                                    style: _normalizeStyle({ minHeight: _unref(LIST_ITEM_HEIGHT) + 'px' }),\n                                                                    onClick: _withModifiers(($event) => (handleRowClick(row)), [\"stop\"])\n                                                                }, [\n                                                                    _cache[8] || (_cache[8] = _createElementVNode(\"i\", {\n                                                                        class: \"fas fa-circle\",\n                                                                        style: { \"font-size\": \"6px\" }\n                                                                    }, null, -1 /* CACHED */)),\n                                                                    _createElementVNode(\"span\", _hoisted_21, _toDisplayString(getDisplayValue(row)), 1 /* TEXT */),\n                                                                    _createCommentVNode(\"  \"),\n                                                                    (isHierarchyMode.value && rowHasChildren(row))\n                                                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                                                            key: 0,\n                                                                            class: \"acu-icon-btn acu-dash-row-collapse-btn\",\n                                                                            title: isRowExpanded(row) ? '' : '',\n                                                                            onClick: _withModifiers(($event) => (toggleRowCollapse(row)), [\"stop\"])\n                                                                        }, [\n                                                                            _createElementVNode(\"i\", {\n                                                                                class: _normalizeClass(['fas', isRowExpanded(row) ? 'fa-chevron-down' : 'fa-chevron-right'])\n                                                                            }, null, 2 /* CLASS */)\n                                                                        ], 8 /* PROPS */, _hoisted_22))\n                                                                        : _createCommentVNode(\"v-if\", true),\n                                                                    _createCommentVNode(\"  \"),\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getDisplayTags(row), (tag) => {\n                                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                                            key: tag.column,\n                                                                            class: \"acu-dash-display-tag\"\n                                                                        }, _toDisplayString(tag.value), 1 /* TEXT */));\n                                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                                    _createCommentVNode(\"  \"),\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getInteractiveTags(row), (item) => {\n                                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                                            key: item.tag.id,\n                                                                            class: _normalizeClass([\"acu-dash-interactive-tag\", { fixed: item.tag.isFixed }]),\n                                                                            title: getTagTooltip(item.tag),\n                                                                            onClick: _withModifiers(($event) => (handleInteractiveTagClick(item.tag, row)), [\"stop\"])\n                                                                        }, _toDisplayString(item.value), 11 /* TEXT, CLASS, PROPS */, _hoisted_23));\n                                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                                    _createCommentVNode(\"  -  \"),\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayedInteractiveTags.value, (newTag) => {\n                                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                                            key: newTag.id,\n                                                                            class: \"acu-dash-category-btn\",\n                                                                            title: getNewTagTooltip(newTag),\n                                                                            onClick: _withModifiers(($event) => (handleNewInteractiveTagClick(newTag, { title: getDisplayValue(row), value: getDisplayValue(row) })), [\"stop\"])\n                                                                        }, _toDisplayString(newTag.label), 9 /* TEXT, PROPS */, _hoisted_24));\n                                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                                    _createCommentVNode(\"  \"),\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayedCategories.value, (category) => {\n                                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                                            key: category.id,\n                                                                            class: \"acu-dash-category-btn\",\n                                                                            title: ` ${getCategoryDisplayName(category)} `,\n                                                                            onClick: _withModifiers(($event) => (handleCategoryClick(category, { title: getDisplayValue(row), value: getDisplayValue(row) })), [\"stop\"])\n                                                                        }, [\n                                                                            (isFontAwesome(getCategoryButtonLabel(category)))\n                                                                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                                                                    key: 0,\n                                                                                    class: _normalizeClass(getCategoryButtonLabel(category))\n                                                                                }, null, 2 /* CLASS */))\n                                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_26, _toDisplayString(getCategoryButtonLabel(category)), 1 /* TEXT */))\n                                                                        ], 8 /* PROPS */, _hoisted_25));\n                                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                                ], 14 /* CLASS, STYLE, PROPS */, _hoisted_20));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ], 16 /* FULL_PROPS */)\n                                                    ], 16 /* FULL_PROPS */))\n                                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                        _createCommentVNode(\"  \"),\n                                                        _createElementVNode(\"div\", _hoisted_27, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayRows.value, (row) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: row.key,\n                                                                    class: _normalizeClass([\"acu-dash-list-item acu-dash-interactive\", {\n                                                                            'acu-highlight-changed': isRowChanged(row),\n                                                                            'acu-highlight-ai': isRowAiChanged(row) && !__props.searchTerm,\n                                                                            'acu-multi-tags': getTagCount(row) > 1,\n                                                                        }]),\n                                                                    onClick: _withModifiers(($event) => (handleRowClick(row)), [\"stop\"])\n                                                                }, [\n                                                                    _cache[9] || (_cache[9] = _createElementVNode(\"i\", {\n                                                                        class: \"fas fa-circle\",\n                                                                        style: { \"font-size\": \"6px\" }\n                                                                    }, null, -1 /* CACHED */)),\n                                                                    _createElementVNode(\"span\", _hoisted_29, _toDisplayString(getDisplayValue(row)), 1 /* TEXT */),\n                                                                    _createCommentVNode(\"  \"),\n                                                                    (isHierarchyMode.value && rowHasChildren(row))\n                                                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                                                            key: 0,\n                                                                            class: \"acu-icon-btn acu-dash-row-collapse-btn\",\n                                                                            title: isRowExpanded(row) ? '' : '',\n                                                                            onClick: _withModifiers(($event) => (toggleRowCollapse(row)), [\"stop\"])\n                                                                        }, [\n                                                                            _createElementVNode(\"i\", {\n                                                                                class: _normalizeClass(['fas', isRowExpanded(row) ? 'fa-chevron-down' : 'fa-chevron-right'])\n                                                                            }, null, 2 /* CLASS */)\n                                                                        ], 8 /* PROPS */, _hoisted_30))\n                                                                        : _createCommentVNode(\"v-if\", true),\n                                                                    _createCommentVNode(\"  \"),\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getDisplayTags(row), (tag) => {\n                                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                                            key: tag.column,\n                                                                            class: \"acu-dash-display-tag\"\n                                                                        }, _toDisplayString(tag.value), 1 /* TEXT */));\n                                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                                    _createCommentVNode(\"  \"),\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getInteractiveTags(row), (item) => {\n                                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                                            key: item.tag.id,\n                                                                            class: _normalizeClass([\"acu-dash-interactive-tag\", { fixed: item.tag.isFixed }]),\n                                                                            title: getTagTooltip(item.tag),\n                                                                            onClick: _withModifiers(($event) => (handleInteractiveTagClick(item.tag, row)), [\"stop\"])\n                                                                        }, _toDisplayString(item.value), 11 /* TEXT, CLASS, PROPS */, _hoisted_31));\n                                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                                    _createCommentVNode(\"  -  \"),\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayedInteractiveTags.value, (newTag) => {\n                                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                                            key: newTag.id,\n                                                                            class: \"acu-dash-category-btn\",\n                                                                            title: getNewTagTooltip(newTag),\n                                                                            onClick: _withModifiers(($event) => (handleNewInteractiveTagClick(newTag, { title: getDisplayValue(row), value: getDisplayValue(row) })), [\"stop\"])\n                                                                        }, _toDisplayString(newTag.label), 9 /* TEXT, PROPS */, _hoisted_32));\n                                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                                    _createCommentVNode(\"  \"),\n                                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayedCategories.value, (category) => {\n                                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                                            key: category.id,\n                                                                            class: \"acu-dash-category-btn\",\n                                                                            title: ` ${getCategoryDisplayName(category)} `,\n                                                                            onClick: _withModifiers(($event) => (handleCategoryClick(category, { title: getDisplayValue(row), value: getDisplayValue(row) })), [\"stop\"])\n                                                                        }, [\n                                                                            (isFontAwesome(getCategoryButtonLabel(category)))\n                                                                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                                                                    key: 0,\n                                                                                    class: _normalizeClass(getCategoryButtonLabel(category))\n                                                                                }, null, 2 /* CLASS */))\n                                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_34, _toDisplayString(getCategoryButtonLabel(category)), 1 /* TEXT */))\n                                                                        ], 8 /* PROPS */, _hoisted_33));\n                                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                                ], 10 /* CLASS, PROPS */, _hoisted_28));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ])\n                                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                            ], 64 /* STABLE_FRAGMENT */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 4 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_35, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(['fas', __props.config.icon])\n                                            }, null, 2 /* CLASS */),\n                                            _cache[10] || (_cache[10] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                                        ])\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                ], 2 /* CLASS */), [\n                    [_vShow, !isCollapsed.value]\n                ])\n            ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_1));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DashboardWidget.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DashboardWidget.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/**\n *  Composable\n *  @vueuse/core  useVirtualList DashboardWidget  grid/list \n */\n\nimport { useVirtualList } from '@vueuse/core';\nimport { computed, type Ref } from 'vue';\n\n// ============================================================\n// \n// ============================================================\n\n/** useVirtualList  */\nexport type UseVirtualListReturn<T> = ReturnType<typeof useVirtualList<T>>;\n\n// ============================================================\n// \n// ============================================================\n\n/**  (px) */\nexport const LIST_ITEM_HEIGHT = 32;\n\n/**  (px) -  padding  gap */\nexport const GRID_ITEM_HEIGHT = 48;\n\n/**  */\nexport const GRID_COLUMNS = 3;\n\n/**  */\nexport const OVERSCAN = 5;\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n * @param items \n * @returns \n */\nexport function useListVirtualScroll<T>(items: Ref<T[]>): UseVirtualListReturn<T> {\n  return useVirtualList(items, {\n    itemHeight: LIST_ITEM_HEIGHT,\n    overscan: OVERSCAN,\n  });\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n * @param items \n * @param columns \n * @returns \n */\nexport function groupIntoRows<T>(items: T[], columns: number): T[][] {\n  const rows: T[][] = [];\n  for (let i = 0; i < items.length; i += columns) {\n    rows.push(items.slice(i, i + columns));\n  }\n  return rows;\n}\n\n/**\n * \n *  useVirtualList \n * @param items \n * @param columns  3\n * @returns \n */\nexport function useGridVirtualScroll<T>(\n  items: Ref<T[]>,\n  columns: number = GRID_COLUMNS,\n): UseVirtualListReturn<T[]> & { rowGroups: Ref<T[][]> } {\n  // \n  const rowGroups = computed(() => groupIntoRows(items.value, columns));\n\n  const result = useVirtualList(rowGroups, {\n    itemHeight: GRID_ITEM_HEIGHT,\n    overscan: OVERSCAN,\n  });\n\n  return {\n    ...result,\n    rowGroups,\n  };\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\nimport { useConfigStore } from '../stores/useConfigStore';\nimport { useTagLibraryStore } from '../stores/useTagLibraryStore';\nimport { useToast } from './useToast';\n\n/**\n * \n * \n */\nexport function useInteractionImporter() {\n  const tagStore = useTagLibraryStore();\n  const configStore = useConfigStore();\n  const { success } = useToast();\n\n  /**\n   * \n   */\n  function getPlayerName(): string {\n    const parentWin = window.parent || window;\n    try {\n      const ctx = (parentWin as any).SillyTavern?.getContext?.();\n      if (ctx?.name1) {\n        return ctx.name1;\n      }\n    } catch (e) {\n      console.warn('[InteractionImporter] ', e);\n    }\n    return '';\n  }\n\n  /**\n   *  ID\n   * @param categoryPath  ( \"A/B\")\n   */\n  function ensureCategoryPath(categoryPath: string): string {\n    if (!categoryPath) return '';\n\n    // \n    const existing = tagStore.getCategoryByPath(categoryPath);\n    if (existing) {\n      return existing.id;\n    }\n\n    // addCategory \n    // \n    const parts = categoryPath.split('/');\n    const icon = parts.length === 1 ? 'fa-star' : undefined;\n\n    const newCategory = tagStore.addCategory(categoryPath, icon);\n    return newCategory.id;\n  }\n\n  /**\n   * \n   * @param rowData  [null, target, label, category, content, description]\n   * @returns \n   */\n  function importFromRow(rowData: (string | number)[]): boolean {\n    try {\n      //  5 \n      if (!rowData || rowData.length < 5) return false;\n\n      const target = String(rowData[1] || '').trim();\n      const label = String(rowData[2] || '').trim();\n      const categoryPath = String(rowData[3] || '').trim();\n      const content = String(rowData[4] || '').trim();\n      // 6\n      const description = rowData[5] ? String(rowData[5]).trim() : '';\n\n      // \n      if (!label || !content) return false;\n\n      // 1. \n      // \n      let textToProcess = description || content;\n\n      //  {{user}}  ( {{user}} )\n      //  content  userName \n      //  ACU \n\n      //  {{user}}:  {{user}}\n      const playerName = getPlayerName();\n      if (playerName) {\n        textToProcess = textToProcess.split(playerName).join('{{user}}');\n      }\n\n      //  target  {{rowTitle}}\n      if (target) {\n        //  target  {{rowTitle}}\n        //  ( target=\"A\", content=\"AB\" -> \"{{rowTitle}}B\")\n        //  replaceAll\n        textToProcess = textToProcess.split(target).join('{{rowTitle}}');\n      }\n\n      const finalPrompt = textToProcess;\n\n      // 2. \n      const categoryId = ensureCategoryPath(categoryPath);\n\n      // 3.  Store\n      // \n      const existingTag = tagStore.library.tags.find(t => t.label === label && t.categoryId === categoryId);\n\n      if (existingTag) {\n        // \n        tagStore.upsertTag({\n          ...existingTag,\n          promptTemplate: finalPrompt,\n          //  ID \n        });\n      } else {\n        // \n        tagStore.createTag(label, categoryId, finalPrompt);\n      }\n\n      return true;\n    } catch (e) {\n      console.error('[InteractionImporter] Import row failed:', e);\n      return false;\n    }\n  }\n\n  /**\n   * \n   * @param rows \n   * @param isAuto \n   */\n  function importAll(rows: (string | number)[][], isAuto = false): number {\n    // \n    if (isAuto && !configStore.config.autoImportInteractions) {\n      return 0;\n    }\n\n    let successCount = 0;\n\n    if (!rows || !Array.isArray(rows)) return 0;\n\n    rows.forEach(row => {\n      if (importFromRow(row)) {\n        successCount++;\n      }\n    });\n\n    if (successCount > 0) {\n      success(` ${successCount} `);\n    }\n\n    return successCount;\n  }\n\n  return {\n    importFromRow,\n    importAll,\n  };\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, vShow as _vShow, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = [\"draggable\"];\nconst _hoisted_2 = {\n    key: 0,\n    class: \"acu-dash-count\"\n};\nconst _hoisted_3 = {\n    key: 0,\n    class: \"acu-dash-actions\"\n};\nconst _hoisted_4 = [\"title\"];\nconst _hoisted_5 = [\"title\", \"onClick\"];\nconst _hoisted_6 = { class: \"acu-dash-body acu-dash-body-scrollable\" };\nconst _hoisted_7 = {\n    key: 0,\n    class: \"acu-interaction-list\"\n};\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = { class: \"acu-interaction-header\" };\nconst _hoisted_10 = { class: \"acu-interaction-target\" };\nconst _hoisted_11 = { class: \"acu-interaction-actions\" };\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = [\"title\", \"disabled\", \"onClick\"];\nconst _hoisted_14 = { class: \"acu-interaction-meta\" };\nconst _hoisted_15 = { class: \"acu-badge acu-badge-primary\" };\nconst _hoisted_16 = { class: \"acu-badge acu-badge-secondary\" };\nconst _hoisted_17 = {\n    key: 0,\n    class: \"acu-badge acu-badge-secondary\"\n};\nconst _hoisted_18 = { class: \"acu-interaction-text\" };\nconst _hoisted_19 = { class: \"acu-dash-empty\" };\nimport { computed, ref, watch } from 'vue';\nimport { useCoreActions } from '../../composables/useCoreActions';\nimport { useInteractionImporter } from '../../composables/useInteractionImporter';\nimport { useToast } from '../../composables/useToast';\nimport { getSmartTabIcon, useUIStore } from '../../stores/useUIStore';\nimport { WIDGET_ACTIONS } from '../../types';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'InteractionTableWidget',\n    props: {\n        config: {},\n        tableData: {},\n        isEditing: { type: Boolean },\n        diffMap: {},\n        aiDiffMap: {},\n        searchTerm: {}\n    },\n    emits: [\"navigate\", \"row-edit\", \"action\", \"remove\", \"resize\", \"drag-start\", \"drag-end\", \"drop\"],\n    setup(__props, { emit: __emit }) {\n        const { setInput } = useCoreActions();\n        const { importFromRow, importAll } = useInteractionImporter();\n        const { success, error } = useToast();\n        const uiStore = useUIStore();\n        // Props\n        const props = __props;\n        // Emits\n        const emit = __emit;\n        // State\n        const isCollapsed = ref(false);\n        const importedRowKeys = ref(new Set()); //  Key\n        // Computed\n        const totalCount = computed(() => props.tableData?.rows.length ?? 0);\n        const rowCount = computed(() => displayRows.value.length);\n        const displayTitle = computed(() => props.tableData?.name || props.config.title);\n        const filteredActions = computed(() => {\n            return (props.config.actions || []).filter(actionId => actionId !== 'settings' && actionId !== 'goToTable');\n        });\n        /**  -  */\n        const displayIcon = computed(() => {\n            // 1. \n            if (props.config.icon && props.config.icon !== 'fa-table') {\n                return props.config.icon;\n            }\n            // 2. \n            const titleToMatch = props.tableData?.name || props.config.title;\n            if (titleToMatch) {\n                const smartIcon = getSmartTabIcon(titleToMatch);\n                //  'fas ' \n                return smartIcon.replace('fas ', '');\n            }\n            return 'fa-table';\n        });\n        const hasAiUpdate = computed(() => {\n            if (!props.tableData || !props.aiDiffMap)\n                return false;\n            return props.tableData.rows.some(row => isRowAiChanged(row));\n        });\n        const displayRows = computed(() => {\n            if (!props.tableData)\n                return [];\n            let rows = [...props.tableData.rows];\n            if (props.searchTerm) {\n                const searchLower = props.searchTerm.toLowerCase().trim();\n                rows = rows.filter(row => row.cells.some(cell => String(cell.value).toLowerCase().includes(searchLower)));\n            }\n            return rows;\n        });\n        // Methods\n        function getActionTooltip(actionId) {\n            return WIDGET_ACTIONS[actionId]?.tooltip || '';\n        }\n        function getActionIcon(actionId) {\n            return WIDGET_ACTIONS[actionId]?.icon ?? 'fa-question';\n        }\n        function hasSecondaryIcon(actionId) {\n            return !!WIDGET_ACTIONS[actionId]?.secondaryIcon;\n        }\n        function getSecondaryIcon(actionId) {\n            return WIDGET_ACTIONS[actionId]?.secondaryIcon ?? '';\n        }\n        function getRowValue(row, colName) {\n            const cell = row.cells.find(c => c.key === colName);\n            return cell ? String(cell.value) : '';\n        }\n        function isRowChanged(row) {\n            if (!props.tableData)\n                return false;\n            const rowKey = `${props.tableData.name}-row-${row.index}`;\n            return props.diffMap.has(rowKey);\n        }\n        function isRowAiChanged(row) {\n            if (!props.tableData || !props.aiDiffMap)\n                return false;\n            const rowKey = `${props.tableData.name}-row-${row.index}`;\n            return props.aiDiffMap.has(rowKey);\n        }\n        function isRowImported(row) {\n            return importedRowKeys.value.has(row.key);\n        }\n        // Handlers\n        function handleTitleAreaClick(e) {\n            if (props.isEditing)\n                return;\n            //  click \n            if (e.target.closest('.acu-dash-actions'))\n                return;\n            isCollapsed.value = !isCollapsed.value;\n        }\n        function handleTitleTextClick() {\n            if (props.isEditing)\n                return;\n            if (props.config.tableId) {\n                emit('navigate', props.config.tableId);\n            }\n        }\n        function handleRowClick(row) {\n            if (props.isEditing)\n                return;\n            if (props.config.tableId) {\n                emit('row-edit', props.config.tableId, row);\n            }\n        }\n        function handleAction(actionId) {\n            if (actionId === 'settings') {\n                const tableHeaders = props.tableData?.headers ?? [];\n                uiStore.openWidgetSettingsDialog({\n                    widgetId: props.config.id,\n                    widgetConfig: props.config,\n                    tableHeaders,\n                });\n                return;\n            }\n            if (props.config.tableId) {\n                emit('action', actionId, props.config.tableId);\n            }\n        }\n        function handleDragStart() {\n            emit('drag-start', props.config.id);\n        }\n        function handleDragEnd() {\n            emit('drag-end');\n        }\n        function handleDrop() {\n            emit('drop', props.config.id);\n        }\n        function handleConfigActions() {\n            uiStore.openWidgetActionsDialog({\n                widgetId: props.config.id,\n                currentActions: props.config.actions,\n            });\n        }\n        function startResize(e) {\n            // \n            e.preventDefault();\n            //  resize \n            //  1/2 \n            const newColSpan = props.config.colSpan === 1 ? 2 : 1;\n            emit('resize', props.config.id, newColSpan);\n        }\n        // Interaction Handlers\n        async function handleAppendToInput(row) {\n            const content = getRowValue(row, '');\n            if (content) {\n                setInput(content); // setInput  append\n                success('');\n            }\n        }\n        function handleImportRow(row) {\n            //  rowData: [null, target, label, category, content, description]\n            //  importFromRow \n            //  useInteractionImporter\n            // : [null, \"\", \"\", \"\", \"\", \"\"]\n            //  row.cells  key \n            const target = getRowValue(row, '');\n            const label = getRowValue(row, '');\n            const category = getRowValue(row, '');\n            const content = getRowValue(row, '');\n            const description = getRowValue(row, ''); // \n            const rowData = [null, target, label, category, content, description];\n            if (importFromRow(rowData)) {\n                importedRowKeys.value.add(row.key);\n                success('');\n            }\n            else {\n                error('');\n            }\n        }\n        function handleImportAll() {\n            if (!props.tableData)\n                return;\n            const allRowsData = props.tableData.rows.map(row => {\n                const target = getRowValue(row, '');\n                const label = getRowValue(row, '');\n                const category = getRowValue(row, '');\n                const content = getRowValue(row, '');\n                const description = getRowValue(row, '');\n                return [null, target, label, category, content, description];\n            });\n            const count = importAll(allRowsData);\n            if (count > 0) {\n                // \n                props.tableData.rows.forEach(row => importedRowKeys.value.add(row.key));\n            }\n        }\n        //  AI \n        watch(() => props.aiDiffMap, newAiDiff => {\n            if (!newAiDiff || !props.tableData)\n                return;\n            //  AI \n            const hasUpdate = props.tableData.rows.some(row => {\n                const rowKey = `${props.tableData.name}-row-${row.index}`;\n                return newAiDiff.has(rowKey);\n            });\n            if (hasUpdate) {\n                // \n                const allRowsData = props.tableData.rows.map(row => {\n                    const target = getRowValue(row, '');\n                    const label = getRowValue(row, '');\n                    const category = getRowValue(row, '');\n                    const content = getRowValue(row, '');\n                    const description = getRowValue(row, '');\n                    return [null, target, label, category, content, description];\n                });\n                //  true \n                const count = importAll(allRowsData, true);\n                if (count > 0) {\n                    props.tableData.rows.forEach(row => importedRowKeys.value.add(row.key));\n                }\n            }\n        }, { deep: true });\n        /**  */\n        let previousCollapsedState = false;\n        // Watchers\n        watch(() => props.isEditing, val => {\n            if (val) {\n                previousCollapsedState = isCollapsed.value;\n                isCollapsed.value = true;\n            }\n            else {\n                isCollapsed.value = previousCollapsedState;\n            }\n        }, { immediate: true });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"acu-dash-widget\", {\n                        'acu-dash-widget-wide': __props.config.colSpan === 2,\n                        'acu-dash-widget-editing': __props.isEditing,\n                        'acu-highlight-ai-table': hasAiUpdate.value && !__props.searchTerm,\n                    }]),\n                draggable: __props.isEditing,\n                onDragstart: handleDragStart,\n                onDragend: handleDragEnd,\n                onDragover: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"prevent\"])),\n                onDrop: handleDrop\n            }, [\n                _createCommentVNode(\"  () \"),\n                (__props.isEditing)\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                        _createElementVNode(\"button\", {\n                            class: \"acu-widget-remove\",\n                            title: \"\",\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (emit('remove', __props.config.id)), [\"stop\"]))\n                        }, [...(_cache[3] || (_cache[3] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-widget-config\",\n                            title: \"\",\n                            onClick: _withModifiers(handleConfigActions, [\"stop\"])\n                        }, [...(_cache[4] || (_cache[4] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"div\", {\n                            class: \"acu-widget-resize\",\n                            title: \"\",\n                            onMousedown: _withModifiers(startResize, [\"stop\"]),\n                            onTouchstart: _withModifiers(startResize, [\"stop\"])\n                        }, [...(_cache[5] || (_cache[5] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-expand-alt\" }, null, -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */)\n                    ], 64 /* STABLE_FRAGMENT */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"acu-dash-title\", { 'acu-dash-title-clickable': !__props.isEditing }]),\n                    onClick: handleTitleAreaClick\n                }, [\n                    _createElementVNode(\"span\", {\n                        class: \"acu-dash-title-text\",\n                        onClick: _withModifiers(handleTitleTextClick, [\"stop\"])\n                    }, [\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(['fas', displayIcon.value])\n                        }, null, 2 /* CLASS */),\n                        _createTextVNode(\" \" + _toDisplayString(displayTitle.value) + \" \", 1 /* TEXT */),\n                        (rowCount.value > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, _toDisplayString(rowCount.value), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    (!__props.isEditing)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-icon-btn\",\n                                title: \"\",\n                                onClick: _withModifiers(handleImportAll, [\"stop\"])\n                            }, [...(_cache[6] || (_cache[6] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-save\" }, null, -1 /* CACHED */)\n                                ]))]),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-icon-btn\",\n                                title: getActionTooltip('settings'),\n                                onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (handleAction('settings')), [\"stop\"]))\n                            }, [...(_cache[7] || (_cache[7] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-cog\" }, null, -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_4),\n                            _createCommentVNode(\"  \"),\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredActions.value, (actionId) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: actionId,\n                                    class: _normalizeClass([\"acu-icon-btn\", { 'acu-dual-icon': hasSecondaryIcon(actionId) }]),\n                                    title: getActionTooltip(actionId),\n                                    onClick: _withModifiers(($event) => (handleAction(actionId)), [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(['fas', getActionIcon(actionId)])\n                                    }, null, 2 /* CLASS */),\n                                    (hasSecondaryIcon(actionId))\n                                        ? (_openBlock(), _createElementBlock(\"i\", {\n                                            key: 0,\n                                            class: _normalizeClass([\"fas icon-secondary\", getSecondaryIcon(actionId)])\n                                        }, null, 2 /* CLASS */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 10 /* CLASS, PROPS */, _hoisted_5));\n                            }), 128 /* KEYED_FRAGMENT */)),\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass([\"fas acu-dash-collapse-icon\", isCollapsed.value ? 'fa-chevron-down' : 'fa-chevron-up'])\n                            }, null, 2 /* CLASS */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 2 /* CLASS */),\n                _createCommentVNode(\"  \"),\n                _withDirectives(_createElementVNode(\"div\", _hoisted_6, [\n                    (displayRows.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayRows.value, (row) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: row.key,\n                                    class: _normalizeClass([\"acu-interaction-item\", {\n                                            'acu-highlight-changed': isRowChanged(row),\n                                            'acu-highlight-ai': isRowAiChanged(row) && !__props.searchTerm,\n                                        }]),\n                                    onClick: ($event) => (handleRowClick(row))\n                                }, [\n                                    _createCommentVNode(\"  +  \"),\n                                    _createElementVNode(\"div\", _hoisted_9, [\n                                        _createElementVNode(\"span\", _hoisted_10, _toDisplayString(getRowValue(row, '')), 1 /* TEXT */),\n                                        _createElementVNode(\"div\", _hoisted_11, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-icon-btn\",\n                                                title: \"\",\n                                                onClick: _withModifiers(($event) => (handleAppendToInput(row)), [\"stop\"])\n                                            }, [...(_cache[8] || (_cache[8] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-reply\" }, null, -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_12),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"button\", {\n                                                class: _normalizeClass([\"acu-icon-btn\", { 'acu-btn-success': isRowImported(row) }]),\n                                                title: isRowImported(row) ? '' : '',\n                                                disabled: isRowImported(row),\n                                                onClick: _withModifiers(($event) => (handleImportRow(row)), [\"stop\"])\n                                            }, [\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass([\"fas\", isRowImported(row) ? 'fa-check' : 'fa-download'])\n                                                }, null, 2 /* CLASS */)\n                                            ], 10 /* CLASS, PROPS */, _hoisted_13)\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\" Badge \"),\n                                    _createElementVNode(\"div\", _hoisted_14, [\n                                        _createElementVNode(\"span\", _hoisted_15, _toDisplayString(getRowValue(row, '')), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_16, _toDisplayString(getRowValue(row, '')), 1 /* TEXT */),\n                                        (getRowValue(row, ''))\n                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_17, _toDisplayString(getRowValue(row, '')), 1 /* TEXT */))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_18, _toDisplayString(getRowValue(row, '')), 1 /* TEXT */)\n                                ], 10 /* CLASS, PROPS */, _hoisted_8));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]))\n                        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_19, [\n                                _createElementVNode(\"i\", {\n                                    class: _normalizeClass(['fas', __props.config.icon])\n                                }, null, 2 /* CLASS */),\n                                _cache[9] || (_cache[9] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                            ])\n                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                ], 512 /* NEED_PATCH */), [\n                    [_vShow, !isCollapsed.value]\n                ])\n            ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_1));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./InteractionTableWidget.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./InteractionTableWidget.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./InteractionTableWidget.vue?vue&type=style&index=0&id=1eeeb96e&lang=scss\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, renderList as _renderList, vShow as _vShow, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = [\"draggable\"];\nconst _hoisted_2 = { class: \"acu-dash-title-text\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"acu-dash-count\"\n};\nconst _hoisted_4 = { class: \"acu-dash-actions\" };\nconst _hoisted_5 = [\"title\"];\nconst _hoisted_6 = [\"title\", \"onClick\"];\nconst _hoisted_7 = { class: \"acu-dash-body rwp-body\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"acu-dash-empty\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = { class: \"rwp-header-left\" };\nconst _hoisted_11 = { class: \"rwp-column-name\" };\nconst _hoisted_12 = { class: \"rwp-word-count\" };\nconst _hoisted_13 = { class: \"rwp-limit-wrapper\" };\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = { class: \"popover-body\" };\nconst _hoisted_16 = { class: \"limit-control\" };\nconst _hoisted_17 = [\"value\", \"onInput\"];\nconst _hoisted_18 = { class: \"limit-value\" };\nconst _hoisted_19 = { class: \"popover-actions\" };\nconst _hoisted_20 = [\"onClick\"];\nconst _hoisted_21 = { class: \"acu-switch small\" };\nconst _hoisted_22 = [\"checked\", \"onChange\"];\nconst _hoisted_23 = { class: \"rwp-group-content\" };\nconst _hoisted_24 = {\n    key: 0,\n    class: \"rwp-empty-hint\"\n};\nimport { computed, onMounted, onUnmounted, reactive, ref, watch } from 'vue';\nimport { detectWordPoolTables, getTableDisplayName, getWordPoolTableContent } from '../../composables/useWordPool';\nimport { useDataStore } from '../../stores/useDataStore';\nimport { useDivinationStore } from '../../stores/useDivinationStore';\nimport { useUIStore } from '../../stores/useUIStore';\nimport { WIDGET_ACTIONS } from '../../types';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'RandomWordPoolWidget',\n    props: {\n        isEditing: { type: Boolean },\n        widgetId: { default: 'random-word-pool' },\n        colSpan: { default: 1 },\n        config: { default: () => ({}) }\n    },\n    emits: [\"remove\", \"resize\", \"action\", \"drag-start\", \"drag-end\", \"drop\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        // Emits\n        const emit = __emit;\n        // Stores\n        const divinationStore = useDivinationStore();\n        const uiStore = useUIStore();\n        const dataStore = useDataStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const isCollapsed = ref(false);\n        /**  */\n        const wasCollapsedBeforeEditing = ref(false);\n        /** ID */\n        const expandedTables = reactive({});\n        /**  Limit ID */\n        const activeLimitPopup = ref(null);\n        /**  (V2: ) */\n        const tables = ref([]);\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const tableCount = computed(() => tables.value.length);\n        /**  */\n        const filteredActions = computed(() => {\n            const actions = props.config?.actions || [];\n            //  settings ()\n            return actions.filter(id => id !== 'settings');\n        });\n        /**  */\n        const allExpanded = computed(() => {\n            if (tables.value.length === 0)\n                return false;\n            return tables.value.every(t => expandedTables[t.id]);\n        });\n        // ============================================================\n        // \n        // ============================================================\n        onMounted(() => {\n            loadTableData();\n            window.addEventListener('click', closePopups);\n        });\n        onUnmounted(() => {\n            window.removeEventListener('click', closePopups);\n        });\n        // \n        watch(() => divinationStore.config.tablePoolConfig, () => {\n            // \n        }, { deep: true });\n        // \n        watch(() => props.isEditing, newVal => {\n            if (newVal) {\n                wasCollapsedBeforeEditing.value = isCollapsed.value;\n                isCollapsed.value = true;\n            }\n            else {\n                isCollapsed.value = wasCollapsedBeforeEditing.value;\n            }\n        });\n        // \n        watch(() => dataStore.tables, () => {\n            console.log('[RandomWordPoolWidget] ...');\n            loadTableData();\n        }, { deep: false });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         *  (V2: )\n         */\n        function loadTableData() {\n            const detectedTables = detectWordPoolTables();\n            const result = [];\n            for (const tableId of detectedTables) {\n                const rows = getWordPoolTableContent(tableId);\n                // \n                if (rows.length <= 1)\n                    continue;\n                //  / \n                const latestRow = rows[rows.length - 1];\n                const words = [];\n                // V2: \n                if (Array.isArray(latestRow)) {\n                    for (const cellValue of latestRow) {\n                        if (cellValue && typeof cellValue === 'string') {\n                            const trimmed = cellValue.trim();\n                            if (trimmed) {\n                                words.push(trimmed);\n                            }\n                        }\n                    }\n                }\n                result.push({\n                    id: tableId,\n                    name: getTableDisplayName(tableId),\n                    words,\n                });\n            }\n            tables.value = result;\n            // \n            for (const t of tables.value) {\n                if (expandedTables[t.id] === undefined) {\n                    expandedTables[t.id] = false;\n                }\n            }\n            console.info(`[RandomWordPoolWidget]  ${tables.value.length} `);\n        }\n        /**\n         * \n         */\n        function isTableEnabled(tableId) {\n            const config = divinationStore.config.tablePoolConfig[tableId];\n            // \n            return config ? config.enabled : true;\n        }\n        /**\n         * \n         */\n        function toggleTableEnabled(tableId) {\n            const currentConfig = divinationStore.config.tablePoolConfig[tableId] || {\n                enabled: true,\n                limit: 0,\n            };\n            divinationStore.config.tablePoolConfig[tableId] = {\n                ...currentConfig,\n                enabled: !currentConfig.enabled,\n            };\n        }\n        /**\n         *  Limit \n         */\n        function getTableLimit(tableId) {\n            return divinationStore.config.tablePoolConfig[tableId]?.limit || 0;\n        }\n        /**\n         *  Limit \n         */\n        function getTableLimitText(tableId) {\n            const limit = getTableLimit(tableId);\n            return limit > 0 ? ` ${limit}` : '';\n        }\n        /**\n         *  Limit\n         */\n        function setTableLimit(tableId, limit) {\n            const currentConfig = divinationStore.config.tablePoolConfig[tableId] || {\n                enabled: true,\n                limit: 0,\n            };\n            divinationStore.config.tablePoolConfig[tableId] = {\n                ...currentConfig,\n                limit,\n            };\n        }\n        /**\n         *  Limit \n         */\n        function toggleLimitPopup(tableId) {\n            if (activeLimitPopup.value === tableId) {\n                activeLimitPopup.value = null;\n            }\n            else {\n                activeLimitPopup.value = tableId;\n            }\n        }\n        /**\n         * \n         */\n        function closePopups() {\n            activeLimitPopup.value = null;\n        }\n        /**\n         * \n         */\n        function toggleTable(tableId) {\n            expandedTables[tableId] = !expandedTables[tableId];\n        }\n        /**\n         * /\n         */\n        function toggleAllExpanded() {\n            const newState = !allExpanded.value;\n            for (const t of tables.value) {\n                expandedTables[t.id] = newState;\n            }\n        }\n        /**\n         *  - /\n         */\n        function handleTitleClick() {\n            if (!props.isEditing) {\n                isCollapsed.value = !isCollapsed.value;\n            }\n        }\n        /**\n         *  - \n         */\n        function handleSettingsClick() {\n            uiStore.openDivinationSettingsDialog();\n        }\n        function getActionIcon(actionId) {\n            return WIDGET_ACTIONS[actionId]?.icon ?? 'fa-question';\n        }\n        function hasSecondaryIcon(actionId) {\n            return !!WIDGET_ACTIONS[actionId]?.secondaryIcon;\n        }\n        function getSecondaryIcon(actionId) {\n            return WIDGET_ACTIONS[actionId]?.secondaryIcon ?? '';\n        }\n        function getActionTooltip(actionId) {\n            return WIDGET_ACTIONS[actionId]?.tooltip ?? actionId;\n        }\n        function handleAction(actionId) {\n            //  tableId\n            emit('action', actionId, '');\n        }\n        /**\n         *  ()\n         */\n        function handleConfigActions() {\n            uiStore.openWidgetActionsDialog({\n                widgetId: props.config.id || props.widgetId,\n                currentActions: props.config.actions || [],\n            });\n        }\n        /**\n         * \n         */\n        function startResize(e) {\n            // \n            e.preventDefault();\n            const newColSpan = props.colSpan === 1 ? 2 : 1;\n            emit('resize', props.widgetId, newColSpan);\n        }\n        /**\n         * \n         */\n        function handleDragStart(e) {\n            if (!props.isEditing) {\n                e.preventDefault();\n                return;\n            }\n            e.dataTransfer?.setData('text/plain', props.widgetId);\n            emit('drag-start', props.widgetId);\n        }\n        /**\n         * \n         */\n        function handleDragEnd() {\n            emit('drag-end');\n        }\n        /**\n         * \n         */\n        function handleDrop(e) {\n            e.preventDefault();\n            emit('drop', props.widgetId);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"acu-dash-widget rwp-widget\", {\n                        'acu-dash-widget-wide': __props.colSpan === 2,\n                        'acu-dash-widget-editing': __props.isEditing,\n                    }]),\n                draggable: __props.isEditing,\n                onDragstart: handleDragStart,\n                onDragend: handleDragEnd,\n                onDragover: _cache[3] || (_cache[3] = _withModifiers(() => { }, [\"prevent\"])),\n                onDrop: handleDrop\n            }, [\n                _createCommentVNode(\"  () \"),\n                (__props.isEditing)\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                        _createElementVNode(\"button\", {\n                            class: \"acu-widget-remove\",\n                            title: \"\",\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (emit('remove', __props.widgetId)), [\"stop\"]))\n                        }, [...(_cache[4] || (_cache[4] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-widget-config\",\n                            title: \"\",\n                            onClick: _withModifiers(handleConfigActions, [\"stop\"])\n                        }, [...(_cache[5] || (_cache[5] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"div\", {\n                            class: \"acu-widget-resize\",\n                            title: \"/\",\n                            onMousedown: _withModifiers(startResize, [\"stop\"]),\n                            onTouchstart: _withModifiers(startResize, [\"stop\"])\n                        }, [...(_cache[6] || (_cache[6] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-expand-alt\" }, null, -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */)\n                    ], 64 /* STABLE_FRAGMENT */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    class: \"acu-dash-title rwp-header\",\n                    onClick: handleTitleClick\n                }, [\n                    _createElementVNode(\"span\", _hoisted_2, [\n                        _cache[7] || (_cache[7] = _createElementVNode(\"i\", { class: \"fas fa-dice\" }, null, -1 /* CACHED */)),\n                        _cache[8] || (_cache[8] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                        (tableCount.value > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(tableCount.value), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _withDirectives(_createElementVNode(\"div\", _hoisted_4, [\n                        _createCommentVNode(\" / \"),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-icon-btn\",\n                            title: allExpanded.value ? '' : '',\n                            onClick: _withModifiers(toggleAllExpanded, [\"stop\"])\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass([\"fas\", allExpanded.value ? 'fa-compress-alt' : 'fa-expand-alt'])\n                            }, null, 2 /* CLASS */)\n                        ], 8 /* PROPS */, _hoisted_5),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-icon-btn\",\n                            title: \"\",\n                            onClick: _withModifiers(handleSettingsClick, [\"stop\"])\n                        }, [...(_cache[9] || (_cache[9] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-cog\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createCommentVNode(\"  \"),\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredActions.value, (actionId) => {\n                            return (_openBlock(), _createElementBlock(\"button\", {\n                                key: actionId,\n                                class: _normalizeClass([\"acu-icon-btn\", { 'acu-dual-icon': hasSecondaryIcon(actionId) }]),\n                                title: getActionTooltip(actionId),\n                                onClick: _withModifiers(($event) => (handleAction(actionId)), [\"stop\"])\n                            }, [\n                                _createElementVNode(\"i\", {\n                                    class: _normalizeClass(['fas', getActionIcon(actionId)])\n                                }, null, 2 /* CLASS */),\n                                (hasSecondaryIcon(actionId))\n                                    ? (_openBlock(), _createElementBlock(\"i\", {\n                                        key: 0,\n                                        class: _normalizeClass([\"fas icon-secondary\", getSecondaryIcon(actionId)])\n                                    }, null, 2 /* CLASS */))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ], 10 /* CLASS, PROPS */, _hoisted_6));\n                        }), 128 /* KEYED_FRAGMENT */)),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([\"fas acu-dash-collapse-icon\", isCollapsed.value ? 'fa-chevron-down' : 'fa-chevron-up'])\n                        }, null, 2 /* CLASS */)\n                    ], 512 /* NEED_PATCH */), [\n                        [_vShow, !__props.isEditing]\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _withDirectives(_createElementVNode(\"div\", _hoisted_7, [\n                    _createCommentVNode(\"  \"),\n                    (tableCount.value === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [...(_cache[10] || (_cache[10] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-dice\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */),\n                                _createElementVNode(\"span\", { class: \"hint\" }, \"\\\"\\\"\\\"Random\\\"\", -1 /* CACHED */)\n                            ]))]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\"  (V2: ) \"),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(tables.value, (table) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: table.id,\n                            class: _normalizeClass([\"rwp-column-group\", { collapsed: !expandedTables[table.id] }])\n                        }, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", {\n                                class: \"rwp-group-header\",\n                                onClick: ($event) => (toggleTable(table.id))\n                            }, [\n                                _createElementVNode(\"div\", _hoisted_10, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass([\"fas\", expandedTables[table.id] ? 'fa-chevron-down' : 'fa-chevron-right'])\n                                    }, null, 2 /* CLASS */),\n                                    _createElementVNode(\"span\", _hoisted_11, _toDisplayString(table.name), 1 /* TEXT */),\n                                    _createElementVNode(\"span\", _hoisted_12, \"(\" + _toDisplayString(table.words.length) + \")\", 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", {\n                                    class: \"rwp-header-right\",\n                                    onClick: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"stop\"]))\n                                }, [\n                                    _createCommentVNode(\" Limit  Badge \"),\n                                    _createElementVNode(\"div\", _hoisted_13, [\n                                        _createElementVNode(\"div\", {\n                                            class: _normalizeClass([\"acu-badge-pill acu-badge-interactive\", activeLimitPopup.value === table.id ? 'acu-badge-primary' : 'acu-badge-secondary']),\n                                            title: \"\",\n                                            onClick: _withModifiers(($event) => (toggleLimitPopup(table.id)), [\"stop\"])\n                                        }, [\n                                            _cache[11] || (_cache[11] = _createElementVNode(\"i\", {\n                                                class: \"fas fa-filter\",\n                                                style: { \"margin-right\": \"4px\", \"font-size\": \"11px\" }\n                                            }, null, -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", null, _toDisplayString(getTableLimitText(table.id)), 1 /* TEXT */)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_14),\n                                        _createCommentVNode(\" Limit  Popover \"),\n                                        (activeLimitPopup.value === table.id)\n                                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                                key: 0,\n                                                class: \"rwp-limit-popover\",\n                                                onClick: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"]))\n                                            }, [\n                                                _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"popover-header\" }, \" (0=)\", -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_15, [\n                                                    _createElementVNode(\"div\", _hoisted_16, [\n                                                        _createElementVNode(\"input\", {\n                                                            type: \"range\",\n                                                            class: \"acu-range-input\",\n                                                            min: \"0\",\n                                                            max: \"10\",\n                                                            step: \"1\",\n                                                            value: getTableLimit(table.id),\n                                                            onInput: e => setTableLimit(table.id, +e.target.value)\n                                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_17),\n                                                        _createElementVNode(\"span\", _hoisted_18, _toDisplayString(getTableLimit(table.id) || ''), 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_19, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-tool-btn small\",\n                                                            onClick: ($event) => (setTableLimit(table.id, 0))\n                                                        }, \"\", 8 /* PROPS */, _hoisted_20)\n                                                    ])\n                                                ])\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _createElementVNode(\"label\", _hoisted_21, [\n                                        _createElementVNode(\"input\", {\n                                            type: \"checkbox\",\n                                            checked: isTableEnabled(table.id),\n                                            onChange: _withModifiers(($event) => (toggleTableEnabled(table.id)), [\"stop\"])\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_22),\n                                        _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                    ])\n                                ])\n                            ], 8 /* PROPS */, _hoisted_9),\n                            _createCommentVNode(\"  \"),\n                            _withDirectives(_createElementVNode(\"div\", _hoisted_23, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(table.words, (word, idx) => {\n                                    return (_openBlock(), _createElementBlock(\"span\", {\n                                        key: idx,\n                                        class: _normalizeClass([\"rwp-word-badge\", { disabled: !isTableEnabled(table.id) }])\n                                    }, _toDisplayString(word), 3 /* TEXT, CLASS */));\n                                }), 128 /* KEYED_FRAGMENT */)),\n                                (table.words.length === 0)\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_24, \"  \"))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ], 512 /* NEED_PATCH */), [\n                                [_vShow, expandedTables[table.id]]\n                            ])\n                        ], 2 /* CLASS */));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ], 512 /* NEED_PATCH */), [\n                    [_vShow, !isCollapsed.value]\n                ])\n            ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_1));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./RandomWordPoolWidget.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RandomWordPoolWidget.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, unref as _unref, createBlock as _createBlock, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"acu-dash-container-new\" };\nconst _hoisted_2 = { class: \"acu-dash-header\" };\nconst _hoisted_3 = { class: \"acu-dash-header-actions\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"acu-dash-add-section\"\n};\nconst _hoisted_5 = {\n    key: 0,\n    class: \"acu-switch-list acu-dash-add-list\"\n};\nconst _hoisted_6 = { class: \"acu-switch-list-body\" };\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = { class: \"item-label\" };\nconst _hoisted_9 = [\"onChange\"];\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = { class: \"item-label\" };\nconst _hoisted_12 = [\"onChange\"];\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = { class: \"item-label\" };\nconst _hoisted_15 = [\"onChange\"];\nconst _hoisted_16 = {\n    key: 1,\n    class: \"acu-dash-empty-state\"\n};\nimport { computed, onMounted, ref, watch } from 'vue';\nimport { useToast } from '../composables/useToast';\nimport { useDashboardStore } from '../stores/useDashboardStore';\nimport { useDataStore } from '../stores/useDataStore';\nimport { useUIStore } from '../stores/useUIStore';\nimport { TABLE_KEYWORD_RULES } from '../types';\nimport { DashboardWidget, InteractionTableWidget, RandomWordPoolWidget } from './dashboard';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Dashboard',\n    props: {\n        tables: {}\n    },\n    emits: [\"navigate\", \"rowClick\", \"showRelationshipGraph\", \"action\", \"heightDragStart\", \"heightReset\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * Dashboard  ()\n         *  useDashboardStore \n         */\n        const toast = useToast();\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Stores\n        // ============================================================\n        const dataStore = useDataStore();\n        const dashboardStore = useDashboardStore();\n        const uiStore = useUIStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const isEditing = ref(false);\n        /**  */\n        const isAddPanelOpen = ref(false);\n        /**  */\n        const searchTerm = ref('');\n        /**  ID */\n        const draggingWidgetId = ref(null);\n        /**  ID */\n        const dropTargetId = ref(null);\n        /** Grid  */\n        const gridRef = ref(null);\n        /**  */\n        const heightHandleRef = ref(null);\n        /**  */\n        let heightTouchTimer = null;\n        // ============================================================\n        // Computed\n        // ============================================================\n        /**  */\n        const enabledWidgets = computed(() => dashboardStore.enabledWidgets);\n        /**  */\n        const notAddedTables = computed(() => {\n            return props.tables.filter(t => !dashboardStore.hasWidget(t.id));\n        });\n        /**  */\n        const notAddedSpecialWidgets = computed(() => {\n            const widgets = dashboardStore.config.widgets;\n            const list = [];\n            if (!widgets.some(w => w.type === 'updateStatus')) {\n                list.push({ type: 'updateStatus', name: '', icon: 'fa-sync-alt' });\n            }\n            if (!widgets.some(w => w.type === 'optionsPanel')) {\n                list.push({ type: 'optionsPanel', name: '', icon: 'fa-list-check' });\n            }\n            if (!widgets.some(w => w.type === 'randomWordPool')) {\n                list.push({ type: 'randomWordPool', name: '', icon: 'fa-dice' });\n            }\n            return list;\n        });\n        /**  */\n        const diffMap = computed(() => dataStore.diffMap);\n        /** AI  */\n        const aiDiffMap = computed(() => dataStore.aiDiffMap);\n        // ============================================================\n        // AI \n        // ============================================================\n        /**  AI  ID  */\n        const aiHighlightedTableIds = computed(() => {\n            const tableIds = new Set();\n            for (const widget of dashboardStore.enabledWidgets) {\n                if (!widget.tableId)\n                    continue;\n                const table = getTableById(widget.tableId);\n                if (!table)\n                    continue;\n                const hasAiUpdate = table.rows.some(row => {\n                    const key = `${widget.tableId}:${row.key}`;\n                    return dataStore.aiDiffMap.has(key);\n                });\n                if (hasAiUpdate)\n                    tableIds.add(widget.tableId);\n            }\n            return tableIds;\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function widgetMatchesSearch(widget) {\n            if (!searchTerm.value)\n                return true;\n            const searchLower = searchTerm.value.toLowerCase().trim();\n            if (!searchLower)\n                return true;\n            // \n            if (widget.type === 'updateStatus' || widget.type === 'optionsPanel' || widget.type === 'randomWordPool') {\n                return false;\n            }\n            const table = getTableById(widget.tableId);\n            if (!table)\n                return false;\n            //  + \n            if (table.name.toLowerCase().includes(searchLower))\n                return true;\n            return table.rows.some(row => row.cells.some(cell => String(cell.value).toLowerCase().includes(searchLower)));\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         * - : \n         * - : AI \n         */\n        const displayWidgets = computed(() => {\n            let widgets = [...dashboardStore.enabledWidgets];\n            if (searchTerm.value) {\n                // \n                widgets = widgets.filter(w => widgetMatchesSearch(w));\n            }\n            else {\n                // AI \n                widgets.sort((a, b) => {\n                    const aHighlight = aiHighlightedTableIds.value.has(a.tableId || '');\n                    const bHighlight = aiHighlightedTableIds.value.has(b.tableId || '');\n                    if (aHighlight !== bHighlight)\n                        return bHighlight ? 1 : -1;\n                    return a.order - b.order;\n                });\n            }\n            return widgets;\n        });\n        /**  */\n        const availableTables = computed(() => props.tables);\n        // ============================================================\n        // \n        // ============================================================\n        onMounted(async () => {\n            // \n            await dashboardStore.loadConfig();\n            // \n            if (dashboardStore.config.widgets.length === 0) {\n                autoAddDefaultWidgets();\n            }\n        });\n        // \n        watch(() => props.tables, () => {\n            // \n        });\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  ID  */\n        function getTableById(tableId) {\n            if (!tableId)\n                return null;\n            return props.tables.find(t => t.id === tableId) ?? null;\n        }\n        /**  */\n        function isTableAdded(tableId) {\n            return dashboardStore.hasWidget(tableId);\n        }\n        /**  */\n        function getWidgetDisplayName(widget) {\n            // \n            if (widget.type === 'updateStatus')\n                return '';\n            if (widget.type === 'optionsPanel')\n                return '';\n            // \n            const table = props.tables.find(t => t.id === widget.tableId);\n            return table?.name || widget.title || widget.tableId || '';\n        }\n        /**  */\n        function getTableIcon(tableId) {\n            const table = getTableById(tableId);\n            const nameToCheck = table?.name || tableId;\n            for (const [key, keywords] of Object.entries(TABLE_KEYWORD_RULES)) {\n                if (keywords.some(k => nameToCheck.toLowerCase().includes(k.toLowerCase()))) {\n                    // \n                    const widget = dashboardStore.config.widgets.find(w => w.tableId === tableId);\n                    if (widget?.icon)\n                        return widget.icon;\n                    // \n                    //  Store \n                    if (key === 'global')\n                        return 'fa-globe';\n                    if (key === 'task')\n                        return 'fa-tasks';\n                    if (key === 'item')\n                        return 'fa-box-open';\n                    if (key === 'character')\n                        return 'fa-user';\n                    if (key === 'location')\n                        return 'fa-map-marker-alt';\n                }\n            }\n            return 'fa-table';\n        }\n        /**  */\n        function autoAddDefaultWidgets() {\n            for (const table of props.tables) {\n                // \n                for (const [key, keywords] of Object.entries(TABLE_KEYWORD_RULES)) {\n                    if (keywords.some(k => table.id.toLowerCase().includes(k.toLowerCase()) || table.name.includes(k))) {\n                        //  templateKey\n                        dashboardStore.addWidget(table.id, table.name, key);\n                        break;\n                    }\n                }\n            }\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        function enterEditMode() {\n            isEditing.value = true;\n            toast.info('');\n        }\n        function exitEditMode() {\n            isEditing.value = false;\n            isAddPanelOpen.value = false;\n            draggingWidgetId.value = null;\n            dropTargetId.value = null;\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function handleAddWidget(tableId) {\n            if (isTableAdded(tableId)) {\n                // \n                const widget = dashboardStore.findWidgetByTableId(tableId);\n                if (widget) {\n                    dashboardStore.removeWidget(widget.id);\n                }\n            }\n            else {\n                // \n                const table = props.tables.find(t => t.id === tableId);\n                dashboardStore.addWidget(tableId, table?.name);\n            }\n        }\n        /**  */\n        function hasSpecialWidget(widgetType) {\n            return dashboardStore.hasSpecialWidget(widgetType);\n        }\n        /**  */\n        function handleAddSpecialWidget(widgetType) {\n            if (hasSpecialWidget(widgetType)) {\n                dashboardStore.removeSpecialWidget(widgetType);\n            }\n            else {\n                dashboardStore.addSpecialWidget(widgetType);\n            }\n        }\n        /**  */\n        function handleRemoveWidget(widgetId) {\n            dashboardStore.removeWidget(widgetId);\n        }\n        /**  */\n        function handleResizeWidget(widgetId, colSpan) {\n            dashboardStore.updateWidget(widgetId, { colSpan });\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        function handleDragStart(widgetId) {\n            draggingWidgetId.value = widgetId;\n        }\n        function handleDragEnd() {\n            draggingWidgetId.value = null;\n            dropTargetId.value = null;\n        }\n        function handleDrop(targetWidgetId) {\n            if (!draggingWidgetId.value || draggingWidgetId.value === targetWidgetId)\n                return;\n            // \n            const targetWidget = dashboardStore.config.widgets.find(w => w.id === targetWidgetId);\n            if (targetWidget) {\n                dashboardStore.moveWidget(draggingWidgetId.value, targetWidget.order);\n            }\n            draggingWidgetId.value = null;\n            dropTargetId.value = null;\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**\n         * \n         */\n        function handleHeightDragStart(event) {\n            if (heightHandleRef.value) {\n                emit('heightDragStart', event, heightHandleRef.value);\n            }\n        }\n        /**\n         * \n         */\n        function handleHeightReset() {\n            emit('heightReset');\n        }\n        /**\n         *  ()\n         */\n        function handleHeightTouchEnd() {\n            if (heightTouchTimer) {\n                clearTimeout(heightTouchTimer);\n                heightTouchTimer = null;\n            }\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        function handleNavigate(tableId) {\n            emit('navigate', tableId);\n        }\n        function handleRowClick(tableId, row) {\n            emit('rowClick', tableId, row);\n        }\n        /**  -  uiStore  */\n        function handleRowEdit(tableId, row) {\n            const table = getTableById(tableId);\n            uiStore.openRowEditDialog({\n                tableId,\n                tableName: table?.name ?? tableId,\n                rowIndex: row.index,\n                currentRowData: row,\n            });\n        }\n        function handleWidgetAction(actionId, tableId) {\n            switch (actionId) {\n                case 'goToTable':\n                    emit('navigate', tableId);\n                    break;\n                case 'relationshipGraph':\n                    emit('showRelationshipGraph');\n                    break;\n                default:\n                    emit('action', actionId, tableId);\n                    break;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  -  / () /  /  /  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\"  \"),\n                    _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"acu-dash-header-left\" }, [\n                        _createElementVNode(\"span\", { class: \"acu-dash-header-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-th-large\" }),\n                            _createTextVNode(\"  \")\n                        ])\n                    ], -1 /* CACHED */)),\n                    _createCommentVNode(\"  \"),\n                    _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"acu-dash-header-spacer\" }, null, -1 /* CACHED */)),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createCommentVNode(\"  \"),\n                        (isEditing.value)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                class: \"acu-icon-btn acu-btn-primary\",\n                                title: \"\",\n                                onClick: _withModifiers(exitEditMode, [\"stop\"])\n                            }, [...(_cache[8] || (_cache[8] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */)\n                                ]))]))\n                            : (_openBlock(), _createElementBlock(\"button\", {\n                                key: 1,\n                                class: \"acu-icon-btn\",\n                                title: \"\",\n                                onClick: _withModifiers(enterEditMode, [\"stop\"])\n                            }, [...(_cache[9] || (_cache[9] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-edit\" }, null, -1 /* CACHED */)\n                                ]))])),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"button\", {\n                            ref_key: \"heightHandleRef\",\n                            ref: heightHandleRef,\n                            class: \"acu-icon-btn acu-height-handle\",\n                            title: \" / \",\n                            onPointerdown: handleHeightDragStart,\n                            onDblclick: handleHeightReset,\n                            onTouchend: _withModifiers(handleHeightTouchEnd, [\"stop\"])\n                        }, [...(_cache[10] || (_cache[10] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-grip-lines\" }, null, -1 /* CACHED */)\n                            ]))], 544 /* NEED_HYDRATION, NEED_PATCH */),\n                        _createCommentVNode(\"  \"),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((searchTerm).value = $event)),\n                            type: \"text\",\n                            class: \"acu-search-input acu-search-inline\",\n                            placeholder: \"...\"\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, searchTerm.value]\n                        ]),\n                        (searchTerm.value)\n                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                key: 2,\n                                class: \"fas fa-times acu-search-clear\",\n                                onClick: _cache[1] || (_cache[1] = ($event) => (searchTerm.value = ''))\n                            }))\n                            : _createCommentVNode(\"v-if\", true)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    ref_key: \"gridRef\",\n                    ref: gridRef,\n                    class: \"acu-dash-grid\"\n                }, [\n                    _createCommentVNode(\"  \"),\n                    (isEditing.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"acu-action-btn\", { active: isAddPanelOpen.value }]),\n                                onClick: _cache[2] || (_cache[2] = _withModifiers(($event) => (isAddPanelOpen.value = !isAddPanelOpen.value), [\"stop\"]))\n                            }, [\n                                _createElementVNode(\"i\", {\n                                    class: _normalizeClass([\"fas\", isAddPanelOpen.value ? 'fa-chevron-up' : 'fa-plus'])\n                                }, null, 2 /* CLASS */),\n                                _createTextVNode(\" \" + _toDisplayString(isAddPanelOpen.value ? '' : ''), 1 /* TEXT */)\n                            ], 2 /* CLASS */),\n                            _createCommentVNode(\"  switch-list \"),\n                            (isAddPanelOpen.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                                    _createElementVNode(\"div\", _hoisted_6, [\n                                        _createCommentVNode(\" switch  \"),\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(enabledWidgets.value, (widget) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: widget.id,\n                                                class: \"acu-switch-list-item is-selected\",\n                                                onClick: _withModifiers(($event) => (handleRemoveWidget(widget.id)), [\"stop\"])\n                                            }, [\n                                                _createElementVNode(\"span\", _hoisted_8, [\n                                                    _createElementVNode(\"i\", {\n                                                        class: _normalizeClass(['fas', widget.icon])\n                                                    }, null, 2 /* CLASS */),\n                                                    _createTextVNode(\" \" + _toDisplayString(getWidgetDisplayName(widget)), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"label\", {\n                                                    class: \"acu-switch small\",\n                                                    onClick: _cache[3] || (_cache[3] = _withModifiers(() => { }, [\"stop\"]))\n                                                }, [\n                                                    _createElementVNode(\"input\", {\n                                                        type: \"checkbox\",\n                                                        checked: \"\",\n                                                        onChange: _withModifiers(($event) => (handleRemoveWidget(widget.id)), [\"stop\"])\n                                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_9),\n                                                    _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                ])\n                                            ], 8 /* PROPS */, _hoisted_7));\n                                        }), 128 /* KEYED_FRAGMENT */)),\n                                        _createCommentVNode(\"  \"),\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(notAddedSpecialWidgets.value, (widget) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: widget.type,\n                                                class: \"acu-switch-list-item\",\n                                                onClick: _withModifiers(($event) => (handleAddSpecialWidget(widget.type)), [\"stop\"])\n                                            }, [\n                                                _createElementVNode(\"span\", _hoisted_11, [\n                                                    _createElementVNode(\"i\", {\n                                                        class: _normalizeClass(['fas', widget.icon])\n                                                    }, null, 2 /* CLASS */),\n                                                    _createTextVNode(\" \" + _toDisplayString(widget.name), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"label\", {\n                                                    class: \"acu-switch small\",\n                                                    onClick: _cache[4] || (_cache[4] = _withModifiers(() => { }, [\"stop\"]))\n                                                }, [\n                                                    _createElementVNode(\"input\", {\n                                                        type: \"checkbox\",\n                                                        checked: false,\n                                                        onChange: _withModifiers(($event) => (handleAddSpecialWidget(widget.type)), [\"stop\"])\n                                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_12),\n                                                    _cache[14] || (_cache[14] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                ])\n                                            ], 8 /* PROPS */, _hoisted_10));\n                                        }), 128 /* KEYED_FRAGMENT */)),\n                                        _createCommentVNode(\" switch  \"),\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(notAddedTables.value, (table) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: table.id,\n                                                class: \"acu-switch-list-item\",\n                                                onClick: _withModifiers(($event) => (handleAddWidget(table.id)), [\"stop\"])\n                                            }, [\n                                                _createElementVNode(\"span\", _hoisted_14, [\n                                                    _createElementVNode(\"i\", {\n                                                        class: _normalizeClass(['fas', getTableIcon(table.id)])\n                                                    }, null, 2 /* CLASS */),\n                                                    _createTextVNode(\" \" + _toDisplayString(table.name), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"label\", {\n                                                    class: \"acu-switch small\",\n                                                    onClick: _cache[5] || (_cache[5] = _withModifiers(() => { }, [\"stop\"]))\n                                                }, [\n                                                    _createElementVNode(\"input\", {\n                                                        type: \"checkbox\",\n                                                        onChange: _withModifiers(($event) => (handleAddWidget(table.id)), [\"stop\"])\n                                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_15),\n                                                    _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                ])\n                                            ], 8 /* PROPS */, _hoisted_13));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\"  \"),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayWidgets.value, (widget) => {\n                        return (_openBlock(), _createElementBlock(_Fragment, {\n                            key: widget.id\n                        }, [\n                            _createCommentVNode(\"  \"),\n                            (widget.type === 'randomWordPool')\n                                ? (_openBlock(), _createBlock(_unref(RandomWordPoolWidget), {\n                                    key: 0,\n                                    \"is-editing\": isEditing.value,\n                                    \"widget-id\": widget.id,\n                                    \"col-span\": widget.colSpan,\n                                    config: widget,\n                                    class: _normalizeClass({\n                                        'acu-dash-widget-dragging': draggingWidgetId.value === widget.id,\n                                        'acu-dash-widget-drop-target': dropTargetId.value === widget.id,\n                                    }),\n                                    onRemove: handleRemoveWidget,\n                                    onResize: handleResizeWidget,\n                                    onAction: handleWidgetAction,\n                                    onDragStart: handleDragStart,\n                                    onDragEnd: handleDragEnd,\n                                    onDrop: handleDrop\n                                }, null, 8 /* PROPS */, [\"is-editing\", \"widget-id\", \"col-span\", \"config\", \"class\"]))\n                                : (widget.displayStyle === 'interaction')\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createVNode(_unref(InteractionTableWidget), {\n                                            config: widget,\n                                            \"table-data\": getTableById(widget.tableId),\n                                            \"is-editing\": isEditing.value,\n                                            \"diff-map\": diffMap.value,\n                                            \"ai-diff-map\": aiDiffMap.value,\n                                            \"search-term\": searchTerm.value,\n                                            class: _normalizeClass({\n                                                'acu-dash-widget-dragging': draggingWidgetId.value === widget.id,\n                                                'acu-dash-widget-drop-target': dropTargetId.value === widget.id,\n                                            }),\n                                            onNavigate: handleNavigate,\n                                            onRowEdit: handleRowEdit,\n                                            onAction: handleWidgetAction,\n                                            onRemove: handleRemoveWidget,\n                                            onResize: handleResizeWidget,\n                                            onDragStart: handleDragStart,\n                                            onDragEnd: handleDragEnd,\n                                            onDrop: handleDrop\n                                        }, null, 8 /* PROPS */, [\"config\", \"table-data\", \"is-editing\", \"diff-map\", \"ai-diff-map\", \"search-term\", \"class\"])\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createVNode(_unref(DashboardWidget), {\n                                            config: widget,\n                                            \"table-data\": getTableById(widget.tableId),\n                                            \"is-editing\": isEditing.value,\n                                            \"diff-map\": diffMap.value,\n                                            \"ai-diff-map\": aiDiffMap.value,\n                                            \"search-term\": searchTerm.value,\n                                            \"all-tables\": availableTables.value,\n                                            class: _normalizeClass({\n                                                'acu-dash-widget-dragging': draggingWidgetId.value === widget.id,\n                                                'acu-dash-widget-drop-target': dropTargetId.value === widget.id,\n                                            }),\n                                            onNavigate: handleNavigate,\n                                            onRowClick: handleRowClick,\n                                            onRowEdit: handleRowEdit,\n                                            onAction: handleWidgetAction,\n                                            onRemove: handleRemoveWidget,\n                                            onResize: handleResizeWidget,\n                                            onDragStart: handleDragStart,\n                                            onDragEnd: handleDragEnd,\n                                            onDrop: handleDrop\n                                        }, null, 8 /* PROPS */, [\"config\", \"table-data\", \"is-editing\", \"diff-map\", \"ai-diff-map\", \"search-term\", \"all-tables\", \"class\"])\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                        ], 64 /* STABLE_FRAGMENT */));\n                    }), 128 /* KEYED_FRAGMENT */)),\n                    _createCommentVNode(\"  \"),\n                    (displayWidgets.value.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [\n                            (searchTerm.value)\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                    _cache[17] || (_cache[17] = _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */)),\n                                    _createElementVNode(\"p\", null, \" \\\"\" + _toDisplayString(searchTerm.value) + \"\\\" \", 1 /* TEXT */),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-dash-add-first-btn\",\n                                        onClick: _cache[6] || (_cache[6] = _withModifiers(($event) => (searchTerm.value = ''), [\"stop\"]))\n                                    }, [...(_cache[16] || (_cache[16] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))])\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _cache[19] || (_cache[19] = _createElementVNode(\"i\", { class: \"fas fa-layer-group\" }, null, -1 /* CACHED */)),\n                                    _cache[20] || (_cache[20] = _createElementVNode(\"p\", null, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-dash-add-first-btn\",\n                                        onClick: _cache[7] || (_cache[7] = _withModifiers(($event) => {\n                                            enterEditMode();\n                                            isAddPanelOpen.value = true;\n                                        }, [\"stop\"]))\n                                    }, [...(_cache[18] || (_cache[18] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))])\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 512 /* NEED_PATCH */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Dashboard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Dashboard.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, withModifiers as _withModifiers, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock, renderSlot as _renderSlot } from \"vue\";\nconst _hoisted_1 = { class: \"acu-table-toolbar\" };\nconst _hoisted_2 = { class: \"acu-toolbar-left\" };\nconst _hoisted_3 = { class: \"acu-table-title\" };\nconst _hoisted_4 = { class: \"acu-table-count\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"acu-table-badge acu-badge-changed\"\n};\nconst _hoisted_6 = {\n    key: 1,\n    class: \"acu-table-badge acu-badge-deleting\"\n};\nconst _hoisted_7 = { class: \"acu-toolbar-right\" };\nconst _hoisted_8 = [\"title\"];\nconst _hoisted_9 = {\n    key: 0,\n    class: \"acu-empty-state\"\n};\nconst _hoisted_10 = {\n    key: 0,\n    class: \"acu-pagination-container\"\n};\nconst _hoisted_11 = { class: \"acu-pagination-numbers\" };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"acu-page-dots\"\n};\nconst _hoisted_13 = [\"onClick\"];\nimport { computed, nextTick, onMounted, ref, watch } from 'vue';\nimport { toast, useCellLock } from '../composables';\nimport { useConfigStore } from '../stores/useConfigStore';\nimport { useDataStore } from '../stores/useDataStore';\nimport { useUIStore } from '../stores/useUIStore';\nimport DataCard from './DataCard.vue';\n\nimport { h } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DataTable',\n    props: {\n        tableId: {},\n        tableName: {},\n        rows: {},\n        headers: { default: () => [] },\n        searchTerm: { default: '' },\n        showIndex: { type: Boolean, default: true },\n        showHeader: { type: Boolean, default: true },\n        showPagination: { type: Boolean, default: true },\n        emptyText: { default: '' },\n        isLoading: { type: Boolean, default: false }\n    },\n    emits: [\"cellClick\", \"insertRow\", \"toggleDelete\", \"contextMenu\", \"searchChange\", \"pageChange\", \"close\", \"heightDragStart\", \"heightReset\", \"showHistory\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * DataTable \n         *\n         *  DataCard \n         * - \n         * -  >  > \n         * - \n         * - /\n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Stores\n        // ============================================================\n        const dataStore = useDataStore();\n        const configStore = useConfigStore();\n        const uiStore = useUIStore();\n        // ============================================================\n        // \n        // ============================================================\n        const containerRef = ref();\n        const heightHandleRef = ref();\n        const viewMode = ref(uiStore.getTableStyle(props.tableName));\n        const localSearchTerm = ref(props.searchTerm);\n        const currentPage = ref(1);\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         *  ''  ''  ''/''/'' \n         *  1 null \n         */\n        const titleColIndex = computed(() => {\n            //  ''  '' \n            if (props.tableName.includes('') || props.tableName.includes('')) {\n                //  ''/''/'' \n                const idx = props.headers.findIndex(h => h && (h.includes('') || h.includes('') || h.includes('')));\n                if (idx > 0) {\n                    return idx;\n                }\n            }\n            //  1 null \n            return 1;\n        });\n        /**  */\n        const isReversed = computed(() => uiStore.isTableReversed(props.tableName));\n        /**\n         *  - Tab \n         * \n         */\n        const changeTypeSnapshot = ref(new Map());\n        /**\n         * \n         * \n         */\n        function createChangeTypeSnapshot() {\n            const snapshot = new Map();\n            for (const row of props.rows) {\n                const changeType = dataStore.getRowChangeType(props.tableName, row.index, row.cells.length);\n                if (changeType) {\n                    snapshot.set(row.index, changeType);\n                }\n            }\n            changeTypeSnapshot.value = snapshot;\n        }\n        // Tab \n        onMounted(() => {\n            createChangeTypeSnapshot();\n        });\n        /**  */\n        const filteredRows = computed(() => {\n            let rows = props.rows;\n            // \n            if (uiStore.showLockedOnly && uiStore.isLockEditMode) {\n                const cellLock = useCellLock();\n                rows = rows.filter(row => {\n                    const headers = row.cells.map(c => c.key);\n                    const rowData = row.cells.map(c => String(c.value ?? ''));\n                    const rowKey = cellLock.getRowKey(props.tableName, rowData, headers, row.index);\n                    if (!rowKey)\n                        return false;\n                    return cellLock.hasRowAnyLockPending(props.tableName, rowKey);\n                });\n            }\n            // \n            const term = localSearchTerm.value.toLowerCase().trim();\n            if (!term)\n                return rows;\n            return rows.filter(row => row.cells.some(cell => String(cell.value).toLowerCase().includes(term)));\n        });\n        /**\n         * \n         * @returns 'manual' | 'ai' | null\n         */\n        function getRowChangeTypeForSort(row) {\n            return changeTypeSnapshot.value.get(row.index) ?? null;\n        }\n        /**\n         * \n         * @returns 'manual' | 'ai' | null\n         */\n        function getRowChangeType(row) {\n            return dataStore.getRowChangeType(props.tableName, row.index, row.cells.length);\n        }\n        /**\n         * manual = 2, ai = 1, null = 0\n         */\n        function getChangePriority(changeType) {\n            if (changeType === 'manual')\n                return 2;\n            if (changeType === 'ai')\n                return 1;\n            return 0;\n        }\n        /**  > AI >  >  */\n        const sortedRows = computed(() => {\n            const rows = [...filteredRows.value];\n            return rows.sort((a, b) => {\n                // 1. AI\n                const aChangeType = getRowChangeTypeForSort(a);\n                const bChangeType = getRowChangeTypeForSort(b);\n                const aPriority = getChangePriority(aChangeType);\n                const bPriority = getChangePriority(bChangeType);\n                if (aPriority !== bPriority) {\n                    return bPriority - aPriority; // \n                }\n                // 2. \n                return isReversed.value ? b.index - a.index : a.index - b.index;\n            });\n        });\n        /**  */\n        const itemsPerPage = computed(() => configStore.config.itemsPerPage || 20);\n        /**  */\n        const totalPages = computed(() => Math.max(1, Math.ceil(sortedRows.value.length / itemsPerPage.value)));\n        /**  */\n        const paginatedRows = computed(() => {\n            const start = (currentPage.value - 1) * itemsPerPage.value;\n            return sortedRows.value.slice(start, start + itemsPerPage.value);\n        });\n        /**  */\n        const totalRows = computed(() => props.rows.length);\n        /**  */\n        const changedCount = computed(() => {\n            return props.rows.filter(row => isRowChanged(row)).length;\n        });\n        /**  */\n        const deletingCount = computed(() => {\n            return props.rows.filter(row => {\n                const rowKey = `${props.tableName}-row-${row.index}`;\n                return dataStore.pendingDeletes.has(rowKey);\n            }).length;\n        });\n        /**  prop  */\n        const shouldShowPagination = computed(() => {\n            // prop  true \n            return props.showPagination && configStore.config.showPagination !== false;\n        });\n        /**  */\n        const paginationList = computed(() => {\n            const pages = [];\n            const total = totalPages.value;\n            const current = currentPage.value;\n            if (total <= 7) {\n                // \n                for (let i = 1; i <= total; i++) {\n                    pages.push(i);\n                }\n            }\n            else {\n                // \n                pages.push(1);\n                if (current > 3) {\n                    pages.push('...');\n                }\n                const start = Math.max(2, current - 1);\n                const end = Math.min(total - 1, current + 1);\n                for (let i = start; i <= end; i++) {\n                    pages.push(i);\n                }\n                if (current < total - 2) {\n                    pages.push('...');\n                }\n                pages.push(total);\n            }\n            return pages;\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function isRowChanged(row) {\n            return dataStore.isRowChanged(props.tableName, row.index, row.cells.length);\n        }\n        /**\n         * \n         */\n        function toggleReverse() {\n            uiStore.toggleTableReverse(props.tableName);\n        }\n        /**\n         * \n         */\n        function toggleLockMode() {\n            const cellLock = useCellLock();\n            if (uiStore.isLockEditMode) {\n                //  ->  ()\n                const count = cellLock.pendingLockCount.value;\n                cellLock.savePendingLocks();\n                uiStore.isLockEditMode = false;\n                toast.success(` ${count} `);\n            }\n            else {\n                //  ->  ()\n                cellLock.initPendingLocks();\n                uiStore.isLockEditMode = true;\n                toast.info('');\n            }\n        }\n        /**\n         * \n         */\n        function toggleShowLockedOnly() {\n            uiStore.showLockedOnly = !uiStore.showLockedOnly;\n        }\n        /**\n         * \n         */\n        function handleClose() {\n            emit('close');\n        }\n        /**\n         * \n         */\n        function handleSearchInput() {\n            // \n            currentPage.value = 1;\n            emit('searchChange', localSearchTerm.value);\n        }\n        /**\n         * \n         */\n        function clearSearch() {\n            localSearchTerm.value = '';\n            currentPage.value = 1;\n            emit('searchChange', '');\n        }\n        /**\n         * \n         */\n        function goToPage(page) {\n            if (page < 1 || page > totalPages.value)\n                return;\n            currentPage.value = page;\n            emit('pageChange', page);\n            // \n            nextTick(() => {\n                containerRef.value?.scrollTo({ top: 0, behavior: 'smooth' });\n            });\n        }\n        /**\n         * \n         */\n        function handleCellClick(rowIndex, colIndex) {\n            emit('cellClick', props.tableId, rowIndex, colIndex);\n        }\n        /**\n         * \n         */\n        function handleInsertRow(afterIndex) {\n            emit('insertRow', props.tableId, afterIndex);\n        }\n        /**\n         * \n         */\n        function handleToggleDelete(rowIndex) {\n            emit('toggleDelete', props.tableId, rowIndex);\n        }\n        /**\n         * \n         */\n        function handleContextMenu(event, rowIndex) {\n            emit('contextMenu', event, props.tableId, rowIndex);\n        }\n        /**\n         * \n         */\n        function handleHeightDragStart(e) {\n            if (heightHandleRef.value) {\n                emit('heightDragStart', e, heightHandleRef.value);\n            }\n        }\n        /**\n         * \n         */\n        function handleHeightReset() {\n            emit('heightReset');\n        }\n        /**\n         *  - \n         *  touchend  300ms \n         */\n        let lastHeightTouchTime = 0;\n        function handleHeightTouchEnd() {\n            const now = Date.now();\n            if (now - lastHeightTouchTime < 300) {\n                //  - \n                handleHeightReset();\n                lastHeightTouchTime = 0; // \n            }\n            else {\n                lastHeightTouchTime = now;\n            }\n        }\n        /**\n         * \n         */\n        function handleShowHistory(row) {\n            emit('showHistory', props.tableId, props.tableName, row.index, row);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        // \n        watch(() => props.searchTerm, newTerm => {\n            localSearchTerm.value = newTerm;\n        });\n        //  store\n        watch(viewMode, newMode => {\n            uiStore.setTableStyle(props.tableName, newMode);\n        });\n        // \n        watch(totalPages, newTotal => {\n            if (currentPage.value > newTotal) {\n                currentPage.value = Math.max(1, newTotal);\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"acu-data-table\", { 'acu-table-loading': __props.isLoading }])\n            }, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\"  + () \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"span\", _hoisted_3, _toDisplayString(__props.tableName), 1 /* TEXT */),\n                        _createElementVNode(\"span\", _hoisted_4, \"(\" + _toDisplayString(totalRows.value) + \")\", 1 /* TEXT */),\n                        (changedCount.value > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString(changedCount.value), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (deletingCount.value > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(deletingCount.value), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\"  -  \"),\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        _createCommentVNode(\"  \"),\n                        (_unref(uiStore).isLockEditMode)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                class: _normalizeClass([\"acu-icon-btn\", { active: _unref(uiStore).showLockedOnly }]),\n                                title: \"\",\n                                onClick: _withModifiers(toggleShowLockedOnly, [\"stop\"])\n                            }, [...(_cache[3] || (_cache[3] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-filter\" }, null, -1 /* CACHED */)\n                                ]))], 2 /* CLASS */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"button\", {\n                            class: _normalizeClass([\"acu-icon-btn\", { active: _unref(uiStore).isLockEditMode }]),\n                            title: _unref(uiStore).isLockEditMode ? '' : '',\n                            onClick: _withModifiers(toggleLockMode, [\"stop\"])\n                        }, [...(_cache[4] || (_cache[4] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-lock\" }, null, -1 /* CACHED */)\n                            ]))], 10 /* CLASS, PROPS */, _hoisted_8),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"button\", {\n                            class: _normalizeClass([\"acu-icon-btn\", { active: isReversed.value }]),\n                            title: \"\",\n                            onClick: toggleReverse\n                        }, [...(_cache[5] || (_cache[5] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-sort-amount-down-alt\" }, null, -1 /* CACHED */)\n                            ]))], 2 /* CLASS */),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"button\", {\n                            ref_key: \"heightHandleRef\",\n                            ref: heightHandleRef,\n                            class: \"acu-icon-btn acu-height-handle\",\n                            title: \" / \",\n                            onPointerdown: handleHeightDragStart,\n                            onDblclick: handleHeightReset,\n                            onTouchend: _withModifiers(handleHeightTouchEnd, [\"stop\"])\n                        }, [...(_cache[6] || (_cache[6] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-grip-lines\" }, null, -1 /* CACHED */)\n                            ]))], 544 /* NEED_HYDRATION, NEED_PATCH */),\n                        _createCommentVNode(\"  \"),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localSearchTerm).value = $event)),\n                            type: \"text\",\n                            class: \"acu-search-input acu-search-inline\",\n                            placeholder: \"...\",\n                            onInput: handleSearchInput\n                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                            [_vModelText, localSearchTerm.value]\n                        ]),\n                        (localSearchTerm.value)\n                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                key: 1,\n                                class: \"fas fa-times acu-search-clear\",\n                                onClick: clearSearch\n                            }))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-icon-btn acu-close-btn\",\n                            title: \"\",\n                            onClick: _withModifiers(handleClose, [\"stop\"])\n                        }, [...(_cache[7] || (_cache[7] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    ref_key: \"containerRef\",\n                    ref: containerRef,\n                    class: _normalizeClass([\"acu-cards-container\", [`acu-view-${viewMode.value}`]])\n                }, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(paginatedRows.value, (row) => {\n                        return (_openBlock(), _createBlock(DataCard, {\n                            key: `${__props.tableId}-${row.index}`,\n                            data: row,\n                            \"table-id\": __props.tableId,\n                            \"table-name\": __props.tableName,\n                            \"is-changed\": isRowChanged(row),\n                            layout: _unref(configStore).config.layout,\n                            \"view-mode\": viewMode.value,\n                            \"show-index\": __props.showIndex,\n                            \"show-header\": __props.showHeader,\n                            \"title-col-index\": titleColIndex.value,\n                            \"show-history-button\": true,\n                            onCellClick: handleCellClick,\n                            onInsertRow: ($event) => (handleInsertRow(row.index)),\n                            onToggleDelete: ($event) => (handleToggleDelete(row.index)),\n                            onContextMenu: handleContextMenu,\n                            onShowHistory: ($event) => (handleShowHistory(row))\n                        }, null, 8 /* PROPS */, [\"data\", \"table-id\", \"table-name\", \"is-changed\", \"layout\", \"view-mode\", \"show-index\", \"show-header\", \"title-col-index\", \"onInsertRow\", \"onToggleDelete\", \"onShowHistory\"]));\n                    }), 128 /* KEYED_FRAGMENT */)),\n                    _createCommentVNode(\"  \"),\n                    (filteredRows.value.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                            _cache[8] || (_cache[8] = _createElementVNode(\"i\", { class: \"fas fa-inbox\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"p\", null, _toDisplayString(__props.emptyText), 1 /* TEXT */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 2 /* CLASS */),\n                _createCommentVNode(\"  () \"),\n                _renderSlot(_ctx.$slots, \"pagination\", {}, () => [\n                    (shouldShowPagination.value && totalPages.value > 1)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                            _createCommentVNode(\"  () \"),\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-page-btn acu-page-arrow\", { disabled: currentPage.value === 1 }]),\n                                title: \"\",\n                                onClick: _cache[1] || (_cache[1] = ($event) => (currentPage.value > 1 && goToPage(currentPage.value - 1)))\n                            }, [...(_cache[9] || (_cache[9] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-chevron-left\" }, null, -1 /* CACHED */)\n                                ]))], 2 /* CLASS */),\n                            _createCommentVNode(\"  () \"),\n                            _createElementVNode(\"div\", _hoisted_11, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(paginationList.value, (page) => {\n                                    return (_openBlock(), _createElementBlock(_Fragment, { key: page }, [\n                                        (page === '...')\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, \"...\"))\n                                            : (_openBlock(), _createElementBlock(\"div\", {\n                                                key: 1,\n                                                class: _normalizeClass([\"acu-page-btn\", { active: page === currentPage.value }]),\n                                                onClick: ($event) => (goToPage(page))\n                                            }, _toDisplayString(page), 11 /* TEXT, CLASS, PROPS */, _hoisted_13))\n                                    ], 64 /* STABLE_FRAGMENT */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\"  () \"),\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-page-btn acu-page-arrow\", { disabled: currentPage.value === totalPages.value }]),\n                                title: \"\",\n                                onClick: _cache[2] || (_cache[2] = ($event) => (currentPage.value < totalPages.value && goToPage(currentPage.value + 1)))\n                            }, [...(_cache[10] || (_cache[10] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-chevron-right\" }, null, -1 /* CACHED */)\n                                ]))], 2 /* CLASS */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DataTable.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DataTable.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"acu-options-panel\" };\nconst _hoisted_2 = { class: \"acu-panel-header acu-options-header\" };\nconst _hoisted_3 = { class: \"acu-header-actions\" };\nconst _hoisted_4 = { class: \"acu-options-count\" };\nconst _hoisted_5 = { class: \"acu-panel-content acu-options-content\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"acu-empty-state\"\n};\nconst _hoisted_7 = { class: \"acu-options-list\" };\nconst _hoisted_8 = { class: \"acu-dash-title\" };\nconst _hoisted_9 = { class: \"acu-option-rows\" };\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = { class: \"acu-embedded-option-tags\" };\nconst _hoisted_12 = { class: \"acu-embedded-option-text\" };\nimport { computed } from 'vue';\nimport { useCoreActions } from '../composables/useCoreActions';\nimport { toast } from '../composables/useToast';\nimport { TAB_DASHBOARD, useUIStore } from '../stores';\nimport { isOptionTable, parseOptionItems } from '../utils/optionParser';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'OptionsPanel',\n    props: {\n        tables: {}\n    },\n    emits: [\"navigate\", \"optionClick\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * OptionsPanel \n         *\n         * \n         * - \"\"\n         * - \"/Option/\"\n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Composables & Stores\n        // ============================================================\n        const { setInput } = useCoreActions();\n        const uiStore = useUIStore();\n        // ============================================================\n        // \n        // ============================================================\n        /** \"\" */\n        const optionTables = computed(() => {\n            return props.tables.filter(t => isOptionTable(t.name));\n        });\n        // ============================================================\n        //  ()\n        // ============================================================\n        /**\n         * \n         *  parseOptionItems \n         */\n        function getOptionItems(table) {\n            return parseOptionItems(table);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  -  */\n        function handleOptionClick(text) {\n            setInput(text);\n            emit('optionClick', text);\n            // Toast \n            toast.success('');\n        }\n        /**  */\n        function handleOptionHover(event, isHover) {\n            const target = event.currentTarget;\n            if (isHover) {\n                target.style.background = 'var(--acu-table-hover)';\n                target.style.borderColor = 'var(--acu-title-color)';\n            }\n            else {\n                target.style.background = 'rgba(255,255,255,0.05)';\n                target.style.borderColor = 'var(--acu-border)';\n            }\n        }\n        /**  */\n        function handleOptionMouseDown(event) {\n            const target = event.currentTarget;\n            target.style.transform = 'translateY(1px)';\n        }\n        /**  */\n        function handleOptionMouseUp(event) {\n            const target = event.currentTarget;\n            target.style.transform = 'translateY(0)';\n        }\n        /**  */\n        function handleBackToDashboard() {\n            uiStore.setActiveTab(TAB_DASHBOARD);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"acu-panel-title acu-options-title\" }, [\n                        _createElementVNode(\"i\", { class: \"fa-solid fa-list-check\" }),\n                        _createTextVNode(\"  \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"span\", _hoisted_4, _toDisplayString(optionTables.value.length) + \" \", 1 /* TEXT */),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-icon-btn acu-close-btn\",\n                            title: \"\",\n                            onClick: _withModifiers(handleBackToDashboard, [\"stop\"])\n                        }, [...(_cache[4] || (_cache[4] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createCommentVNode(\"  \"),\n                    (optionTables.value.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \"\\\"\\\"\"))\n                        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(optionTables.value, (table) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: table.id,\n                                        class: \"acu-dash-card\"\n                                    }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_8, _toDisplayString(table.name), 1 /* TEXT */),\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_9, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getOptionItems(table), (optionItem, optIdx) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: optIdx,\n                                                    class: \"acu-embedded-option-row\",\n                                                    title: '',\n                                                    onClick: ($event) => (handleOptionClick(optionItem.text)),\n                                                    onMouseover: _cache[0] || (_cache[0] = ($event) => (handleOptionHover($event, true))),\n                                                    onMouseout: _cache[1] || (_cache[1] = ($event) => (handleOptionHover($event, false))),\n                                                    onMousedown: _cache[2] || (_cache[2] = ($event) => (handleOptionMouseDown($event))),\n                                                    onMouseup: _cache[3] || (_cache[3] = ($event) => (handleOptionMouseUp($event)))\n                                                }, [\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_11, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(optionItem.tags, (tag, tagIdx) => {\n                                                            return (_openBlock(), _createElementBlock(\"span\", {\n                                                                key: tagIdx,\n                                                                class: \"acu-badge\"\n                                                            }, _toDisplayString(tag), 1 /* TEXT */));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_12, _toDisplayString(optionItem.text), 1 /* TEXT */)\n                                                ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_10));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./OptionsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./OptionsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/* unplugin-vue-components disabled */import script from \"./ContextMenu.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ContextMenu.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, withKeys as _withKeys, normalizeStyle as _normalizeStyle, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nimport { useClipboard } from '@vueuse/core';\nimport { computed, nextTick, onMounted, onUnmounted, ref, watch } from 'vue';\nimport { useDataStore } from '../stores/useDataStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ContextMenu',\n    props: {\n        visible: { type: Boolean },\n        x: {},\n        y: {},\n        tableId: {},\n        tableName: {},\n        rowIndex: {},\n        cellValue: {}\n    },\n    emits: [\"update:visible\", \"insertRow\", \"delete\", \"undoDelete\", \"copied\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * ContextMenu \n         *\n         * \n         * - \n         * - /\n         * - Escape \n         * - \n         *\n         * \n         * - \n         * - \n         * -  / \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs & Stores\n        // ============================================================\n        const menuRef = ref();\n        const dataStore = useDataStore();\n        const { copy, copied } = useClipboard();\n        // ============================================================\n        // Computed\n        // ============================================================\n        /**  */\n        const isDeleting = computed(() => {\n            //  tableName  rowKey DataCard \n            //  tableName tableId\n            const keyBase = props.tableName || props.tableId;\n            const rowKey = `${keyBase}-row-${props.rowIndex}`;\n            return dataStore.pendingDeletes.has(rowKey);\n        });\n        /**  */\n        const menuStyle = computed(() => {\n            //  iframe  UI \n            const menuWidth = 180;\n            const menuHeight = 200;\n            // \n            const parentWindow = window.parent || window;\n            const viewportWidth = parentWindow.innerWidth;\n            const viewportHeight = parentWindow.innerHeight;\n            let left = props.x;\n            let top = props.y;\n            // \n            if (left + menuWidth > viewportWidth) {\n                left = viewportWidth - menuWidth - 10;\n            }\n            // \n            if (top + menuHeight > viewportHeight) {\n                top = viewportHeight - menuHeight - 10;\n            }\n            // \n            left = Math.max(10, left);\n            top = Math.max(10, top);\n            return {\n                left: `${left}px`,\n                top: `${top}px`,\n            };\n        });\n        // ============================================================\n        // \n        // ============================================================\n        //  UI \n        // VueUse  onClickOutside  iframe  document\n        let clickOutsideHandler = null;\n        let rightClickHandler = null;\n        onMounted(() => {\n            const parentDoc = window.parent?.document || document;\n            clickOutsideHandler = (e) => {\n                if (!props.visible || !menuRef.value)\n                    return;\n                const target = e.target;\n                // \n                if (menuRef.value.contains(target))\n                    return;\n                // \n                console.info('[ACU] ');\n                close();\n            };\n            // \n            rightClickHandler = (e) => {\n                if (!props.visible || !menuRef.value)\n                    return;\n                const target = e.target;\n                if (menuRef.value.contains(target))\n                    return;\n                console.info('[ACU] ');\n                close();\n            };\n            //  capture \n            parentDoc.addEventListener('click', clickOutsideHandler, true);\n            parentDoc.addEventListener('contextmenu', rightClickHandler, true);\n            // \n            parentDoc.addEventListener('touchstart', clickOutsideHandler, true);\n        });\n        onUnmounted(() => {\n            const parentDoc = window.parent?.document || document;\n            if (clickOutsideHandler) {\n                parentDoc.removeEventListener('click', clickOutsideHandler, true);\n                parentDoc.removeEventListener('touchstart', clickOutsideHandler, true);\n                clickOutsideHandler = null;\n            }\n            if (rightClickHandler) {\n                parentDoc.removeEventListener('contextmenu', rightClickHandler, true);\n                rightClickHandler = null;\n            }\n        });\n        // ============================================================\n        // Watchers\n        // ============================================================\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                nextTick(() => {\n                    menuRef.value?.focus();\n                });\n            }\n        });\n        // ============================================================\n        // Methods\n        // ============================================================\n        /**  */\n        const close = () => {\n            emit('update:visible', false);\n        };\n        /**  */\n        const handleInsertRow = () => {\n            emit('insertRow', props.tableId, props.rowIndex);\n            close();\n        };\n        /**  */\n        const handleCopy = async () => {\n            if (props.cellValue) {\n                try {\n                    await copy(props.cellValue);\n                    emit('copied');\n                    //  toastr \n                }\n                catch (e) {\n                    console.error('[ACU] Copy failed:', e);\n                }\n            }\n            close();\n        };\n        /**  */\n        const handleDelete = () => {\n            emit('delete', props.tableId, props.rowIndex);\n            close();\n        };\n        /**  */\n        const handleUndoDelete = () => {\n            emit('undoDelete', props.tableId, props.rowIndex);\n            close();\n        };\n        // ============================================================\n        // Expose\n        // ============================================================\n        __expose({\n            /**  */\n            close,\n            /**  */\n            copied,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"acu-menu-fade\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            ref_key: \"menuRef\",\n                            ref: menuRef,\n                            class: \"acu-context-menu\",\n                            style: _normalizeStyle(menuStyle.value),\n                            tabindex: \"-1\",\n                            onKeydown: _withKeys(close, [\"escape\"]),\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(() => { }, [\"stop\"])),\n                            onMousedown: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"])),\n                            onTouchstart: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", {\n                                class: \"acu-menu-item\",\n                                onClick: _withModifiers(handleInsertRow, [\"stop\"])\n                            }, [...(_cache[3] || (_cache[3] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */),\n                                    _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                ]))]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", {\n                                class: \"acu-menu-item\",\n                                onClick: _withModifiers(handleCopy, [\"stop\"])\n                            }, [...(_cache[4] || (_cache[4] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-copy\" }, null, -1 /* CACHED */),\n                                    _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                ]))]),\n                            _createCommentVNode(\"  \"),\n                            _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"acu-menu-divider\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            (!isDeleting.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", {\n                                    key: 0,\n                                    class: \"acu-menu-item acu-menu-danger\",\n                                    onClick: _withModifiers(handleDelete, [\"stop\"])\n                                }, [...(_cache[5] || (_cache[5] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                    ]))]))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", {\n                                        class: \"acu-menu-item acu-menu-warning\",\n                                        onClick: _withModifiers(handleUndoDelete, [\"stop\"])\n                                    }, [...(_cache[6] || (_cache[6] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                        ]))])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                        ], 36 /* STYLE, NEED_HYDRATION */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = { class: \"acu-pagination\" };\nconst _hoisted_2 = { class: \"acu-pagination-info\" };\nconst _hoisted_3 = { class: \"acu-pagination-current\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"acu-pagination-total\"\n};\nconst _hoisted_5 = { class: \"acu-pagination-controls\" };\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = { class: \"acu-page-list\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"acu-page-ellipsis\"\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = [\"disabled\"];\nconst _hoisted_13 = {\n    key: 0,\n    class: \"acu-pagination-jump\"\n};\nconst _hoisted_14 = [\"max\"];\nimport { ref, computed, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Pagination',\n    props: {\n        currentPage: {},\n        totalPages: {},\n        totalItems: {},\n        maxVisiblePages: { default: 5 },\n        showTotal: { type: Boolean, default: true },\n        showJumper: { type: Boolean, default: true }\n    },\n    emits: [\"update:currentPage\", \"pageChange\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * Pagination \n         *\n         * \n         * - \n         * - /\n         * - /\n         * - /\n         * - \n         *\n         * \n         * - \n         * - \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs\n        // ============================================================\n        /**  */\n        const jumpPage = ref(props.currentPage);\n        // ============================================================\n        // Computed\n        // ============================================================\n        /**\n         * \n         * \n         * 1. \n         * 2. \n         *    - 1\n         *    - 1\n         *    -  maxVisiblePages \n         *    -  '...' \n         */\n        const pageList = computed(() => {\n            const pages = [];\n            const total = props.totalPages;\n            const current = props.currentPage;\n            const maxVisible = props.maxVisiblePages;\n            //  0  1\n            if (total <= 0) {\n                return [1];\n            }\n            if (total === 1) {\n                return [1];\n            }\n            // \n            if (total <= maxVisible + 2) {\n                for (let i = 1; i <= total; i++) {\n                    pages.push(i);\n                }\n                return pages;\n            }\n            // \n            const halfVisible = Math.floor(maxVisible / 2);\n            let start = Math.max(2, current - halfVisible);\n            let end = Math.min(total - 1, current + halfVisible);\n            // \n            const visibleCount = end - start + 1;\n            if (visibleCount < maxVisible) {\n                if (start === 2) {\n                    // \n                    end = Math.min(total - 1, start + maxVisible - 1);\n                }\n                else if (end === total - 1) {\n                    // \n                    start = Math.max(2, end - maxVisible + 1);\n                }\n            }\n            // \n            // \n            pages.push(1);\n            // \n            if (start > 2) {\n                pages.push('...');\n            }\n            // \n            for (let i = start; i <= end; i++) {\n                pages.push(i);\n            }\n            // \n            if (end < total - 1) {\n                pages.push('...');\n            }\n            // \n            pages.push(total);\n            return pages;\n        });\n        // ============================================================\n        // Watchers\n        // ============================================================\n        //  currentPage \n        watch(() => props.currentPage, newPage => {\n            jumpPage.value = newPage;\n        });\n        // ============================================================\n        // Methods\n        // ============================================================\n        /**\n         * \n         * @param page \n         */\n        const goToPage = (page) => {\n            // \n            if (page < 1 || page > props.totalPages) {\n                return;\n            }\n            // \n            if (page === props.currentPage) {\n                return;\n            }\n            // \n            emit('update:currentPage', page);\n            emit('pageChange', page);\n            // \n            jumpPage.value = page;\n        };\n        /**\n         * \n         */\n        const validateJumpPage = () => {\n            if (!jumpPage.value || jumpPage.value < 1) {\n                jumpPage.value = 1;\n            }\n            else if (jumpPage.value > props.totalPages) {\n                jumpPage.value = props.totalPages;\n            }\n            // \n            jumpPage.value = Math.floor(jumpPage.value);\n        };\n        /**\n         * \n         */\n        const handleJump = () => {\n            validateJumpPage();\n            goToPage(jumpPage.value);\n        };\n        // ============================================================\n        // Expose\n        // ============================================================\n        __expose({\n            /**  */\n            goToPage,\n            /**  */\n            goToFirst: () => goToPage(1),\n            /**  */\n            goToLast: () => goToPage(props.totalPages),\n            /**  */\n            goPrev: () => goToPage(props.currentPage - 1),\n            /**  */\n            goNext: () => goToPage(props.currentPage + 1),\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"span\", _hoisted_3, [\n                        _cache[5] || (_cache[5] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                        _createElementVNode(\"strong\", null, _toDisplayString(__props.currentPage), 1 /* TEXT */),\n                        _createTextVNode(\" / \" + _toDisplayString(__props.totalPages) + \"  \", 1 /* TEXT */)\n                    ]),\n                    (__props.showTotal)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, \" ( \" + _toDisplayString(__props.totalItems) + \" ) \", 1 /* TEXT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-btn acu-btn-icon\", { disabled: __props.currentPage <= 1 }]),\n                        disabled: __props.currentPage <= 1,\n                        title: \"\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (goToPage(1)))\n                    }, [...(_cache[6] || (_cache[6] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-angle-double-left\" }, null, -1 /* CACHED */)\n                        ]))], 10 /* CLASS, PROPS */, _hoisted_6),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-btn acu-btn-icon\", { disabled: __props.currentPage <= 1 }]),\n                        disabled: __props.currentPage <= 1,\n                        title: \"\",\n                        onClick: _cache[1] || (_cache[1] = ($event) => (goToPage(__props.currentPage - 1)))\n                    }, [...(_cache[7] || (_cache[7] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-angle-left\" }, null, -1 /* CACHED */)\n                        ]))], 10 /* CLASS, PROPS */, _hoisted_7),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(pageList.value, (page, index) => {\n                            return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n                                _createCommentVNode(\"  \"),\n                                (page === '...')\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, [...(_cache[8] || (_cache[8] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-ellipsis-h\" }, null, -1 /* CACHED */)\n                                        ]))]))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: _normalizeClass([\"acu-btn acu-btn-page\", { active: page === __props.currentPage }]),\n                                            onClick: ($event) => (goToPage(page))\n                                        }, _toDisplayString(page), 11 /* TEXT, CLASS, PROPS */, _hoisted_10)\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                            ], 64 /* STABLE_FRAGMENT */));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-btn acu-btn-icon\", { disabled: __props.currentPage >= __props.totalPages }]),\n                        disabled: __props.currentPage >= __props.totalPages,\n                        title: \"\",\n                        onClick: _cache[2] || (_cache[2] = ($event) => (goToPage(__props.currentPage + 1)))\n                    }, [...(_cache[9] || (_cache[9] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-angle-right\" }, null, -1 /* CACHED */)\n                        ]))], 10 /* CLASS, PROPS */, _hoisted_11),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-btn acu-btn-icon\", { disabled: __props.currentPage >= __props.totalPages }]),\n                        disabled: __props.currentPage >= __props.totalPages,\n                        title: \"\",\n                        onClick: _cache[3] || (_cache[3] = ($event) => (goToPage(__props.totalPages)))\n                    }, [...(_cache[10] || (_cache[10] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-angle-double-right\" }, null, -1 /* CACHED */)\n                        ]))], 10 /* CLASS, PROPS */, _hoisted_12)\n                ]),\n                _createCommentVNode(\"  \"),\n                (__props.showJumper)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n                        _cache[11] || (_cache[11] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((jumpPage).value = $event)),\n                            type: \"number\",\n                            min: \"1\",\n                            max: __props.totalPages,\n                            class: \"acu-input-sm\",\n                            onKeydown: _withKeys(handleJump, [\"enter\"]),\n                            onBlur: validateJumpPage\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_14), [\n                            [\n                                _vModelText,\n                                jumpPage.value,\n                                void 0,\n                                { number: true }\n                            ]\n                        ]),\n                        _cache[12] || (_cache[12] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-btn acu-btn-sm\",\n                            onClick: handleJump\n                        }, \"GO\")\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"acu-switch-list\" };\nconst _hoisted_2 = { class: \"acu-switch-list-header\" };\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"item-label\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"item-badge\"\n};\nconst _hoisted_6 = [\"checked\", \"onChange\"];\nconst _hoisted_7 = {\n    key: 0,\n    class: \"acu-switch-list-empty\"\n};\nconst _hoisted_8 = { class: \"acu-switch-list-footer\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"empty-hint\"\n};\nimport { computed } from 'vue';\n// ============================================================\n// Props & Emits\n// ============================================================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SwitchList',\n    props: {\n        modelValue: {},\n        items: {},\n        maxHeight: { default: '280px' },\n        emptyText: { default: '' },\n        footerTemplate: { default: ': {selected}/{total}' },\n        emptyHint: { default: '' }\n    },\n    emits: [\"update:modelValue\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * SwitchList - \n         *\n         * \n         * - \n         * - /\n         * - \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const isAllSelected = computed(() => {\n            if (props.items.length === 0)\n                return false;\n            return props.modelValue.length === props.items.length;\n        });\n        /**  */\n        const footerText = computed(() => {\n            return props.footerTemplate\n                .replace('{selected}', String(props.modelValue.length))\n                .replace('{total}', String(props.items.length));\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function isSelected(key) {\n            return props.modelValue.includes(key);\n        }\n        /**  */\n        function toggleItem(key) {\n            const newValue = [...props.modelValue];\n            const index = newValue.indexOf(key);\n            if (index === -1) {\n                newValue.push(key);\n            }\n            else {\n                newValue.splice(index, 1);\n            }\n            emit('update:modelValue', newValue);\n        }\n        /** / */\n        function handleSelectAll() {\n            if (isAllSelected.value) {\n                emit('update:modelValue', []);\n            }\n            else {\n                emit('update:modelValue', props.items.map(item => item.key));\n            }\n        }\n        /**  */\n        function handleClear() {\n            emit('update:modelValue', []);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-quick-select-btn\", { active: isAllSelected.value }]),\n                        onClick: _withModifiers(handleSelectAll, [\"stop\"])\n                    }, [...(_cache[1] || (_cache[1] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-check-double\" }, null, -1 /* CACHED */),\n                            _createTextVNode(\"  \", -1 /* CACHED */)\n                        ]))], 2 /* CLASS */),\n                    _createElementVNode(\"button\", {\n                        class: \"acu-quick-select-btn\",\n                        onClick: _withModifiers(handleClear, [\"stop\"])\n                    }, [...(_cache[2] || (_cache[2] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */),\n                            _createTextVNode(\"  \", -1 /* CACHED */)\n                        ]))])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    class: \"acu-switch-list-body\",\n                    style: _normalizeStyle({ maxHeight: __props.maxHeight })\n                }, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.items, (item) => {\n                        return (_openBlock(), _createElementBlock(\"div\", {\n                            key: item.key,\n                            class: _normalizeClass([\"acu-switch-list-item\", [item.class, { 'is-selected': isSelected(item.key) }]]),\n                            onClick: ($event) => (toggleItem(item.key))\n                        }, [\n                            _createElementVNode(\"span\", _hoisted_4, [\n                                _createTextVNode(_toDisplayString(item.label) + \" \", 1 /* TEXT */),\n                                (item.badge)\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString(item.badge), 1 /* TEXT */))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]),\n                            _createElementVNode(\"label\", {\n                                class: \"acu-switch small\",\n                                onClick: _cache[0] || (_cache[0] = _withModifiers(() => { }, [\"stop\"]))\n                            }, [\n                                _createElementVNode(\"input\", {\n                                    type: \"checkbox\",\n                                    checked: isSelected(item.key),\n                                    onChange: ($event) => (toggleItem(item.key))\n                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_6),\n                                _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                            ])\n                        ], 10 /* CLASS, PROPS */, _hoisted_3));\n                    }), 128 /* KEYED_FRAGMENT */)),\n                    (__props.items.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                            _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-inbox\" }, null, -1 /* CACHED */)),\n                            _createTextVNode(\" \" + _toDisplayString(__props.emptyText), 1 /* TEXT */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 4 /* STYLE */),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_8, [\n                    _createTextVNode(_toDisplayString(footerText.value) + \" \", 1 /* TEXT */),\n                    (__props.modelValue.length === 0 && __props.emptyHint)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, _toDisplayString(__props.emptyHint), 1 /* TEXT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SwitchList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SwitchList.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, Fragment as _Fragment, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-header\" };\nconst _hoisted_2 = { class: \"acu-modal-body\" };\nconst _hoisted_3 = { class: \"acu-add-table-tabs\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"acu-add-table-paste\"\n};\nconst _hoisted_5 = { class: \"acu-add-table-file\" };\nconst _hoisted_6 = { class: \"acu-file-label\" };\nconst _hoisted_7 = {\n    key: 2,\n    class: \"acu-add-table-error\"\n};\nconst _hoisted_8 = {\n    key: 3,\n    class: \"acu-add-table-list\"\n};\nconst _hoisted_9 = { class: \"acu-modal-footer\" };\nconst _hoisted_10 = [\"disabled\"];\nimport { onClickOutside } from '@vueuse/core';\nimport { computed, ref, watch } from 'vue';\nimport { toast } from '../../../composables/useToast';\nimport SwitchList from '../../ui/SwitchList.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AddTableDialog',\n    props: {\n        visible: { type: Boolean }\n    },\n    emits: [\"update:visible\", \"confirm\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs & State\n        // ============================================================\n        const mode = ref('paste');\n        const jsonInput = ref('');\n        const selectedFileName = ref('');\n        const parseError = ref('');\n        const parsedTables = ref([]);\n        const selectedTableKeys = ref([]);\n        const dialogRef = ref();\n        // ============================================================\n        // Computed\n        // ============================================================\n        //  SwitchList \n        const parsedTableItems = computed(() => {\n            return parsedTables.value.map(t => ({\n                key: t.key,\n                label: t.template.name,\n            }));\n        });\n        // ============================================================\n        // Watch & Lifecycle\n        // ============================================================\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                jsonInput.value = '';\n                selectedFileName.value = '';\n                parseError.value = '';\n                parsedTables.value = [];\n                selectedTableKeys.value = [];\n                mode.value = 'paste';\n            }\n        });\n        // \n        onClickOutside(dialogRef, () => {\n            handleClose();\n        });\n        // ============================================================\n        // Methods\n        // ============================================================\n        //  JSON\n        function parseJson() {\n            parseError.value = '';\n            parsedTables.value = [];\n            selectedTableKeys.value = [];\n            if (!jsonInput.value.trim()) {\n                parseError.value = ' JSON ';\n                return;\n            }\n            try {\n                const data = JSON.parse(jsonInput.value);\n                extractTables(data);\n            }\n            catch (e) {\n                parseError.value = `JSON : ${e instanceof Error ? e.message : String(e)}`;\n            }\n        }\n        // \n        function handleFileSelect(event) {\n            const input = event.target;\n            const file = input.files?.[0];\n            if (!file)\n                return;\n            selectedFileName.value = file.name;\n            parseError.value = '';\n            parsedTables.value = [];\n            selectedTableKeys.value = [];\n            const reader = new FileReader();\n            reader.onload = e => {\n                try {\n                    const content = e.target?.result;\n                    const data = JSON.parse(content);\n                    extractTables(data);\n                }\n                catch (err) {\n                    parseError.value = `: ${err instanceof Error ? err.message : String(err)}`;\n                }\n            };\n            reader.onerror = () => {\n                parseError.value = '';\n            };\n            reader.readAsText(file);\n        }\n        //  JSON \n        function extractTables(data) {\n            if (!data || typeof data !== 'object') {\n                parseError.value = ' JSON ';\n                return;\n            }\n            const tables = [];\n            //  sheet_ \n            for (const key of Object.keys(data)) {\n                if (!key.startsWith('sheet_'))\n                    continue;\n                const sheet = data[key];\n                if (!sheet || typeof sheet !== 'object')\n                    continue;\n                // \n                if (!sheet.name || !Array.isArray(sheet.content)) {\n                    console.warn(`[ACU] : ${key}`);\n                    continue;\n                }\n                tables.push({\n                    key,\n                    template: sheet,\n                });\n            }\n            if (tables.length === 0) {\n                parseError.value = ' ( sheet_xxx )';\n                return;\n            }\n            parsedTables.value = tables;\n            // \n            if (tables.length === 1) {\n                selectedTableKeys.value = [tables[0].key];\n            }\n            toast.success(` ${tables.length} `);\n        }\n        // \n        function handleClose() {\n            emit('update:visible', false);\n        }\n        // \n        function handleConfirm() {\n            if (selectedTableKeys.value.length === 0)\n                return;\n            const tablesToAdd = parsedTables.value.filter(t => selectedTableKeys.value.includes(t.key)).map(t => t.template);\n            emit('confirm', tablesToAdd);\n            handleClose();\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", {\n                        ref_key: \"dialogRef\",\n                        ref: dialogRef,\n                        class: \"acu-modal acu-add-table-modal\"\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-back\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, [...(_cache[4] || (_cache[4] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-arrow-left\" }, null, -1 /* CACHED */)\n                                ]))]),\n                            _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, \"\", -1 /* CACHED */)),\n                            _cache[6] || (_cache[6] = _createElementVNode(\"span\", null, null, -1 /* CACHED */))\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _createCommentVNode(\" Tab  JSON /  \"),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass(['acu-tab-btn', { active: mode.value === 'paste' }]),\n                                    onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (mode.value = 'paste'), [\"stop\"]))\n                                }, [...(_cache[7] || (_cache[7] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-paste\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  JSON \", -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */),\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass(['acu-tab-btn', { active: mode.value === 'file' }]),\n                                    onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (mode.value = 'file'), [\"stop\"]))\n                                }, [...(_cache[8] || (_cache[8] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-file-import\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */)\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (mode.value === 'paste')\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((jsonInput).value = $event)),\n                                        placeholder: \" JSON...\",\n                                        class: \"acu-textarea-scrollable\",\n                                        rows: \"8\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, jsonInput.value]\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-modal-btn primary\",\n                                        onClick: _withModifiers(parseJson, [\"stop\"])\n                                    }, [...(_cache[9] || (_cache[9] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\" \", -1 /* CACHED */)\n                                        ]))])\n                                ]))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_5, [\n                                        _createElementVNode(\"label\", _hoisted_6, [\n                                            _createElementVNode(\"input\", {\n                                                type: \"file\",\n                                                accept: \".json\",\n                                                onChange: handleFileSelect,\n                                                style: { \"display\": \"none\" }\n                                            }, null, 32 /* NEED_HYDRATION */),\n                                            _cache[10] || (_cache[10] = _createElementVNode(\"i\", { class: \"fas fa-upload\" }, null, -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", null, _toDisplayString(selectedFileName.value || ' JSON '), 1 /* TEXT */)\n                                        ])\n                                    ])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)),\n                            _createCommentVNode(\"  \"),\n                            (parseError.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                    _cache[11] || (_cache[11] = _createElementVNode(\"i\", { class: \"fas fa-exclamation-circle\" }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(parseError.value), 1 /* TEXT */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            (parsedTables.value.length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                                    _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-table\" }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createVNode(SwitchList, {\n                                        modelValue: selectedTableKeys.value,\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((selectedTableKeys).value = $event)),\n                                        items: parsedTableItems.value,\n                                        \"empty-text\": \"\",\n                                        \"footer-template\": \": {selected}/{total} \"\n                                    }, null, 8 /* PROPS */, [\"modelValue\", \"items\"])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_9, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn secondary\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn primary\",\n                                disabled: selectedTableKeys.value.length === 0,\n                                onClick: _withModifiers(handleConfirm, [\"stop\"])\n                            }, [\n                                _cache[13] || (_cache[13] = _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)),\n                                _createTextVNode(\"  (\" + _toDisplayString(selectedTableKeys.value.length) + \") \", 1 /* TEXT */)\n                            ], 8 /* PROPS */, _hoisted_10)\n                        ])\n                    ], 512 /* NEED_PATCH */)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AddTableDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AddTableDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-body\" };\nconst _hoisted_2 = { class: \"acu-settings-section\" };\nconst _hoisted_3 = { class: \"acu-settings-group\" };\nconst _hoisted_4 = { class: \"acu-purge-range-row\" };\nconst _hoisted_5 = { class: \"acu-settings-section\" };\nconst _hoisted_6 = { class: \"acu-modal-footer\" };\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = {\n    key: 0,\n    class: \"fas fa-spinner fa-spin\"\n};\nconst _hoisted_9 = {\n    key: 1,\n    class: \"fas fa-trash-alt\"\n};\nimport { onClickOutside } from '@vueuse/core';\nimport { computed, ref, watch } from 'vue';\nimport { useDataPersistence } from '../../../composables/useDataPersistence';\nimport { toast } from '../../../composables/useToast';\nimport { getTableData } from '../../../utils';\nimport SwitchList from '../../ui/SwitchList.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AdvancedPurgeDialog',\n    props: {\n        visible: { type: Boolean },\n        initialStartFloor: { default: undefined },\n        initialEndFloor: { default: undefined },\n        initialSelectedTables: { default: () => [] }\n    },\n    emits: [\"update:visible\", \"confirm\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * AdvancedPurgeDialog - \n         *\n         * :\n         * - \n         * - -\n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs & State\n        // ============================================================\n        const dialogRef = ref();\n        const startInputRef = ref();\n        const endInputRef = ref();\n        const startFloor = ref(null);\n        const endFloor = ref(null);\n        const selectedTableKeys = ref([]);\n        const availableTables = ref([]);\n        const isExecuting = ref(false);\n        // ============================================================\n        // Composables\n        // ============================================================\n        const { purgeTableDataByRange } = useDataPersistence();\n        // ============================================================\n        // \n        // ============================================================\n        /**  SwitchList  */\n        const tableListItems = computed(() => {\n            return availableTables.value.map(t => ({\n                key: t.key,\n                label: t.name,\n            }));\n        });\n        /**  */\n        const canConfirm = computed(() => {\n            if (startFloor.value === null || endFloor.value === null)\n                return false;\n            if (isNaN(startFloor.value) || isNaN(endFloor.value))\n                return false;\n            if (startFloor.value < 0 || endFloor.value < 0)\n                return false;\n            if (startFloor.value > endFloor.value)\n                return false;\n            if (selectedTableKeys.value.length === 0)\n                return false;\n            return true;\n        });\n        // ============================================================\n        //  & \n        // ============================================================\n        /**\n         * \n         * \n         */\n        function getDefaultFloorRange() {\n            let ST = window.SillyTavern || (window.parent ? window.parent.SillyTavern : null);\n            if (!ST && window.top && window.top.SillyTavern) {\n                ST = window.top.SillyTavern;\n            }\n            let targetIdx = -1;\n            let lastIdx = 0;\n            if (ST && ST.chat) {\n                lastIdx = Math.max(0, ST.chat.length - 1);\n                // : \n                for (let i = ST.chat.length - 1; i >= 0; i--) {\n                    const msg = ST.chat[i];\n                    if (!msg.is_user && msg.TavernDB_ACU_IsolatedData) {\n                        // \n                        const tags = Object.keys(msg.TavernDB_ACU_IsolatedData);\n                        let hasRealData = false;\n                        for (const tag of tags) {\n                            const tagData = msg.TavernDB_ACU_IsolatedData[tag];\n                            if (tagData && tagData.independentData && Object.keys(tagData.independentData).length > 0) {\n                                hasRealData = true;\n                                break;\n                            }\n                        }\n                        if (hasRealData) {\n                            targetIdx = i;\n                            break;\n                        }\n                    }\n                }\n            }\n            // \n            const defaultStart = targetIdx !== -1 ? targetIdx : lastIdx;\n            const defaultEnd = targetIdx !== -1 ? targetIdx : lastIdx;\n            return { start: defaultStart, end: defaultEnd };\n        }\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                // \n                if (props.initialStartFloor !== undefined && props.initialEndFloor !== undefined) {\n                    startFloor.value = props.initialStartFloor;\n                    endFloor.value = props.initialEndFloor;\n                }\n                else {\n                    // \n                    const defaultRange = getDefaultFloorRange();\n                    startFloor.value = defaultRange.start;\n                    endFloor.value = defaultRange.end;\n                }\n                // \n                if (props.initialSelectedTables && props.initialSelectedTables.length > 0) {\n                    selectedTableKeys.value = [...props.initialSelectedTables];\n                }\n                else {\n                    selectedTableKeys.value = [];\n                }\n                isExecuting.value = false;\n                // \n                loadAvailableTables();\n                // \n            }\n        });\n        // \n        onClickOutside(dialogRef, () => {\n            if (!isExecuting.value) {\n                handleClose();\n            }\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function setRangeAll() {\n            startFloor.value = 0;\n            endFloor.value = 9999999;\n        }\n        /**  */\n        function loadAvailableTables() {\n            try {\n                const rawData = getTableData();\n                if (!rawData) {\n                    availableTables.value = [];\n                    return;\n                }\n                const tables = [];\n                Object.keys(rawData).forEach(key => {\n                    if (!key.startsWith('sheet_'))\n                        return;\n                    const sheet = rawData[key];\n                    if (sheet && typeof sheet === 'object' && sheet.name) {\n                        tables.push({\n                            key,\n                            name: sheet.name,\n                        });\n                    }\n                });\n                availableTables.value = tables;\n            }\n            catch (e) {\n                console.warn('[ACU] :', e);\n                availableTables.value = [];\n            }\n        }\n        /**  */\n        function focusEndInput() {\n            endInputRef.value?.focus();\n        }\n        /**  */\n        function handleClose() {\n            emit('update:visible', false);\n        }\n        /**  */\n        async function handleConfirm() {\n            if (!canConfirm.value || isExecuting.value)\n                return;\n            isExecuting.value = true;\n            try {\n                const result = await purgeTableDataByRange(selectedTableKeys.value, startFloor.value, endFloor.value);\n                if (result.changed) {\n                    const tableNames = selectedTableKeys.value\n                        .map(k => availableTables.value.find(t => t.key === k)?.name || k)\n                        .join(', ');\n                    toast.success(` ${result.changedCount}  (${tableNames})`);\n                    emit('confirm', {\n                        changedCount: result.changedCount,\n                        tables: selectedTableKeys.value,\n                    });\n                    handleClose();\n                }\n                else {\n                    toast.info('');\n                }\n            }\n            catch (e) {\n                console.error('[ACU] :', e);\n                toast.error(': ' + (e instanceof Error ? e.message : String(e)));\n            }\n            finally {\n                isExecuting.value = false;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", {\n                        ref_key: \"dialogRef\",\n                        ref: dialogRef,\n                        class: \"acu-modal acu-advanced-purge-modal\"\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", { class: \"acu-modal-header\" }, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-back\",\n                                onClick: handleClose\n                            }, [...(_cache[3] || (_cache[3] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-arrow-left\" }, null, -1 /* CACHED */)\n                                ]))]),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, \"\", -1 /* CACHED */)),\n                            _cache[5] || (_cache[5] = _createElementVNode(\"span\", null, null, -1 /* CACHED */))\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_2, [\n                                _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-layer-group\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_3, [\n                                    _createElementVNode(\"div\", _hoisted_4, [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            ref_key: \"startInputRef\",\n                                            ref: startInputRef,\n                                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((startFloor).value = $event)),\n                                            type: \"number\",\n                                            class: \"acu-purge-input\",\n                                            placeholder: \"\",\n                                            min: \"0\",\n                                            onKeydown: _withKeys(focusEndInput, [\"enter\"])\n                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                            [\n                                                _vModelText,\n                                                startFloor.value,\n                                                void 0,\n                                                { number: true }\n                                            ]\n                                        ]),\n                                        _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"acu-purge-separator\" }, \"\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            ref_key: \"endInputRef\",\n                                            ref: endInputRef,\n                                            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((endFloor).value = $event)),\n                                            type: \"number\",\n                                            class: \"acu-purge-input\",\n                                            placeholder: \"\",\n                                            min: \"0\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [\n                                                _vModelText,\n                                                endFloor.value,\n                                                void 0,\n                                                { number: true }\n                                            ]\n                                        ])\n                                    ]),\n                                    _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"acu-purge-range-hint\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }),\n                                        _createTextVNode(\"  Chat  0  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"div\", { class: \"acu-purge-quick-actions\" }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-tool-btn small\",\n                                            onClick: setRangeAll\n                                        }, \"\")\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-table\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createVNode(SwitchList, {\n                                    modelValue: selectedTableKeys.value,\n                                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((selectedTableKeys).value = $event)),\n                                    items: tableListItems.value,\n                                    \"empty-text\": \"\",\n                                    \"footer-template\": \": {selected}/{total} \"\n                                }, null, 8 /* PROPS */, [\"modelValue\", \"items\"])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"acu-purge-warning\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-exclamation-triangle\" }),\n                                _createElementVNode(\"span\", null, \"\")\n                            ], -1 /* CACHED */))\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn secondary\",\n                                onClick: handleClose\n                            }, \"\"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn danger\",\n                                disabled: !canConfirm.value || isExecuting.value,\n                                onClick: handleConfirm\n                            }, [\n                                (isExecuting.value)\n                                    ? (_openBlock(), _createElementBlock(\"i\", _hoisted_8))\n                                    : (_openBlock(), _createElementBlock(\"i\", _hoisted_9)),\n                                _createTextVNode(\" \" + _toDisplayString(isExecuting.value ? '...' : ''), 1 /* TEXT */)\n                            ], 8 /* PROPS */, _hoisted_7)\n                        ])\n                    ], 512 /* NEED_PATCH */)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AdvancedPurgeDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AdvancedPurgeDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n    class: \"acu-modal\",\n    style: { \"max-width\": \"400px\" }\n};\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-body\" };\nconst _hoisted_4 = { class: \"acu-settings-row column\" };\nconst _hoisted_5 = {\n    class: \"acu-settings-control\",\n    style: { \"display\": \"flex\", \"gap\": \"8px\", \"align-items\": \"center\" }\n};\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = [\"value\"];\nconst _hoisted_8 = { class: \"acu-settings-row column\" };\nconst _hoisted_9 = {\n    class: \"acu-settings-control\",\n    style: { \"display\": \"flex\", \"gap\": \"8px\", \"align-items\": \"center\" }\n};\nconst _hoisted_10 = [\"value\"];\nconst _hoisted_11 = [\"value\"];\nimport { onMounted, ref, watch } from 'vue';\nimport { toast } from '../../../composables';\nimport { useUIStore } from '../../../stores/useUIStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DirectorDialog',\n    props: {\n        visible: { type: Boolean }\n    },\n    emits: [\"update:visible\", \"close\"],\n    setup(__props, { emit: __emit }) {\n        const uiStore = useUIStore();\n        // Props & Emits\n        const props = __props;\n        const emit = __emit;\n        // State\n        const templatePresets = ref([]);\n        const plotPresets = ref([]);\n        const currentTemplate = ref('');\n        const currentPlot = ref('');\n        // Methods\n        const close = () => {\n            emit('update:visible', false);\n            emit('close');\n        };\n        const loadData = async (retries = 0) => {\n            console.log('[DirectorDialog] loadData called, attempt:', retries + 1);\n            //  API\n            const api = window.AutoCardUpdaterAPI || window.parent.AutoCardUpdaterAPI;\n            if (!api) {\n                console.warn('[DirectorDialog] AutoCardUpdaterAPI not found.');\n                if (retries < 5) {\n                    setTimeout(() => loadData(retries + 1), 200);\n                }\n                else {\n                    toast.error('API ');\n                }\n                return;\n            }\n            // \n            try {\n                const templates = api.getTemplatePresetNames() || [];\n                templatePresets.value = templates;\n                console.log('[DirectorDialog] Templates loaded:', templates);\n            }\n            catch (e) {\n                console.error('[DirectorDialog] Failed to load template presets:', e);\n            }\n            // \n            try {\n                const plots = api.getPlotPresetNames() || [];\n                plotPresets.value = plots;\n                const current = api.getCurrentPlotPreset() || '';\n                currentPlot.value = current;\n                console.log('[DirectorDialog] Plots loaded:', plots, 'Current:', current);\n            }\n            catch (e) {\n                console.error('[DirectorDialog] Failed to load plot presets:', e);\n            }\n        };\n        // Watch visibility to reload data\n        watch(() => props.visible, newVal => {\n            if (newVal) {\n                // \n                // \n                loadData();\n            }\n        });\n        // Handlers\n        const handleTemplateChange = async (e) => {\n            const target = e.target;\n            const name = target.value;\n            const api = window.AutoCardUpdaterAPI || window.parent.AutoCardUpdaterAPI;\n            if (!name || !api)\n                return;\n            try {\n                const result = await api.switchTemplatePreset(name);\n                if (result.success) {\n                    currentTemplate.value = name;\n                    toast.success(result.message);\n                }\n                else {\n                    toast.error(result.message);\n                    // \n                    target.value = currentTemplate.value;\n                }\n            }\n            catch (e) {\n                toast.error(': ' + e.message);\n            }\n        };\n        const handlePlotChange = (e) => {\n            const target = e.target;\n            const name = target.value;\n            const api = window.AutoCardUpdaterAPI || window.parent.AutoCardUpdaterAPI;\n            if (!name || !api)\n                return;\n            try {\n                const success = api.switchPlotPreset(name);\n                if (success) {\n                    currentPlot.value = name;\n                    toast.success(`: ${name}`);\n                }\n                else {\n                    toast.error('');\n                    target.value = currentPlot.value;\n                }\n            }\n            catch (e) {\n                toast.error(': ' + e.message);\n            }\n        };\n        const handleImportTemplate = async () => {\n            const input = prompt(' (JSON):');\n            if (!input || !input.trim())\n                return;\n            const api = window.AutoCardUpdaterAPI || window.parent.AutoCardUpdaterAPI;\n            if (!api)\n                return;\n            try {\n                const result = await api.importTemplateFromData(input);\n                if (result.success) {\n                    toast.success(result.message);\n                    loadData(); // \n                }\n                else {\n                    toast.error(result.message);\n                }\n            }\n            catch (e) {\n                toast.error(': ' + e.message);\n            }\n        };\n        const handleImportPlot = async () => {\n            const input = prompt(' (JSON):');\n            if (!input || !input.trim())\n                return;\n            const api = window.AutoCardUpdaterAPI || window.parent.AutoCardUpdaterAPI;\n            if (!api)\n                return;\n            try {\n                const result = await api.importPlotPresetFromData(input, { switchTo: true });\n                if (result.success) {\n                    toast.success(result.message);\n                    loadData(); // \n                    if (result.presetName) {\n                        currentPlot.value = result.presetName;\n                    }\n                }\n                else {\n                    toast.error(result.message);\n                }\n            }\n            catch (e) {\n                toast.error(': ' + e.message);\n            }\n        };\n        onMounted(() => {\n            if (props.visible) {\n                loadData();\n            }\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(close, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(close, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                    _createTextVNode(\"  \"),\n                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_5, [\n                                    _createElementVNode(\"select\", {\n                                        class: \"acu-select\",\n                                        value: currentTemplate.value,\n                                        style: { \"flex\": \"1\" },\n                                        onChange: handleTemplateChange\n                                    }, [\n                                        _cache[1] || (_cache[1] = _createElementVNode(\"option\", {\n                                            value: \"\",\n                                            disabled: \"\"\n                                        }, \"...\", -1 /* CACHED */)),\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(templatePresets.value, (name) => {\n                                            return (_openBlock(), _createElementBlock(\"option\", {\n                                                key: name,\n                                                value: name\n                                            }, _toDisplayString(name), 9 /* TEXT, PROPS */, _hoisted_7));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_6),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-tool-btn\",\n                                        title: \"\",\n                                        onClick: _withModifiers(handleImportTemplate, [\"stop\"])\n                                    }, [...(_cache[2] || (_cache[2] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-file-import\" }, null, -1 /* CACHED */)\n                                        ]))])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                    _createTextVNode(\"  \"),\n                                    _createElementVNode(\"span\", { class: \"hint\" }, \" AI \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_9, [\n                                    _createElementVNode(\"select\", {\n                                        class: \"acu-select\",\n                                        value: currentPlot.value,\n                                        style: { \"flex\": \"1\" },\n                                        onChange: handlePlotChange\n                                    }, [\n                                        _cache[4] || (_cache[4] = _createElementVNode(\"option\", {\n                                            value: \"\",\n                                            disabled: \"\"\n                                        }, \"...\", -1 /* CACHED */)),\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(plotPresets.value, (name) => {\n                                            return (_openBlock(), _createElementBlock(\"option\", {\n                                                key: name,\n                                                value: name\n                                            }, _toDisplayString(name), 9 /* TEXT, PROPS */, _hoisted_11));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_10),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-tool-btn\",\n                                        title: \"\",\n                                        onClick: _withModifiers(handleImportPlot, [\"stop\"])\n                                    }, [...(_cache[5] || (_cache[5] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-file-import\" }, null, -1 /* CACHED */)\n                                        ]))])\n                                ])\n                            ])\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DirectorDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DirectorDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, unref as _unref, createVNode as _createVNode, normalizeStyle as _normalizeStyle, createBlock as _createBlock, withModifiers as _withModifiers, Transition as _Transition, withCtx as _withCtx } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-header\" };\nconst _hoisted_2 = { class: \"acu-modal-title\" };\nconst _hoisted_3 = { class: \"acu-history-layout acu-pc-layout\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"acu-loading-state\"\n};\nconst _hoisted_5 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_6 = {\n    key: 2,\n    class: \"acu-history-list\"\n};\nconst _hoisted_7 = [\"open\", \"onToggle\"];\nconst _hoisted_8 = { class: \"acu-history-summary\" };\nconst _hoisted_9 = { class: \"acu-history-title\" };\nconst _hoisted_10 = { class: \"acu-history-time\" };\nconst _hoisted_11 = { class: \"acu-history-card-wrapper\" };\nconst _hoisted_12 = { class: \"acu-current-card-label\" };\nconst _hoisted_13 = {\n    key: 0,\n    class: \"acu-changes-count\"\n};\nconst _hoisted_14 = { class: \"acu-current-card\" };\nconst _hoisted_15 = { class: \"acu-history-actions\" };\nconst _hoisted_16 = [\"disabled\"];\nconst _hoisted_17 = [\"disabled\"];\nconst _hoisted_18 = { class: \"acu-config-hint\" };\nconst _hoisted_19 = { key: 0 };\nconst _hoisted_20 = { key: 1 };\nconst _hoisted_21 = { class: \"acu-history-mobile-list\" };\nconst _hoisted_22 = {\n    key: 0,\n    class: \"acu-loading-state\"\n};\nconst _hoisted_23 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_24 = {\n    key: 2,\n    class: \"acu-history-list\"\n};\nconst _hoisted_25 = [\"open\", \"onToggle\"];\nconst _hoisted_26 = { class: \"acu-history-summary\" };\nconst _hoisted_27 = { class: \"acu-history-title\" };\nconst _hoisted_28 = { class: \"acu-history-time\" };\nconst _hoisted_29 = { class: \"acu-history-card-wrapper\" };\nconst _hoisted_30 = { class: \"acu-mobile-actions\" };\nconst _hoisted_31 = { class: \"acu-mobile-history-section\" };\nconst _hoisted_32 = { class: \"acu-history-scroll\" };\nconst _hoisted_33 = {\n    key: 0,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_34 = {\n    key: 1,\n    class: \"acu-history-list\"\n};\nconst _hoisted_35 = [\"open\", \"onToggle\"];\nconst _hoisted_36 = { class: \"acu-history-summary\" };\nconst _hoisted_37 = { class: \"acu-history-title\" };\nconst _hoisted_38 = { class: \"acu-history-time\" };\nconst _hoisted_39 = { class: \"acu-history-card-wrapper\" };\nconst _hoisted_40 = { class: \"acu-mobile-current-section\" };\nconst _hoisted_41 = { class: \"acu-section-label\" };\nconst _hoisted_42 = {\n    key: 0,\n    class: \"acu-changes-count\"\n};\nconst _hoisted_43 = { class: \"acu-current-scroll\" };\nconst _hoisted_44 = { class: \"acu-mobile-actions\" };\nconst _hoisted_45 = [\"disabled\"];\nconst _hoisted_46 = [\"disabled\"];\nconst _hoisted_47 = {\n    key: 0,\n    class: \"acu-preview-overlay\"\n};\nimport { computed, ref, watch } from 'vue';\nimport { useIsMobile, useRowHistory } from '../../../composables';\nimport { useConfigStore } from '../../../stores/useConfigStore';\nimport { useDataStore } from '../../../stores/useDataStore';\nimport DataCard from '../../DataCard.vue';\n\nimport { h } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'HistoryDialog',\n    props: {\n        visible: { type: Boolean, default: false },\n        tableName: {},\n        tableId: {},\n        rowIndex: {},\n        currentRowData: { default: null },\n        titleColIndex: { default: -1 },\n        headers: { default: () => [] }\n    },\n    emits: [\"update:visible\", \"close\", \"apply\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * HistoryDialog - \n         *\n         * \n         * - 5\n         * - PC\n         * - \n         * - \n         * - \n         * - ///\n         * - \"\"\n         */\n        const props = __props;\n        const emit = __emit;\n        const configStore = useConfigStore();\n        const dataStore = useDataStore();\n        const { getSnapshots, snapshotToTableRow, tableRowToCells, formatRelativeTime, getDiff, getCurrentChatId } = useRowHistory();\n        const { isMobile } = useIsMobile();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const snapshots = ref([]);\n        /**  */\n        const isLoading = ref(false);\n        /**  */\n        const isEditMode = ref(false);\n        /**  (colIndex -> value) */\n        const tempChanges = ref(new Map());\n        /**  */\n        const undoStack = ref([]);\n        /**  */\n        const selectedSnapshot = ref(null);\n        /**  */\n        const isPreviewing = ref(false);\n        /**  */\n        const openedTableName = ref('');\n        const openedRowIndex = ref(-1);\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const cardWidth = computed(() => configStore.config.cardWidth || 280);\n        /**\n         * \n         *  ''  ''  ''/''/'' \n         *  1 null \n         */\n        const computedTitleColIndex = computed(() => {\n            // \n            if (props.titleColIndex >= 0) {\n                return props.titleColIndex;\n            }\n            //  ''  '' \n            if (props.tableName.includes('') || props.tableName.includes('')) {\n                //  ''/''/'' \n                if (props.headers.length > 0) {\n                    const idx = props.headers.findIndex(h => h && (h.includes('') || h.includes('') || h.includes('')));\n                    if (idx > 0) {\n                        return idx;\n                    }\n                }\n                //  cells \n                if (props.currentRowData) {\n                    const idx = props.currentRowData.cells.findIndex(cell => cell.key && (cell.key.includes('') || cell.key.includes('') || cell.key.includes('')));\n                    if (idx > 0) {\n                        return idx;\n                    }\n                }\n            }\n            //  1 null \n            return 1;\n        });\n        /**  +  */\n        const displayTitle = computed(() => {\n            const titleValue = getTitleValue(props.currentRowData);\n            if (titleValue) {\n                return `${props.tableName} - ${titleValue}`;\n            }\n            return props.tableName;\n        });\n        /**  */\n        const changedCols = computed(() => {\n            return new Set(tempChanges.value.keys());\n        });\n        /**  DataCard  key */\n        const changedColsKey = computed(() => {\n            return [...tempChanges.value.entries()].map(([k, v]) => `${k}:${v.substring(0, 10)}`).join(',');\n        });\n        /**  */\n        const currentRowDataWithChanges = computed(() => {\n            if (!props.currentRowData) {\n                return { index: 0, key: '', cells: [] };\n            }\n            if (tempChanges.value.size === 0) {\n                return props.currentRowData;\n            }\n            return {\n                index: props.currentRowData.index,\n                key: props.currentRowData.key,\n                cells: props.currentRowData.cells.map((cell, colIndex) => {\n                    if (tempChanges.value.has(colIndex)) {\n                        return {\n                            ...cell,\n                            value: tempChanges.value.get(colIndex),\n                        };\n                    }\n                    return cell;\n                }),\n            };\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function getTitleValue(row) {\n            if (!row)\n                return '';\n            const titleIdx = computedTitleColIndex.value;\n            if (titleIdx >= 0 && row.cells.length > titleIdx) {\n                const value = row.cells[titleIdx]?.value;\n                return value !== undefined ? String(value) : '';\n            }\n            return '';\n        }\n        /**\n         * \n         */\n        function getSnapshotDisplayTitle(snapshot) {\n            const titleIdx = computedTitleColIndex.value;\n            if (titleIdx >= 0 && snapshot.cells[titleIdx]) {\n                return snapshot.cells[titleIdx];\n            }\n            return '';\n        }\n        /**\n         *  TableRow\n         */\n        function snapshotToTableRowLocal(snapshot) {\n            if (!props.currentRowData) {\n                return { index: 0, key: '', cells: [] };\n            }\n            return snapshotToTableRow(snapshot, props.currentRowData);\n        }\n        /**\n         * \n         */\n        function getSnapshotDiff(snapshot) {\n            const currentCells = tableRowToCells(currentRowDataWithChanges.value);\n            return getDiff(snapshot, currentCells);\n        }\n        /**\n         * /\n         */\n        function handleSnapshotToggle(snapshot, event) {\n            const details = event.target;\n            if (details.open && isEditMode.value) {\n                selectedSnapshot.value = snapshot;\n            }\n        }\n        /**\n         * \n         */\n        function startEdit() {\n            isEditMode.value = true;\n            tempChanges.value = new Map();\n            undoStack.value = [];\n            selectedSnapshot.value = snapshots.value.length > 0 ? snapshots.value[0] : null;\n        }\n        /**\n         * \n         */\n        function exitEdit() {\n            isEditMode.value = false;\n            tempChanges.value = new Map();\n            undoStack.value = [];\n            selectedSnapshot.value = null;\n        }\n        /**\n         * \n         */\n        function handleHistoryCellClick(snapshot, colIndex) {\n            if (!isEditMode.value)\n                return;\n            // \n            selectedSnapshot.value = snapshot;\n            // \n            undoStack.value.push(new Map(tempChanges.value));\n            // \n            const value = snapshot.cells[colIndex];\n            if (value !== undefined) {\n                //  Map  Vue \n                const newChanges = new Map(tempChanges.value);\n                newChanges.set(colIndex, value);\n                tempChanges.value = newChanges;\n            }\n        }\n        /**\n         * \n         */\n        function applyWholeCard() {\n            if (!selectedSnapshot.value)\n                return;\n            // \n            undoStack.value.push(new Map(tempChanges.value));\n            // \n            const newChanges = new Map();\n            for (const [key, value] of Object.entries(selectedSnapshot.value.cells)) {\n                newChanges.set(Number(key), value);\n            }\n            tempChanges.value = newChanges;\n        }\n        /**\n         * \n         */\n        function undo() {\n            if (undoStack.value.length === 0)\n                return;\n            //  Map  Vue \n            tempChanges.value = new Map(undoStack.value.pop());\n        }\n        /**\n         * \n         */\n        function handlePreviewStart() {\n            isPreviewing.value = true;\n        }\n        /**\n         * \n         */\n        function handlePreviewEnd() {\n            isPreviewing.value = false;\n        }\n        /**\n         * \n         *  dataStore\n         * \n         */\n        function handleClose() {\n            // \n            if (tempChanges.value.size > 0) {\n                emit('apply', new Map(tempChanges.value));\n            }\n            emit('update:visible', false);\n            emit('close');\n        }\n        /**\n         * \n         */\n        function resetState() {\n            snapshots.value = [];\n            isEditMode.value = false;\n            tempChanges.value = new Map();\n            undoStack.value = [];\n            selectedSnapshot.value = null;\n            isPreviewing.value = false;\n        }\n        /**\n         * \n         */\n        async function loadSnapshots() {\n            isLoading.value = true;\n            try {\n                console.info('[HistoryDialog] , :', {\n                    tableName: props.tableName,\n                    tableId: props.tableId,\n                    rowIndex: props.rowIndex,\n                });\n                snapshots.value = await getSnapshots(props.tableName, props.rowIndex);\n                console.info('[HistoryDialog] :', snapshots.value.length);\n                if (snapshots.value.length > 0) {\n                    console.info('[HistoryDialog] :', snapshots.value[0]);\n                }\n            }\n            catch (e) {\n                console.error('[HistoryDialog] :', e);\n                snapshots.value = [];\n            }\n            finally {\n                isLoading.value = false;\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        //  visible \n        watch(() => props.visible, newVisible => {\n            if (newVisible) {\n                console.info('[HistoryDialog] visible  true');\n                // \n                openedTableName.value = props.tableName;\n                openedRowIndex.value = props.rowIndex;\n                // \n                resetState();\n                loadSnapshots();\n            }\n            else {\n                // \n                resetState();\n            }\n        }, { immediate: true });\n        //  props \n        watch(() => [props.tableName, props.rowIndex], ([newTableName, newRowIndex]) => {\n            if (props.visible) {\n                // \n                if (newTableName !== openedTableName.value || newRowIndex !== openedRowIndex.value) {\n                    console.info('[HistoryDialog] ');\n                    // \n                    openedTableName.value = newTableName;\n                    openedRowIndex.value = newRowIndex;\n                    // \n                    resetState();\n                    loadSnapshots();\n                }\n            }\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"acu-modal acu-history-modal\", { 'acu-mobile-edit-mode': isEditMode.value }])\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createCommentVNode(\"  \"),\n                            _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"acu-drag-handle acu-mobile-only\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_2, [\n                                _cache[0] || (_cache[0] = _createElementVNode(\"i\", { class: \"fas fa-history\" }, null, -1 /* CACHED */)),\n                                _createTextVNode(\"  - \" + _toDisplayString(displayTitle.value), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" PC \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill acu-pc-only\",\n                                onClick: handleClose\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\" PC  CSS  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", {\n                                class: \"acu-history-sidebar\",\n                                style: _normalizeStyle({ width: `${cardWidth.value + 64}px` })\n                            }, [\n                                (isLoading.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [...(_cache[2] || (_cache[2] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-spinner fa-spin\" }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"span\", null, \"...\", -1 /* CACHED */)\n                                        ]))]))\n                                    : (snapshots.value.length === 0)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[3] || (_cache[3] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-history\" }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                            ]))]))\n                                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(snapshots.value, (snapshot, index) => {\n                                                return (_openBlock(), _createElementBlock(\"details\", {\n                                                    key: snapshot.id || snapshot.timestamp,\n                                                    open: index === 0,\n                                                    class: \"acu-history-item\",\n                                                    onToggle: ($event) => (handleSnapshotToggle(snapshot, $event))\n                                                }, [\n                                                    _createElementVNode(\"summary\", _hoisted_8, [\n                                                        _createElementVNode(\"span\", {\n                                                            class: _normalizeClass([\"acu-history-badge\", snapshot.source])\n                                                        }, _toDisplayString(snapshot.source === 'manual' ? '' : 'AI'), 3 /* TEXT, CLASS */),\n                                                        _createElementVNode(\"span\", _hoisted_9, \" #\" + _toDisplayString(index + 1) + \" \" + _toDisplayString(getSnapshotDisplayTitle(snapshot)), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", _hoisted_10, _toDisplayString(_unref(formatRelativeTime)(snapshot.timestamp)), 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_11, [\n                                                        _createVNode(DataCard, {\n                                                            data: snapshotToTableRowLocal(snapshot),\n                                                            \"table-name\": __props.tableName,\n                                                            \"table-id\": __props.tableId,\n                                                            \"view-mode\": \"list\",\n                                                            \"show-header\": false,\n                                                            \"show-index\": false,\n                                                            \"show-history-button\": false,\n                                                            \"title-col-index\": computedTitleColIndex.value,\n                                                            \"custom-highlights\": isEditMode.value ? getSnapshotDiff(snapshot) : undefined,\n                                                            \"allow-edit\": false,\n                                                            onCellClick: (rowIndex, colIndex) => handleHistoryCellClick(snapshot, colIndex)\n                                                        }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\", \"custom-highlights\", \"onCellClick\"])\n                                                    ])\n                                                ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_7));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]))\n                            ], 4 /* STYLE */),\n                            _createCommentVNode(\"  +  \"),\n                            _createElementVNode(\"div\", {\n                                class: \"acu-history-main\",\n                                style: _normalizeStyle({ width: `${cardWidth.value + 64}px` })\n                            }, [\n                                _createElementVNode(\"div\", _hoisted_12, [\n                                    _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-file-alt\" }, null, -1 /* CACHED */)),\n                                    _cache[5] || (_cache[5] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    (tempChanges.value.size > 0)\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_13, \" ( \" + _toDisplayString(tempChanges.value.size) + \" ) \", 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_14, [\n                                    (_openBlock(), _createBlock(DataCard, {\n                                        key: `current-pc-${changedColsKey.value}`,\n                                        data: currentRowDataWithChanges.value,\n                                        \"table-name\": __props.tableName,\n                                        \"table-id\": __props.tableId,\n                                        \"view-mode\": \"list\",\n                                        \"show-header\": true,\n                                        \"show-index\": true,\n                                        \"show-history-button\": false,\n                                        \"title-col-index\": computedTitleColIndex.value,\n                                        \"custom-highlights\": changedCols.value\n                                    }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\", \"custom-highlights\"]))\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_15, [\n                                    (!isEditMode.value)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            class: \"acu-modal-btn primary acu-btn-start-edit\",\n                                            onClick: startEdit\n                                        }, [...(_cache[6] || (_cache[6] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-edit\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))]))\n                                        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-modal-btn primary\",\n                                                disabled: !selectedSnapshot.value,\n                                                onClick: applyWholeCard\n                                            }, [...(_cache[7] || (_cache[7] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-layer-group\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_16),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-modal-btn secondary\",\n                                                disabled: undoStack.value.length === 0,\n                                                onClick: undo\n                                            }, [...(_cache[8] || (_cache[8] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_17),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-modal-btn secondary\",\n                                                onClick: exitEdit\n                                            }, [...(_cache[9] || (_cache[9] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\" \", -1 /* CACHED */)\n                                                ]))])\n                                        ], 64 /* STABLE_FRAGMENT */))\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_18, [\n                                    _cache[10] || (_cache[10] = _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }, null, -1 /* CACHED */)),\n                                    (!isEditMode.value)\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_19, \"\\\"\\\"\"))\n                                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_20, \"\"))\n                                ])\n                            ], 4 /* STYLE */)\n                        ]),\n                        _createCommentVNode(\"  CSS  \"),\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"acu-history-layout acu-mobile-layout\", { 'acu-mobile-edit-mode': isEditMode.value }])\n                        }, [\n                            _createCommentVNode(\"  \"),\n                            (!isEditMode.value)\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                    _createElementVNode(\"div\", _hoisted_21, [\n                                        (isLoading.value)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [...(_cache[11] || (_cache[11] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-spinner fa-spin\" }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"span\", null, \"...\", -1 /* CACHED */)\n                                                ]))]))\n                                            : (snapshots.value.length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [...(_cache[12] || (_cache[12] = [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-history\" }, null, -1 /* CACHED */),\n                                                        _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                                    ]))]))\n                                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(snapshots.value, (snapshot, index) => {\n                                                        return (_openBlock(), _createElementBlock(\"details\", {\n                                                            key: snapshot.id || snapshot.timestamp,\n                                                            open: index === 0,\n                                                            class: \"acu-history-item\",\n                                                            onToggle: ($event) => (handleSnapshotToggle(snapshot, $event))\n                                                        }, [\n                                                            _createElementVNode(\"summary\", _hoisted_26, [\n                                                                _createElementVNode(\"span\", {\n                                                                    class: _normalizeClass([\"acu-history-badge\", snapshot.source])\n                                                                }, _toDisplayString(snapshot.source === 'manual' ? '' : 'AI'), 3 /* TEXT, CLASS */),\n                                                                _createElementVNode(\"span\", _hoisted_27, \" #\" + _toDisplayString(index + 1) + \" \" + _toDisplayString(getSnapshotDisplayTitle(snapshot)), 1 /* TEXT */),\n                                                                _createElementVNode(\"span\", _hoisted_28, _toDisplayString(_unref(formatRelativeTime)(snapshot.timestamp)), 1 /* TEXT */)\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_29, [\n                                                                _createVNode(DataCard, {\n                                                                    data: snapshotToTableRowLocal(snapshot),\n                                                                    \"table-name\": __props.tableName,\n                                                                    \"table-id\": __props.tableId,\n                                                                    \"view-mode\": \"list\",\n                                                                    \"show-header\": false,\n                                                                    \"show-index\": false,\n                                                                    \"show-history-button\": false,\n                                                                    \"title-col-index\": computedTitleColIndex.value,\n                                                                    \"allow-edit\": false\n                                                                }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\"])\n                                                            ])\n                                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_25));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ]))\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_30, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-btn-preview\",\n                                            onTouchstart: _withModifiers(handlePreviewStart, [\"prevent\"]),\n                                            onTouchend: _withModifiers(handlePreviewEnd, [\"prevent\"]),\n                                            onMousedown: handlePreviewStart,\n                                            onMouseup: handlePreviewEnd,\n                                            onMouseleave: handlePreviewEnd\n                                        }, [...(_cache[13] || (_cache[13] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-eye\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))], 32 /* NEED_HYDRATION */),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-btn-primary\",\n                                            onClick: startEdit\n                                        }, [...(_cache[14] || (_cache[14] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-edit\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" \", -1 /* CACHED */)\n                                            ]))]),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-btn-done\",\n                                            onClick: handleClose\n                                        }, [...(_cache[15] || (_cache[15] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" \", -1 /* CACHED */)\n                                            ]))])\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_31, [\n                                        _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"acu-section-label\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-history\" }),\n                                            _createTextVNode(\" \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_32, [\n                                            (snapshots.value.length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_33, [...(_cache[16] || (_cache[16] = [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-history\" }, null, -1 /* CACHED */),\n                                                        _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                                    ]))]))\n                                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(snapshots.value, (snapshot, index) => {\n                                                        return (_openBlock(), _createElementBlock(\"details\", {\n                                                            key: snapshot.id || snapshot.timestamp,\n                                                            open: index === 0,\n                                                            class: \"acu-history-item\",\n                                                            onToggle: ($event) => (handleSnapshotToggle(snapshot, $event))\n                                                        }, [\n                                                            _createElementVNode(\"summary\", _hoisted_36, [\n                                                                _createElementVNode(\"span\", {\n                                                                    class: _normalizeClass([\"acu-history-badge\", snapshot.source])\n                                                                }, _toDisplayString(snapshot.source === 'manual' ? '' : 'AI'), 3 /* TEXT, CLASS */),\n                                                                _createElementVNode(\"span\", _hoisted_37, \" #\" + _toDisplayString(index + 1) + \" \" + _toDisplayString(getSnapshotDisplayTitle(snapshot)), 1 /* TEXT */),\n                                                                _createElementVNode(\"span\", _hoisted_38, _toDisplayString(_unref(formatRelativeTime)(snapshot.timestamp)), 1 /* TEXT */)\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_39, [\n                                                                _createVNode(DataCard, {\n                                                                    data: snapshotToTableRowLocal(snapshot),\n                                                                    \"table-name\": __props.tableName,\n                                                                    \"table-id\": __props.tableId,\n                                                                    \"view-mode\": \"list\",\n                                                                    \"show-header\": false,\n                                                                    \"show-index\": false,\n                                                                    \"show-history-button\": false,\n                                                                    \"title-col-index\": computedTitleColIndex.value,\n                                                                    \"custom-highlights\": getSnapshotDiff(snapshot),\n                                                                    \"allow-edit\": false,\n                                                                    onCellClick: (rowIndex, colIndex) => handleHistoryCellClick(snapshot, colIndex)\n                                                                }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\", \"custom-highlights\", \"onCellClick\"])\n                                                            ])\n                                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_35));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ]))\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_40, [\n                                        _createElementVNode(\"div\", _hoisted_41, [\n                                            _cache[18] || (_cache[18] = _createElementVNode(\"i\", { class: \"fas fa-file-alt\" }, null, -1 /* CACHED */)),\n                                            _cache[19] || (_cache[19] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                            (tempChanges.value.size > 0)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_42, \"( \" + _toDisplayString(tempChanges.value.size) + \" )\", 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_43, [\n                                            (_openBlock(), _createBlock(DataCard, {\n                                                key: `current-mobile-${changedColsKey.value}`,\n                                                data: currentRowDataWithChanges.value,\n                                                \"table-name\": __props.tableName,\n                                                \"table-id\": __props.tableId,\n                                                \"view-mode\": \"list\",\n                                                \"show-header\": true,\n                                                \"show-index\": true,\n                                                \"show-history-button\": false,\n                                                \"title-col-index\": computedTitleColIndex.value,\n                                                \"custom-highlights\": changedCols.value\n                                            }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\", \"custom-highlights\"]))\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_44, [\n                                        _createElementVNode(\"button\", {\n                                            disabled: undoStack.value.length === 0,\n                                            onClick: undo\n                                        }, [...(_cache[20] || (_cache[20] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" \", -1 /* CACHED */)\n                                            ]))], 8 /* PROPS */, _hoisted_45),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-btn-primary\",\n                                            disabled: !selectedSnapshot.value,\n                                            onClick: applyWholeCard\n                                        }, [...(_cache[21] || (_cache[21] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-layer-group\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))], 8 /* PROPS */, _hoisted_46),\n                                        _createElementVNode(\"button\", { onClick: exitEdit }, [...(_cache[22] || (_cache[22] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" \", -1 /* CACHED */)\n                                            ]))]),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-btn-done\",\n                                            onClick: handleClose\n                                        }, [...(_cache[23] || (_cache[23] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" \", -1 /* CACHED */)\n                                            ]))])\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */)),\n                            _createCommentVNode(\"  \"),\n                            _createVNode(_Transition, { name: \"preview-fade\" }, {\n                                default: _withCtx(() => [\n                                    (isPreviewing.value)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_47, [\n                                            _createVNode(DataCard, {\n                                                data: currentRowDataWithChanges.value,\n                                                \"table-name\": __props.tableName,\n                                                \"table-id\": __props.tableId,\n                                                \"view-mode\": \"list\",\n                                                \"show-header\": true,\n                                                \"show-index\": true,\n                                                \"show-history-button\": false,\n                                                \"title-col-index\": computedTitleColIndex.value\n                                            }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\"])\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]),\n                                _: 1 /* STABLE */\n                            })\n                        ], 2 /* CLASS */)\n                    ], 2 /* CLASS */)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./HistoryDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HistoryDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n// Emoji  ()\nexport const EMOJI_LIST = [\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n];\n\n// FontAwesome  ()\nexport const FA_ICONS = [\n  'fas fa-star',\n  'far fa-star',\n  'fas fa-heart',\n  'far fa-heart',\n  'fas fa-user',\n  'far fa-user',\n  'fas fa-check',\n  'fas fa-times',\n  'fas fa-plus',\n  'fas fa-minus',\n  'fas fa-cog',\n  'fas fa-home',\n  'fas fa-search',\n  'fas fa-envelope',\n  'far fa-envelope',\n  'fas fa-bell',\n  'far fa-bell',\n  'fas fa-calendar',\n  'far fa-calendar',\n  'fas fa-clock',\n  'far fa-clock',\n  'fas fa-camera',\n  'fas fa-image',\n  'far fa-image',\n  'fas fa-video',\n  'fas fa-music',\n  'fas fa-microphone',\n  'fas fa-headphones',\n  'fas fa-book',\n  'fas fa-bookmark',\n  'far fa-bookmark',\n  'fas fa-folder',\n  'far fa-folder',\n  'fas fa-folder-open',\n  'far fa-folder-open',\n  'fas fa-file',\n  'far fa-file',\n  'fas fa-file-alt',\n  'far fa-file-alt',\n  'fas fa-download',\n  'fas fa-upload',\n  'fas fa-cloud',\n  'fas fa-comment',\n  'far fa-comment',\n  'fas fa-comments',\n  'far fa-comments',\n  'fas fa-quote-left',\n  'fas fa-quote-right',\n  'fas fa-pen',\n  'fas fa-edit',\n  'far fa-edit',\n  'fas fa-trash',\n  'far fa-trash-alt',\n  'fas fa-save',\n  'far fa-save',\n  'fas fa-share',\n  'fas fa-share-alt',\n  'fas fa-reply',\n  'fas fa-history',\n  'fas fa-list',\n  'fas fa-list-ul',\n  'fas fa-list-ol',\n  'fas fa-th',\n  'fas fa-th-list',\n  'fas fa-bars',\n  'fas fa-ellipsis-h',\n  'fas fa-ellipsis-v',\n  'fas fa-arrow-right',\n  'fas fa-arrow-left',\n  'fas fa-arrow-up',\n  'fas fa-arrow-down',\n  'fas fa-chevron-right',\n  'fas fa-chevron-left',\n  'fas fa-chevron-up',\n  'fas fa-chevron-down',\n  'fas fa-caret-right',\n  'fas fa-caret-left',\n  'fas fa-caret-up',\n  'fas fa-caret-down',\n  'fas fa-angle-right',\n  'fas fa-angle-left',\n  'fas fa-angle-up',\n  'fas fa-angle-down',\n  'fas fa-play',\n  'fas fa-pause',\n  'fas fa-stop',\n  'fas fa-forward',\n  'fas fa-backward',\n  'fas fa-fast-forward',\n  'fas fa-fast-backward',\n  'fas fa-step-forward',\n  'fas fa-step-backward',\n  'fas fa-info-circle',\n  'fas fa-question-circle',\n  'fas fa-exclamation-circle',\n  'fas fa-exclamation-triangle',\n  'fas fa-lock',\n  'fas fa-unlock',\n  'fas fa-key',\n  'fas fa-shield-alt',\n  'fas fa-bug',\n  'fas fa-code',\n  'fas fa-terminal',\n  'fas fa-database',\n  'fas fa-server',\n  'fas fa-network-wired',\n  'fas fa-wifi',\n  'fas fa-signal',\n  'fas fa-battery-full',\n  'fas fa-power-off',\n  'fas fa-desktop',\n  'fas fa-laptop',\n  'fas fa-mobile-alt',\n  'fas fa-tablet-alt',\n  'fas fa-gamepad',\n  'fas fa-keyboard',\n  'fas fa-mouse',\n  'fas fa-print',\n  'fas fa-cube',\n  'fas fa-cubes',\n  'fas fa-puzzle-piece',\n  'fas fa-lightbulb',\n  'far fa-lightbulb',\n  'fas fa-magic',\n  'fas fa-crown',\n  'fas fa-gem',\n  'far fa-gem',\n  'fas fa-gift',\n  'fas fa-trophy',\n  'fas fa-medal',\n  'fas fa-certificate',\n  'fas fa-map-marker-alt',\n  'fas fa-map',\n  'far fa-map',\n  'fas fa-location-arrow',\n  'fas fa-compass',\n  'far fa-compass',\n  'fas fa-globe',\n  'fas fa-globe-americas',\n  'fas fa-flag',\n  'far fa-flag',\n  'fas fa-plane',\n  'fas fa-car',\n  'fas fa-bus',\n  'fas fa-train',\n  'fas fa-bicycle',\n  'fas fa-walking',\n  'fas fa-running',\n  'fas fa-wheelchair',\n  'fas fa-shopping-cart',\n  'fas fa-shopping-bag',\n  'fas fa-credit-card',\n  'far fa-credit-card',\n  'fas fa-money-bill-wave',\n  'fas fa-tag',\n  'fas fa-tags',\n  'fas fa-ticket-alt',\n  'fas fa-users',\n  'fas fa-user-friends',\n  'fas fa-user-plus',\n  'fas fa-user-minus',\n  'fas fa-user-check',\n  'fas fa-user-times',\n  'fas fa-user-circle',\n  'far fa-user-circle',\n  'fas fa-id-card',\n  'far fa-id-card',\n  'fas fa-address-book',\n  'far fa-address-book',\n  'fas fa-address-card',\n  'far fa-address-card',\n  'fas fa-smile',\n  'far fa-smile',\n  'fas fa-frown',\n  'far fa-frown',\n  'fas fa-meh',\n  'far fa-meh',\n  'fas fa-hand-paper',\n  'far fa-hand-paper',\n  'fas fa-thumbs-up',\n  'far fa-thumbs-up',\n  'fas fa-thumbs-down',\n  'far fa-thumbs-down',\n  'fas fa-sun',\n  'far fa-sun',\n  'fas fa-moon',\n  'far fa-moon',\n  'fas fa-cloud-sun',\n  'fas fa-cloud-moon',\n  'fas fa-umbrella',\n  'fas fa-snowflake',\n  'far fa-snowflake',\n  'fas fa-fire',\n  'fas fa-water',\n  'fas fa-leaf',\n  'fas fa-seedling',\n  'fas fa-tree',\n  'fas fa-paw',\n  'fas fa-dog',\n  'fas fa-cat',\n  'fas fa-fish',\n  'fas fa-dragon',\n  'fas fa-feather',\n  'fas fa-feather-alt',\n];\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withKeys as _withKeys } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-icon-select-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-header-actions\" };\nconst _hoisted_4 = { class: \"acu-icon-tabs\" };\nconst _hoisted_5 = { class: \"acu-icon-search-bar\" };\nconst _hoisted_6 = { class: \"acu-search-input-wrapper\" };\nconst _hoisted_7 = { class: \"acu-modal-body\" };\nconst _hoisted_8 = { class: \"acu-icon-grid-container\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"acu-icon-grid\"\n};\nconst _hoisted_10 = [\"title\", \"onClick\"];\nconst _hoisted_11 = { key: 1 };\nconst _hoisted_12 = {\n    key: 1,\n    class: \"acu-no-icons\"\n};\nconst _hoisted_13 = { class: \"acu-icon-manual-input\" };\nconst _hoisted_14 = { class: \"acu-manual-field\" };\nconst _hoisted_15 = { class: \"acu-preview-icon\" };\nconst _hoisted_16 = { key: 1 };\nimport { computed, ref, watch } from 'vue';\nimport { EMOJI_LIST, FA_ICONS } from '../../../constants/icons';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'IconSelectDialog',\n    props: {\n        visible: { type: Boolean },\n        currentIcon: { default: '' }\n    },\n    emits: [\"update:visible\", \"select\", \"close\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        // Emits\n        const emit = __emit;\n        // State\n        const activeTab = ref('emoji');\n        const searchTerm = ref('');\n        const manualInput = ref('');\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                manualInput.value = props.currentIcon;\n                searchTerm.value = '';\n                //  Tab\n                if (props.currentIcon && isFontAwesome(props.currentIcon)) {\n                    activeTab.value = 'fa';\n                }\n                else {\n                    activeTab.value = 'emoji';\n                }\n            }\n        });\n        // Helpers\n        function isFontAwesome(icon) {\n            return icon.startsWith('fa') || icon.includes(' fa-');\n        }\n        // Computed\n        const filteredIcons = computed(() => {\n            const term = searchTerm.value.toLowerCase().trim();\n            const list = activeTab.value === 'emoji' ? EMOJI_LIST : FA_ICONS;\n            if (!term)\n                return list;\n            return list.filter(icon => icon.toLowerCase().includes(term));\n        });\n        // Methods\n        function handleClose() {\n            emit('update:visible', false);\n            emit('close');\n        }\n        function handleSelect(icon) {\n            emit('select', icon);\n            handleClose();\n        }\n        function handleSearch() {\n            //  computed \n        }\n        function handleManualConfirm() {\n            const icon = manualInput.value.trim();\n            if (icon) {\n                handleSelect(icon);\n            }\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-close-pill\",\n                                    onClick: _withModifiers(handleClose, [\"stop\"])\n                                }, \"\")\n                            ])\n                        ]),\n                        _createCommentVNode(\"  Tab  \"),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-icon-tab\", { active: activeTab.value === 'emoji' }]),\n                                onClick: _cache[0] || (_cache[0] = ($event) => (activeTab.value = 'emoji'))\n                            }, \" Emoji  \", 2 /* CLASS */),\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-icon-tab\", { active: activeTab.value === 'fa' }]),\n                                onClick: _cache[1] || (_cache[1] = ($event) => (activeTab.value = 'fa'))\n                            }, \"FontAwesome\", 2 /* CLASS */)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createElementVNode(\"div\", _hoisted_6, [\n                                _cache[5] || (_cache[5] = _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((searchTerm).value = $event)),\n                                    type: \"text\",\n                                    placeholder: \"...\",\n                                    onInput: handleSearch\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [_vModelText, searchTerm.value]\n                                ])\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                (filteredIcons.value.length > 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredIcons.value, (icon) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: icon,\n                                                class: _normalizeClass([\"acu-icon-item\", { selected: __props.currentIcon === icon }]),\n                                                title: icon,\n                                                onClick: _withModifiers(($event) => (handleSelect(icon)), [\"stop\"])\n                                            }, [\n                                                (activeTab.value === 'fa')\n                                                    ? (_openBlock(), _createElementBlock(\"i\", {\n                                                        key: 0,\n                                                        class: _normalizeClass(icon)\n                                                    }, null, 2 /* CLASS */))\n                                                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_11, _toDisplayString(icon), 1 /* TEXT */))\n                                            ], 10 /* CLASS, PROPS */, _hoisted_10));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]))\n                                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [...(_cache[6] || (_cache[6] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                        ]))]))\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_13, [\n                                _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"acu-manual-label\" }, \":\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_14, [\n                                    _createElementVNode(\"div\", _hoisted_15, [\n                                        (isFontAwesome(manualInput.value))\n                                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                                key: 0,\n                                                class: _normalizeClass(manualInput.value)\n                                            }, null, 2 /* CLASS */))\n                                            : (_openBlock(), _createElementBlock(\"span\", _hoisted_16, _toDisplayString(manualInput.value), 1 /* TEXT */))\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((manualInput).value = $event)),\n                                        type: \"text\",\n                                        placeholder: \" Emoji  fa-class\",\n                                        onKeyup: _withKeys(handleManualConfirm, [\"enter\"])\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, manualInput.value]\n                                    ])\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-tool-btn\",\n                                    onClick: _withModifiers(handleManualConfirm, [\"stop\"])\n                                }, [...(_cache[7] || (_cache[7] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */)\n                                    ]))])\n                            ])\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./IconSelectDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./IconSelectDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-body\" };\nconst _hoisted_2 = { class: \"floor-input-group\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"floor-info\"\n};\nconst _hoisted_4 = {\n    key: 1,\n    class: \"floor-error\"\n};\nconst _hoisted_5 = { class: \"acu-modal-footer\" };\nconst _hoisted_6 = [\"disabled\"];\nimport { onClickOutside } from '@vueuse/core';\nimport { computed, nextTick, ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'InputFloorDialog',\n    props: {\n        visible: { type: Boolean },\n        currentFloorInfo: { default: '' },\n        maxFloor: { default: 999 }\n    },\n    emits: [\"update:visible\", \"confirm\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const dialogRef = ref();\n        const inputRef = ref();\n        const floorIndex = ref(null);\n        // \n        const isValidFloor = computed(() => {\n            if (floorIndex.value === null || floorIndex.value === undefined)\n                return false;\n            const floor = floorIndex.value;\n            //  0\n            return Number.isInteger(floor) && floor !== 0;\n        });\n        // \n        const validationError = computed(() => {\n            if (floorIndex.value === null || floorIndex.value === undefined)\n                return '';\n            if (floorIndex.value === 0)\n                return ' 0';\n            if (!Number.isInteger(floorIndex.value))\n                return '';\n            if (Math.abs(floorIndex.value) > props.maxFloor) {\n                return ` (${props.maxFloor})`;\n            }\n            return '';\n        });\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                floorIndex.value = null;\n                nextTick(() => {\n                    inputRef.value?.focus();\n                });\n            }\n        });\n        // \n        onClickOutside(dialogRef, () => {\n            handleCancel();\n        });\n        // \n        const handleConfirm = () => {\n            if (isValidFloor.value && floorIndex.value !== null) {\n                emit('confirm', floorIndex.value);\n                emit('update:visible', false);\n            }\n        };\n        // \n        const handleCancel = () => {\n            emit('update:visible', false);\n        };\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleCancel, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", {\n                        ref_key: \"dialogRef\",\n                        ref: dialogRef,\n                        class: \"acu-modal acu-input-floor-modal\"\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", { class: \"acu-modal-header\" }, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"h3\", null, [\n                                _createElementVNode(\"i\", { class: \"fas fa-layer-group\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-close\",\n                                onClick: handleCancel\n                            }, [...(_cache[1] || (_cache[1] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                ]))])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createElementVNode(\"div\", _hoisted_2, [\n                                _cache[5] || (_cache[5] = _createElementVNode(\"p\", { class: \"floor-hint\" }, \"-1 \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    ref_key: \"inputRef\",\n                                    ref: inputRef,\n                                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((floorIndex).value = $event)),\n                                    type: \"number\",\n                                    class: \"floor-input\",\n                                    placeholder: \": 5  -1\",\n                                    onKeydown: [\n                                        _withKeys(handleConfirm, [\"enter\"]),\n                                        _withKeys(handleCancel, [\"escape\"])\n                                    ]\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        floorIndex.value,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ]),\n                                (__props.currentFloorInfo)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                                        _cache[3] || (_cache[3] = _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", null, \": \" + _toDisplayString(__props.currentFloorInfo), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                (validationError.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                                        _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-exclamation-circle\" }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", null, _toDisplayString(validationError.value), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn secondary\",\n                                onClick: handleCancel\n                            }, \"\"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn primary\",\n                                disabled: !isValidFloor.value,\n                                onClick: handleConfirm\n                            }, [...(_cache[6] || (_cache[6] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-save\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_6)\n                        ])\n                    ], 512 /* NEED_PATCH */)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./InputFloorDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./InputFloorDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, normalizeClass as _normalizeClass, unref as _unref, createVNode as _createVNode, vShow as _vShow, vModelCheckbox as _vModelCheckbox, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-body\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"acu-loading-state\"\n};\nconst _hoisted_3 = { class: \"acu-update-layout\" };\nconst _hoisted_4 = { class: \"acu-update-left\" };\nconst _hoisted_5 = { class: \"acu-settings-section\" };\nconst _hoisted_6 = { class: \"acu-settings-row\" };\nconst _hoisted_7 = { class: \"acu-settings-control acu-preset-control\" };\nconst _hoisted_8 = [\"value\"];\nconst _hoisted_9 = { class: \"acu-settings-row\" };\nconst _hoisted_10 = { class: \"acu-settings-control\" };\nconst _hoisted_11 = [\"value\"];\nconst _hoisted_12 = { class: \"acu-settings-section\" };\nconst _hoisted_13 = { class: \"acu-settings-row\" };\nconst _hoisted_14 = { class: \"acu-settings-control\" };\nconst _hoisted_15 = { class: \"acu-settings-row\" };\nconst _hoisted_16 = { class: \"acu-settings-control\" };\nconst _hoisted_17 = { class: \"acu-settings-row\" };\nconst _hoisted_18 = { class: \"acu-settings-control\" };\nconst _hoisted_19 = { class: \"acu-settings-row\" };\nconst _hoisted_20 = { class: \"acu-settings-control\" };\nconst _hoisted_21 = { class: \"acu-settings-section acu-show-mobile-only\" };\nconst _hoisted_22 = { class: \"acu-collapse-indicator\" };\nconst _hoisted_23 = { class: \"acu-table-selector-mobile\" };\nconst _hoisted_24 = { class: \"acu-settings-section\" };\nconst _hoisted_25 = { class: \"acu-settings-row\" };\nconst _hoisted_26 = { class: \"acu-settings-control\" };\nconst _hoisted_27 = { class: \"acu-switch\" };\nconst _hoisted_28 = {\n    key: 0,\n    class: \"acu-settings-row\"\n};\nconst _hoisted_29 = { class: \"acu-settings-control\" };\nconst _hoisted_30 = { class: \"acu-switch\" };\nconst _hoisted_31 = {\n    key: 0,\n    class: \"acu-settings-section\"\n};\nconst _hoisted_32 = { class: \"acu-update-right acu-hide-mobile\" };\nconst _hoisted_33 = {\n    key: 0,\n    class: \"acu-issue-alert\"\n};\nconst _hoisted_34 = { class: \"acu-update-action-group\" };\nconst _hoisted_35 = [\"disabled\"];\nconst _hoisted_36 = {\n    key: 0,\n    class: \"fas fa-spinner fa-spin\"\n};\nconst _hoisted_37 = {\n    key: 1,\n    class: \"fas fa-hand-sparkles\"\n};\nimport { onClickOutside } from '@vueuse/core';\nimport { computed, reactive, ref, watch } from 'vue';\nimport { useDbSettings } from '../../../composables/useDbSettings';\nimport { toast } from '../../../composables/useToast';\nimport { useUpdatePresets } from '../../../composables/useUpdatePresets';\nimport { useDataStore } from '../../../stores/useDataStore';\nimport { useUIStore } from '../../../stores/useUIStore';\nimport { SwitchList } from '../../ui';\n\nimport { h } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ManualUpdateDialog',\n    props: {\n        visible: { type: Boolean }\n    },\n    emits: [\"update:visible\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * ManualUpdateDialog - \n         *\n         * :\n         * - 4\n         * - //\n         * - PC\n         * - \n         * - \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs & State\n        // ============================================================\n        const dialogRef = ref();\n        const isLoading = ref(true);\n        const isUpdating = ref(false);\n        // \n        const localSettings = reactive({\n            autoUpdateThreshold: undefined,\n            autoUpdateFrequency: undefined,\n            updateBatchSize: undefined,\n            skipUpdateFloors: undefined,\n        });\n        // \n        const selectedPresetId = ref('');\n        const autoFixPresetId = ref('');\n        // Store \n        const uiStore = useUIStore();\n        // \n        const autoTriggerEnabled = ref(false);\n        const autoExecuteEnabled = ref(false);\n        // \n        const availableTables = ref([]);\n        const selectedTableNames = ref([]);\n        const tableSelectorExpanded = ref(false);\n        // \n        const availableColumns = ref([]);\n        const selectedEmptyCheckColumns = ref([]);\n        // ============================================================\n        // Composables & Stores\n        // ============================================================\n        const { settings, loadSettings, saveSettings, executeManualUpdate, getTableList, executeWithPreset } = useDbSettings();\n        const presetsManager = useUpdatePresets();\n        const dataStore = useDataStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const presets = computed(() => presetsManager.presets.value);\n        /**  */\n        const hasIntegrityIssues = computed(() => dataStore.hasIntegrityIssues);\n        /**  */\n        const integritySummary = computed(() => dataStore.getIntegritySummary());\n        /**  */\n        const isAllSelected = computed(() => {\n            if (availableTables.value.length === 0)\n                return false;\n            return selectedTableNames.value.length === availableTables.value.length;\n        });\n        /** / */\n        const isOnlySummarySelected = computed(() => {\n            const summaryTables = availableTables.value.filter(t => t.isSummaryOrOutline);\n            if (summaryTables.length === 0)\n                return false;\n            if (selectedTableNames.value.length !== summaryTables.length)\n                return false;\n            return summaryTables.every(t => selectedTableNames.value.includes(t.name));\n        });\n        /**  SwitchList  */\n        const columnListItems = computed(() => {\n            return availableColumns.value.map(column => ({\n                key: column,\n                label: column,\n            }));\n        });\n        /**  SwitchList  */\n        const tableListItems = computed(() => {\n            return availableTables.value.map(table => ({\n                key: table.name,\n                label: table.name,\n                badge: table.isSummaryOrOutline ? '' : undefined,\n            }));\n        });\n        /**  */\n        const isAllColumnsSelected = computed(() => {\n            if (availableColumns.value.length === 0)\n                return false;\n            return selectedEmptyCheckColumns.value.length === availableColumns.value.length;\n        });\n        // ============================================================\n        //  & \n        // ============================================================\n        // \n        watch(() => props.visible, async (visible) => {\n            if (visible) {\n                isLoading.value = true;\n                try {\n                    await loadSettings();\n                    // \n                    Object.assign(localSettings, {\n                        autoUpdateThreshold: settings.value.autoUpdateThreshold,\n                        autoUpdateFrequency: settings.value.autoUpdateFrequency,\n                        updateBatchSize: settings.value.updateBatchSize,\n                        skipUpdateFloors: settings.value.skipUpdateFloors,\n                    });\n                    // \n                    presetsManager.loadPresets();\n                    const autoFixId = presetsManager.autoFixPreset.value?.id;\n                    autoFixPresetId.value = autoFixId || '';\n                    // \n                    autoTriggerEnabled.value = presetsManager.globalAutoTriggerEnabled.value;\n                    autoExecuteEnabled.value = presetsManager.globalAutoExecuteEnabled.value;\n                    // \n                    const activePreset = presetsManager.activePreset.value;\n                    if (activePreset) {\n                        selectedTableNames.value = activePreset.autoTrigger.updateTargetTables || [];\n                        selectedEmptyCheckColumns.value = activePreset.autoTrigger.emptyCheckColumns || [];\n                    }\n                    // \n                    availableTables.value = getTableList();\n                    // /\n                    loadAvailableColumns();\n                }\n                catch (error) {\n                    console.error('[ACU] :', error);\n                    toast.error('');\n                }\n                finally {\n                    isLoading.value = false;\n                }\n            }\n        }, { immediate: true });\n        // \n        onClickOutside(dialogRef, () => {\n            handleClose();\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function handleClose() {\n            emit('update:visible', false);\n        }\n        /**\n         * \n         */\n        async function handleSettingChange(key, value) {\n            if (value === undefined || isNaN(value))\n                return;\n            try {\n                await saveSettings({ [key]: value });\n                console.info(`[ACU]  ${key} :`, value);\n            }\n            catch (error) {\n                console.error(`[ACU]  ${key} :`, error);\n                toast.error('');\n            }\n        }\n        /**\n         * \n         */\n        async function handlePresetChange() {\n            if (!selectedPresetId.value)\n                return;\n            const preset = presets.value.find((p) => p.id === selectedPresetId.value);\n            if (preset) {\n                // \n                Object.assign(localSettings, preset.settings);\n                // \n                selectedTableNames.value = preset.autoTrigger.updateTargetTables || [];\n                // \n                await saveSettings(preset.settings);\n                presetsManager.setActivePreset(selectedPresetId.value);\n                toast.success('');\n            }\n        }\n        /**\n         * \n         */\n        function handleAutoFixPresetChange() {\n            presetsManager.setAutoFixPreset(autoFixPresetId.value || null);\n            toast.info(autoFixPresetId.value ? '' : '');\n        }\n        /**\n         * \n         */\n        function openSavePresetDialog() {\n            const summaryItems = [\n                `: ${localSettings.autoUpdateThreshold}`,\n                `:  ${localSettings.autoUpdateFrequency} `,\n                `: ${localSettings.updateBatchSize}`,\n                `: ${localSettings.skipUpdateFloors}`,\n                `: ${selectedTableNames.value.length ? selectedTableNames.value.join(', ') : ''}`,\n            ];\n            uiStore.openPresetSaveDialog({\n                presetType: 'manual-update',\n                summaryItems,\n                initialName: '',\n                checkDuplicate: (name) => presetsManager.findPresetByName(name) !== null,\n            }, {\n                onSave: (name) => {\n                    const { preset, isNew } = presetsManager.createOrUpdatePreset(name, {\n                        autoUpdateThreshold: localSettings.autoUpdateThreshold,\n                        updateBatchSize: localSettings.updateBatchSize,\n                        skipUpdateFloors: localSettings.skipUpdateFloors,\n                        autoUpdateFrequency: localSettings.autoUpdateFrequency,\n                    }, {\n                        enabled: autoTriggerEnabled.value,\n                        onEmptyCell: true,\n                        onIndexGap: true,\n                        targetTables: ['', ''],\n                        updateTargetTables: selectedTableNames.value,\n                        emptyCheckColumns: selectedEmptyCheckColumns.value,\n                    });\n                    if (isNew) {\n                        toast.success(`\"${name}\"`);\n                    }\n                    else {\n                        toast.success(`\"${name}\"`);\n                    }\n                },\n            });\n        }\n        /**\n         * \n         */\n        function handleDeletePreset() {\n            if (!selectedPresetId.value)\n                return;\n            const targetId = selectedPresetId.value;\n            const preset = presets.value.find((p) => p.id === targetId);\n            if (!preset)\n                return;\n            if (confirm(`\"${preset.name}\"`)) {\n                presetsManager.deletePreset(selectedPresetId.value);\n                selectedPresetId.value = '';\n                toast.success('');\n            }\n        }\n        /**\n         * \n         */\n        function handleAutoTriggerChange() {\n            // \n            presetsManager.setGlobalAutoTrigger(autoTriggerEnabled.value);\n            // \n            if (selectedPresetId.value) {\n                presetsManager.updatePreset(selectedPresetId.value, {\n                    autoTrigger: {\n                        enabled: autoTriggerEnabled.value,\n                        onEmptyCell: true,\n                        onIndexGap: true,\n                        targetTables: ['', ''],\n                        updateTargetTables: selectedTableNames.value,\n                        emptyCheckColumns: selectedEmptyCheckColumns.value,\n                    },\n                });\n            }\n            // \n            if (!autoTriggerEnabled.value) {\n                autoExecuteEnabled.value = false;\n                presetsManager.setAutoFixPreset(null);\n                // \n                dataStore.clearIntegrityIssues();\n            }\n        }\n        /**\n         * \n         */\n        function handleAutoExecuteChange() {\n            // \n            presetsManager.setGlobalAutoExecute(autoExecuteEnabled.value);\n            if (autoExecuteEnabled.value) {\n                // \n                if (!autoFixPresetId.value && presets.value.length > 0) {\n                    // \n                    autoFixPresetId.value = presets.value[0].id;\n                    presetsManager.setAutoFixPreset(autoFixPresetId.value);\n                    toast.info(`\"${presets.value[0].name}\"`);\n                }\n                else if (presets.value.length === 0) {\n                    toast.warning('');\n                    autoExecuteEnabled.value = false;\n                    presetsManager.setGlobalAutoExecute(false);\n                    return;\n                }\n                else {\n                    presetsManager.setAutoFixPreset(autoFixPresetId.value);\n                }\n            }\n            else {\n                // \n                presetsManager.setAutoFixPreset(null);\n                autoFixPresetId.value = '';\n            }\n        }\n        /**\n         * \n         */\n        function toggleTableSelection(tableName) {\n            const index = selectedTableNames.value.indexOf(tableName);\n            if (index === -1) {\n                selectedTableNames.value.push(tableName);\n            }\n            else {\n                selectedTableNames.value.splice(index, 1);\n            }\n            handleTableSelectionChange(selectedTableNames.value);\n        }\n        /**\n         * SwitchList \n         */\n        function handleTableSelectionChange(newSelection) {\n            // \n            if (selectedPresetId.value) {\n                presetsManager.updatePreset(selectedPresetId.value, {\n                    autoTrigger: {\n                        enabled: autoTriggerEnabled.value,\n                        onEmptyCell: true,\n                        onIndexGap: true,\n                        targetTables: ['', ''],\n                        updateTargetTables: newSelection,\n                        emptyCheckColumns: selectedEmptyCheckColumns.value,\n                    },\n                });\n            }\n        }\n        /**\n         * \n         */\n        function handleSelectAll() {\n            if (isAllSelected.value) {\n                // \n                selectedTableNames.value = [];\n            }\n            else {\n                // \n                selectedTableNames.value = availableTables.value.map(t => t.name);\n            }\n        }\n        /**\n         * /\n         */\n        function handleSelectSummaryOnly() {\n            const summaryTables = availableTables.value.filter(t => t.isSummaryOrOutline);\n            selectedTableNames.value = summaryTables.map(t => t.name);\n        }\n        /**\n         * /\n         */\n        function loadAvailableColumns() {\n            const summaryTables = availableTables.value.filter(t => t.isSummaryOrOutline);\n            if (summaryTables.length === 0) {\n                availableColumns.value = [];\n                return;\n            }\n            try {\n                const api = window.parent?.AutoCardUpdaterAPI || window.AutoCardUpdaterAPI;\n                if (!api?.exportTableAsJson) {\n                    availableColumns.value = [];\n                    return;\n                }\n                const data = api.exportTableAsJson();\n                const columnsSet = new Set();\n                for (const table of summaryTables) {\n                    const sheet = data[table.key];\n                    if (sheet?.content?.[0]) {\n                        sheet.content[0].forEach((h) => {\n                            const headerName = String(h).trim();\n                            if (headerName)\n                                columnsSet.add(headerName);\n                        });\n                    }\n                }\n                availableColumns.value = Array.from(columnsSet);\n            }\n            catch (e) {\n                console.warn('[ACU] :', e);\n                availableColumns.value = [];\n            }\n        }\n        /**\n         * \n         */\n        function toggleColumnSelection(column) {\n            const index = selectedEmptyCheckColumns.value.indexOf(column);\n            if (index === -1) {\n                selectedEmptyCheckColumns.value.push(column);\n            }\n            else {\n                selectedEmptyCheckColumns.value.splice(index, 1);\n            }\n            // \n            saveColumnSelection();\n        }\n        /**\n         * \n         */\n        function handleSelectAllColumns() {\n            if (isAllColumnsSelected.value) {\n                selectedEmptyCheckColumns.value = [];\n            }\n            else {\n                selectedEmptyCheckColumns.value = [...availableColumns.value];\n            }\n            saveColumnSelection();\n        }\n        /**\n         * \n         */\n        function handleClearColumns() {\n            selectedEmptyCheckColumns.value = [];\n            saveColumnSelection();\n        }\n        /**\n         * \n         */\n        function saveColumnSelection() {\n            if (selectedPresetId.value) {\n                presetsManager.updatePreset(selectedPresetId.value, {\n                    autoTrigger: {\n                        enabled: autoTriggerEnabled.value,\n                        onEmptyCell: true,\n                        onIndexGap: true,\n                        targetTables: ['', ''],\n                        updateTargetTables: selectedTableNames.value,\n                        emptyCheckColumns: selectedEmptyCheckColumns.value,\n                    },\n                });\n            }\n        }\n        /**\n         *  API\n         */\n        async function handleExecuteUpdate() {\n            if (isUpdating.value)\n                return;\n            isUpdating.value = true;\n            try {\n                //  API + \n                const result = await executeWithPreset({\n                    autoUpdateThreshold: localSettings.autoUpdateThreshold,\n                    updateBatchSize: localSettings.updateBatchSize,\n                    skipUpdateFloors: localSettings.skipUpdateFloors,\n                    autoUpdateFrequency: localSettings.autoUpdateFrequency,\n                }, selectedTableNames.value);\n                if (result.success) {\n                    toast.success(' ');\n                }\n                else {\n                    toast.warning(' ' + (result.message || ''));\n                }\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n                toast.error('');\n            }\n            finally {\n                isUpdating.value = false;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", {\n                        ref_key: \"dialogRef\",\n                        ref: dialogRef,\n                        class: \"acu-modal acu-manual-update-modal\"\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", { class: \"acu-modal-header\" }, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-back\",\n                                onClick: handleClose\n                            }, [...(_cache[16] || (_cache[16] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-arrow-left\" }, null, -1 /* CACHED */)\n                                ]))]),\n                            _cache[17] || (_cache[17] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, \"\", -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: handleClose\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createCommentVNode(\"  \"),\n                            (isLoading.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [...(_cache[18] || (_cache[18] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-spinner fa-spin\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", null, \"...\", -1 /* CACHED */)\n                                    ]))]))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createCommentVNode(\" PC \"),\n                                    _createElementVNode(\"div\", _hoisted_3, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_4, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_5, [\n                                                _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-bookmark\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_6, [\n                                                    _cache[22] || (_cache[22] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\"  \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_7, [\n                                                        _withDirectives(_createElementVNode(\"select\", {\n                                                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((selectedPresetId).value = $event)),\n                                                            class: \"acu-config-select\",\n                                                            onChange: handlePresetChange\n                                                        }, [\n                                                            _cache[19] || (_cache[19] = _createElementVNode(\"option\", { value: \"\" }, \"--  --\", -1 /* CACHED */)),\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(presets.value, (preset) => {\n                                                                return (_openBlock(), _createElementBlock(\"option\", {\n                                                                    key: preset.id,\n                                                                    value: preset.id\n                                                                }, _toDisplayString(preset.name), 9 /* TEXT, PROPS */, _hoisted_8));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [_vModelSelect, selectedPresetId.value]\n                                                        ]),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-tool-btn\",\n                                                            title: \"\",\n                                                            onClick: openSavePresetDialog\n                                                        }, [...(_cache[20] || (_cache[20] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                                                            ]))]),\n                                                        (selectedPresetId.value)\n                                                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: 0,\n                                                                class: \"acu-tool-btn acu-btn-danger\",\n                                                                title: \"\",\n                                                                onClick: handleDeletePreset\n                                                            }, [...(_cache[21] || (_cache[21] = [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */)\n                                                                ]))]))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_9, [\n                                                    _cache[24] || (_cache[24] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\"  \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_10, [\n                                                        _withDirectives(_createElementVNode(\"select\", {\n                                                            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((autoFixPresetId).value = $event)),\n                                                            class: \"acu-config-select\",\n                                                            onChange: handleAutoFixPresetChange\n                                                        }, [\n                                                            _cache[23] || (_cache[23] = _createElementVNode(\"option\", { value: \"\" }, \"--  --\", -1 /* CACHED */)),\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(presets.value, (preset) => {\n                                                                return (_openBlock(), _createElementBlock(\"option\", {\n                                                                    key: preset.id,\n                                                                    value: preset.id\n                                                                }, _toDisplayString(preset.name), 9 /* TEXT, PROPS */, _hoisted_11));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [_vModelSelect, autoFixPresetId.value]\n                                                        ])\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_12, [\n                                                _cache[30] || (_cache[30] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-sliders-h\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createCommentVNode(\" AI \"),\n                                                _createElementVNode(\"div\", _hoisted_13, [\n                                                    _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\" AI \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"AI\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_14, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((localSettings.autoUpdateThreshold) = $event)),\n                                                            type: \"number\",\n                                                            class: \"acu-config-input\",\n                                                            min: \"1\",\n                                                            max: \"500\",\n                                                            onChange: _cache[3] || (_cache[3] = ($event) => (handleSettingChange('autoUpdateThreshold', localSettings.autoUpdateThreshold)))\n                                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                localSettings.autoUpdateThreshold,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\" N \"),\n                                                _createElementVNode(\"div\", _hoisted_15, [\n                                                    _cache[27] || (_cache[27] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\" N \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_16, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((localSettings.autoUpdateFrequency) = $event)),\n                                                            type: \"number\",\n                                                            class: \"acu-config-input\",\n                                                            min: \"1\",\n                                                            max: \"100\",\n                                                            onChange: _cache[5] || (_cache[5] = ($event) => (handleSettingChange('autoUpdateFrequency', localSettings.autoUpdateFrequency)))\n                                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                localSettings.autoUpdateFrequency,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_17, [\n                                                    _cache[28] || (_cache[28] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\"  \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_18, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((localSettings.updateBatchSize) = $event)),\n                                                            type: \"number\",\n                                                            class: \"acu-config-input\",\n                                                            min: \"1\",\n                                                            max: \"50\",\n                                                            onChange: _cache[7] || (_cache[7] = ($event) => (handleSettingChange('updateBatchSize', localSettings.updateBatchSize)))\n                                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                localSettings.updateBatchSize,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\" X \"),\n                                                _createElementVNode(\"div\", _hoisted_19, [\n                                                    _cache[29] || (_cache[29] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\" X \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_20, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((localSettings.skipUpdateFloors) = $event)),\n                                                            type: \"number\",\n                                                            class: \"acu-config-input\",\n                                                            min: \"0\",\n                                                            max: \"20\",\n                                                            onChange: _cache[9] || (_cache[9] = ($event) => (handleSettingChange('skipUpdateFloors', localSettings.skipUpdateFloors)))\n                                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                localSettings.skipUpdateFloors,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ])\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_21, [\n                                                _createElementVNode(\"div\", {\n                                                    class: _normalizeClass([\"acu-settings-title acu-collapsible\", { 'is-expanded': tableSelectorExpanded.value }]),\n                                                    onClick: _cache[10] || (_cache[10] = ($event) => (tableSelectorExpanded.value = !tableSelectorExpanded.value))\n                                                }, [\n                                                    _cache[31] || (_cache[31] = _createElementVNode(\"i\", { class: \"fas fa-table\" }, null, -1 /* CACHED */)),\n                                                    _cache[32] || (_cache[32] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_22, _toDisplayString(tableSelectorExpanded.value ? '' : ''), 1 /* TEXT */)\n                                                ], 2 /* CLASS */),\n                                                _withDirectives(_createElementVNode(\"div\", _hoisted_23, [\n                                                    _createVNode(_unref(SwitchList), {\n                                                        modelValue: selectedTableNames.value,\n                                                        \"onUpdate:modelValue\": [\n                                                            _cache[11] || (_cache[11] = ($event) => ((selectedTableNames).value = $event)),\n                                                            handleTableSelectionChange\n                                                        ],\n                                                        items: tableListItems.value,\n                                                        \"empty-text\": \"\",\n                                                        \"footer-template\": \": {selected}/{total} \",\n                                                        \"empty-hint\": \"()\"\n                                                    }, null, 8 /* PROPS */, [\"modelValue\", \"items\"])\n                                                ], 512 /* NEED_PATCH */), [\n                                                    [_vShow, tableSelectorExpanded.value]\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_24, [\n                                                _cache[37] || (_cache[37] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-magic\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_25, [\n                                                    _cache[34] || (_cache[34] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\"  \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_26, [\n                                                        _createElementVNode(\"label\", _hoisted_27, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((autoTriggerEnabled).value = $event)),\n                                                                type: \"checkbox\",\n                                                                onChange: handleAutoTriggerChange\n                                                            }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                                [_vModelCheckbox, autoTriggerEnabled.value]\n                                                            ]),\n                                                            _cache[33] || (_cache[33] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\"  \"),\n                                                (autoTriggerEnabled.value)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [\n                                                        _cache[36] || (_cache[36] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_29, [\n                                                            _createElementVNode(\"label\", _hoisted_30, [\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event) => ((autoExecuteEnabled).value = $event)),\n                                                                    type: \"checkbox\",\n                                                                    onChange: handleAutoExecuteChange\n                                                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                                    [_vModelCheckbox, autoExecuteEnabled.value]\n                                                                ]),\n                                                                _cache[35] || (_cache[35] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                            ])\n                                                        ])\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            (autoTriggerEnabled.value)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [\n                                                    _cache[38] || (_cache[38] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-columns\" }),\n                                                        _createTextVNode(\"  \")\n                                                    ], -1 /* CACHED */)),\n                                                    _createVNode(_unref(SwitchList), {\n                                                        modelValue: selectedEmptyCheckColumns.value,\n                                                        \"onUpdate:modelValue\": [\n                                                            _cache[14] || (_cache[14] = ($event) => ((selectedEmptyCheckColumns).value = $event)),\n                                                            saveColumnSelection\n                                                        ],\n                                                        items: columnListItems.value,\n                                                        \"empty-text\": \"/\",\n                                                        \"footer-template\": \": {selected}/{total} \",\n                                                        \"empty-hint\": \"()\"\n                                                    }, null, 8 /* PROPS */, [\"modelValue\", \"items\"])\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createCommentVNode(\"  (PC) \"),\n                                        _createElementVNode(\"div\", _hoisted_32, [\n                                            _createVNode(_unref(SwitchList), {\n                                                modelValue: selectedTableNames.value,\n                                                \"onUpdate:modelValue\": [\n                                                    _cache[15] || (_cache[15] = ($event) => ((selectedTableNames).value = $event)),\n                                                    handleTableSelectionChange\n                                                ],\n                                                items: tableListItems.value,\n                                                \"empty-text\": \"\",\n                                                \"footer-template\": \": {selected}/{total} \",\n                                                \"empty-hint\": \"()\"\n                                            }, null, 8 /* PROPS */, [\"modelValue\", \"items\"])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    (hasIntegrityIssues.value)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_33, [\n                                            _cache[39] || (_cache[39] = _createElementVNode(\"i\", { class: \"fas fa-exclamation-triangle\" }, null, -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", null, _toDisplayString(integritySummary.value), 1 /* TEXT */)\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_34, [\n                                        _createElementVNode(\"button\", {\n                                            class: _normalizeClass([\"acu-update-btn\", { 'is-updating': isUpdating.value }]),\n                                            disabled: isUpdating.value,\n                                            onClick: handleExecuteUpdate\n                                        }, [\n                                            (isUpdating.value)\n                                                ? (_openBlock(), _createElementBlock(\"i\", _hoisted_36))\n                                                : (_openBlock(), _createElementBlock(\"i\", _hoisted_37)),\n                                            _createElementVNode(\"span\", null, _toDisplayString(isUpdating.value ? '...' : ''), 1 /* TEXT */)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_35)\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ])\n                    ], 512 /* NEED_PATCH */),\n                    _createCommentVNode(\"  App.vue  \")\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ManualUpdateDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ManualUpdateDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ManualUpdateDialog.vue?vue&type=style&index=0&id=5df49713&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5df49713\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-preset-save-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-body\" };\nconst _hoisted_4 = { class: \"acu-settings-group\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"acu-preset-warning\"\n};\nconst _hoisted_6 = {\n    key: 1,\n    class: \"acu-preset-summary\"\n};\nconst _hoisted_7 = { class: \"acu-preset-summary-list\" };\nconst _hoisted_8 = { class: \"acu-modal-footer\" };\nconst _hoisted_9 = [\"disabled\"];\nimport { computed, nextTick, ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PresetSaveDialog',\n    props: {\n        visible: { type: Boolean },\n        presetType: { default: 'manual-update' },\n        summaryItems: { default: () => [] },\n        initialName: { default: '' },\n        checkDuplicate: { type: Function, default: () => false }\n    },\n    emits: [\"update:visible\", \"save\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // State\n        // ============================================================\n        const inputRef = ref(null);\n        const presetName = ref('');\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const canSave = computed(() => presetName.value.trim().length > 0);\n        /**  */\n        const isDuplicate = computed(() => {\n            const name = presetName.value.trim();\n            if (!name)\n                return false;\n            return props.checkDuplicate?.(name) ?? false;\n        });\n        // ============================================================\n        // \n        // ============================================================\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                presetName.value = props.initialName || '';\n                // \n                nextTick(() => {\n                    inputRef.value?.focus();\n                });\n            }\n        }, { immediate: true });\n        // ============================================================\n        // \n        // ============================================================\n        function handleClose() {\n            emit('update:visible', false);\n        }\n        function handleSave() {\n            const name = presetName.value.trim();\n            if (!name)\n                return;\n            emit('save', name);\n            emit('update:visible', false);\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    ref_key: \"inputRef\",\n                                    ref: inputRef,\n                                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((presetName).value = $event)),\n                                    type: \"text\",\n                                    class: \"acu-settings-input\",\n                                    placeholder: \"\",\n                                    onKeyup: _withKeys(handleSave, [\"enter\"])\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [_vModelText, presetName.value]\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (isDuplicate.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[2] || (_cache[2] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-exclamation-circle\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            (__props.summaryItems.length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                                    _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"acu-preset-summary-title\" }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"ul\", _hoisted_7, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.summaryItems, (item, index) => {\n                                            return (_openBlock(), _createElementBlock(\"li\", { key: index }, _toDisplayString(item), 1 /* TEXT */));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_8, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn secondary\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn primary\",\n                                disabled: !canSave.value,\n                                onClick: _withModifiers(handleSave, [\"stop\"])\n                            }, _toDisplayString(isDuplicate.value ? '' : ''), 9 /* TEXT, PROPS */, _hoisted_9)\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./PresetSaveDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PresetSaveDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PresetSaveDialog.vue?vue&type=style&index=0&id=619b7a49&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-619b7a49\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createVNode as _createVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"acu-purge-content\" };\nconst _hoisted_2 = { class: \"acu-purge-inputs\" };\nconst _hoisted_3 = { class: \"acu-purge-btns\" };\nconst _hoisted_4 = { class: \"acu-purge-btns-right\" };\nconst _hoisted_5 = [\"disabled\"];\nimport { onClickOutside } from '@vueuse/core';\nimport { computed, ref, watch } from 'vue';\nimport { toast } from '../../../composables/useToast';\nimport AdvancedPurgeDialog from './AdvancedPurgeDialog.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PurgeRangeDialog',\n    props: {\n        visible: { type: Boolean },\n        maxFloor: { default: 999 }\n    },\n    emits: [\"update:visible\", \"confirm\", \"advanced-confirm\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const dialogRef = ref();\n        const startInputRef = ref();\n        const endInputRef = ref();\n        const startFloor = ref(null);\n        const endFloor = ref(null);\n        const hasInputError = ref(false);\n        const showAdvancedDialog = ref(false);\n        /**\n         *  ()\n         * \n         */\n        function getDefaultFloorRange() {\n            let ST = window.SillyTavern || (window.parent ? window.parent.SillyTavern : null);\n            if (!ST && window.top && window.top.SillyTavern) {\n                ST = window.top.SillyTavern;\n            }\n            let targetIdx = -1;\n            let lastIdx = 0;\n            if (ST && ST.chat) {\n                lastIdx = Math.max(0, ST.chat.length - 1);\n                // : \n                for (let i = ST.chat.length - 1; i >= 0; i--) {\n                    const msg = ST.chat[i];\n                    if (!msg.is_user && msg.TavernDB_ACU_IsolatedData) {\n                        // \n                        const tags = Object.keys(msg.TavernDB_ACU_IsolatedData);\n                        let hasRealData = false;\n                        for (const tag of tags) {\n                            const tagData = msg.TavernDB_ACU_IsolatedData[tag];\n                            if (tagData && tagData.independentData && Object.keys(tagData.independentData).length > 0) {\n                                hasRealData = true;\n                                break;\n                            }\n                        }\n                        if (hasRealData) {\n                            targetIdx = i;\n                            break;\n                        }\n                    }\n                }\n            }\n            // \n            const defaultStart = targetIdx !== -1 ? targetIdx : lastIdx;\n            const defaultEnd = targetIdx !== -1 ? targetIdx : lastIdx;\n            return { start: defaultStart, end: defaultEnd };\n        }\n        // \n        const canConfirm = computed(() => {\n            if (startFloor.value === null || endFloor.value === null)\n                return false;\n            if (isNaN(startFloor.value) || isNaN(endFloor.value))\n                return false;\n            if (startFloor.value < 0 || endFloor.value < 0)\n                return false;\n            if (startFloor.value > endFloor.value)\n                return false;\n            return true;\n        });\n        //  - \n        watch(() => props.visible, visible => {\n            if (visible) {\n                // \n                const defaultRange = getDefaultFloorRange();\n                startFloor.value = defaultRange.start;\n                endFloor.value = defaultRange.end;\n                hasInputError.value = false;\n                // \n            }\n        });\n        // \n        onClickOutside(dialogRef, () => {\n            handleCancel();\n        });\n        // \n        const focusEndInput = () => {\n            endInputRef.value?.focus();\n        };\n        // \n        const handleConfirm = () => {\n            if (canConfirm.value && startFloor.value !== null && endFloor.value !== null) {\n                emit('confirm', startFloor.value, endFloor.value);\n                emit('update:visible', false);\n            }\n            else {\n                // \n                hasInputError.value = true;\n                setTimeout(() => {\n                    hasInputError.value = false;\n                }, 500);\n                toast.warning(' (Start <= End)');\n            }\n        };\n        // \n        const handleCancel = () => {\n            emit('update:visible', false);\n        };\n        // \n        const handleOpenAdvanced = () => {\n            showAdvancedDialog.value = true;\n        };\n        // \n        const handleAdvancedConfirm = (result) => {\n            //  App.vue \n            emit('advanced-confirm', result);\n            // \n            emit('update:visible', false);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                (__props.visible)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"acu-modal-container acu-purge-overlay\",\n                        onClick: _withModifiers(handleCancel, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", {\n                            ref_key: \"dialogRef\",\n                            ref: dialogRef,\n                            class: \"acu-modal acu-purge-range-modal\"\n                        }, [\n                            _createCommentVNode(\"  \"),\n                            _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"acu-purge-title\" }, \"\", -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createCommentVNode(\"  \"),\n                                _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"acu-purge-icon\" }, [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-eraser\" })\n                                ], -1 /* CACHED */)),\n                                _createCommentVNode(\"  \"),\n                                _cache[5] || (_cache[5] = _createElementVNode(\"p\", { class: \"acu-purge-hint\" }, [\n                                    _createTextVNode(\" \"),\n                                    _createElementVNode(\"br\"),\n                                    _createElementVNode(\"span\", { class: \"acu-purge-hint-sub\" }, \"( - )\")\n                                ], -1 /* CACHED */)),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_2, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        ref_key: \"startInputRef\",\n                                        ref: startInputRef,\n                                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((startFloor).value = $event)),\n                                        type: \"number\",\n                                        class: \"acu-purge-input\",\n                                        placeholder: \"Start\",\n                                        min: \"0\",\n                                        onKeydown: _withKeys(focusEndInput, [\"enter\"])\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            startFloor.value,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ]),\n                                    _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"acu-purge-separator\" }, \"-\", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        ref_key: \"endInputRef\",\n                                        ref: endInputRef,\n                                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((endFloor).value = $event)),\n                                        type: \"number\",\n                                        class: \"acu-purge-input\",\n                                        placeholder: \"End\",\n                                        min: \"0\",\n                                        onKeydown: _withKeys(handleConfirm, [\"enter\"])\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            endFloor.value,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-purge-btn acu-purge-btn-advanced\",\n                                    onClick: handleOpenAdvanced\n                                }, [...(_cache[6] || (_cache[6] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-cogs\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"div\", _hoisted_4, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-purge-btn acu-purge-btn-cancel\",\n                                        onClick: handleCancel\n                                    }, \"\"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-purge-btn acu-purge-btn-confirm\",\n                                        disabled: !canConfirm.value,\n                                        onClick: handleConfirm\n                                    }, \"  \", 8 /* PROPS */, _hoisted_5)\n                                ])\n                            ])\n                        ], 512 /* NEED_PATCH */)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createVNode(AdvancedPurgeDialog, {\n                    visible: showAdvancedDialog.value,\n                    \"onUpdate:visible\": _cache[2] || (_cache[2] = ($event) => ((showAdvancedDialog).value = $event)),\n                    \"initial-start-floor\": startFloor.value ?? undefined,\n                    \"initial-end-floor\": endFloor.value ?? undefined,\n                    onConfirm: handleAdvancedConfirm\n                }, null, 8 /* PROPS */, [\"visible\", \"initial-start-floor\", \"initial-end-floor\"])\n            ], 64 /* STABLE_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./PurgeRangeDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PurgeRangeDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/**\n * ACU Visualizer \n *\n * \n * 1.  - \n * 2.  - \n * 3.  - \n *\n * \n * - /\n * - \n * - bug \n */\nexport const VERSION = '8.3.6';\n\n/**\n * GitHub Release \n *\n *  CDN URL\n *\n *  release \n * v0.0.x GitHub release tag \n */\nexport const RELEASE_VERSION = 'v0.0.62';\n\n/**\n *  CDN URL \n * @param path  'dist//index.js'\n * @returns CDN URL \n */\nexport function getCdnUrls(path: string): string[] {\n  const repo = 'Zaria773/ACU_visualization';\n  return [\n    `https://cdn.jsdelivr.net/gh/${repo}@${RELEASE_VERSION}/${path}`,\n    `https://fastly.jsdelivr.net/gh/${repo}@${RELEASE_VERSION}/${path}`,\n    `https://gcore.jsdelivr.net/gh/${repo}@${RELEASE_VERSION}/${path}`,\n  ];\n}\n\n/**\n * \n * \n */\nexport const STORAGE_VERSION = VERSION.split('.')[0]; // '8'\n\n/**\n * \n * @param key \n * @returns \n */\nexport function getVersionedKey(key: string): string {\n  return `acu_v${STORAGE_VERSION}_${key}`;\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, Fragment as _Fragment, normalizeStyle as _normalizeStyle, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, vModelText as _vModelText, vModelRadio as _vModelRadio, withKeys as _withKeys } from \"vue\";\nconst _hoisted_1 = { class: \"acu-ball-appearance-panel\" };\nconst _hoisted_2 = { class: \"acu-ball-preview-fixed\" };\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n    key: 3,\n    class: \"fa-solid fa-image\"\n};\nconst _hoisted_5 = { class: \"acu-ball-scroll-content\" };\nconst _hoisted_6 = { class: \"acu-settings-section\" };\nconst _hoisted_7 = { class: \"acu-settings-title-row\" };\nconst _hoisted_8 = { class: \"acu-preview-buttons\" };\nconst _hoisted_9 = { class: \"acu-settings-control\" };\nconst _hoisted_10 = { class: \"acu-switch\" };\nconst _hoisted_11 = { class: \"acu-settings-section\" };\nconst _hoisted_12 = { class: \"acu-settings-group\" };\nconst _hoisted_13 = { class: \"acu-settings-row\" };\nconst _hoisted_14 = { class: \"acu-settings-control acu-color-picker-inline\" };\nconst _hoisted_15 = { class: \"acu-settings-row\" };\nconst _hoisted_16 = { class: \"acu-settings-label\" };\nconst _hoisted_17 = { class: \"hint\" };\nconst _hoisted_18 = { class: \"acu-settings-control\" };\nconst _hoisted_19 = { class: \"acu-settings-section\" };\nconst _hoisted_20 = { class: \"acu-settings-group\" };\nconst _hoisted_21 = { class: \"acu-settings-row\" };\nconst _hoisted_22 = { class: \"acu-settings-control acu-color-picker-inline\" };\nconst _hoisted_23 = { class: \"acu-settings-row\" };\nconst _hoisted_24 = { class: \"acu-settings-label\" };\nconst _hoisted_25 = { class: \"hint\" };\nconst _hoisted_26 = { class: \"acu-settings-control\" };\nconst _hoisted_27 = { class: \"acu-settings-section\" };\nconst _hoisted_28 = { class: \"acu-settings-group\" };\nconst _hoisted_29 = { class: \"acu-settings-row\" };\nconst _hoisted_30 = { class: \"acu-settings-label\" };\nconst _hoisted_31 = { class: \"hint\" };\nconst _hoisted_32 = { class: \"acu-settings-control\" };\nconst _hoisted_33 = { class: \"acu-settings-section\" };\nconst _hoisted_34 = { class: \"acu-icon-type-row\" };\nconst _hoisted_35 = {\n    key: 0,\n    class: \"acu-icon-input-area\"\n};\nconst _hoisted_36 = { class: \"acu-icon-input\" };\nconst _hoisted_37 = {\n    key: 1,\n    class: \"acu-icon-input-area\"\n};\nconst _hoisted_38 = { class: \"acu-emoji-input\" };\nconst _hoisted_39 = { class: \"acu-icon-input-area\" };\nconst _hoisted_40 = { class: \"acu-icon-input\" };\nconst _hoisted_41 = {\n    key: 0,\n    class: \"acu-image-preview-row\",\n    style: { \"margin-top\": \"10px\" }\n};\nconst _hoisted_42 = { class: \"acu-image-actions\" };\nconst _hoisted_43 = { class: \"acu-icon-input-area\" };\nconst _hoisted_44 = { class: \"acu-image-preview-row\" };\nconst _hoisted_45 = { class: \"acu-image-actions\" };\nimport { computed, reactive, ref, watch } from 'vue';\nimport { DEFAULT_BALL_APPEARANCE, useBallAppearanceStore, useUIStore } from '../../stores';\nimport { compressImage, fileToBase64, hexToRgba } from '../../utils';\n// ============================================================\n// Store\n// ============================================================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'BallAppearancePanel',\n    setup(__props) {\n        const ballStore = useBallAppearanceStore();\n        const uiStore = useUIStore();\n        // ============================================================\n        // \n        // ============================================================\n        const localAppearance = reactive({ ...ballStore.appearance });\n        /**  */\n        const isPreviewAnimating = ref(false);\n        const isPreviewNotify = ref(false);\n        /**  input ref */\n        const imageInputRef = ref();\n        /**  ( / URL) */\n        const imageSourceType = ref('local');\n        /** URL  */\n        const imageUrlInput = ref('');\n        /**  URL  */\n        const isUrlImage = computed(() => {\n            return localAppearance.type === 'image' && imageSourceType.value === 'url';\n        });\n        //  URL\n        if (localAppearance.type === 'image' && localAppearance.content?.startsWith('http')) {\n            imageSourceType.value = 'url';\n            imageUrlInput.value = localAppearance.content;\n        }\n        // ============================================================\n        //  Store\n        // ============================================================\n        watch(localAppearance, newVal => {\n            ballStore.updateAppearance(newVal);\n        }, { deep: true });\n        // ============================================================\n        // \n        // ============================================================\n        const previewClasses = computed(() => ({\n            'p-anim-ripple': isPreviewAnimating.value && localAppearance.notifyAnimation === 'ripple',\n            'p-anim-arc': isPreviewAnimating.value && localAppearance.notifyAnimation === 'arc',\n            'p-notify': isPreviewNotify.value,\n        }));\n        const previewStyle = computed(() => ({\n            '--ball-size': `${localAppearance.size}px`,\n            '--ball-border-color': localAppearance.borderColor,\n            '--ball-border-color-rgba': hexToRgba(localAppearance.borderColor, localAppearance.borderOpacity),\n            '--ball-bg-color': hexToRgba(localAppearance.bgColor, localAppearance.bgOpacity),\n        }));\n        /**  */\n        const imagePreviewStyle = computed(() => {\n            if (!localAppearance.content)\n                return {};\n            return {\n                backgroundImage: `url('${localAppearance.content}')`,\n                backgroundPosition: `${localAppearance.imageOffsetX ?? 50}% ${localAppearance.imageOffsetY ?? 50}%`,\n                backgroundSize: `${localAppearance.imageScale ?? 150}%`,\n                backgroundRepeat: 'no-repeat',\n            };\n        });\n        // ============================================================\n        // \n        // ============================================================\n        function playPreviewAnim() {\n            isPreviewAnimating.value = true;\n            isPreviewNotify.value = false;\n            setTimeout(() => {\n                isPreviewAnimating.value = false;\n            }, 3000);\n        }\n        function playNotifyEffect() {\n            isPreviewNotify.value = true;\n            isPreviewAnimating.value = false;\n            setTimeout(() => {\n                isPreviewNotify.value = false;\n            }, 3000);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  -  */\n        function handleImageBtnClick() {\n            localAppearance.type = 'image';\n            imageSourceType.value = 'local';\n            imageInputRef.value?.click();\n        }\n        /**  URL  */\n        function handleUrlModeSelect() {\n            localAppearance.type = 'image';\n            imageSourceType.value = 'url';\n            //  URL\n            if (localAppearance.content && !localAppearance.content.startsWith('http')) {\n                localAppearance.content = '';\n            }\n            //  URL \n            if (localAppearance.content?.startsWith('http')) {\n                imageUrlInput.value = localAppearance.content;\n            }\n        }\n        /**  URL */\n        function applyImageUrl() {\n            const url = imageUrlInput.value.trim();\n            if (url && url.startsWith('http')) {\n                localAppearance.content = url;\n                // \n                localAppearance.imageOffsetX = 50;\n                localAppearance.imageOffsetY = 50;\n                localAppearance.imageScale = 150;\n            }\n        }\n        async function handleImageUpload(event) {\n            const input = event.target;\n            const file = input.files?.[0];\n            if (!file)\n                return;\n            try {\n                let base64 = await fileToBase64(file);\n                //  100x100 \n                base64 = await compressImage(base64, 100, 0.8);\n                localAppearance.content = base64;\n                // \n                localAppearance.imageOffsetX = 50;\n                localAppearance.imageOffsetY = 50;\n                localAppearance.imageScale = 150;\n                // \n                openCropDialog();\n            }\n            catch (e) {\n                console.error('[ACU] :', e);\n            }\n            //  input\n            input.value = '';\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function openCropDialog() {\n            if (localAppearance.content) {\n                uiStore.openAvatarCropDialog({\n                    imageUrl: localAppearance.content,\n                    name: '',\n                    initialOffsetX: localAppearance.imageOffsetX ?? 50,\n                    initialOffsetY: localAppearance.imageOffsetY ?? 50,\n                    initialScale: localAppearance.imageScale ?? 150,\n                    initialInvert: localAppearance.imageInvert ?? false,\n                    showInvertOption: true, // \n                }, {\n                    onApply: (data) => {\n                        localAppearance.imageOffsetX = data.offsetX;\n                        localAppearance.imageOffsetY = data.offsetY;\n                        localAppearance.imageScale = data.scale;\n                        if (data.invert !== undefined) {\n                            localAppearance.imageInvert = data.invert;\n                        }\n                    },\n                    onUpload: async (file) => {\n                        try {\n                            let base64 = await fileToBase64(file);\n                            base64 = await compressImage(base64, 100, 0.8);\n                            localAppearance.content = base64;\n                            // \n                            localAppearance.imageOffsetX = 50;\n                            localAppearance.imageOffsetY = 50;\n                            localAppearance.imageScale = 150;\n                        }\n                        catch (e) {\n                            console.error('[ACU] :', e);\n                        }\n                    },\n                });\n            }\n        }\n        /**  */\n        function clearImage() {\n            localAppearance.content = '';\n            localAppearance.imageOffsetX = 50;\n            localAppearance.imageOffsetY = 50;\n            localAppearance.imageScale = 150;\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function resetToDefault() {\n            Object.assign(localAppearance, DEFAULT_BALL_APPEARANCE);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  -  position: absolute \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"button\", {\n                        class: \"acu-icon-btn acu-reset-btn\",\n                        title: \"\",\n                        onClick: _withModifiers(resetToDefault, [\"stop\"])\n                    }, [...(_cache[16] || (_cache[16] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"acu-ball-preview\", previewClasses.value]),\n                        style: _normalizeStyle(previewStyle.value)\n                    }, [\n                        (localAppearance.type === 'icon')\n                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                key: 0,\n                                class: _normalizeClass(['fa-solid', localAppearance.content])\n                            }, null, 2 /* CLASS */))\n                            : (localAppearance.type === 'emoji')\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createTextVNode(_toDisplayString(localAppearance.content), 1 /* TEXT */)\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (localAppearance.type === 'image' && localAppearance.content)\n                                    ? (_openBlock(), _createElementBlock(\"img\", {\n                                        key: 2,\n                                        src: localAppearance.content,\n                                        alt: \"\"\n                                    }, null, 8 /* PROPS */, _hoisted_3))\n                                    : (_openBlock(), _createElementBlock(\"i\", _hoisted_4))\n                    ], 6 /* CLASS, STYLE */)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createCommentVNode(\"  -  \"),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            _cache[18] || (_cache[18] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-bell\" }),\n                                _createTextVNode(\" AI  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-tool-btn\",\n                                    onClick: _withModifiers(playPreviewAnim, [\"stop\"])\n                                }, \" \"),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-tool-btn\",\n                                    onClick: _withModifiers(playNotifyEffect, [\"stop\"])\n                                }, \" \")\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_9, [\n                                _createElementVNode(\"label\", _hoisted_10, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localAppearance.enableNotifyAnimation) = $event)),\n                                        type: \"checkbox\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, localAppearance.enableNotifyAnimation]\n                                    ]),\n                                    _cache[17] || (_cache[17] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                ])\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"acu-anim-grid\", { disabled: !localAppearance.enableNotifyAnimation }])\n                        }, [\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-anim-option\", { active: localAppearance.notifyAnimation === 'ripple' }]),\n                                onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (localAppearance.notifyAnimation = 'ripple'), [\"stop\"]))\n                            }, [...(_cache[19] || (_cache[19] = [\n                                    _createElementVNode(\"span\", { class: \"acu-anim-icon\" }, \"\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"acu-anim-name\" }, \"\", -1 /* CACHED */)\n                                ]))], 2 /* CLASS */),\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-anim-option\", { active: localAppearance.notifyAnimation === 'arc' }]),\n                                onClick: _cache[2] || (_cache[2] = _withModifiers(($event) => (localAppearance.notifyAnimation = 'arc'), [\"stop\"]))\n                            }, [...(_cache[20] || (_cache[20] = [\n                                    _createElementVNode(\"span\", { class: \"acu-anim-icon\" }, \"\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"acu-anim-name\" }, \"\", -1 /* CACHED */)\n                                ]))], 2 /* CLASS */)\n                        ], 2 /* CLASS */)\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_11, [\n                        _cache[23] || (_cache[23] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-palette\" }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_12, [\n                            _createElementVNode(\"div\", _hoisted_13, [\n                                _cache[21] || (_cache[21] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_14, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((localAppearance.borderColor) = $event)),\n                                        type: \"text\",\n                                        class: \"acu-color-input\",\n                                        placeholder: \"#RRGGBB\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, localAppearance.borderColor]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((localAppearance.borderColor) = $event)),\n                                        type: \"color\",\n                                        class: \"acu-color-swatch acu-dashed\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, localAppearance.borderColor]\n                                    ])\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_15, [\n                                _createElementVNode(\"div\", _hoisted_16, [\n                                    _cache[22] || (_cache[22] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_17, _toDisplayString(localAppearance.borderOpacity) + \"%\", 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_18, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((localAppearance.borderOpacity) = $event)),\n                                        type: \"range\",\n                                        min: \"0\",\n                                        max: \"100\",\n                                        step: \"5\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            localAppearance.borderOpacity,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_19, [\n                        _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-fill-drip\" }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_20, [\n                            _createElementVNode(\"div\", _hoisted_21, [\n                                _cache[24] || (_cache[24] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_22, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((localAppearance.bgColor) = $event)),\n                                        type: \"text\",\n                                        class: \"acu-color-input\",\n                                        placeholder: \"#RRGGBB\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, localAppearance.bgColor]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((localAppearance.bgColor) = $event)),\n                                        type: \"color\",\n                                        class: \"acu-color-swatch\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, localAppearance.bgColor]\n                                    ])\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_23, [\n                                _createElementVNode(\"div\", _hoisted_24, [\n                                    _cache[25] || (_cache[25] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_25, _toDisplayString(localAppearance.bgOpacity) + \"%\", 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_26, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((localAppearance.bgOpacity) = $event)),\n                                        type: \"range\",\n                                        min: \"0\",\n                                        max: \"100\",\n                                        step: \"5\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            localAppearance.bgOpacity,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_27, [\n                        _cache[28] || (_cache[28] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-expand-arrows-alt\" }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_28, [\n                            _createElementVNode(\"div\", _hoisted_29, [\n                                _createElementVNode(\"div\", _hoisted_30, [\n                                    _cache[27] || (_cache[27] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_31, _toDisplayString(localAppearance.size) + \"px\", 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_32, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((localAppearance.size) = $event)),\n                                        type: \"range\",\n                                        min: \"40\",\n                                        max: \"100\",\n                                        step: \"2\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            localAppearance.size,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_33, [\n                        _cache[45] || (_cache[45] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-icons\" }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createCommentVNode(\"  -  \"),\n                        _createElementVNode(\"div\", _hoisted_34, [\n                            _createElementVNode(\"label\", {\n                                class: _normalizeClass([\"acu-type-btn\", { active: localAppearance.type === 'icon' }])\n                            }, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event) => ((localAppearance.type) = $event)),\n                                    type: \"radio\",\n                                    value: \"icon\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelRadio, localAppearance.type]\n                                ]),\n                                _cache[29] || (_cache[29] = _createElementVNode(\"i\", { class: \"fa-solid fa-icons\" }, null, -1 /* CACHED */)),\n                                _cache[30] || (_cache[30] = _createElementVNode(\"span\", null, \"FA\", -1 /* CACHED */))\n                            ], 2 /* CLASS */),\n                            _createElementVNode(\"label\", {\n                                class: _normalizeClass([\"acu-type-btn\", { active: localAppearance.type === 'emoji' }])\n                            }, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((localAppearance.type) = $event)),\n                                    type: \"radio\",\n                                    value: \"emoji\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelRadio, localAppearance.type]\n                                ]),\n                                _cache[31] || (_cache[31] = _createElementVNode(\"span\", { class: \"emoji-icon\" }, \"\", -1 /* CACHED */)),\n                                _cache[32] || (_cache[32] = _createElementVNode(\"span\", null, \"Emoji\", -1 /* CACHED */))\n                            ], 2 /* CLASS */),\n                            _createCommentVNode(\"  -  \"),\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-type-btn\", { active: localAppearance.type === 'image' && !isUrlImage.value }]),\n                                onClick: _withModifiers(handleImageBtnClick, [\"stop\"])\n                            }, [\n                                _createElementVNode(\"input\", {\n                                    ref_key: \"imageInputRef\",\n                                    ref: imageInputRef,\n                                    type: \"file\",\n                                    accept: \"image/*\",\n                                    hidden: \"\",\n                                    onChange: handleImageUpload\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */),\n                                _cache[33] || (_cache[33] = _createElementVNode(\"i\", { class: \"fa-solid fa-image\" }, null, -1 /* CACHED */)),\n                                _cache[34] || (_cache[34] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                            ], 2 /* CLASS */),\n                            _createCommentVNode(\" URL  \"),\n                            _createElementVNode(\"label\", {\n                                class: _normalizeClass([\"acu-type-btn\", { active: localAppearance.type === 'image' && isUrlImage.value }])\n                            }, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((imageSourceType).value = $event)),\n                                    type: \"radio\",\n                                    value: \"url\",\n                                    onChange: handleUrlModeSelect\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [_vModelRadio, imageSourceType.value]\n                                ]),\n                                _cache[35] || (_cache[35] = _createElementVNode(\"i\", { class: \"fa-solid fa-link\" }, null, -1 /* CACHED */)),\n                                _cache[36] || (_cache[36] = _createElementVNode(\"span\", null, \"URL\", -1 /* CACHED */))\n                            ], 2 /* CLASS */)\n                        ]),\n                        _createCommentVNode(\" /Emoji \"),\n                        (localAppearance.type === 'icon')\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_35, [\n                                _createElementVNode(\"div\", _hoisted_36, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event) => ((localAppearance.content) = $event)),\n                                        placeholder: \"fa-layer-group\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, localAppearance.content]\n                                    ]),\n                                    _cache[37] || (_cache[37] = _createElementVNode(\"span\", { class: \"acu-input-hint\" }, \" FontAwesome \", -1 /* CACHED */))\n                                ])\n                            ]))\n                            : (localAppearance.type === 'emoji')\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_37, [\n                                    _createElementVNode(\"div\", _hoisted_38, [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event) => ((localAppearance.content) = $event)),\n                                            placeholder: \"\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelText, localAppearance.content]\n                                        ]),\n                                        _cache[38] || (_cache[38] = _createElementVNode(\"span\", { class: \"acu-input-hint\" }, \" Emoji \", -1 /* CACHED */))\n                                    ])\n                                ]))\n                                : (localAppearance.type === 'image' && isUrlImage.value)\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                        _createCommentVNode(\" URL  URL  \"),\n                                        _createElementVNode(\"div\", _hoisted_39, [\n                                            _createElementVNode(\"div\", _hoisted_40, [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event) => ((imageUrlInput).value = $event)),\n                                                    placeholder: \"https://example.com/image.png\",\n                                                    onBlur: applyImageUrl,\n                                                    onKeyup: _withKeys(applyImageUrl, [\"enter\"])\n                                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                    [_vModelText, imageUrlInput.value]\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            (localAppearance.content && localAppearance.content.startsWith('http'))\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"acu-preview-thumb-wrapper\",\n                                                        style: _normalizeStyle(imagePreviewStyle.value),\n                                                        onClick: _withModifiers(openCropDialog, [\"stop\"])\n                                                    }, [...(_cache[39] || (_cache[39] = [\n                                                            _createElementVNode(\"span\", { class: \"acu-edit-hint\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-crop-simple\" })\n                                                            ], -1 /* CACHED */)\n                                                        ]))], 4 /* STYLE */),\n                                                    _createElementVNode(\"div\", _hoisted_42, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-adjust-btn\",\n                                                            onClick: _withModifiers(openCropDialog, [\"stop\"])\n                                                        }, [...(_cache[40] || (_cache[40] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-crop-simple\" }, null, -1 /* CACHED */),\n                                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                                            ]))]),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-adjust-btn\",\n                                                            style: { \"margin-left\": \"8px\" },\n                                                            onClick: _withModifiers(clearImage, [\"stop\"])\n                                                        }, [...(_cache[41] || (_cache[41] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */),\n                                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                                            ]))])\n                                                    ])\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ])\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    : (localAppearance.type === 'image' && localAppearance.content)\n                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_43, [\n                                                _createElementVNode(\"div\", _hoisted_44, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"acu-preview-thumb-wrapper\",\n                                                        style: _normalizeStyle(imagePreviewStyle.value),\n                                                        onClick: _withModifiers(openCropDialog, [\"stop\"])\n                                                    }, [...(_cache[42] || (_cache[42] = [\n                                                            _createElementVNode(\"span\", { class: \"acu-edit-hint\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-crop-simple\" })\n                                                            ], -1 /* CACHED */)\n                                                        ]))], 4 /* STYLE */),\n                                                    _createElementVNode(\"div\", _hoisted_45, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-adjust-btn\",\n                                                            onClick: _withModifiers(openCropDialog, [\"stop\"])\n                                                        }, [...(_cache[43] || (_cache[43] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-crop-simple\" }, null, -1 /* CACHED */),\n                                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                                            ]))]),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-adjust-btn\",\n                                                            style: { \"margin-left\": \"8px\" },\n                                                            onClick: _withModifiers(clearImage, [\"stop\"])\n                                                        }, [...(_cache[44] || (_cache[44] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */),\n                                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                                            ]))])\n                                                    ])\n                                                ])\n                                            ])\n                                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./BallAppearancePanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./BallAppearancePanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, withModifiers as _withModifiers, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-button-config-panel\" };\nconst _hoisted_2 = { class: \"acu-settings-row\" };\nconst _hoisted_3 = { class: \"acu-settings-control\" };\nconst _hoisted_4 = { class: \"acu-config-section acu-visible-area\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"acu-btn-visible-grid\"\n};\nconst _hoisted_6 = [\"title\", \"onClick\", \"onDragstart\", \"onDragover\", \"onDrop\"];\nconst _hoisted_7 = {\n    key: 0,\n    class: \"required-dot\"\n};\nconst _hoisted_8 = [\"title\", \"onClick\"];\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_11 = { class: \"acu-config-section acu-hidden-area\" };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"acu-btn-hidden-grid\"\n};\nconst _hoisted_13 = [\"title\", \"onClick\"];\nconst _hoisted_14 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_15 = { class: \"picker-header\" };\nconst _hoisted_16 = { class: \"picker-content\" };\nconst _hoisted_17 = { class: \"picker-hint\" };\nconst _hoisted_18 = { class: \"picker-options\" };\nconst _hoisted_19 = [\"onClick\"];\nimport { computed, ref } from 'vue';\nimport { NAV_BUTTONS, useConfigStore } from '../../stores/useConfigStore';\n/**\n * \n */\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'NavButtonConfigPanel',\n    setup(__props) {\n        /**\n         * NavButtonConfigPanel - \n         *\n         * :\n         * - \n         * -  UI\n         * - \n         * - \n         * - \n         *\n         * :\n         * - \"\"\n         */\n        const configStore = useConfigStore();\n        /**  */\n        const getButtonIcon = (btnId) => {\n            const btn = NAV_BUTTONS.find(b => b.id === btnId);\n            return btn?.icon || 'fa-circle';\n        };\n        /**\n         * \n         */\n        const getButtonLabel = (btnId) => {\n            const btn = NAV_BUTTONS.find(b => b.id === btnId);\n            return btn?.label || btnId;\n        };\n        /**\n         * \n         */\n        const visibleButtonCards = computed(() => {\n            const order = configStore.buttonsConfig.buttonOrder;\n            const visible = configStore.buttonsConfig.visibleButtons;\n            const groups = configStore.buttonsConfig.buttonGroups || [];\n            // \n            const sortedVisible = order.filter((id) => visible.includes(id));\n            return sortedVisible.map((id) => {\n                const btn = NAV_BUTTONS.find(b => b.id === id);\n                const group = groups.find((g) => g.primaryId === id);\n                return {\n                    id,\n                    icon: btn?.icon || 'fa-circle',\n                    label: btn?.label || id,\n                    secondaryId: group?.secondaryId || null,\n                };\n            });\n        });\n        /**\n         * \n         * - \n         * - \n         */\n        const hiddenButtons = computed(() => {\n            const visible = configStore.buttonsConfig.visibleButtons;\n            const groups = configStore.buttonsConfig.buttonGroups || [];\n            const usedSecondaries = groups.map((g) => g.secondaryId).filter(Boolean);\n            return NAV_BUTTONS.filter(btn => !btn.hidden && !visible.includes(btn.id) && !usedSecondaries.includes(btn.id));\n        });\n        /**\n         * \n         * - \n         * - \n         */\n        const availableSecondaryButtons = computed(() => {\n            const groups = configStore.buttonsConfig.buttonGroups || [];\n            const usedSecondaries = groups.map((g) => g.secondaryId).filter(Boolean);\n            return NAV_BUTTONS.filter(btn => {\n                // \n                if (btn.id === currentPickerTarget.value)\n                    return false;\n                // \n                if (usedSecondaries.includes(btn.id))\n                    return false;\n                return true;\n            });\n        });\n        // ============================================================\n        // \n        // ============================================================\n        const draggedIndex = ref(null);\n        const handleDragStart = (e, index) => {\n            draggedIndex.value = index;\n            if (e.dataTransfer) {\n                e.dataTransfer.effectAllowed = 'move';\n                e.dataTransfer.setData('text/plain', String(index));\n            }\n            e.target.classList.add('dragging');\n        };\n        const handleDragOver = (e, index) => {\n            e.preventDefault();\n            if (draggedIndex.value === null || draggedIndex.value === index)\n                return;\n            const items = document.querySelectorAll('.acu-button-card');\n            items.forEach(item => item.classList.remove('drop-target'));\n            e.currentTarget.classList.add('drop-target');\n        };\n        const handleDrop = (e, targetIndex) => {\n            e.preventDefault();\n            if (draggedIndex.value === null || draggedIndex.value === targetIndex)\n                return;\n            //  buttonOrder \n            const currentOrder = [...configStore.buttonsConfig.buttonOrder];\n            const visibleIds = configStore.buttonsConfig.visibleButtons;\n            //  order \n            const visibleInOrder = currentOrder.filter((id) => visibleIds.includes(id));\n            const [removed] = visibleInOrder.splice(draggedIndex.value, 1);\n            visibleInOrder.splice(targetIndex, 0, removed);\n            //  + \n            const hiddenInOrder = currentOrder.filter((id) => !visibleIds.includes(id));\n            configStore.setButtonOrder([...visibleInOrder, ...hiddenInOrder]);\n            // \n            const items = document.querySelectorAll('.acu-button-card');\n            items.forEach(item => item.classList.remove('drop-target'));\n            draggedIndex.value = null;\n        };\n        const handleDragEnd = (e) => {\n            e.target.classList.remove('dragging');\n            const items = document.querySelectorAll('.acu-button-card');\n            items.forEach(item => item.classList.remove('drop-target'));\n            draggedIndex.value = null;\n        };\n        // ============================================================\n        // /\n        // ============================================================\n        const handleShowButton = (btnId) => {\n            const currentVisible = [...configStore.buttonsConfig.visibleButtons];\n            const currentOrder = [...configStore.buttonsConfig.buttonOrder];\n            //  visibleButtons\n            if (!currentVisible.includes(btnId)) {\n                currentVisible.push(btnId);\n                configStore.setVisibleButtons(currentVisible);\n            }\n            //  buttonOrder \n            if (!currentOrder.includes(btnId)) {\n                //  settings \n                const settingsIndex = currentOrder.indexOf('settings');\n                if (settingsIndex >= 0) {\n                    currentOrder.splice(settingsIndex, 0, btnId);\n                }\n                else {\n                    currentOrder.push(btnId);\n                }\n                configStore.setButtonOrder(currentOrder);\n            }\n        };\n        const handleHideButton = (btnId) => {\n            if (btnId === 'settings')\n                return; // \n            const current = [...configStore.buttonsConfig.visibleButtons];\n            const index = current.indexOf(btnId);\n            if (index > -1) {\n                current.splice(index, 1);\n                configStore.setVisibleButtons(current);\n            }\n        };\n        // ============================================================\n        // \n        // ============================================================\n        const attachmentPickerVisible = ref(false);\n        const currentPickerTarget = ref('');\n        const openAttachmentPicker = (primaryId) => {\n            currentPickerTarget.value = primaryId;\n            attachmentPickerVisible.value = true;\n        };\n        const closeAttachmentPicker = () => {\n            attachmentPickerVisible.value = false;\n            currentPickerTarget.value = '';\n        };\n        const handleSelectSecondary = (secondaryId) => {\n            configStore.addButtonGroup(currentPickerTarget.value, secondaryId);\n            closeAttachmentPicker();\n        };\n        const handleRemoveSecondary = (primaryId) => {\n            configStore.removeButtonGroupSecondary(primaryId);\n        };\n        // ============================================================\n        // \n        // ============================================================\n        const handleReset = () => {\n            configStore.resetButtonConfig();\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  -  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                        _createTextVNode(\"  \"),\n                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"button\", {\n                            class: _normalizeClass([\"acu-switch\", { active: _unref(configStore).longPressDirectExec }]),\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (_unref(configStore).toggleLongPressDirectExec()), [\"stop\"]))\n                        }, null, 2 /* CLASS */)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createElementVNode(\"h4\", null, [\n                        _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-th-large\" }, null, -1 /* CACHED */)),\n                        _createTextVNode(\"  (\" + _toDisplayString(visibleButtonCards.value.length) + \") \", 1 /* TEXT */),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-btn-text acu-btn-reset\",\n                            onClick: _withModifiers(handleReset, [\"stop\"])\n                        }, [...(_cache[3] || (_cache[3] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" \", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    (visibleButtonCards.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(visibleButtonCards.value, (card, index) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: card.id,\n                                    class: _normalizeClass([\"acu-btn-config-item\", { 'is-required': card.id === 'settings' }]),\n                                    title: card.label + (card.id === 'settings' ? ' ()' : ' ()'),\n                                    draggable: \"true\",\n                                    onClick: _withModifiers(($event) => (handleHideButton(card.id)), [\"stop\"]),\n                                    onDragstart: ($event) => (handleDragStart($event, index)),\n                                    onDragover: _withModifiers(($event) => (handleDragOver($event, index)), [\"prevent\"]),\n                                    onDrop: ($event) => (handleDrop($event, index)),\n                                    onDragend: handleDragEnd\n                                }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass([['fas', card.icon], \"btn-icon\"])\n                                    }, null, 2 /* CLASS */),\n                                    _createCommentVNode(\"  \"),\n                                    (card.id === 'settings')\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_7))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\" / \"),\n                                    (card.secondaryId)\n                                        ? (_openBlock(), _createElementBlock(\"div\", {\n                                            key: 1,\n                                            class: \"attachment-indicator\",\n                                            title: ': ' + getButtonLabel(card.secondaryId) + ' ()',\n                                            onClick: _withModifiers(($event) => (handleRemoveSecondary(card.id)), [\"stop\"])\n                                        }, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(['fas', getButtonIcon(card.secondaryId)])\n                                            }, null, 2 /* CLASS */)\n                                        ], 8 /* PROPS */, _hoisted_8))\n                                        : (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 2,\n                                            class: \"attachment-add-btn\",\n                                            title: '',\n                                            onClick: _withModifiers(($event) => (openAttachmentPicker(card.id)), [\"stop\"])\n                                        }, [...(_cache[5] || (_cache[5] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                                            ]))], 8 /* PROPS */, _hoisted_9))\n                                ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_6));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [...(_cache[6] || (_cache[6] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-exclamation-triangle\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]))\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_11, [\n                    _createElementVNode(\"h4\", null, [\n                        _cache[7] || (_cache[7] = _createElementVNode(\"i\", { class: \"fas fa-eye-slash\" }, null, -1 /* CACHED */)),\n                        _createTextVNode(\"  (\" + _toDisplayString(hiddenButtons.value.length) + \") \", 1 /* TEXT */)\n                    ]),\n                    (hiddenButtons.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(hiddenButtons.value, (btn) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: btn.id,\n                                    class: \"acu-btn-hidden-item\",\n                                    title: btn.label + ' ()',\n                                    onClick: _withModifiers(($event) => (handleShowButton(btn.id)), [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(['fas', btn.icon])\n                                    }, null, 2 /* CLASS */)\n                                ], 8 /* PROPS */, _hoisted_13));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [...(_cache[8] || (_cache[8] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-check-circle\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]))\n                ]),\n                _createCommentVNode(\"  \"),\n                (attachmentPickerVisible.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"acu-attachment-picker-overlay\",\n                        onClick: _withModifiers(closeAttachmentPicker, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: \"acu-attachment-picker\",\n                            onClick: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_15, [\n                                _cache[10] || (_cache[10] = _createElementVNode(\"h4\", null, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    class: \"btn-close\",\n                                    onClick: _withModifiers(closeAttachmentPicker, [\"stop\"])\n                                }, [...(_cache[9] || (_cache[9] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_16, [\n                                _createElementVNode(\"p\", _hoisted_17, \" \\\"\" + _toDisplayString(getButtonLabel(currentPickerTarget.value)) + \"\\\" \", 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_18, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableSecondaryButtons.value, (btn) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: btn.id,\n                                            class: \"picker-option\",\n                                            onClick: _withModifiers(($event) => (handleSelectSecondary(btn.id)), [\"stop\"])\n                                        }, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(['fas', btn.icon])\n                                            }, null, 2 /* CLASS */),\n                                            _createElementVNode(\"span\", null, _toDisplayString(btn.label), 1 /* TEXT */)\n                                        ], 8 /* PROPS */, _hoisted_19));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ])\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"acu-config-hint acu-config-hint-fixed\" }, [\n                    _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }),\n                    _createElementVNode(\"span\", null, \"    +\")\n                ], -1 /* CACHED */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./NavButtonConfigPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NavButtonConfigPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./NavButtonConfigPanel.vue?vue&type=style&index=0&id=5e392364&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5e392364\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"acu-tab-config-panel\" };\nconst _hoisted_2 = { class: \"acu-config-section acu-visible-area\" };\nconst _hoisted_3 = [\"onClick\", \"onDragstart\", \"onDragover\", \"onDrop\"];\nconst _hoisted_4 = {\n    key: 1,\n    class: \"tab-type-badge-mini\"\n};\nconst _hoisted_5 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_6 = { class: \"acu-config-section acu-hidden-area\" };\nconst _hoisted_7 = {\n    key: 0,\n    class: \"acu-tab-hidden-list\"\n};\nconst _hoisted_8 = [\"title\", \"onClick\"];\nconst _hoisted_9 = { class: \"tab-name\" };\nconst _hoisted_10 = {\n    key: 1,\n    class: \"tab-type-badge\"\n};\nconst _hoisted_11 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nimport { computed, ref } from 'vue';\nimport { useConfigStore } from '../../stores/useConfigStore';\nimport { useDataStore } from '../../stores/useDataStore';\nimport { TAB_DASHBOARD, TAB_OPTIONS, TAB_RELATIONSHIP_GRAPH, useUIStore } from '../../stores/useUIStore';\nimport { isCharacterTable, processJsonData } from '../../utils';\n/**\n *  visibleTabs \n *  Tab  ID\n */\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TabConfigPanel',\n    setup(__props) {\n        /**\n         * TabConfigPanel - \n         *\n         * :\n         * - TabTab\n         * - \n         * - \n         * - \n         * - \n         *\n         * :\n         * - \"\"\n         *\n         *  sheetId  Tab ID App.vue  tabList \n         */\n        const configStore = useConfigStore();\n        /**\n         * \n         * - \"\"\n         * - (0)\n         * - \n         */\n        const gridStyle = computed(() => {\n            const cols = configStore.config.gridColumns;\n            if (cols === 0) {\n                //  90px\n                return { gridTemplateColumns: 'repeat(auto-fill, minmax(90px, 1fr))' };\n            }\n            // \n            return { gridTemplateColumns: `repeat(${cols}, 1fr)` };\n        });\n        const uiStore = useUIStore();\n        const dataStore = useDataStore();\n        /** Tab  */\n        function getVisibleKey(tab) {\n            if (tab.type === 'dashboard' || tab.type === 'graph' || tab.type === 'options') {\n                return tab.id; //  Tab  ID\n            }\n            return tab.name; // \n        }\n        /**\n         * \n         * visibleTabs  (name) sheetId\n         *  Tab ID\n         */\n        const allTabs = computed(() => {\n            const tabs = [];\n            // \n            if (configStore.config.showDashboard) {\n                tabs.push({\n                    id: TAB_DASHBOARD,\n                    name: '',\n                    icon: 'fas fa-home',\n                    type: 'dashboard',\n                });\n            }\n            //  stagedData  sheetId  ID App.vue \n            const staged = dataStore.stagedData;\n            if (staged) {\n                const processed = processJsonData(staged);\n                if (processed) {\n                    for (const [tableName, tableData] of Object.entries(processed)) {\n                        const sheetId = tableData.key; //  sheetId  ID\n                        const isOptions = tableName.includes('');\n                        tabs.push({\n                            id: sheetId,\n                            name: tableName,\n                            icon: isOptions ? 'fas fa-sliders-h' : undefined,\n                            type: isOptions ? 'special' : 'normal',\n                        });\n                    }\n                }\n            }\n            // \n            const hasCharacterTables = tabs.some(t => t.type === 'normal' && isCharacterTable(t.name, t.id));\n            if (hasCharacterTables) {\n                tabs.push({\n                    id: TAB_RELATIONSHIP_GRAPH,\n                    name: '',\n                    icon: 'fas fa-project-diagram',\n                    type: 'graph',\n                });\n            }\n            // \n            const hasOptionsTables = tabs.some(t => t.type === 'special');\n            if (hasOptionsTables) {\n                tabs.push({\n                    id: TAB_OPTIONS,\n                    name: '',\n                    icon: 'fas fa-sliders-h',\n                    type: 'options',\n                });\n            }\n            return tabs;\n        });\n        /**\n         *  Tab \n         * -  visibleTabs \n         * -  visibleTabs \n         */\n        const visibleTabItems = computed(() => {\n            const visibleKeys = uiStore.visibleTabs;\n            // \n            if (!visibleKeys || visibleKeys.length === 0) {\n                return [];\n            }\n            //  visibleTabs  getVisibleKey \n            return visibleKeys\n                .map(key => allTabs.value.find(tab => getVisibleKey(tab) === key))\n                .filter((tab) => tab !== undefined);\n        });\n        /**\n         *  Tab \n         * -  visibleTabs Tab\n         * -  visibleTabs  Tab\n         */\n        const hiddenTabItems = computed(() => {\n            const visibleKeys = uiStore.visibleTabs;\n            //  Tab\n            if (!visibleKeys || visibleKeys.length === 0) {\n                return allTabs.value;\n            }\n            //  visibleTabs  Tab getVisibleKey \n            return allTabs.value.filter(tab => !visibleKeys.includes(getVisibleKey(tab)));\n        });\n        /**\n         *  Tab\n         * - dashboard: \n         * - graph: \n         * - options: \n         * special\"\"\n         */\n        const isAggregateTab = (type) => {\n            return type === 'dashboard' || type === 'graph' || type === 'options';\n        };\n        /**\n         * \n         */\n        const getTypeBadge = (type) => {\n            switch (type) {\n                case 'dashboard':\n                    return '';\n                case 'graph':\n                    return '';\n                case 'options':\n                    return '';\n                default:\n                    return '';\n            }\n        };\n        // ============================================================\n        // \n        // ============================================================\n        const draggedIndex = ref(null);\n        const handleDragStart = (e, index) => {\n            draggedIndex.value = index;\n            if (e.dataTransfer) {\n                e.dataTransfer.effectAllowed = 'move';\n                e.dataTransfer.setData('text/plain', String(index));\n            }\n            //  dragging \n        };\n        const handleDragOver = (e, index) => {\n            e.preventDefault();\n            if (draggedIndex.value === null || draggedIndex.value === index)\n                return;\n            // \n        };\n        const handleDrop = (e, targetIndex) => {\n            e.preventDefault();\n            if (draggedIndex.value === null || draggedIndex.value === targetIndex)\n                return;\n            //  Tab  visibleKey\n            let currentOrder = [...uiStore.visibleTabs];\n            if (currentOrder.length === 0) {\n                currentOrder = allTabs.value.map(t => getVisibleKey(t));\n            }\n            // \n            const [removed] = currentOrder.splice(draggedIndex.value, 1);\n            currentOrder.splice(targetIndex, 0, removed);\n            uiStore.setVisibleTabs(currentOrder);\n            // \n            const items = document.querySelectorAll('.acu-tab-config-btn');\n            items.forEach(item => item.classList.remove('drop-target'));\n            draggedIndex.value = null;\n        };\n        const handleDragEnd = () => {\n            draggedIndex.value = null;\n        };\n        // ============================================================\n        // /\n        // ============================================================\n        /**\n         *  Tab \n         * @param tabId Tab  sheetId Tab\n         */\n        const handleShow = (tabId) => {\n            const tab = allTabs.value.find(t => t.id === tabId);\n            if (!tab)\n                return;\n            const visibleKey = getVisibleKey(tab);\n            const currentVisible = [...uiStore.visibleTabs];\n            if (!currentVisible.includes(visibleKey)) {\n                // \n                currentVisible.push(visibleKey);\n                uiStore.setVisibleTabs(currentVisible);\n            }\n        };\n        /**\n         *  Tab \n         * @param tabId Tab  sheetId Tab\n         */\n        const handleHide = (tabId) => {\n            const tab = allTabs.value.find(t => t.id === tabId);\n            if (!tab)\n                return;\n            const visibleKey = getVisibleKey(tab);\n            const currentVisible = [...uiStore.visibleTabs];\n            // \"\" Tab\n            if (currentVisible.length === 0) {\n                const allKeys = allTabs.value.map(t => getVisibleKey(t));\n                const filtered = allKeys.filter(key => key !== visibleKey);\n                //  Tab\n                if (filtered.length > 0) {\n                    uiStore.setVisibleTabs(filtered);\n                }\n                return;\n            }\n            const index = currentVisible.indexOf(visibleKey);\n            if (index > -1) {\n                //  Tab\n                if (currentVisible.length > 1) {\n                    currentVisible.splice(index, 1);\n                    uiStore.setVisibleTabs(currentVisible);\n                }\n            }\n        };\n        /**\n         * \n         * Tab\n         */\n        const handleReset = () => {\n            // Tab visibleKey\n            const allKeys = allTabs.value.map(t => getVisibleKey(t));\n            uiStore.setVisibleTabs(allKeys);\n        };\n        /**\n         * \n         * Tab\n         */\n        const handleClearAll = () => {\n            uiStore.setVisibleTabs([]);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  Tab \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"h4\", null, [\n                        _cache[1] || (_cache[1] = _createElementVNode(\"i\", { class: \"fas fa-eye\" }, null, -1 /* CACHED */)),\n                        _createTextVNode(\"  (\" + _toDisplayString(visibleTabItems.value.length) + \") \", 1 /* TEXT */),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-btn-text acu-btn-reset\",\n                            onClick: _withModifiers(handleReset, [\"stop\"])\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" \", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    (visibleTabItems.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-tab-visible-grid\",\n                            style: _normalizeStyle(gridStyle.value)\n                        }, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(visibleTabItems.value, (tab, index) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: tab.id,\n                                    class: _normalizeClass([\"acu-nav-btn acu-tab-config-btn\", {\n                                            dragging: draggedIndex.value === index,\n                                        }]),\n                                    draggable: \"true\",\n                                    title: '',\n                                    onClick: _withModifiers(($event) => (handleHide(tab.id)), [\"stop\"]),\n                                    onDragstart: ($event) => (handleDragStart($event, index)),\n                                    onDragover: _withModifiers(($event) => (handleDragOver($event, index)), [\"prevent\"]),\n                                    onDrop: ($event) => (handleDrop($event, index)),\n                                    onDragend: handleDragEnd\n                                }, [\n                                    (tab.icon)\n                                        ? (_openBlock(), _createElementBlock(\"i\", {\n                                            key: 0,\n                                            class: _normalizeClass(tab.icon)\n                                        }, null, 2 /* CLASS */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createElementVNode(\"span\", null, _toDisplayString(tab.name), 1 /* TEXT */),\n                                    (isAggregateTab(tab.type))\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(getTypeBadge(tab.type)), 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_3));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ], 4 /* STYLE */))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[2] || (_cache[2] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"Tab\", -1 /* CACHED */)\n                            ]))]))\n                ]),\n                _createCommentVNode(\"  Tab \"),\n                _createElementVNode(\"div\", _hoisted_6, [\n                    _createElementVNode(\"h4\", null, [\n                        _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-eye-slash\" }, null, -1 /* CACHED */)),\n                        _createTextVNode(\"  (\" + _toDisplayString(hiddenTabItems.value.length) + \") \", 1 /* TEXT */),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-btn-text acu-btn-clear\",\n                            title: \"Tab\",\n                            onClick: _withModifiers(handleClearAll, [\"stop\"])\n                        }, [...(_cache[3] || (_cache[3] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-angle-double-down\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    (hiddenTabItems.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(hiddenTabItems.value, (tab) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: tab.id,\n                                    class: _normalizeClass([\"acu-tab-hidden-item\", { 'is-special': isAggregateTab(tab.type) }]),\n                                    title: ' ' + tab.name,\n                                    onClick: _withModifiers(($event) => (handleShow(tab.id)), [\"stop\"])\n                                }, [\n                                    (tab.icon)\n                                        ? (_openBlock(), _createElementBlock(\"i\", {\n                                            key: 0,\n                                            class: _normalizeClass([tab.icon, \"tab-icon\"])\n                                        }, null, 2 /* CLASS */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createElementVNode(\"span\", _hoisted_9, _toDisplayString(tab.name), 1 /* TEXT */),\n                                    (isAggregateTab(tab.type))\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, _toDisplayString(getTypeBadge(tab.type)), 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _cache[5] || (_cache[5] = _createElementVNode(\"i\", { class: \"fas fa-plus add-icon\" }, null, -1 /* CACHED */))\n                                ], 10 /* CLASS, PROPS */, _hoisted_8));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [...(_cache[6] || (_cache[6] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-check-circle\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]))\n                ]),\n                _createCommentVNode(\"  \"),\n                _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"acu-config-hint acu-config-hint-fixed\" }, [\n                    _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }),\n                    _createElementVNode(\"span\", null, \"/ | \")\n                ], -1 /* CACHED */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TabConfigPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TabConfigPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TabConfigPanel.vue?vue&type=style&index=0&id=610a8a20&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-610a8a20\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, withModifiers as _withModifiers, normalizeClass as _normalizeClass, vModelText as _vModelText, withKeys as _withKeys, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect } from \"vue\";\nconst _hoisted_1 = { class: \"acu-settings-section\" };\nconst _hoisted_2 = { class: \"acu-settings-group\" };\nconst _hoisted_3 = { class: \"acu-settings-row\" };\nconst _hoisted_4 = { class: \"acu-settings-control\" };\nconst _hoisted_5 = { class: \"acu-switch\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"acu-background-config-section\"\n};\nconst _hoisted_7 = { class: \"acu-background-preview-container\" };\nconst _hoisted_8 = { class: \"acu-background-actions\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"acu-settings-row acu-url-input-row\"\n};\nconst _hoisted_10 = { class: \"acu-settings-row\" };\nconst _hoisted_11 = { class: \"acu-settings-label\" };\nconst _hoisted_12 = { class: \"hint\" };\nconst _hoisted_13 = { class: \"acu-settings-control\" };\nconst _hoisted_14 = { class: \"acu-settings-row\" };\nconst _hoisted_15 = { class: \"acu-settings-label\" };\nconst _hoisted_16 = { class: \"hint\" };\nconst _hoisted_17 = { class: \"acu-settings-control\" };\nconst _hoisted_18 = { class: \"acu-settings-row\" };\nconst _hoisted_19 = { class: \"acu-settings-control\" };\nconst _hoisted_20 = { class: \"acu-settings-row\" };\nconst _hoisted_21 = { class: \"acu-settings-label\" };\nconst _hoisted_22 = { class: \"hint\" };\nconst _hoisted_23 = { class: \"acu-settings-control\" };\nimport { computed, onBeforeUnmount, onMounted, reactive, ref, watch } from 'vue';\nimport { deleteBackground, fileToBlob, loadBackground, revokeBlobUrl, saveBackground, urlToBlob, } from '../../composables/useBackgroundStorage';\nimport { useThemeStore } from '../../stores/useThemeStore';\nconst MAX_IMAGE_SIZE = 2 * 1024 * 1024;\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'BackgroundConfigPanel',\n    props: {\n        storageKey: {},\n        modelValue: {}\n    },\n    emits: [\"update:modelValue\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        //  ID ()\n        //  ID \n        const themeStore = useThemeStore();\n        const activeStorageKey = computed(() => {\n            //  ID Key\n            return themeStore.activePresetId || props.storageKey;\n        });\n        const emit = __emit;\n        /**  (2MB) */\n        const localConfig = reactive({ ...props.modelValue });\n        //  URL \n        const backgroundUrlInput = ref(localConfig.imageUrl || '');\n        // \n        const fileInputRef = ref(null);\n        // URL \n        const showUrlInput = ref(false);\n        //  ref\n        const previewRef = ref(null);\n        // \n        const isPreviewDragging = ref(false);\n        const dragStartPos = { x: 0, y: 0 };\n        const dragStartOffset = { x: 0, y: 0 };\n        //  blob URL\n        const currentBlobUrl = ref(null);\n        // \n        const previewImageStyle = computed(() => {\n            if (!localConfig.imageUrl)\n                return {};\n            const offsetX = localConfig.offsetX || 0;\n            const offsetY = localConfig.offsetY || 0;\n            const scale = (localConfig.scale || 100) / 100;\n            return {\n                backgroundImage: `url(${localConfig.imageUrl})`,\n                backgroundPosition: 'center center',\n                backgroundSize: localConfig.size === 'auto' ? '100%' : localConfig.size,\n                transform: `translate(${offsetX}%, ${offsetY}%) scale(${scale})`,\n                transformOrigin: 'center center',\n                backgroundRepeat: 'no-repeat',\n            };\n        });\n        //  props \n        watch(() => props.modelValue, newVal => {\n            Object.assign(localConfig, newVal);\n            if (newVal.externalUrl) {\n                backgroundUrlInput.value = newVal.externalUrl;\n            }\n        }, { deep: true });\n        //  props.modelValue.imageUrl \n        //  store  applyPreset  backgroundConfig.imageUrl \n        watch(() => props.modelValue.imageUrl, newUrl => {\n            //  URL \n            if (newUrl !== localConfig.imageUrl) {\n                //  blob URL \n                if (currentBlobUrl.value && currentBlobUrl.value !== newUrl) {\n                    revokeBlobUrl(currentBlobUrl.value);\n                    currentBlobUrl.value = null;\n                }\n                localConfig.imageUrl = newUrl || '';\n                //  URL  blob URL\n                if (newUrl && newUrl.startsWith('blob:')) {\n                    currentBlobUrl.value = newUrl;\n                }\n                console.info('[BackgroundConfigPanel] imageUrl :', newUrl ? '' : '');\n            }\n        });\n        /**\n         * \n         *  imageUrl  hasIndexedDBImage  true \n         */\n        async function loadBackgroundImage() {\n            //  imageUrl  store  IndexedDB \n            //  store  blob URL\n            if (localConfig.imageUrl) {\n                if (localConfig.imageUrl.startsWith('blob:')) {\n                    currentBlobUrl.value = localConfig.imageUrl;\n                }\n                return;\n            }\n            if (localConfig.externalUrl) {\n                localConfig.imageUrl = localConfig.externalUrl;\n                backgroundUrlInput.value = localConfig.externalUrl;\n            }\n            else if (localConfig.hasIndexedDBImage) {\n                try {\n                    // \n                    let blobUrl = await loadBackground(activeStorageKey.value);\n                    //  ()\n                    if (!blobUrl && activeStorageKey.value !== props.storageKey) {\n                        blobUrl = await loadBackground(props.storageKey);\n                    }\n                    if (blobUrl) {\n                        // \n                        if (currentBlobUrl.value) {\n                            revokeBlobUrl(currentBlobUrl.value);\n                        }\n                        currentBlobUrl.value = blobUrl;\n                        localConfig.imageUrl = blobUrl;\n                        //  emitUpdate()\n                    }\n                }\n                catch (e) {\n                    console.warn('[BackgroundConfigPanel] :', e);\n                }\n            }\n        }\n        // \n        onMounted(() => {\n            loadBackgroundImage();\n        });\n        //  blob URL\n        onBeforeUnmount(() => {\n            if (currentBlobUrl.value) {\n                revokeBlobUrl(currentBlobUrl.value);\n                currentBlobUrl.value = null;\n            }\n        });\n        /**\n         * \n         */\n        function emitUpdate() {\n            emit('update:modelValue', { ...localConfig });\n        }\n        /**\n         * \n         */\n        function handleConfigChange() {\n            emitUpdate();\n        }\n        /**\n         * \n         */\n        function getEventPosition(e) {\n            if ('touches' in e) {\n                return { x: e.touches[0].clientX, y: e.touches[0].clientY };\n            }\n            return { x: e.clientX, y: e.clientY };\n        }\n        /**\n         * \n         */\n        function handlePreviewDragStart(e) {\n            if (!localConfig.imageUrl)\n                return;\n            isPreviewDragging.value = true;\n            const pos = getEventPosition(e);\n            dragStartPos.x = pos.x;\n            dragStartPos.y = pos.y;\n            dragStartOffset.x = localConfig.offsetX || 0;\n            dragStartOffset.y = localConfig.offsetY || 0;\n            // \n            const doc = window.parent.document;\n            doc.addEventListener('mousemove', handlePreviewDragMove);\n            doc.addEventListener('mouseup', handlePreviewDragEnd);\n            doc.addEventListener('touchmove', handlePreviewDragMove, { passive: false });\n            doc.addEventListener('touchend', handlePreviewDragEnd);\n        }\n        /**\n         * \n         */\n        function handlePreviewDragMove(e) {\n            if (!isPreviewDragging.value)\n                return;\n            e.preventDefault();\n            const pos = getEventPosition(e);\n            const previewEl = previewRef.value;\n            if (!previewEl)\n                return;\n            const rect = previewEl.getBoundingClientRect();\n            const deltaX = ((pos.x - dragStartPos.x) / rect.width) * 100;\n            const deltaY = ((pos.y - dragStartPos.y) / rect.height) * 100;\n            //  -50  50\n            localConfig.offsetX = Math.max(-50, Math.min(50, dragStartOffset.x + deltaX));\n            localConfig.offsetY = Math.max(-50, Math.min(50, dragStartOffset.y + deltaY));\n        }\n        /**\n         * \n         */\n        function handlePreviewDragEnd() {\n            if (!isPreviewDragging.value)\n                return;\n            isPreviewDragging.value = false;\n            // \n            const doc = window.parent.document;\n            doc.removeEventListener('mousemove', handlePreviewDragMove);\n            doc.removeEventListener('mouseup', handlePreviewDragEnd);\n            doc.removeEventListener('touchmove', handlePreviewDragMove);\n            doc.removeEventListener('touchend', handlePreviewDragEnd);\n            // \n            handleConfigChange();\n        }\n        /**\n         * \n         */\n        function triggerFileInput() {\n            fileInputRef.value?.click();\n        }\n        /**\n         * \n         */\n        function handleFileSelect(event) {\n            const target = event.target;\n            const file = target.files?.[0];\n            if (file) {\n                processImageFile(file);\n            }\n            //  input \n            target.value = '';\n        }\n        /**\n         *  -  IndexedDB\n         */\n        async function processImageFile(file) {\n            // \n            const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\n            if (!allowedTypes.includes(file.type)) {\n                alert(' jpg/png/gif/webp ');\n                return;\n            }\n            // \n            if (file.size > MAX_IMAGE_SIZE) {\n                alert(` ${MAX_IMAGE_SIZE / 1024 / 1024}MB`);\n                return;\n            }\n            try {\n                //  IndexedDB\n                // fileToBlob \n                const { blob, mimeType } = await fileToBlob(file);\n                //  ( ID )\n                await saveBackground(activeStorageKey.value, blob, mimeType);\n                // /\n                if (activeStorageKey.value !== props.storageKey) {\n                    await saveBackground(props.storageKey, blob, mimeType);\n                }\n                //  blob URL\n                if (currentBlobUrl.value) {\n                    revokeBlobUrl(currentBlobUrl.value);\n                }\n                // \n                const blobUrl = await loadBackground(activeStorageKey.value);\n                if (blobUrl) {\n                    currentBlobUrl.value = blobUrl;\n                    localConfig.imageUrl = blobUrl;\n                }\n                // \n                localConfig.hasIndexedDBImage = true;\n                localConfig.externalUrl = undefined;\n                backgroundUrlInput.value = '';\n                emitUpdate();\n                console.info('[BackgroundConfigPanel]  IndexedDB');\n            }\n            catch (e) {\n                console.error('[BackgroundConfigPanel] :', e);\n                alert('');\n            }\n        }\n        /**\n         *  URL \n         */\n        async function handleUrlInputBlur() {\n            const url = backgroundUrlInput.value.trim();\n            if (!url || url === localConfig.imageUrl)\n                return;\n            //  URLhttp/https IndexedDB\n            if (url.startsWith('http://') || url.startsWith('https://')) {\n                //  blob URL\n                if (currentBlobUrl.value) {\n                    revokeBlobUrl(currentBlobUrl.value);\n                    currentBlobUrl.value = null;\n                }\n                localConfig.imageUrl = url;\n                localConfig.externalUrl = url;\n                localConfig.hasIndexedDBImage = false;\n                emitUpdate();\n                console.info('[BackgroundConfigPanel]  URL:', url);\n                return;\n            }\n            // data URL  Blob  IndexedDB\n            if (url.startsWith('data:')) {\n                try {\n                    const { blob, mimeType } = await urlToBlob(url);\n                    // \n                    await saveBackground(activeStorageKey.value, blob, mimeType);\n                    // \n                    if (activeStorageKey.value !== props.storageKey) {\n                        await saveBackground(props.storageKey, blob, mimeType);\n                    }\n                    //  blob URL\n                    if (currentBlobUrl.value) {\n                        revokeBlobUrl(currentBlobUrl.value);\n                    }\n                    // \n                    const blobUrl = await loadBackground(activeStorageKey.value);\n                    if (blobUrl) {\n                        currentBlobUrl.value = blobUrl;\n                        localConfig.imageUrl = blobUrl;\n                    }\n                    localConfig.hasIndexedDBImage = true;\n                    localConfig.externalUrl = undefined;\n                    emitUpdate();\n                    console.info('[BackgroundConfigPanel] data URL  IndexedDB');\n                }\n                catch (e) {\n                    console.error('[BackgroundConfigPanel]  data URL :', e);\n                    alert('');\n                }\n            }\n        }\n        /**\n         * \n         */\n        async function handleClearBackground() {\n            //  blob URL\n            if (currentBlobUrl.value) {\n                revokeBlobUrl(currentBlobUrl.value);\n                currentBlobUrl.value = null;\n            }\n            //  IndexedDB \n            try {\n                await deleteBackground(activeStorageKey.value);\n                // \n                // \n            }\n            catch (e) {\n                console.warn('[BackgroundConfigPanel] :', e);\n            }\n            localConfig.imageUrl = '';\n            localConfig.hasIndexedDBImage = false;\n            localConfig.externalUrl = undefined;\n            backgroundUrlInput.value = '';\n            emitUpdate();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[18] || (_cache[18] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                    _createElementVNode(\"i\", { class: \"fas fa-image\" }),\n                    _createTextVNode(\"  \"),\n                    _createElementVNode(\"span\", { style: { \"font-weight\": \"400\", \"font-size\": \"11px\", \"color\": \"var(--acu-text-sub)\", \"margin-left\": \"auto\" } }, \"  \")\n                ], -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                            _createTextVNode(\"  \"),\n                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createElementVNode(\"label\", _hoisted_5, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localConfig.enabled) = $event)),\n                                    type: \"checkbox\",\n                                    onChange: handleConfigChange\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [_vModelCheckbox, localConfig.enabled]\n                                ]),\n                                _cache[7] || (_cache[7] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                            ])\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                (localConfig.enabled)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                        _createCommentVNode(\"  -  \"),\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            _createElementVNode(\"div\", {\n                                ref_key: \"previewRef\",\n                                ref: previewRef,\n                                class: _normalizeClass([\"acu-background-preview\", { dragging: isPreviewDragging.value, 'has-image': !!localConfig.imageUrl }]),\n                                onMousedown: _withModifiers(handlePreviewDragStart, [\"prevent\"]),\n                                onTouchstart: _withModifiers(handlePreviewDragStart, [\"prevent\"])\n                            }, [\n                                _createCommentVNode(\"  \"),\n                                (localConfig.imageUrl)\n                                    ? (_openBlock(), _createElementBlock(\"div\", {\n                                        key: 0,\n                                        class: \"acu-preview-image\",\n                                        style: _normalizeStyle(previewImageStyle.value)\n                                    }, null, 4 /* STYLE */))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"acu-no-image-hint\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-image\" }),\n                                            _createElementVNode(\"span\", null, \"\")\n                                        ], -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                            ], 34 /* CLASS, NEED_HYDRATION */)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_8, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-action-btn\",\n                                onClick: _withModifiers(triggerFileInput, [\"stop\"])\n                            }, [...(_cache[10] || (_cache[10] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-camera\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))]),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-action-btn\",\n                                onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (showUrlInput.value = !showUrlInput.value), [\"stop\"]))\n                            }, [...(_cache[11] || (_cache[11] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-link\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\" URL \", -1 /* CACHED */)\n                                ]))]),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-action-btn acu-action-btn-danger\",\n                                onClick: _withModifiers(handleClearBackground, [\"stop\"])\n                            }, [...(_cache[12] || (_cache[12] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"input\", {\n                                ref_key: \"fileInputRef\",\n                                ref: fileInputRef,\n                                type: \"file\",\n                                accept: \"image/jpeg,image/png,image/gif,image/webp\",\n                                style: { \"display\": \"none\" },\n                                onChange: handleFileSelect\n                            }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)\n                        ]),\n                        _createCommentVNode(\" URL  \"),\n                        (showUrlInput.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((backgroundUrlInput).value = $event)),\n                                    type: \"text\",\n                                    placeholder: \" URLhttps://...\",\n                                    class: \"acu-background-url-input\",\n                                    onBlur: handleUrlInputBlur,\n                                    onKeyup: _withKeys(handleUrlInputBlur, [\"enter\"])\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [_vModelText, backgroundUrlInput.value]\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_10, [\n                            _createElementVNode(\"div\", _hoisted_11, [\n                                _cache[13] || (_cache[13] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_12, _toDisplayString(localConfig.scale) + \"%\", 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_13, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((localConfig.scale) = $event)),\n                                    type: \"range\",\n                                    min: \"50\",\n                                    max: \"200\",\n                                    step: \"5\",\n                                    onChange: handleConfigChange\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        localConfig.scale,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ])\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_14, [\n                            _createElementVNode(\"div\", _hoisted_15, [\n                                _cache[14] || (_cache[14] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_16, _toDisplayString(localConfig.opacity) + \"%\", 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_17, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((localConfig.opacity) = $event)),\n                                    type: \"range\",\n                                    min: \"0\",\n                                    max: \"100\",\n                                    step: \"5\",\n                                    onChange: handleConfigChange\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        localConfig.opacity,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ])\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_18, [\n                            _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                _createTextVNode(\"  \"),\n                                _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_19, [\n                                _withDirectives(_createElementVNode(\"select\", {\n                                    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((localConfig.size) = $event)),\n                                    class: \"acu-select\",\n                                    onChange: handleConfigChange\n                                }, [...(_cache[15] || (_cache[15] = [\n                                        _createElementVNode(\"option\", { value: \"cover\" }, \"\", -1 /* CACHED */),\n                                        _createElementVNode(\"option\", { value: \"auto\" }, \"\", -1 /* CACHED */)\n                                    ]))], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [_vModelSelect, localConfig.size]\n                                ])\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_20, [\n                            _createElementVNode(\"div\", _hoisted_21, [\n                                _cache[17] || (_cache[17] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                _createElementVNode(\"span\", _hoisted_22, _toDisplayString(localConfig.blur) + \"px\", 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_23, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((localConfig.blur) = $event)),\n                                    type: \"range\",\n                                    min: \"0\",\n                                    max: \"20\",\n                                    step: \"1\",\n                                    onChange: handleConfigChange\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        localConfig.blur,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ])\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./BackgroundConfigPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./BackgroundConfigPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./BackgroundConfigPanel.vue?vue&type=style&index=0&id=acd94642&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-acd94642\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, vShow as _vShow, withDirectives as _withDirectives, renderSlot as _renderSlot } from \"vue\";\nconst _hoisted_1 = { class: \"acu-preset-header\" };\nconst _hoisted_2 = { class: \"acu-settings-row\" };\nconst _hoisted_3 = { class: \"acu-settings-label\" };\nconst _hoisted_4 = { class: \"hint\" };\nconst _hoisted_5 = { class: \"acu-settings-control acu-preset-control\" };\nconst _hoisted_6 = { class: \"acu-preset-selected-name\" };\nconst _hoisted_7 = { class: \"acu-preset-dropdown-menu\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"acu-migrate-hint\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = { class: \"acu-preset-option-name\" };\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n    key: 2,\n    class: \"acu-migrate-hint\"\n};\nconst _hoisted_14 = { class: \"acu-preset-actions\" };\nconst _hoisted_15 = {\n    key: 0,\n    class: \"acu-dimension-toolbar\"\n};\nconst _hoisted_16 = [\"title\"];\nconst _hoisted_17 = {\n    key: 0,\n    class: \"toolbar-badge\"\n};\nimport { computed, onMounted, onUnmounted, ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PresetManagerHeader',\n    props: {\n        presets: {},\n        activePresetId: {},\n        title: {},\n        hint: {},\n        showToolbar: { type: Boolean, default: false },\n        isMigrating: { type: Boolean, default: false },\n        selectedCount: { default: 0 }\n    },\n    emits: [\"select\", \"restore-default\", \"delete\", \"save\", \"save-as\", \"collapse-all\", \"expand-all\", \"import\", \"export-current\", \"export-all\", \"toggle-migrate\", \"migrate-to\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const isDropdownOpen = ref(false);\n        const selectedPresetName = computed(() => {\n            if (!props.activePresetId)\n                return '';\n            const preset = props.presets.find(p => p.id === props.activePresetId);\n            return preset ? preset.name : '';\n        });\n        function toggleDropdown() {\n            isDropdownOpen.value = !isDropdownOpen.value;\n        }\n        function handleSelectDefault() {\n            emit('restore-default');\n            isDropdownOpen.value = false;\n        }\n        function handleSelect(id) {\n            emit('select', id);\n            isDropdownOpen.value = false;\n        }\n        function handleDelete(id) {\n            emit('delete', id);\n            // \n        }\n        // \n        function handleOutsideClick(e) {\n            const target = e.target;\n            if (!target.closest('.acu-preset-dropdown')) {\n                isDropdownOpen.value = false;\n            }\n        }\n        onMounted(() => {\n            document.addEventListener('click', handleOutsideClick);\n        });\n        onUnmounted(() => {\n            document.removeEventListener('click', handleOutsideClick);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createTextVNode(_toDisplayString(__props.title || '') + \" \", 1 /* TEXT */),\n                        _createElementVNode(\"span\", _hoisted_4, _toDisplayString(__props.hint || ''), 1 /* TEXT */)\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"acu-preset-dropdown\", { open: isDropdownOpen.value }])\n                        }, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-preset-dropdown-btn\",\n                                onClick: _withModifiers(toggleDropdown, [\"stop\"])\n                            }, [\n                                _createElementVNode(\"span\", _hoisted_6, _toDisplayString(selectedPresetName.value), 1 /* TEXT */),\n                                _cache[9] || (_cache[9] = _createElementVNode(\"i\", { class: \"fas fa-chevron-down\" }, null, -1 /* CACHED */))\n                            ]),\n                            _withDirectives(_createElementVNode(\"div\", _hoisted_7, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", {\n                                    class: _normalizeClass([\"acu-preset-option\", { active: !__props.activePresetId, 'migrate-disabled': __props.isMigrating }]),\n                                    onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (!__props.isMigrating && handleSelectDefault()), [\"stop\"]))\n                                }, [\n                                    _cache[10] || (_cache[10] = _createElementVNode(\"span\", { class: \"acu-preset-option-name\" }, \"\", -1 /* CACHED */)),\n                                    (__props.isMigrating)\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_8, \"\"))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 2 /* CLASS */),\n                                _createCommentVNode(\"  \"),\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.presets, (preset) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: preset.id,\n                                        class: _normalizeClass([\"acu-preset-option\", {\n                                                active: __props.activePresetId === preset.id,\n                                                'migrate-target': __props.isMigrating && __props.activePresetId !== preset.id,\n                                                'migrate-disabled': __props.isMigrating && __props.activePresetId === preset.id,\n                                            }]),\n                                        onClick: _withModifiers(($event) => (!__props.isMigrating && handleSelect(preset.id)), [\"stop\"])\n                                    }, [\n                                        _createElementVNode(\"span\", _hoisted_10, _toDisplayString(preset.name), 1 /* TEXT */),\n                                        _createCommentVNode(\"  \"),\n                                        (!__props.isMigrating && !preset.isBuiltin)\n                                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                                key: 0,\n                                                class: \"acu-preset-delete-btn\",\n                                                title: \"\",\n                                                onClick: _withModifiers(($event) => (handleDelete(preset.id)), [\"stop\"])\n                                            }, [...(_cache[11] || (_cache[11] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_11))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createCommentVNode(\"  \"),\n                                        (__props.isMigrating && __props.activePresetId !== preset.id)\n                                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                                key: 1,\n                                                class: \"acu-icon-btn migrate-in\",\n                                                title: \"\",\n                                                onClick: _withModifiers(($event) => (_ctx.$emit('migrate-to', preset.id)), [\"stop\"])\n                                            }, [...(_cache[12] || (_cache[12] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-arrow-down\" }, null, -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_12))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createCommentVNode(\"  \"),\n                                        (__props.isMigrating && __props.activePresetId === preset.id)\n                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_13, \"\"))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_9));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ], 512 /* NEED_PATCH */), [\n                                [_vShow, isDropdownOpen.value]\n                            ])\n                        ], 2 /* CLASS */),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_14, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-tool-btn\",\n                                title: \"\",\n                                onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (_ctx.$emit('save-as')), [\"stop\"]))\n                            }, [...(_cache[13] || (_cache[13] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                                ]))]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-tool-btn\",\n                                title: \"\",\n                                onClick: _cache[2] || (_cache[2] = _withModifiers(($event) => (_ctx.$emit('save')), [\"stop\"]))\n                            }, [...(_cache[14] || (_cache[14] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-save\" }, null, -1 /* CACHED */)\n                                ]))]),\n                            _createCommentVNode(\"  \"),\n                            _renderSlot(_ctx.$slots, \"actions\")\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                (__props.showToolbar)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                        _cache[21] || (_cache[21] = _createElementVNode(\"span\", { class: \"toolbar-label\" }, \"\", -1 /* CACHED */)),\n                        _cache[22] || (_cache[22] = _createElementVNode(\"span\", { class: \"toolbar-spacer\" }, null, -1 /* CACHED */)),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-icon-btn\",\n                            title: \"\",\n                            onClick: _cache[3] || (_cache[3] = _withModifiers(($event) => (_ctx.$emit('collapse-all')), [\"stop\"]))\n                        }, [...(_cache[15] || (_cache[15] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-compress-alt\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-icon-btn\",\n                            title: \"\",\n                            onClick: _cache[4] || (_cache[4] = _withModifiers(($event) => (_ctx.$emit('expand-all')), [\"stop\"]))\n                        }, [...(_cache[16] || (_cache[16] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-expand-alt\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _cache[23] || (_cache[23] = _createElementVNode(\"span\", { class: \"toolbar-divider\" }, null, -1 /* CACHED */)),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-icon-btn\",\n                            title: \"\",\n                            onClick: _cache[5] || (_cache[5] = _withModifiers(($event) => (_ctx.$emit('import')), [\"stop\"]))\n                        }, [...(_cache[17] || (_cache[17] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-file-import\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-icon-btn\",\n                            title: \"\",\n                            onClick: _cache[6] || (_cache[6] = _withModifiers(($event) => (_ctx.$emit('export-current')), [\"stop\"]))\n                        }, [...(_cache[18] || (_cache[18] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-file-export\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-icon-btn\",\n                            title: \"\",\n                            onClick: _cache[7] || (_cache[7] = _withModifiers(($event) => (_ctx.$emit('export-all')), [\"stop\"]))\n                        }, [...(_cache[19] || (_cache[19] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-archive\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _cache[24] || (_cache[24] = _createElementVNode(\"span\", { class: \"toolbar-divider\" }, null, -1 /* CACHED */)),\n                        _createElementVNode(\"button\", {\n                            class: _normalizeClass([\"acu-icon-btn\", { active: __props.isMigrating }]),\n                            title: __props.isMigrating ? ` (${__props.selectedCount})` : '',\n                            onClick: _cache[8] || (_cache[8] = _withModifiers(($event) => (_ctx.$emit('toggle-migrate')), [\"stop\"]))\n                        }, [...(_cache[20] || (_cache[20] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-exchange-alt\" }, null, -1 /* CACHED */)\n                            ]))], 10 /* CLASS, PROPS */, _hoisted_16),\n                        (__props.isMigrating)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_17, _toDisplayString(__props.selectedCount), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./PresetManagerHeader.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PresetManagerHeader.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, normalizeClass as _normalizeClass, withModifiers as _withModifiers, vShow as _vShow } from \"vue\";\nconst _hoisted_1 = { class: \"acu-theme-panel\" };\nconst _hoisted_2 = { class: \"acu-theme-scroll-content\" };\nconst _hoisted_3 = { class: \"acu-settings-section\" };\nconst _hoisted_4 = { class: \"acu-settings-group\" };\nconst _hoisted_5 = { class: \"acu-settings-row\" };\nconst _hoisted_6 = { class: \"acu-settings-control\" };\nconst _hoisted_7 = [\"value\"];\nconst _hoisted_8 = { class: \"acu-settings-section\" };\nconst _hoisted_9 = { class: \"acu-settings-group\" };\nconst _hoisted_10 = { class: \"acu-settings-row\" };\nconst _hoisted_11 = { class: \"acu-settings-control acu-color-picker-inline\" };\nconst _hoisted_12 = { class: \"acu-settings-row\" };\nconst _hoisted_13 = { class: \"acu-settings-control acu-color-picker-inline\" };\nconst _hoisted_14 = { class: \"acu-settings-row\" };\nconst _hoisted_15 = { class: \"acu-settings-control acu-color-picker-inline\" };\nconst _hoisted_16 = { class: \"acu-settings-section\" };\nconst _hoisted_17 = { class: \"acu-var-groups-container\" };\nconst _hoisted_18 = [\"onClick\"];\nconst _hoisted_19 = { class: \"acu-var-count\" };\nconst _hoisted_20 = { class: \"acu-var-group-body\" };\nconst _hoisted_21 = { class: \"acu-var-line-primary\" };\nconst _hoisted_22 = { class: \"acu-var-label\" };\nconst _hoisted_23 = { class: \"acu-var-color-row\" };\nconst _hoisted_24 = [\"onClick\"];\nconst _hoisted_25 = [\"value\", \"onChange\"];\nconst _hoisted_26 = [\"value\", \"onChange\"];\nconst _hoisted_27 = { class: \"acu-var-line-secondary\" };\nconst _hoisted_28 = { class: \"acu-var-name\" };\nconst _hoisted_29 = { class: \"acu-var-opacity-row\" };\nconst _hoisted_30 = [\"value\", \"onInput\"];\nconst _hoisted_31 = { class: \"acu-opacity-value\" };\nconst _hoisted_32 = { class: \"acu-settings-section\" };\nconst _hoisted_33 = { class: \"acu-settings-group\" };\nconst _hoisted_34 = { class: \"acu-settings-row\" };\nconst _hoisted_35 = { class: \"acu-settings-label\" };\nconst _hoisted_36 = { class: \"hint\" };\nconst _hoisted_37 = { class: \"acu-settings-control acu-css-actions\" };\nimport { onMounted, ref, watch } from 'vue';\nimport { GLOBAL_THEME_BG_KEY } from '../../composables/useBackgroundStorage';\nimport { useToast } from '../../composables/useToast';\nimport { THEMES, useConfigStore } from '../../stores/useConfigStore';\nimport { useThemeStore } from '../../stores/useThemeStore';\nimport { useUIStore } from '../../stores/useUIStore';\nimport { THEME_VAR_CSS_MAP, THEME_VAR_GROUPS, } from '../../types';\nimport BackgroundConfigPanel from './BackgroundConfigPanel.vue';\nimport PresetManagerHeader from './PresetManagerHeader.vue';\n\nimport { computed } from 'vue';\n// ============================================================\n// Stores\n// ============================================================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ThemePanel',\n    setup(__props) {\n        const themeStore = useThemeStore();\n        const configStore = useConfigStore();\n        const uiStore = useUIStore();\n        const toast = useToast();\n        // ============================================================\n        //  Store \n        // ============================================================\n        //  Pinia  getter \n        function getPresetList() {\n            return themeStore.presets || [];\n        }\n        function getActivePresetId() {\n            return themeStore.activePresetId;\n        }\n        function setActivePresetId(id) {\n            themeStore.activePresetId = id;\n        }\n        function getCurrentThemeVars() {\n            return themeStore.currentThemeVars || {};\n        }\n        function getCurrentHighlight() {\n            return themeStore.currentHighlight;\n        }\n        function getCustomCSS() {\n            return themeStore.customCSS || '';\n        }\n        function getCurrentThemeVarOpacities() {\n            return themeStore.currentThemeVarOpacities || {};\n        }\n        function getBackgroundConfig() {\n            return themeStore.getBackgroundConfig();\n        }\n        // ============================================================\n        // State\n        // ============================================================\n        /**  */\n        const manualColorHex = ref('#d35400');\n        const aiColorHex = ref('#3498db');\n        const titleColorHex = ref('#d35400');\n        /**  */\n        const selectedTheme = ref('retro');\n        /**  */\n        const expandedGroups = ref([]);\n        /**  CSS  */\n        const customCSSText = ref('');\n        /**  */\n        const fileInputRef = ref();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const selectedPresetName = computed(() => {\n            const activeId = getActivePresetId();\n            if (!activeId)\n                return '';\n            const preset = getPresetList().find(p => p.id === activeId);\n            return preset?.name || '';\n        });\n        // ============================================================\n        // \n        // ============================================================\n        onMounted(async () => {\n            //  ()\n            await themeStore.loadFromStorage();\n            // \n            syncColorInputs();\n            // \n            selectedTheme.value = configStore.config.theme || 'retro';\n            //  CSS\n            customCSSText.value = getCustomCSS();\n        });\n        //  store \n        watch(() => getCurrentHighlight(), () => syncColorInputs(), { deep: true });\n        watch(() => configStore.config.theme, newTheme => {\n            selectedTheme.value = newTheme || 'retro';\n        });\n        // ============================================================\n        // \n        // ============================================================\n        function syncColorInputs() {\n            manualColorHex.value = themeStore.manualHighlightColor;\n            aiColorHex.value = themeStore.aiHighlightColor;\n            titleColorHex.value = themeStore.titleColor;\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function selectDefaultPreset() {\n            setActivePresetId(null);\n            // \n            themeStore.clearThemeVars();\n            themeStore.clearThemeVarOpacities();\n            syncColorInputs();\n            customCSSText.value = '';\n            themeStore.clearCustomCSS();\n            toast.success('');\n        }\n        function selectPreset(presetId) {\n            themeStore.applyPreset(presetId);\n            syncColorInputs();\n            customCSSText.value = getCustomCSS();\n            selectedTheme.value = configStore.config.theme || 'retro';\n            toast.success('');\n        }\n        function confirmDeletePreset(presetId) {\n            const preset = getPresetList().find(p => p.id === presetId);\n            if (!preset)\n                return;\n            if (confirm(`${preset.name}`)) {\n                themeStore.deletePreset(presetId);\n                toast.info('');\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function handleQuickSave() {\n            try {\n                const activeId = getActivePresetId();\n                if (activeId) {\n                    // \n                    const preset = getPresetList().find(p => p.id === activeId);\n                    if (preset) {\n                        themeStore.saveCurrentToPreset(preset.name);\n                        toast.success(`${preset.name}`);\n                        return;\n                    }\n                }\n                // \n                openSaveDialog();\n            }\n            catch (error) {\n                console.error(':', error);\n                toast.error('');\n            }\n        }\n        function openSaveDialog() {\n            uiStore.openPresetSaveDialog({\n                presetType: 'theme',\n                summaryItems: [], // \n                initialName: '',\n                checkDuplicate: (name) => getPresetList().some(p => p.name === name),\n            }, {\n                onSave: (name) => {\n                    themeStore.saveCurrentToPreset(name);\n                    toast.success(`${name}`);\n                },\n            });\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function onThemeChange() {\n            configStore.setTheme(selectedTheme.value);\n            //  UI CSS \n            setTimeout(() => {\n                // \n                const temp = manualColorHex.value;\n                manualColorHex.value = temp;\n            }, 100);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function onManualColorChange() {\n            themeStore.setManualHighlightColor('custom', manualColorHex.value);\n        }\n        function onAiColorChange() {\n            themeStore.setAiHighlightColor('custom', aiColorHex.value);\n        }\n        function onTitleColorChange() {\n            themeStore.setTitleColor('custom', titleColorHex.value);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function toggleGroup(groupId) {\n            const index = expandedGroups.value.indexOf(groupId);\n            if (index > -1) {\n                expandedGroups.value.splice(index, 1);\n            }\n            else {\n                expandedGroups.value.push(groupId);\n            }\n        }\n        function getGroupModifiedCount(group) {\n            const vars = getCurrentThemeVars();\n            return group.vars.filter(v => vars[v.key]).length;\n        }\n        function hasThemeVar(key) {\n            const vars = getCurrentThemeVars();\n            return !!vars[key];\n        }\n        function getVarValue(key) {\n            const vars = getCurrentThemeVars();\n            return vars[key] || '';\n        }\n        function getVarColorValue(key) {\n            const value = getVarValue(key);\n            //  hex \n            if (value && value.startsWith('#') && (value.length === 4 || value.length === 7)) {\n                return value;\n            }\n            //  DOM  CSS \n            // \n            // \n            return '#888888';\n        }\n        function setVar(key, value) {\n            if (value.trim()) {\n                themeStore.setThemeVar(key, value.trim());\n            }\n            else {\n                themeStore.removeThemeVar(key);\n            }\n        }\n        function resetVar(key) {\n            themeStore.removeThemeVar(key);\n            themeStore.removeThemeVarOpacity(key);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function hasVarOpacity(key) {\n            const opacities = getCurrentThemeVarOpacities();\n            return opacities[key] !== undefined && opacities[key] !== 100;\n        }\n        function getVarOpacity(key) {\n            const opacities = getCurrentThemeVarOpacities();\n            return opacities[key] ?? 100;\n        }\n        function setVarOpacity(key, opacity) {\n            themeStore.setThemeVarOpacity(key, opacity);\n        }\n        // ============================================================\n        //  CSS\n        // ============================================================\n        function saveCSS() {\n            themeStore.setCustomCSS(customCSSText.value);\n        }\n        function clearCSS() {\n            if (confirm(' CSS ')) {\n                customCSSText.value = '';\n                themeStore.clearCustomCSS();\n            }\n        }\n        function exportCSS() {\n            const data = {\n                type: 'acu_theme_config',\n                version: '1.1',\n                timestamp: new Date().toISOString(),\n                theme: selectedTheme.value,\n                highlight: getCurrentHighlight(),\n                themeVars: getCurrentThemeVars(),\n                themeVarOpacities: getCurrentThemeVarOpacities(),\n                backgroundConfig: getBackgroundConfig(), // \n                customCSS: getCustomCSS(),\n            };\n            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `acu-theme-${Date.now()}.json`;\n            a.click();\n            URL.revokeObjectURL(url);\n            toast.success('');\n        }\n        function importCSS() {\n            fileInputRef.value?.click();\n        }\n        /**\n         *  rgba  hex8\n         */\n        function parseColorValue(value) {\n            // 1.  rgba(r, g, b, a)\n            const rgbaMatch = value.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*([0-9.]+))?\\)/);\n            if (rgbaMatch) {\n                const r = parseInt(rgbaMatch[1]);\n                const g = parseInt(rgbaMatch[2]);\n                const b = parseInt(rgbaMatch[3]);\n                const a = rgbaMatch[4] ? parseFloat(rgbaMatch[4]) : 1;\n                //  hex\n                const toHex = (n) => {\n                    const hex = n.toString(16);\n                    return hex.length === 1 ? '0' + hex : hex;\n                };\n                const hex = `#${toHex(r)}${toHex(g)}${toHex(b)}`;\n                return { hex, opacity: Math.round(a * 100) };\n            }\n            // 2.  Hex8 (#RRGGBBAA)\n            if (value.startsWith('#') && value.length === 9) {\n                const hex = value.slice(0, 7);\n                const alphaHex = value.slice(7, 9);\n                const alpha = parseInt(alphaHex, 16) / 255;\n                return { hex, opacity: Math.round(alpha * 100) };\n            }\n            return null;\n        }\n        /**\n         *  CSS \n         */\n        function syncCssToSliders() {\n            if (!customCSSText.value.trim()) {\n                toast.info('CSS ');\n                return;\n            }\n            // 1.  (cssVar -> key)\n            const cssVarToKey = {};\n            for (const [k, v] of Object.entries(THEME_VAR_CSS_MAP)) {\n                cssVarToKey[v] = k;\n            }\n            // 2.  ()\n            let newCss = customCSSText.value;\n            let convertedCount = 0;\n            // : --acu-xxx: value; ()\n            const regex = /(--acu-[a-z0-9-]+)\\s*:\\s*([^;]+?)\\s*(?:!important)?\\s*;/gi;\n            let match;\n            while ((match = regex.exec(customCSSText.value)) !== null) {\n                const cssVar = match[1];\n                const value = match[2].trim();\n                const key = cssVarToKey[cssVar];\n                if (key) {\n                    //  store\n                    const cleanValue = value; //  !important\n                    //  ( rgba  hex8)\n                    const parsed = parseColorValue(cleanValue);\n                    if (parsed) {\n                        themeStore.setThemeVar(key, parsed.hex);\n                        themeStore.setThemeVarOpacity(key, parsed.opacity);\n                    }\n                    else {\n                        themeStore.setThemeVar(key, cleanValue);\n                        //  100 ()\n                        themeStore.setThemeVarOpacity(key, 100);\n                    }\n                    convertedCount++;\n                }\n            }\n            if (convertedCount > 0) {\n                // 3.  CSS \n                // \n                for (const [k, v] of Object.entries(THEME_VAR_CSS_MAP)) {\n                    // \n                    const removeRegex = new RegExp(`${v}\\\\s*:\\\\s*[^;]+?;`, 'gi');\n                    newCss = newCss.replace(removeRegex, '');\n                }\n                //  ()\n                // newCss = newCss.replace(/\\{\\s*\\}/g, '');\n                // \n                newCss = newCss.replace(/\\n\\s*\\n\\s*\\n/g, '\\n\\n').trim();\n                customCSSText.value = newCss;\n                themeStore.setCustomCSS(newCss);\n                // 4.  UI\n                syncColorInputs();\n                toast.success(` ${convertedCount} `);\n            }\n            else {\n                toast.info('');\n            }\n        }\n        function handleFileImport(event) {\n            const file = event.target.files?.[0];\n            if (!file)\n                return;\n            const reader = new FileReader();\n            reader.onload = e => {\n                try {\n                    const content = e.target?.result;\n                    //  JSON\n                    if (file.name.endsWith('.json')) {\n                        const data = JSON.parse(content);\n                        if (data.type === 'acu_theme_config') {\n                            // \n                            if (data.theme) {\n                                selectedTheme.value = data.theme;\n                                configStore.setTheme(data.theme);\n                            }\n                            // \n                            if (data.highlight) {\n                                const highlight = getCurrentHighlight();\n                                highlight.manualColor = data.highlight.manualColor || 'custom';\n                                highlight.manualHex = data.highlight.manualHex;\n                                highlight.aiColor = data.highlight.aiColor || 'custom';\n                                highlight.aiHex = data.highlight.aiHex;\n                                highlight.titleColor = data.highlight.titleColor || 'custom';\n                                highlight.titleHex = data.highlight.titleHex;\n                            }\n                            if (data.themeVars) {\n                                const vars = getCurrentThemeVars();\n                                Object.assign(vars, data.themeVars);\n                            }\n                            // v1.1+\n                            if (data.themeVarOpacities) {\n                                const opacities = getCurrentThemeVarOpacities();\n                                Object.assign(opacities, data.themeVarOpacities);\n                            }\n                            // \n                            if (data.backgroundConfig) {\n                                themeStore.setBackgroundConfig(data.backgroundConfig);\n                            }\n                            if (data.customCSS) {\n                                customCSSText.value = data.customCSS;\n                                themeStore.setCustomCSS(data.customCSS);\n                            }\n                            syncColorInputs();\n                            toast.success('');\n                        }\n                        else {\n                            throw new Error('');\n                        }\n                    }\n                    else {\n                        //  CSS \n                        customCSSText.value = content;\n                        themeStore.setCustomCSS(content);\n                        toast.success('CSS ');\n                    }\n                }\n                catch (err) {\n                    console.error('[ThemePanel] :', err);\n                    toast.error('');\n                }\n            };\n            reader.readAsText(file);\n            //  input\n            event.target.value = '';\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createVNode(PresetManagerHeader, {\n                    presets: getPresetList(),\n                    \"active-preset-id\": getActivePresetId(),\n                    title: \"\",\n                    hint: \"\",\n                    onSelect: selectPreset,\n                    onRestoreDefault: selectDefaultPreset,\n                    onDelete: confirmDeletePreset,\n                    onSave: handleQuickSave,\n                    onSaveAs: openSaveDialog\n                }, null, 8 /* PROPS */, [\"presets\", \"active-preset-id\"]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-palette\" }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                    _createTextVNode(\"  \"),\n                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_6, [\n                                    _withDirectives(_createElementVNode(\"select\", {\n                                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((selectedTheme).value = $event)),\n                                        class: \"acu-select\",\n                                        onChange: onThemeChange\n                                    }, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(THEMES), (theme) => {\n                                            return (_openBlock(), _createElementBlock(\"option\", {\n                                                key: theme.id,\n                                                value: theme.id\n                                            }, _toDisplayString(theme.name), 9 /* TEXT, PROPS */, _hoisted_7));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelSelect, selectedTheme.value]\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createVNode(BackgroundConfigPanel, {\n                        \"storage-key\": _unref(GLOBAL_THEME_BG_KEY),\n                        \"model-value\": getBackgroundConfig(),\n                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = val => _unref(themeStore).setBackgroundConfig(val))\n                    }, null, 8 /* PROPS */, [\"storage-key\", \"model-value\"]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-highlighter\" }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_9, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_10, [\n                                _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                    _createTextVNode(\"  \"),\n                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_11, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((manualColorHex).value = $event)),\n                                        type: \"text\",\n                                        class: \"acu-color-input\",\n                                        placeholder: \"#RRGGBB\",\n                                        onChange: onManualColorChange\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, manualColorHex.value]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((manualColorHex).value = $event)),\n                                        type: \"color\",\n                                        class: \"acu-color-swatch\",\n                                        onChange: onManualColorChange\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, manualColorHex.value]\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\" AI  \"),\n                            _createElementVNode(\"div\", _hoisted_12, [\n                                _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                    _createTextVNode(\" AI  \"),\n                                    _createElementVNode(\"span\", { class: \"hint\" }, \"AI \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_13, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((aiColorHex).value = $event)),\n                                        type: \"text\",\n                                        class: \"acu-color-input\",\n                                        placeholder: \"#RRGGBB\",\n                                        onChange: onAiColorChange\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, aiColorHex.value]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((aiColorHex).value = $event)),\n                                        type: \"color\",\n                                        class: \"acu-color-swatch\",\n                                        onChange: onAiColorChange\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, aiColorHex.value]\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_14, [\n                                _cache[13] || (_cache[13] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                    _createTextVNode(\"  \"),\n                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_15, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((titleColorHex).value = $event)),\n                                        type: \"text\",\n                                        class: \"acu-color-input\",\n                                        placeholder: \"#RRGGBB\",\n                                        onChange: onTitleColorChange\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, titleColorHex.value]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((titleColorHex).value = $event)),\n                                        type: \"color\",\n                                        class: \"acu-color-swatch\",\n                                        onChange: onTitleColorChange\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, titleColorHex.value]\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_16, [\n                        _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-paint-brush\" }),\n                            _createTextVNode(\"  \"),\n                            _createElementVNode(\"span\", {\n                                class: \"hint\",\n                                style: { \"margin-left\": \"auto\", \"font-weight\": \"normal\" }\n                            }, \" CSS \")\n                        ], -1 /* CACHED */)),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_17, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(THEME_VAR_GROUPS), (group, index) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: group.id,\n                                    class: _normalizeClass([\"acu-var-group\", { first: index === 0, last: index === _unref(THEME_VAR_GROUPS).length - 1 }])\n                                }, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"acu-var-group-header\",\n                                        onClick: _withModifiers(($event) => (toggleGroup(group.id)), [\"stop\"])\n                                    }, [\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(['fas', group.icon])\n                                        }, null, 2 /* CLASS */),\n                                        _createElementVNode(\"span\", null, _toDisplayString(group.name), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_19, _toDisplayString(getGroupModifiedCount(group)) + \"/\" + _toDisplayString(group.vars.length), 1 /* TEXT */),\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(['fas', expandedGroups.value.includes(group.id) ? 'fa-chevron-up' : 'fa-chevron-down'])\n                                        }, null, 2 /* CLASS */)\n                                    ], 8 /* PROPS */, _hoisted_18),\n                                    _withDirectives(_createElementVNode(\"div\", _hoisted_20, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.vars, (v) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: v.key,\n                                                class: \"acu-var-row acu-var-row-tall\"\n                                            }, [\n                                                _createCommentVNode(\"  +  \"),\n                                                _createElementVNode(\"div\", _hoisted_21, [\n                                                    _createElementVNode(\"div\", _hoisted_22, _toDisplayString(v.label), 1 /* TEXT */),\n                                                    _createElementVNode(\"div\", _hoisted_23, [\n                                                        (hasThemeVar(v.key) || hasVarOpacity(v.key))\n                                                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: 0,\n                                                                class: \"acu-var-reset\",\n                                                                title: \"\",\n                                                                onClick: _withModifiers(($event) => (resetVar(v.key)), [\"stop\"])\n                                                            }, [...(_cache[15] || (_cache[15] = [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */)\n                                                                ]))], 8 /* PROPS */, _hoisted_24))\n                                                            : _createCommentVNode(\"v-if\", true),\n                                                        _createElementVNode(\"input\", {\n                                                            value: getVarValue(v.key),\n                                                            type: \"text\",\n                                                            class: \"acu-color-input\",\n                                                            placeholder: \"\",\n                                                            onChange: e => setVar(v.key, e.target.value)\n                                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_25),\n                                                        _createElementVNode(\"input\", {\n                                                            value: getVarColorValue(v.key),\n                                                            type: \"color\",\n                                                            class: \"acu-color-swatch\",\n                                                            onChange: e => setVar(v.key, e.target.value)\n                                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_26)\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\"  +  \"),\n                                                _createElementVNode(\"div\", _hoisted_27, [\n                                                    _createElementVNode(\"code\", _hoisted_28, _toDisplayString(_unref(THEME_VAR_CSS_MAP)[v.key]), 1 /* TEXT */),\n                                                    _createElementVNode(\"div\", _hoisted_29, [\n                                                        _createElementVNode(\"input\", {\n                                                            type: \"range\",\n                                                            class: \"acu-range-input\",\n                                                            min: \"0\",\n                                                            max: \"100\",\n                                                            value: getVarOpacity(v.key),\n                                                            onInput: e => setVarOpacity(v.key, Number(e.target.value))\n                                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_30),\n                                                        _createElementVNode(\"span\", _hoisted_31, _toDisplayString(getVarOpacity(v.key)), 1 /* TEXT */)\n                                                    ])\n                                                ])\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ], 512 /* NEED_PATCH */), [\n                                        [_vShow, expandedGroups.value.includes(group.id)]\n                                    ])\n                                ], 2 /* CLASS */));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])\n                    ]),\n                    _createCommentVNode(\"  CSS \"),\n                    _createElementVNode(\"div\", _hoisted_32, [\n                        _cache[23] || (_cache[23] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-code\" }),\n                            _createTextVNode(\"  CSS \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_33, [\n                            _createElementVNode(\"div\", _hoisted_34, [\n                                _createElementVNode(\"div\", _hoisted_35, [\n                                    _cache[17] || (_cache[17] = _createTextVNode(\" CSS  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_36, _toDisplayString(customCSSText.value.length) + \" \", 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_37, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-tool-btn\",\n                                        onClick: _withModifiers(exportCSS, [\"stop\"])\n                                    }, [...(_cache[18] || (_cache[18] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-download\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-tool-btn\",\n                                        onClick: _withModifiers(importCSS, [\"stop\"])\n                                    }, [...(_cache[19] || (_cache[19] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-upload\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-tool-btn\",\n                                        title: \" CSS  CSS \",\n                                        onClick: _withModifiers(syncCssToSliders, [\"stop\"])\n                                    }, [...(_cache[20] || (_cache[20] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-magic\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-tool-btn acu-btn-danger\",\n                                        onClick: _withModifiers(clearCSS, [\"stop\"])\n                                    }, [...(_cache[21] || (_cache[21] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))])\n                                ])\n                            ]),\n                            _cache[22] || (_cache[22] = _createElementVNode(\"div\", { class: \"acu-css-hint\" }, [\n                                _createElementVNode(\"p\", null, \"\"),\n                                _createElementVNode(\"code\", null, \".acu-app, .acu-wrapper\"),\n                                _createTextVNode(),\n                                _createElementVNode(\"code\", null, \".acu-floating-ball\"),\n                                _createElementVNode(\"code\", null, \".acu-data-card\")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"textarea\", {\n                                \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((customCSSText).value = $event)),\n                                class: \"acu-css-editor\",\n                                placeholder: \"/*  CSS */\",\n                                rows: \"8\",\n                                onChange: saveCSS\n                            }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                [_vModelText, customCSSText.value]\n                            ])\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  App.vue  \"),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"input\", {\n                    ref_key: \"fileInputRef\",\n                    ref: fileInputRef,\n                    type: \"file\",\n                    accept: \".json,.css,.txt\",\n                    style: { \"display\": \"none\" },\n                    onChange: handleFileImport\n                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ThemePanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ThemePanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, vModelText as _vModelText, withModifiers as _withModifiers, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vShow as _vShow } from \"vue\";\nconst _hoisted_1 = { class: \"acu-dimension-manager\" };\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"header-left\" };\nconst _hoisted_5 = [\"onUpdate:modelValue\"];\nconst _hoisted_6 = { class: \"header-right\" };\nconst _hoisted_7 = [\"onUpdate:modelValue\"];\nconst _hoisted_8 = [\"disabled\", \"title\", \"onClick\"];\nconst _hoisted_9 = { class: \"dimension-content\" };\nconst _hoisted_10 = { class: \"tier-list\" };\nconst _hoisted_11 = { class: \"tier-row basic-info\" };\nconst _hoisted_12 = { class: \"tier-name-wrapper\" };\nconst _hoisted_13 = [\"onUpdate:modelValue\"];\nconst _hoisted_14 = [\"onUpdate:modelValue\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = { class: \"tier-row weight-control\" };\nconst _hoisted_17 = [\"onUpdate:modelValue\"];\nconst _hoisted_18 = { class: \"acu-badge\" };\nconst _hoisted_19 = { class: \"tier-row prompt-editor\" };\nconst _hoisted_20 = [\"onUpdate:modelValue\"];\nconst _hoisted_21 = [\"onClick\"];\nconst _hoisted_22 = { class: \"acu-settings-section advanced-settings\" };\nconst _hoisted_23 = { class: \"acu-settings-group template-settings-group\" };\nconst _hoisted_24 = { class: \"template-shortcuts-row\" };\nconst _hoisted_25 = { class: \"template-editor-row\" };\nconst _hoisted_26 = { class: \"template-help-row\" };\nconst _hoisted_27 = { class: \"acu-wildcard-help\" };\nimport { useTextareaAutosize } from '@vueuse/core';\nimport { v4 as uuidv4 } from 'uuid';\nimport { onMounted, ref, toRef } from 'vue';\nimport { TEMPLATE_WITH_DIMENSIONS } from '../../../composables/usePromptBuild';\nimport { useToast } from '../../../composables/useToast';\nimport { useDivinationStore } from '../../../stores/useDivinationStore';\nimport { useUIStore } from '../../../stores/useUIStore';\nimport PresetManagerHeader from '../PresetManagerHeader.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DimensionManagerPanel',\n    setup(__props) {\n        const divinationStore = useDivinationStore();\n        const uiStore = useUIStore();\n        const toast = useToast();\n        // \n        const collapsedDimensions = ref({});\n        const fileInputRef = ref(null);\n        const templateInputRef = ref(null);\n        const showHelp = ref(true);\n        // \n        const isMigrating = ref(false);\n        const selectedDimensionIds = ref(new Set());\n        // \n        const customTemplateRef = toRef(divinationStore.config, 'customTemplate');\n        useTextareaAutosize({ element: templateInputRef, input: customTemplateRef });\n        const toggleHelp = () => {\n            showHelp.value = !showHelp.value;\n        };\n        // \n        onMounted(() => {\n            if (!divinationStore.config.customTemplate) {\n                divinationStore.config.customTemplate = TEMPLATE_WITH_DIMENSIONS;\n            }\n        });\n        // ============================================================\n        // \n        // ============================================================\n        function handleSelectPreset(id) {\n            divinationStore.applyPreset(id);\n            toast.success('');\n        }\n        function handleRestoreDefault() {\n            if (confirm('')) {\n                divinationStore.restoreDefaultDimensions();\n                toast.success('');\n            }\n        }\n        function handleDeletePreset(id) {\n            const preset = divinationStore.presets.find((p) => p.id === id);\n            if (!preset)\n                return;\n            if (confirm(`${preset.name}`)) {\n                divinationStore.deletePreset(id);\n                toast.info('');\n            }\n        }\n        function handleQuickSave() {\n            const activeId = divinationStore.activePresetId;\n            if (activeId) {\n                const preset = divinationStore.presets.find((p) => p.id === activeId);\n                if (preset) {\n                    divinationStore.saveCurrentToPreset(preset.name);\n                    toast.success(`${preset.name}`);\n                    return;\n                }\n            }\n            // \n            openSaveDialog();\n        }\n        function openSaveDialog() {\n            uiStore.openPresetSaveDialog({\n                presetType: 'divination', // \n                summaryItems: [],\n                initialName: '',\n                checkDuplicate: (name) => divinationStore.presets.some((p) => p.name === name),\n            }, {\n                onSave: (name) => {\n                    divinationStore.saveCurrentToPreset(name);\n                    toast.success(`${name}`);\n                },\n            });\n        }\n        // \n        function handleExportCurrentPreset() {\n            const activeId = divinationStore.activePresetId;\n            if (!activeId) {\n                toast.warning('');\n                return;\n            }\n            const preset = divinationStore.presets.find((p) => p.id === activeId);\n            if (!preset)\n                return;\n            const data = {\n                type: 'acu_divination_presets',\n                version: '1.0',\n                timestamp: new Date().toISOString(),\n                presets: [preset], // \n            };\n            downloadJson(data, `acu-preset-${preset.name}-${Date.now()}.json`);\n            toast.success(`${preset.name}`);\n        }\n        // \n        function handleExportPresets() {\n            const data = {\n                type: 'acu_divination_presets',\n                version: '1.0',\n                timestamp: new Date().toISOString(),\n                presets: divinationStore.presets,\n            };\n            downloadJson(data, `acu-divination-backup-${Date.now()}.json`);\n            toast.success('');\n        }\n        function downloadJson(data, filename) {\n            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = filename;\n            a.click();\n            URL.revokeObjectURL(url);\n        }\n        // \n        function triggerImport() {\n            fileInputRef.value?.click();\n        }\n        // \n        function handleImportPresets(event) {\n            const file = event.target.files?.[0];\n            if (!file)\n                return;\n            const reader = new FileReader();\n            reader.onload = e => {\n                try {\n                    const content = e.target?.result;\n                    const data = JSON.parse(content);\n                    if (data.type === 'acu_divination_presets' && Array.isArray(data.presets)) {\n                        let importedCount = 0;\n                        data.presets.forEach((importedPreset) => {\n                            //  ID  ID\n                            const existing = divinationStore.presets.find((p) => p.id === importedPreset.id);\n                            if (existing) {\n                                //  ID \n                                //  ID \n                                const index = divinationStore.presets.findIndex((p) => p.id === importedPreset.id);\n                                divinationStore.presets[index] = importedPreset;\n                            }\n                            else {\n                                divinationStore.presets.push(importedPreset);\n                            }\n                            importedCount++;\n                        });\n                        // \n                        divinationStore.saveConfig();\n                        toast.success(` ${importedCount} `);\n                    }\n                    else {\n                        toast.error('');\n                    }\n                }\n                catch (err) {\n                    console.error(':', err);\n                    toast.error('');\n                }\n            };\n            reader.readAsText(file);\n            //  input\n            event.target.value = '';\n        }\n        // \n        const toggleCollapse = (id) => {\n            collapsedDimensions.value[id] = !collapsedDimensions.value[id];\n        };\n        // \n        function collapseAll() {\n            divinationStore.config.dimensions.forEach((dim) => {\n                collapsedDimensions.value[dim.id] = true;\n            });\n        }\n        // \n        function expandAll() {\n            divinationStore.config.dimensions.forEach((dim) => {\n                collapsedDimensions.value[dim.id] = false;\n            });\n        }\n        // \n        function toggleMigrateMode() {\n            isMigrating.value = !isMigrating.value;\n            if (isMigrating.value) {\n                selectedDimensionIds.value.clear();\n                toast.info('');\n            }\n            else {\n                selectedDimensionIds.value.clear();\n            }\n        }\n        // \n        function toggleDimensionSelection(dimId) {\n            if (selectedDimensionIds.value.has(dimId)) {\n                selectedDimensionIds.value.delete(dimId);\n            }\n            else {\n                selectedDimensionIds.value.add(dimId);\n            }\n            // \n            selectedDimensionIds.value = new Set(selectedDimensionIds.value);\n        }\n        // \n        function handleMigrateTo(targetPresetId) {\n            if (selectedDimensionIds.value.size === 0) {\n                toast.warning('');\n                return;\n            }\n            const targetPreset = divinationStore.presets.find((p) => p.id === targetPresetId);\n            if (!targetPreset)\n                return;\n            // \n            const selectedDims = divinationStore.config.dimensions.filter((d) => selectedDimensionIds.value.has(d.id));\n            divinationStore.migrateDimensionsToPreset(selectedDims, targetPresetId);\n            toast.success(` ${selectedDims.length} ${targetPreset.name}`);\n            // \n            isMigrating.value = false;\n            selectedDimensionIds.value.clear();\n        }\n        // \n        const handleAddDimension = () => {\n            const newDim = {\n                id: uuidv4(),\n                name: '',\n                enabled: true,\n                tiers: [\n                    {\n                        id: uuidv4(),\n                        name: '',\n                        weight: 50,\n                        prompt: '',\n                    },\n                ],\n            };\n            divinationStore.addDimension(newDim);\n            // \n            collapsedDimensions.value[newDim.id] = false;\n        };\n        // \n        const handleRemoveDimension = (index) => {\n            if (confirm('')) {\n                divinationStore.removeDimension(index);\n            }\n        };\n        // \n        const addTier = (dimIndex) => {\n            const newTier = {\n                id: uuidv4(),\n                name: '',\n                weight: 10,\n                prompt: '',\n                color: '#808080',\n            };\n            divinationStore.config.dimensions[dimIndex].tiers.push(newTier);\n        };\n        // \n        const removeTier = (dimIndex, tierIndex) => {\n            divinationStore.config.dimensions[dimIndex].tiers.splice(tierIndex, 1);\n        };\n        //  ()\n        const insertTemplatePlaceholder = (placeholder) => {\n            const current = divinationStore.config.customTemplate || '';\n            divinationStore.config.customTemplate = current + placeholder;\n            // \n            const textarea = templateInputRef.value;\n            if (textarea) {\n                setTimeout(() => {\n                    textarea.focus();\n                    textarea.scrollTop = textarea.scrollHeight;\n                    // \n                    const len = divinationStore.config.customTemplate.length;\n                    textarea.setSelectionRange(len, len);\n                }, 0);\n            }\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createVNode(PresetManagerHeader, {\n                    presets: _unref(divinationStore).presets,\n                    \"active-preset-id\": _unref(divinationStore).activePresetId,\n                    \"show-toolbar\": true,\n                    \"is-migrating\": isMigrating.value,\n                    \"selected-count\": selectedDimensionIds.value.size,\n                    title: \"\",\n                    hint: \"\",\n                    onSelect: handleSelectPreset,\n                    onRestoreDefault: handleRestoreDefault,\n                    onDelete: handleDeletePreset,\n                    onSave: handleQuickSave,\n                    onSaveAs: openSaveDialog,\n                    onCollapseAll: collapseAll,\n                    onExpandAll: expandAll,\n                    onImport: triggerImport,\n                    onExportCurrent: handleExportCurrentPreset,\n                    onExportAll: handleExportPresets,\n                    onToggleMigrate: toggleMigrateMode,\n                    onMigrateTo: handleMigrateTo\n                }, null, 8 /* PROPS */, [\"presets\", \"active-preset-id\", \"is-migrating\", \"selected-count\"]),\n                _createCommentVNode(\"  \"),\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(divinationStore).config.dimensions, (dim, dimIndex) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                        key: dim.id,\n                        class: _normalizeClass([\"acu-settings-section dimension-container\", {\n                                'is-collapsed': collapsedDimensions.value[dim.id],\n                                'is-selected': isMigrating.value && selectedDimensionIds.value.has(dim.id),\n                            }]),\n                        onClick: ($event) => (isMigrating.value ? toggleDimensionSelection(dim.id) : null)\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", {\n                            class: \"acu-settings-title dimension-header\",\n                            onClick: ($event) => (!isMigrating.value && toggleCollapse(dim.id))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _createElementVNode(\"i\", {\n                                    class: _normalizeClass([\"fas fa-chevron-right collapse-icon\", { 'is-expanded': !collapsedDimensions.value[dim.id] }])\n                                }, null, 2 /* CLASS */),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": ($event) => ((dim.name) = $event),\n                                    class: \"acu-input-minimal dimension-name-input\",\n                                    placeholder: \"\",\n                                    onClick: _cache[0] || (_cache[0] = _withModifiers(() => { }, [\"stop\"]))\n                                }, null, 8 /* PROPS */, _hoisted_5), [\n                                    [_vModelText, dim.name]\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_6, [\n                                _createElementVNode(\"label\", {\n                                    class: \"acu-switch\",\n                                    onClick: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"]))\n                                }, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": ($event) => ((dim.enabled) = $event),\n                                        type: \"checkbox\"\n                                    }, null, 8 /* PROPS */, _hoisted_7), [\n                                        [_vModelCheckbox, dim.enabled]\n                                    ]),\n                                    _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-icon-btn danger\",\n                                    disabled: dim.id === 'luck',\n                                    title: dim.id === 'luck' ? '' : '',\n                                    onClick: _withModifiers(($event) => (handleRemoveDimension(dimIndex)), [\"stop\"])\n                                }, [...(_cache[7] || (_cache[7] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */)\n                                    ]))], 8 /* PROPS */, _hoisted_8)\n                            ])\n                        ], 8 /* PROPS */, _hoisted_3),\n                        _createCommentVNode(\"  () \"),\n                        _withDirectives(_createElementVNode(\"div\", _hoisted_9, [\n                            _createElementVNode(\"div\", _hoisted_10, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(dim.tiers, (tier, tierIndex) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: tier.id,\n                                        class: \"tier-item\"\n                                    }, [\n                                        _createCommentVNode(\" :  \"),\n                                        _createElementVNode(\"div\", _hoisted_11, [\n                                            _createElementVNode(\"div\", _hoisted_12, [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": ($event) => ((tier.name) = $event),\n                                                    class: \"acu-input-minimal tier-name-input\",\n                                                    placeholder: \"\"\n                                                }, null, 8 /* PROPS */, _hoisted_13), [\n                                                    [_vModelText, tier.name]\n                                                ]),\n                                                _createCommentVNode(\"  () \"),\n                                                (dim.id === 'luck')\n                                                    ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n                                                        key: 0,\n                                                        \"onUpdate:modelValue\": ($event) => ((tier.color) = $event),\n                                                        type: \"color\",\n                                                        class: \"acu-color-picker-mini\",\n                                                        title: \"\"\n                                                    }, null, 8 /* PROPS */, _hoisted_14)), [\n                                                        [_vModelText, tier.color]\n                                                    ])\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ]),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-icon-btn small danger\",\n                                                title: \"\",\n                                                onClick: ($event) => (removeTier(dimIndex, tierIndex))\n                                            }, [...(_cache[8] || (_cache[8] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_15)\n                                        ]),\n                                        _createCommentVNode(\" :  \"),\n                                        _createElementVNode(\"div\", _hoisted_16, [\n                                            _cache[9] || (_cache[9] = _createElementVNode(\"span\", { class: \"label\" }, \"\", -1 /* CACHED */)),\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": ($event) => ((tier.weight) = $event),\n                                                type: \"range\",\n                                                min: \"0\",\n                                                max: \"100\",\n                                                step: \"1\",\n                                                class: \"acu-range-input\"\n                                            }, null, 8 /* PROPS */, _hoisted_17), [\n                                                [\n                                                    _vModelText,\n                                                    tier.weight,\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_18, _toDisplayString(tier.weight), 1 /* TEXT */)\n                                        ]),\n                                        _createCommentVNode(\" :  \"),\n                                        _createElementVNode(\"div\", _hoisted_19, [\n                                            _withDirectives(_createElementVNode(\"textarea\", {\n                                                \"onUpdate:modelValue\": ($event) => ((tier.prompt) = $event),\n                                                class: \"acu-textarea-scrollable compact\",\n                                                placeholder: \"...\",\n                                                rows: \"2\"\n                                            }, null, 8 /* PROPS */, _hoisted_20), [\n                                                [_vModelText, tier.prompt]\n                                            ])\n                                        ])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-btn-dashed full-width\",\n                                onClick: ($event) => (addTier(dimIndex))\n                            }, [...(_cache[10] || (_cache[10] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_21)\n                        ], 512 /* NEED_PATCH */), [\n                            [_vShow, !collapsedDimensions.value[dim.id]]\n                        ])\n                    ], 10 /* CLASS, PROPS */, _hoisted_2));\n                }), 128 /* KEYED_FRAGMENT */)),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"button\", {\n                    class: \"acu-btn-dashed full-width add-dimension-btn\",\n                    onClick: handleAddDimension\n                }, [...(_cache[11] || (_cache[11] = [\n                        _createElementVNode(\"i\", { class: \"fas fa-layer-group\" }, null, -1 /* CACHED */),\n                        _createTextVNode(\"  \", -1 /* CACHED */)\n                    ]))]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_22, [\n                    _cache[19] || (_cache[19] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                        _createElementVNode(\"div\", { class: \"header-left\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-file-alt\" }),\n                            _createTextVNode(\"  \")\n                        ])\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_23, [\n                        _createCommentVNode(\" 1.  \"),\n                        _createElementVNode(\"div\", _hoisted_24, [\n                            _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"hint\" }, \":\", -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-wildcard-btn\",\n                                onClick: _cache[2] || (_cache[2] = ($event) => (insertTemplatePlaceholder('{{luck}}')))\n                            }, [...(_cache[12] || (_cache[12] = [\n                                    _createElementVNode(\"code\", null, _toDisplayString('\\{\\{luck\\}\\}'), -1 /* CACHED */)\n                                ]))]),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-wildcard-btn\",\n                                onClick: _cache[3] || (_cache[3] = ($event) => (insertTemplatePlaceholder('{{words}}')))\n                            }, [...(_cache[13] || (_cache[13] = [\n                                    _createElementVNode(\"code\", null, _toDisplayString('\\{\\{words\\}\\}'), -1 /* CACHED */)\n                                ]))]),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-wildcard-btn\",\n                                onClick: _cache[4] || (_cache[4] = ($event) => (insertTemplatePlaceholder('{{dimensions}}')))\n                            }, [...(_cache[14] || (_cache[14] = [\n                                    _createElementVNode(\"code\", null, _toDisplayString('\\{\\{dimensions\\}\\}'), -1 /* CACHED */)\n                                ]))])\n                        ]),\n                        _createCommentVNode(\" 2.  \"),\n                        _createElementVNode(\"div\", _hoisted_25, [\n                            _withDirectives(_createElementVNode(\"textarea\", {\n                                ref_key: \"templateInputRef\",\n                                ref: templateInputRef,\n                                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(divinationStore).config.customTemplate) = $event)),\n                                class: \"acu-edit-textarea template-textarea\",\n                                placeholder: \"...\",\n                                rows: \"6\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, _unref(divinationStore).config.customTemplate]\n                            ])\n                        ]),\n                        _createCommentVNode(\" 3.  \"),\n                        _createElementVNode(\"div\", _hoisted_26, [\n                            _createElementVNode(\"div\", _hoisted_27, [\n                                _createElementVNode(\"div\", {\n                                    class: \"acu-help-header\",\n                                    onClick: toggleHelp\n                                }, [\n                                    _cache[16] || (_cache[16] = _createElementVNode(\"i\", { class: \"fas fa-lightbulb\" }, null, -1 /* CACHED */)),\n                                    _cache[17] || (_cache[17] = _createElementVNode(\"strong\", null, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass([\"fas\", showHelp.value ? 'fa-chevron-up' : 'fa-chevron-down'])\n                                    }, null, 2 /* CLASS */)\n                                ]),\n                                _withDirectives(_createElementVNode(\"ul\", null, [...(_cache[18] || (_cache[18] = [\n                                        _createElementVNode(\"li\", null, [\n                                            _createElementVNode(\"code\", null, _toDisplayString('\\{\\{luck\\}\\}')),\n                                            _createTextVNode(\" - ... \")\n                                        ], -1 /* CACHED */),\n                                        _createElementVNode(\"li\", null, [\n                                            _createElementVNode(\"code\", null, _toDisplayString('\\{\\{words\\}\\}')),\n                                            _createTextVNode(\" -  \")\n                                        ], -1 /* CACHED */),\n                                        _createElementVNode(\"li\", null, [\n                                            _createElementVNode(\"code\", null, _toDisplayString('\\{\\{dimensions\\}\\}')),\n                                            _createTextVNode(\" -  \")\n                                        ], -1 /* CACHED */)\n                                    ]))], 512 /* NEED_PATCH */), [\n                                    [_vShow, showHelp.value]\n                                ])\n                            ])\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"input\", {\n                    ref_key: \"fileInputRef\",\n                    ref: fileInputRef,\n                    type: \"file\",\n                    accept: \".json\",\n                    style: { \"display\": \"none\" },\n                    onChange: handleImportPresets\n                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DimensionManagerPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DimensionManagerPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./DimensionManagerPanel.vue?vue&type=style&index=0&id=2a4c34ca&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2a4c34ca\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"mystic-card-back\" };\nconst _hoisted_2 = [\"src\"];\nimport { computed } from 'vue';\nconst DEFAULT_IMAGE = 'https://i.postimg.cc/rmY9D1fL/wei-xin-tu-pian-20260121220508-79-297.jpg';\n//  URL\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CardBack',\n    props: {\n        imageUrl: { default: '' }\n    },\n    emits: [\"load\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        // \n        const displayUrl = computed(() => {\n            return props.imageUrl && props.imageUrl.trim() !== '' ? props.imageUrl : DEFAULT_IMAGE;\n        });\n        function handleImageLoad(e) {\n            const img = e.target;\n            if (img.naturalWidth && img.naturalHeight) {\n                const ratio = img.naturalWidth / img.naturalHeight;\n                emit('load', ratio);\n            }\n        }\n        function handleImageError(e) {\n            // \n            const img = e.target;\n            if (img.src !== DEFAULT_IMAGE) {\n                img.src = DEFAULT_IMAGE;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"img\", {\n                    src: displayUrl.value,\n                    alt: \"Mystic Tarot Card Back\",\n                    class: \"mystic-card-back__image\",\n                    onLoad: handleImageLoad,\n                    onError: handleImageError\n                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_2),\n                _createCommentVNode(\"  \"),\n                _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"mystic-card-back__sheen\" }, null, -1 /* CACHED */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CardBack.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CardBack.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"mystic-card-front\" };\nconst _hoisted_2 = { class: \"mystic-card-front__content\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"mystic-card-front__loading\"\n};\nconst _hoisted_4 = { class: \"mystic-card-front__title\" };\nconst _hoisted_5 = { class: \"mystic-card-front__luck-name\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"mystic-card-front__dimensions\"\n};\nconst _hoisted_7 = {\n    key: 1,\n    class: \"mystic-card-front__dimensions\"\n};\nconst _hoisted_8 = { class: \"mystic-card-front__message-box\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"mystic-card-front__word-list\"\n};\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CardFront',\n    props: {\n        luckName: {},\n        luckColor: { default: '#ffd700' },\n        dimensions: { default: () => [] },\n        words: {},\n        loading: { type: Boolean, default: false },\n        peepMode: { type: Boolean, default: false }\n    },\n    setup(__props) {\n        const props = __props;\n        const displayLuckName = computed(() => {\n            if (!props.peepMode)\n                return props.luckName;\n            return '???';\n        });\n        // \n        function maskText(text) {\n            if (!text)\n                return '';\n            // 60% \n            return text\n                .split('')\n                .map(char => {\n                // \n                if (/[\\p{P}\\s]/u.test(char))\n                    return char;\n                return Math.random() < 0.6 ? '...' : char;\n            })\n                .join('');\n        }\n        // \n        const displayWords = computed(() => {\n            if (!props.peepMode)\n                return props.words;\n            return props.words.map(maskText);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" / \"),\n                _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"mystic-card-front__texture\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\"  \"),\n                _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"mystic-card-front__border-outer\" }, null, -1 /* CACHED */)),\n                _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"mystic-card-front__border-inner\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Art Nouveau  \"),\n                _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"mystic-card-front__corner mystic-card-front__corner--tl\" }, null, -1 /* CACHED */)),\n                _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"mystic-card-front__corner mystic-card-front__corner--tr\" }, null, -1 /* CACHED */)),\n                _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"mystic-card-front__corner mystic-card-front__corner--bl\" }, null, -1 /* CACHED */)),\n                _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"mystic-card-front__corner mystic-card-front__corner--br\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\"  \"),\n                _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"mystic-card-front__glow\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\"  \"),\n                    _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"mystic-card-front__top-icon\" }, [\n                        _createElementVNode(\"svg\", {\n                            width: \"40\",\n                            height: \"40\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"currentColor\"\n                        }, [\n                            _createElementVNode(\"path\", { d: \"M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z\" })\n                        ])\n                    ], -1 /* CACHED */)),\n                    _createCommentVNode(\"  \"),\n                    (__props.loading)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"div\", { class: \"mystic-card-front__spinner\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"p\", { class: \"mystic-card-front__loading-text\" }, \"...\", -1 /* CACHED */)\n                            ]))]))\n                        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                            _createCommentVNode(\"  \"),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _createElementVNode(\"h2\", _hoisted_5, _toDisplayString(displayLuckName.value), 1 /* TEXT */),\n                                _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"mystic-card-front__divider\" }, null, -1 /* CACHED */))\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            (!__props.peepMode && __props.dimensions.length > 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.dimensions, (dimValue, idx) => {\n                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                            key: idx,\n                                            class: \"mystic-card-front__dimension-tag\"\n                                        }, _toDisplayString(dimValue), 1 /* TEXT */));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]))\n                                : (__props.peepMode && __props.dimensions.length > 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.dimensions, (dimValue, idx) => {\n                                            return (_openBlock(), _createElementBlock(\"span\", {\n                                                key: idx,\n                                                class: \"mystic-card-front__dimension-tag\"\n                                            }, \" ??? \"));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                (displayWords.value.length > 0)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayWords.value, (word, idx) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: idx,\n                                                class: \"mystic-card-front__word-item\"\n                                            }, _toDisplayString(word), 1 /* TEXT */));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ], 64 /* STABLE_FRAGMENT */)),\n                    _createCommentVNode(\"  \"),\n                    _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"mystic-card-front__bottom-icon\" }, [\n                        _createElementVNode(\"svg\", {\n                            width: \"24\",\n                            height: \"24\",\n                            viewBox: \"0 0 24 24\",\n                            fill: \"currentColor\"\n                        }, [\n                            _createElementVNode(\"path\", { d: \"M12 2L14.5 9.5L22 12L14.5 14.5L12 22L9.5 14.5L2 12L9.5 9.5L12 2Z\" })\n                        ])\n                    ], -1 /* CACHED */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CardFront.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CardFront.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"card-back\" };\nconst _hoisted_2 = [\"src\"];\nimport { computed } from 'vue';\nconst DEFAULT_IMAGE = 'https://i.postimg.cc/j2MPbGv3/IMG-1590.jpg';\n//  URL\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CardBack',\n    props: {\n        imageUrl: { default: '' }\n    },\n    emits: [\"load\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const displayUrl = computed(() => {\n            return props.imageUrl && props.imageUrl.trim() !== '' ? props.imageUrl : DEFAULT_IMAGE;\n        });\n        function handleImageLoad(e) {\n            const img = e.target;\n            if (img.naturalWidth && img.naturalHeight) {\n                const ratio = img.naturalWidth / img.naturalHeight;\n                emit('load', ratio);\n            }\n        }\n        function handleImageError(e) {\n            // \n            const img = e.target;\n            if (img.src !== DEFAULT_IMAGE) {\n                img.src = DEFAULT_IMAGE;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"img\", {\n                    src: displayUrl.value,\n                    alt: \"Tarot Card Back\",\n                    class: \"card-back__image\",\n                    onLoad: handleImageLoad,\n                    onError: handleImageError\n                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_2),\n                _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"card-back__overlay\" }, null, -1 /* CACHED */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CardBack.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CardBack.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n    viewBox: \"0 0 100 100\",\n    fill: \"currentColor\"\n};\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CornerOrnament',\n    setup(__props) {\n        //  SVG \n        //  CSS transform \n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, [...(_cache[0] || (_cache[0] = [\n                    _createElementVNode(\"path\", {\n                        d: \"M0,0 L40,0 C20,0 10,10 10,30 L10,0 Z\",\n                        opacity: \"0.5\"\n                    }, null, -1 /* CACHED */),\n                    _createElementVNode(\"path\", { d: \"M5,5 L95,5 L95,20 C70,20 20,70 20,95 L5,95 Z\" }, null, -1 /* CACHED */),\n                    _createElementVNode(\"circle\", {\n                        cx: \"15\",\n                        cy: \"15\",\n                        r: \"3\",\n                        fill: \"#8B5E3C\"\n                    }, null, -1 /* CACHED */)\n                ]))]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CornerOrnament.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CornerOrnament.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, renderList as _renderList, Fragment as _Fragment, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"card-front\" };\nconst _hoisted_2 = { class: \"card-front__content\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"card-front__dimensions\"\n};\nconst _hoisted_4 = {\n    key: 1,\n    class: \"card-front__dimensions\"\n};\nconst _hoisted_5 = { class: \"card-front__keywords\" };\nconst _hoisted_6 = { class: \"card-front__keyword-text\" };\nimport CornerOrnament from './CornerOrnament.vue';\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CardFront',\n    props: {\n        luckName: {},\n        luckColor: { default: '#4A3728' },\n        dimensions: { default: () => [] },\n        words: {},\n        peepMode: { type: Boolean, default: false }\n    },\n    setup(__props) {\n        const props = __props;\n        const displayLuckName = computed(() => {\n            if (!props.peepMode)\n                return props.luckName;\n            return '???';\n        });\n        // \n        function maskText(text) {\n            if (!text)\n                return '';\n            // 60% \n            return text\n                .split('')\n                .map(char => {\n                // \n                if (/[\\p{P}\\s]/u.test(char))\n                    return char;\n                return Math.random() < 0.6 ? '...' : char;\n            })\n                .join('');\n        }\n        // \n        const displayWords = computed(() => {\n            if (!props.peepMode)\n                return props.words;\n            return props.words.map(maskText);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"card-front__texture\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\"  \"),\n                _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"card-front__border-outer\" }, null, -1 /* CACHED */)),\n                _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"card-front__border-inner\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\"  \"),\n                _createVNode(CornerOrnament, { class: \"card-front__corner card-front__corner--tl\" }),\n                _createVNode(CornerOrnament, { class: \"card-front__corner card-front__corner--tr\" }),\n                _createVNode(CornerOrnament, { class: \"card-front__corner card-front__corner--bl\" }),\n                _createVNode(CornerOrnament, { class: \"card-front__corner card-front__corner--br\" }),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\"  \"),\n                    _cache[0] || (_cache[0] = _createStaticVNode(\"<div class=\\\"card-front__top-icon\\\"><svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"32\\\" height=\\\"32\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"1.5\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"><path d=\\\"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z\\\"></path><path d=\\\"M20 3v4\\\"></path><path d=\\\"M22 5h-4\\\"></path><path d=\\\"M4 17v2\\\"></path><path d=\\\"M5 18H3\\\"></path></svg></div>\", 1)),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"h2\", {\n                        class: \"card-front__luck-name\",\n                        style: _normalizeStyle({ color: __props.luckColor })\n                    }, _toDisplayString(displayLuckName.value), 5 /* TEXT, STYLE */),\n                    _createCommentVNode(\"  \"),\n                    (!__props.peepMode && __props.dimensions.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.dimensions, (dimValue, idx) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: idx,\n                                    class: \"card-front__dimension-item\"\n                                }, _toDisplayString(dimValue), 1 /* TEXT */));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]))\n                        : (__props.peepMode && __props.dimensions.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.dimensions, (dimValue, idx) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: idx,\n                                        class: \"card-front__dimension-item\"\n                                    }, \"???\"));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayWords.value, (word, idx) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: idx,\n                                class: \"card-front__keyword\"\n                            }, [\n                                _createElementVNode(\"span\", _hoisted_6, _toDisplayString(word), 1 /* TEXT */)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * \n * \n */\n\nimport type { CardTheme } from './types';\n\n// \nimport * as mystic from './mystic';\nimport * as wafuku from './wafuku';\n\n/**  */\nconst wafukuTheme: CardTheme = {\n  id: 'wafuku',\n  name: '',\n  description: '',\n  defaultBackImage: 'https://i.postimg.cc/j2MPbGv3/IMG-1590.jpg',\n  CardFront: wafuku.CardFront,\n  CardBack: wafuku.CardBack,\n};\n\n/**  */\nconst mysticTheme: CardTheme = {\n  id: 'mystic',\n  name: '',\n  description: '',\n  defaultBackImage: 'https://i.postimg.cc/rmY9D1fL/wei-xin-tu-pian-20260121220508-79-297.jpg',\n  CardFront: mystic.CardFront,\n  CardBack: mystic.CardBack,\n};\n\n/**  */\nexport const CARD_THEMES: Record<string, CardTheme> = {\n  wafuku: wafukuTheme,\n  mystic: mysticTheme,\n};\n\n/**  ID */\nexport const DEFAULT_THEME_ID = 'wafuku';\n\n/**\n * \n */\nexport function getTheme(id: string): CardTheme {\n  return CARD_THEMES[id] || CARD_THEMES[DEFAULT_THEME_ID];\n}\n\n/**\n * \n */\nexport function getAllThemes(): CardTheme[] {\n  return Object.values(CARD_THEMES);\n}\n\n// \nexport type { CardBackProps, CardFrontProps, CardTheme } from './types';\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, normalizeClass as _normalizeClass, vModelText as _vModelText, withModifiers as _withModifiers, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"acu-settings-section\" };\nconst _hoisted_2 = { class: \"acu-settings-group\" };\nconst _hoisted_3 = { class: \"acu-settings-group\" };\nconst _hoisted_4 = { class: \"acu-settings-row\" };\nconst _hoisted_5 = { class: \"acu-settings-control\" };\nconst _hoisted_6 = [\"value\"];\nconst _hoisted_7 = { class: \"acu-settings-row\" };\nconst _hoisted_8 = { class: \"acu-settings-control\" };\nconst _hoisted_9 = { class: \"acu-settings-row\" };\nconst _hoisted_10 = { class: \"acu-settings-control\" };\nconst _hoisted_11 = { class: \"acu-settings-row\" };\nconst _hoisted_12 = { class: \"acu-settings-control\" };\nconst _hoisted_13 = { class: \"acu-image-upload-container\" };\nconst _hoisted_14 = { class: \"acu-settings-group\" };\nconst _hoisted_15 = { class: \"acu-settings-row\" };\nconst _hoisted_16 = { class: \"acu-settings-control\" };\nconst _hoisted_17 = { class: \"acu-settings-row\" };\nconst _hoisted_18 = { class: \"acu-settings-control\" };\nconst _hoisted_19 = { class: \"acu-settings-row\" };\nconst _hoisted_20 = { class: \"acu-settings-label\" };\nconst _hoisted_21 = { class: \"hint\" };\nconst _hoisted_22 = { class: \"acu-settings-control acu-mode-control\" };\nconst _hoisted_23 = {\n    key: 0,\n    class: \"acu-range-wrapper\"\n};\nconst _hoisted_24 = { class: \"acu-range-value\" };\nconst _hoisted_25 = {\n    key: 0,\n    class: \"acu-settings-row\"\n};\nconst _hoisted_26 = { class: \"acu-settings-label\" };\nconst _hoisted_27 = { class: \"hint\" };\nconst _hoisted_28 = { class: \"acu-settings-control\" };\nconst _hoisted_29 = { class: \"acu-settings-control\" };\nconst _hoisted_30 = {\n    key: 1,\n    style: { \"padding\": \"0 16px 16px 16px\" }\n};\nimport { storeToRefs } from 'pinia';\nimport { computed, inject, ref } from 'vue';\nimport { useToast } from '../../../composables/useToast';\nimport { useDivinationStore } from '../../../stores/useDivinationStore';\nimport { getTableData } from '../../../utils';\nimport { getAllThemes } from '../../dialogs/divination/themes';\nimport SwitchList from '../../ui/SwitchList.vue';\n// \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DivinationPanel',\n    setup(__props) {\n        const nav = inject('settingsNavigation');\n        // Store\n        const store = useDivinationStore();\n        const { config } = storeToRefs(store);\n        const { show } = useToast();\n        // \n        const showTableSyncList = ref(false);\n        const toggleTableSyncList = () => {\n            showTableSyncList.value = !showTableSyncList.value;\n        };\n        // \"\"\n        const randomTableItems = computed(() => {\n            const tables = getTableData();\n            if (!tables)\n                return [];\n            const items = [];\n            for (const key in tables) {\n                const table = tables[key];\n                if (table.name && (table.name.includes('Random') || table.name.includes(''))) {\n                    items.push({\n                        key: table.id || key, //  ID\n                        label: table.name,\n                        //  true ()\n                        //  SwitchList \n                    });\n                }\n            }\n            return items;\n        });\n        // \n        // SwitchList v-model  string[] ( ID )\n        // config.tableSyncConfig  Record<string, boolean>\n        const enabledSyncTables = computed({\n            get() {\n                const selected = [];\n                // \n                randomTableItems.value.forEach((item) => {\n                    const tableId = item.key;\n                    // :  true\n                    const isEnabled = config.value.tableSyncConfig?.[tableId] !== false;\n                    if (isEnabled) {\n                        selected.push(tableId);\n                    }\n                });\n                return selected;\n            },\n            set(newSelectedIds) {\n                //  ()\n                if (!config.value.tableSyncConfig) {\n                    config.value.tableSyncConfig = {};\n                }\n                // \n                randomTableItems.value.forEach((item) => {\n                    const tableId = item.key;\n                    const shouldEnable = newSelectedIds.includes(tableId);\n                    //  false  ( true)\n                    //  true/false\n                    //  true\n                    if (shouldEnable) {\n                        //  true ()\n                        if (config.value.tableSyncConfig[tableId] !== undefined) {\n                            delete config.value.tableSyncConfig[tableId];\n                        }\n                    }\n                    else {\n                        //  false false\n                        config.value.tableSyncConfig[tableId] = false;\n                    }\n                });\n            },\n        });\n        // \n        const themeList = computed(() => getAllThemes());\n        // \n        const modeHintText = computed(() => {\n            switch (config.value.wordDrawMode) {\n                case 'perItem':\n                    return '';\n                case 'custom':\n                    return ' limit ';\n                case 'mixed':\n                    return '';\n                default:\n                    return '';\n            }\n        });\n        // \n        const fileInput = ref(null);\n        const triggerUpload = () => {\n            fileInput.value?.click();\n        };\n        const handleFileUpload = async (event) => {\n            const input = event.target;\n            if (input.files && input.files[0]) {\n                try {\n                    await store.uploadCardBack(input.files[0]);\n                    show('', 'success');\n                }\n                catch (e) {\n                    show('', 'error');\n                }\n                finally {\n                    //  input\n                    input.value = '';\n                }\n            }\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[27] || (_cache[27] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                    _createElementVNode(\"i\", { class: \"fas fa-star\" }),\n                    _createTextVNode(\"  \")\n                ], -1 /* CACHED */)),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", {\n                        class: \"acu-settings-row acu-nav-row\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (_unref(nav).navigateTo('divinationDimensions')))\n                    }, [...(_cache[13] || (_cache[13] = [\n                            _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                _createTextVNode(\"  \"),\n                                _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                            ], -1 /* CACHED */),\n                            _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                            ], -1 /* CACHED */)\n                        ]))])\n                ]),\n                _createCommentVNode(\"  \"),\n                _cache[28] || (_cache[28] = _createElementVNode(\"div\", {\n                    class: \"acu-settings-title\",\n                    style: { \"margin-top\": \"16px\" }\n                }, [\n                    _createElementVNode(\"i\", { class: \"fas fa-palette\" }),\n                    _createTextVNode(\"  \")\n                ], -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                            _createTextVNode(\"  \"),\n                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _withDirectives(_createElementVNode(\"select\", {\n                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(config).themeId) = $event)),\n                                class: \"acu-select\"\n                            }, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(themeList.value, (theme) => {\n                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                        key: theme.id,\n                                        value: theme.id\n                                    }, _toDisplayString(theme.name), 9 /* TEXT, PROPS */, _hoisted_6));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ], 512 /* NEED_PATCH */), [\n                                [_vModelSelect, _unref(config).themeId]\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                            _createTextVNode(\"  \"),\n                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_8, [\n                            _withDirectives(_createElementVNode(\"select\", {\n                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(config).flipMode) = $event)),\n                                class: \"acu-select\"\n                            }, [...(_cache[15] || (_cache[15] = [\n                                    _createElementVNode(\"option\", { value: \"auto\" }, \"\", -1 /* CACHED */),\n                                    _createElementVNode(\"option\", { value: \"manual\" }, \"\", -1 /* CACHED */),\n                                    _createElementVNode(\"option\", { value: \"skip\" }, \"\", -1 /* CACHED */)\n                                ]))], 512 /* NEED_PATCH */), [\n                                [_vModelSelect, _unref(config).flipMode]\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_9, [\n                        _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                            _createTextVNode(\"  \"),\n                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_10, [\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"acu-switch\", { active: _unref(config).peepMode }]),\n                                onClick: _cache[3] || (_cache[3] = ($event) => (_unref(config).peepMode = !_unref(config).peepMode))\n                            }, null, 2 /* CLASS */)\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_11, [\n                        _cache[19] || (_cache[19] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                            _createTextVNode(\"  \"),\n                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_12, [\n                            _createElementVNode(\"div\", _hoisted_13, [\n                                _createCommentVNode(\" URL  \"),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(config).cardBackImage) = $event)),\n                                    type: \"text\",\n                                    class: \"acu-settings-input\",\n                                    placeholder: \" URL\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelText, _unref(config).cardBackImage]\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-tool-btn\",\n                                    title: \"\",\n                                    onClick: triggerUpload\n                                }, [...(_cache[18] || (_cache[18] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-upload\" }, null, -1 /* CACHED */)\n                                    ]))]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"input\", {\n                                    ref_key: \"fileInput\",\n                                    ref: fileInput,\n                                    type: \"file\",\n                                    accept: \"image/*\",\n                                    class: \"acu-hidden-input\",\n                                    onChange: handleFileUpload\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)\n                            ])\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _cache[29] || (_cache[29] = _createElementVNode(\"div\", {\n                    class: \"acu-settings-title\",\n                    style: { \"margin-top\": \"16px\" }\n                }, [\n                    _createElementVNode(\"i\", { class: \"fas fa-font\" }),\n                    _createTextVNode(\"  \")\n                ], -1 /* CACHED */)),\n                _createElementVNode(\"div\", _hoisted_14, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_15, [\n                        _cache[20] || (_cache[20] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                            _createTextVNode(\"  \"),\n                            _createElementVNode(\"span\", { class: \"hint\" }, \"\\\"\\\"\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_16, [\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"acu-switch\", { active: _unref(config).enableTableWords }]),\n                                onClick: _cache[5] || (_cache[5] = ($event) => (_unref(config).enableTableWords = !_unref(config).enableTableWords))\n                            }, null, 2 /* CLASS */)\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_17, [\n                        _cache[21] || (_cache[21] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                            _createTextVNode(\"  \"),\n                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_18, [\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"acu-switch\", { active: _unref(config).enableWordPool }]),\n                                onClick: _cache[6] || (_cache[6] = ($event) => (_unref(config).enableWordPool = !_unref(config).enableWordPool))\n                            }, null, 2 /* CLASS */)\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    (_unref(config).enableTableWords || _unref(config).enableWordPool)\n                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                            _createElementVNode(\"div\", _hoisted_19, [\n                                _createElementVNode(\"div\", _hoisted_20, [\n                                    _cache[22] || (_cache[22] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_21, _toDisplayString(modeHintText.value), 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_22, [\n                                    _withDirectives(_createElementVNode(\"select\", {\n                                        \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((_unref(config).wordDrawMode) = $event)),\n                                        class: \"acu-select\"\n                                    }, [...(_cache[23] || (_cache[23] = [\n                                            _createElementVNode(\"option\", { value: \"perItem\" }, \" x \", -1 /* CACHED */),\n                                            _createElementVNode(\"option\", { value: \"custom\" }, \"\", -1 /* CACHED */),\n                                            _createElementVNode(\"option\", { value: \"mixed\" }, \"\", -1 /* CACHED */)\n                                        ]))], 512 /* NEED_PATCH */), [\n                                        [_vModelSelect, _unref(config).wordDrawMode]\n                                    ]),\n                                    _createCommentVNode(\" perItem  \"),\n                                    (_unref(config).wordDrawMode === 'perItem')\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((_unref(config).wordsPerItem) = $event)),\n                                                type: \"range\",\n                                                min: \"1\",\n                                                max: \"10\",\n                                                step: \"1\",\n                                                class: \"acu-inline-range\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [\n                                                    _vModelText,\n                                                    _unref(config).wordsPerItem,\n                                                    void 0,\n                                                    { number: true }\n                                                ]\n                                            ]),\n                                            _createElementVNode(\"span\", _hoisted_24, _toDisplayString(_unref(config).wordsPerItem), 1 /* TEXT */)\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ])\n                            ]),\n                            _createCommentVNode(\" custom/mixed  1-20 \"),\n                            (_unref(config).wordDrawMode !== 'perItem')\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [\n                                    _createElementVNode(\"div\", _hoisted_26, [\n                                        _cache[24] || (_cache[24] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_27, \" \" + _toDisplayString(_unref(config).drawCount) + \" \", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_28, [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((_unref(config).drawCount) = $event)),\n                                            type: \"range\",\n                                            min: \"1\",\n                                            max: \"20\",\n                                            step: \"1\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [\n                                                _vModelText,\n                                                _unref(config).drawCount,\n                                                void 0,\n                                                { number: true }\n                                            ]\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", {\n                                class: \"acu-settings-row\",\n                                onClick: toggleTableSyncList\n                            }, [\n                                _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                    _createTextVNode(\"  \"),\n                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_29, [\n                                    _createElementVNode(\"button\", {\n                                        class: _normalizeClass([\"acu-switch\", { active: _unref(config).autoSync }]),\n                                        onClick: _cache[10] || (_cache[10] = _withModifiers(($event) => (_unref(config).autoSync = !_unref(config).autoSync), [\"stop\"]))\n                                    }, null, 2 /* CLASS */),\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass([\"fas\", showTableSyncList.value ? 'fa-chevron-up' : 'fa-chevron-down']),\n                                        style: { \"margin-left\": \"8px\", \"font-size\": \"12px\", \"color\": \"var(--acu-text-sub)\" }\n                                    }, null, 2 /* CLASS */)\n                                ])\n                            ]),\n                            _createCommentVNode(\"  () \"),\n                            (showTableSyncList.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [\n                                    _createVNode(SwitchList, {\n                                        modelValue: enabledSyncTables.value,\n                                        \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((enabledSyncTables).value = $event)),\n                                        items: randomTableItems.value,\n                                        \"empty-text\": \"''\",\n                                        \"footer-template\": \": {selected}/{total} \",\n                                        \"empty-hint\": \"()\"\n                                    }, null, 8 /* PROPS */, [\"modelValue\", \"items\"])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", {\n                                class: \"acu-settings-row acu-nav-row\",\n                                onClick: _cache[12] || (_cache[12] = ($event) => (_unref(nav).navigateTo('divinationWordPool')))\n                            }, [...(_cache[26] || (_cache[26] = [\n                                    _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                        _createTextVNode(\"  \"),\n                                        _createElementVNode(\"span\", { class: \"hint\" }, \" limit \")\n                                    ], -1 /* CACHED */),\n                                    _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                    ], -1 /* CACHED */)\n                                ]))])\n                        ], 64 /* STABLE_FRAGMENT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DivinationPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DivinationPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"acu-settings-section\" };\nconst _hoisted_2 = { class: \"acu-settings-group\" };\nconst _hoisted_3 = { class: \"acu-settings-row\" };\nconst _hoisted_4 = {\n    class: \"acu-settings-control\",\n    style: { \"width\": \"100%\", \"display\": \"flex\" }\n};\nconst _hoisted_5 = {\n    key: 0,\n    class: \"acu-empty-hint\",\n    style: { \"padding\": \"20px\", \"text-align\": \"center\" }\n};\nconst _hoisted_6 = {\n    key: 1,\n    class: \"acu-settings-group\"\n};\nconst _hoisted_7 = { class: \"acu-settings-row\" };\nconst _hoisted_8 = { class: \"acu-settings-label\" };\nconst _hoisted_9 = { style: { \"display\": \"flex\", \"align-items\": \"center\", \"gap\": \"8px\" } };\nconst _hoisted_10 = {\n    key: 0,\n    class: \"acu-badge acu-badge-success\"\n};\nconst _hoisted_11 = {\n    key: 1,\n    class: \"acu-badge acu-badge-danger\"\n};\nconst _hoisted_12 = {\n    key: 2,\n    class: \"acu-badge acu-badge-secondary\"\n};\nconst _hoisted_13 = { class: \"hint\" };\nconst _hoisted_14 = { class: \"acu-settings-control\" };\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = {\n    key: 0,\n    style: { \"padding\": \"0 16px 16px\" }\n};\nconst _hoisted_18 = [\"onUpdate:modelValue\", \"onInput\"];\nconst _hoisted_19 = { style: { \"display\": \"flex\", \"justify-content\": \"space-between\", \"margin-top\": \"8px\", \"font-size\": \"12px\", \"color\": \"var(--acu-text-sub)\" } };\nimport { useDebounceFn } from '@vueuse/core';\nimport { computed, ref } from 'vue';\nimport { useDivinationStore } from '../../../stores/useDivinationStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'WordPoolPanel',\n    setup(__props) {\n        const divinationStore = useDivinationStore();\n        // ============================================================\n        // State\n        // ============================================================\n        const searchQuery = ref('');\n        const expandedId = ref(null);\n        const editingContent = ref({});\n        const isSaving = ref({});\n        // ============================================================\n        // Computed\n        // ============================================================\n        const filteredCategories = computed(() => {\n            const query = searchQuery.value.toLowerCase().trim();\n            if (!query)\n                return divinationStore.categories;\n            return divinationStore.categories.filter(c => c.name.toLowerCase().includes(query) || c.words.some(w => w.toLowerCase().includes(query)));\n        });\n        // ============================================================\n        // Methods\n        // ============================================================\n        const toggleEnabled = (category) => {\n            const newCategory = { ...category, enabled: !category.enabled };\n            divinationStore.updateCategory(newCategory);\n        };\n        const toggleExpand = (id) => {\n            if (expandedId.value === id) {\n                expandedId.value = null;\n            }\n            else {\n                expandedId.value = id;\n                // \n                const category = divinationStore.categories.find(c => c.id === id);\n                if (category) {\n                    editingContent.value[id] = category.words.join('\\n');\n                }\n            }\n        };\n        const getWordCount = (content) => {\n            if (!content)\n                return 0;\n            return content\n                .split(/[,\\n]/)\n                .map(w => w.trim())\n                .filter(w => w).length;\n        };\n        // \n        const saveContent = async (id) => {\n            const content = editingContent.value[id];\n            const category = divinationStore.categories.find(c => c.id === id);\n            if (!category || content === undefined)\n                return;\n            isSaving.value[id] = true;\n            try {\n                const words = content\n                    .split(/[,\\n]/)\n                    .map(w => w.trim())\n                    .filter(w => w);\n                const newCategory = { ...category, words };\n                await divinationStore.updateCategory(newCategory);\n            }\n            finally {\n                // \n                setTimeout(() => {\n                    isSaving.value[id] = false;\n                }, 500);\n            }\n        };\n        const debouncedSave = useDebounceFn((id) => {\n            saveContent(id);\n        }, 1000);\n        const handleContentChange = (id) => {\n            debouncedSave(id);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                    _createElementVNode(\"i\", { class: \"fas fa-book\" }),\n                    _createTextVNode(\"  \")\n                ], -1 /* CACHED */)),\n                _createCommentVNode(\" / \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((searchQuery).value = $event)),\n                                type: \"text\",\n                                class: \"acu-word-pool-search\",\n                                placeholder: \"...\",\n                                style: { \"flex\": \"1\", \"width\": \"100%\" }\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, searchQuery.value]\n                            ])\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                (filteredCategories.value.length === 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, \"  \"))\n                    : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredCategories.value, (category) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: category.id,\n                                class: \"acu-word-pool-item\",\n                                style: { \"border-bottom\": \"1px solid var(--acu-border)\", \"padding\": \"12px 0\" }\n                            }, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_7, [\n                                    _createElementVNode(\"div\", _hoisted_8, [\n                                        _createElementVNode(\"div\", _hoisted_9, [\n                                            _createElementVNode(\"span\", null, _toDisplayString(category.name), 1 /* TEXT */),\n                                            _createCommentVNode(\"  \"),\n                                            (category.bias === 'positive')\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, \"\"))\n                                                : (category.bias === 'negative')\n                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \"\"))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                            _createCommentVNode(\"  \"),\n                                            (category.limit > 0)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, \" : \" + _toDisplayString(category.limit), 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"span\", _hoisted_13, _toDisplayString(category.words.length) + \" \", 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_14, [\n                                        _createElementVNode(\"button\", {\n                                            class: _normalizeClass([\"acu-switch\", { active: category.enabled }]),\n                                            onClick: ($event) => (toggleEnabled(category))\n                                        }, null, 10 /* CLASS, PROPS */, _hoisted_15),\n                                        _createElementVNode(\"button\", {\n                                            class: _normalizeClass([\"acu-icon-btn\", { active: expandedId.value === category.id }]),\n                                            style: { \"margin-left\": \"8px\" },\n                                            onClick: ($event) => (toggleExpand(category.id))\n                                        }, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass([\"fas\", expandedId.value === category.id ? 'fa-chevron-up' : 'fa-chevron-down'])\n                                            }, null, 2 /* CLASS */)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_16)\n                                    ])\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                (expandedId.value === category.id)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [\n                                        _withDirectives(_createElementVNode(\"textarea\", {\n                                            \"onUpdate:modelValue\": ($event) => ((editingContent.value[category.id]) = $event),\n                                            class: \"acu-textarea-scrollable\",\n                                            rows: \"5\",\n                                            placeholder: \"\",\n                                            onInput: ($event) => (handleContentChange(category.id))\n                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_18), [\n                                            [_vModelText, editingContent.value[category.id]]\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_19, [\n                                            _createElementVNode(\"span\", null, _toDisplayString(isSaving.value[category.id] ? '...' : ''), 1 /* TEXT */),\n                                            _createElementVNode(\"span\", null, \": \" + _toDisplayString(getWordCount(editingContent.value[category.id])), 1 /* TEXT */)\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./WordPoolPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WordPoolPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./WordPoolPanel.vue?vue&type=style&index=0&id=244ae7d6&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-244ae7d6\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, normalizeClass as _normalizeClass, unref as _unref, createVNode as _createVNode, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-header\" };\nconst _hoisted_2 = { class: \"acu-modal-title\" };\nconst _hoisted_3 = { class: \"acu-modal-body\" };\nconst _hoisted_4 = { class: \"acu-settings-section\" };\nconst _hoisted_5 = { class: \"acu-settings-group\" };\nconst _hoisted_6 = { class: \"acu-settings-row\" };\nconst _hoisted_7 = { class: \"acu-settings-control acu-font-control\" };\nconst _hoisted_8 = [\"value\"];\nconst _hoisted_9 = { class: \"acu-settings-row\" };\nconst _hoisted_10 = { class: \"acu-settings-control\" };\nconst _hoisted_11 = { class: \"acu-settings-row\" };\nconst _hoisted_12 = { class: \"acu-settings-label\" };\nconst _hoisted_13 = { class: \"hint\" };\nconst _hoisted_14 = { class: \"acu-settings-control\" };\nconst _hoisted_15 = { class: \"acu-settings-row\" };\nconst _hoisted_16 = { class: \"acu-settings-label\" };\nconst _hoisted_17 = { class: \"hint\" };\nconst _hoisted_18 = { class: \"acu-settings-control\" };\nconst _hoisted_19 = { class: \"acu-settings-row\" };\nconst _hoisted_20 = { class: \"acu-settings-label\" };\nconst _hoisted_21 = { class: \"hint\" };\nconst _hoisted_22 = { class: \"acu-settings-control\" };\nconst _hoisted_23 = { class: \"acu-settings-row\" };\nconst _hoisted_24 = { class: \"acu-settings-label\" };\nconst _hoisted_25 = { class: \"hint\" };\nconst _hoisted_26 = { class: \"acu-settings-control\" };\nconst _hoisted_27 = { class: \"acu-settings-section\" };\nconst _hoisted_28 = { class: \"acu-settings-group\" };\nconst _hoisted_29 = { class: \"acu-settings-section\" };\nconst _hoisted_30 = { class: \"acu-settings-group\" };\nconst _hoisted_31 = { class: \"acu-settings-row\" };\nconst _hoisted_32 = { class: \"acu-settings-control\" };\nconst _hoisted_33 = { class: \"acu-settings-row\" };\nconst _hoisted_34 = { class: \"acu-settings-control\" };\nconst _hoisted_35 = { class: \"acu-settings-row\" };\nconst _hoisted_36 = { class: \"acu-settings-control\" };\nconst _hoisted_37 = { class: \"acu-settings-row\" };\nconst _hoisted_38 = { class: \"acu-settings-control\" };\nconst _hoisted_39 = {\n    key: 0,\n    class: \"acu-settings-row\"\n};\nconst _hoisted_40 = { class: \"acu-settings-control\" };\nconst _hoisted_41 = {\n    key: 1,\n    class: \"acu-settings-row\"\n};\nconst _hoisted_42 = { class: \"acu-settings-label\" };\nconst _hoisted_43 = { class: \"hint\" };\nconst _hoisted_44 = { class: \"acu-settings-control\" };\nconst _hoisted_45 = { class: \"acu-settings-row\" };\nconst _hoisted_46 = { class: \"acu-settings-control\" };\nconst _hoisted_47 = { class: \"acu-settings-row\" };\nconst _hoisted_48 = { class: \"acu-settings-control\" };\nconst _hoisted_49 = { class: \"acu-mini-dialog-header\" };\nconst _hoisted_50 = { class: \"acu-mini-dialog-body\" };\nconst _hoisted_51 = { class: \"acu-font-form\" };\nconst _hoisted_52 = { class: \"acu-form-row\" };\nconst _hoisted_53 = { class: \"acu-form-row\" };\nconst _hoisted_54 = { class: \"acu-mini-dialog-footer\" };\nconst _hoisted_55 = [\"disabled\"];\nconst _hoisted_56 = { class: \"acu-bottom-spacer\" };\nimport { onClickOutside } from '@vueuse/core';\nimport { computed, provide, reactive, ref, watch } from 'vue';\nimport { useCellLock } from '../../../composables';\nimport { useToast } from '../../../composables/useToast';\nimport { useBallAppearanceStore, useConfigStore } from '../../../stores/useConfigStore';\nimport { useThemeStore } from '../../../stores/useThemeStore';\nimport { useUIStore } from '../../../stores/useUIStore';\nimport { VERSION } from '../../../version';\nimport BallAppearancePanel from '../../settings/BallAppearancePanel.vue';\nimport NavButtonConfigPanel from '../../settings/NavButtonConfigPanel.vue';\nimport TabConfigPanel from '../../settings/TabConfigPanel.vue';\nimport ThemePanel from '../../settings/ThemePanel.vue';\nimport DimensionManagerPanel from '../../settings/divination/DimensionManagerPanel.vue';\nimport DivinationPanel from '../../settings/divination/DivinationPanel.vue';\nimport WordPoolPanel from '../../settings/divination/WordPoolPanel.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SettingsDialog',\n    props: {\n        visible: { type: Boolean }\n    },\n    emits: [\"update:visible\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs & State\n        // ============================================================\n        const dialogRef = ref();\n        const configStore = useConfigStore();\n        const ballStore = useBallAppearanceStore();\n        const toast = useToast();\n        const uiStore = useUIStore();\n        const cellLock = useCellLock();\n        // \n        const showAddFontDialog = ref(false);\n        const newFontName = ref('');\n        const newFontUrl = ref('');\n        /**  */\n        const currentPanel = ref('main');\n        /**  */\n        const panelHistory = ref([]);\n        /**  */\n        const customTitles = ref({});\n        //  - \n        const localConfig = reactive({ ...configStore.config });\n        //  store\n        watch(localConfig, newConfig => {\n            configStore.updateConfig(newConfig);\n        }, { deep: true });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const panelTitle = computed(() => {\n            // \n            if (customTitles.value[currentPanel.value]) {\n                return customTitles.value[currentPanel.value];\n            }\n            switch (currentPanel.value) {\n                case 'tabConfig':\n                    return '';\n                case 'buttonConfig':\n                    return '';\n                case 'ballAppearance':\n                    return '';\n                case 'themeConfig':\n                    return '';\n                case 'divination':\n                    return '';\n                case 'divinationDimensions':\n                    return '';\n                case 'divinationWordPool':\n                    return '';\n                default:\n                    return '';\n            }\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const navigateTo = (panel, title) => {\n            if (title) {\n                customTitles.value[panel] = title;\n            }\n            panelHistory.value.push(currentPanel.value);\n            currentPanel.value = panel;\n        };\n        /**  */\n        const handleBack = () => {\n            const prevPanel = panelHistory.value.pop();\n            if (prevPanel) {\n                currentPanel.value = prevPanel;\n            }\n            else {\n                currentPanel.value = 'main';\n            }\n        };\n        /**  */\n        const resetNavigation = () => {\n            panelHistory.value = [];\n            currentPanel.value = 'main';\n            customTitles.value = {};\n        };\n        /**  () */\n        const goToPanel = (panel) => {\n            navigateTo(panel);\n        };\n        // \n        provide('settingsNavigation', {\n            navigateTo,\n            goBack: handleBack,\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const handleEnterLockMode = () => {\n            // \n            cellLock.initPendingLocks();\n            // \n            uiStore.isLockEditMode = true;\n            // \n            emit('update:visible', false);\n        };\n        //  openDivinationSettings  SettingsDialog \n        // ============================================================\n        //  & \n        // ============================================================\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                Object.assign(localConfig, configStore.config);\n                // \n                if (uiStore.initialSettingsPanel) {\n                    resetNavigation();\n                    navigateTo(uiStore.initialSettingsPanel);\n                    uiStore.initialSettingsPanel = null; // \n                }\n                else {\n                    resetNavigation(); // \n                }\n            }\n        });\n        // \n        onClickOutside(dialogRef, () => {\n            handleCancel();\n        });\n        // ============================================================\n        // \n        // ============================================================\n        // \n        const handleClose = () => {\n            // \n            if (currentPanel.value === 'ballAppearance') {\n                const themeStore = useThemeStore();\n                if (themeStore.activePresetId && themeStore.activePreset) {\n                    themeStore.saveCurrentToPreset(themeStore.activePreset.name);\n                    toast.success('');\n                }\n            }\n            emit('update:visible', false);\n        };\n        // \n        const handleCancel = () => {\n            emit('update:visible', false);\n        };\n        // ============================================================\n        // \n        // ============================================================\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const allFonts = computed(() => ballStore.allFonts);\n        /**  */\n        const canAddFont = computed(() => {\n            return newFontName.value.trim() && newFontUrl.value.trim();\n        });\n        /**  */\n        const handleAddFont = () => {\n            if (!canAddFont.value)\n                return;\n            const fontName = newFontName.value.trim();\n            //  CSS font-family  fallback\n            const fontFamily = `'${fontName}', sans-serif`;\n            ballStore.addFont({\n                name: fontName,\n                fontFamily: fontFamily,\n                importUrl: newFontUrl.value.trim(),\n            });\n            // \n            newFontName.value = '';\n            newFontUrl.value = '';\n            showAddFontDialog.value = false;\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"modal\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-modal-container\",\n                            onClick: _withModifiers(handleCancel, [\"self\"])\n                        }, [\n                            _createElementVNode(\"div\", {\n                                ref_key: \"dialogRef\",\n                                ref: dialogRef,\n                                class: \"acu-modal acu-settings-modal\"\n                            }, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_1, [\n                                    _createCommentVNode(\"  \"),\n                                    (panelHistory.value.length > 0)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            class: \"acu-modal-back\",\n                                            onClick: _withModifiers(handleBack, [\"stop\"])\n                                        }, [...(_cache[26] || (_cache[26] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-arrow-left\" }, null, -1 /* CACHED */)\n                                            ]))]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createElementVNode(\"span\", _hoisted_2, _toDisplayString(panelTitle.value), 1 /* TEXT */),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-close-pill\",\n                                        onClick: _withModifiers(handleClose, [\"stop\"])\n                                    }, _toDisplayString(currentPanel.value === 'ballAppearance' ? '' : ''), 1 /* TEXT */)\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_3, [\n                                    _createCommentVNode(\" ============  ============ \"),\n                                    (currentPanel.value === 'main')\n                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                            _createCommentVNode(\" \"),\n                                            _createElementVNode(\"div\", _hoisted_4, [\n                                                _cache[35] || (_cache[35] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-palette\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_5, [\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_6, [\n                                                        _cache[28] || (_cache[28] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_7, [\n                                                            _withDirectives(_createElementVNode(\"select\", {\n                                                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localConfig.fontFamily) = $event))\n                                                            }, [\n                                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(allFonts.value, (font) => {\n                                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                                        key: font.id,\n                                                                        value: font.id\n                                                                    }, _toDisplayString(font.name), 9 /* TEXT, PROPS */, _hoisted_8));\n                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                            ], 512 /* NEED_PATCH */), [\n                                                                [_vModelSelect, localConfig.fontFamily]\n                                                            ]),\n                                                            _createElementVNode(\"button\", {\n                                                                class: \"acu-add-font-btn\",\n                                                                title: \"\",\n                                                                onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (showAddFontDialog.value = true), [\"stop\"]))\n                                                            }, [...(_cache[27] || (_cache[27] = [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                                                                ]))])\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_9, [\n                                                        _cache[30] || (_cache[30] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_10, [\n                                                            _withDirectives(_createElementVNode(\"select\", {\n                                                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((localConfig.layout) = $event))\n                                                            }, [...(_cache[29] || (_cache[29] = [\n                                                                    _createElementVNode(\"option\", { value: \"vertical\" }, \"\", -1 /* CACHED */),\n                                                                    _createElementVNode(\"option\", { value: \"horizontal\" }, \"\", -1 /* CACHED */)\n                                                                ]))], 512 /* NEED_PATCH */), [\n                                                                [_vModelSelect, localConfig.layout]\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_11, [\n                                                        _createElementVNode(\"div\", _hoisted_12, [\n                                                            _cache[31] || (_cache[31] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_13, _toDisplayString(localConfig.fontSize) + \"px\", 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_14, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((localConfig.fontSize) = $event)),\n                                                                type: \"range\",\n                                                                min: \"12\",\n                                                                max: \"18\",\n                                                                step: \"1\"\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [\n                                                                    _vModelText,\n                                                                    localConfig.fontSize,\n                                                                    void 0,\n                                                                    { number: true }\n                                                                ]\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_15, [\n                                                        _createElementVNode(\"div\", _hoisted_16, [\n                                                            _cache[32] || (_cache[32] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_17, _toDisplayString(localConfig.cardWidth) + \"px\", 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_18, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((localConfig.cardWidth) = $event)),\n                                                                type: \"range\",\n                                                                min: \"200\",\n                                                                max: \"400\",\n                                                                step: \"10\"\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [\n                                                                    _vModelText,\n                                                                    localConfig.cardWidth,\n                                                                    void 0,\n                                                                    { number: true }\n                                                                ]\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_19, [\n                                                        _createElementVNode(\"div\", _hoisted_20, [\n                                                            _cache[33] || (_cache[33] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_21, _toDisplayString(localConfig.gridColumns === 0 ? '' : `${localConfig.gridColumns} `), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_22, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((localConfig.gridColumns) = $event)),\n                                                                type: \"range\",\n                                                                min: \"0\",\n                                                                max: \"6\",\n                                                                step: \"1\"\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [\n                                                                    _vModelText,\n                                                                    localConfig.gridColumns,\n                                                                    void 0,\n                                                                    { number: true }\n                                                                ]\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_23, [\n                                                        _createElementVNode(\"div\", _hoisted_24, [\n                                                            _cache[34] || (_cache[34] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_25, _toDisplayString(localConfig.itemsPerPage) + \" \", 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_26, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((localConfig.itemsPerPage) = $event)),\n                                                                type: \"range\",\n                                                                min: \"10\",\n                                                                max: \"100\",\n                                                                step: \"10\"\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [\n                                                                    _vModelText,\n                                                                    localConfig.itemsPerPage,\n                                                                    void 0,\n                                                                    { number: true }\n                                                                ]\n                                                            ])\n                                                        ])\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\" \"),\n                                            _createElementVNode(\"div\", _hoisted_27, [\n                                                _cache[41] || (_cache[41] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-columns\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_28, [\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"acu-settings-row acu-nav-row\",\n                                                        onClick: _cache[7] || (_cache[7] = ($event) => (goToPanel('themeConfig')))\n                                                    }, [...(_cache[36] || (_cache[36] = [\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                                _createTextVNode(\"  \"),\n                                                                _createElementVNode(\"span\", { class: \"hint\" }, \"CSS\")\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                                            ], -1 /* CACHED */)\n                                                        ]))]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"acu-settings-row acu-nav-row\",\n                                                        onClick: _cache[8] || (_cache[8] = ($event) => (goToPanel('ballAppearance')))\n                                                    }, [...(_cache[37] || (_cache[37] = [\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                                _createTextVNode(\"  \"),\n                                                                _createElementVNode(\"span\", { class: \"hint\" }, \"AI\")\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                                            ], -1 /* CACHED */)\n                                                        ]))]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"acu-settings-row acu-nav-row\",\n                                                        onClick: _cache[9] || (_cache[9] = ($event) => (goToPanel('tabConfig')))\n                                                    }, [...(_cache[38] || (_cache[38] = [\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                                _createTextVNode(\"  \"),\n                                                                _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                                            ], -1 /* CACHED */)\n                                                        ]))]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"acu-settings-row acu-nav-row\",\n                                                        onClick: _cache[10] || (_cache[10] = ($event) => (goToPanel('buttonConfig')))\n                                                    }, [...(_cache[39] || (_cache[39] = [\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                                _createTextVNode(\"  \"),\n                                                                _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                                            ], -1 /* CACHED */)\n                                                        ]))]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"acu-settings-row acu-nav-row\",\n                                                        onClick: _cache[11] || (_cache[11] = ($event) => (goToPanel('divination')))\n                                                    }, [...(_cache[40] || (_cache[40] = [\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                                _createTextVNode(\"  \"),\n                                                                _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                                            ], -1 /* CACHED */)\n                                                        ]))])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_29, [\n                                                _cache[50] || (_cache[50] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-sliders-h\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_30, [\n                                                    _createCommentVNode(\"  () \"),\n                                                    _createElementVNode(\"div\", _hoisted_31, [\n                                                        _cache[42] || (_cache[42] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_32, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-switch\", { active: localConfig.showPagination }]),\n                                                                onClick: _cache[12] || (_cache[12] = ($event) => (localConfig.showPagination = !localConfig.showPagination))\n                                                            }, null, 2 /* CLASS */)\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_33, [\n                                                        _cache[43] || (_cache[43] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_34, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-switch\", { active: localConfig.limitLongText }]),\n                                                                onClick: _cache[13] || (_cache[13] = ($event) => (localConfig.limitLongText = !localConfig.limitLongText))\n                                                            }, null, 2 /* CLASS */)\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_35, [\n                                                        _cache[44] || (_cache[44] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_36, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-switch\", { active: localConfig.lockPanel }]),\n                                                                onClick: _cache[14] || (_cache[14] = ($event) => (localConfig.lockPanel = !localConfig.lockPanel))\n                                                            }, null, 2 /* CLASS */)\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\" Tab \"),\n                                                    _createElementVNode(\"div\", _hoisted_37, [\n                                                        _cache[45] || (_cache[45] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\" Tab \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"Tab\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_38, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-switch\", { active: localConfig.collapseTabBar }]),\n                                                                onClick: _cache[15] || (_cache[15] = ($event) => (localConfig.collapseTabBar = !localConfig.collapseTabBar))\n                                                            }, null, 2 /* CLASS */)\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\" Tab (Tab) \"),\n                                                    (localConfig.collapseTabBar)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_39, [\n                                                            _cache[46] || (_cache[46] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                                _createTextVNode(\" Tab \"),\n                                                                _createElementVNode(\"span\", { class: \"hint\" }, \"Tab\")\n                                                            ], -1 /* CACHED */)),\n                                                            _createElementVNode(\"div\", _hoisted_40, [\n                                                                _createElementVNode(\"button\", {\n                                                                    class: _normalizeClass([\"acu-switch\", { active: localConfig.showCollapseTabButton !== false }]),\n                                                                    onClick: _cache[16] || (_cache[16] = ($event) => (localConfig.showCollapseTabButton = localConfig.showCollapseTabButton === false))\n                                                                }, null, 2 /* CLASS */)\n                                                            ])\n                                                        ]))\n                                                        : _createCommentVNode(\"v-if\", true),\n                                                    _createCommentVNode(\"  \"),\n                                                    (_unref(uiStore).isMobile)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_41, [\n                                                            _createElementVNode(\"div\", _hoisted_42, [\n                                                                _cache[47] || (_cache[47] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                                _createElementVNode(\"span\", _hoisted_43, _toDisplayString(localConfig.mobileSafeAreaBottom ?? 50) + \"px\", 1 /* TEXT */)\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_44, [\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event) => ((localConfig.mobileSafeAreaBottom) = $event)),\n                                                                    type: \"range\",\n                                                                    min: \"0\",\n                                                                    max: \"150\",\n                                                                    step: \"10\"\n                                                                }, null, 512 /* NEED_PATCH */), [\n                                                                    [\n                                                                        _vModelText,\n                                                                        localConfig.mobileSafeAreaBottom,\n                                                                        void 0,\n                                                                        { number: true }\n                                                                    ]\n                                                                ])\n                                                            ])\n                                                        ]))\n                                                        : _createCommentVNode(\"v-if\", true),\n                                                    _createCommentVNode(\" Swipe  \"),\n                                                    _createElementVNode(\"div\", _hoisted_45, [\n                                                        _cache[48] || (_cache[48] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\" Swipe  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \" roll \")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_46, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-switch\", { active: localConfig.clearTableOnSwipe }]),\n                                                                onClick: _cache[18] || (_cache[18] = ($event) => (localConfig.clearTableOnSwipe = !localConfig.clearTableOnSwipe))\n                                                            }, null, 2 /* CLASS */)\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\" iOS  \"),\n                                                    _createElementVNode(\"div\", _hoisted_47, [\n                                                        _cache[49] || (_cache[49] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\" iOS  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \" iOS \")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_48, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-switch\", { active: localConfig.enableIOSInputFix }]),\n                                                                onClick: _cache[19] || (_cache[19] = ($event) => (localConfig.enableIOSInputFix = !localConfig.enableIOSInputFix))\n                                                            }, null, 2 /* CLASS */)\n                                                        ])\n                                                    ])\n                                                ])\n                                            ])\n                                        ], 64 /* STABLE_FRAGMENT */))\n                                        : (currentPanel.value === 'tabConfig')\n                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createCommentVNode(\" ============ Tab  ============ \"),\n                                                _createVNode(TabConfigPanel)\n                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                            : (currentPanel.value === 'buttonConfig')\n                                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                                    _createCommentVNode(\" ============  ============ \"),\n                                                    _createVNode(NavButtonConfigPanel)\n                                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                                : (currentPanel.value === 'ballAppearance')\n                                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n                                                        _createCommentVNode(\" ============  ============ \"),\n                                                        _createVNode(BallAppearancePanel)\n                                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                                    : (currentPanel.value === 'themeConfig')\n                                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 4 }, [\n                                                            _createCommentVNode(\" ============  ============ \"),\n                                                            _createVNode(ThemePanel)\n                                                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                                        : (currentPanel.value === 'divination')\n                                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 5 }, [\n                                                                _createCommentVNode(\" ============  ============ \"),\n                                                                _createVNode(DivinationPanel)\n                                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                                            : (currentPanel.value === 'divinationDimensions')\n                                                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 6 }, [\n                                                                    _createCommentVNode(\" ============  ============ \"),\n                                                                    _createVNode(DimensionManagerPanel)\n                                                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                                                : (currentPanel.value === 'divinationWordPool')\n                                                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 7 }, [\n                                                                        _createCommentVNode(\" ============  ============ \"),\n                                                                        _createVNode(WordPoolPanel)\n                                                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                                                    : _createCommentVNode(\"v-if\", true)\n                                ]),\n                                _createCommentVNode(\" ============  Teleport ============ \"),\n                                _createVNode(_Transition, { name: \"modal\" }, {\n                                    default: _withCtx(() => [\n                                        (showAddFontDialog.value)\n                                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                                key: 0,\n                                                class: \"acu-font-dialog-overlay\",\n                                                onClick: _cache[25] || (_cache[25] = _withModifiers(($event) => (showAddFontDialog.value = false), [\"self\"]))\n                                            }, [\n                                                _createElementVNode(\"div\", {\n                                                    class: \"acu-mini-dialog acu-add-font-dialog\",\n                                                    onClick: _cache[24] || (_cache[24] = _withModifiers(() => { }, [\"stop\"]))\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_49, [\n                                                        _cache[52] || (_cache[52] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-icon-btn\",\n                                                            onClick: _cache[20] || (_cache[20] = _withModifiers(($event) => (showAddFontDialog.value = false), [\"stop\"]))\n                                                        }, [...(_cache[51] || (_cache[51] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                                            ]))])\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_50, [\n                                                        _createElementVNode(\"div\", _hoisted_51, [\n                                                            _createElementVNode(\"div\", _hoisted_52, [\n                                                                _cache[53] || (_cache[53] = _createElementVNode(\"label\", null, \"\", -1 /* CACHED */)),\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    \"onUpdate:modelValue\": _cache[21] || (_cache[21] = ($event) => ((newFontName).value = $event)),\n                                                                    type: \"text\",\n                                                                    placeholder: \"\"\n                                                                }, null, 512 /* NEED_PATCH */), [\n                                                                    [_vModelText, newFontName.value]\n                                                                ])\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_53, [\n                                                                _cache[54] || (_cache[54] = _createElementVNode(\"label\", null, \"\", -1 /* CACHED */)),\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    \"onUpdate:modelValue\": _cache[22] || (_cache[22] = ($event) => ((newFontUrl).value = $event)),\n                                                                    type: \"text\",\n                                                                    placeholder: \"@import URL  CDN \"\n                                                                }, null, 512 /* NEED_PATCH */), [\n                                                                    [_vModelText, newFontUrl.value]\n                                                                ])\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_54, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-modal-btn secondary\",\n                                                            onClick: _cache[23] || (_cache[23] = _withModifiers(($event) => (showAddFontDialog.value = false), [\"stop\"]))\n                                                        }, \"\"),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-modal-btn primary\",\n                                                            disabled: !canAddFont.value,\n                                                            onClick: _withModifiers(handleAddFont, [\"stop\"])\n                                                        }, \"\", 8 /* PROPS */, _hoisted_55)\n                                                    ])\n                                                ])\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _: 1 /* STABLE */\n                                }),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_56, \" ACU Visualizer v\" + _toDisplayString(_unref(VERSION)) + \" \", 1 /* TEXT */)\n                            ], 512 /* NEED_PATCH */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SettingsDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SettingsDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SettingsDialog.vue?vue&type=style&index=0&id=e0ed2948&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e0ed2948\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-crop-dialog\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-title\" };\nconst _hoisted_4 = { class: \"acu-modal-body acu-crop-body\" };\nconst _hoisted_5 = { class: \"acu-crop-preview-wrapper\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"acu-crop-placeholder\"\n};\nconst _hoisted_7 = { class: \"acu-crop-controls\" };\nconst _hoisted_8 = { class: \"acu-crop-control-row\" };\nconst _hoisted_9 = [\"value\"];\nconst _hoisted_10 = { class: \"acu-crop-value\" };\nconst _hoisted_11 = { class: \"acu-crop-control-row\" };\nconst _hoisted_12 = [\"value\"];\nconst _hoisted_13 = { class: \"acu-crop-value\" };\nconst _hoisted_14 = { class: \"acu-crop-control-row\" };\nconst _hoisted_15 = [\"value\"];\nconst _hoisted_16 = { class: \"acu-crop-value\" };\nconst _hoisted_17 = {\n    key: 0,\n    class: \"acu-crop-invert-section\"\n};\nconst _hoisted_18 = { class: \"acu-settings-row\" };\nconst _hoisted_19 = { class: \"acu-settings-control\" };\nconst _hoisted_20 = { class: \"acu-switch\" };\nconst _hoisted_21 = { class: \"acu-crop-upload-section\" };\nconst _hoisted_22 = { class: \"acu-modal-footer\" };\nimport { computed, ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AvatarCropDialog',\n    props: {\n        visible: { type: Boolean, default: false },\n        imageUrl: { default: '' },\n        name: { default: '' },\n        initialOffsetX: { default: 50 },\n        initialOffsetY: { default: 50 },\n        initialScale: { default: 150 },\n        initialInvert: { type: Boolean, default: false },\n        showInvertOption: { type: Boolean, default: false }\n    },\n    emits: [\"close\", \"apply\", \"upload\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * AvatarCropDialog.vue - \n         *\n         * \n         * - \n         * -  X/Y \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // \n        // ============================================================\n        const offsetX = ref(props.initialOffsetX);\n        const offsetY = ref(props.initialOffsetY);\n        const scale = ref(props.initialScale);\n        const invert = ref(props.initialInvert);\n        const fileInputRef = ref(null);\n        const previewRef = ref(null);\n        // \n        const isDragging = ref(false);\n        const dragStartX = ref(0);\n        const dragStartY = ref(0);\n        const dragStartOffsetX = ref(0);\n        const dragStartOffsetY = ref(0);\n        // ============================================================\n        // \n        // ============================================================\n        const previewStyle = computed(() => {\n            if (!props.imageUrl)\n                return {};\n            const style = {\n                backgroundImage: `url('${props.imageUrl}')`,\n                backgroundPosition: `${offsetX.value}% ${offsetY.value}%`,\n                backgroundSize: `${scale.value}%`,\n            };\n            // \n            if (invert.value && props.showInvertOption) {\n                style.filter = 'invert(1)';\n            }\n            return style;\n        });\n        // ============================================================\n        // \n        // ============================================================\n        function handleClose() {\n            emit('close');\n        }\n        function applyAndClose() {\n            emit('apply', {\n                offsetX: offsetX.value,\n                offsetY: offsetY.value,\n                scale: scale.value,\n                invert: props.showInvertOption ? invert.value : undefined,\n            });\n        }\n        function resetValues() {\n            offsetX.value = 50;\n            offsetY.value = 50;\n            scale.value = 150;\n            invert.value = false;\n        }\n        function triggerUpload() {\n            fileInputRef.value?.click();\n        }\n        function handleFileSelect(event) {\n            const input = event.target;\n            const file = input.files?.[0];\n            if (file) {\n                emit('upload', file);\n            }\n            input.value = '';\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function handleDragStart(e) {\n            if (!props.imageUrl)\n                return;\n            isDragging.value = true;\n            dragStartX.value = e.clientX;\n            dragStartY.value = e.clientY;\n            dragStartOffsetX.value = offsetX.value;\n            dragStartOffsetY.value = offsetY.value;\n            // \n            const parentDoc = window.parent?.document || document;\n            parentDoc.addEventListener('mousemove', handleDragMove);\n            parentDoc.addEventListener('mouseup', handleDragEnd);\n        }\n        /**  */\n        function handleTouchStart(e) {\n            if (!props.imageUrl || e.touches.length !== 1)\n                return;\n            const touch = e.touches[0];\n            isDragging.value = true;\n            dragStartX.value = touch.clientX;\n            dragStartY.value = touch.clientY;\n            dragStartOffsetX.value = offsetX.value;\n            dragStartOffsetY.value = offsetY.value;\n            // \n            const parentDoc = window.parent?.document || document;\n            parentDoc.addEventListener('touchmove', handleTouchMove, { passive: false });\n            parentDoc.addEventListener('touchend', handleTouchEnd);\n        }\n        /**  */\n        function handleDragMove(e) {\n            if (!isDragging.value)\n                return;\n            const deltaX = e.clientX - dragStartX.value;\n            const deltaY = e.clientY - dragStartY.value;\n            updateOffset(deltaX, deltaY);\n        }\n        /**  */\n        function handleTouchMove(e) {\n            if (!isDragging.value || e.touches.length !== 1)\n                return;\n            e.preventDefault(); // \n            const touch = e.touches[0];\n            const deltaX = touch.clientX - dragStartX.value;\n            const deltaY = touch.clientY - dragStartY.value;\n            updateOffset(deltaX, deltaY);\n        }\n        /**  */\n        function updateOffset(deltaX, deltaY) {\n            // \n            //  120px 0-100%\n            //  120px  100% \n            const sensitivity = 0.8; // \n            const previewSize = 120;\n            // \n            const newOffsetX = dragStartOffsetX.value - (deltaX / previewSize) * 100 * sensitivity;\n            const newOffsetY = dragStartOffsetY.value - (deltaY / previewSize) * 100 * sensitivity;\n            //  0-100 \n            offsetX.value = Math.max(0, Math.min(100, Math.round(newOffsetX)));\n            offsetY.value = Math.max(0, Math.min(100, Math.round(newOffsetY)));\n        }\n        /**  */\n        function handleDragEnd() {\n            isDragging.value = false;\n            const parentDoc = window.parent?.document || document;\n            parentDoc.removeEventListener('mousemove', handleDragMove);\n            parentDoc.removeEventListener('mouseup', handleDragEnd);\n        }\n        /**  */\n        function handleTouchEnd() {\n            isDragging.value = false;\n            const parentDoc = window.parent?.document || document;\n            parentDoc.removeEventListener('touchmove', handleTouchMove);\n            parentDoc.removeEventListener('touchend', handleTouchEnd);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                offsetX.value = props.initialOffsetX;\n                offsetY.value = props.initialOffsetY;\n                scale.value = props.initialScale;\n                invert.value = props.initialInvert;\n            }\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-crop-modal-overlay\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _createElementVNode(\"span\", _hoisted_3, [\n                                _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-crop-simple\" }, null, -1 /* CACHED */)),\n                                _createTextVNode(\"  - \" + _toDisplayString(__props.name), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, [...(_cache[5] || (_cache[5] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                ]))])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createCommentVNode(\"  -  \"),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"div\", {\n                                    ref_key: \"previewRef\",\n                                    ref: previewRef,\n                                    class: _normalizeClass([\"acu-crop-preview\", { 'is-dragging': isDragging.value }]),\n                                    style: _normalizeStyle(previewStyle.value),\n                                    onMousedown: handleDragStart,\n                                    onTouchstart: _withModifiers(handleTouchStart, [\"prevent\"])\n                                }, [\n                                    _createCommentVNode(\"  \"),\n                                    (!__props.imageUrl)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [...(_cache[6] || (_cache[6] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-image\" }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                            ]))]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 38 /* CLASS, STYLE, NEED_HYDRATION */)\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                _createCommentVNode(\" X  \"),\n                                _createElementVNode(\"div\", _hoisted_8, [\n                                    _cache[7] || (_cache[7] = _createElementVNode(\"label\", { class: \"acu-crop-label\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-arrows-left-right\" }),\n                                        _createTextVNode(\" X \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"input\", {\n                                        type: \"range\",\n                                        class: \"acu-crop-slider\",\n                                        min: \"0\",\n                                        max: \"100\",\n                                        value: offsetX.value,\n                                        onInput: _cache[0] || (_cache[0] = ($event) => (offsetX.value = Number($event.target.value)))\n                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_9),\n                                    _createElementVNode(\"span\", _hoisted_10, _toDisplayString(offsetX.value) + \"%\", 1 /* TEXT */)\n                                ]),\n                                _createCommentVNode(\" Y  \"),\n                                _createElementVNode(\"div\", _hoisted_11, [\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"label\", { class: \"acu-crop-label\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-arrows-up-down\" }),\n                                        _createTextVNode(\" Y \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"input\", {\n                                        type: \"range\",\n                                        class: \"acu-crop-slider\",\n                                        min: \"0\",\n                                        max: \"100\",\n                                        value: offsetY.value,\n                                        onInput: _cache[1] || (_cache[1] = ($event) => (offsetY.value = Number($event.target.value)))\n                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_12),\n                                    _createElementVNode(\"span\", _hoisted_13, _toDisplayString(offsetY.value) + \"%\", 1 /* TEXT */)\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_14, [\n                                    _cache[9] || (_cache[9] = _createElementVNode(\"label\", { class: \"acu-crop-label\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-magnifying-glass-plus\" }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"input\", {\n                                        type: \"range\",\n                                        class: \"acu-crop-slider\",\n                                        min: \"100\",\n                                        max: \"300\",\n                                        value: scale.value,\n                                        onInput: _cache[2] || (_cache[2] = ($event) => (scale.value = Number($event.target.value)))\n                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_15),\n                                    _createElementVNode(\"span\", _hoisted_16, _toDisplayString(scale.value) + \"%\", 1 /* TEXT */)\n                                ])\n                            ]),\n                            _createCommentVNode(\"  -  showInvertOption  true  \"),\n                            (__props.showInvertOption)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [\n                                    _createElementVNode(\"div\", _hoisted_18, [\n                                        _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-adjust\" }),\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"/\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_19, [\n                                            _createElementVNode(\"label\", _hoisted_20, [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((invert).value = $event)),\n                                                    type: \"checkbox\"\n                                                }, null, 512 /* NEED_PATCH */), [\n                                                    [_vModelCheckbox, invert.value]\n                                                ]),\n                                                _cache[10] || (_cache[10] = _createElementVNode(\"span\", { class: \"acu-switch-slider\" }, null, -1 /* CACHED */))\n                                            ])\n                                        ])\n                                    ])\n                                ]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_21, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-modal-btn secondary\",\n                                    onClick: _withModifiers(triggerUpload, [\"stop\"])\n                                }, [...(_cache[12] || (_cache[12] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-upload\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"input\", {\n                                    ref_key: \"fileInputRef\",\n                                    ref: fileInputRef,\n                                    type: \"file\",\n                                    accept: \"image/*\",\n                                    style: { \"display\": \"none\" },\n                                    onChange: handleFileSelect\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_22, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn secondary\",\n                                onClick: _withModifiers(resetValues, [\"stop\"])\n                            }, \"\"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn primary\",\n                                onClick: _withModifiers(applyAndClose, [\"stop\"])\n                            }, \"\")\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AvatarCropDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AvatarCropDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, Fragment as _Fragment, renderList as _renderList, normalizeStyle as _normalizeStyle, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-avatar-manager-dialog\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-avatar-tab-bar\" };\nconst _hoisted_4 = { class: \"acu-avatar-search-bar\" };\nconst _hoisted_5 = [\"placeholder\"];\nconst _hoisted_6 = { class: \"acu-modal-body acu-avatar-list\" };\nconst _hoisted_7 = {\n    key: 0,\n    class: \"acu-avatar-loading\"\n};\nconst _hoisted_8 = { class: \"acu-avatar-empty\" };\nconst _hoisted_9 = { class: \"acu-avatar-items\" };\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = { class: \"acu-avatar-column\" };\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n    key: 0,\n    class: \"acu-avatar-initial\"\n};\nconst _hoisted_14 = {\n    key: 1,\n    class: \"fas fa-camera acu-avatar-camera-hint\"\n};\nconst _hoisted_15 = { class: \"acu-avatar-info\" };\nconst _hoisted_16 = { class: \"acu-avatar-name-row\" };\nconst _hoisted_17 = { class: \"acu-avatar-name-left\" };\nconst _hoisted_18 = { class: \"acu-avatar-name\" };\nconst _hoisted_19 = {\n    key: 0,\n    class: \"acu-avatar-label-preview\"\n};\nconst _hoisted_20 = { class: \"acu-avatar-name-right\" };\nconst _hoisted_21 = [\"onClick\"];\nconst _hoisted_22 = { class: \"acu-import-dropdown\" };\nconst _hoisted_23 = [\"onClick\"];\nconst _hoisted_24 = {\n    key: 0,\n    class: \"acu-dropdown-menu\"\n};\nconst _hoisted_25 = [\"onClick\"];\nconst _hoisted_26 = [\"onClick\"];\nconst _hoisted_27 = [\"onClick\"];\nconst _hoisted_28 = { class: \"acu-avatar-url-row\" };\nconst _hoisted_29 = [\"value\", \"onChange\", \"onBlur\"];\nconst _hoisted_30 = { class: \"acu-avatar-alias-row\" };\nconst _hoisted_31 = [\"value\", \"onChange\", \"onBlur\"];\nconst _hoisted_32 = { class: \"acu-avatar-footer\" };\nconst _hoisted_33 = { class: \"acu-footer-left\" };\nconst _hoisted_34 = [\"disabled\"];\nconst _hoisted_35 = { class: \"acu-footer-right\" };\nconst _hoisted_36 = [\"disabled\"];\nimport { computed, onMounted, ref, toRaw, watch } from 'vue';\nimport { useAvatarManager } from '../../../composables/useAvatarManager';\nimport { useToast } from '../../../composables/useToast';\nimport { useUIStore } from '../../../stores/useUIStore';\nimport { compressImage, fileToBase64 } from '../../../utils';\nimport AvatarCropDialog from './AvatarCropDialog.vue';\n//  key RelationshipGraph \nconst CHAT_VAR_GRAPH_CONFIG = 'acu_graph_config';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AvatarManagerDialog',\n    props: {\n        visible: { type: Boolean, default: false },\n        nodes: { default: () => [] },\n        factions: { default: () => [] }\n    },\n    emits: [\"close\", \"update\", \"label-change\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * AvatarManagerDialog.vue -  ()\n         *\n         * \n         * - \n         * - URL \n         * - \n         * - \n         */\n        function getGraphConfig() {\n            try {\n                const chatVars = getVariables({ type: 'chat' });\n                return chatVars[CHAT_VAR_GRAPH_CONFIG] || {};\n            }\n            catch (e) {\n                console.warn('[AvatarManager] :', e);\n                return {};\n            }\n        }\n        /**  */\n        function saveGraphConfig(config) {\n            try {\n                insertOrAssignVariables({ [CHAT_VAR_GRAPH_CONFIG]: config }, { type: 'chat' });\n            }\n            catch (e) {\n                console.warn('[AvatarManager] :', e);\n            }\n        }\n        // ============================================================\n        // Props & Emits\n        // ============================================================\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const avatarManager = useAvatarManager();\n        const toast = useToast();\n        const uiStore = useUIStore();\n        // Tab \n        const activeTab = ref('character');\n        const isLoading = ref(true);\n        const avatarList = ref([]);\n        const factionList = ref([]);\n        const pendingChanges = ref(new Map());\n        const hasChanges = computed(() => pendingChanges.value.size > 0);\n        // \n        const searchQuery = ref('');\n        // \n        const isDeleteMode = ref(false);\n        const selectedForDelete = ref(new Set());\n        // \n        const activeImportMenu = ref(null);\n        const fileInputRef = ref(null);\n        const currentUploadItem = ref(null);\n        //  ()\n        const currentLabelItem = ref(null);\n        // \n        const showCropDialog = ref(false);\n        const currentCropItem = ref(null);\n        // ============================================================\n        // \n        // ============================================================\n        /**  Tab */\n        const currentList = computed(() => {\n            return activeTab.value === 'character' ? avatarList.value : factionList.value;\n        });\n        /**  */\n        const filteredList = computed(() => {\n            if (!searchQuery.value.trim()) {\n                return currentList.value;\n            }\n            const query = searchQuery.value.toLowerCase().trim();\n            return currentList.value.filter(item => {\n                // \n                if (item.name.toLowerCase().includes(query))\n                    return true;\n                // \n                if (item.aliases.some(alias => alias.toLowerCase().includes(query)))\n                    return true;\n                // \n                if (item.displayLabel?.toLowerCase().includes(query))\n                    return true;\n                return false;\n            });\n        });\n        //  - \n        const hasTavernCharacterAvatar = computed(() => !!avatarManager.getSillyTavernCharacterAvatar());\n        const hasTavernUserAvatar = computed(() => !!avatarManager.getSillyTavernUserAvatar());\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        async function createAvatarItem(id, name, type, labelsConfig) {\n            const record = await avatarManager.getAvatar(name);\n            const avatarUrl = await avatarManager.getAvatarUrl(name);\n            const hasLocalBlob = record?.blob ? true : false;\n            // \n            let source = null;\n            if (hasLocalBlob) {\n                source = 'local';\n            }\n            else if (record?.url) {\n                source = 'url';\n            }\n            else if (avatarUrl && avatarManager.isPlayerNode(name)) {\n                source = 'auto';\n            }\n            else if (type === 'faction' && !avatarUrl) {\n                //  auto \n                source = null;\n            }\n            else if (type === 'faction' && avatarUrl) {\n                //  local/url auto ()\n                source = 'auto';\n            }\n            // \n            const labelConfig = labelsConfig[name];\n            const displayLabel = labelConfig?.displayLabel;\n            const labelIndices = labelConfig?.selectedIndices;\n            // \n            const aliases = record?.aliases || [];\n            return {\n                id,\n                name,\n                label: displayLabel || name,\n                type,\n                avatarUrl,\n                url: record?.url,\n                offsetX: record?.offsetX ?? 50,\n                offsetY: record?.offsetY ?? 50,\n                scale: record?.scale ?? 150,\n                labelIndices,\n                displayLabel,\n                source,\n                hasLocalBlob,\n                aliases,\n                aliasesText: aliases.join(', '),\n            };\n        }\n        async function loadData() {\n            isLoading.value = true;\n            try {\n                const avatars = [];\n                const factions = [];\n                // \n                const factionNames = new Set(props.factions.map(f => f.name));\n                // \n                const graphConfig = getGraphConfig();\n                const labelsConfig = graphConfig.labels || {};\n                // 1. \n                for (const node of props.nodes) {\n                    //  Tab \n                    if (factionNames.has(node.name)) {\n                        continue;\n                    }\n                    const item = await createAvatarItem(node.id, node.name, node.type, labelsConfig);\n                    avatars.push(item);\n                }\n                // 2. \n                for (const faction of props.factions) {\n                    //  ID  ID faction\n                    const item = await createAvatarItem(faction.id, faction.name, 'faction', labelsConfig);\n                    factions.push(item);\n                }\n                // 3.  (pendingChanges)\n                // \n                if (pendingChanges.value.size > 0) {\n                    for (const [name, changes] of pendingChanges.value) {\n                        // \n                        const avatarIdx = avatars.findIndex(i => i.name === name);\n                        if (avatarIdx !== -1) {\n                            //  Object.assign  changes  extra \n                            const item = avatars[avatarIdx];\n                            avatars[avatarIdx] = {\n                                ...item,\n                                offsetX: changes.offsetX ?? item.offsetX,\n                                offsetY: changes.offsetY ?? item.offsetY,\n                                scale: changes.scale ?? item.scale,\n                                url: changes.url ?? item.url,\n                                // avatarUrl  url \n                                avatarUrl: changes.url ?? item.avatarUrl,\n                                source: changes.url ? 'url' : item.source,\n                                displayLabel: changes.displayLabel ?? item.displayLabel,\n                                labelIndices: changes.labelIndices ?? item.labelIndices,\n                                label: changes.displayLabel ?? item.label,\n                                aliases: changes.aliases ?? item.aliases,\n                                aliasesText: changes.aliases ? changes.aliases.join(', ') : item.aliasesText,\n                            };\n                        }\n                        // \n                        const factionIdx = factions.findIndex(i => i.name === name);\n                        if (factionIdx !== -1) {\n                            const item = factions[factionIdx];\n                            factions[factionIdx] = {\n                                ...item,\n                                offsetX: changes.offsetX ?? item.offsetX,\n                                offsetY: changes.offsetY ?? item.offsetY,\n                                scale: changes.scale ?? item.scale,\n                                url: changes.url ?? item.url,\n                                avatarUrl: changes.url ?? item.avatarUrl,\n                                source: changes.url ? 'url' : item.source,\n                                displayLabel: changes.displayLabel ?? item.displayLabel,\n                                labelIndices: changes.labelIndices ?? item.labelIndices,\n                                label: changes.displayLabel ?? item.label,\n                                aliases: changes.aliases ?? item.aliases,\n                                aliasesText: changes.aliases ? changes.aliases.join(', ') : item.aliasesText,\n                            };\n                        }\n                    }\n                }\n                avatarList.value = avatars;\n                factionList.value = factions;\n            }\n            catch (e) {\n                console.error('[AvatarManager] :', e);\n                toast.error('');\n            }\n            finally {\n                isLoading.value = false;\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function switchTab(tab) {\n            activeTab.value = tab;\n            searchQuery.value = '';\n            exitDeleteMode();\n        }\n        function handleClose() {\n            if (hasChanges.value) {\n                if (!confirm('')) {\n                    return;\n                }\n            }\n            pendingChanges.value.clear();\n            emit('close');\n        }\n        function getInitial(name) {\n            if (!name)\n                return '?';\n            // \n            const isEnglish = /^[A-Za-z\\s'-]+$/.test(name) && name.includes(' ');\n            if (isEnglish) {\n                // \n                const firstName = name.split(' ')[0];\n                return firstName.length > 6 ? firstName.slice(0, 6) : firstName;\n            }\n            // \n            return name[name.length - 1];\n        }\n        function getSourceLabel(source) {\n            switch (source) {\n                case 'local':\n                    return '';\n                case 'url':\n                    return 'URL';\n                case 'auto':\n                    return ''; // \"\"\n                default:\n                    return '';\n            }\n        }\n        function getAvatarStyle(item) {\n            if (!item.avatarUrl)\n                return {};\n            return {\n                backgroundImage: `url('${item.avatarUrl}')`,\n                backgroundPosition: `${item.offsetX}% ${item.offsetY}%`,\n                backgroundSize: `${item.scale}%`,\n            };\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function toggleImportMenu(itemId) {\n            activeImportMenu.value = activeImportMenu.value === itemId ? null : itemId;\n        }\n        function closeImportMenu() {\n            activeImportMenu.value = null;\n        }\n        function importLocal(item) {\n            closeImportMenu();\n            currentUploadItem.value = item;\n            fileInputRef.value?.click();\n        }\n        // \n        function importCharacterAvatar(item) {\n            closeImportMenu();\n            const tavernUrl = avatarManager.getSillyTavernCharacterAvatar();\n            if (tavernUrl) {\n                addPendingChange(item.name, { url: tavernUrl });\n                updateListItem(item.id, {\n                    url: tavernUrl,\n                    avatarUrl: tavernUrl,\n                    source: 'url',\n                });\n            }\n            else {\n                alert('');\n            }\n        }\n        // \n        function importUserAvatar(item) {\n            closeImportMenu();\n            const tavernUrl = avatarManager.getSillyTavernUserAvatar();\n            if (tavernUrl) {\n                addPendingChange(item.name, { url: tavernUrl });\n                updateListItem(item.id, {\n                    url: tavernUrl,\n                    avatarUrl: tavernUrl,\n                    source: 'url',\n                });\n            }\n            else {\n                alert('');\n            }\n        }\n        async function handleFileSelect(event) {\n            const input = event.target;\n            const file = input.files?.[0];\n            if (!file || !currentUploadItem.value) {\n                input.value = '';\n                return;\n            }\n            const item = currentUploadItem.value;\n            try {\n                //  Base64 \n                const base64 = await fileToBase64(file);\n                //  300px 0.85\n                const compressedBase64 = await compressImage(base64, 300, 0.85);\n                //  base64  Blob\n                const response = await fetch(compressedBase64);\n                const blob = await response.blob();\n                //  IndexedDB\n                await avatarManager.saveAvatar({\n                    name: item.name,\n                    blob: blob,\n                    offsetX: item.offsetX,\n                    offsetY: item.offsetY,\n                    scale: item.scale,\n                    aliases: [...toRaw(item.aliases)], //  Proxy\n                    updatedAt: Date.now(),\n                });\n                // \n                await loadData();\n                emit('update');\n                toast.success('');\n            }\n            catch (e) {\n                console.error('[AvatarManager] :', e);\n                alert('');\n            }\n            input.value = '';\n            currentUploadItem.value = null;\n        }\n        // ============================================================\n        // URL & \n        // ============================================================\n        function updateUrl(item, url) {\n            const trimmedUrl = url.trim();\n            addPendingChange(item.name, { url: trimmedUrl || undefined });\n            updateListItem(item.id, {\n                url: trimmedUrl || undefined,\n                avatarUrl: trimmedUrl || item.avatarUrl, // \n                source: trimmedUrl ? 'url' : item.source,\n            });\n        }\n        function updateAliases(item, aliasesText) {\n            const aliases = aliasesText\n                .split(/[,\\s]+/)\n                .map(s => s.trim())\n                .filter(Boolean);\n            addPendingChange(item.name, { aliases });\n            updateListItem(item.id, {\n                aliases,\n                aliasesText: aliases.join(', '),\n            });\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function openLabelDialog(item) {\n            // \n            const graphConfig = getGraphConfig();\n            const labelConfig = graphConfig.labels?.[item.name];\n            //  item\n            const updatedItem = {\n                ...item,\n                labelIndices: labelConfig?.selectedIndices || [],\n                displayLabel: labelConfig?.displayLabel,\n                label: labelConfig?.displayLabel || item.name,\n            };\n            currentLabelItem.value = updatedItem;\n            // \n            uiStore.openNodeLabelDialog({\n                fullName: updatedItem.name,\n                initialIndices: updatedItem.labelIndices || [],\n            }, {\n                onApply: (indices) => {\n                    //  indices  displayLabel\n                    const displayLabel = indices\n                        .sort((a, b) => a - b)\n                        .map(i => updatedItem.name[i])\n                        .join('');\n                    applyLabel(updatedItem, { displayLabel, selectedIndices: indices });\n                },\n                onReset: () => {\n                    resetLabel(updatedItem);\n                },\n            });\n        }\n        function applyLabel(item, data) {\n            //  pending changes\n            addPendingChange(item.name, {\n                displayLabel: data.displayLabel,\n                labelIndices: data.selectedIndices,\n            });\n            // \n            updateListItem(item.id, {\n                displayLabel: data.displayLabel,\n                labelIndices: data.selectedIndices,\n                label: data.displayLabel,\n            });\n        }\n        function resetLabel(item) {\n            //  pending changes (undefined )\n            addPendingChange(item.name, {\n                displayLabel: undefined,\n                labelIndices: undefined,\n            });\n            // \n            updateListItem(item.id, {\n                displayLabel: undefined,\n                labelIndices: undefined,\n                label: item.name,\n            });\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function openCropDialog(item) {\n            if (!item.avatarUrl) {\n                // \n                currentUploadItem.value = item;\n                fileInputRef.value?.click();\n                return;\n            }\n            currentCropItem.value = item;\n            showCropDialog.value = true;\n        }\n        function closeCropDialog() {\n            showCropDialog.value = false;\n            currentCropItem.value = null;\n        }\n        function applyCrop(data) {\n            if (!currentCropItem.value)\n                return;\n            const item = currentCropItem.value;\n            addPendingChange(item.name, {\n                offsetX: data.offsetX,\n                offsetY: data.offsetY,\n                scale: data.scale,\n            });\n            updateListItem(item.id, {\n                offsetX: data.offsetX,\n                offsetY: data.offsetY,\n                scale: data.scale,\n            });\n            //  currentCropItem\n            currentCropItem.value = {\n                ...item,\n                offsetX: data.offsetX,\n                offsetY: data.offsetY,\n                scale: data.scale,\n            };\n            closeCropDialog();\n        }\n        async function handleCropUpload(file) {\n            if (!currentCropItem.value)\n                return;\n            //  handleFileSelect  currentUploadItem\n            currentUploadItem.value = currentCropItem.value;\n            //  event \n            const dataTransfer = new DataTransfer();\n            dataTransfer.items.add(file);\n            const event = { target: { files: dataTransfer.files, value: '' } };\n            await handleFileSelect(event);\n            closeCropDialog();\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function enterDeleteMode() {\n            isDeleteMode.value = true;\n            selectedForDelete.value.clear();\n        }\n        function exitDeleteMode() {\n            isDeleteMode.value = false;\n            selectedForDelete.value.clear();\n        }\n        function toggleDeleteSelection(itemId) {\n            const newSet = new Set(selectedForDelete.value);\n            if (newSet.has(itemId)) {\n                newSet.delete(itemId);\n            }\n            else {\n                newSet.add(itemId);\n            }\n            selectedForDelete.value = newSet;\n        }\n        async function confirmDelete() {\n            if (selectedForDelete.value.size === 0)\n                return;\n            const itemsToDelete = currentList.value.filter(i => selectedForDelete.value.has(i.id));\n            const names = itemsToDelete.map(i => i.name);\n            if (!confirm(` ${names.length} \\n\\n IndexedDB `)) {\n                return;\n            }\n            try {\n                //  IndexedDB \n                await avatarManager.deleteAvatars(names);\n                // \n                const config = getGraphConfig();\n                if (config.labels) {\n                    let configChanged = false;\n                    for (const name of names) {\n                        if (config.labels[name]) {\n                            delete config.labels[name];\n                            configChanged = true;\n                        }\n                    }\n                    if (configChanged) {\n                        saveGraphConfig(config);\n                    }\n                }\n                await loadData();\n                exitDeleteMode();\n                emit('update');\n                toast.success('');\n            }\n            catch (e) {\n                console.error('[AvatarManager] :', e);\n                toast.error('');\n            }\n        }\n        // ============================================================\n        // Pending Changes & Save\n        // ============================================================\n        function addPendingChange(name, changes) {\n            const existing = pendingChanges.value.get(name) || {};\n            pendingChanges.value.set(name, { ...existing, ...changes });\n        }\n        /**  avatarList  factionList */\n        function updateListItem(id, changes) {\n            //  avatarList \n            const avatarIdx = avatarList.value.findIndex(i => i.id === id);\n            if (avatarIdx !== -1) {\n                avatarList.value[avatarIdx] = { ...avatarList.value[avatarIdx], ...changes };\n            }\n            //  factionList \n            const factionIdx = factionList.value.findIndex(i => i.id === id);\n            if (factionIdx !== -1) {\n                factionList.value[factionIdx] = { ...factionList.value[factionIdx], ...changes };\n            }\n        }\n        async function saveAll() {\n            if (pendingChanges.value.size === 0)\n                return;\n            try {\n                const config = getGraphConfig();\n                if (!config.labels)\n                    config.labels = {};\n                let configChanged = false;\n                for (const [name, changes] of pendingChanges.value) {\n                    // 1.  ()\n                    if (changes.displayLabel !== undefined || changes.labelIndices !== undefined) {\n                        if (changes.displayLabel) {\n                            config.labels[name] = {\n                                displayLabel: changes.displayLabel,\n                                selectedIndices: changes.labelIndices || [],\n                            };\n                        }\n                        else if (changes.displayLabel === undefined && changes.labelIndices === undefined) {\n                            //  undefined \n                            delete config.labels[name];\n                        }\n                        configChanged = true;\n                    }\n                    // 2.  ( IndexedDB)\n                    //  saveAvatar\n                    if (changes.url !== undefined ||\n                        changes.offsetX !== undefined ||\n                        changes.offsetY !== undefined ||\n                        changes.scale !== undefined ||\n                        changes.aliases !== undefined) {\n                        const existing = await avatarManager.getAvatar(name);\n                        // \n                        let aliases = [];\n                        if (changes.aliases !== undefined) {\n                            aliases = [...toRaw(changes.aliases)];\n                        }\n                        else if (existing?.aliases) {\n                            aliases = [...existing.aliases];\n                        }\n                        const record = {\n                            name,\n                            blob: existing?.blob,\n                            url: changes.url !== undefined ? changes.url : existing?.url,\n                            offsetX: changes.offsetX ?? existing?.offsetX ?? 50,\n                            offsetY: changes.offsetY ?? existing?.offsetY ?? 50,\n                            scale: changes.scale ?? existing?.scale ?? 150,\n                            aliases,\n                            updatedAt: Date.now(),\n                        };\n                        await avatarManager.saveAvatar(record);\n                    }\n                }\n                if (configChanged) {\n                    saveGraphConfig(config);\n                }\n                pendingChanges.value.clear();\n                toast.success('');\n                emit('update');\n                //  label-change\n                emit('label-change');\n            }\n            catch (e) {\n                console.error('[AvatarManager] :', e);\n                toast.error(': ' + (e instanceof Error ? e.message : String(e)));\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        onMounted(() => {\n            if (props.visible) {\n                loadData();\n            }\n        });\n        watch(() => props.visible, visible => {\n            if (visible) {\n                loadData();\n            }\n            else {\n                // \n                isDeleteMode.value = false;\n                selectedForDelete.value.clear();\n                activeImportMenu.value = null;\n                activeTab.value = 'character';\n                pendingChanges.value.clear();\n            }\n        });\n        // \n        watch(activeImportMenu, val => {\n            if (val) {\n                const handleClick = () => {\n                    activeImportMenu.value = null;\n                    document.removeEventListener('click', handleClick);\n                };\n                setTimeout(() => {\n                    document.addEventListener('click', handleClick);\n                }, 0);\n            }\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-avatar-manager-overlay\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-user-circle\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\" Tab  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"acu-avatar-tab-btn\", { active: activeTab.value === 'character' }]),\n                                onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (switchTab('character')), [\"stop\"]))\n                            }, [...(_cache[5] || (_cache[5] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-user\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 2 /* CLASS */),\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"acu-avatar-tab-btn\", { active: activeTab.value === 'faction' }]),\n                                onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (switchTab('faction')), [\"stop\"]))\n                            }, [...(_cache[6] || (_cache[6] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-users\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 2 /* CLASS */)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _cache[8] || (_cache[8] = _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((searchQuery).value = $event)),\n                                type: \"text\",\n                                class: \"acu-avatar-search-input\",\n                                placeholder: activeTab.value === 'character' ? '...' : '...'\n                            }, null, 8 /* PROPS */, _hoisted_5), [\n                                [_vModelText, searchQuery.value]\n                            ]),\n                            (searchQuery.value)\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 0,\n                                    class: \"acu-search-clear\",\n                                    onClick: _cache[3] || (_cache[3] = _withModifiers(($event) => (searchQuery.value = ''), [\"stop\"]))\n                                }, [...(_cache[7] || (_cache[7] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createCommentVNode(\"  -  \"),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _createCommentVNode(\"  \"),\n                            (isLoading.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [...(_cache[9] || (_cache[9] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-spinner fa-spin\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", null, \"...\", -1 /* CACHED */)\n                                    ]))]))\n                                : (filteredList.value.length === 0)\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_8, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(activeTab.value === 'character' ? 'fas fa-user-slash' : 'fas fa-users-slash')\n                                            }, null, 2 /* CLASS */),\n                                            _createElementVNode(\"p\", null, _toDisplayString(searchQuery.value ? '' : activeTab.value === 'character' ? '' : ''), 1 /* TEXT */)\n                                        ])\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_9, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredList.value, (item) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: item.id,\n                                                    class: _normalizeClass([\"acu-avatar-item\", { selected: selectedForDelete.value.has(item.id) }])\n                                                }, [\n                                                    _createCommentVNode(\"  \"),\n                                                    (isDeleteMode.value)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", {\n                                                            key: 0,\n                                                            class: \"acu-avatar-checkbox\",\n                                                            onClick: _withModifiers(($event) => (toggleDeleteSelection(item.id)), [\"stop\"])\n                                                        }, [\n                                                            _createElementVNode(\"i\", {\n                                                                class: _normalizeClass(selectedForDelete.value.has(item.id) ? 'fas fa-check-square' : 'far fa-square')\n                                                            }, null, 2 /* CLASS */)\n                                                        ], 8 /* PROPS */, _hoisted_10))\n                                                        : _createCommentVNode(\"v-if\", true),\n                                                    _createCommentVNode(\"  +  \"),\n                                                    _createElementVNode(\"div\", _hoisted_11, [\n                                                        _createCommentVNode(\"  \"),\n                                                        _createElementVNode(\"div\", {\n                                                            class: _normalizeClass([\"acu-avatar-preview\", { 'has-image': !!item.avatarUrl }]),\n                                                            style: _normalizeStyle(getAvatarStyle(item)),\n                                                            onClick: _withModifiers(($event) => (openCropDialog(item)), [\"stop\"])\n                                                        }, [\n                                                            (!item.avatarUrl)\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_13, _toDisplayString(item.displayLabel || getInitial(item.name)), 1 /* TEXT */))\n                                                                : _createCommentVNode(\"v-if\", true),\n                                                            (!item.avatarUrl)\n                                                                ? (_openBlock(), _createElementBlock(\"i\", _hoisted_14))\n                                                                : _createCommentVNode(\"v-if\", true)\n                                                        ], 14 /* CLASS, STYLE, PROPS */, _hoisted_12),\n                                                        _createCommentVNode(\"  \"),\n                                                        (item.source)\n                                                            ? (_openBlock(), _createElementBlock(\"span\", {\n                                                                key: 0,\n                                                                class: _normalizeClass([\"acu-avatar-source\", 'acu-source-' + item.source])\n                                                            }, _toDisplayString(getSourceLabel(item.source)), 3 /* TEXT, CLASS */))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_15, [\n                                                        _createCommentVNode(\"  \"),\n                                                        _createElementVNode(\"div\", _hoisted_16, [\n                                                            _createCommentVNode(\"  +  \"),\n                                                            _createElementVNode(\"div\", _hoisted_17, [\n                                                                _createElementVNode(\"span\", _hoisted_18, _toDisplayString(item.name), 1 /* TEXT */),\n                                                                (item.displayLabel)\n                                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_19, \"(\" + _toDisplayString(item.displayLabel) + \")\", 1 /* TEXT */))\n                                                                    : _createCommentVNode(\"v-if\", true)\n                                                            ]),\n                                                            _createCommentVNode(\"  \"),\n                                                            _createElementVNode(\"div\", _hoisted_20, [\n                                                                _createCommentVNode(\"  \"),\n                                                                _createElementVNode(\"button\", {\n                                                                    class: \"acu-avatar-name-btn\",\n                                                                    title: \"\",\n                                                                    onClick: _withModifiers(($event) => (openLabelDialog(item)), [\"stop\"])\n                                                                }, \"  \", 8 /* PROPS */, _hoisted_21),\n                                                                _createCommentVNode(\"  \"),\n                                                                _createElementVNode(\"div\", _hoisted_22, [\n                                                                    _createElementVNode(\"button\", {\n                                                                        class: \"acu-avatar-import-btn\",\n                                                                        title: \"\",\n                                                                        onClick: _withModifiers(($event) => (toggleImportMenu(item.id)), [\"stop\"])\n                                                                    }, [...(_cache[10] || (_cache[10] = [\n                                                                            _createTextVNode(\"  \", -1 /* CACHED */),\n                                                                            _createElementVNode(\"i\", { class: \"fas fa-caret-down\" }, null, -1 /* CACHED */)\n                                                                        ]))], 8 /* PROPS */, _hoisted_23),\n                                                                    (activeImportMenu.value === item.id)\n                                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [\n                                                                            _createElementVNode(\"div\", {\n                                                                                class: \"acu-dropdown-item\",\n                                                                                onClick: _withModifiers(($event) => (importLocal(item)), [\"stop\"])\n                                                                            }, [...(_cache[11] || (_cache[11] = [\n                                                                                    _createElementVNode(\"i\", { class: \"fas fa-upload\" }, null, -1 /* CACHED */),\n                                                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                                                ]))], 8 /* PROPS */, _hoisted_25),\n                                                                            _createCommentVNode(\"  \"),\n                                                                            (activeTab.value === 'character')\n                                                                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                                                                    _createElementVNode(\"div\", {\n                                                                                        class: _normalizeClass([\"acu-dropdown-item\", { disabled: !hasTavernCharacterAvatar.value }]),\n                                                                                        onClick: _withModifiers(($event) => (importCharacterAvatar(item)), [\"stop\"])\n                                                                                    }, [...(_cache[12] || (_cache[12] = [\n                                                                                            _createElementVNode(\"i\", { class: \"fas fa-user-circle\" }, null, -1 /* CACHED */),\n                                                                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                                                                        ]))], 10 /* CLASS, PROPS */, _hoisted_26),\n                                                                                    _createElementVNode(\"div\", {\n                                                                                        class: _normalizeClass([\"acu-dropdown-item\", { disabled: !hasTavernUserAvatar.value }]),\n                                                                                        onClick: _withModifiers(($event) => (importUserAvatar(item)), [\"stop\"])\n                                                                                    }, [...(_cache[13] || (_cache[13] = [\n                                                                                            _createElementVNode(\"i\", { class: \"fas fa-user\" }, null, -1 /* CACHED */),\n                                                                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                                                                        ]))], 10 /* CLASS, PROPS */, _hoisted_27)\n                                                                                ], 64 /* STABLE_FRAGMENT */))\n                                                                                : _createCommentVNode(\"v-if\", true)\n                                                                        ]))\n                                                                        : _createCommentVNode(\"v-if\", true)\n                                                                ])\n                                                            ])\n                                                        ]),\n                                                        _createCommentVNode(\" URL  \"),\n                                                        _createElementVNode(\"div\", _hoisted_28, [\n                                                            _cache[14] || (_cache[14] = _createElementVNode(\"span\", { class: \"acu-url-label\" }, \"URL:\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"input\", {\n                                                                type: \"text\",\n                                                                class: \"acu-avatar-url-input\",\n                                                                placeholder: \"URL...\",\n                                                                value: item.url || '',\n                                                                onChange: ($event) => (updateUrl(item, $event.target.value)),\n                                                                onBlur: ($event) => (updateUrl(item, $event.target.value))\n                                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_29)\n                                                        ]),\n                                                        _createCommentVNode(\"  \"),\n                                                        _createElementVNode(\"div\", _hoisted_30, [\n                                                            _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"acu-alias-label\" }, \":\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"input\", {\n                                                                type: \"text\",\n                                                                class: \"acu-avatar-alias-input\",\n                                                                placeholder: \"...\",\n                                                                value: item.aliasesText || '',\n                                                                onChange: ($event) => (updateAliases(item, $event.target.value)),\n                                                                onBlur: ($event) => (updateAliases(item, $event.target.value))\n                                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_31)\n                                                        ])\n                                                    ])\n                                                ], 2 /* CLASS */));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_32, [\n                            _createElementVNode(\"div\", _hoisted_33, [\n                                (!isDeleteMode.value)\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 0,\n                                        class: \"acu-modal-btn secondary\",\n                                        onClick: _withModifiers(enterDeleteMode, [\"stop\"])\n                                    }, [...(_cache[16] || (_cache[16] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-trash-alt\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))]))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-modal-btn secondary\",\n                                            onClick: _withModifiers(exitDeleteMode, [\"stop\"])\n                                        }, \"\"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-modal-btn danger\",\n                                            disabled: selectedForDelete.value.size === 0,\n                                            onClick: _withModifiers(confirmDelete, [\"stop\"])\n                                        }, \"  (\" + _toDisplayString(selectedForDelete.value.size) + \") \", 9 /* TEXT, PROPS */, _hoisted_34)\n                                    ], 64 /* STABLE_FRAGMENT */))\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_35, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-modal-btn primary\",\n                                    disabled: !hasChanges.value,\n                                    onClick: _withModifiers(saveAll, [\"stop\"])\n                                }, [...(_cache[17] || (_cache[17] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-save\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))], 8 /* PROPS */, _hoisted_36)\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"input\", {\n                        ref_key: \"fileInputRef\",\n                        ref: fileInputRef,\n                        type: \"file\",\n                        accept: \"image/*\",\n                        style: { \"display\": \"none\" },\n                        onChange: handleFileSelect\n                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */),\n                    _createCommentVNode(\"  \"),\n                    (showCropDialog.value)\n                        ? (_openBlock(), _createBlock(AvatarCropDialog, {\n                            key: 0,\n                            visible: showCropDialog.value,\n                            \"image-url\": currentCropItem.value?.avatarUrl || '',\n                            name: currentCropItem.value?.name || '',\n                            \"initial-offset-x\": currentCropItem.value?.offsetX ?? 50,\n                            \"initial-offset-y\": currentCropItem.value?.offsetY ?? 50,\n                            \"initial-scale\": currentCropItem.value?.scale ?? 150,\n                            onClose: closeCropDialog,\n                            onApply: applyCrop,\n                            onUpload: handleCropUpload\n                        }, null, 8 /* PROPS */, [\"visible\", \"image-url\", \"name\", \"initial-offset-x\", \"initial-offset-y\", \"initial-scale\"]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AvatarManagerDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AvatarManagerDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, openBlock as _openBlock, createElementBlock as _createElementBlock, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-faction-settings-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-title\" };\nconst _hoisted_4 = { class: \"acu-modal-body\" };\nconst _hoisted_5 = { class: \"acu-settings-section\" };\nconst _hoisted_6 = { class: \"acu-settings-group\" };\nconst _hoisted_7 = { class: \"acu-settings-row\" };\nconst _hoisted_8 = { class: \"acu-settings-control\" };\nconst _hoisted_9 = { class: \"acu-settings-row\" };\nconst _hoisted_10 = { class: \"acu-settings-control\" };\nconst _hoisted_11 = { class: \"acu-settings-row\" };\nconst _hoisted_12 = { class: \"acu-settings-label\" };\nconst _hoisted_13 = { class: \"hint\" };\nconst _hoisted_14 = { class: \"acu-settings-control\" };\nconst _hoisted_15 = { class: \"acu-settings-section\" };\nconst _hoisted_16 = { class: \"acu-settings-group\" };\nconst _hoisted_17 = { class: \"acu-settings-row\" };\nconst _hoisted_18 = { class: \"acu-settings-control\" };\nconst _hoisted_19 = { class: \"acu-settings-row\" };\nconst _hoisted_20 = { class: \"acu-settings-label\" };\nconst _hoisted_21 = { class: \"hint\" };\nconst _hoisted_22 = { class: \"acu-settings-control\" };\nconst _hoisted_23 = { class: \"acu-settings-section\" };\nconst _hoisted_24 = { class: \"acu-settings-group\" };\nconst _hoisted_25 = { class: \"acu-settings-row acu-action-row\" };\nimport { reactive, watch, watchEffect } from 'vue';\nimport { DEFAULT_FACTION_STYLE, useGraphConfigStore } from '../../../stores/useGraphConfigStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'FactionSettingsDialog',\n    props: {\n        visible: { type: Boolean, default: false },\n        factionId: { default: '' },\n        factionName: { default: '' }\n    },\n    emits: [\"close\", \"save\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * FactionSettingsDialog.vue - \n         *\n         * \n         * - \n         * - \n         * - \n         * - \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Store\n        // ============================================================\n        const graphConfigStore = useGraphConfigStore();\n        // ============================================================\n        // \n        // ============================================================\n        const localConfig = reactive({\n            borderColor: DEFAULT_FACTION_STYLE.border,\n            backgroundColor: extractBaseColor(DEFAULT_FACTION_STYLE.background),\n            backgroundOpacity: DEFAULT_FACTION_STYLE.opacity ?? 10,\n            labelPosition: 'top',\n            labelFontSize: 14,\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         *  rgba  hex\n         *  hex \n         */\n        function extractBaseColor(color) {\n            if (color.startsWith('#')) {\n                return color;\n            }\n            //  rgba(r, g, b, a)  RGB  hex\n            const match = color.match(/rgba?\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)/);\n            if (match) {\n                const r = parseInt(match[1], 10);\n                const g = parseInt(match[2], 10);\n                const b = parseInt(match[3], 10);\n                return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\n            }\n            return '#808080'; // \n        }\n        /**\n         *  hex  rgba\n         */\n        function hexToRgba(hex, opacity) {\n            const r = parseInt(hex.slice(1, 3), 16);\n            const g = parseInt(hex.slice(3, 5), 16);\n            const b = parseInt(hex.slice(5, 7), 16);\n            return `rgba(${r}, ${g}, ${b}, ${opacity / 100})`;\n        }\n        // ============================================================\n        //  props \n        // ============================================================\n        watch(() => props.visible, newVisible => {\n            if (newVisible && props.factionId) {\n                loadConfig();\n            }\n        });\n        watch(() => props.factionId, newId => {\n            if (newId && props.visible) {\n                loadConfig();\n            }\n        });\n        /**\n         *  Store \n         */\n        function loadConfig() {\n            const override = graphConfigStore.getFactionOverride(props.factionId);\n            if (override) {\n                localConfig.borderColor = override.border || DEFAULT_FACTION_STYLE.border;\n                localConfig.backgroundColor = extractBaseColor(override.background || DEFAULT_FACTION_STYLE.background);\n                localConfig.backgroundOpacity = override.opacity ?? DEFAULT_FACTION_STYLE.opacity ?? 10;\n                localConfig.labelPosition = override.labelPosition ?? 'top';\n                localConfig.labelFontSize = override.labelFontSize ?? graphConfigStore.config.factionLabelFontSize;\n            }\n            else {\n                // \n                localConfig.borderColor = DEFAULT_FACTION_STYLE.border;\n                localConfig.backgroundColor = extractBaseColor(DEFAULT_FACTION_STYLE.background);\n                localConfig.backgroundOpacity = DEFAULT_FACTION_STYLE.opacity ?? 10;\n                localConfig.labelPosition = 'top';\n                localConfig.labelFontSize = graphConfigStore.config.factionLabelFontSize;\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  store */\n        watchEffect(() => {\n            if (!props.visible || !props.factionId)\n                return;\n            graphConfigStore.setFactionOverride(props.factionId, {\n                border: localConfig.borderColor,\n                background: hexToRgba(localConfig.backgroundColor, localConfig.backgroundOpacity),\n                opacity: localConfig.backgroundOpacity,\n                labelPosition: localConfig.labelPosition,\n                labelFontSize: localConfig.labelFontSize,\n            });\n            emit('save');\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function handleClose() {\n            emit('close');\n        }\n        /**  */\n        function handleReset() {\n            graphConfigStore.removeFactionOverride(props.factionId);\n            // \n            localConfig.borderColor = DEFAULT_FACTION_STYLE.border;\n            localConfig.backgroundColor = extractBaseColor(DEFAULT_FACTION_STYLE.background);\n            localConfig.backgroundOpacity = DEFAULT_FACTION_STYLE.opacity ?? 10;\n            localConfig.labelPosition = 'top';\n            localConfig.labelFontSize = graphConfigStore.config.factionLabelFontSize;\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"modal\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-modal-container\",\n                            onClick: _withModifiers(handleClose, [\"self\"])\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_2, [\n                                    _createElementVNode(\"span\", _hoisted_3, \" - \" + _toDisplayString(__props.factionName), 1 /* TEXT */),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-close-pill\",\n                                        onClick: _withModifiers(handleClose, [\"stop\"])\n                                    }, \"\")\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_4, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_5, [\n                                        _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-palette\" }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_6, [\n                                            _createCommentVNode(\" &tag \"),\n                                            _createElementVNode(\"div\", _hoisted_7, [\n                                                _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                    _createTextVNode(\" &tag \"),\n                                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_8, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localConfig.borderColor) = $event)),\n                                                        type: \"color\",\n                                                        class: \"acu-dashed\",\n                                                        title: \"\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [_vModelText, localConfig.borderColor]\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_9, [\n                                                _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                    _createTextVNode(\"  \"),\n                                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_10, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((localConfig.backgroundColor) = $event)),\n                                                        type: \"color\",\n                                                        title: \"\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [_vModelText, localConfig.backgroundColor]\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_11, [\n                                                _createElementVNode(\"div\", _hoisted_12, [\n                                                    _cache[7] || (_cache[7] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_13, _toDisplayString(localConfig.backgroundOpacity) + \"%\", 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_14, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((localConfig.backgroundOpacity) = $event)),\n                                                        type: \"range\",\n                                                        min: \"0\",\n                                                        max: \"100\",\n                                                        step: \"5\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [\n                                                            _vModelText,\n                                                            localConfig.backgroundOpacity,\n                                                            void 0,\n                                                            { number: true }\n                                                        ]\n                                                    ])\n                                                ])\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_15, [\n                                        _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-tag\" }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_16, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_17, [\n                                                _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                    _createTextVNode(\"  \"),\n                                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_18, [\n                                                    _withDirectives(_createElementVNode(\"select\", {\n                                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((localConfig.labelPosition) = $event))\n                                                    }, [...(_cache[9] || (_cache[9] = [\n                                                            _createElementVNode(\"option\", { value: \"top\" }, \"\", -1 /* CACHED */),\n                                                            _createElementVNode(\"option\", { value: \"bottom\" }, \"\", -1 /* CACHED */),\n                                                            _createElementVNode(\"option\", { value: \"top-left\" }, \"\", -1 /* CACHED */),\n                                                            _createElementVNode(\"option\", { value: \"top-right\" }, \"\", -1 /* CACHED */),\n                                                            _createElementVNode(\"option\", { value: \"bottom-left\" }, \"\", -1 /* CACHED */),\n                                                            _createElementVNode(\"option\", { value: \"bottom-right\" }, \"\", -1 /* CACHED */),\n                                                            _createElementVNode(\"option\", { value: \"none\" }, \"\", -1 /* CACHED */)\n                                                        ]))], 512 /* NEED_PATCH */), [\n                                                        [_vModelSelect, localConfig.labelPosition]\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_19, [\n                                                _createElementVNode(\"div\", _hoisted_20, [\n                                                    _cache[11] || (_cache[11] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_21, _toDisplayString(localConfig.labelFontSize) + \"px\", 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_22, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((localConfig.labelFontSize) = $event)),\n                                                        type: \"range\",\n                                                        min: \"10\",\n                                                        max: \"24\",\n                                                        step: \"1\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [\n                                                            _vModelText,\n                                                            localConfig.labelFontSize,\n                                                            void 0,\n                                                            { number: true }\n                                                        ]\n                                                    ])\n                                                ])\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_23, [\n                                        _createElementVNode(\"div\", _hoisted_24, [\n                                            _createElementVNode(\"div\", _hoisted_25, [\n                                                _createElementVNode(\"button\", {\n                                                    class: \"acu-action-btn acu-action-btn-secondary\",\n                                                    onClick: _withModifiers(handleReset, [\"stop\"])\n                                                }, [...(_cache[13] || (_cache[13] = [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                                    ]))])\n                                            ])\n                                        ])\n                                    ])\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./FactionSettingsDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./FactionSettingsDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./FactionSettingsDialog.vue?vue&type=style&index=0&id=65bec291&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, normalizeStyle as _normalizeStyle, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-graph-settings-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-body\" };\nconst _hoisted_4 = { class: \"acu-settings-section\" };\nconst _hoisted_5 = { class: \"acu-settings-group\" };\nconst _hoisted_6 = { class: \"acu-settings-row\" };\nconst _hoisted_7 = { class: \"acu-settings-label\" };\nconst _hoisted_8 = { class: \"hint\" };\nconst _hoisted_9 = { class: \"acu-settings-control\" };\nconst _hoisted_10 = { class: \"acu-settings-row\" };\nconst _hoisted_11 = { class: \"acu-settings-label\" };\nconst _hoisted_12 = { class: \"hint\" };\nconst _hoisted_13 = { class: \"acu-settings-control\" };\nconst _hoisted_14 = { class: \"acu-settings-row\" };\nconst _hoisted_15 = { class: \"acu-settings-control\" };\nconst _hoisted_16 = { class: \"acu-switch\" };\nconst _hoisted_17 = { class: \"acu-settings-section\" };\nconst _hoisted_18 = { class: \"acu-settings-group\" };\nconst _hoisted_19 = { class: \"acu-settings-row\" };\nconst _hoisted_20 = { class: \"acu-settings-label\" };\nconst _hoisted_21 = { class: \"hint\" };\nconst _hoisted_22 = { class: \"acu-settings-control\" };\nconst _hoisted_23 = { class: \"acu-settings-row\" };\nconst _hoisted_24 = { class: \"acu-settings-label\" };\nconst _hoisted_25 = { class: \"hint\" };\nconst _hoisted_26 = { class: \"acu-settings-control\" };\nconst _hoisted_27 = { class: \"acu-settings-row\" };\nconst _hoisted_28 = { class: \"acu-settings-label\" };\nconst _hoisted_29 = { class: \"hint\" };\nconst _hoisted_30 = { class: \"acu-settings-control\" };\nconst _hoisted_31 = {\n    key: 0,\n    class: \"acu-settings-section\"\n};\nconst _hoisted_32 = { class: \"acu-settings-title\" };\nconst _hoisted_33 = { style: { \"font-weight\": \"400\", \"font-size\": \"11px\", \"color\": \"var(--acu-text-sub)\", \"margin-left\": \"auto\" } };\nconst _hoisted_34 = { class: \"acu-faction-color-group acu-faction-color-scrollable\" };\nconst _hoisted_35 = { class: \"acu-settings-label\" };\nconst _hoisted_36 = { class: \"acu-settings-control acu-faction-color-control\" };\nconst _hoisted_37 = [\"value\", \"onInput\"];\nconst _hoisted_38 = [\"value\", \"onInput\"];\nconst _hoisted_39 = [\"value\", \"title\", \"onInput\"];\nconst _hoisted_40 = { class: \"acu-opacity-value\" };\nconst _hoisted_41 = { class: \"acu-settings-section\" };\nconst _hoisted_42 = { class: \"acu-settings-group\" };\nconst _hoisted_43 = { class: \"acu-settings-row\" };\nconst _hoisted_44 = { class: \"acu-settings-control\" };\nconst _hoisted_45 = { class: \"acu-switch\" };\nconst _hoisted_46 = [\"checked\"];\nconst _hoisted_47 = { class: \"acu-settings-section\" };\nconst _hoisted_48 = { class: \"acu-settings-group\" };\nconst _hoisted_49 = { class: \"acu-settings-row\" };\nconst _hoisted_50 = { class: \"acu-settings-control\" };\nconst _hoisted_51 = { class: \"acu-switch\" };\nconst _hoisted_52 = {\n    key: 0,\n    class: \"acu-legend-items-section\"\n};\nconst _hoisted_53 = { class: \"acu-legend-items-header\" };\nconst _hoisted_54 = { class: \"acu-legend-items-list\" };\nconst _hoisted_55 = {\n    key: 0,\n    class: \"acu-legend-item-edit\"\n};\nconst _hoisted_56 = { class: \"acu-legend-edit-row\" };\nconst _hoisted_57 = { class: \"acu-legend-edit-row\" };\nconst _hoisted_58 = { class: \"acu-legend-edit-actions\" };\nconst _hoisted_59 = { class: \"acu-legend-item-display\" };\nconst _hoisted_60 = { class: \"acu-legend-emoji\" };\nconst _hoisted_61 = { class: \"acu-legend-label\" };\nconst _hoisted_62 = { class: \"acu-legend-keywords\" };\nconst _hoisted_63 = {\n    key: 0,\n    class: \"acu-legend-keyword-more\"\n};\nconst _hoisted_64 = { class: \"acu-legend-item-actions\" };\nconst _hoisted_65 = [\"onClick\"];\nconst _hoisted_66 = [\"onClick\"];\nconst _hoisted_67 = {\n    key: 0,\n    class: \"acu-legend-empty\"\n};\nconst _hoisted_68 = { class: \"acu-legend-reset-wrapper\" };\nconst _hoisted_69 = { class: \"acu-settings-section\" };\nconst _hoisted_70 = { class: \"acu-settings-group\" };\nconst _hoisted_71 = { class: \"acu-settings-row acu-action-row\" };\nimport { computed, reactive, ref } from 'vue';\nimport { DEFAULT_FACTION_STYLE, FACTION_COLOR_PALETTE, useGraphConfigStore, } from '../../../stores/useGraphConfigStore';\nimport { useUIStore } from '../../../stores/useUIStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'GraphSettingsDialog',\n    props: {\n        visible: { type: Boolean },\n        factions: {}\n    },\n    emits: [\"close\", \"open-avatar-manager\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * GraphSettingsDialog.vue - \n         *\n         * \n         */\n        const props = __props;\n        const emit = __emit;\n        const graphConfigStore = useGraphConfigStore();\n        const uiStore = useUIStore();\n        //  store  config\n        const config = computed(() => graphConfigStore.config);\n        // \n        const factions = computed(() => props.factions || []);\n        // \n        const legendConfig = computed(() => graphConfigStore.getLegendConfig());\n        // \n        const editingLegendId = ref(null);\n        const editingLegendData = reactive({\n            label: '',\n            color: '#888888',\n            emoji: '',\n            keywordsStr: '',\n        });\n        /**\n         * \n         */\n        function getFactionBorderColor(factionName) {\n            const colorConfig = graphConfigStore.config.factionColors[factionName];\n            if (colorConfig) {\n                return colorConfig.border;\n            }\n            // \n            const index = factions.value.indexOf(factionName);\n            if (index >= 0 && index < FACTION_COLOR_PALETTE.length) {\n                return FACTION_COLOR_PALETTE[index].border;\n            }\n            // \n            return DEFAULT_FACTION_STYLE.border;\n        }\n        /**\n         *  rgba  hex\n         */\n        function getFactionBackgroundColor(factionName) {\n            const colorConfig = graphConfigStore.config.factionColors[factionName];\n            if (colorConfig) {\n                //  rgba  hex\n                const match = colorConfig.background.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)/);\n                if (match) {\n                    const r = parseInt(match[1]);\n                    const g = parseInt(match[2]);\n                    const b = parseInt(match[3]);\n                    return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\n                }\n                return colorConfig.background;\n            }\n            // \n            const index = factions.value.indexOf(factionName);\n            let defaultBg;\n            if (index >= 0 && index < FACTION_COLOR_PALETTE.length) {\n                defaultBg = FACTION_COLOR_PALETTE[index].background;\n            }\n            else {\n                // \n                defaultBg = DEFAULT_FACTION_STYLE.background;\n            }\n            const match = defaultBg.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)/);\n            if (match) {\n                const r = parseInt(match[1]);\n                const g = parseInt(match[2]);\n                const b = parseInt(match[3]);\n                return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\n            }\n            return '#808080';\n        }\n        /**\n         * \n         */\n        function getFactionOpacity(factionName) {\n            const colorConfig = graphConfigStore.config.factionColors[factionName];\n            if (colorConfig && colorConfig.opacity !== undefined) {\n                return colorConfig.opacity;\n            }\n            // \n            const index = factions.value.indexOf(factionName);\n            if (index >= 0 && index < FACTION_COLOR_PALETTE.length) {\n                return FACTION_COLOR_PALETTE[index].opacity;\n            }\n            //  10%\n            return DEFAULT_FACTION_STYLE.opacity ?? 10;\n        }\n        /**\n         * \n         */\n        function handleFactionBorderChange(factionName, event) {\n            const target = event.target;\n            const newBorderColor = target.value;\n            const currentConfig = graphConfigStore.config.factionColors[factionName] || {\n                border: getFactionBorderColor(factionName),\n                background: hexToRgba(getFactionBackgroundColor(factionName), 0.1),\n            };\n            graphConfigStore.setFactionColor(factionName, {\n                ...currentConfig,\n                border: newBorderColor,\n            });\n        }\n        /**\n         * \n         */\n        function handleFactionBackgroundChange(factionName, event) {\n            const target = event.target;\n            const hexColor = target.value;\n            const currentOpacity = getFactionOpacity(factionName);\n            const currentConfig = graphConfigStore.config.factionColors[factionName] || {\n                border: getFactionBorderColor(factionName),\n                background: hexToRgba(hexColor, currentOpacity / 100),\n                opacity: currentOpacity,\n            };\n            graphConfigStore.setFactionColor(factionName, {\n                ...currentConfig,\n                background: hexToRgba(hexColor, currentOpacity / 100),\n            });\n        }\n        /**\n         * \n         */\n        function handleFactionOpacityChange(factionName, event) {\n            const target = event.target;\n            const opacity = parseInt(target.value, 10);\n            const hexColor = getFactionBackgroundColor(factionName);\n            const currentConfig = graphConfigStore.config.factionColors[factionName] || {\n                border: getFactionBorderColor(factionName),\n                background: hexToRgba(hexColor, opacity / 100),\n                opacity: opacity,\n            };\n            graphConfigStore.setFactionColor(factionName, {\n                ...currentConfig,\n                background: hexToRgba(hexColor, opacity / 100),\n                opacity: opacity,\n            });\n        }\n        /**\n         *  hex  rgba\n         */\n        function hexToRgba(hex, alpha) {\n            const r = parseInt(hex.slice(1, 3), 16);\n            const g = parseInt(hex.slice(3, 5), 16);\n            const b = parseInt(hex.slice(5, 7), 16);\n            return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n        }\n        /**\n         * \n         */\n        function handleOpenAvatarManager() {\n            // \n            emit('close');\n            // \n            emit('open-avatar-manager');\n        }\n        /**\n         * \n         */\n        function handleClose() {\n            // watchEffect\n            emit('close');\n        }\n        /**\n         * \n         */\n        function handleReset() {\n            graphConfigStore.resetToDefault();\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function handleLegendEnabledChange() {\n            graphConfigStore.setLegendEnabled(legendConfig.value.enabled);\n        }\n        /**\n         * \n         */\n        function handleLegendPositionChange() {\n            graphConfigStore.setLegendPosition(legendConfig.value.position);\n        }\n        /**\n         * \n         */\n        function handleAddLegendItem() {\n            const newItem = {\n                label: '',\n                color: '#888888',\n                emoji: '',\n                keywords: [],\n            };\n            graphConfigStore.addLegendItem(newItem);\n            // \n            const items = graphConfigStore.getLegendConfig().items;\n            const addedItem = items[items.length - 1];\n            if (addedItem) {\n                handleEditLegendItem(addedItem);\n            }\n        }\n        /**\n         * \n         */\n        function handleEditLegendItem(item) {\n            editingLegendId.value = item.id;\n            editingLegendData.label = item.label;\n            editingLegendData.color = item.color;\n            editingLegendData.emoji = item.emoji || '';\n            editingLegendData.keywordsStr = item.keywords.join(', ');\n        }\n        /**\n         * \n         */\n        function handleSaveLegendItem() {\n            if (!editingLegendId.value)\n                return;\n            const keywords = editingLegendData.keywordsStr\n                .split(/[,]/)\n                .map(s => s.trim())\n                .filter(s => s.length > 0);\n            graphConfigStore.updateLegendItem(editingLegendId.value, {\n                label: editingLegendData.label,\n                color: editingLegendData.color,\n                emoji: editingLegendData.emoji || undefined,\n                keywords,\n            });\n            editingLegendId.value = null;\n        }\n        /**\n         * \n         */\n        function handleCancelEditLegendItem() {\n            editingLegendId.value = null;\n        }\n        /**\n         * \n         */\n        function handleDeleteLegendItem(id) {\n            graphConfigStore.removeLegendItem(id);\n        }\n        /**\n         * \n         */\n        function handleResetLegendConfig() {\n            graphConfigStore.resetLegendConfig();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"modal\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-modal-container\",\n                            onClick: _withModifiers(handleClose, [\"self\"])\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_2, [\n                                    _cache[12] || (_cache[12] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-close-pill\",\n                                        onClick: _withModifiers(handleClose, [\"stop\"])\n                                    }, \"\")\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_3, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_4, [\n                                        _cache[18] || (_cache[18] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-eye\" }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_5, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_6, [\n                                                _createElementVNode(\"div\", _hoisted_7, [\n                                                    _cache[13] || (_cache[13] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_8, _toDisplayString(config.value.nodeSize) + \"px\", 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_9, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((config.value.nodeSize) = $event)),\n                                                        type: \"range\",\n                                                        min: \"30\",\n                                                        max: \"80\",\n                                                        step: \"5\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [\n                                                            _vModelText,\n                                                            config.value.nodeSize,\n                                                            void 0,\n                                                            { number: true }\n                                                        ]\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_10, [\n                                                _createElementVNode(\"div\", _hoisted_11, [\n                                                    _cache[14] || (_cache[14] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_12, _toDisplayString(config.value.edgeWidth.toFixed(1)) + \"px\", 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_13, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((config.value.edgeWidth) = $event)),\n                                                        type: \"range\",\n                                                        min: \"1\",\n                                                        max: \"5\",\n                                                        step: \"0.5\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [\n                                                            _vModelText,\n                                                            config.value.edgeWidth,\n                                                            void 0,\n                                                            { number: true }\n                                                        ]\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_14, [\n                                                _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                    _createTextVNode(\"  \"),\n                                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_15, [\n                                                    _createElementVNode(\"label\", _hoisted_16, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((config.value.showLegend) = $event)),\n                                                            type: \"checkbox\"\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [_vModelCheckbox, config.value.showLegend]\n                                                        ]),\n                                                        _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", {\n                                                class: \"acu-settings-row acu-nav-row\",\n                                                onClick: _withModifiers(handleOpenAvatarManager, [\"stop\"])\n                                            }, [...(_cache[17] || (_cache[17] = [\n                                                    _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\"  \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */),\n                                                    _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                                    ], -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_17, [\n                                        _cache[22] || (_cache[22] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-font\" }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_18, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_19, [\n                                                _createElementVNode(\"div\", _hoisted_20, [\n                                                    _cache[19] || (_cache[19] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_21, _toDisplayString(config.value.relationLabelFontSize) + \"px\", 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_22, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((config.value.relationLabelFontSize) = $event)),\n                                                        type: \"range\",\n                                                        min: \"8\",\n                                                        max: \"16\",\n                                                        step: \"1\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [\n                                                            _vModelText,\n                                                            config.value.relationLabelFontSize,\n                                                            void 0,\n                                                            { number: true }\n                                                        ]\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_23, [\n                                                _createElementVNode(\"div\", _hoisted_24, [\n                                                    _cache[20] || (_cache[20] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_25, _toDisplayString(config.value.nameLabelFontSize) + \"px\", 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_26, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((config.value.nameLabelFontSize) = $event)),\n                                                        type: \"range\",\n                                                        min: \"8\",\n                                                        max: \"18\",\n                                                        step: \"1\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [\n                                                            _vModelText,\n                                                            config.value.nameLabelFontSize,\n                                                            void 0,\n                                                            { number: true }\n                                                        ]\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_27, [\n                                                _createElementVNode(\"div\", _hoisted_28, [\n                                                    _cache[21] || (_cache[21] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_29, _toDisplayString(config.value.factionLabelFontSize) + \"px\", 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_30, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((config.value.factionLabelFontSize) = $event)),\n                                                        type: \"range\",\n                                                        min: \"10\",\n                                                        max: \"20\",\n                                                        step: \"1\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [\n                                                            _vModelText,\n                                                            config.value.factionLabelFontSize,\n                                                            void 0,\n                                                            { number: true }\n                                                        ]\n                                                    ])\n                                                ])\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    (factions.value.length > 0)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_31, [\n                                            _createElementVNode(\"div\", _hoisted_32, [\n                                                _cache[23] || (_cache[23] = _createElementVNode(\"i\", { class: \"fas fa-palette\" }, null, -1 /* CACHED */)),\n                                                _cache[24] || (_cache[24] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                _createElementVNode(\"span\", _hoisted_33, _toDisplayString(factions.value.length) + \"  \", 1 /* TEXT */)\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"acu-faction-color-hint\" }, [\n                                                _createElementVNode(\"span\", { class: \"hint-item\" }, [\n                                                    _createElementVNode(\"span\", { class: \"hint-box dashed\" }),\n                                                    _createTextVNode(\"  \")\n                                                ]),\n                                                _createElementVNode(\"span\", { class: \"hint-item\" }, [\n                                                    _createElementVNode(\"span\", { class: \"hint-box solid\" }),\n                                                    _createTextVNode(\"  \")\n                                                ]),\n                                                _createElementVNode(\"span\", { class: \"hint-item\" }, [\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fas fa-adjust\",\n                                                        style: { \"font-size\": \"12px\", \"margin-right\": \"2px\" }\n                                                    }),\n                                                    _createTextVNode(\"  \")\n                                                ])\n                                            ], -1 /* CACHED */)),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_34, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(factions.value, (faction) => {\n                                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                                        key: faction,\n                                                        class: \"acu-settings-row acu-faction-color-row\"\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_35, _toDisplayString(faction), 1 /* TEXT */),\n                                                        _createElementVNode(\"div\", _hoisted_36, [\n                                                            _createElementVNode(\"input\", {\n                                                                type: \"color\",\n                                                                class: \"acu-dashed\",\n                                                                value: getFactionBorderColor(faction),\n                                                                title: \"\",\n                                                                onInput: ($event) => (handleFactionBorderChange(faction, $event))\n                                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_37),\n                                                            _createElementVNode(\"input\", {\n                                                                type: \"color\",\n                                                                value: getFactionBackgroundColor(faction),\n                                                                title: \"\",\n                                                                onInput: ($event) => (handleFactionBackgroundChange(faction, $event))\n                                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_38),\n                                                            _createElementVNode(\"input\", {\n                                                                type: \"range\",\n                                                                class: \"acu-opacity-slider\",\n                                                                value: getFactionOpacity(faction),\n                                                                min: \"0\",\n                                                                max: \"100\",\n                                                                step: \"5\",\n                                                                title: `: ${getFactionOpacity(faction)}%`,\n                                                                onInput: ($event) => (handleFactionOpacityChange(faction, $event))\n                                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_39),\n                                                            _createElementVNode(\"span\", _hoisted_40, _toDisplayString(getFactionOpacity(faction)) + \"%\", 1 /* TEXT */)\n                                                        ])\n                                                    ]));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ])\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_41, [\n                                        _cache[29] || (_cache[29] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-image\" }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_42, [\n                                            _createElementVNode(\"div\", _hoisted_43, [\n                                                _cache[27] || (_cache[27] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                    _createTextVNode(\"  \"),\n                                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_44, [\n                                                    _createElementVNode(\"label\", _hoisted_45, [\n                                                        _createElementVNode(\"input\", {\n                                                            checked: config.value.showBackground,\n                                                            type: \"checkbox\",\n                                                            onChange: _cache[6] || (_cache[6] = e => _unref(graphConfigStore).setShowBackground(e.target.checked))\n                                                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_46),\n                                                        _cache[26] || (_cache[26] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                    ])\n                                                ])\n                                            ]),\n                                            _cache[28] || (_cache[28] = _createElementVNode(\"div\", {\n                                                class: \"acu-settings-row\",\n                                                style: { \"justify-content\": \"flex-start\", \"padding-top\": \"0\", \"padding-bottom\": \"8px\" }\n                                            }, [\n                                                _createElementVNode(\"span\", { style: { \"font-size\": \"11px\", \"color\": \"var(--acu-text-sub)\" } }, [\n                                                    _createElementVNode(\"i\", {\n                                                        class: \"fas fa-info-circle\",\n                                                        style: { \"margin-right\": \"4px\" }\n                                                    }),\n                                                    _createTextVNode(\" \\\" > \\\" \")\n                                                ])\n                                            ], -1 /* CACHED */))\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_47, [\n                                        _cache[40] || (_cache[40] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-th-list\" }),\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { style: { \"font-weight\": \"400\", \"font-size\": \"11px\", \"color\": \"var(--acu-text-sub)\", \"margin-left\": \"auto\" } }, \"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_48, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_49, [\n                                                _cache[31] || (_cache[31] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                    _createTextVNode(\"  \"),\n                                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_50, [\n                                                    _createElementVNode(\"label\", _hoisted_51, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((legendConfig.value.enabled) = $event)),\n                                                            type: \"checkbox\",\n                                                            onChange: handleLegendEnabledChange\n                                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [_vModelCheckbox, legendConfig.value.enabled]\n                                                        ]),\n                                                        _cache[30] || (_cache[30] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                    ])\n                                                ])\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        (legendConfig.value.enabled)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_52, [\n                                                _createElementVNode(\"div\", _hoisted_53, [\n                                                    _cache[33] || (_cache[33] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"acu-action-btn acu-action-btn-small\",\n                                                        onClick: _withModifiers(handleAddLegendItem, [\"stop\"])\n                                                    }, [...(_cache[32] || (_cache[32] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */),\n                                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                                        ]))])\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_54, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(legendConfig.value.items, (item) => {\n                                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                                            key: item.id,\n                                                            class: \"acu-legend-item-row\"\n                                                        }, [\n                                                            _createCommentVNode(\"  \"),\n                                                            (editingLegendId.value === item.id)\n                                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_55, [\n                                                                    _createElementVNode(\"div\", _hoisted_56, [\n                                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                                            \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((editingLegendData.label) = $event)),\n                                                                            type: \"text\",\n                                                                            placeholder: \"\",\n                                                                            class: \"acu-legend-input\"\n                                                                        }, null, 512 /* NEED_PATCH */), [\n                                                                            [_vModelText, editingLegendData.label]\n                                                                        ]),\n                                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                                            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((editingLegendData.color) = $event)),\n                                                                            type: \"color\",\n                                                                            class: \"acu-legend-color-input\",\n                                                                            title: \"\"\n                                                                        }, null, 512 /* NEED_PATCH */), [\n                                                                            [_vModelText, editingLegendData.color]\n                                                                        ]),\n                                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                                            \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event) => ((editingLegendData.emoji) = $event)),\n                                                                            type: \"text\",\n                                                                            placeholder: \"Emoji\",\n                                                                            class: \"acu-legend-emoji-input\",\n                                                                            maxlength: \"4\"\n                                                                        }, null, 512 /* NEED_PATCH */), [\n                                                                            [_vModelText, editingLegendData.emoji]\n                                                                        ])\n                                                                    ]),\n                                                                    _createElementVNode(\"div\", _hoisted_57, [\n                                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                                            \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((editingLegendData.keywordsStr) = $event)),\n                                                                            type: \"text\",\n                                                                            placeholder: \"\",\n                                                                            class: \"acu-legend-keywords-input\"\n                                                                        }, null, 512 /* NEED_PATCH */), [\n                                                                            [_vModelText, editingLegendData.keywordsStr]\n                                                                        ])\n                                                                    ]),\n                                                                    _createElementVNode(\"div\", _hoisted_58, [\n                                                                        _createElementVNode(\"button\", {\n                                                                            class: \"acu-action-btn acu-action-btn-small acu-action-btn-primary\",\n                                                                            onClick: _withModifiers(handleSaveLegendItem, [\"stop\"])\n                                                                        }, [...(_cache[34] || (_cache[34] = [\n                                                                                _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */)\n                                                                            ]))]),\n                                                                        _createElementVNode(\"button\", {\n                                                                            class: \"acu-action-btn acu-action-btn-small\",\n                                                                            onClick: _withModifiers(handleCancelEditLegendItem, [\"stop\"])\n                                                                        }, [...(_cache[35] || (_cache[35] = [\n                                                                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                                                            ]))])\n                                                                    ])\n                                                                ]))\n                                                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                                    _createCommentVNode(\"  \"),\n                                                                    _createElementVNode(\"div\", _hoisted_59, [\n                                                                        _createElementVNode(\"span\", {\n                                                                            class: \"acu-legend-color-dot\",\n                                                                            style: _normalizeStyle({ backgroundColor: item.color })\n                                                                        }, null, 4 /* STYLE */),\n                                                                        _createElementVNode(\"span\", _hoisted_60, _toDisplayString(item.emoji || ''), 1 /* TEXT */),\n                                                                        _createElementVNode(\"span\", _hoisted_61, _toDisplayString(item.label), 1 /* TEXT */),\n                                                                        _createElementVNode(\"div\", _hoisted_62, [\n                                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.keywords.slice(0, 3), (kw) => {\n                                                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                                                    key: kw,\n                                                                                    class: \"acu-legend-keyword-tag\"\n                                                                                }, _toDisplayString(kw), 1 /* TEXT */));\n                                                                            }), 128 /* KEYED_FRAGMENT */)),\n                                                                            (item.keywords.length > 3)\n                                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_63, \" +\" + _toDisplayString(item.keywords.length - 3), 1 /* TEXT */))\n                                                                                : _createCommentVNode(\"v-if\", true)\n                                                                        ])\n                                                                    ]),\n                                                                    _createElementVNode(\"div\", _hoisted_64, [\n                                                                        _createElementVNode(\"button\", {\n                                                                            class: \"acu-legend-action-btn\",\n                                                                            title: \"\",\n                                                                            onClick: _withModifiers(($event) => (handleEditLegendItem(item)), [\"stop\"])\n                                                                        }, [...(_cache[36] || (_cache[36] = [\n                                                                                _createElementVNode(\"i\", { class: \"fas fa-edit\" }, null, -1 /* CACHED */)\n                                                                            ]))], 8 /* PROPS */, _hoisted_65),\n                                                                        _createElementVNode(\"button\", {\n                                                                            class: \"acu-legend-action-btn acu-legend-action-btn-danger\",\n                                                                            title: \"\",\n                                                                            onClick: _withModifiers(($event) => (handleDeleteLegendItem(item.id)), [\"stop\"])\n                                                                        }, [...(_cache[37] || (_cache[37] = [\n                                                                                _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */)\n                                                                            ]))], 8 /* PROPS */, _hoisted_66)\n                                                                    ])\n                                                                ], 64 /* STABLE_FRAGMENT */))\n                                                        ]));\n                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                    (legendConfig.value.items.length === 0)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_67, [...(_cache[38] || (_cache[38] = [\n                                                                _createElementVNode(\"span\", null, \"\\\"\\\"\", -1 /* CACHED */)\n                                                            ]))]))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ]),\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_68, [\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"acu-action-btn acu-action-btn-secondary acu-action-btn-small\",\n                                                        onClick: _withModifiers(handleResetLegendConfig, [\"stop\"])\n                                                    }, [...(_cache[39] || (_cache[39] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                                        ]))])\n                                                ])\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_69, [\n                                        _createElementVNode(\"div\", _hoisted_70, [\n                                            _createElementVNode(\"div\", _hoisted_71, [\n                                                _createElementVNode(\"button\", {\n                                                    class: \"acu-action-btn acu-action-btn-secondary\",\n                                                    onClick: _withModifiers(handleReset, [\"stop\"])\n                                                }, [...(_cache[41] || (_cache[41] = [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                                    ]))])\n                                            ])\n                                        ])\n                                    ])\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./GraphSettingsDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GraphSettingsDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-node-config-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-title\" };\nconst _hoisted_4 = { class: \"acu-modal-body\" };\nconst _hoisted_5 = { class: \"acu-settings-section\" };\nconst _hoisted_6 = { class: \"acu-settings-group\" };\nconst _hoisted_7 = { class: \"acu-char-selector\" };\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = { class: \"acu-node-preview\" };\nconst _hoisted_10 = { class: \"acu-node-config-actions\" };\nconst _hoisted_11 = { class: \"acu-settings-section\" };\nconst _hoisted_12 = { class: \"acu-settings-group\" };\nconst _hoisted_13 = { class: \"acu-settings-row\" };\nconst _hoisted_14 = { class: \"acu-settings-label\" };\nconst _hoisted_15 = { class: \"hint\" };\nconst _hoisted_16 = { class: \"acu-settings-control\" };\nconst _hoisted_17 = { class: \"acu-settings-row\" };\nconst _hoisted_18 = { class: \"acu-settings-control\" };\nconst _hoisted_19 = { class: \"acu-settings-row\" };\nconst _hoisted_20 = { class: \"acu-settings-label\" };\nconst _hoisted_21 = { class: \"hint\" };\nconst _hoisted_22 = { class: \"acu-settings-control\" };\nconst _hoisted_23 = { class: \"acu-settings-row\" };\nconst _hoisted_24 = { class: \"acu-settings-control\" };\nconst _hoisted_25 = { class: \"acu-settings-section\" };\nconst _hoisted_26 = { class: \"acu-settings-group\" };\nconst _hoisted_27 = { class: \"acu-settings-row acu-action-row\" };\nimport { computed, reactive, ref, watch, watchEffect } from 'vue';\nimport { DEFAULT_NODE_STYLE, useGraphConfigStore } from '../../../stores/useGraphConfigStore';\n/**  */\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'NodeConfigDialog',\n    props: {\n        visible: { type: Boolean, default: false },\n        nodeId: { default: '' },\n        fullName: { default: '' },\n        currentLabel: { default: '' },\n        selectedIndices: { default: () => [] }\n    },\n    emits: [\"close\", \"confirm\", \"reset-to-full-name\", \"style-update\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * NodeConfigDialog.vue - \n         *\n         * \n         * 1. \n         *    - \n         *    - \n         * 2. \n         *    - /\n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Store\n        // ============================================================\n        const graphConfigStore = useGraphConfigStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const localSelectedIndices = ref(new Set());\n        /**  */\n        function getThemeTextColor() {\n            try {\n                const parentDoc = window.parent?.document || document;\n                const wrapper = parentDoc.querySelector('.acu-wrapper');\n                if (wrapper) {\n                    const computed = getComputedStyle(wrapper).getPropertyValue('--acu-text-main').trim();\n                    if (computed)\n                        return computed;\n                }\n                return '#333333';\n            }\n            catch {\n                return '#333333';\n            }\n        }\n        const localStyleConfig = reactive({\n            size: DEFAULT_NODE_STYLE.size ?? 60,\n            borderColor: getThemeTextColor(),\n            borderWidth: DEFAULT_NODE_STYLE.borderWidth ?? 2,\n            shape: DEFAULT_NODE_STYLE.shape ?? 'ellipse',\n        });\n        //  props \n        watch(() => props.selectedIndices, newIndices => {\n            localSelectedIndices.value = new Set(newIndices);\n        }, { immediate: true });\n        //  visible \n        watch(() => props.visible, newVisible => {\n            if (newVisible) {\n                //  selectedIndices \n                if (props.selectedIndices.length > 0) {\n                    localSelectedIndices.value = new Set(props.selectedIndices);\n                }\n                else {\n                    // \n                    localSelectedIndices.value = new Set(getDefaultIndices(props.fullName));\n                }\n                // \n                loadStyleConfig();\n            }\n        });\n        //  nodeId \n        watch(() => props.nodeId, newId => {\n            if (newId && props.visible) {\n                loadStyleConfig();\n            }\n        });\n        /**\n         *  Store \n         */\n        function loadStyleConfig() {\n            const override = graphConfigStore.getNodeStyleOverride(props.nodeId);\n            const defaultBorderColor = getThemeTextColor();\n            if (override) {\n                localStyleConfig.size = override.size ?? DEFAULT_NODE_STYLE.size ?? 60;\n                localStyleConfig.borderColor = override.borderColor ?? defaultBorderColor;\n                localStyleConfig.borderWidth = override.borderWidth ?? DEFAULT_NODE_STYLE.borderWidth ?? 2;\n                localStyleConfig.shape =\n                    override.shape ??\n                        DEFAULT_NODE_STYLE.shape ??\n                        'ellipse';\n            }\n            else {\n                // \n                localStyleConfig.size = DEFAULT_NODE_STYLE.size ?? 60;\n                localStyleConfig.borderColor = defaultBorderColor;\n                localStyleConfig.borderWidth = DEFAULT_NODE_STYLE.borderWidth ?? 2;\n                localStyleConfig.shape =\n                    DEFAULT_NODE_STYLE.shape ?? 'ellipse';\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function isEnglishName(name) {\n            return /^[A-Za-z\\s'-]+$/.test(name) && name.includes(' ');\n        }\n        /**\n         * \n         * - \n         * - \n         */\n        function getDisplayCharsFromName(fullName) {\n            if (isEnglishName(fullName)) {\n                return fullName.split(' ').filter(Boolean);\n            }\n            return fullName.split('');\n        }\n        /**\n         * \n         */\n        function getDefaultIndices(fullName) {\n            const chars = getDisplayCharsFromName(fullName);\n            if (isEnglishName(fullName)) {\n                // \n                return [0];\n            }\n            // \n            return chars.length > 0 ? [chars.length - 1] : [];\n        }\n        /**\n         * \n         */\n        function getDefaultLabel(fullName) {\n            if (isEnglishName(fullName)) {\n                const firstName = fullName.split(' ')[0];\n                return firstName.length > 6 ? firstName.slice(0, 6) : firstName;\n            }\n            return fullName.length > 0 ? fullName[fullName.length - 1] : fullName;\n        }\n        /**  */\n        const displayChars = computed(() => getDisplayCharsFromName(props.fullName));\n        /**  */\n        const previewLabel = computed(() => {\n            if (!props.fullName)\n                return '';\n            const chars = displayChars.value;\n            const selectedChars = Array.from(localSelectedIndices.value)\n                .sort((a, b) => a - b)\n                .map(i => chars[i])\n                .filter(Boolean);\n            if (selectedChars.length === 0) {\n                return getDefaultLabel(props.fullName);\n            }\n            // \n            if (isEnglishName(props.fullName)) {\n                return selectedChars.join(' ');\n            }\n            return selectedChars.join('');\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function toggleCharSelection(index) {\n            const newSet = new Set(localSelectedIndices.value);\n            if (newSet.has(index)) {\n                newSet.delete(index);\n            }\n            else {\n                newSet.add(index);\n            }\n            localSelectedIndices.value = newSet;\n        }\n        /**  */\n        function handleClose() {\n            // \n            const selectedIndices = Array.from(localSelectedIndices.value);\n            emit('confirm', props.nodeId, previewLabel.value, selectedIndices);\n            emit('close');\n        }\n        /**  */\n        watchEffect(() => {\n            if (!props.visible || !props.nodeId)\n                return;\n            //  store\n            graphConfigStore.setNodeStyleOverride(props.nodeId, {\n                size: localStyleConfig.size,\n                borderColor: localStyleConfig.borderColor,\n                borderWidth: localStyleConfig.borderWidth,\n                shape: localStyleConfig.shape,\n            });\n            // \n            emit('style-update', props.nodeId);\n        });\n        /**  */\n        function handleResetToFullName() {\n            emit('reset-to-full-name', props.nodeId, props.fullName);\n        }\n        /**  */\n        function handleResetStyle() {\n            graphConfigStore.removeNodeStyleOverride(props.nodeId);\n            // \n            localStyleConfig.size = DEFAULT_NODE_STYLE.size ?? 60;\n            localStyleConfig.borderColor = getThemeTextColor();\n            localStyleConfig.borderWidth = DEFAULT_NODE_STYLE.borderWidth ?? 2;\n            localStyleConfig.shape =\n                DEFAULT_NODE_STYLE.shape ?? 'ellipse';\n            emit('style-update', props.nodeId);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"modal\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-modal-container\",\n                            onClick: _withModifiers(handleClose, [\"self\"])\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_2, [\n                                    _createElementVNode(\"span\", _hoisted_3, \" - \" + _toDisplayString(__props.fullName), 1 /* TEXT */),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-close-pill\",\n                                        onClick: _withModifiers(handleClose, [\"stop\"])\n                                    }, \"\")\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_4, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_5, [\n                                        _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-font\" }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_6, [\n                                            _cache[4] || (_cache[4] = _createElementVNode(\"p\", { class: \"acu-node-hint\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_7, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayChars.value, (char, index) => {\n                                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                                        key: index,\n                                                        class: _normalizeClass([\"acu-char-btn\", { active: localSelectedIndices.value.has(index) }]),\n                                                        onClick: _withModifiers(($event) => (toggleCharSelection(index)), [\"stop\"])\n                                                    }, _toDisplayString(char), 11 /* TEXT, CLASS, PROPS */, _hoisted_8));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ]),\n                                            _createElementVNode(\"p\", _hoisted_9, \"\" + _toDisplayString(previewLabel.value), 1 /* TEXT */),\n                                            _createElementVNode(\"div\", _hoisted_10, [\n                                                _createElementVNode(\"button\", {\n                                                    class: \"acu-action-btn secondary\",\n                                                    onClick: _withModifiers(handleResetToFullName, [\"stop\"])\n                                                }, \"\")\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_11, [\n                                        _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-palette\" }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_13, [\n                                                _createElementVNode(\"div\", _hoisted_14, [\n                                                    _cache[6] || (_cache[6] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_15, _toDisplayString(localStyleConfig.size) + \"px\", 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_16, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localStyleConfig.size) = $event)),\n                                                        type: \"range\",\n                                                        min: \"30\",\n                                                        max: \"120\",\n                                                        step: \"5\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [\n                                                            _vModelText,\n                                                            localStyleConfig.size,\n                                                            void 0,\n                                                            { number: true }\n                                                        ]\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_17, [\n                                                _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                    _createTextVNode(\"  \"),\n                                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_18, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((localStyleConfig.borderColor) = $event)),\n                                                        type: \"color\",\n                                                        class: \"acu-dashed\",\n                                                        title: \"\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [_vModelText, localStyleConfig.borderColor]\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_19, [\n                                                _createElementVNode(\"div\", _hoisted_20, [\n                                                    _cache[8] || (_cache[8] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_21, _toDisplayString(localStyleConfig.borderWidth) + \"px\", 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_22, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((localStyleConfig.borderWidth) = $event)),\n                                                        type: \"range\",\n                                                        min: \"0\",\n                                                        max: \"10\",\n                                                        step: \"0.5\"\n                                                    }, null, 512 /* NEED_PATCH */), [\n                                                        [\n                                                            _vModelText,\n                                                            localStyleConfig.borderWidth,\n                                                            void 0,\n                                                            { number: true }\n                                                        ]\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_23, [\n                                                _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                    _createTextVNode(\"  \"),\n                                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_24, [\n                                                    _withDirectives(_createElementVNode(\"select\", {\n                                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((localStyleConfig.shape) = $event))\n                                                    }, [...(_cache[9] || (_cache[9] = [\n                                                            _createElementVNode(\"option\", { value: \"ellipse\" }, \"\", -1 /* CACHED */),\n                                                            _createElementVNode(\"option\", { value: \"round-rectangle\" }, \"\", -1 /* CACHED */),\n                                                            _createElementVNode(\"option\", { value: \"rectangle\" }, \"\", -1 /* CACHED */),\n                                                            _createElementVNode(\"option\", { value: \"hexagon\" }, \"\", -1 /* CACHED */)\n                                                        ]))], 512 /* NEED_PATCH */), [\n                                                        [_vModelSelect, localStyleConfig.shape]\n                                                    ])\n                                                ])\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_25, [\n                                        _createElementVNode(\"div\", _hoisted_26, [\n                                            _createElementVNode(\"div\", _hoisted_27, [\n                                                _createElementVNode(\"button\", {\n                                                    class: \"acu-action-btn acu-action-btn-secondary\",\n                                                    onClick: _withModifiers(handleResetStyle, [\"stop\"])\n                                                }, [...(_cache[12] || (_cache[12] = [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                                    ]))])\n                                            ])\n                                        ])\n                                    ])\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./NodeConfigDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NodeConfigDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./NodeConfigDialog.vue?vue&type=style&index=0&id=04296fa3&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, withModifiers as _withModifiers, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-node-config-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-body\" };\nconst _hoisted_4 = {\n    class: \"acu-node-fullname\",\n    style: { \"margin-bottom\": \"8px\", \"font-weight\": \"600\" }\n};\nconst _hoisted_5 = { class: \"acu-char-selector\" };\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = { class: \"acu-node-preview\" };\nconst _hoisted_8 = { class: \"acu-node-config-actions\" };\nimport { computed, ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'NodeLabelDialog',\n    props: {\n        visible: { type: Boolean, default: false },\n        fullName: { default: '' },\n        initialIndices: { default: () => [] }\n    },\n    emits: [\"close\", \"apply\", \"reset\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * NodeLabelDialog.vue - \n         *\n         * \n         * - \n         * - \n         * - \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const selectedIndices = ref(new Set());\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function isEnglishName(name) {\n            return /^[A-Za-z\\s'-]+$/.test(name) && name.includes(' ');\n        }\n        /**\n         * \n         * - \n         * - \n         */\n        function getDisplayCharsFromName(fullName) {\n            if (!fullName)\n                return [];\n            if (isEnglishName(fullName)) {\n                return fullName.split(' ').filter(Boolean);\n            }\n            return fullName.split('');\n        }\n        /**\n         * \n         */\n        function getDefaultIndicesFromName(fullName) {\n            const chars = getDisplayCharsFromName(fullName);\n            if (isEnglishName(fullName)) {\n                // \n                return [0];\n            }\n            // \n            return chars.length > 0 ? [chars.length - 1] : [];\n        }\n        /**\n         * \n         */\n        function getDefaultLabel(fullName) {\n            if (isEnglishName(fullName)) {\n                // \n                const firstName = fullName.split(' ')[0];\n                return firstName.length > 6 ? firstName.slice(0, 6) : firstName;\n            }\n            // \n            return fullName.length > 0 ? fullName[fullName.length - 1] : fullName;\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const displayChars = computed(() => getDisplayCharsFromName(props.fullName));\n        /**  */\n        const previewLabel = computed(() => {\n            if (!props.fullName)\n                return '';\n            const chars = displayChars.value;\n            const selectedChars = Array.from(selectedIndices.value)\n                .sort((a, b) => a - b)\n                .map(i => chars[i])\n                .filter(Boolean);\n            if (selectedChars.length === 0) {\n                return getDefaultLabel(props.fullName);\n            }\n            // \n            if (isEnglishName(props.fullName)) {\n                return selectedChars.join(' ');\n            }\n            return selectedChars.join('');\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function toggleCharSelection(index) {\n            const newSet = new Set(selectedIndices.value);\n            if (newSet.has(index)) {\n                newSet.delete(index);\n            }\n            else {\n                newSet.add(index);\n            }\n            selectedIndices.value = newSet;\n        }\n        /**  */\n        function applyAndClose() {\n            emit('apply', {\n                displayLabel: previewLabel.value,\n                selectedIndices: Array.from(selectedIndices.value),\n            });\n            emit('close');\n        }\n        /**  */\n        function resetToFullName() {\n            emit('reset');\n            emit('close');\n        }\n        /**  */\n        function handleClose() {\n            emit('close');\n        }\n        // ============================================================\n        // \n        // ============================================================\n        // \n        watch(() => [props.visible, props.fullName, props.initialIndices], ([visible]) => {\n            if (visible) {\n                if (props.initialIndices && props.initialIndices.length > 0) {\n                    selectedIndices.value = new Set(props.initialIndices);\n                }\n                else {\n                    selectedIndices.value = new Set(getDefaultIndicesFromName(props.fullName));\n                }\n            }\n        }, { immediate: true });\n        // ============================================================\n        // \n        // ============================================================\n        __expose({\n            isEnglishName,\n            getDisplayChars: getDisplayCharsFromName,\n            getDefaultIndices: getDefaultIndicesFromName,\n            getDefaultLabel,\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    style: { \"z-index\": \"2147483647\" },\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createElementVNode(\"p\", _hoisted_4, \"\" + _toDisplayString(__props.fullName), 1 /* TEXT */),\n                            _cache[1] || (_cache[1] = _createElementVNode(\"p\", { class: \"acu-node-hint\" }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayChars.value, (char, index) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: index,\n                                        class: _normalizeClass([\"acu-char-btn\", { active: selectedIndices.value.has(index) }]),\n                                        onClick: _withModifiers(($event) => (toggleCharSelection(index)), [\"stop\"])\n                                    }, _toDisplayString(char), 11 /* TEXT, CLASS, PROPS */, _hoisted_6));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createElementVNode(\"p\", _hoisted_7, \"\" + _toDisplayString(previewLabel.value), 1 /* TEXT */),\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-action-btn secondary\",\n                                    onClick: _withModifiers(resetToFullName, [\"stop\"])\n                                }, \"\"),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-action-btn primary\",\n                                    onClick: _withModifiers(applyAndClose, [\"stop\"])\n                                }, \"\")\n                            ])\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./NodeLabelDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NodeLabelDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withModifiers as _withModifiers, openBlock as _openBlock, createBlock as _createBlock, normalizeClass as _normalizeClass, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-row-edit-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-title\" };\nconst _hoisted_4 = { class: \"acu-modal-body\" };\nconst _hoisted_5 = { class: \"acu-row-edit-content\" };\nimport { computed, watch } from 'vue';\nimport { useConfigStore } from '../../../stores/useConfigStore';\nimport DataCard from '../../DataCard.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'RowEditDialog',\n    props: {\n        visible: { type: Boolean, default: false },\n        tableName: {},\n        tableId: {},\n        rowIndex: {},\n        currentRowData: { default: null },\n        titleColIndex: { default: 1 }\n    },\n    emits: [\"update:visible\", \"close\", \"showHistory\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * RowEditDialog - \n         *\n         * \n         * - \n         * -  DataCard \n         * - \n         * - \n         */\n        const props = __props;\n        //  Teleport \n        const configStore = useConfigStore();\n        const themeClass = computed(() => `acu-theme-${configStore.theme}`);\n        const emit = __emit;\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const displayTitle = computed(() => {\n            if (!props.currentRowData)\n                return props.tableName;\n            const titleIdx = props.titleColIndex;\n            if (titleIdx >= 0 && props.currentRowData.cells.length > titleIdx) {\n                const value = props.currentRowData.cells[titleIdx]?.value;\n                if (value) {\n                    return `${props.tableName} - ${value}`;\n                }\n            }\n            return `${props.tableName} -  ${props.rowIndex + 1} `;\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function handleClose() {\n            emit('update:visible', false);\n            emit('close');\n        }\n        /**  */\n        function handleSave() {\n            // DataCard \n            handleClose();\n        }\n        /**  */\n        function handleShowHistory() {\n            emit('showHistory');\n        }\n        // \n        watch(() => props.visible, newVal => {\n            if (!newVal) {\n                // \n            }\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: _normalizeClass([\"acu-modal-container acu-row-edit-modal-container\", themeClass.value]),\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _createCommentVNode(\"  \"),\n                            _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"acu-drag-handle acu-mobile-only\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_3, [\n                                _cache[0] || (_cache[0] = _createElementVNode(\"i\", { class: \"fas fa-edit\" }, null, -1 /* CACHED */)),\n                                _createTextVNode(\"  - \" + _toDisplayString(displayTitle.value), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" PC \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill acu-pc-only\",\n                                onClick: _withModifiers(handleSave, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createCommentVNode(\"  DataCard  \"),\n                                (__props.currentRowData)\n                                    ? (_openBlock(), _createBlock(DataCard, {\n                                        key: 0,\n                                        data: __props.currentRowData,\n                                        \"table-name\": __props.tableName,\n                                        \"table-id\": __props.tableId,\n                                        \"view-mode\": \"list\",\n                                        \"show-header\": true,\n                                        \"show-index\": true,\n                                        \"show-history-button\": true,\n                                        \"title-col-index\": __props.titleColIndex,\n                                        onShowHistory: handleShowHistory\n                                    }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\"]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"acu-bottom-spacer\" }, null, -1 /* CACHED */))\n                    ])\n                ], 2 /* CLASS */))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./RowEditDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RowEditDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-widget-actions-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-body\" };\nconst _hoisted_4 = { class: \"acu-settings-section\" };\nconst _hoisted_5 = { class: \"acu-settings-group\" };\nconst _hoisted_6 = { class: \"acu-settings-label\" };\nconst _hoisted_7 = { class: \"hint\" };\nconst _hoisted_8 = { class: \"acu-settings-control\" };\nconst _hoisted_9 = { class: \"acu-switch\" };\nconst _hoisted_10 = [\"checked\", \"onChange\"];\nconst _hoisted_11 = { class: \"acu-settings-section\" };\nconst _hoisted_12 = { class: \"acu-settings-title\" };\nconst _hoisted_13 = { class: \"acu-settings-group\" };\nconst _hoisted_14 = {\n    key: 0,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_15 = {\n    key: 1,\n    class: \"acu-selected-actions-list\"\n};\nconst _hoisted_16 = { class: \"acu-settings-label\" };\nconst _hoisted_17 = { class: \"acu-settings-control\" };\nconst _hoisted_18 = [\"onClick\"];\nimport { computed, ref, watch } from 'vue';\nimport { useDashboardStore } from '../../../stores/useDashboardStore';\nimport { WIDGET_ACTIONS } from '../../../types';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'WidgetActionsDialog',\n    props: {\n        visible: { type: Boolean },\n        widgetId: {},\n        currentActions: { default: () => [] }\n    },\n    emits: [\"update:visible\", \"close\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const dashboardStore = useDashboardStore();\n        // \n        const selectedActions = ref([]);\n        //  ( settings  goToTable)\n        const availableActions = computed(() => {\n            return Object.values(WIDGET_ACTIONS).filter(action => action.id !== 'settings' && action.id !== 'goToTable');\n        });\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                //  settings  goToTable\n                selectedActions.value = props.currentActions.filter(id => id !== 'settings' && id !== 'goToTable');\n            }\n        }, { immediate: true });\n        // \n        function isActionSelected(actionId) {\n            return selectedActions.value.includes(actionId);\n        }\n        // \n        function toggleAction(actionId) {\n            const index = selectedActions.value.indexOf(actionId);\n            if (index > -1) {\n                selectedActions.value.splice(index, 1);\n            }\n            else {\n                selectedActions.value.push(actionId);\n            }\n        }\n        // \n        function removeAction(actionId) {\n            const index = selectedActions.value.indexOf(actionId);\n            if (index > -1) {\n                selectedActions.value.splice(index, 1);\n            }\n        }\n        // \n        function getActionIcon(actionId) {\n            return WIDGET_ACTIONS[actionId]?.icon || 'fa-question';\n        }\n        // \n        function getActionLabel(actionId) {\n            return WIDGET_ACTIONS[actionId]?.label || actionId;\n        }\n        // \n        function handleClose() {\n            //  store\n            if (props.widgetId) {\n                dashboardStore.updateWidget(props.widgetId, { actions: selectedActions.value });\n            }\n            emit('update:visible', false);\n            emit('close');\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-plus\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-bolt\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_5, [\n                                    _createCommentVNode(\"  -  \"),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableActions.value, (action) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: action.id,\n                                            class: \"acu-settings-row\"\n                                        }, [\n                                            _createElementVNode(\"div\", _hoisted_6, [\n                                                _createElementVNode(\"span\", null, [\n                                                    _createElementVNode(\"i\", {\n                                                        class: _normalizeClass(['fas', action.icon]),\n                                                        style: { \"margin-right\": \"8px\", \"color\": \"var(--acu-title-color)\" }\n                                                    }, null, 2 /* CLASS */),\n                                                    _createTextVNode(\" \" + _toDisplayString(action.label), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"span\", _hoisted_7, _toDisplayString(action.tooltip), 1 /* TEXT */)\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_8, [\n                                                _createCommentVNode(\"  acu-switch  \"),\n                                                _createElementVNode(\"label\", _hoisted_9, [\n                                                    _createElementVNode(\"input\", {\n                                                        type: \"checkbox\",\n                                                        checked: isActionSelected(action.id),\n                                                        onChange: ($event) => (toggleAction(action.id))\n                                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_10),\n                                                    _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                ])\n                                            ])\n                                        ]));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_11, [\n                                _createElementVNode(\"div\", _hoisted_12, [\n                                    _cache[3] || (_cache[3] = _createElementVNode(\"i\", { class: \"fas fa-eye\" }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\"  (\" + _toDisplayString(selectedActions.value.length) + \") \", 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_13, [\n                                    (selectedActions.value.length === 0)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, \"\"))\n                                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(selectedActions.value, (actionId) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: actionId,\n                                                    class: \"acu-settings-row\"\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_16, [\n                                                        _createElementVNode(\"span\", null, [\n                                                            _createElementVNode(\"i\", {\n                                                                class: _normalizeClass(['fas', getActionIcon(actionId)]),\n                                                                style: { \"margin-right\": \"8px\", \"color\": \"var(--acu-title-color)\" }\n                                                            }, null, 2 /* CLASS */),\n                                                            _createTextVNode(\" \" + _toDisplayString(getActionLabel(actionId)), 1 /* TEXT */)\n                                                        ])\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_17, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-tool-btn acu-btn-danger\",\n                                                            title: \"\",\n                                                            onClick: _withModifiers(($event) => (removeAction(actionId)), [\"stop\"])\n                                                        }, [...(_cache[4] || (_cache[4] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                                            ]))], 8 /* PROPS */, _hoisted_18)\n                                                    ])\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]))\n                                ])\n                            ])\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./WidgetActionsDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WidgetActionsDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n    ref: \"dialogRef\",\n    class: \"acu-modal acu-widget-settings-modal\"\n};\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-body\" };\nconst _hoisted_4 = { class: \"acu-settings-section\" };\nconst _hoisted_5 = { class: \"acu-settings-group\" };\nconst _hoisted_6 = { class: \"acu-settings-row\" };\nconst _hoisted_7 = { class: \"acu-settings-control\" };\nconst _hoisted_8 = [\"value\"];\nconst _hoisted_9 = { class: \"acu-settings-section\" };\nconst _hoisted_10 = { class: \"acu-settings-group\" };\nconst _hoisted_11 = { class: \"acu-settings-row\" };\nconst _hoisted_12 = { class: \"acu-settings-control\" };\nconst _hoisted_13 = [\"value\"];\nconst _hoisted_14 = { class: \"acu-settings-section\" };\nconst _hoisted_15 = { class: \"acu-settings-group\" };\nconst _hoisted_16 = { class: \"acu-settings-row\" };\nconst _hoisted_17 = { class: \"acu-settings-control\" };\nconst _hoisted_18 = [\"value\"];\nconst _hoisted_19 = {\n    key: 0,\n    class: \"acu-selected-tags\"\n};\nconst _hoisted_20 = [\"onClick\"];\nconst _hoisted_21 = { class: \"acu-settings-section\" };\nconst _hoisted_22 = { class: \"acu-settings-group\" };\nconst _hoisted_23 = { class: \"acu-settings-label\" };\nconst _hoisted_24 = {\n    key: 0,\n    class: \"hint\"\n};\nconst _hoisted_25 = {\n    key: 1,\n    class: \"hint\"\n};\nconst _hoisted_26 = { class: \"acu-settings-row\" };\nconst _hoisted_27 = { class: \"acu-settings-control\" };\nimport { computed, reactive, ref, watch } from 'vue';\nimport { useConfigStore } from '../../../stores/useConfigStore';\nimport { useDashboardStore } from '../../../stores/useDashboardStore';\nimport { useUIStore } from '../../../stores/useUIStore';\nimport { DISPLAY_STYLE_OPTIONS } from '../../../types';\n\nimport { h } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'WidgetSettingsDialog',\n    props: {\n        visible: { type: Boolean },\n        widgetId: {},\n        widgetConfig: { default: null },\n        tableHeaders: { default: () => [] }\n    },\n    emits: [\"update:visible\", \"close\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const configStore = useConfigStore();\n        const dashboardStore = useDashboardStore();\n        const uiStore = useUIStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const displayedTagCount = computed(() => {\n            return localConfig.widgetTagConfig?.displayedTagIds?.length || 0;\n        });\n        /**  */\n        const displayedCategoryCount = computed(() => {\n            return localConfig.widgetTagConfig?.displayedCategoryIds?.length || 0;\n        });\n        /**  */\n        function openTagManager() {\n            uiStore.openTagManagerDialog({\n                widgetId: props.widgetId,\n                displayedTagIds: localConfig.widgetTagConfig?.displayedTagIds || [],\n                displayedCategoryIds: localConfig.widgetTagConfig?.displayedCategoryIds || [],\n            }, (newTagIds, newCategoryIds) => {\n                // \n                localConfig.widgetTagConfig = {\n                    displayedTagIds: newTagIds,\n                    displayedCategoryIds: newCategoryIds,\n                };\n            });\n        }\n        // ============================================================\n        // \n        // ============================================================\n        const selectedDisplayColumn = ref('');\n        /**  */\n        const availableDisplayColumns = computed(() => {\n            return props.tableHeaders.filter(h => !localConfig.displayTagColumns.includes(h));\n        });\n        /**  */\n        function handleDisplayColumnSelect() {\n            if (selectedDisplayColumn.value) {\n                localConfig.displayTagColumns.push(selectedDisplayColumn.value);\n                selectedDisplayColumn.value = '';\n            }\n        }\n        /**  */\n        function removeDisplayColumn(col) {\n            const index = localConfig.displayTagColumns.indexOf(col);\n            if (index > -1) {\n                localConfig.displayTagColumns.splice(index, 1);\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        const localConfig = reactive({\n            titleColumn: '',\n            displayTagColumns: [],\n            widgetTagConfig: {\n                displayedTagIds: [],\n                displayedCategoryIds: [],\n            },\n            displayStyle: 'list',\n        });\n        /**  */\n        watch(() => props.visible, visible => {\n            if (visible) {\n                // \n                if (props.widgetConfig) {\n                    localConfig.titleColumn = props.widgetConfig.titleColumn || '';\n                    localConfig.displayTagColumns = [...(props.widgetConfig.displayTagColumns || [])];\n                    localConfig.displayStyle = props.widgetConfig.displayStyle || 'list';\n                    //  widgetTagConfig\n                    localConfig.widgetTagConfig = {\n                        displayedTagIds: [...(props.widgetConfig.widgetTagConfig?.displayedTagIds || [])],\n                        displayedCategoryIds: [...(props.widgetConfig.widgetTagConfig?.displayedCategoryIds || [])],\n                    };\n                }\n                else {\n                    // \n                    localConfig.titleColumn = '';\n                    localConfig.displayTagColumns = [];\n                    localConfig.displayStyle = 'list';\n                    localConfig.widgetTagConfig = {\n                        displayedTagIds: [],\n                        displayedCategoryIds: [],\n                    };\n                }\n            }\n        }, { immediate: true });\n        /**  */\n        watch(localConfig, () => {\n            if (props.visible && props.widgetId) {\n                saveConfig();\n            }\n        }, { deep: true });\n        /**  store */\n        function saveConfig() {\n            if (!props.widgetId)\n                return;\n            const hasTagConfig = (localConfig.widgetTagConfig.displayedTagIds?.length || 0) > 0 ||\n                (localConfig.widgetTagConfig.displayedCategoryIds?.length || 0) > 0;\n            dashboardStore.updateWidget(props.widgetId, {\n                titleColumn: localConfig.titleColumn || undefined,\n                displayTagColumns: localConfig.displayTagColumns.length > 0 ? localConfig.displayTagColumns : undefined,\n                widgetTagConfig: hasTagConfig ? localConfig.widgetTagConfig : undefined,\n                displayStyle: localConfig.displayStyle,\n            });\n        }\n        /**  */\n        function handleClose() {\n            emit('update:visible', false);\n            emit('close');\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-cog\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-paint-brush\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_5, [\n                                    _createElementVNode(\"div\", _hoisted_6, [\n                                        _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_7, [\n                                            _withDirectives(_createElementVNode(\"select\", {\n                                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localConfig.displayStyle) = $event)),\n                                                class: \"acu-select\"\n                                            }, [\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(DISPLAY_STYLE_OPTIONS), (opt) => {\n                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                        key: opt.value,\n                                                        value: opt.value\n                                                    }, _toDisplayString(opt.label), 9 /* TEXT, PROPS */, _hoisted_8));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ], 512 /* NEED_PATCH */), [\n                                                [_vModelSelect, localConfig.displayStyle]\n                                            ])\n                                        ])\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_9, [\n                                _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-heading\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_10, [\n                                    _createElementVNode(\"div\", _hoisted_11, [\n                                        _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            _withDirectives(_createElementVNode(\"select\", {\n                                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((localConfig.titleColumn) = $event)),\n                                                class: \"acu-select\"\n                                            }, [\n                                                _cache[7] || (_cache[7] = _createElementVNode(\"option\", { value: \"\" }, \"\", -1 /* CACHED */)),\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.tableHeaders, (header) => {\n                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                        key: header,\n                                                        value: header\n                                                    }, _toDisplayString(header), 9 /* TEXT, PROPS */, _hoisted_13));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ], 512 /* NEED_PATCH */), [\n                                                [_vModelSelect, localConfig.titleColumn]\n                                            ])\n                                        ])\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_14, [\n                                _cache[13] || (_cache[13] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-tags\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_15, [\n                                    _createElementVNode(\"div\", _hoisted_16, [\n                                        _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_17, [\n                                            _withDirectives(_createElementVNode(\"select\", {\n                                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((selectedDisplayColumn).value = $event)),\n                                                class: \"acu-select\",\n                                                onChange: handleDisplayColumnSelect\n                                            }, [\n                                                _cache[10] || (_cache[10] = _createElementVNode(\"option\", { value: \"\" }, \"...\", -1 /* CACHED */)),\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableDisplayColumns.value, (header) => {\n                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                        key: header,\n                                                        value: header\n                                                    }, _toDisplayString(header), 9 /* TEXT, PROPS */, _hoisted_18));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                [_vModelSelect, selectedDisplayColumn.value]\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    (localConfig.displayTagColumns.length > 0)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(localConfig.displayTagColumns, (col) => {\n                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                    key: col,\n                                                    class: \"acu-selected-tag\"\n                                                }, [\n                                                    _createTextVNode(_toDisplayString(col) + \" \", 1 /* TEXT */),\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"acu-tag-remove\",\n                                                        onClick: _withModifiers(($event) => (removeDisplayColumn(col)), [\"stop\"])\n                                                    }, [...(_cache[12] || (_cache[12] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                                        ]))], 8 /* PROPS */, _hoisted_20)\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_21, [\n                                _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-bolt\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_22, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", {\n                                        class: \"acu-settings-row acu-nav-row\",\n                                        onClick: _withModifiers(openTagManager, [\"stop\"])\n                                    }, [\n                                        _createElementVNode(\"div\", _hoisted_23, [\n                                            _cache[14] || (_cache[14] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                            (displayedTagCount.value > 0 || displayedCategoryCount.value > 0)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_24, \"  \" + _toDisplayString(displayedTagCount.value) + \" \" + _toDisplayString(displayedCategoryCount.value) + \"  \", 1 /* TEXT */))\n                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_25, \"\"))\n                                        ]),\n                                        _cache[15] || (_cache[15] = _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                        ], -1 /* CACHED */))\n                                    ]),\n                                    _createCommentVNode(\"  () \"),\n                                    _createElementVNode(\"div\", _hoisted_26, [\n                                        _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"AI  ()\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_27, [\n                                            _createElementVNode(\"button\", {\n                                                class: _normalizeClass([\"acu-switch\", { active: _unref(configStore).config.autoImportInteractions }]),\n                                                onClick: _cache[3] || (_cache[3] = ($event) => (_unref(configStore).config.autoImportInteractions = !_unref(configStore).config.autoImportInteractions))\n                                            }, null, 2 /* CLASS */)\n                                        ])\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ], 512 /* NEED_PATCH */)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./WidgetSettingsDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WidgetSettingsDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/* unplugin-vue-components disabled */import script from \"./CardFront.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CardFront.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"tarot-card__inner\" };\nconst _hoisted_2 = { class: \"tarot-card__face tarot-card__back\" };\nconst _hoisted_3 = { class: \"tarot-card__face tarot-card__front\" };\nimport { computed, ref } from 'vue';\nimport { getTheme } from './themes';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TarotCard',\n    props: {\n        themeId: { default: 'wafuku' },\n        isFlipped: { type: Boolean },\n        result: {},\n        cardBackImage: { default: '' },\n        peepMode: { type: Boolean, default: false }\n    },\n    emits: [\"flip\", \"confirm\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        // \n        const theme = computed(() => getTheme(props.themeId));\n        // \n        const effectiveBackImage = computed(() => {\n            return props.cardBackImage || theme.value.defaultBackImage || '';\n        });\n        //  220/385 (~0.57)\n        const aspectRatio = ref(220 / 385);\n        // \n        const cardStyle = computed(() => {\n            return {\n                aspectRatio: `${aspectRatio.value}`,\n            };\n        });\n        function handleCardBackLoad(ratio) {\n            // \n            // 0.5 (2:1)  1.0 (1:1)\n            const clampedRatio = Math.max(0.5, Math.min(1.0, ratio));\n            aspectRatio.value = clampedRatio;\n        }\n        //  Result  CardFront  DisplayData\n        const displayData = computed(() => {\n            if (!props.result)\n                return null;\n            return {\n                luckName: props.result.luck.name,\n                luckColor: props.result.luck.color,\n                // store  { name, value } \n                dimensions: props.result.dimensions.map(d => d.value),\n                words: props.result.words,\n                peepMode: props.peepMode,\n            };\n        });\n        function handleClick() {\n            if (!props.isFlipped) {\n                emit('flip');\n            }\n            else {\n                emit('confirm');\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"tarot-card\", [`tarot-card--theme-${__props.themeId}`, { 'tarot-card--flipped': __props.isFlipped }]]),\n                style: _normalizeStyle(cardStyle.value),\n                onClick: _withModifiers(handleClick, [\"stop\"])\n            }, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        (_openBlock(), _createBlock(_resolveDynamicComponent(theme.value.CardBack), {\n                            \"image-url\": effectiveBackImage.value,\n                            onLoad: handleCardBackLoad\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, [\"image-url\"]))\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        (displayData.value)\n                            ? (_openBlock(), _createBlock(_resolveDynamicComponent(theme.value.CardFront), {\n                                key: 0,\n                                \"luck-name\": displayData.value.luckName,\n                                \"luck-color\": displayData.value.luckColor,\n                                dimensions: displayData.value.dimensions,\n                                words: displayData.value.words,\n                                \"peep-mode\": displayData.value.peepMode\n                            }, null, 8 /* PROPS */, [\"luck-name\", \"luck-color\", \"dimensions\", \"words\", \"peep-mode\"]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ])\n                ])\n            ], 6 /* CLASS, STYLE */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TarotCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TarotCard.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, withModifiers as _withModifiers, createVNode as _createVNode, Transition as _Transition, withCtx as _withCtx, Teleport as _Teleport, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"divination-starfield\" };\nconst _hoisted_2 = { class: \"divination-content\" };\nconst _hoisted_3 = { class: \"divination-stage\" };\nconst _hoisted_4 = { class: \"divination-footer\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"divination-hint\"\n};\nimport { computed, ref, watch } from 'vue';\nimport { useConfigStore } from '../../../stores/useConfigStore';\nimport { useDivinationStore } from '../../../stores/useDivinationStore';\nimport { useUIStore } from '../../../stores/useUIStore';\nimport TarotCard from './TarotCard.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DivinationOverlay',\n    props: {\n        visible: { type: Boolean },\n        result: {}\n    },\n    emits: [\"close\", \"confirm\", \"retry\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const divinationStore = useDivinationStore();\n        const configStore = useConfigStore();\n        const uiStore = useUIStore();\n        //  body  Teleport\n        const parentBody = window.parent.document.body;\n        // \n        const isFlipped = ref(false);\n        // \n        const stars = computed(() => {\n            return Array.from({ length: 50 }).map((_, i) => ({\n                id: i,\n                left: `${Math.random() * 100}%`,\n                top: `${Math.random() * 100}%`,\n                size: Math.random() * 2 + 1,\n                delay: Math.random() * 5,\n                duration: Math.random() * 3 + 2,\n            }));\n        });\n        //  visible \n        watch(() => props.visible, newVal => {\n            if (newVal) {\n                // \n                if (divinationStore.config.flipMode === 'auto') {\n                    isFlipped.value = false; // \n                    setTimeout(() => {\n                        isFlipped.value = true;\n                    }, 500);\n                }\n                else {\n                    isFlipped.value = false;\n                }\n            }\n        });\n        function handleClose() {\n            emit('close');\n        }\n        function handleOverlayClick() {\n            if (isFlipped.value) {\n                handleConfirm();\n            }\n        }\n        function handleFlip() {\n            isFlipped.value = true;\n        }\n        function handleConfirm() {\n            const config = divinationStore.config;\n            // \n            if (uiStore.divinationOverlay.isQuickRerollMode) {\n                emit('confirm', 'reroll');\n            }\n            else if (config.peepMode) {\n                emit('confirm', 'hide');\n            }\n            else {\n                emit('confirm', 'reveal');\n            }\n        }\n        function handleRetry() {\n            // \n            emit('retry');\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Teleport, { to: _unref(parentBody) }, [\n                _createVNode(_Transition, {\n                    \"enter-active-class\": \"divination-overlay-enter-active\",\n                    \"leave-active-class\": \"divination-overlay-leave-active\"\n                }, {\n                    default: _withCtx(() => [\n                        (__props.visible)\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"divination-overlay\",\n                                style: {\n                                    zIndex: 2147483647,\n                                },\n                                onClick: handleOverlayClick\n                            }, [\n                                _createCommentVNode(\"  \"),\n                                _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"divination-grain\" }, null, -1 /* CACHED */)),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_1, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(stars.value, (star) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: star.id,\n                                            class: \"divination-star\",\n                                            style: _normalizeStyle({\n                                                left: star.left,\n                                                top: star.top,\n                                                width: `${star.size}px`,\n                                                height: `${star.size}px`,\n                                                '--duration': `${star.duration}s`,\n                                                '--delay': `${star.delay}s`,\n                                            })\n                                        }, null, 4 /* STYLE */));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"divination-nebula divination-nebula--purple\" }, null, -1 /* CACHED */)),\n                                _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"divination-nebula divination-nebula--golden\" }, null, -1 /* CACHED */)),\n                                _createCommentVNode(\"  \"),\n                                _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"divination-central-glow\" }, null, -1 /* CACHED */)),\n                                _createCommentVNode(\"  \"),\n                                _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"divination-geometry divination-geometry--outer\" }, [\n                                    _createElementVNode(\"svg\", {\n                                        viewBox: \"0 0 100 100\",\n                                        fill: \"none\",\n                                        stroke: \"#D4AF37\",\n                                        \"stroke-width\": \"0.05\"\n                                    }, [\n                                        _createElementVNode(\"circle\", {\n                                            cx: \"50\",\n                                            cy: \"50\",\n                                            r: \"48\"\n                                        }),\n                                        _createElementVNode(\"path\", {\n                                            d: \"M50 0 L93 75 L6 75 Z\",\n                                            opacity: \"0.5\"\n                                        }),\n                                        _createElementVNode(\"path\", {\n                                            d: \"M50 100 L93 25 L6 25 Z\",\n                                            opacity: \"0.5\"\n                                        })\n                                    ])\n                                ], -1 /* CACHED */)),\n                                _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"divination-geometry divination-geometry--inner\" }, [\n                                    _createElementVNode(\"svg\", {\n                                        viewBox: \"0 0 100 100\",\n                                        fill: \"none\",\n                                        stroke: \"#C6A664\",\n                                        \"stroke-width\": \"0.1\"\n                                    }, [\n                                        _createElementVNode(\"circle\", {\n                                            cx: \"50\",\n                                            cy: \"50\",\n                                            r: \"45\",\n                                            \"stroke-dasharray\": \"2 1\"\n                                        }),\n                                        _createElementVNode(\"circle\", {\n                                            cx: \"50\",\n                                            cy: \"50\",\n                                            r: \"30\"\n                                        }),\n                                        _createElementVNode(\"rect\", {\n                                            x: \"29\",\n                                            y: \"29\",\n                                            width: \"42\",\n                                            height: \"42\",\n                                            transform: \"rotate(45 50 50)\"\n                                        }),\n                                        _createElementVNode(\"rect\", {\n                                            x: \"29\",\n                                            y: \"29\",\n                                            width: \"42\",\n                                            height: \"42\",\n                                            transform: \"rotate(0 50 50)\"\n                                        })\n                                    ])\n                                ], -1 /* CACHED */)),\n                                _createCommentVNode(\"  \"),\n                                _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"divination-frame\" }, [\n                                    _createElementVNode(\"div\", { class: \"divination-frame__corner divination-frame__corner--tl\" }),\n                                    _createElementVNode(\"div\", { class: \"divination-frame__corner divination-frame__corner--tr\" }),\n                                    _createElementVNode(\"div\", { class: \"divination-frame__corner divination-frame__corner--bl\" }),\n                                    _createElementVNode(\"div\", { class: \"divination-frame__corner divination-frame__corner--br\" }),\n                                    _createElementVNode(\"div\", { class: \"divination-frame__top-line\" }),\n                                    _createElementVNode(\"div\", { class: \"divination-frame__bottom-line\" })\n                                ], -1 /* CACHED */)),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"button\", {\n                                    class: \"divination-close\",\n                                    onClick: _withModifiers(handleClose, [\"stop\"])\n                                }, [...(_cache[1] || (_cache[1] = [\n                                        _createElementVNode(\"svg\", {\n                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                            width: \"20\",\n                                            height: \"20\",\n                                            viewBox: \"0 0 24 24\",\n                                            fill: \"none\",\n                                            stroke: \"currentColor\",\n                                            \"stroke-width\": \"2\",\n                                            \"stroke-linecap\": \"round\",\n                                            \"stroke-linejoin\": \"round\"\n                                        }, [\n                                            _createElementVNode(\"path\", { d: \"M18 6 6 18\" }),\n                                            _createElementVNode(\"path\", { d: \"m6 6 12 12\" })\n                                        ], -1 /* CACHED */)\n                                    ]))]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_2, [\n                                    _createCommentVNode(\"  \"),\n                                    _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"divination-header\" }, [\n                                        _createElementVNode(\"div\", { class: \"divination-header__title\" }, [\n                                            _createElementVNode(\"span\", { class: \"divination-header__sparkle divination-header__sparkle--static\" }, [\n                                                _createElementVNode(\"svg\", {\n                                                    xmlns: \"http://www.w3.org/2000/svg\",\n                                                    width: \"32\",\n                                                    height: \"32\",\n                                                    viewBox: \"0 0 24 24\",\n                                                    fill: \"none\",\n                                                    stroke: \"currentColor\",\n                                                    \"stroke-width\": \"1.5\",\n                                                    \"stroke-linecap\": \"round\",\n                                                    \"stroke-linejoin\": \"round\"\n                                                }, [\n                                                    _createElementVNode(\"path\", { d: \"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z\" })\n                                                ])\n                                            ]),\n                                            _createElementVNode(\"div\", { class: \"divination-header__divider\" })\n                                        ])\n                                    ], -1 /* CACHED */)),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_3, [\n                                        _createVNode(TarotCard, {\n                                            \"is-flipped\": isFlipped.value,\n                                            result: __props.result,\n                                            \"card-back-image\": _unref(divinationStore).config.cardBackImage,\n                                            \"theme-id\": _unref(divinationStore).config.themeId,\n                                            \"peep-mode\": _unref(divinationStore).config.peepMode,\n                                            onFlip: handleFlip,\n                                            onConfirm: _cache[0] || (_cache[0] = ($event) => (handleConfirm()))\n                                        }, null, 8 /* PROPS */, [\"is-flipped\", \"result\", \"card-back-image\", \"theme-id\", \"peep-mode\"])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_4, [\n                                        _createCommentVNode(\"  \"),\n                                        (!isFlipped.value)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[2] || (_cache[2] = [\n                                                    _createElementVNode(\"p\", { class: \"divination-hint__text\" }, \" \", -1 /* CACHED */)\n                                                ]))]))\n                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"button\", {\n                                                    class: \"divination-btn divination-btn--retry\",\n                                                    onClick: _withModifiers(handleRetry, [\"stop\"])\n                                                }, \"\")\n                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ], 8 /* PROPS */, [\"to\"]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DivinationOverlay.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DivinationOverlay.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withModifiers as _withModifiers, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"acu-action-bar\" };\nconst _hoisted_2 = [\"title\", \"onClick\", \"onMousedown\", \"onTouchstartPassive\"];\nconst _hoisted_3 = {\n    key: 0,\n    class: \"secondary-indicator\"\n};\nconst _hoisted_4 = [\"title\", \"onClick\"];\nimport { computed, ref } from 'vue';\nimport { useCellLock } from '../composables';\nimport { NAV_BUTTONS, useConfigStore } from '../stores/useConfigStore';\nimport { useUIStore } from '../stores/useUIStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ActionBar',\n    props: {\n        hasChanges: { type: Boolean, default: false },\n        isPinned: { type: Boolean, default: false }\n    },\n    emits: [\"save\", \"saveAs\", \"refresh\", \"manualUpdate\", \"purge\", \"pin\", \"toggle\", \"settings\", \"openNative\", \"finishLockEdit\", \"cancelLockEdit\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * ActionBar - \n         *\n         * :\n         * -  configStore \n         * -  + \n         * - \n         * - \n         * - \n         *\n         * :\n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        const configStore = useConfigStore();\n        const uiStore = useUIStore();\n        const cellLock = useCellLock();\n        // ============================================================\n        //  -  computed  store getter\n        // ============================================================\n        /**  ID  */\n        const sortedVisibleButtonIds = computed(() => {\n            console.log('[ACU ActionBar] Computing sortedVisibleButtonIds from store:', configStore.sortedVisibleButtons);\n            return configStore.sortedVisibleButtons;\n        });\n        /**  */\n        const buttonGroups = computed(() => configStore.buttonGroups);\n        /**  */\n        const longPressDirectExec = computed(() => configStore.longPressDirectExec);\n        /**\n         *  ID\n         * @param buttonId  ID\n         */\n        const getSecondaryId = (buttonId) => {\n            return configStore.getSecondaryButtonId(buttonId);\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const hasSecondary = (buttonId) => {\n            return getSecondaryId(buttonId) !== null;\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const getButtonIcon = (buttonId) => {\n            const btn = NAV_BUTTONS.find(b => b.id === buttonId);\n            return btn?.icon || 'fa-circle';\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const getButtonLabel = (buttonId) => {\n            const btn = NAV_BUTTONS.find(b => b.id === buttonId);\n            return btn?.label || buttonId;\n        };\n        /**\n         *  title\n         * @param buttonId  ID\n         */\n        const getButtonTitle = (buttonId) => {\n            const label = getButtonLabel(buttonId);\n            const secondaryId = getSecondaryId(buttonId);\n            if (secondaryId) {\n                const secondaryLabel = getButtonLabel(secondaryId);\n                return `${label} (: ${secondaryLabel})`;\n            }\n            return label;\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const getButtonClass = (buttonId) => {\n            const classes = [];\n            // \n            if (buttonId === 'purge') {\n                classes.push('acu-btn-danger');\n            }\n            // \n            if (buttonId === 'pin') {\n                classes.push('acu-btn-toggle');\n                if (props.isPinned) {\n                    classes.push('active');\n                }\n            }\n            // \n            if (buttonId === 'save' && props.hasChanges) {\n                classes.push('has-changes');\n            }\n            // \n            if (hasSecondary(buttonId)) {\n                classes.push('has-secondary');\n            }\n            return classes;\n        };\n        // ============================================================\n        // \n        // ============================================================\n        let longPressTimer = null;\n        const isLongPress = ref(false);\n        const popupButtonId = ref(null);\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const startLongPress = (buttonId) => {\n            const secondaryId = getSecondaryId(buttonId);\n            console.log('[ACU ActionBar] startLongPress:', buttonId, 'secondaryId:', secondaryId, 'groups:', configStore.buttonGroups);\n            if (!secondaryId) {\n                console.log('[ACU ActionBar] No secondary button for:', buttonId);\n                return;\n            }\n            isLongPress.value = false;\n            longPressTimer = setTimeout(() => {\n                isLongPress.value = true;\n                console.log('[ACU ActionBar] Long press triggered for:', buttonId, 'directExec:', configStore.longPressDirectExec);\n                // \n                if (configStore.longPressDirectExec) {\n                    // \n                    console.log('[ACU ActionBar] Direct exec:', secondaryId);\n                    emitAction(secondaryId);\n                }\n                else {\n                    // \n                    console.log('[ACU ActionBar] Popup button:', secondaryId);\n                    popupButtonId.value = buttonId;\n                    // 3\n                    setTimeout(() => {\n                        if (popupButtonId.value === buttonId) {\n                            popupButtonId.value = null;\n                        }\n                    }, 3000);\n                }\n            }, 600);\n        };\n        /**\n         * \n         */\n        const endLongPress = () => {\n            if (longPressTimer) {\n                clearTimeout(longPressTimer);\n                longPressTimer = null;\n            }\n        };\n        /**\n         * \n         * @param primaryId  ID\n         */\n        const handleSecondaryClick = (primaryId) => {\n            const secondaryId = getSecondaryId(primaryId);\n            if (secondaryId) {\n                emitAction(secondaryId);\n            }\n            popupButtonId.value = null;\n        };\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         * @param actionId  ID\n         */\n        const emitAction = (actionId) => {\n            switch (actionId) {\n                case 'save':\n                    emit('save');\n                    break;\n                case 'saveAs':\n                    emit('saveAs');\n                    break;\n                case 'refresh':\n                    emit('refresh');\n                    break;\n                case 'manualUpdate':\n                    emit('manualUpdate');\n                    break;\n                case 'purge':\n                    emit('purge');\n                    break;\n                case 'pin':\n                    emit('pin');\n                    break;\n                case 'toggle':\n                    emit('toggle');\n                    break;\n                case 'settings':\n                    emit('settings');\n                    break;\n                case 'openNative':\n                    emit('openNative');\n                    break;\n                default:\n                    console.warn(`[ActionBar]  ID: ${actionId}`);\n            }\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const handleClick = (buttonId) => {\n            // \n            if (isLongPress.value) {\n                isLongPress.value = false;\n                return;\n            }\n            emitAction(buttonId);\n        };\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        const handleFinishLockEdit = () => {\n            emit('finishLockEdit');\n        };\n        /**\n         * \n         */\n        const handleCancelLockEdit = () => {\n            emit('cancelLockEdit');\n        };\n        /**\n         * \n         */\n        const toggleShowLockedOnly = () => {\n            uiStore.showLockedOnly = !uiStore.showLockedOnly;\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(sortedVisibleButtonIds.value, (btnId) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                        key: btnId,\n                        class: \"acu-action-btn-wrapper\"\n                    }, [\n                        _createElementVNode(\"button\", {\n                            class: _normalizeClass([\"acu-action-btn\", getButtonClass(btnId)]),\n                            title: getButtonTitle(btnId),\n                            onClick: ($event) => (handleClick(btnId)),\n                            onMousedown: ($event) => (startLongPress(btnId)),\n                            onMouseup: endLongPress,\n                            onMouseleave: endLongPress,\n                            onTouchstartPassive: ($event) => (startLongPress(btnId)),\n                            onTouchend: endLongPress\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(['fas', getButtonIcon(btnId)])\n                            }, null, 2 /* CLASS */),\n                            _createCommentVNode(\"  \"),\n                            (hasSecondary(btnId))\n                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3))\n                                : _createCommentVNode(\"v-if\", true)\n                        ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_2),\n                        _createCommentVNode(\"  \"),\n                        _createVNode(_Transition, { name: \"popup\" }, {\n                            default: _withCtx(() => [\n                                (popupButtonId.value === btnId && getSecondaryId(btnId))\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 0,\n                                        class: \"acu-action-btn acu-popup-btn\",\n                                        title: getButtonLabel(getSecondaryId(btnId)),\n                                        onClick: _withModifiers(($event) => (handleSecondaryClick(btnId)), [\"stop\"])\n                                    }, [\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(['fas', getButtonIcon(getSecondaryId(btnId))])\n                                        }, null, 2 /* CLASS */)\n                                    ], 8 /* PROPS */, _hoisted_4))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]),\n                            _: 2 /* DYNAMIC */\n                        }, 1024 /* DYNAMIC_SLOTS */)\n                    ]));\n                }), 128 /* KEYED_FRAGMENT */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ActionBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ActionBar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ActionBar.vue?vue&type=style&index=0&id=a7372644&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a7372644\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"acu-toast\"\n};\nconst _hoisted_2 = { class: \"acu-toast-message\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Toast',\n    props: {\n        visible: { type: Boolean },\n        message: {}\n    },\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"toast\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_2, _toDisplayString(__props.message), 1 /* TEXT */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Toast.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Toast.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = [\"title\", \"onClick\"];\nimport { computed } from 'vue';\nimport { useDataStore } from '../stores/useDataStore';\nimport { TAB_DASHBOARD, TAB_OPTIONS, TAB_RELATIONSHIP_GRAPH, useUIStore } from '../stores/useUIStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TabsPopup',\n    props: {\n        visible: { type: Boolean },\n        tabs: {},\n        activeTab: {},\n        gridColumns: { default: 'repeat(auto-fill, minmax(90px, 1fr))' },\n        showDashboard: { type: Boolean, default: true },\n        showRelationshipGraph: { type: Boolean, default: false },\n        showOptionsPanel: { type: Boolean, default: false }\n    },\n    emits: [\"close\", \"tab-click\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * TabsPopup - Tab \n         *\n         * :\n         * - Tab Tab\n         * -  Tab \n         * -  TabBar \n         * -  useUIStore  visibleTabs  Tab TabBar \n         *\n         * :\n         * - MainPanel \"Tab\"\n         */\n        const props = __props;\n        const emit = __emit;\n        const dataStore = useDataStore();\n        const uiStore = useUIStore();\n        /**\n         *  Tab (//)\n         */\n        function isSpecialTab(tabId) {\n            return tabId === TAB_DASHBOARD || tabId === TAB_OPTIONS || tabId === TAB_RELATIONSHIP_GRAPH;\n        }\n        /**\n         *  Tab \n         * visibleTabs  (name) Tab  ID\n         * @param nameOrId  Tab  ID\n         */\n        function createTabObject(nameOrId) {\n            //  Tab  ID\n            if (nameOrId === TAB_DASHBOARD) {\n                return { id: TAB_DASHBOARD, name: '', icon: 'fas fa-home' };\n            }\n            if (nameOrId === TAB_RELATIONSHIP_GRAPH) {\n                return { id: TAB_RELATIONSHIP_GRAPH, name: '', icon: 'fas fa-project-diagram' };\n            }\n            if (nameOrId === TAB_OPTIONS) {\n                return { id: TAB_OPTIONS, name: '', icon: 'fas fa-sliders-h' };\n            }\n            // \n            return props.tabs.find(t => t.name === nameOrId);\n        }\n        /**\n         *  Tab \n         * -  visibleTabs  ->  ->  -> \n         * -  visibleTabs \n         *\n         *  TabBar.vue  allVisibleTabs \n         */\n        const allVisibleTabs = computed(() => {\n            const visibleTabs = uiStore.visibleTabs;\n            // 1. \n            if (!visibleTabs || visibleTabs.length === 0) {\n                const tabs = [];\n                // \n                if (props.showDashboard) {\n                    tabs.push({ id: TAB_DASHBOARD, name: '', icon: 'fas fa-home' });\n                }\n                // \n                tabs.push(...props.tabs);\n                // \n                if (props.showRelationshipGraph) {\n                    tabs.push({ id: TAB_RELATIONSHIP_GRAPH, name: '', icon: 'fas fa-project-diagram' });\n                }\n                // \n                if (props.showOptionsPanel) {\n                    tabs.push({ id: TAB_OPTIONS, name: '', icon: 'fas fa-sliders-h' });\n                }\n                return tabs;\n            }\n            // 2. \n            return visibleTabs\n                .map(tabId => createTabObject(tabId))\n                .filter((tab) => {\n                //  undefined  Tab\n                if (!tab)\n                    return false;\n                if (tab.id === TAB_DASHBOARD && !props.showDashboard)\n                    return false;\n                if (tab.id === TAB_RELATIONSHIP_GRAPH && !props.showRelationshipGraph)\n                    return false;\n                if (tab.id === TAB_OPTIONS && !props.showOptionsPanel)\n                    return false;\n                return true;\n            });\n        });\n        /**\n         *  Tab \n         * @param tabName Tab \n         */\n        function hasTabIssues(tabName) {\n            return dataStore.hasTableIssues(tabName);\n        }\n        /**\n         *  Tab  AI \n         * @param tabName Tab \n         */\n        function hasTabAiChanges(tabName) {\n            return dataStore.hasTableAiChanges(tabName);\n        }\n        /**\n         *  Tab \n         * @param tabId Tab ID\n         */\n        const handleTabClick = (tabId) => {\n            emit('tab-click', tabId);\n            emit('close');\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"hidden-popup\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-tabs-popup\",\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", {\n                                class: \"popup-tabs-grid\",\n                                style: _normalizeStyle({ '--acu-nav-cols': __props.gridColumns })\n                            }, [\n                                _createCommentVNode(\"  Tab  \"),\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(allVisibleTabs.value, (tab) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: tab.id,\n                                        class: _normalizeClass([\"acu-nav-btn\", {\n                                                active: __props.activeTab === tab.id,\n                                                'has-issues': !isSpecialTab(tab.id) && hasTabIssues(tab.name),\n                                                'has-ai-changes': !isSpecialTab(tab.id) && !hasTabIssues(tab.name) && hasTabAiChanges(tab.name),\n                                            }]),\n                                        title: tab.name,\n                                        onClick: _withModifiers(($event) => (handleTabClick(tab.id)), [\"stop\"])\n                                    }, [\n                                        (tab.icon)\n                                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                                key: 0,\n                                                class: _normalizeClass(tab.icon)\n                                            }, null, 2 /* CLASS */))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createElementVNode(\"span\", null, _toDisplayString(tab.name), 1 /* TEXT */)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_1));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ], 4 /* STYLE */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TabsPopup.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TabsPopup.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TabsPopup.vue?vue&type=style&index=0&id=ba4c37fe&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ba4c37fe\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, vModelText as _vModelText, withDirectives as _withDirectives, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, Teleport as _Teleport, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-prompt-editor-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-body\" };\nconst _hoisted_4 = { class: \"acu-settings-section\" };\nconst _hoisted_5 = { class: \"acu-settings-group\" };\nconst _hoisted_6 = {\n    class: \"acu-settings-row\",\n    style: { \"flex-direction\": \"column\", \"align-items\": \"flex-start\" }\n};\nconst _hoisted_7 = { class: \"acu-modal-footer\" };\nimport { ref, watch } from 'vue';\nimport { useToast } from '../../../composables/useToast';\nimport { useUIStore } from '../../../stores/useUIStore';\nimport { useConfigStore } from '../../../stores/useConfigStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PromptEditorDialog',\n    props: {\n        visible: { type: Boolean },\n        prompt: {}\n    },\n    emits: [\"close\", \"save\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const uiStore = useUIStore();\n        const configStore = useConfigStore();\n        const toast = useToast();\n        const localPrompt = ref('');\n        //  body  Teleport\n        const parentBody = window.parent.document.body;\n        //  visible  prompt \n        watch(() => [props.visible, props.prompt], ([visible, prompt]) => {\n            if (visible) {\n                localPrompt.value = prompt || '';\n            }\n        }, { immediate: true });\n        function handleClose() {\n            emit('close');\n        }\n        function handleClear() {\n            localPrompt.value = '';\n            toast.info('');\n        }\n        function handleSave() {\n            emit('save', localPrompt.value);\n            toast.success('');\n            handleClose();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Teleport, { to: _unref(parentBody) }, [\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass(`acu-theme-${_unref(configStore).config.theme}`)\n                }, [\n                    _createVNode(_Transition, { name: \"modal\" }, {\n                        default: _withCtx(() => [\n                            (__props.visible)\n                                ? (_openBlock(), _createElementBlock(\"div\", {\n                                    key: 0,\n                                    class: _normalizeClass([\"acu-modal-container\", { 'acu-center-modal': _unref(uiStore).isMobile }]),\n                                    onClick: _withModifiers(handleClose, [\"self\"])\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_1, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_2, [\n                                            _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, [\n                                                _createElementVNode(\"i\", { class: \"fas fa-eye-slash\" }),\n                                                _createTextVNode(\"  \")\n                                            ], -1 /* CACHED */)),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-close-pill\",\n                                                onClick: _withModifiers(handleClose, [\"stop\"])\n                                            }, \"\")\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_3, [\n                                            _createElementVNode(\"div\", _hoisted_4, [\n                                                _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-edit\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_5, [\n                                                    _createElementVNode(\"div\", _hoisted_6, [\n                                                        _cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n                                                            class: \"acu-settings-label\",\n                                                            style: { \"margin-bottom\": \"8px\" }\n                                                        }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _withDirectives(_createElementVNode(\"textarea\", {\n                                                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localPrompt).value = $event)),\n                                                            class: \"acu-textarea-scrollable\",\n                                                            style: { \"width\": \"100%\", \"height\": \"150px\" },\n                                                            placeholder: \"...\"\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [_vModelText, localPrompt.value]\n                                                        ])\n                                                    ])\n                                                ])\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_7, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-modal-btn secondary\",\n                                                onClick: _withModifiers(handleClear, [\"stop\"])\n                                            }, \"\"),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-modal-btn primary\",\n                                                onClick: _withModifiers(handleSave, [\"stop\"])\n                                            }, \"\")\n                                        ])\n                                    ])\n                                ], 2 /* CLASS */))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _: 1 /* STABLE */\n                    })\n                ], 2 /* CLASS */)\n            ], 8 /* PROPS */, [\"to\"]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./PromptEditorDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PromptEditorDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = [\"onClick\", \"onMouseenter\", \"onTouchstartPassive\"];\nconst _hoisted_2 = { class: \"acu-badge-label\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"acu-badge-icon\"\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"fas fa-check added-icon\"\n};\nconst _hoisted_5 = {\n    key: 1,\n    class: \"fas fa-plus add-icon\"\n};\nconst _hoisted_6 = {\n    key: 1,\n    class: \"acu-badge-icon tap-icon\"\n};\nconst _hoisted_7 = {\n    key: 2,\n    class: \"acu-badge-delete\"\n};\nconst _hoisted_8 = {\n    key: 0,\n    class: \"acu-grid-empty\"\n};\nimport { computed } from 'vue';\nimport { useTagLibraryStore } from '../../../stores/useTagLibraryStore';\nimport { useUIStore } from '../../../stores/useUIStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TagBadgeGrid',\n    props: {\n        mode: {},\n        displayedTagIds: { default: () => [] }\n    },\n    emits: [\"tagClick\", \"createTag\", \"deleteTag\", \"addTag\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        // Emits\n        const emit = __emit;\n        // Store\n        const tagStore = useTagLibraryStore();\n        const uiStore = useUIStore();\n        // \n        const displayedTags = computed(() => tagStore.filteredTags);\n        const selectedTagIds = computed(() => tagStore.selectedTagIds);\n        const displayedTagIdSet = computed(() => new Set(props.displayedTagIds));\n        const isPreviewMode = computed(() => uiStore.tagPreviewMode);\n        const emptyMessage = computed(() => {\n            if (tagStore.searchKeyword) {\n                return '';\n            }\n            if (tagStore.activeCategoryId === 'uncategorized') {\n                return '';\n            }\n            if (tagStore.activeCategoryId) {\n                const cat = tagStore.getCategoryById(tagStore.activeCategoryId);\n                return `\"${cat?.path || ''}\" `;\n            }\n            return '';\n        });\n        // \n        function handleTagClick(tag) {\n            // \n            if (isPreviewMode.value)\n                return;\n            switch (props.mode) {\n                case 'normal':\n                    // \n                    emit('tagClick', tag);\n                    break;\n                case 'add':\n                    // \n                    emit('addTag', tag.id);\n                    break;\n                case 'delete':\n                    // \n                    emit('deleteTag', tag.id);\n                    break;\n                case 'migrate':\n                case 'export':\n                    // /\n                    toggleTagSelection(tag.id);\n                    break;\n                case 'create':\n                    // \n                    emit('tagClick', tag);\n                    break;\n            }\n        }\n        function handleGridClick() {\n            if (props.mode === 'create') {\n                // \n                emit('createTag');\n            }\n        }\n        function toggleTagSelection(tagId) {\n            tagStore.toggleTagSelection(tagId);\n        }\n        // ====================  ====================\n        /** PC */\n        function handleTagMouseEnter(tag, event) {\n            //  PC \n            if (!tag.promptTemplate)\n                return;\n            const target = event.currentTarget;\n            const rect = target.getBoundingClientRect();\n            // position: fixed \n            uiStore.showTagPreviewTooltip(tag.promptTemplate, rect.left + rect.width / 2, rect.top);\n        }\n        /** PC */\n        function handleTagMouseLeave() {\n            uiStore.hideTagPreviewTooltip();\n        }\n        /**  */\n        function handleTagTouchStart(tag, event) {\n            if (!isPreviewMode.value)\n                return;\n            if (!tag.promptTemplate)\n                return;\n            const touch = event.touches[0];\n            if (!touch)\n                return;\n            // \n            uiStore.showTagPreviewTooltip(tag.promptTemplate, touch.clientX, touch.clientY);\n        }\n        /**  */\n        function handleTagTouchEnd() {\n            if (!isPreviewMode.value)\n                return;\n            uiStore.hideTagPreviewTooltip();\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"acu-tag-grid\",\n                onClick: handleGridClick\n            }, [\n                _createCommentVNode(\"  \"),\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayedTags.value, (tag) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                        key: tag.id,\n                        class: _normalizeClass([\"acu-tag-badge\", {\n                                selected: selectedTagIds.value.has(tag.id),\n                                added: displayedTagIdSet.value.has(tag.id),\n                                'mode-add': __props.mode === 'add',\n                                'mode-delete': __props.mode === 'delete',\n                                'mode-preview': isPreviewMode.value,\n                            }]),\n                        onClick: _withModifiers(($event) => (handleTagClick(tag)), [\"stop\"]),\n                        onMouseenter: ($event) => (handleTagMouseEnter(tag, $event)),\n                        onMouseleave: handleTagMouseLeave,\n                        onTouchstartPassive: ($event) => (handleTagTouchStart(tag, $event)),\n                        onTouchend: handleTagTouchEnd,\n                        onTouchcancel: handleTagTouchEnd\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"span\", _hoisted_2, _toDisplayString(tag.label), 1 /* TEXT */),\n                        _createCommentVNode(\" + \"),\n                        (__props.mode === 'add')\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, [\n                                (displayedTagIdSet.value.has(tag.id))\n                                    ? (_openBlock(), _createElementBlock(\"i\", _hoisted_4))\n                                    : (_openBlock(), _createElementBlock(\"i\", _hoisted_5))\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\" / \"),\n                        (__props.mode === 'migrate' || __props.mode === 'export')\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, [...(_cache[0] || (_cache[0] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-hand-pointer\" }, null, -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        (__props.mode === 'delete')\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_7, [...(_cache[1] || (_cache[1] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_1));\n                }), 128 /* KEYED_FRAGMENT */)),\n                _createCommentVNode(\"  \"),\n                (displayedTags.value.length === 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                        _cache[2] || (_cache[2] = _createElementVNode(\"i\", { class: \"fas fa-tag\" }, null, -1 /* CACHED */)),\n                        _createElementVNode(\"span\", null, _toDisplayString(emptyMessage.value), 1 /* TEXT */)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TagBadgeGrid.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TagBadgeGrid.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"acu-tree-icon\" };\nconst _hoisted_2 = { key: 1 };\nconst _hoisted_3 = { class: \"acu-tree-count\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"acu-root-icon-editor\"\n};\nconst _hoisted_5 = { class: \"acu-tree-count\" };\nconst _hoisted_6 = {\n    key: 1,\n    class: \"acu-tree-divider\"\n};\nconst _hoisted_7 = [\"data-category-id\", \"onClick\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = {\n    key: 1,\n    class: \"acu-tree-toggle-placeholder\"\n};\nconst _hoisted_10 = {\n    key: 2,\n    class: \"acu-tree-icon\"\n};\nconst _hoisted_11 = { key: 1 };\nconst _hoisted_12 = { class: \"acu-tree-label\" };\nconst _hoisted_13 = { class: \"acu-tree-count\" };\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = [\"onClick\"];\nconst _hoisted_18 = {\n    key: 2,\n    class: \"acu-tree-empty\"\n};\nimport { computed, ref, watch } from 'vue';\nimport { useTagLibraryStore } from '../../../stores/useTagLibraryStore';\nimport { useUIStore } from '../../../stores/useUIStore';\nconst ROOT_ICON_KEY = 'acu_tag_library_root_icon';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TagCategoryTree',\n    props: {\n        mode: {}\n    },\n    emits: [\"categoryClick\", \"addCategory\", \"migrateToCategory\", \"deleteCategory\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        // Emits\n        const emit = __emit;\n        // Store\n        const tagStore = useTagLibraryStore();\n        const uiStore = useUIStore();\n        // \n        const treeContainer = ref(null);\n        const expandedCategories = ref(new Set());\n        const stickyCategory = ref(null);\n        const showRootIconInput = ref(false);\n        const newRootIcon = ref('');\n        //  localStorage \n        const rootIcon = ref(localStorage.getItem(ROOT_ICON_KEY) || '');\n        // \n        const activeCategoryId = computed(() => tagStore.activeCategoryId);\n        const totalTags = computed(() => tagStore.totalTags);\n        /**  */\n        function isCategoryActive(catId, catPath) {\n            if (!activeCategoryId.value || activeCategoryId.value === 'uncategorized') {\n                return false;\n            }\n            // \n            if (activeCategoryId.value === catId) {\n                return true;\n            }\n            // \n            const activeCategory = tagStore.getCategoryById(activeCategoryId.value);\n            if (activeCategory) {\n                return catPath.startsWith(activeCategory.path + '/');\n            }\n            return false;\n        }\n        const uncategorizedCount = computed(() => tagStore.uncategorizedCount);\n        const selectedCategoryIds = computed(() => tagStore.selectedCategoryIds);\n        const selectionType = computed(() => tagStore.selectionType);\n        /**  */\n        const customCategories = computed(() => {\n            const result = [];\n            const categories = tagStore.library.categories;\n            // \n            const pathMap = new Map();\n            categories.forEach(cat => {\n                pathMap.set(cat.path, cat);\n            });\n            //  / \n            const level1Categories = categories.filter(c => !c.path.includes('/'));\n            // \n            const childrenCountMap = new Map();\n            categories.forEach(c => {\n                const lastSlash = c.path.lastIndexOf('/');\n                if (lastSlash !== -1) {\n                    const parentPath = c.path.slice(0, lastSlash);\n                    childrenCountMap.set(parentPath, (childrenCountMap.get(parentPath) || 0) + 1);\n                }\n            });\n            // \n            function sortCategories(a, b) {\n                const countA = childrenCountMap.get(a.path) || 0;\n                const countB = childrenCountMap.get(b.path) || 0;\n                if (countA !== countB) {\n                    return countA - countB;\n                }\n                return a.path.localeCompare(b.path, 'zh-CN');\n            }\n            const sortedLevel1 = level1Categories.sort(sortCategories);\n            // \n            function addCategoryAndChildren(path, depth, parentId) {\n                const cat = pathMap.get(path);\n                if (!cat)\n                    return;\n                // \n                const children = categories.filter(c => {\n                    if (!c.path.startsWith(path + '/'))\n                        return false;\n                    const rest = c.path.slice(path.length + 1);\n                    return !rest.includes('/');\n                });\n                const parts = path.split('/');\n                result.push({\n                    id: cat.id,\n                    name: parts[parts.length - 1],\n                    level1: parts[0],\n                    path: cat.path,\n                    icon: cat.icon,\n                    depth,\n                    hasChildren: children.length > 0,\n                    tagCount: tagStore.getCategoryTagCount(cat.id),\n                    parentId,\n                });\n                // \n                if (expandedCategories.value.has(cat.id)) {\n                    children.sort(sortCategories).forEach(child => {\n                        addCategoryAndChildren(child.path, depth + 1, cat.id);\n                    });\n                }\n            }\n            // \n            sortedLevel1.forEach(cat => {\n                addCategoryAndChildren(cat.path, 0);\n            });\n            return result;\n        });\n        // \n        function isFontAwesome(icon) {\n            return icon.startsWith('fa') || icon.includes(' fa-');\n        }\n        function saveRootIcon() {\n            if (newRootIcon.value) {\n                rootIcon.value = newRootIcon.value;\n                localStorage.setItem(ROOT_ICON_KEY, newRootIcon.value);\n                newRootIcon.value = '';\n                showRootIconInput.value = false;\n            }\n        }\n        function handleRootClick() {\n            // \n            tagStore.selectCategory('');\n            emit('categoryClick', null);\n        }\n        function openRootIconSelect() {\n            uiStore.openIconSelectDialog({ currentIcon: rootIcon.value }, {\n                onSelect: icon => {\n                    rootIcon.value = icon;\n                    localStorage.setItem(ROOT_ICON_KEY, icon);\n                },\n            });\n        }\n        function handleUncategorizedClick() {\n            tagStore.selectCategory('uncategorized');\n            emit('categoryClick', null);\n        }\n        function handleCategoryClick(cat) {\n            if (props.mode === 'migrate' && tagStore.selectionType === 'category') {\n                // \n                tagStore.toggleCategorySelection(cat.id);\n                return;\n            }\n            // \n            const isAlreadySelected = activeCategoryId.value === cat.id;\n            tagStore.selectCategory(cat.id);\n            // /\n            if (cat.hasChildren) {\n                let changed = false;\n                if (!expandedCategories.value.has(cat.id)) {\n                    //  -> \n                    expandedCategories.value.add(cat.id);\n                    changed = true;\n                }\n                else if (isAlreadySelected) {\n                    //  -> \n                    expandedCategories.value.delete(cat.id);\n                    changed = true;\n                }\n                // \n                if (changed) {\n                    expandedCategories.value = new Set(expandedCategories.value);\n                }\n            }\n            emit('categoryClick', tagStore.getCategoryById(cat.id) || null);\n        }\n        function toggleExpand(categoryId) {\n            if (expandedCategories.value.has(categoryId)) {\n                expandedCategories.value.delete(categoryId);\n            }\n            else {\n                expandedCategories.value.add(categoryId);\n            }\n            // \n            expandedCategories.value = new Set(expandedCategories.value);\n        }\n        function handleAddCategory(categoryId) {\n            emit('addCategory', categoryId);\n        }\n        function toggleCategorySelection(categoryId) {\n            tagStore.toggleCategorySelection(categoryId);\n        }\n        function handleMigrateToCategory(categoryId) {\n            emit('migrateToCategory', categoryId);\n        }\n        function handleDeleteCategory(categoryId) {\n            emit('deleteCategory', categoryId);\n        }\n        function handleScroll(e) {\n            // \n            const container = e.target;\n            // \n            const items = container.querySelectorAll('.acu-tag-tree-item');\n            const containerTop = container.getBoundingClientRect().top;\n            let lastItemAboveTop = null;\n            // \n            for (let i = 0; i < items.length; i++) {\n                const item = items[i];\n                const rect = item.getBoundingClientRect();\n                //  +10 \n                if (rect.top < containerTop + 10) {\n                    lastItemAboveTop = item;\n                }\n                else {\n                    // \n                    break;\n                }\n            }\n            if (!lastItemAboveTop) {\n                stickyCategory.value = null;\n                return;\n            }\n            const catId = lastItemAboveTop.dataset.categoryId;\n            if (!catId) {\n                // \n                stickyCategory.value = null;\n                return;\n            }\n            // \n            const category = customCategories.value.find(c => c.id === catId);\n            if (!category) {\n                stickyCategory.value = null;\n                return;\n            }\n            // \n            // 1. \n            // 2. \n            // 3. \n            if (category.hasChildren && expandedCategories.value.has(category.id)) {\n                stickyCategory.value = category.id;\n            }\n            else if (category.parentId) {\n                // \n                if (expandedCategories.value.has(category.parentId)) {\n                    stickyCategory.value = category.parentId;\n                }\n                else {\n                    stickyCategory.value = null;\n                }\n            }\n            else {\n                // \n                stickyCategory.value = null;\n            }\n        }\n        // \n        watch(() => props.mode, newMode => {\n            if (newMode !== 'migrate') {\n                tagStore.clearSelection();\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                ref_key: \"treeContainer\",\n                ref: treeContainer,\n                class: \"acu-tag-tree\",\n                onScroll: handleScroll\n            }, [\n                _createCommentVNode(\" \\\"\\\" \"),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"acu-tag-tree-item acu-root-item\", {\n                            active: activeCategoryId.value === '',\n                            'migrate-target': __props.mode === 'migrate',\n                        }]),\n                    onClick: handleRootClick\n                }, [\n                    _createElementVNode(\"span\", _hoisted_1, [\n                        (isFontAwesome(rootIcon.value))\n                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                key: 0,\n                                class: _normalizeClass(rootIcon.value)\n                            }, null, 2 /* CLASS */))\n                            : (_openBlock(), _createElementBlock(\"span\", _hoisted_2, _toDisplayString(rootIcon.value), 1 /* TEXT */))\n                    ]),\n                    _cache[11] || (_cache[11] = _createElementVNode(\"span\", { class: \"acu-tree-label\" }, \"\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_3, \"(\" + _toDisplayString(totalTags.value) + \")\", 1 /* TEXT */),\n                    _createCommentVNode(\"  \"),\n                    (__props.mode === 'add')\n                        ? (_openBlock(), _createElementBlock(\"button\", {\n                            key: 0,\n                            class: \"acu-add-btn\",\n                            title: \"\",\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (emit('addCategory', 'root')), [\"stop\"]))\n                        }, [...(_cache[7] || (_cache[7] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                            ]))]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\" = \"),\n                    (__props.mode === 'migrate' && selectionType.value === 'category')\n                        ? (_openBlock(), _createElementBlock(\"button\", {\n                            key: 1,\n                            class: \"acu-migrate-btn\",\n                            title: \"\",\n                            onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (handleMigrateToCategory('root')), [\"stop\"]))\n                        }, [...(_cache[8] || (_cache[8] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-sign-in-alt\" }, null, -1 /* CACHED */)\n                            ]))]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\"  \"),\n                    (__props.mode === 'delete')\n                        ? (_openBlock(), _createElementBlock(\"button\", {\n                            key: 2,\n                            class: \"acu-delete-btn\",\n                            title: \"\",\n                            onClick: _cache[2] || (_cache[2] = _withModifiers(($event) => (emit('deleteCategory', 'root')), [\"stop\"]))\n                        }, [...(_cache[9] || (_cache[9] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                            ]))]))\n                        : _createCommentVNode(\"v-if\", true),\n                    _createCommentVNode(\"  \"),\n                    (__props.mode === 'normal')\n                        ? (_openBlock(), _createElementBlock(\"button\", {\n                            key: 3,\n                            class: \"acu-edit-icon-btn\",\n                            title: \"\",\n                            onClick: _cache[3] || (_cache[3] = _withModifiers(($event) => (showRootIconInput.value = !showRootIconInput.value), [\"stop\"]))\n                        }, [...(_cache[10] || (_cache[10] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-palette\" }, null, -1 /* CACHED */)\n                            ]))]))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 2 /* CLASS */),\n                _createCommentVNode(\"  \"),\n                (showRootIconInput.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((newRootIcon).value = $event)),\n                            type: \"text\",\n                            class: \"acu-icon-input\",\n                            placeholder: \"emoji\",\n                            maxlength: \"2\",\n                            onKeyup: _withKeys(saveRootIcon, [\"enter\"])\n                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                            [_vModelText, newRootIcon.value]\n                        ]),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-btn-small\",\n                            onClick: _withModifiers(saveRootIcon, [\"stop\"])\n                        }, [...(_cache[12] || (_cache[12] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-btn-small\",\n                            onClick: _cache[5] || (_cache[5] = _withModifiers(($event) => (showRootIconInput.value = false), [\"stop\"]))\n                        }, [...(_cache[13] || (_cache[13] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                            ]))])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"acu-tag-tree-item\", {\n                            active: activeCategoryId.value === 'uncategorized',\n                            'migrate-target': __props.mode === 'migrate' && selectionType.value === 'tag',\n                        }]),\n                    onClick: handleUncategorizedClick\n                }, [\n                    _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"acu-tree-icon\" }, \"\", -1 /* CACHED */)),\n                    _cache[16] || (_cache[16] = _createElementVNode(\"span\", { class: \"acu-tree-label\" }, \"\", -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_5, \"(\" + _toDisplayString(uncategorizedCount.value) + \")\", 1 /* TEXT */),\n                    _createCommentVNode(\"  \"),\n                    (__props.mode === 'migrate' && selectionType.value === 'tag')\n                        ? (_openBlock(), _createElementBlock(\"button\", {\n                            key: 0,\n                            class: \"acu-migrate-btn\",\n                            title: \"\",\n                            onClick: _cache[6] || (_cache[6] = _withModifiers(($event) => (handleMigrateToCategory('')), [\"stop\"]))\n                        }, [...(_cache[14] || (_cache[14] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-sign-in-alt\" }, null, -1 /* CACHED */)\n                            ]))]))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 2 /* CLASS */),\n                _createCommentVNode(\"  \"),\n                (customCategories.value.length > 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(customCategories.value, (cat) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                        key: cat.id,\n                        class: _normalizeClass([\"acu-tag-tree-item\", {\n                                active: isCategoryActive(cat.id, cat.path),\n                                expanded: expandedCategories.value.has(cat.id),\n                                sticky: stickyCategory.value === cat.id,\n                                selected: selectedCategoryIds.value.has(cat.id),\n                                'migrate-target': __props.mode === 'migrate',\n                            }]),\n                        \"data-category-id\": cat.id,\n                        onClick: ($event) => (handleCategoryClick(cat))\n                    }, [\n                        _createCommentVNode(\" / \"),\n                        (cat.hasChildren)\n                            ? (_openBlock(), _createElementBlock(\"span\", {\n                                key: 0,\n                                class: \"acu-tree-toggle\",\n                                onClick: _withModifiers(($event) => (toggleExpand(cat.id)), [\"stop\"])\n                            }, _toDisplayString(expandedCategories.value.has(cat.id) ? '' : ''), 9 /* TEXT, PROPS */, _hoisted_8))\n                            : (_openBlock(), _createElementBlock(\"span\", _hoisted_9)),\n                        _createCommentVNode(\"  \"),\n                        (cat.icon)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, [\n                                (isFontAwesome(cat.icon))\n                                    ? (_openBlock(), _createElementBlock(\"i\", {\n                                        key: 0,\n                                        class: _normalizeClass(cat.icon)\n                                    }, null, 2 /* CLASS */))\n                                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_11, _toDisplayString(cat.icon), 1 /* TEXT */))\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"span\", _hoisted_12, _toDisplayString(cat.name), 1 /* TEXT */),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"span\", _hoisted_13, \"(\" + _toDisplayString(cat.tagCount) + \")\", 1 /* TEXT */),\n                        _createCommentVNode(\"  \"),\n                        (__props.mode === 'add')\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 3,\n                                class: \"acu-add-btn\",\n                                title: \"\",\n                                onClick: _withModifiers(($event) => (handleAddCategory(cat.id)), [\"stop\"])\n                            }, [...(_cache[17] || (_cache[17] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_14))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  +  \"),\n                        (__props.mode === 'migrate')\n                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 4 }, [\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-select-btn\", { active: selectedCategoryIds.value.has(cat.id) }]),\n                                    title: \"\",\n                                    onClick: _withModifiers(($event) => (toggleCategorySelection(cat.id)), [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(selectedCategoryIds.value.has(cat.id) ? 'fas fa-check-square' : 'far fa-square')\n                                    }, null, 2 /* CLASS */)\n                                ], 10 /* CLASS, PROPS */, _hoisted_15),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-migrate-btn\",\n                                    title: \"\",\n                                    onClick: _withModifiers(($event) => (handleMigrateToCategory(cat.id)), [\"stop\"])\n                                }, [...(_cache[18] || (_cache[18] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-sign-in-alt\" }, null, -1 /* CACHED */)\n                                    ]))], 8 /* PROPS */, _hoisted_16)\n                            ], 64 /* STABLE_FRAGMENT */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        (__props.mode === 'delete')\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 5,\n                                class: \"acu-delete-btn\",\n                                title: \"\",\n                                onClick: _withModifiers(($event) => (handleDeleteCategory(cat.id)), [\"stop\"])\n                            }, [...(_cache[19] || (_cache[19] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_17))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 10 /* CLASS, PROPS */, _hoisted_7));\n                }), 128 /* KEYED_FRAGMENT */)),\n                _createCommentVNode(\"  \"),\n                (customCategories.value.length === 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [...(_cache[20] || (_cache[20] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-folder-open\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                        ]))]))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 544 /* NEED_HYDRATION, NEED_PATCH */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TagCategoryTree.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TagCategoryTree.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, renderList as _renderList, withKeys as _withKeys, vModelCheckbox as _vModelCheckbox } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-tag-edit-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-title\" };\nconst _hoisted_4 = { class: \"acu-header-actions\" };\nconst _hoisted_5 = [\"disabled\"];\nconst _hoisted_6 = { class: \"acu-modal-body\" };\nconst _hoisted_7 = { class: \"acu-settings-section\" };\nconst _hoisted_8 = { class: \"acu-settings-group\" };\nconst _hoisted_9 = { class: \"acu-settings-row\" };\nconst _hoisted_10 = { class: \"acu-settings-control\" };\nconst _hoisted_11 = { class: \"acu-settings-row acu-category-row\" };\nconst _hoisted_12 = { class: \"acu-settings-control acu-category-control\" };\nconst _hoisted_13 = { class: \"selected-value\" };\nconst _hoisted_14 = { key: 1 };\nconst _hoisted_15 = { class: \"text\" };\nconst _hoisted_16 = {\n    key: 1,\n    class: \"placeholder\"\n};\nconst _hoisted_17 = {\n    key: 0,\n    class: \"acu-custom-dropdown-menu\"\n};\nconst _hoisted_18 = [\"onClick\"];\nconst _hoisted_19 = { key: 1 };\nconst _hoisted_20 = { class: \"text\" };\nconst _hoisted_21 = { class: \"acu-settings-row\" };\nconst _hoisted_22 = { class: \"acu-settings-control\" };\nconst _hoisted_23 = { class: \"selected-value\" };\nconst _hoisted_24 = { key: 1 };\nconst _hoisted_25 = { class: \"text\" };\nconst _hoisted_26 = {\n    key: 1,\n    class: \"placeholder\"\n};\nconst _hoisted_27 = {\n    key: 0,\n    class: \"acu-custom-dropdown-menu\"\n};\nconst _hoisted_28 = [\"onClick\"];\nconst _hoisted_29 = { key: 1 };\nconst _hoisted_30 = { class: \"text\" };\nconst _hoisted_31 = { class: \"acu-settings-row acu-new-category-row\" };\nconst _hoisted_32 = { class: \"acu-settings-control acu-new-category-control\" };\nconst _hoisted_33 = { key: 1 };\nconst _hoisted_34 = { class: \"acu-settings-row\" };\nconst _hoisted_35 = { class: \"acu-settings-control\" };\nconst _hoisted_36 = { class: \"acu-switch\" };\nconst _hoisted_37 = { class: \"acu-settings-section\" };\nconst _hoisted_38 = { class: \"acu-settings-group\" };\nconst _hoisted_39 = { class: \"acu-settings-row column\" };\nconst _hoisted_40 = { class: \"acu-settings-control\" };\nconst _hoisted_41 = { class: \"acu-wildcard-shortcuts\" };\nconst _hoisted_42 = [\"textContent\"];\nconst _hoisted_43 = [\"textContent\"];\nconst _hoisted_44 = [\"textContent\"];\nconst _hoisted_45 = { class: \"acu-wildcard-help\" };\nconst _hoisted_46 = { key: 0 };\nconst _hoisted_47 = [\"textContent\"];\nconst _hoisted_48 = [\"textContent\"];\nconst _hoisted_49 = [\"textContent\"];\nimport { computed, nextTick, ref, watch } from 'vue';\nimport { useTagLibraryStore } from '../../../stores/useTagLibraryStore';\nimport { useUIStore } from '../../../stores/useUIStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TagEditDialog',\n    props: {\n        visible: { type: Boolean },\n        tag: {},\n        defaultCategoryId: { default: '' }\n    },\n    emits: [\"update:visible\", \"saved\", \"close\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        // Emits\n        const emit = __emit;\n        // Store\n        const tagStore = useTagLibraryStore();\n        const uiStore = useUIStore();\n        // Refs\n        const labelInput = ref(null);\n        const promptInput = ref(null);\n        // \n        const form = ref({\n            label: '',\n            categoryId: '',\n            promptTemplate: '',\n            allowPreEdit: false,\n        });\n        const showNewCategoryInput = ref(false);\n        const newCategoryPath = ref('');\n        const newCategoryIcon = ref('');\n        const helpExpanded = ref(true);\n        const showCategoryDropdown = ref(false);\n        const showParentCategoryDropdown = ref(false);\n        const newCategoryParentId = ref('');\n        // \n        const wildcards = {\n            value: '{{value}}',\n            rowTitle: '{{rowTitle}}',\n            user: '{{user}}',\n        };\n        // \n        const isNew = computed(() => !props.tag);\n        const allCategories = computed(() => tagStore.library.categories);\n        const canSave = computed(() => form.value.label.trim().length > 0);\n        const currentCategory = computed(() => {\n            if (!form.value.categoryId)\n                return null;\n            return allCategories.value.find(c => c.id === form.value.categoryId) || null;\n        });\n        const parentCategory = computed(() => {\n            if (!newCategoryParentId.value)\n                return null;\n            return allCategories.value.find(c => c.id === newCategoryParentId.value) || null;\n        });\n        //  visible \n        watch(() => props.visible, visible => {\n            if (visible) {\n                if (props.tag) {\n                    // \n                    form.value = {\n                        label: props.tag.label,\n                        categoryId: props.tag.categoryId,\n                        promptTemplate: props.tag.promptTemplate,\n                        allowPreEdit: props.tag.allowPreEdit || false,\n                    };\n                }\n                else {\n                    // \n                    form.value = {\n                        label: '',\n                        categoryId: props.defaultCategoryId,\n                        promptTemplate: '',\n                        allowPreEdit: false,\n                    };\n                }\n                showNewCategoryInput.value = false;\n                newCategoryPath.value = '';\n                newCategoryIcon.value = '';\n                showCategoryDropdown.value = false;\n                showParentCategoryDropdown.value = false;\n                newCategoryParentId.value = '';\n                // \n                // nextTick(() => {\n                //   labelInput.value?.focus();\n                // });\n            }\n        });\n        // \n        function handleClose() {\n            emit('update:visible', false);\n            emit('close');\n        }\n        function handleSave() {\n            if (!canSave.value)\n                return;\n            const tagData = {\n                id: props.tag?.id || `tag_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n                label: form.value.label.trim(),\n                categoryId: form.value.categoryId,\n                promptTemplate: form.value.promptTemplate,\n                createdAt: props.tag?.createdAt || new Date().toISOString(),\n                allowPreEdit: form.value.allowPreEdit,\n            };\n            //  store\n            tagStore.upsertTag(tagData);\n            emit('saved', tagData);\n            handleClose();\n        }\n        function insertWildcard(wildcard) {\n            if (!promptInput.value)\n                return;\n            const textarea = promptInput.value;\n            const start = textarea.selectionStart;\n            const end = textarea.selectionEnd;\n            const text = form.value.promptTemplate;\n            form.value.promptTemplate = text.slice(0, start) + wildcard + text.slice(end);\n            // \n            nextTick(() => {\n                textarea.focus();\n                textarea.setSelectionRange(start + wildcard.length, start + wildcard.length);\n            });\n        }\n        function createNewCategory() {\n            let path = newCategoryPath.value.trim();\n            if (!path)\n                return;\n            if (parentCategory.value) {\n                path = parentCategory.value.path + '/' + path;\n            }\n            const newCategory = tagStore.addCategory(path, newCategoryIcon.value || undefined);\n            form.value.categoryId = newCategory.id;\n            showNewCategoryInput.value = false;\n            newCategoryPath.value = '';\n            newCategoryIcon.value = '';\n            newCategoryParentId.value = '';\n        }\n        function openNewCategoryIconSelect() {\n            uiStore.openIconSelectDialog({ currentIcon: newCategoryIcon.value }, {\n                onSelect: icon => {\n                    newCategoryIcon.value = icon;\n                },\n            });\n        }\n        function isFontAwesome(icon) {\n            return icon.startsWith('fa') || icon.includes(' fa-');\n        }\n        function toggleCategoryDropdown() {\n            showCategoryDropdown.value = !showCategoryDropdown.value;\n        }\n        function selectCategory(id) {\n            form.value.categoryId = id;\n            showCategoryDropdown.value = false;\n        }\n        function toggleParentCategoryDropdown() {\n            showParentCategoryDropdown.value = !showParentCategoryDropdown.value;\n        }\n        function selectParentCategory(id) {\n            newCategoryParentId.value = id;\n            showParentCategoryDropdown.value = false;\n        }\n        // \n        watch([showCategoryDropdown, showParentCategoryDropdown], ([val1, val2]) => {\n            if (val1 || val2) {\n                setTimeout(() => window.addEventListener('click', closeDropdown), 0);\n            }\n            else {\n                window.removeEventListener('click', closeDropdown);\n            }\n        });\n        function closeDropdown() {\n            showCategoryDropdown.value = false;\n            showParentCategoryDropdown.value = false;\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _createElementVNode(\"span\", _hoisted_3, _toDisplayString(isNew.value ? '' : ''), 1 /* TEXT */),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-close-pill\",\n                                    disabled: !canSave.value,\n                                    onClick: _withModifiers(handleSave, [\"stop\"])\n                                }, \"\", 8 /* PROPS */, _hoisted_5),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-icon-btn\",\n                                    title: \"\",\n                                    onClick: _withModifiers(handleClose, [\"stop\"])\n                                }, [...(_cache[12] || (_cache[12] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                    ]))])\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-tag\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_8, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_9, [\n                                        _cache[13] || (_cache[13] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_10, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                ref_key: \"labelInput\",\n                                                ref: labelInput,\n                                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((form.value.label) = $event)),\n                                                type: \"text\",\n                                                placeholder: \"\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelText, form.value.label]\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_11, [\n                                        _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", {\n                                                class: _normalizeClass([\"acu-custom-select\", { active: showCategoryDropdown.value }]),\n                                                onClick: _withModifiers(toggleCategoryDropdown, [\"stop\"])\n                                            }, [\n                                                _createElementVNode(\"div\", _hoisted_13, [\n                                                    (currentCategory.value)\n                                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                                            (isFontAwesome(currentCategory.value.icon || ''))\n                                                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                                                    key: 0,\n                                                                    class: _normalizeClass(currentCategory.value.icon)\n                                                                }, null, 2 /* CLASS */))\n                                                                : (currentCategory.value.icon)\n                                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_14, _toDisplayString(currentCategory.value.icon), 1 /* TEXT */))\n                                                                    : _createCommentVNode(\"v-if\", true),\n                                                            _createElementVNode(\"span\", _hoisted_15, _toDisplayString(currentCategory.value.path), 1 /* TEXT */)\n                                                        ], 64 /* STABLE_FRAGMENT */))\n                                                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_16, \"\"))\n                                                ]),\n                                                _cache[15] || (_cache[15] = _createElementVNode(\"i\", { class: \"fas fa-chevron-down arrow\" }, null, -1 /* CACHED */)),\n                                                _createCommentVNode(\"  \"),\n                                                (showCategoryDropdown.value)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [\n                                                        _createElementVNode(\"div\", {\n                                                            class: _normalizeClass([\"dropdown-item\", { selected: form.value.categoryId === '' }]),\n                                                            onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (selectCategory('')), [\"stop\"]))\n                                                        }, [...(_cache[14] || (_cache[14] = [\n                                                                _createElementVNode(\"span\", { class: \"text\" }, \"\", -1 /* CACHED */)\n                                                            ]))], 2 /* CLASS */),\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(allCategories.value, (cat) => {\n                                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                                key: cat.id,\n                                                                class: _normalizeClass([\"dropdown-item\", { selected: form.value.categoryId === cat.id }]),\n                                                                onClick: _withModifiers(($event) => (selectCategory(cat.id)), [\"stop\"])\n                                                            }, [\n                                                                (isFontAwesome(cat.icon || ''))\n                                                                    ? (_openBlock(), _createElementBlock(\"i\", {\n                                                                        key: 0,\n                                                                        class: _normalizeClass(cat.icon)\n                                                                    }, null, 2 /* CLASS */))\n                                                                    : (cat.icon)\n                                                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_19, _toDisplayString(cat.icon), 1 /* TEXT */))\n                                                                        : _createCommentVNode(\"v-if\", true),\n                                                                _createElementVNode(\"span\", _hoisted_20, _toDisplayString(cat.path), 1 /* TEXT */)\n                                                            ], 10 /* CLASS, PROPS */, _hoisted_18));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ], 2 /* CLASS */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-tool-btn\",\n                                                title: \"\",\n                                                onClick: _cache[2] || (_cache[2] = _withModifiers(($event) => (showNewCategoryInput.value = true), [\"stop\"]))\n                                            }, [...(_cache[16] || (_cache[16] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    (showNewCategoryInput.value)\n                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_21, [\n                                                _cache[20] || (_cache[20] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                    _createTextVNode(\"  \"),\n                                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_22, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: _normalizeClass([\"acu-custom-select\", { active: showParentCategoryDropdown.value }]),\n                                                        onClick: _withModifiers(toggleParentCategoryDropdown, [\"stop\"])\n                                                    }, [\n                                                        _createElementVNode(\"div\", _hoisted_23, [\n                                                            (parentCategory.value)\n                                                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                                                    (isFontAwesome(parentCategory.value.icon || ''))\n                                                                        ? (_openBlock(), _createElementBlock(\"i\", {\n                                                                            key: 0,\n                                                                            class: _normalizeClass(parentCategory.value.icon)\n                                                                        }, null, 2 /* CLASS */))\n                                                                        : (parentCategory.value.icon)\n                                                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_24, _toDisplayString(parentCategory.value.icon), 1 /* TEXT */))\n                                                                            : _createCommentVNode(\"v-if\", true),\n                                                                    _createElementVNode(\"span\", _hoisted_25, _toDisplayString(parentCategory.value.path), 1 /* TEXT */)\n                                                                ], 64 /* STABLE_FRAGMENT */))\n                                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_26, \"\"))\n                                                        ]),\n                                                        _cache[19] || (_cache[19] = _createElementVNode(\"i\", { class: \"fas fa-chevron-down arrow\" }, null, -1 /* CACHED */)),\n                                                        (showParentCategoryDropdown.value)\n                                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [\n                                                                _createElementVNode(\"div\", {\n                                                                    class: _normalizeClass([\"dropdown-item\", { selected: newCategoryParentId.value === '' }]),\n                                                                    onClick: _cache[3] || (_cache[3] = _withModifiers(($event) => (selectParentCategory('')), [\"stop\"]))\n                                                                }, [...(_cache[18] || (_cache[18] = [\n                                                                        _createElementVNode(\"span\", { class: \"text\" }, \"\", -1 /* CACHED */)\n                                                                    ]))], 2 /* CLASS */),\n                                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(allCategories.value, (cat) => {\n                                                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                                                        key: cat.id,\n                                                                        class: _normalizeClass([\"dropdown-item\", { selected: newCategoryParentId.value === cat.id }]),\n                                                                        onClick: _withModifiers(($event) => (selectParentCategory(cat.id)), [\"stop\"])\n                                                                    }, [\n                                                                        (isFontAwesome(cat.icon || ''))\n                                                                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                                                                key: 0,\n                                                                                class: _normalizeClass(cat.icon)\n                                                                            }, null, 2 /* CLASS */))\n                                                                            : (cat.icon)\n                                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_29, _toDisplayString(cat.icon), 1 /* TEXT */))\n                                                                                : _createCommentVNode(\"v-if\", true),\n                                                                        _createElementVNode(\"span\", _hoisted_30, _toDisplayString(cat.path), 1 /* TEXT */)\n                                                                    ], 10 /* CLASS, PROPS */, _hoisted_28));\n                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                            ]))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ], 2 /* CLASS */)\n                                                ])\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_31, [\n                                                _cache[23] || (_cache[23] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                    _createTextVNode(\"  \"),\n                                                    _createElementVNode(\"span\", { class: \"hint\" }, \"/\")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_32, [\n                                                    _withDirectives(_createElementVNode(\"input\", {\n                                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((newCategoryPath).value = $event)),\n                                                        type: \"text\",\n                                                        placeholder: \"\",\n                                                        onKeyup: _withKeys(createNewCategory, [\"enter\"])\n                                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                        [_vModelText, newCategoryPath.value]\n                                                    ]),\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"acu-tool-btn\",\n                                                        title: \"\",\n                                                        onClick: _withModifiers(openNewCategoryIconSelect, [\"stop\"])\n                                                    }, [\n                                                        (isFontAwesome(newCategoryIcon.value))\n                                                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                                                key: 0,\n                                                                class: _normalizeClass(newCategoryIcon.value)\n                                                            }, null, 2 /* CLASS */))\n                                                            : (_openBlock(), _createElementBlock(\"span\", _hoisted_33, _toDisplayString(newCategoryIcon.value || ''), 1 /* TEXT */))\n                                                    ]),\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"acu-tool-btn\",\n                                                        title: \"\",\n                                                        onClick: _withModifiers(createNewCategory, [\"stop\"])\n                                                    }, [...(_cache[21] || (_cache[21] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */)\n                                                        ]))]),\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"acu-tool-btn\",\n                                                        title: \"\",\n                                                        onClick: _cache[5] || (_cache[5] = _withModifiers(($event) => (showNewCategoryInput.value = false), [\"stop\"]))\n                                                    }, [...(_cache[22] || (_cache[22] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                                        ]))])\n                                                ])\n                                            ])\n                                        ], 64 /* STABLE_FRAGMENT */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_34, [\n                                        _cache[25] || (_cache[25] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_35, [\n                                            _createElementVNode(\"label\", _hoisted_36, [\n                                                _withDirectives(_createElementVNode(\"input\", {\n                                                    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((form.value.allowPreEdit) = $event)),\n                                                    type: \"checkbox\"\n                                                }, null, 512 /* NEED_PATCH */), [\n                                                    [_vModelCheckbox, form.value.allowPreEdit]\n                                                ]),\n                                                _cache[24] || (_cache[24] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                            ])\n                                        ])\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_37, [\n                                _cache[34] || (_cache[34] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-file-alt\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_38, [\n                                    _createElementVNode(\"div\", _hoisted_39, [\n                                        _cache[27] || (_cache[27] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_40, [\n                                            _withDirectives(_createElementVNode(\"textarea\", {\n                                                ref_key: \"promptInput\",\n                                                ref: promptInput,\n                                                \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((form.value.promptTemplate) = $event)),\n                                                class: \"acu-textarea\",\n                                                placeholder: \"\",\n                                                rows: \"4\"\n                                            }, null, 512 /* NEED_PATCH */), [\n                                                [_vModelText, form.value.promptTemplate]\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_41, [\n                                        _cache[28] || (_cache[28] = _createElementVNode(\"span\", { class: \"hint\" }, \":\", -1 /* CACHED */)),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-wildcard-btn\",\n                                            onClick: _cache[8] || (_cache[8] = _withModifiers(($event) => (insertWildcard(wildcards.value)), [\"stop\"]))\n                                        }, [\n                                            _createElementVNode(\"code\", {\n                                                textContent: _toDisplayString(wildcards.value)\n                                            }, null, 8 /* PROPS */, _hoisted_42)\n                                        ]),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-wildcard-btn\",\n                                            onClick: _cache[9] || (_cache[9] = _withModifiers(($event) => (insertWildcard(wildcards.rowTitle)), [\"stop\"]))\n                                        }, [\n                                            _createElementVNode(\"code\", {\n                                                textContent: _toDisplayString(wildcards.rowTitle)\n                                            }, null, 8 /* PROPS */, _hoisted_43)\n                                        ]),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-wildcard-btn\",\n                                            onClick: _cache[10] || (_cache[10] = _withModifiers(($event) => (insertWildcard(wildcards.user)), [\"stop\"]))\n                                        }, [\n                                            _createElementVNode(\"code\", {\n                                                textContent: _toDisplayString(wildcards.user)\n                                            }, null, 8 /* PROPS */, _hoisted_44)\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_45, [\n                                        _createElementVNode(\"div\", {\n                                            class: \"acu-help-header\",\n                                            onClick: _cache[11] || (_cache[11] = ($event) => (helpExpanded.value = !helpExpanded.value))\n                                        }, [\n                                            _cache[29] || (_cache[29] = _createElementVNode(\"i\", { class: \"fas fa-lightbulb\" }, null, -1 /* CACHED */)),\n                                            _cache[30] || (_cache[30] = _createElementVNode(\"strong\", null, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(['fas', helpExpanded.value ? 'fa-chevron-up' : 'fa-chevron-down'])\n                                            }, null, 2 /* CLASS */)\n                                        ]),\n                                        (helpExpanded.value)\n                                            ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_46, [\n                                                _createElementVNode(\"li\", null, [\n                                                    _createElementVNode(\"code\", {\n                                                        textContent: _toDisplayString(wildcards.value)\n                                                    }, null, 8 /* PROPS */, _hoisted_47),\n                                                    _cache[31] || (_cache[31] = _createTextVNode(\" - label\", -1 /* CACHED */))\n                                                ]),\n                                                _createElementVNode(\"li\", null, [\n                                                    _createElementVNode(\"code\", {\n                                                        textContent: _toDisplayString(wildcards.rowTitle)\n                                                    }, null, 8 /* PROPS */, _hoisted_48),\n                                                    _cache[32] || (_cache[32] = _createTextVNode(\" - \", -1 /* CACHED */))\n                                                ]),\n                                                _createElementVNode(\"li\", null, [\n                                                    _createElementVNode(\"code\", {\n                                                        textContent: _toDisplayString(wildcards.user)\n                                                    }, null, 8 /* PROPS */, _hoisted_49),\n                                                    _cache[33] || (_cache[33] = _createTextVNode(\" - \", -1 /* CACHED */))\n                                                ])\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TagEditDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TagEditDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelRadio as _vModelRadio, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-import-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-body\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"acu-import-upload\"\n};\nconst _hoisted_5 = { class: \"acu-import-preview\" };\nconst _hoisted_6 = { class: \"acu-import-stats\" };\nconst _hoisted_7 = { class: \"acu-stat-item\" };\nconst _hoisted_8 = { class: \"acu-stat-value\" };\nconst _hoisted_9 = { class: \"acu-stat-item\" };\nconst _hoisted_10 = { class: \"acu-stat-value\" };\nconst _hoisted_11 = {\n    key: 0,\n    class: \"acu-stat-item acu-stat-conflict\"\n};\nconst _hoisted_12 = { class: \"acu-stat-value\" };\nconst _hoisted_13 = {\n    key: 0,\n    class: \"acu-conflict-options\"\n};\nconst _hoisted_14 = { class: \"acu-settings-group\" };\nconst _hoisted_15 = { class: \"acu-radio-option\" };\nconst _hoisted_16 = { class: \"acu-radio-option\" };\nconst _hoisted_17 = { class: \"acu-import-list\" };\nconst _hoisted_18 = { class: \"acu-preview-scroll\" };\nconst _hoisted_19 = {\n    key: 0,\n    class: \"acu-preview-section\"\n};\nconst _hoisted_20 = { class: \"acu-preview-header\" };\nconst _hoisted_21 = { class: \"acu-preview-items\" };\nconst _hoisted_22 = {\n    key: 0,\n    class: \"acu-preview-more\"\n};\nconst _hoisted_23 = {\n    key: 1,\n    class: \"acu-preview-section\"\n};\nconst _hoisted_24 = { class: \"acu-preview-header\" };\nconst _hoisted_25 = { class: \"acu-preview-items\" };\nconst _hoisted_26 = {\n    key: 0,\n    class: \"acu-preview-more\"\n};\nconst _hoisted_27 = { class: \"acu-import-actions\" };\nconst _hoisted_28 = {\n    key: 2,\n    class: \"acu-import-error\"\n};\nimport { computed, ref } from 'vue';\nimport { useTagLibraryStore } from '../../../stores/useTagLibraryStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TagImportDialog',\n    props: {\n        visible: { type: Boolean }\n    },\n    emits: [\"update:visible\", \"imported\"],\n    setup(__props, { emit: __emit }) {\n        // Emits\n        const emit = __emit;\n        // Store\n        const tagStore = useTagLibraryStore();\n        // Refs\n        const fileInput = ref(null);\n        // \n        const importData = ref(null);\n        const conflictStrategy = ref('rename');\n        const errorMessage = ref('');\n        // \n        const importStats = computed(() => {\n            if (!importData.value) {\n                return { categories: 0, tags: 0, conflicts: 0 };\n            }\n            // \n            let conflicts = 0;\n            importData.value.tags.forEach(tag => {\n                if (isTagConflict(tag)) {\n                    conflicts++;\n                }\n            });\n            return {\n                categories: importData.value.categories.length,\n                tags: importData.value.tags.length,\n                conflicts,\n            };\n        });\n        // \n        function handleClose() {\n            resetImport();\n            emit('update:visible', false);\n        }\n        function triggerFileInput() {\n            fileInput.value?.click();\n        }\n        function handleFileSelect(event) {\n            const input = event.target;\n            const file = input.files?.[0];\n            if (file) {\n                parseFile(file);\n            }\n        }\n        function handleDrop(event) {\n            const file = event.dataTransfer?.files?.[0];\n            if (file && file.type === 'application/json') {\n                parseFile(file);\n            }\n            else {\n                errorMessage.value = ' JSON ';\n            }\n        }\n        async function parseFile(file) {\n            errorMessage.value = '';\n            try {\n                const text = await file.text();\n                const data = JSON.parse(text);\n                // \n                if (!data.version || !Array.isArray(data.categories) || !Array.isArray(data.tags)) {\n                    throw new Error('');\n                }\n                importData.value = data;\n            }\n            catch (e) {\n                errorMessage.value = e instanceof Error ? e.message : '';\n                importData.value = null;\n            }\n        }\n        function isTagConflict(tag) {\n            // \n            const categoryId = tagStore.getCategoryByPath(tag.category)?.id || '';\n            return tagStore.library.tags.some(t => t.label === tag.label && t.categoryId === categoryId);\n        }\n        function resetImport() {\n            importData.value = null;\n            errorMessage.value = '';\n            conflictStrategy.value = 'rename';\n            if (fileInput.value) {\n                fileInput.value.value = '';\n            }\n        }\n        function executeImport() {\n            if (!importData.value)\n                return;\n            const result = tagStore.importLibrary(importData.value, {\n                conflictStrategy: conflictStrategy.value,\n            });\n            if (result.success) {\n                emit('imported', {\n                    addedTags: result.addedTags + result.renamedTags,\n                    addedCategories: result.addedCategories,\n                });\n                handleClose();\n            }\n            else {\n                errorMessage.value = result.error || '';\n            }\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-file-import\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createCommentVNode(\"  \"),\n                            (!importData.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"acu-upload-area\",\n                                        onClick: triggerFileInput,\n                                        onDragover: _cache[0] || (_cache[0] = _withModifiers(() => { }, [\"prevent\"])),\n                                        onDrop: _withModifiers(handleDrop, [\"prevent\"])\n                                    }, [...(_cache[4] || (_cache[4] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-cloud-upload-alt\" }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"p\", null, \" JSON \", -1 /* CACHED */),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\", -1 /* CACHED */)\n                                        ]))], 32 /* NEED_HYDRATION */),\n                                    _createElementVNode(\"input\", {\n                                        ref_key: \"fileInput\",\n                                        ref: fileInput,\n                                        type: \"file\",\n                                        accept: \".json\",\n                                        style: { \"display\": \"none\" },\n                                        onChange: handleFileSelect\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)\n                                ]))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_5, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_6, [\n                                            _createElementVNode(\"div\", _hoisted_7, [\n                                                _cache[5] || (_cache[5] = _createElementVNode(\"i\", { class: \"fas fa-folder\" }, null, -1 /* CACHED */)),\n                                                _createElementVNode(\"span\", _hoisted_8, _toDisplayString(importStats.value.categories), 1 /* TEXT */),\n                                                _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"acu-stat-label\" }, \"\", -1 /* CACHED */))\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_9, [\n                                                _cache[7] || (_cache[7] = _createElementVNode(\"i\", { class: \"fas fa-tag\" }, null, -1 /* CACHED */)),\n                                                _createElementVNode(\"span\", _hoisted_10, _toDisplayString(importStats.value.tags), 1 /* TEXT */),\n                                                _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"acu-stat-label\" }, \"\", -1 /* CACHED */))\n                                            ]),\n                                            (importStats.value.conflicts > 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                                                    _cache[9] || (_cache[9] = _createElementVNode(\"i\", { class: \"fas fa-exclamation-triangle\" }, null, -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_12, _toDisplayString(importStats.value.conflicts), 1 /* TEXT */),\n                                                    _cache[10] || (_cache[10] = _createElementVNode(\"span\", { class: \"acu-stat-label\" }, \"\", -1 /* CACHED */))\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        (importStats.value.conflicts > 0)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n                                                _cache[15] || (_cache[15] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-cog\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_14, [\n                                                    _createElementVNode(\"label\", _hoisted_15, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((conflictStrategy).value = $event)),\n                                                            type: \"radio\",\n                                                            value: \"overwrite\"\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [_vModelRadio, conflictStrategy.value]\n                                                        ]),\n                                                        _cache[11] || (_cache[11] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                                                        _cache[12] || (_cache[12] = _createElementVNode(\"span\", { class: \"hint\" }, \"\", -1 /* CACHED */))\n                                                    ]),\n                                                    _createElementVNode(\"label\", _hoisted_16, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((conflictStrategy).value = $event)),\n                                                            type: \"radio\",\n                                                            value: \"rename\"\n                                                        }, null, 512 /* NEED_PATCH */), [\n                                                            [_vModelRadio, conflictStrategy.value]\n                                                        ]),\n                                                        _cache[13] || (_cache[13] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                                                        _cache[14] || (_cache[14] = _createElementVNode(\"span\", { class: \"hint\" }, \"\", -1 /* CACHED */))\n                                                    ])\n                                                ])\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_17, [\n                                            _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                _createElementVNode(\"i\", { class: \"fas fa-list\" }),\n                                                _createTextVNode(\"  \")\n                                            ], -1 /* CACHED */)),\n                                            _createElementVNode(\"div\", _hoisted_18, [\n                                                _createCommentVNode(\"  \"),\n                                                (importData.value.categories.length > 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [\n                                                        _createElementVNode(\"div\", _hoisted_20, \" (\" + _toDisplayString(importData.value.categories.length) + \")\", 1 /* TEXT */),\n                                                        _createElementVNode(\"div\", _hoisted_21, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(importData.value.categories.slice(0, 10), (cat) => {\n                                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                                    key: cat.id,\n                                                                    class: \"acu-preview-item\"\n                                                                }, _toDisplayString(cat.icon ? cat.icon + ' ' : '') + _toDisplayString(cat.path), 1 /* TEXT */));\n                                                            }), 128 /* KEYED_FRAGMENT */)),\n                                                            (importData.value.categories.length > 10)\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_22, \"  \" + _toDisplayString(importData.value.categories.length - 10) + \" ... \", 1 /* TEXT */))\n                                                                : _createCommentVNode(\"v-if\", true)\n                                                        ])\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                                _createCommentVNode(\"  \"),\n                                                (importData.value.tags.length > 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [\n                                                        _createElementVNode(\"div\", _hoisted_24, \" (\" + _toDisplayString(importData.value.tags.length) + \")\", 1 /* TEXT */),\n                                                        _createElementVNode(\"div\", _hoisted_25, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(importData.value.tags.slice(0, 20), (tag) => {\n                                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                                    key: tag.id,\n                                                                    class: _normalizeClass([\"acu-preview-item\", { conflict: isTagConflict(tag) }])\n                                                                }, _toDisplayString(tag.label), 3 /* TEXT, CLASS */));\n                                                            }), 128 /* KEYED_FRAGMENT */)),\n                                                            (importData.value.tags.length > 20)\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_26, \"  \" + _toDisplayString(importData.value.tags.length - 20) + \" ... \", 1 /* TEXT */))\n                                                                : _createCommentVNode(\"v-if\", true)\n                                                        ])\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_27, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-btn-secondary\",\n                                                onClick: _withModifiers(resetImport, [\"stop\"])\n                                            }, [...(_cache[17] || (_cache[17] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-redo\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\" \", -1 /* CACHED */)\n                                                ]))]),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-btn-primary\",\n                                                onClick: _withModifiers(executeImport, [\"stop\"])\n                                            }, [...(_cache[18] || (_cache[18] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\" \", -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)),\n                            _createCommentVNode(\"  \"),\n                            (errorMessage.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_28, [\n                                    _cache[19] || (_cache[19] = _createElementVNode(\"i\", { class: \"fas fa-exclamation-circle\" }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\" \" + _toDisplayString(errorMessage.value), 1 /* TEXT */)\n                                ]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TagImportDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TagImportDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, createVNode as _createVNode, normalizeStyle as _normalizeStyle, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-header\" };\nconst _hoisted_2 = { class: \"acu-modal-body acu-tag-manager-body\" };\nconst _hoisted_3 = { class: \"acu-displayed-area\" };\nconst _hoisted_4 = [\"onClick\"];\nconst _hoisted_5 = {\n    key: 0,\n    class: \"acu-tag-icon\"\n};\nconst _hoisted_6 = { key: 1 };\nconst _hoisted_7 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_8 = { class: \"acu-tag-search\" };\nconst _hoisted_9 = { class: \"acu-tag-toolbar\" };\nconst _hoisted_10 = {\n    key: 0,\n    class: \"mode-actions\"\n};\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = { class: \"acu-tag-manager\" };\nimport { computed, onMounted, onUnmounted, ref, watch } from 'vue';\nimport { useConfigStore } from '../../../stores/useConfigStore';\nimport { useTagLibraryStore } from '../../../stores/useTagLibraryStore';\nimport { useUIStore } from '../../../stores/useUIStore';\nimport TagBadgeGrid from './TagBadgeGrid.vue';\nimport TagCategoryTree from './TagCategoryTree.vue';\nimport TagEditDialog from './TagEditDialog.vue';\nimport TagImportDialog from './TagImportDialog.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TagManagerDialog',\n    props: {\n        visible: { type: Boolean },\n        displayedTagIds: {},\n        displayedCategoryIds: { default: () => [] }\n    },\n    emits: [\"update:visible\", \"save\", \"close\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        // Emits\n        const emit = __emit;\n        // Store\n        const tagStore = useTagLibraryStore();\n        const configStore = useConfigStore();\n        const uiStore = useUIStore();\n        // \n        const searchKeyword = ref('');\n        const showEditDialog = ref(false);\n        const showImportDialog = ref(false);\n        const editingTag = ref(null);\n        const defaultCategoryId = ref('');\n        //  - \n        const localDisplayedTagIds = ref([]);\n        const localDisplayedCategoryIds = ref([]);\n        // \n        const currentMode = computed(() => tagStore.currentMode);\n        const selectedTagIds = computed(() => tagStore.selectedTagIds);\n        const filteredTags = computed(() => tagStore.filteredTags);\n        const isAllCurrentSelected = computed(() => {\n            if (filteredTags.value.length === 0)\n                return false;\n            return filteredTags.value.every(tag => selectedTagIds.value.has(tag.id));\n        });\n        /**  +  */\n        const displayedItems = computed(() => {\n            const items = [];\n            // \n            localDisplayedCategoryIds.value.forEach(catId => {\n                const category = tagStore.getCategoryById(catId);\n                if (category) {\n                    items.push({\n                        id: catId,\n                        type: 'category',\n                        label: category.path,\n                        icon: category.icon,\n                    });\n                }\n            });\n            // \n            localDisplayedTagIds.value.forEach(tagId => {\n                const tag = tagStore.getTagById(tagId);\n                if (tag) {\n                    items.push({\n                        id: tagId,\n                        type: 'tag',\n                        label: tag.label,\n                    });\n                }\n            });\n            return items;\n        });\n        /**  ID Set TagBadgeGrid */\n        const localDisplayedTagIdSet = computed(() => localDisplayedTagIds.value);\n        // \n        onMounted(async () => {\n            await tagStore.loadLibrary();\n        });\n        onUnmounted(() => {\n            // \n            if (uiStore.tagPreviewMode) {\n                uiStore.toggleTagPreviewMode();\n            }\n            uiStore.hideTagPreviewTooltip();\n        });\n        // \n        function handleClose() {\n            // \n            tagStore.setMode('normal');\n            // emit save \n            emit('save', [...localDisplayedTagIds.value], [...localDisplayedCategoryIds.value]);\n            emit('update:visible', false);\n            emit('close');\n        }\n        function toggleMode(mode) {\n            if (currentMode.value === mode) {\n                // \n                tagStore.setMode('normal');\n                showModeToast('' + getModeLabel(mode) + '');\n            }\n            else {\n                tagStore.setMode(mode);\n                showModeToast(getModeLabel(mode) + '');\n            }\n        }\n        function getModeLabel(mode) {\n            const labels = {\n                normal: '',\n                create: '',\n                add: '',\n                delete: '',\n                migrate: '',\n                export: '',\n            };\n            return labels[mode] || mode;\n        }\n        function showModeToast(message) {\n            if (typeof toastr !== 'undefined') {\n                toastr.info(message, '', { timeOut: 2000 });\n            }\n        }\n        function handleSearch() {\n            tagStore.searchKeyword = searchKeyword.value;\n        }\n        function clearSearch() {\n            searchKeyword.value = '';\n            tagStore.searchKeyword = '';\n        }\n        // \n        function handleCategoryClick(category) {\n            if (currentMode.value === 'add' && category) {\n                // \n                addDisplayedCategory(category.id);\n            }\n        }\n        // \n        function handleMigrateToCategory(categoryId) {\n            const selectedCatIds = tagStore.selectedCategoryIds;\n            const selectedTagCount = selectedTagIds.value.size;\n            const selectedCatCount = selectedCatIds.size;\n            if (selectedTagCount === 0 && selectedCatCount === 0) {\n                showModeToast('');\n                return;\n            }\n            // 'root' \n            if (categoryId === 'root') {\n                // \n                tagStore.migrateSelectedItems('');\n            }\n            else {\n                // \n                tagStore.migrateSelectedItems(categoryId);\n            }\n            const messages = [];\n            if (selectedTagCount > 0) {\n                messages.push(`${selectedTagCount} `);\n            }\n            if (selectedCatCount > 0) {\n                messages.push(`${selectedCatCount} `);\n            }\n            const target = categoryId === 'root' ? '' : '';\n            showModeToast(' ' + messages.join('  ') + ' ' + target);\n            tagStore.setMode('normal');\n        }\n        // \n        function handleDeleteCategory(categoryId) {\n            // 'root' \n            if (categoryId === 'root') {\n                if (confirm('')) {\n                    tagStore.clearAll();\n                    // \n                    localDisplayedTagIds.value = [];\n                    localDisplayedCategoryIds.value = [];\n                    showModeToast('');\n                }\n                return;\n            }\n            const category = tagStore.getCategoryById(categoryId);\n            if (category) {\n                tagStore.deleteCategory(categoryId);\n                showModeToast('' + category.path);\n                // \n                removeDisplayedCategoryById(categoryId);\n            }\n        }\n        // \n        function handleTagClick(tag) {\n            if (currentMode.value === 'add') {\n                // \n                handleAddTag(tag.id);\n            }\n            else if (currentMode.value === 'normal' || currentMode.value === 'create') {\n                // /\n                editingTag.value = tag;\n                showEditDialog.value = true;\n            }\n        }\n        // \n        function handleCreateTag() {\n            editingTag.value = null;\n            // \n            const selectedCat = tagStore.selectedLevel1;\n            if (selectedCat && selectedCat !== '' && selectedCat !== '') {\n                const cat = tagStore.getCategoryByPath(selectedCat);\n                defaultCategoryId.value = cat?.id || '';\n            }\n            else {\n                defaultCategoryId.value = '';\n            }\n            showEditDialog.value = true;\n        }\n        // \n        function handleDeleteTag(tagId) {\n            const tag = tagStore.getTagById(tagId);\n            if (tag) {\n                tagStore.deleteTag(tagId);\n                showModeToast('' + tag.label);\n                // \n                removeDisplayedTagById(tagId);\n            }\n        }\n        // \n        function handleAddTag(tagId) {\n            if (!localDisplayedTagIds.value.includes(tagId)) {\n                localDisplayedTagIds.value = [...localDisplayedTagIds.value, tagId];\n                const tag = tagStore.getTagById(tagId);\n                if (tag) {\n                    showModeToast('' + tag.label);\n                }\n            }\n            else {\n                showModeToast('');\n            }\n        }\n        //  TagCategoryTree  addCategory \n        function handleAddCategory(categoryId) {\n            // 'root' \n            if (categoryId === 'root') {\n                // \n                if (!localDisplayedCategoryIds.value.includes('root')) {\n                    localDisplayedCategoryIds.value = [...localDisplayedCategoryIds.value, 'root'];\n                    showModeToast('');\n                }\n                else {\n                    showModeToast('');\n                }\n                return;\n            }\n            addDisplayedCategory(categoryId);\n        }\n        // \n        function addDisplayedCategory(categoryId) {\n            if (!localDisplayedCategoryIds.value.includes(categoryId)) {\n                localDisplayedCategoryIds.value = [...localDisplayedCategoryIds.value, categoryId];\n                const cat = tagStore.getCategoryById(categoryId);\n                if (cat) {\n                    showModeToast('' + cat.path);\n                }\n            }\n            else {\n                showModeToast('');\n            }\n        }\n        // \n        function removeDisplayedItem(item) {\n            if (item.type === 'tag') {\n                removeDisplayedTagById(item.id);\n            }\n            else {\n                removeDisplayedCategoryById(item.id);\n            }\n        }\n        function removeDisplayedTagById(tagId) {\n            localDisplayedTagIds.value = localDisplayedTagIds.value.filter(id => id !== tagId);\n        }\n        function removeDisplayedCategoryById(categoryId) {\n            localDisplayedCategoryIds.value = localDisplayedCategoryIds.value.filter(id => id !== categoryId);\n        }\n        // \n        function handleTagSaved(tag) {\n            showModeToast('' + tag.label);\n        }\n        function handleEditDialogClose() {\n            editingTag.value = null;\n        }\n        // \n        function handleImport() {\n            showImportDialog.value = true;\n        }\n        function handleImported(result) {\n            showModeToast(` ${result.addedCategories} ${result.addedTags} `);\n        }\n        // \n        function toggleSelectAllCurrent() {\n            if (isAllCurrentSelected.value) {\n                // \n                filteredTags.value.forEach(tag => {\n                    if (selectedTagIds.value.has(tag.id)) {\n                        tagStore.toggleTagSelection(tag.id);\n                    }\n                });\n            }\n            else {\n                // \n                filteredTags.value.forEach(tag => {\n                    if (!selectedTagIds.value.has(tag.id)) {\n                        tagStore.toggleTagSelection(tag.id);\n                    }\n                });\n            }\n        }\n        function isFontAwesome(icon) {\n            return icon.startsWith('fa') || icon.includes(' fa-');\n        }\n        // \n        function exportAll() {\n            const data = tagStore.exportLibrary('all');\n            downloadJson(data, 'tag-library-all.json');\n            tagStore.setMode('normal');\n        }\n        function exportSelected() {\n            const data = tagStore.exportLibrary('selected');\n            downloadJson(data, 'tag-library-selected.json');\n            tagStore.setMode('normal');\n        }\n        function downloadJson(data, filename) {\n            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = filename;\n            document.body.appendChild(a);\n            a.click();\n            document.body.removeChild(a);\n            URL.revokeObjectURL(url);\n            showModeToast('');\n        }\n        //  visible \n        watch(() => props.visible, visible => {\n            if (visible) {\n                //  props \n                tagStore.setMode('normal');\n                tagStore.resetSelection();\n                searchKeyword.value = '';\n                //  props \n                localDisplayedTagIds.value = [...props.displayedTagIds];\n                localDisplayedCategoryIds.value = [...props.displayedCategoryIds];\n            }\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", {\n                        class: \"acu-modal acu-tag-manager-modal\",\n                        style: _normalizeStyle({ paddingBottom: `${_unref(configStore).config.mobileSafeAreaBottom ?? 0}px` })\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-tags\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _cache[10] || (_cache[10] = _createElementVNode(\"span\", { class: \"acu-displayed-label\" }, \"\", -1 /* CACHED */)),\n                                (displayedItems.value.length > 0)\n                                    ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(displayedItems.value, (item) => {\n                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                            key: item.id,\n                                            class: \"acu-displayed-tag\",\n                                            onClick: _withModifiers(($event) => (removeDisplayedItem(item)), [\"stop\"])\n                                        }, [\n                                            (item.icon)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, [\n                                                    (isFontAwesome(item.icon))\n                                                        ? (_openBlock(), _createElementBlock(\"i\", {\n                                                            key: 0,\n                                                            class: _normalizeClass(item.icon)\n                                                        }, null, 2 /* CLASS */))\n                                                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(item.icon), 1 /* TEXT */))\n                                                ]))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            _createTextVNode(\" \" + _toDisplayString(item.label) + \" \", 1 /* TEXT */),\n                                            _cache[9] || (_cache[9] = _createElementVNode(\"i\", { class: \"fas fa-times acu-remove-icon\" }, null, -1 /* CACHED */))\n                                        ], 8 /* PROPS */, _hoisted_4));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_7, \"\"))\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _cache[12] || (_cache[12] = _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((searchKeyword).value = $event)),\n                                    type: \"text\",\n                                    placeholder: \"...\",\n                                    onInput: handleSearch\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [_vModelText, searchKeyword.value]\n                                ]),\n                                (searchKeyword.value)\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 0,\n                                        class: \"acu-clear-search\",\n                                        onClick: _withModifiers(clearSearch, [\"stop\"])\n                                    }, [...(_cache[11] || (_cache[11] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                        ]))]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_9, [\n                                _createCommentVNode(\"  CSS  \"),\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-mode-btn acu-mobile-only\", { active: _unref(uiStore).tagPreviewMode }]),\n                                    title: \"\",\n                                    onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (_unref(uiStore).toggleTagPreviewMode()), [\"stop\"]))\n                                }, [...(_cache[13] || (_cache[13] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { class: \"btn-label\" }, \"\", -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-mode-btn\", { active: currentMode.value === 'add' }]),\n                                    title: \"/\",\n                                    onClick: _cache[2] || (_cache[2] = _withModifiers(($event) => (toggleMode('add')), [\"stop\"]))\n                                }, [...(_cache[14] || (_cache[14] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-eye\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { class: \"btn-label\" }, \"\", -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-mode-btn\",\n                                    title: \"\",\n                                    onClick: _withModifiers(handleCreateTag, [\"stop\"])\n                                }, [...(_cache[15] || (_cache[15] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { class: \"btn-label\" }, \"\", -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-mode-btn\", { active: currentMode.value === 'delete' }]),\n                                    title: \"/\",\n                                    onClick: _cache[3] || (_cache[3] = _withModifiers(($event) => (toggleMode('delete')), [\"stop\"]))\n                                }, [...(_cache[16] || (_cache[16] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { class: \"btn-label\" }, \"\", -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */),\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-mode-btn\", { active: currentMode.value === 'migrate' }]),\n                                    title: \"\",\n                                    onClick: _cache[4] || (_cache[4] = _withModifiers(($event) => (toggleMode('migrate')), [\"stop\"]))\n                                }, [...(_cache[17] || (_cache[17] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-arrows-alt\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { class: \"btn-label\" }, \"\", -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-mode-btn\",\n                                    title: \"\",\n                                    onClick: _withModifiers(handleImport, [\"stop\"])\n                                }, [...(_cache[18] || (_cache[18] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-file-import\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { class: \"btn-label\" }, \"\", -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-mode-btn\", { active: currentMode.value === 'export' }]),\n                                    title: \"\",\n                                    onClick: _cache[5] || (_cache[5] = _withModifiers(($event) => (toggleMode('export')), [\"stop\"]))\n                                }, [...(_cache[19] || (_cache[19] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-file-export\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { class: \"btn-label\" }, \"\", -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */),\n                                _createCommentVNode(\" / \"),\n                                (currentMode.value === 'migrate' || currentMode.value === 'export')\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-mode-btn\",\n                                            onClick: _withModifiers(toggleSelectAllCurrent, [\"stop\"])\n                                        }, [\n                                            _cache[20] || (_cache[20] = _createElementVNode(\"i\", { class: \"fas fa-check-double\" }, null, -1 /* CACHED */)),\n                                            _createTextVNode(\" \" + _toDisplayString(isAllCurrentSelected.value ? '' : ''), 1 /* TEXT */)\n                                        ]),\n                                        (currentMode.value === 'export')\n                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                                _createElementVNode(\"button\", {\n                                                    class: \"acu-mode-btn\",\n                                                    onClick: _withModifiers(exportAll, [\"stop\"])\n                                                }, [...(_cache[21] || (_cache[21] = [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-download\" }, null, -1 /* CACHED */),\n                                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                                    ]))]),\n                                                _createElementVNode(\"button\", {\n                                                    class: \"acu-mode-btn\",\n                                                    disabled: selectedTagIds.value.size === 0,\n                                                    onClick: _withModifiers(exportSelected, [\"stop\"])\n                                                }, [\n                                                    _cache[22] || (_cache[22] = _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */)),\n                                                    _createTextVNode(\"  (\" + _toDisplayString(selectedTagIds.value.size) + \") \", 1 /* TEXT */)\n                                                ], 8 /* PROPS */, _hoisted_11)\n                                            ], 64 /* STABLE_FRAGMENT */))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_12, [\n                                _createCommentVNode(\"  \"),\n                                _createVNode(TagCategoryTree, {\n                                    mode: currentMode.value,\n                                    onCategoryClick: handleCategoryClick,\n                                    onAddCategory: handleAddCategory,\n                                    onMigrateToCategory: handleMigrateToCategory,\n                                    onDeleteCategory: handleDeleteCategory\n                                }, null, 8 /* PROPS */, [\"mode\"]),\n                                _createCommentVNode(\"  \"),\n                                _createVNode(TagBadgeGrid, {\n                                    mode: currentMode.value,\n                                    \"displayed-tag-ids\": localDisplayedTagIdSet.value,\n                                    onTagClick: handleTagClick,\n                                    onCreateTag: handleCreateTag,\n                                    onDeleteTag: handleDeleteTag,\n                                    onAddTag: handleAddTag\n                                }, null, 8 /* PROPS */, [\"mode\", \"displayed-tag-ids\"])\n                            ])\n                        ])\n                    ], 4 /* STYLE */),\n                    _createCommentVNode(\"  \"),\n                    _createVNode(TagEditDialog, {\n                        visible: showEditDialog.value,\n                        \"onUpdate:visible\": _cache[6] || (_cache[6] = ($event) => ((showEditDialog).value = $event)),\n                        tag: editingTag.value,\n                        \"default-category-id\": defaultCategoryId.value,\n                        onSaved: handleTagSaved,\n                        onClose: handleEditDialogClose\n                    }, null, 8 /* PROPS */, [\"visible\", \"tag\", \"default-category-id\"]),\n                    _createCommentVNode(\"  \"),\n                    (showImportDialog.value)\n                        ? (_openBlock(), _createBlock(TagImportDialog, {\n                            key: 0,\n                            visible: showImportDialog.value,\n                            \"onUpdate:visible\": _cache[7] || (_cache[7] = ($event) => ((showImportDialog).value = $event)),\n                            onImported: handleImported\n                        }, null, 8 /* PROPS */, [\"visible\"]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TagManagerDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TagManagerDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, unref as _unref } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-header\" };\nconst _hoisted_2 = { class: \"acu-modal-title\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"acu-category-icon\"\n};\nconst _hoisted_4 = { key: 1 };\nconst _hoisted_5 = { class: \"acu-modal-body\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"acu-category-select-dual\"\n};\nconst _hoisted_7 = { class: \"acu-category-tree\" };\nconst _hoisted_8 = { class: \"acu-tree-count\" };\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n    key: 0,\n    class: \"acu-tree-icon\"\n};\nconst _hoisted_11 = { key: 1 };\nconst _hoisted_12 = {\n    key: 1,\n    class: \"acu-tree-icon\"\n};\nconst _hoisted_13 = { class: \"acu-tree-label\" };\nconst _hoisted_14 = { class: \"acu-tree-count\" };\nconst _hoisted_15 = { class: \"acu-category-tags-grid\" };\nconst _hoisted_16 = [\"onClick\", \"onMouseenter\", \"onTouchstartPassive\"];\nconst _hoisted_17 = {\n    key: 0,\n    class: \"acu-tags-empty\"\n};\nconst _hoisted_18 = { class: \"acu-category-tags-only\" };\nconst _hoisted_19 = { class: \"acu-tags-scroll\" };\nconst _hoisted_20 = [\"onClick\", \"onMouseenter\", \"onTouchstartPassive\"];\nconst _hoisted_21 = {\n    key: 0,\n    class: \"acu-tags-empty\"\n};\nconst _hoisted_22 = {\n    class: \"acu-modal-footer\",\n    style: { \"justify-content\": \"space-between\", \"margin-top\": \"0\", \"padding-top\": \"12px\", \"border-top\": \"1px solid var(--acu-border)\" }\n};\nimport { computed, onUnmounted, ref, watch } from 'vue';\nimport { useDashboardStore } from '../../../stores/useDashboardStore';\nimport { useTagLibraryStore } from '../../../stores/useTagLibraryStore';\nimport { useUIStore } from '../../../stores/useUIStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CategorySelectPopup',\n    props: {\n        visible: { type: Boolean },\n        categoryId: {},\n        rowContext: { default: () => ({ title: '', value: '' }) },\n        widgetId: { default: '' }\n    },\n    emits: [\"update:visible\", \"select\", \"close\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        // Emits\n        const emit = __emit;\n        // Store\n        const tagStore = useTagLibraryStore();\n        const uiStore = useUIStore();\n        const dashboardStore = useDashboardStore();\n        // \n        const selectedSubCategoryId = ref(null);\n        // \n        const category = computed(() => {\n            return tagStore.getCategoryById(props.categoryId);\n        });\n        /**  */\n        const categoryName = computed(() => {\n            if (!category.value)\n                return '';\n            const parts = category.value.path.split('/');\n            return parts[parts.length - 1];\n        });\n        /**  */\n        const subCategories = computed(() => {\n            if (!category.value)\n                return [];\n            const parentPath = category.value.path;\n            //  parentPath/ \n            return tagStore.library.categories.filter(cat => {\n                if (!cat.path.startsWith(parentPath + '/'))\n                    return false;\n                // \n                const remainingPath = cat.path.slice(parentPath.length + 1);\n                return !remainingPath.includes('/');\n            });\n        });\n        /**  */\n        const hasSubCategories = computed(() => subCategories.value.length > 0);\n        /**  */\n        const allTags = computed(() => {\n            if (!category.value)\n                return [];\n            //  ID\n            const categoryIds = new Set();\n            tagStore.library.categories.forEach(cat => {\n                if (cat.path === category.value.path || cat.path.startsWith(category.value.path + '/')) {\n                    categoryIds.add(cat.id);\n                }\n            });\n            // \n            return tagStore.library.tags.filter(tag => categoryIds.has(tag.categoryId));\n        });\n        /**  */\n        const allTagsCount = computed(() => allTags.value.length);\n        /**  */\n        const displayedTags = computed(() => {\n            if (selectedSubCategoryId.value === null) {\n                // \n                return allTags.value;\n            }\n            // \n            const selectedCat = tagStore.getCategoryById(selectedSubCategoryId.value);\n            if (!selectedCat)\n                return [];\n            const categoryIds = new Set();\n            tagStore.library.categories.forEach(cat => {\n                if (cat.path === selectedCat.path || cat.path.startsWith(selectedCat.path + '/')) {\n                    categoryIds.add(cat.id);\n                }\n            });\n            return tagStore.library.tags.filter(tag => categoryIds.has(tag.categoryId));\n        });\n        /**  */\n        function getSubCategoryName(subCat) {\n            const parts = subCat.path.split('/');\n            return parts[parts.length - 1];\n        }\n        /**  */\n        function getSubCategoryTagCount(subCategoryId) {\n            const subCat = tagStore.getCategoryById(subCategoryId);\n            if (!subCat)\n                return 0;\n            const categoryIds = new Set();\n            tagStore.library.categories.forEach(cat => {\n                if (cat.path === subCat.path || cat.path.startsWith(subCat.path + '/')) {\n                    categoryIds.add(cat.id);\n                }\n            });\n            return tagStore.library.tags.filter(tag => categoryIds.has(tag.categoryId)).length;\n        }\n        /**  */\n        function selectSubCategory(subCategoryId) {\n            selectedSubCategoryId.value = subCategoryId;\n        }\n        // \n        function handleClose() {\n            emit('update:visible', false);\n            emit('close');\n        }\n        function handleTagClick(tag) {\n            // \n            if (uiStore.tagPreviewMode)\n                return;\n            emit('select', tag, props.rowContext);\n            // \n        }\n        // ====================  ====================\n        /** PC */\n        function handleTagMouseEnter(tag, event) {\n            if (!tag.promptTemplate)\n                return;\n            const target = event.currentTarget;\n            const rect = target.getBoundingClientRect();\n            // position: fixed \n            uiStore.showTagPreviewTooltip(tag.promptTemplate, rect.left + rect.width / 2, rect.top);\n        }\n        /** PC */\n        function handleTagMouseLeave() {\n            uiStore.hideTagPreviewTooltip();\n        }\n        /**  */\n        function handleTagTouchStart(tag, event) {\n            if (!uiStore.tagPreviewMode)\n                return;\n            if (!tag.promptTemplate)\n                return;\n            const touch = event.touches[0];\n            if (!touch)\n                return;\n            // \n            uiStore.showTagPreviewTooltip(tag.promptTemplate, touch.clientX, touch.clientY);\n        }\n        /**  */\n        function handleTagTouchEnd() {\n            if (!uiStore.tagPreviewMode)\n                return;\n            uiStore.hideTagPreviewTooltip();\n        }\n        // \n        onUnmounted(() => {\n            if (uiStore.tagPreviewMode) {\n                uiStore.toggleTagPreviewMode();\n            }\n            uiStore.hideTagPreviewTooltip();\n        });\n        function handleManageTags() {\n            // \n            handleClose();\n            // \n            let displayedTagIds = [];\n            let displayedCategoryIds = [];\n            if (props.widgetId) {\n                const widget = dashboardStore.getWidgetById(props.widgetId);\n                if (widget && widget.widgetTagConfig) {\n                    displayedTagIds = widget.widgetTagConfig.displayedTagIds || [];\n                    displayedCategoryIds = widget.widgetTagConfig.displayedCategoryIds || [];\n                }\n            }\n            //  widgetId\n            if (displayedCategoryIds.length === 0 && props.categoryId) {\n                displayedCategoryIds = [props.categoryId];\n            }\n            // \n            uiStore.openTagManagerDialog({\n                widgetId: props.widgetId || '',\n                displayedTagIds,\n                displayedCategoryIds,\n            }, (newTagIds, newCategoryIds) => {\n                if (props.widgetId) {\n                    // \n                    const widget = dashboardStore.getWidgetById(props.widgetId);\n                    if (widget) {\n                        dashboardStore.updateWidget(props.widgetId, {\n                            widgetTagConfig: {\n                                ...widget.widgetTagConfig,\n                                displayedTagIds: newTagIds,\n                                displayedCategoryIds: newCategoryIds,\n                            },\n                        });\n                    }\n                }\n            });\n        }\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                selectedSubCategoryId.value = null;\n            }\n        });\n        function isFontAwesome(icon) {\n            return icon.startsWith('fa') || icon.includes(' fa-');\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"acu-modal acu-category-select-modal\", { 'has-subcategories': hasSubCategories.value }])\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createElementVNode(\"span\", _hoisted_2, [\n                                (category.value?.icon)\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, [\n                                        (isFontAwesome(category.value.icon))\n                                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                                key: 0,\n                                                class: _normalizeClass(category.value.icon)\n                                            }, null, 2 /* CLASS */))\n                                            : (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(category.value.icon), 1 /* TEXT */))\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createTextVNode(\" \" + _toDisplayString(categoryName.value), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createCommentVNode(\"  \"),\n                            (hasSubCategories.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_7, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", {\n                                            class: _normalizeClass([\"acu-tree-item\", { active: selectedSubCategoryId.value === null }]),\n                                            onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (selectSubCategory(null)), [\"stop\"]))\n                                        }, [\n                                            _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"acu-tree-icon\" }, \"\", -1 /* CACHED */)),\n                                            _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"acu-tree-label\" }, \"\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_8, _toDisplayString(allTagsCount.value), 1 /* TEXT */)\n                                        ], 2 /* CLASS */),\n                                        _createCommentVNode(\"  \"),\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(subCategories.value, (subCat) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: subCat.id,\n                                                class: _normalizeClass([\"acu-tree-item\", { active: selectedSubCategoryId.value === subCat.id }]),\n                                                onClick: _withModifiers(($event) => (selectSubCategory(subCat.id)), [\"stop\"])\n                                            }, [\n                                                (subCat.icon)\n                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, [\n                                                        (isFontAwesome(subCat.icon))\n                                                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                                                key: 0,\n                                                                class: _normalizeClass(subCat.icon)\n                                                            }, null, 2 /* CLASS */))\n                                                            : (_openBlock(), _createElementBlock(\"span\", _hoisted_11, _toDisplayString(subCat.icon), 1 /* TEXT */))\n                                                    ]))\n                                                    : (_openBlock(), _createElementBlock(\"span\", _hoisted_12, [...(_cache[4] || (_cache[4] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-folder\" }, null, -1 /* CACHED */)\n                                                        ]))])),\n                                                _createElementVNode(\"span\", _hoisted_13, _toDisplayString(getSubCategoryName(subCat)), 1 /* TEXT */),\n                                                _createElementVNode(\"span\", _hoisted_14, _toDisplayString(getSubCategoryTagCount(subCat.id)), 1 /* TEXT */)\n                                            ], 10 /* CLASS, PROPS */, _hoisted_9));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_15, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayedTags.value, (tag) => {\n                                            return (_openBlock(), _createElementBlock(\"button\", {\n                                                key: tag.id,\n                                                class: _normalizeClass([\"acu-tag-btn\", { 'mode-preview': _unref(uiStore).tagPreviewMode }]),\n                                                onClick: _withModifiers(($event) => (handleTagClick(tag)), [\"stop\"]),\n                                                onMouseenter: ($event) => (handleTagMouseEnter(tag, $event)),\n                                                onMouseleave: handleTagMouseLeave,\n                                                onTouchstartPassive: ($event) => (handleTagTouchStart(tag, $event)),\n                                                onTouchend: handleTagTouchEnd,\n                                                onTouchcancel: handleTagTouchEnd\n                                            }, _toDisplayString(tag.label), 43 /* TEXT, CLASS, PROPS, NEED_HYDRATION */, _hoisted_16));\n                                        }), 128 /* KEYED_FRAGMENT */)),\n                                        _createCommentVNode(\"  \"),\n                                        (displayedTags.value.length === 0)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [...(_cache[5] || (_cache[5] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-tag\" }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                                ]))]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ])\n                                ]))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_18, [\n                                        _createElementVNode(\"div\", _hoisted_19, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(allTags.value, (tag) => {\n                                                return (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: tag.id,\n                                                    class: _normalizeClass([\"acu-tag-btn\", { 'mode-preview': _unref(uiStore).tagPreviewMode }]),\n                                                    onClick: _withModifiers(($event) => (handleTagClick(tag)), [\"stop\"]),\n                                                    onMouseenter: ($event) => (handleTagMouseEnter(tag, $event)),\n                                                    onMouseleave: handleTagMouseLeave,\n                                                    onTouchstartPassive: ($event) => (handleTagTouchStart(tag, $event)),\n                                                    onTouchend: handleTagTouchEnd,\n                                                    onTouchcancel: handleTagTouchEnd\n                                                }, _toDisplayString(tag.label), 43 /* TEXT, CLASS, PROPS, NEED_HYDRATION */, _hoisted_20));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        (allTags.value.length === 0)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [...(_cache[6] || (_cache[6] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-tag\" }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                                ]))]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_22, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn secondary\",\n                                onClick: _withModifiers(handleManageTags, [\"stop\"])\n                            }, [...(_cache[7] || (_cache[7] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-tags\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))]),\n                            _createCommentVNode(\"  CSS  \"),\n                            _createElementVNode(\"button\", {\n                                class: _normalizeClass([\"acu-modal-btn secondary acu-mobile-only\", { active: _unref(uiStore).tagPreviewMode }]),\n                                onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (_unref(uiStore).toggleTagPreviewMode()), [\"stop\"]))\n                            }, [\n                                _cache[8] || (_cache[8] = _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */)),\n                                _createTextVNode(\" \" + _toDisplayString(_unref(uiStore).tagPreviewMode ? '' : ''), 1 /* TEXT */)\n                            ], 2 /* CLASS */)\n                        ])\n                    ], 2 /* CLASS */)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CategorySelectPopup.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CategorySelectPopup.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, toDisplayString as _toDisplayString, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-pre-edit-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-header-actions\" };\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = { class: \"acu-modal-body\" };\nconst _hoisted_6 = { class: \"acu-pre-edit-content\" };\nconst _hoisted_7 = { class: \"acu-pre-edit-info-row\" };\nconst _hoisted_8 = { class: \"acu-pre-edit-label\" };\nconst _hoisted_9 = [\"onKeydown\"];\nconst _hoisted_10 = {\n    key: 0,\n    class: \"acu-companion-selector\"\n};\nconst _hoisted_11 = { class: \"acu-avatar-list\" };\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = [\"src\", \"alt\"];\nconst _hoisted_14 = {\n    key: 1,\n    class: \"acu-avatar-text-icon\"\n};\nconst _hoisted_15 = { class: \"acu-avatar-name\" };\nconst _hoisted_16 = {\n    key: 0,\n    class: \"acu-avatar-empty\"\n};\nimport { inject, nextTick, ref, watch } from 'vue';\nimport { useAvatarManager } from '../../../composables/useAvatarManager';\nimport { useCoreActions } from '../../../composables/useCoreActions';\nimport { useUIStore } from '../../../stores/useUIStore';\nimport { isCharacterTable } from '../../../utils';\n\nimport { h } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TagPreEditDialog',\n    props: {\n        visible: { type: Boolean },\n        tagLabel: { default: '' },\n        resolvedPrompt: { default: '' },\n        showCompanions: { type: Boolean, default: false },\n        widgetId: { default: '' }\n    },\n    emits: [\"update:visible\", \"confirm\", \"close\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        // Emits\n        const emit = __emit;\n        // Core actions\n        const { setInput } = useCoreActions();\n        const { getAvatarUrl } = useAvatarManager();\n        const uiStore = useUIStore();\n        const getAllTables = inject('allTables');\n        // \n        const textareaRef = ref(null);\n        const editedPrompt = ref('');\n        const avatars = ref([]);\n        const isLoadingAvatars = ref(false);\n        // \n        watch(() => props.visible, async (visible) => {\n            if (visible) {\n                // \n                editedPrompt.value = props.resolvedPrompt;\n                // \n                if (props.showCompanions) {\n                    loadAvatars();\n                }\n                // \n                await nextTick();\n                textareaRef.value?.focus();\n                // \n                textareaRef.value?.setSelectionRange(editedPrompt.value.length, editedPrompt.value.length);\n            }\n        });\n        async function loadAvatars() {\n            isLoadingAvatars.value = true;\n            try {\n                // 1. \n                const charNames = new Set();\n                const tables = getAllTables ? getAllTables() : [];\n                if (!getAllTables) {\n                    console.warn('[TagPreEditDialog] getAllTables injection failed');\n                }\n                console.log('[TagPreEditDialog] Loading avatars. Tables:', tables.length);\n                if (tables.length > 0) {\n                    tables.forEach(table => {\n                        if (isCharacterTable(table.name, table.id)) {\n                            console.log('[TagPreEditDialog] Found character table:', table.name);\n                            //  \"Name\"/\"\"/\"\"(index 1)\n                            const nameColIndex = table.headers.findIndex(h => ['name', '', '', ''].includes(h.toLowerCase()));\n                            // 221\n                            let targetColIndex = nameColIndex;\n                            if (targetColIndex === -1) {\n                                targetColIndex = table.headers.length > 1 ? 1 : 0;\n                            }\n                            table.rows.forEach(row => {\n                                const cell = row.cells.find(c => c.colIndex === targetColIndex);\n                                if (cell && cell.value && String(cell.value).trim()) {\n                                    charNames.add(String(cell.value).trim());\n                                }\n                            });\n                        }\n                    });\n                }\n                // 2. \n                const chatVars = typeof getVariables !== 'undefined' ? getVariables({ type: 'chat' }) : {};\n                const graphConfig = chatVars['acu_graph_config'] || {};\n                const labelsConfig = graphConfig.labels || {};\n                // 3. \n                const displayAvatars = await Promise.all(Array.from(charNames).map(async (name) => {\n                    const url = await getAvatarUrl(name);\n                    const config = labelsConfig[name];\n                    // /\n                    let textAvatar = '';\n                    if (config?.selectedIndices && config.selectedIndices.length > 0) {\n                        textAvatar = config.selectedIndices.map((i) => name[i]).join('');\n                    }\n                    else {\n                        const label = config?.displayLabel || name;\n                        textAvatar = label.charAt(0);\n                    }\n                    return {\n                        name,\n                        displayUrl: url || '',\n                        textAvatar,\n                    };\n                }));\n                avatars.value = displayAvatars;\n            }\n            catch (e) {\n                console.error('Failed to load avatars:', e);\n            }\n            finally {\n                isLoadingAvatars.value = false;\n            }\n        }\n        // \n        function handleClose() {\n            emit('update:visible', false);\n            emit('close');\n        }\n        function handleConfirm() {\n            const prompt = editedPrompt.value.trim();\n            if (!prompt)\n                return;\n            // \n            setInput(prompt);\n            // \n            emit('confirm', prompt);\n            // \n            handleClose();\n        }\n        function handleAvatarClick(avatar) {\n            const companionText = `${avatar.name}`;\n            const currentText = editedPrompt.value;\n            //  {{user}} \n            if (currentText.includes('{{user}}')) {\n                //  {{user}} \n                const lastIndex = currentText.lastIndexOf('{{user}}');\n                const insertPos = lastIndex + '{{user}}'.length;\n                editedPrompt.value = currentText.slice(0, insertPos) + companionText + currentText.slice(insertPos);\n            }\n            else {\n                // \n                editedPrompt.value = companionText + currentText;\n            }\n            // \n            nextTick(() => {\n                textareaRef.value?.focus();\n            });\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-edit\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-modal-btn secondary small\",\n                                    onClick: _withModifiers(handleClose, [\"stop\"])\n                                }, \"\"),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-modal-btn primary small\",\n                                    disabled: !editedPrompt.value.trim(),\n                                    onClick: _withModifiers(handleConfirm, [\"stop\"])\n                                }, [...(_cache[1] || (_cache[1] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-paper-plane\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))], 8 /* PROPS */, _hoisted_4)\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createElementVNode(\"div\", _hoisted_6, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_7, [\n                                    _createElementVNode(\"div\", _hoisted_8, \"\" + _toDisplayString(__props.tagLabel), 1 /* TEXT */)\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _withDirectives(_createElementVNode(\"textarea\", {\n                                    ref_key: \"textareaRef\",\n                                    ref: textareaRef,\n                                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((editedPrompt).value = $event)),\n                                    class: \"acu-pre-edit-textarea\",\n                                    placeholder: \"...\",\n                                    onKeydown: [\n                                        _withKeys(_withModifiers(handleConfirm, [\"ctrl\"]), [\"enter\"]),\n                                        _withKeys(_withModifiers(handleConfirm, [\"meta\"]), [\"enter\"])\n                                    ]\n                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_9), [\n                                    [_vModelText, editedPrompt.value]\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                (__props.showCompanions)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                                        _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"acu-companion-header\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-user-friends\" }),\n                                            _createTextVNode(\"  () \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_11, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(avatars.value, (avatar) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: avatar.name,\n                                                    class: \"acu-avatar-item\",\n                                                    onClick: ($event) => (handleAvatarClick(avatar))\n                                                }, [\n                                                    _createElementVNode(\"div\", {\n                                                        class: _normalizeClass([\"acu-avatar-img-wrapper\", { 'no-img': !avatar.displayUrl }])\n                                                    }, [\n                                                        (avatar.displayUrl)\n                                                            ? (_openBlock(), _createElementBlock(\"img\", {\n                                                                key: 0,\n                                                                src: avatar.displayUrl,\n                                                                alt: avatar.name,\n                                                                loading: \"lazy\"\n                                                            }, null, 8 /* PROPS */, _hoisted_13))\n                                                            : (_openBlock(), _createElementBlock(\"span\", _hoisted_14, _toDisplayString(avatar.textAvatar), 1 /* TEXT */))\n                                                    ], 2 /* CLASS */),\n                                                    _createElementVNode(\"span\", _hoisted_15, _toDisplayString(avatar.name), 1 /* TEXT */)\n                                                ], 8 /* PROPS */, _hoisted_12));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            (avatars.value.length === 0 && !isLoadingAvatars.value)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, \"\"))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ])\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createCommentVNode(\"  \"),\n                                _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"acu-pre-edit-hint\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-lightbulb\" }),\n                                    _createElementVNode(\"span\", null, \" Ctrl+Enter \")\n                                ], -1 /* CACHED */))\n                            ])\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TagPreEditDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TagPreEditDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/* unplugin-vue-components disabled */import script from \"./TagPreviewTooltip.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TagPreviewTooltip.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nimport { computed } from 'vue';\nimport { useUIStore } from '../../../stores/useUIStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TagPreviewTooltip',\n    setup(__props) {\n        const uiStore = useUIStore();\n        // \n        //  inline transformCSS  translate(-50%, -100%)\n        const tooltipStyle = computed(() => {\n            const { x, y } = uiStore.tagPreviewTooltip;\n            //  iframe \n            const viewportWidth = window.parent?.innerWidth || window.innerWidth;\n            // 300px\n            const estimatedWidth = 300;\n            // \n            let left = x;\n            if (left + estimatedWidth / 2 > viewportWidth - 20) {\n                left = viewportWidth - estimatedWidth / 2 - 20;\n            }\n            if (left - estimatedWidth / 2 < 20) {\n                left = estimatedWidth / 2 + 20;\n            }\n            //  left/toptransform  CSS \n            return {\n                left: `${left}px`,\n                top: `${y - 10}px`, // \n            };\n        });\n        return (_ctx, _cache) => {\n            return (_unref(uiStore).tagPreviewTooltip.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-tag-preview-tooltip\",\n                    style: _normalizeStyle(tooltipStyle.value)\n                }, _toDisplayString(_unref(uiStore).tagPreviewTooltip.content), 5 /* TEXT, STYLE */))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, normalizeStyle as _normalizeStyle, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, Fragment as _Fragment, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, withCtx as _withCtx, normalizeClass as _normalizeClass } from \"vue\";\nimport { computed, nextTick, onMounted, onUnmounted, provide, reactive, ref, watch, watchEffect } from 'vue';\n// \nimport { defineAsyncComponent } from 'vue';\nimport { ContextMenu, Dashboard, DataTable, FloatingBall, MainPanel, OptionsPanel, TabBar, TabsPopup, Toast, } from './components';\nimport { AddTableDialog, AdvancedPurgeDialog, AvatarCropDialog, AvatarManagerDialog, DirectorDialog, FactionSettingsDialog, GraphSettingsDialog, HistoryDialog, IconSelectDialog, InputFloorDialog, ManualUpdateDialog, NodeConfigDialog, NodeLabelDialog, PresetSaveDialog, PurgeRangeDialog, RowEditDialog, SettingsDialog, WidgetActionsDialog, WidgetSettingsDialog, } from './components/dialogs';\nimport { DivinationOverlay, PromptEditorDialog } from './components/dialogs/divination';\nimport { CategorySelectPopup, TagManagerDialog, TagPreEditDialog, TagPreviewTooltip, } from './components/dialogs/tag-manager';\n// RelationshipGraph  Cytoscape \n// \nimport { useConfigStore } from './stores/useConfigStore';\nimport { useDashboardStore } from './stores/useDashboardStore';\nimport { useDataStore } from './stores/useDataStore';\nimport { useDivinationStore } from './stores/useDivinationStore';\nimport { useTagLibraryStore } from './stores/useTagLibraryStore';\nimport { getSmartTabIcon, TAB_DASHBOARD, TAB_OPTIONS, TAB_RELATIONSHIP_GRAPH, useUIStore } from './stores/useUIStore';\n// Composables \nimport { useApiCallbacks } from './composables/useApiCallbacks';\nimport { useCoreActions } from './composables/useCoreActions';\nimport { useDataPersistence } from './composables/useDataPersistence';\nimport { useDivinationAction } from './composables/useDivinationAction';\nimport { useFullscreenSupport } from './composables/useFullscreenSupport';\nimport { appendToActiveInput, useHiddenPrompt } from './composables/useHiddenPrompt';\nimport { useParentStyleInjection } from './composables/useParentStyleInjection';\nimport { useRowHistory } from './composables/useRowHistory';\nimport { useSwipeEnhancement } from './composables/useSwipeEnhancement';\nimport { useTableUpdateStatus } from './composables/useTableUpdateStatus';\nimport { toast, useToast } from './composables/useToast';\nimport { useTouchScrollFix } from './composables/useTouchScrollFix';\n// \nimport { isCharacterTable, processJsonData } from './utils';\n\nimport { h } from 'vue';\n// ============================================================\n// Store \n// ============================================================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        /**\n         * App.vue - ACU \n         *\n         * \n         */\n        const RelationshipGraph = defineAsyncComponent({\n            loader: () => import('./components/RelationshipGraph.vue'),\n            loadingComponent: {\n                template: `\n      <div class=\"acu-graph-loading\">\n        <i class=\"fas fa-spinner fa-spin\"></i>\n        <span>...</span>\n      </div>\n    `,\n            },\n            delay: 200, // 200ms \n        });\n        // Store \n        const uiStore = useUIStore();\n        const dataStore = useDataStore();\n        const dashboardStore = useDashboardStore();\n        const configStore = useConfigStore();\n        const tagLibraryStore = useTagLibraryStore();\n        const divinationStore = useDivinationStore();\n        // ============================================================\n        // Composables\n        // ============================================================\n        const { init: initStyles, cleanup: cleanupStyles } = useParentStyleInjection();\n        const { saveToDatabase, getTableData, purgeFloorRange: executePurgeFloorRange, stopAutoSave } = useDataPersistence();\n        const { refresh: refreshTableStatus } = useTableUpdateStatus();\n        const { state: toastState } = useToast();\n        const { setInput } = useCoreActions();\n        const { setHiddenPrompt, setupSendIntercept, cleanupSendIntercept } = useHiddenPrompt();\n        const { performDivination, confirmDivination, triggerQuickReroll } = useDivinationAction();\n        // - \n        useTouchScrollFix();\n        // API - \n        useApiCallbacks();\n        // - \n        // CSSiframe\n        useFullscreenSupport();\n        // Swipe -  onMounted \n        const swipeEnhancement = useSwipeEnhancement();\n        // init()  onMounted  DOM \n        // ============================================================\n        // Refs\n        // ============================================================\n        const floatingBallRef = ref();\n        const mainPanelRef = ref();\n        const relationshipGraphRef = ref();\n        // ============================================================\n        // Provide ()\n        // ============================================================\n        //  DataTable \n        provide('allTables', () => processedTables.value);\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const searchTerm = ref('');\n        /**  */\n        const isContentHidden = ref(false);\n        //  useUIStore ref\n        /**  */\n        const contextMenuState = reactive({\n            visible: false,\n            x: 0,\n            y: 0,\n            tableId: '',\n            tableName: '',\n            rowIndex: 0,\n            isDeleting: false,\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  class */\n        const appClasses = computed(() => [\n            `acu-theme-${configStore.config.theme}`,\n            `acu-font-${configStore.config.fontFamily.replace(/\\s+/g, '-').toLowerCase()}`,\n            {\n                'acu-mobile': uiStore.isMobile,\n                'acu-layout-horizontal': configStore.config.layout === 'horizontal',\n                'acu-layout-vertical': configStore.config.layout === 'vertical',\n                'acu-fix-ios-zoom': configStore.config.enableIOSInputFix,\n            },\n        ]);\n        /**  */\n        const panelTitle = computed(() => {\n            if (uiStore.activeTab === TAB_DASHBOARD)\n                return 'ACU ';\n            if (uiStore.activeTab === TAB_OPTIONS)\n                return 'ACU ';\n            return `ACU - ${uiStore.activeTab || ''}`;\n        });\n        /**  */\n        const processedTables = computed(() => {\n            const staged = dataStore.stagedData;\n            if (!staged)\n                return [];\n            //  processJsonData \n            // : { sheetId: { name: string, content: string[][] } }\n            // : { tableName: { key: sheetId, headers: string[], rows: string[][] } }\n            const processed = processJsonData(staged);\n            if (!processed)\n                return [];\n            return Object.entries(processed).map(([tableName, tableData]) => {\n                const { key: sheetId, headers, rows: rawRows } = tableData;\n                //  string[][]  TableRow[] \n                const rows = rawRows.map((rowData, rowIndex) => {\n                    // rowData  string[]  headers  cells\n                    const cells = rowData.map((cellValue, colIndex) => ({\n                        colIndex,\n                        key: headers[colIndex] || `col_${colIndex}`,\n                        value: String(cellValue ?? ''),\n                    }));\n                    return {\n                        index: rowIndex,\n                        key: `${tableName}-row-${rowIndex}`,\n                        cells,\n                    };\n                });\n                return {\n                    id: sheetId, //  sheetId  ID\n                    name: tableName,\n                    headers: headers.map(h => String(h)), //  headers \n                    rows,\n                };\n            });\n        });\n        /** Tab  */\n        const tabList = computed(() => {\n            return processedTables.value.map(table => ({\n                id: table.id,\n                name: table.name,\n                icon: getTableIcon(table.name),\n            }));\n        });\n        /**  */\n        const hasOptionsTabs = computed(() => {\n            return processedTables.value.some(t => t.name.includes('') || t.name.toLowerCase().includes('option'));\n        });\n        /** Tab */\n        const isTabBarCollapsed = computed(() => {\n            return configStore.config.collapseTabBar === true;\n        });\n        /**  */\n        const optionsTables = computed(() => {\n            return processedTables.value.filter(t => t.name.includes('') || t.name.toLowerCase().includes('option'));\n        });\n        /**  Tab  */\n        const hasRelationshipData = computed(() => {\n            return processedTables.value.some(t => isCharacterTable(t.name, t.id));\n        });\n        /**\n         * \n         */\n        const relationshipTableData = computed(() => {\n            return (processedTables.value.find(t => {\n                const name = t.name.toLowerCase();\n                const id = t.id.toLowerCase();\n                return name.includes('') || id.includes('relationship') || id.includes('relation');\n            }) || null);\n        });\n        /**\n         * \n         */\n        const characterTablesData = computed(() => {\n            return processedTables.value.filter(t => isCharacterTable(t.name, t.id));\n        });\n        /**\n         * \n         */\n        const factionTableData = computed(() => {\n            const keywords = ['', 'faction', '', 'organization', '', '', '', '', ''];\n            return (processedTables.value.find(t => {\n                const name = t.name.toLowerCase();\n                const id = t.id.toLowerCase();\n                return keywords.some(kw => name.includes(kw) || id.includes(kw));\n            }) || null);\n        });\n        /**\n         * \n         * \n         */\n        const factionList = computed(() => {\n            const factions = new Set();\n            // \n            for (const table of characterTablesData.value) {\n                // /\n                const factionColIndex = table.headers.findIndex(h => {\n                    const lower = h.toLowerCase();\n                    return lower.includes('') || lower.includes('') || lower.includes('faction');\n                });\n                if (factionColIndex >= 0) {\n                    for (const row of table.rows) {\n                        const cell = row.cells.find(c => c.colIndex === factionColIndex);\n                        if (cell && cell.value && String(cell.value).trim()) {\n                            factions.add(String(cell.value).trim());\n                        }\n                    }\n                }\n            }\n            return Array.from(factions);\n        });\n        /**  */\n        const currentTable = computed(() => {\n            if (!uiStore.activeTab)\n                return null;\n            return processedTables.value.find(t => t.id === uiStore.activeTab) || null;\n        });\n        /**  () -  RowEditDialog  */\n        const currentEditingRow = computed(() => {\n            const { tableId, rowIndex } = uiStore.rowEditDialog.props;\n            if (!tableId)\n                return null;\n            const table = processedTables.value.find(t => t.id === tableId);\n            if (!table)\n                return null;\n            //  rowIndex \n            if (rowIndex < 0 || rowIndex >= table.rows.length)\n                return null;\n            return table.rows[rowIndex];\n        });\n        /**  */\n        const currentTargetFloor = computed(() => {\n            //  dataStore \n            return 0; //  dataStore \n        });\n        /**  */\n        const maxFloorIndex = computed(() => {\n            // \n            const chat = window.SillyTavern?.chat;\n            return Array.isArray(chat) ? chat.length - 1 : 0;\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  () */\n        function getTableIcon(tableName) {\n            //  App  ()\n            const name = tableName.toLowerCase();\n            if (name.includes('') || name.includes('player'))\n                return 'fas fa-user';\n            if (name.includes('') || name.includes('quest'))\n                return 'fas fa-tasks';\n            if (name.includes('') || name.includes('item'))\n                return 'fas fa-box-open';\n            if (name.includes('') || name.includes('equip'))\n                return 'fas fa-shield-alt';\n            if (name.includes('') || name.includes('status'))\n                return 'fas fa-heart';\n            if (name.includes('') || name.includes('event'))\n                return 'fas fa-calendar-alt';\n            if (name.includes('') || name.includes('option'))\n                return 'fas fa-sliders-h';\n            //  useUIStore \n            const smartIcon = getSmartTabIcon(tableName);\n            if (smartIcon !== 'fas fa-table') {\n                return smartIcon;\n            }\n            return 'fas fa-table';\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  -  */\n        function handleBallClick() {\n            uiStore.openPanel();\n            isContentHidden.value = false;\n            console.info('[ACU] ');\n        }\n        /**  -  */\n        function handleBallDoubleClick() {\n            floatingBallRef.value?.setDocked(true);\n            console.info('[ACU] ');\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function handlePanelClose() {\n            uiStore.closePanel();\n            console.info('[ACU] ');\n        }\n        /**  */\n        function handleHideContent() {\n            isContentHidden.value = !isContentHidden.value;\n        }\n        /**  */\n        function handleToggle() {\n            uiStore.isCollapsed = true;\n            console.info('[ACU] ');\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /** Tab  */\n        function handleTabChange(tabId) {\n            //  Tab MainPanel \n            if (tabId && mainPanelRef.value) {\n                mainPanelRef.value.exitCenteredMode();\n            }\n            // 1. Tab\n            const dataAreaEl = mainPanelRef.value?.getDataAreaElement();\n            if (dataAreaEl) {\n                dataAreaEl.style.height = '';\n                dataAreaEl.style.minHeight = '';\n                dataAreaEl.style.maxHeight = '';\n            }\n            uiStore.setActiveTab(tabId);\n            searchTerm.value = '';\n            // Bug2: tab\n            isContentHidden.value = false;\n            console.info(`[ACU]  Tab: ${tabId}`);\n            // 2.  DOM \n            //  setTimeout  rAF\n            nextTick(() => {\n                //  50ms \n                setTimeout(() => {\n                    requestAnimationFrame(() => {\n                        restoreTableHeight(tabId);\n                    });\n                }, 50);\n            });\n        }\n        /**\n         * \n         * @param tabId Tab ID\n         */\n        function restoreTableHeight(tabId) {\n            const dataAreaEl = mainPanelRef.value?.getDataAreaElement();\n            if (!dataAreaEl)\n                return;\n            const savedHeight = uiStore.getTableHeight(tabId);\n            if (savedHeight) {\n                // \n                dataAreaEl.style.height = `${savedHeight}px`;\n                console.info(`[ACU] : ${tabId} = ${savedHeight}px`);\n            }\n            else {\n                // \n                mainPanelRef.value?.resetHeight();\n            }\n        }\n        /** Tab  */\n        function handleTabsReorder(newOrder) {\n            uiStore.setTableOrder(newOrder);\n            console.info('[ACU] Tab ');\n        }\n        /** Tab - /Tab */\n        function handleCollapseTabClick() {\n            uiStore.toggleTabsPopup();\n            console.info(`[ACU] Tab: ${uiStore.tabsPopup ? '' : ''}`);\n        }\n        /** Tab - Tab */\n        function handleTabsPopupClick(tabId) {\n            uiStore.closeTabsPopup();\n            handleTabChange(tabId);\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function handleNavigateToTable(tableId) {\n            // 1. Tab\n            const dataAreaEl = mainPanelRef.value?.getDataAreaElement();\n            if (dataAreaEl) {\n                dataAreaEl.style.height = '';\n                dataAreaEl.style.minHeight = '';\n                dataAreaEl.style.maxHeight = '';\n            }\n            uiStore.setActiveTab(tableId);\n            console.info(`[ACU] : ${tableId}`);\n            // 2. \n            nextTick(() => {\n                setTimeout(() => {\n                    requestAnimationFrame(() => {\n                        restoreTableHeight(tableId);\n                    });\n                }, 50);\n            });\n        }\n        /**  -  Tab */\n        function handleShowRelationshipGraph() {\n            if (hasRelationshipData.value) {\n                uiStore.setActiveTab(TAB_RELATIONSHIP_GRAPH);\n                console.info('[ACU]  Tab');\n            }\n            else {\n                toast.warning('');\n            }\n        }\n        /**  */\n        function handleOpenAvatarManagerFromSettings() {\n            //  RelationshipGraph  openAvatarManager \n            if (relationshipGraphRef.value) {\n                relationshipGraphRef.value.openAvatarManager();\n            }\n        }\n        /**  */\n        function handleSaveAs() {\n            uiStore.openInputFloorDialog(currentTargetFloor.value);\n        }\n        /**  */\n        function handlePurge() {\n            uiStore.openPurgeRangeDialog(maxFloorIndex.value);\n        }\n        /**  */\n        function handleDashboardAction(actionId, tableId) {\n            switch (actionId) {\n                case 'clear':\n                    // \n                    handlePurge();\n                    break;\n                case 'undo':\n                    // \n                    handleUndo();\n                    break;\n                case 'manualUpdate':\n                    // \n                    handleManualUpdate();\n                    break;\n                case 'console':\n                    // \n                    uiStore.openDirectorDialog();\n                    break;\n                case 'quickReroll':\n                    // \n                    triggerQuickReroll();\n                    break;\n                default:\n                    console.log('[ACU Dashboard] :', actionId, tableId);\n            }\n        }\n        /**  */\n        function handleTableClose() {\n            //  handleTabChange /\n            handleTabChange(TAB_DASHBOARD);\n            console.info('[ACU] ');\n        }\n        /**\n         * \n         * @param tableId  ID ( tableId )\n         */\n        function openNativeEditor(tableId) {\n            try {\n                const parentWin = window.parent || window;\n                const api = parentWin.AutoCardUpdaterAPI;\n                if (tableId && api?.openTableEditor) {\n                    //  tableId\n                    api.openTableEditor(tableId);\n                }\n                else if (api?.openVisualizer) {\n                    //  tableId\n                    api.openVisualizer();\n                    console.info('[ACU] ');\n                    // \n                    handleToggle();\n                }\n                else if (api?.openModal) {\n                    // \n                    api.openModal();\n                }\n                else {\n                    console.warn('[ACU] API ');\n                }\n            }\n            catch (e) {\n                console.error('[ACU] ', e);\n            }\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**\n         * \n         * @param tag \n         * @param rowContext \n         */\n        function handleCategoryTagSelect(tag, rowContext) {\n            // \n            let prompt = String(tag.promptTemplate || '');\n            // {{value}} - \n            prompt = prompt.replace(/\\{\\{value\\}\\}/gi, tag.label);\n            // {{rowTitle}} - \n            if (rowContext?.title) {\n                prompt = prompt.replace(/\\{\\{rowTitle\\}\\}/gi, rowContext.title);\n            }\n            else {\n                prompt = prompt.replace(/\\{\\{rowTitle\\}\\}/gi, '');\n            }\n            // {{playerName}} - \n            const playerName = getPlayerName();\n            prompt = prompt.replace(/\\{\\{playerName\\}\\}/gi, playerName);\n            // {{tableName}} - \n            prompt = prompt.replace(/\\{\\{tableName\\}\\}/gi, '');\n            const resolvedPrompt = prompt.trim();\n            // \n            const category = tagLibraryStore.getCategoryById(tag.categoryId);\n            const isLocation = category ? category.path.includes('') || category.path.includes('Location') : false;\n            // \n            // \n            if (tag.allowPreEdit || isLocation) {\n                // \n                uiStore.openTagPreEditDialog({\n                    tagLabel: tag.label,\n                    resolvedPrompt,\n                    showCompanions: isLocation,\n                });\n            }\n            else if (resolvedPrompt) {\n                // \n                setInput(resolvedPrompt);\n            }\n        }\n        /**\n         * \n         */\n        function getPlayerName() {\n            const parentWin = window.parent || window;\n            try {\n                const ctx = parentWin.SillyTavern?.getContext?.();\n                if (ctx?.name1) {\n                    return ctx.name1;\n                }\n            }\n            catch (e) {\n                console.warn('[ACU] ', e);\n            }\n            return '{{user}}';\n        }\n        /**  -  MainPanel  */\n        function handleHeightDragStart(event, handleEl) {\n            //  MainPanel \n            const dataAreaEl = mainPanelRef.value?.getDataAreaElement();\n            if (!dataAreaEl || !handleEl)\n                return;\n            // \n            if (event.button !== 0)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            //  handleEl \n            handleEl.setPointerCapture(event.pointerId);\n            const startY = event.clientY;\n            const startHeight = dataAreaEl.offsetHeight;\n            const handlePointerMove = (moveE) => {\n                const dy = startY - moveE.clientY;\n                let newHeight = startHeight + dy;\n                //  200px CSS  max-height: calc(100vh - bottom) \n                const minHeight = 200;\n                newHeight = Math.max(minHeight, newHeight);\n                dataAreaEl.style.height = `${newHeight}px`;\n            };\n            const handlePointerUp = (upE) => {\n                handleEl.releasePointerCapture(upE.pointerId);\n                handleEl.removeEventListener('pointermove', handlePointerMove);\n                handleEl.removeEventListener('pointerup', handlePointerUp);\n                // \n                const currentTabName = uiStore.activeTab;\n                if (currentTabName && dataAreaEl) {\n                    const finalHeight = dataAreaEl.offsetHeight;\n                    uiStore.setTableHeight(currentTabName, finalHeight);\n                    console.info(`[ACU] : ${currentTabName} = ${finalHeight}px`);\n                }\n            };\n            handleEl.addEventListener('pointermove', handlePointerMove);\n            handleEl.addEventListener('pointerup', handlePointerUp);\n        }\n        /**  -  MainPanel  */\n        function handleHeightReset() {\n            // \n            const currentTabName = uiStore.activeTab;\n            if (currentTabName) {\n                uiStore.resetTableHeight(currentTabName);\n                console.info(`[ACU] : ${currentTabName}`);\n            }\n            mainPanelRef.value?.resetHeight();\n            console.info('[ACU] ');\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        async function loadData() {\n            const data = getTableData();\n            if (data) {\n                const processedData = dataStore.setStagedData(data);\n                dataStore.saveSnapshot(processedData);\n                //  ID\n                const allTableIds = Object.keys(data).filter(k => k.startsWith('sheet_'));\n                // syncNewTablesToVisibleTabs \n                //  ConfigManager \n                // \n                dashboardStore.cleanupInvalidWidgets(allTableIds);\n                // AI\n                dataStore.clearChanges(true);\n                // \n                // \n                dashboardStore.ensureDefaultWidgets().catch(err => {\n                    console.warn('[ACU] :', err);\n                });\n                // \n                //  useTableUpdateStatus \n                refreshTableStatus().catch(err => {\n                    console.warn('[ACU] :', err);\n                });\n            }\n        }\n        /**  */\n        async function handleRefresh() {\n            try {\n                await loadData();\n                console.info('[ACU] ');\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n            }\n        }\n        /**  */\n        async function handleSave() {\n            try {\n                // \n                dataStore.saveLastState();\n                //  commitDeletes = true\n                const success = await saveToDatabase(null, false, true);\n                if (success) {\n                    console.info('[ACU] ');\n                    // \n                    await loadData();\n                }\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n            }\n        }\n        /**  */\n        function handleUndo() {\n            if (!dataStore.hasUndoData) {\n                toast.warning('');\n                return;\n            }\n            // \n            //  manualDiffMap hasUnsavedChanges  true\n            const success = dataStore.undoToLastSave();\n            if (success) {\n                toast.success('');\n                console.info('[ACU] , hasUnsavedChanges:', dataStore.hasUnsavedChanges);\n            }\n            else {\n                toast.error('');\n            }\n        }\n        /**  */\n        function handleCellClick(tableId, rowIndex, colIndex) {\n            console.info(`[ACU] : ${tableId}[${rowIndex}][${colIndex}]`);\n        }\n        /**  */\n        function handleRowClick(tableId, row) {\n            console.info(`[ACU] : ${tableId}[${row.index}]`);\n        }\n        /**  */\n        async function handleInsertRow(tableId, afterIndex) {\n            console.info(`[ACU] : ${tableId}  ${afterIndex} `);\n            //  sheetIdtableId  sheetId\n            const table = processedTables.value.find(t => t.id === tableId);\n            if (!table) {\n                console.warn('[ACU] :', tableId);\n                return;\n            }\n            // \n            const { insertRow } = useCoreActions();\n            await insertRow(tableId, afterIndex);\n            // \n            await loadData();\n        }\n        /**  */\n        function handleToggleDelete(tableId, rowIndex) {\n            // DataCard  tableName  rowKey\n            const table = processedTables.value.find(t => t.id === tableId);\n            const tableName = table?.name || tableId;\n            const rowKey = `${tableName}-row-${rowIndex}`;\n            dataStore.toggleDelete(rowKey);\n            console.info(`[ACU] : ${rowKey}`);\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function handleContextMenu(event, tableId, rowIndex) {\n            //  rowKey DataCard \n            const table = processedTables.value.find(t => t.id === tableId);\n            const tableName = table?.name || tableId;\n            const rowKey = `${tableName}-row-${rowIndex}`;\n            contextMenuState.visible = true;\n            contextMenuState.x = event.clientX;\n            contextMenuState.y = event.clientY;\n            contextMenuState.tableId = tableId;\n            contextMenuState.tableName = tableName;\n            contextMenuState.rowIndex = rowIndex;\n            contextMenuState.isDeleting = dataStore.pendingDeletes.has(rowKey);\n        }\n        /**  -  */\n        function handleContextInsertRow() {\n            handleInsertRow(contextMenuState.tableId, contextMenuState.rowIndex);\n            contextMenuState.visible = false;\n        }\n        /**  -  */\n        function handleContextCopy() {\n            const table = processedTables.value.find(t => t.id === contextMenuState.tableId);\n            const row = table?.rows[contextMenuState.rowIndex];\n            if (row) {\n                const text = row.cells.map(c => `${c.key}: ${c.value}`).join('\\n');\n                navigator.clipboard.writeText(text).then(() => {\n                    console.info('[ACU] ');\n                });\n            }\n            contextMenuState.visible = false;\n        }\n        /**  -  */\n        function handleContextDelete() {\n            handleToggleDelete(contextMenuState.tableId, contextMenuState.rowIndex);\n            contextMenuState.visible = false;\n        }\n        /**  -  */\n        function handleContextUndoDelete() {\n            handleToggleDelete(contextMenuState.tableId, contextMenuState.rowIndex);\n            contextMenuState.visible = false;\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function handleShowHistory(tableId, tableName, rowIndex, rowData) {\n            //  titleColIndex DataTable.vue \n            const table = processedTables.value.find(t => t.id === tableId);\n            let titleColIndex = 1;\n            if (table && (tableName.includes('') || tableName.includes(''))) {\n                const idx = table.headers.findIndex(h => h && (h.includes('') || h.includes('') || h.includes('')));\n                titleColIndex = idx > 0 ? idx : 1;\n            }\n            uiStore.openHistoryDialog({\n                tableId,\n                tableName,\n                rowIndex,\n                currentRowData: rowData,\n                titleColIndex,\n            });\n            console.info(`[ACU] : ${tableName}[${rowIndex}], titleColIndex=${titleColIndex}`);\n        }\n        /**  */\n        async function handleHistoryApply(changes) {\n            const { tableId, tableName, rowIndex, currentRowData } = uiStore.historyDialog.props;\n            if (!currentRowData || changes.size === 0) {\n                uiStore.closeHistoryDialog();\n                return;\n            }\n            // \n            const { saveSnapshot, getCurrentChatId } = useRowHistory();\n            const chatId = getCurrentChatId();\n            if (chatId) {\n                await saveSnapshot(tableName, rowIndex, tableRowToCells(currentRowData), 'manual');\n                console.info('[ACU] ');\n            }\n            // \n            for (const [colIndex, value] of changes) {\n                dataStore.updateCell(tableName, rowIndex, colIndex, value, { skipHistory: true });\n            }\n            console.info(`[ACU] : ${changes.size} `);\n            uiStore.closeHistoryDialog();\n        }\n        /**  TableRow  cells  */\n        function tableRowToCells(row) {\n            const cells = {};\n            row.cells.forEach((cell, index) => {\n                cells[index] = String(cell.value);\n            });\n            return cells;\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**\n         * \n         */\n        function handleDivinationConfirm(action = 'reveal') {\n            const result = uiStore.divinationOverlay.result;\n            if (result) {\n                confirmDivination(result, action);\n            }\n            else {\n                console.error('[ACU] Confirm divination failed: No result found');\n            }\n        }\n        /**\n         * \n         * @param prompt \n         */\n        function handlePromptEditorSave(prompt) {\n            setHiddenPrompt(prompt);\n            setupSendIntercept();\n        }\n        /**\n         *  galgame \n         * @param prompt \n         */\n        function appendPromptToInput(prompt) {\n            const wrapped = `<>\\n${prompt}\\n</>`;\n            appendToActiveInput(wrapped, '\\n');\n            toast.success('');\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function handleSettingsSave() {\n            console.info('[ACU] ');\n        }\n        /**  -  */\n        function handleManualUpdate() {\n            uiStore.openManualUpdateDialog();\n        }\n        /**  */\n        function handleOpenNative() {\n            try {\n                const w = window.parent || window;\n                const api = w.AutoCardUpdaterAPI || window.AutoCardUpdaterAPI;\n                if (api && typeof api.openVisualizer === 'function') {\n                    api.openVisualizer();\n                    console.info('[ACU] ');\n                }\n                else {\n                    console.warn('[ACU] AutoCardUpdaterAPI.openVisualizer ');\n                }\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n            }\n        }\n        /**  */\n        async function handleSaveToFloor(floorIndex) {\n            try {\n                const success = await saveToDatabase(null, false, false, floorIndex);\n                if (success) {\n                    console.info(`[ACU]  ${floorIndex} `);\n                    // \n                    await loadData();\n                }\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n            }\n        }\n        /**  */\n        async function handlePurgeRange(startFloor, endFloor) {\n            try {\n                await executePurgeFloorRange(startFloor, endFloor);\n                console.info(`[ACU]  ${startFloor}  ${endFloor} `);\n                // \n                await loadData();\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n            }\n        }\n        /**  */\n        async function handleAdvancedPurgeConfirm(result) {\n            console.info(`[ACU]  ${result.changedCount} :`, result.tables);\n            // \n            await loadData();\n        }\n        // ============================================================\n        // \n        // ============================================================\n        onMounted(async () => {\n            console.info('[ACU] App ');\n            // \n            initStyles();\n            //  Swipe  onMounted  DOM \n            try {\n                swipeEnhancement.init();\n                console.info('[ACU] Swipe ');\n            }\n            catch (error) {\n                console.error('[ACU] Swipe :', error);\n            }\n            // \n            uiStore.setMobile(window.innerWidth <= 768);\n            // \n            window.addEventListener('resize', () => {\n                uiStore.setMobile(window.innerWidth <= 768);\n            });\n            // \n            try {\n                await loadData();\n                //  ()\n                await dashboardStore.loadConfig();\n                // \n                divinationStore.loadConfig();\n                //  ()\n                await divinationStore.loadFromWorldbook();\n                uiStore.setInitialized(true);\n                //  Tab\n                //  6.4.1 tab\n                // \n                let isCenteredMode = false;\n                try {\n                    const winConfigRaw = localStorage.getItem('acu_win_config');\n                    const winConfig = winConfigRaw ? JSON.parse(winConfigRaw) : null;\n                    // \n                    if (winConfig?.isCentered === true) {\n                        isCenteredMode = true;\n                        //  activeTab  null\n                        uiStore.setActiveTab(null);\n                        // \n                        uiStore.isCollapsed = false;\n                        console.info('[ACU]  Tab');\n                    }\n                }\n                catch (e) {\n                    // \n                }\n                //  activeTab \n                if (!isCenteredMode && !uiStore.activeTab && processedTables.value.length > 0) {\n                    uiStore.setActiveTab(TAB_DASHBOARD);\n                }\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n            }\n        });\n        onUnmounted(() => {\n            console.info('[ACU] App ');\n            //  ()\n            stopAutoSave();\n            //  DOM \n            cleanupSendIntercept();\n            // \n            cleanupStyles();\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         *  ACU \n         * @param target \n         * @returns  ACU  true\n         */\n        function isInsideACU(target) {\n            const parentDoc = window.parent?.document || document;\n            //  InlineEditor\n            if (parentDoc.querySelector('.acu-inline-editor')) {\n                console.info('[ACU]  InlineEditor ');\n                return true;\n            }\n            // \n            if (parentDoc.querySelector('.acu-editing-lock')) {\n                console.info('[ACU] ');\n                return true;\n            }\n            // textarea  input \n            const activeElement = parentDoc.activeElement;\n            if (activeElement && (activeElement.tagName === 'TEXTAREA' || activeElement.tagName === 'INPUT')) {\n                //  ACU  ACU \n                if (activeElement.closest('.acu-wrapper') || activeElement.closest('.acu-inline-editor')) {\n                    console.info('[ACU]  ACU ');\n                    return true;\n                }\n            }\n            // \n            if (uiStore.settingsDialog ||\n                uiStore.inputFloorDialog.visible ||\n                uiStore.purgeRangeDialog.visible ||\n                uiStore.manualUpdateDialog ||\n                uiStore.historyDialog.visible ||\n                uiStore.presetSaveDialog.visible) {\n                return true;\n            }\n            // \n            return !!(target.closest('.acu-wrapper') || // \n                target.closest('.acu-floating-ball-vue') || // \n                target.closest('.acu-context-menu') || // \n                target.closest('.acu-modal-overlay') || // \n                target.closest('.acu-modal') || // \n                target.closest('.acu-modal-container') || // \n                target.closest('.acu-history-modal') || // \n                target.closest('.acu-dialog') || // \n                target.closest('[class*=\"acu-settings\"]') || // \n                target.closest('#acu_visualizer_vue-root') || // Vue \n                target.closest('.acu-inline-editor') || // \n                target.closest('.acu-editing-lock') || // \n                target.closest('.acu-edit-textarea') // \n            );\n        }\n        //  onClickOutside \n        //  document \n        onMounted(() => {\n            const parentDoc = window.parent?.document || document;\n            const handleClickOutside = (event) => {\n                // \n                if (!uiStore.isPanelVisible || uiStore.isPinned) {\n                    return;\n                }\n                const target = event.target;\n                //  ACU \n                if (isInsideACU(target)) {\n                    return;\n                }\n                // \n                uiStore.closePanel();\n                console.info('[ACU] ');\n            };\n            // \n            parentDoc.addEventListener('click', handleClickOutside);\n            // \n            onUnmounted(() => {\n                parentDoc.removeEventListener('click', handleClickOutside);\n            });\n        });\n        // ============================================================\n        // \n        // ============================================================\n        //  CSS \n        watchEffect(() => {\n            // PC  0\n            const safeArea = uiStore.isMobile ? (configStore.config.mobileSafeAreaBottom ?? 50) : 0;\n            if (window.parent?.document?.documentElement) {\n                window.parent.document.documentElement.style.setProperty('--acu-safe-area-bottom', `${safeArea}px`);\n            }\n        });\n        //  diffMap\n        // deep watcher  updateCell  syncToStagedData \n        //  aiDiffMap manualDiffMap \n        // tableUpdateCallback  generateDiffMap  watcher\n        watch(() => dataStore.stagedData, newData => {\n            if (newData) {\n                dataStore.generateDiffMap(newData);\n            }\n        }, { deep: true });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"acu-app\", appClasses.value])\n            }, [\n                _createCommentVNode(\"  () \"),\n                _createVNode(_unref(FloatingBall), {\n                    ref_key: \"floatingBallRef\",\n                    ref: floatingBallRef,\n                    style: _normalizeStyle({ display: _unref(uiStore).isPanelVisible ? 'none' : 'block' })\n                }, null, 8 /* PROPS */, [\"style\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(MainPanel), {\n                    ref_key: \"mainPanelRef\",\n                    ref: mainPanelRef,\n                    style: _normalizeStyle({ display: _unref(uiStore).isPanelVisible ? 'flex' : 'none' }),\n                    title: panelTitle.value,\n                    theme: _unref(configStore).config.theme,\n                    layout: _unref(configStore).config.layout,\n                    \"is-collapsed\": _unref(uiStore).isCollapsed,\n                    \"is-pinned\": _unref(uiStore).isPinned,\n                    \"is-content-hidden\": isContentHidden.value,\n                    \"lock-panel\": _unref(configStore).config.lockPanel,\n                    \"has-changes\": _unref(dataStore).hasUnsavedChanges,\n                    onRefresh: handleRefresh,\n                    onSave: handleSave,\n                    onSaveAs: handleSaveAs,\n                    onUndo: handleUndo,\n                    onManualUpdate: handleManualUpdate,\n                    onPurge: handlePurge,\n                    onOpenNative: handleOpenNative,\n                    onSettings: _unref(uiStore).openSettingsDialog,\n                    onTogglePin: _unref(uiStore).togglePin,\n                    onToggle: handleToggle,\n                    onClose: handlePanelClose,\n                    onHideContent: handleHideContent,\n                    onCollapseTab: handleCollapseTabClick\n                }, {\n                    tabs: _withCtx(() => [\n                        (!isTabBarCollapsed.value)\n                            ? (_openBlock(), _createBlock(_unref(TabBar), {\n                                key: 0,\n                                tabs: tabList.value,\n                                \"active-tab\": _unref(uiStore).activeTab,\n                                \"show-dashboard\": true,\n                                \"has-options-tabs\": hasOptionsTabs.value,\n                                \"has-relationship-graph\": hasRelationshipData.value,\n                                \"is-editing-order\": _unref(uiStore).isEditingOrder,\n                                \"grid-columns\": _unref(configStore).gridColumnsCss,\n                                onTabChange: handleTabChange,\n                                onOrderChange: handleTabsReorder,\n                                onExitEditing: _cache[0] || (_cache[0] = ($event) => (_unref(uiStore).setEditingOrder(false)))\n                            }, null, 8 /* PROPS */, [\"tabs\", \"active-tab\", \"has-options-tabs\", \"has-relationship-graph\", \"is-editing-order\", \"grid-columns\"]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    \"tabs-popup\": _withCtx(() => [\n                        _createVNode(_unref(TabsPopup), {\n                            visible: _unref(uiStore).tabsPopup,\n                            tabs: tabList.value,\n                            \"active-tab\": _unref(uiStore).activeTab,\n                            \"grid-columns\": _unref(configStore).gridColumnsCss,\n                            \"show-dashboard\": true,\n                            \"show-options-panel\": hasOptionsTabs.value,\n                            \"show-relationship-graph\": hasRelationshipData.value,\n                            onTabClick: handleTabsPopupClick,\n                            onClose: _unref(uiStore).closeTabsPopup\n                        }, null, 8 /* PROPS */, [\"visible\", \"tabs\", \"active-tab\", \"grid-columns\", \"show-options-panel\", \"show-relationship-graph\", \"onClose\"])\n                    ]),\n                    default: _withCtx(() => [\n                        _createCommentVNode(\"  \"),\n                        (_unref(uiStore).activeTab === _unref(TAB_DASHBOARD))\n                            ? (_openBlock(), _createBlock(_unref(Dashboard), {\n                                key: 0,\n                                tables: processedTables.value,\n                                onNavigate: handleNavigateToTable,\n                                onRowClick: handleRowClick,\n                                onShowRelationshipGraph: handleShowRelationshipGraph,\n                                onAction: handleDashboardAction,\n                                onHeightDragStart: handleHeightDragStart,\n                                onHeightReset: handleHeightReset\n                            }, null, 8 /* PROPS */, [\"tables\"]))\n                            : (_unref(uiStore).activeTab === _unref(TAB_OPTIONS))\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createVNode(_unref(OptionsPanel), {\n                                        tables: optionsTables.value,\n                                        onCellClick: handleCellClick,\n                                        onToggleDelete: handleToggleDelete\n                                    }, null, 8 /* PROPS */, [\"tables\"])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                : (_unref(uiStore).activeTab === _unref(TAB_RELATIONSHIP_GRAPH))\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createVNode(_unref(RelationshipGraph), {\n                                            ref_key: \"relationshipGraphRef\",\n                                            ref: relationshipGraphRef,\n                                            \"relationship-table\": relationshipTableData.value,\n                                            \"character-tables\": characterTablesData.value,\n                                            \"faction-table\": factionTableData.value,\n                                            \"all-tables\": processedTables.value,\n                                            \"show-legend\": true\n                                        }, null, 8 /* PROPS */, [\"relationship-table\", \"character-tables\", \"faction-table\", \"all-tables\"])\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    : (currentTable.value)\n                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n                                            _createCommentVNode(\"  \"),\n                                            (_openBlock(), _createBlock(_unref(DataTable), {\n                                                key: currentTable.value.id,\n                                                \"table-id\": currentTable.value.id,\n                                                \"table-name\": currentTable.value.name,\n                                                rows: currentTable.value.rows,\n                                                headers: currentTable.value.headers,\n                                                \"search-term\": searchTerm.value,\n                                                onCellClick: handleCellClick,\n                                                onInsertRow: handleInsertRow,\n                                                onToggleDelete: handleToggleDelete,\n                                                onContextMenu: handleContextMenu,\n                                                onSearchChange: _cache[1] || (_cache[1] = ($event) => (searchTerm.value = $event)),\n                                                onClose: handleTableClose,\n                                                onHeightDragStart: handleHeightDragStart,\n                                                onHeightReset: handleHeightReset,\n                                                onShowHistory: handleShowHistory\n                                            }, null, 8 /* PROPS */, [\"table-id\", \"table-name\", \"rows\", \"headers\", \"search-term\"]))\n                                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                        : (_openBlock(), _createElementBlock(_Fragment, { key: 4 }, [\n                                            _createCommentVNode(\"  \"),\n                                            _cache[15] || (_cache[15] = _createElementVNode(\"div\", { class: \"acu-no-data\" }, [\n                                                _createElementVNode(\"i\", { class: \"fas fa-inbox\" }),\n                                                _createElementVNode(\"p\", null, \"\")\n                                            ], -1 /* CACHED */))\n                                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"style\", \"title\", \"theme\", \"layout\", \"is-collapsed\", \"is-pinned\", \"is-content-hidden\", \"lock-panel\", \"has-changes\", \"onSettings\", \"onTogglePin\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(ContextMenu), {\n                    visible: contextMenuState.visible,\n                    \"onUpdate:visible\": _cache[2] || (_cache[2] = ($event) => ((contextMenuState.visible) = $event)),\n                    x: contextMenuState.x,\n                    y: contextMenuState.y,\n                    \"table-id\": contextMenuState.tableId,\n                    \"table-name\": contextMenuState.tableName,\n                    \"row-index\": contextMenuState.rowIndex,\n                    onInsertRow: handleContextInsertRow,\n                    onCopy: handleContextCopy,\n                    onDelete: handleContextDelete,\n                    onUndoDelete: handleContextUndoDelete\n                }, null, 8 /* PROPS */, [\"visible\", \"x\", \"y\", \"table-id\", \"table-name\", \"row-index\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(SettingsDialog), {\n                    visible: _unref(uiStore).settingsDialog,\n                    \"onUpdate:visible\": _cache[3] || (_cache[3] = ($event) => ((_unref(uiStore).settingsDialog) = $event)),\n                    onSave: handleSettingsSave\n                }, null, 8 /* PROPS */, [\"visible\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(DirectorDialog), {\n                    visible: _unref(uiStore).directorDialog,\n                    \"onUpdate:visible\": _cache[4] || (_cache[4] = ($event) => ((_unref(uiStore).directorDialog) = $event))\n                }, null, 8 /* PROPS */, [\"visible\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(InputFloorDialog), {\n                    visible: _unref(uiStore).inputFloorDialog.visible,\n                    \"onUpdate:visible\": _cache[5] || (_cache[5] = ($event) => ((_unref(uiStore).inputFloorDialog.visible) = $event)),\n                    \"current-floor\": _unref(uiStore).inputFloorDialog.props.currentFloor,\n                    onConfirm: handleSaveToFloor\n                }, null, 8 /* PROPS */, [\"visible\", \"current-floor\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(PurgeRangeDialog), {\n                    visible: _unref(uiStore).purgeRangeDialog.visible,\n                    \"onUpdate:visible\": _cache[6] || (_cache[6] = ($event) => ((_unref(uiStore).purgeRangeDialog.visible) = $event)),\n                    \"max-floor\": _unref(uiStore).purgeRangeDialog.props.maxFloor,\n                    onConfirm: handlePurgeRange,\n                    onAdvancedConfirm: handleAdvancedPurgeConfirm\n                }, null, 8 /* PROPS */, [\"visible\", \"max-floor\"]),\n                _createCommentVNode(\"  () \"),\n                _createVNode(_unref(AdvancedPurgeDialog), {\n                    visible: _unref(uiStore).advancedPurgeDialog.visible,\n                    \"onUpdate:visible\": _cache[7] || (_cache[7] = ($event) => ((_unref(uiStore).advancedPurgeDialog.visible) = $event)),\n                    \"initial-start-floor\": _unref(uiStore).advancedPurgeDialog.props.initialStartFloor,\n                    \"initial-end-floor\": _unref(uiStore).advancedPurgeDialog.props.initialEndFloor,\n                    \"initial-selected-tables\": _unref(uiStore).advancedPurgeDialog.state.selectedTableKeys,\n                    onConfirm: _unref(uiStore).handleAdvancedPurgeConfirm\n                }, null, 8 /* PROPS */, [\"visible\", \"initial-start-floor\", \"initial-end-floor\", \"initial-selected-tables\", \"onConfirm\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(ManualUpdateDialog), {\n                    visible: _unref(uiStore).manualUpdateDialog,\n                    \"onUpdate:visible\": _cache[8] || (_cache[8] = ($event) => ((_unref(uiStore).manualUpdateDialog) = $event))\n                }, null, 8 /* PROPS */, [\"visible\"]),\n                _createCommentVNode(\"  (DataTable ) \"),\n                _createVNode(_unref(HistoryDialog), {\n                    visible: _unref(uiStore).historyDialog.visible,\n                    \"onUpdate:visible\": _cache[9] || (_cache[9] = ($event) => ((_unref(uiStore).historyDialog.visible) = $event)),\n                    \"table-name\": _unref(uiStore).historyDialog.props.tableName,\n                    \"table-id\": _unref(uiStore).historyDialog.props.tableId,\n                    \"row-index\": _unref(uiStore).historyDialog.props.rowIndex,\n                    \"current-row-data\": _unref(uiStore).historyDialog.props.currentRowData,\n                    \"title-col-index\": _unref(uiStore).historyDialog.props.titleColIndex,\n                    onApply: handleHistoryApply\n                }, null, 8 /* PROPS */, [\"visible\", \"table-name\", \"table-id\", \"row-index\", \"current-row-data\", \"title-col-index\"]),\n                _createCommentVNode(\"  (Dashboard ) \"),\n                _createVNode(_unref(RowEditDialog), {\n                    visible: _unref(uiStore).rowEditDialog.visible,\n                    \"onUpdate:visible\": _cache[10] || (_cache[10] = ($event) => ((_unref(uiStore).rowEditDialog.visible) = $event)),\n                    \"table-name\": _unref(uiStore).rowEditDialog.props.tableName,\n                    \"table-id\": _unref(uiStore).rowEditDialog.props.tableId,\n                    \"row-index\": _unref(uiStore).rowEditDialog.props.rowIndex,\n                    \"current-row-data\": currentEditingRow.value,\n                    onClose: _unref(uiStore).closeRowEditDialog,\n                    onShowHistory: _unref(uiStore).switchFromRowEditToHistory\n                }, null, 8 /* PROPS */, [\"visible\", \"table-name\", \"table-id\", \"row-index\", \"current-row-data\", \"onClose\", \"onShowHistory\"]),\n                _createCommentVNode(\"  (Dashboard ) \"),\n                _createVNode(_unref(HistoryDialog), {\n                    visible: _unref(uiStore).dashboardHistoryDialog.visible,\n                    \"onUpdate:visible\": _cache[11] || (_cache[11] = ($event) => ((_unref(uiStore).dashboardHistoryDialog.visible) = $event)),\n                    \"table-name\": _unref(uiStore).dashboardHistoryDialog.props.tableName,\n                    \"table-id\": _unref(uiStore).dashboardHistoryDialog.props.tableId,\n                    \"row-index\": _unref(uiStore).dashboardHistoryDialog.props.rowIndex,\n                    \"current-row-data\": _unref(uiStore).dashboardHistoryDialog.props.currentRowData,\n                    \"title-col-index\": _unref(uiStore).dashboardHistoryDialog.props.titleColIndex,\n                    onClose: _unref(uiStore).closeDashboardHistoryDialog\n                }, null, 8 /* PROPS */, [\"visible\", \"table-name\", \"table-id\", \"row-index\", \"current-row-data\", \"title-col-index\", \"onClose\"]),\n                _createCommentVNode(\"  (Dashboard ) \"),\n                _createVNode(_unref(WidgetSettingsDialog), {\n                    visible: _unref(uiStore).widgetSettingsDialog.visible,\n                    \"onUpdate:visible\": _cache[12] || (_cache[12] = ($event) => ((_unref(uiStore).widgetSettingsDialog.visible) = $event)),\n                    \"widget-id\": _unref(uiStore).widgetSettingsDialog.props.widgetId,\n                    \"widget-config\": _unref(uiStore).widgetSettingsDialog.props.widgetConfig,\n                    \"table-headers\": _unref(uiStore).widgetSettingsDialog.props.tableHeaders,\n                    onClose: _unref(uiStore).closeWidgetSettingsDialog\n                }, null, 8 /* PROPS */, [\"visible\", \"widget-id\", \"widget-config\", \"table-headers\", \"onClose\"]),\n                _createCommentVNode(\"  () \"),\n                _createVNode(_unref(AvatarCropDialog), {\n                    visible: _unref(uiStore).avatarCropDialog.visible,\n                    \"image-url\": _unref(uiStore).avatarCropDialog.props.imageUrl,\n                    name: _unref(uiStore).avatarCropDialog.props.name,\n                    \"initial-offset-x\": _unref(uiStore).avatarCropDialog.props.initialOffsetX,\n                    \"initial-offset-y\": _unref(uiStore).avatarCropDialog.props.initialOffsetY,\n                    \"initial-scale\": _unref(uiStore).avatarCropDialog.props.initialScale,\n                    \"initial-invert\": _unref(uiStore).avatarCropDialog.props.initialInvert,\n                    \"show-invert-option\": _unref(uiStore).avatarCropDialog.props.showInvertOption,\n                    onClose: _unref(uiStore).closeAvatarCropDialog,\n                    onApply: _unref(uiStore).handleAvatarCropApply,\n                    onUpload: _unref(uiStore).handleAvatarCropUpload\n                }, null, 8 /* PROPS */, [\"visible\", \"image-url\", \"name\", \"initial-offset-x\", \"initial-offset-y\", \"initial-scale\", \"initial-invert\", \"show-invert-option\", \"onClose\", \"onApply\", \"onUpload\"]),\n                _createCommentVNode(\"  (Dashboard ) \"),\n                _createVNode(_unref(WidgetActionsDialog), {\n                    visible: _unref(uiStore).widgetActionsDialog.visible,\n                    \"onUpdate:visible\": _cache[13] || (_cache[13] = ($event) => ((_unref(uiStore).widgetActionsDialog.visible) = $event)),\n                    \"widget-id\": _unref(uiStore).widgetActionsDialog.props.widgetId,\n                    \"current-actions\": _unref(uiStore).widgetActionsDialog.props.currentActions,\n                    onClose: _unref(uiStore).closeWidgetActionsDialog\n                }, null, 8 /* PROPS */, [\"visible\", \"widget-id\", \"current-actions\", \"onClose\"]),\n                _createCommentVNode(\"  (RelationshipGraph ) \"),\n                _createVNode(_unref(AvatarManagerDialog), {\n                    visible: _unref(uiStore).avatarManagerDialog.visible,\n                    nodes: _unref(uiStore).avatarManagerDialog.props.nodes,\n                    factions: _unref(uiStore).avatarManagerDialog.props.factions,\n                    onClose: _unref(uiStore).closeAvatarManagerDialog,\n                    onUpdate: _unref(uiStore).handleAvatarManagerUpdate,\n                    onLabelChange: _unref(uiStore).handleAvatarManagerLabelChange\n                }, null, 8 /* PROPS */, [\"visible\", \"nodes\", \"factions\", \"onClose\", \"onUpdate\", \"onLabelChange\"]),\n                _createCommentVNode(\"  (RelationshipGraph ) \"),\n                _createVNode(_unref(NodeConfigDialog), {\n                    visible: _unref(uiStore).nodeConfigDialog.visible,\n                    \"node-id\": _unref(uiStore).nodeConfigDialog.props.nodeId,\n                    \"full-name\": _unref(uiStore).nodeConfigDialog.props.fullName,\n                    \"current-label\": _unref(uiStore).nodeConfigDialog.props.currentLabel,\n                    \"selected-indices\": _unref(uiStore).nodeConfigDialog.props.selectedIndices,\n                    onClose: _unref(uiStore).closeNodeConfigDialog,\n                    onConfirm: _unref(uiStore).handleNodeConfigConfirm,\n                    onResetToFullName: _unref(uiStore).handleNodeConfigResetToFullName,\n                    onStyleUpdate: _unref(uiStore).handleNodeConfigStyleUpdate\n                }, null, 8 /* PROPS */, [\"visible\", \"node-id\", \"full-name\", \"current-label\", \"selected-indices\", \"onClose\", \"onConfirm\", \"onResetToFullName\", \"onStyleUpdate\"]),\n                _createCommentVNode(\"  (AvatarManagerDialog ) \"),\n                _createVNode(_unref(NodeLabelDialog), {\n                    visible: _unref(uiStore).nodeLabelDialog.visible,\n                    \"full-name\": _unref(uiStore).nodeLabelDialog.props.fullName,\n                    \"initial-indices\": _unref(uiStore).nodeLabelDialog.props.initialIndices,\n                    onClose: _unref(uiStore).closeNodeLabelDialog,\n                    onApply: _unref(uiStore).handleNodeLabelApply,\n                    onReset: _unref(uiStore).handleNodeLabelReset\n                }, null, 8 /* PROPS */, [\"visible\", \"full-name\", \"initial-indices\", \"onClose\", \"onApply\", \"onReset\"]),\n                _createCommentVNode(\"  (RelationshipGraph ) \"),\n                _createVNode(_unref(GraphSettingsDialog), {\n                    visible: _unref(uiStore).graphSettingsDialog.visible,\n                    factions: _unref(uiStore).graphSettingsDialog.props.factions,\n                    onClose: _unref(uiStore).closeGraphSettingsDialog,\n                    onOpenAvatarManager: handleOpenAvatarManagerFromSettings\n                }, null, 8 /* PROPS */, [\"visible\", \"factions\", \"onClose\"]),\n                _createCommentVNode(\"  (RelationshipGraph ) \"),\n                _createVNode(_unref(FactionSettingsDialog), {\n                    visible: _unref(uiStore).factionSettingsDialog.visible,\n                    \"faction-id\": _unref(uiStore).factionSettingsDialog.props.factionId,\n                    \"faction-name\": _unref(uiStore).factionSettingsDialog.props.factionName,\n                    onClose: _unref(uiStore).closeFactionSettingsDialog\n                }, null, 8 /* PROPS */, [\"visible\", \"faction-id\", \"faction-name\", \"onClose\"]),\n                _createCommentVNode(\"  (WidgetSettingsDialog ) \"),\n                _createVNode(_unref(TagManagerDialog), {\n                    visible: _unref(uiStore).tagManagerDialog.visible,\n                    \"widget-id\": _unref(uiStore).tagManagerDialog.props.widgetId,\n                    \"displayed-tag-ids\": _unref(uiStore).tagManagerDialog.props.displayedTagIds,\n                    \"displayed-category-ids\": _unref(uiStore).tagManagerDialog.props.displayedCategoryIds,\n                    onClose: _unref(uiStore).closeTagManagerDialog,\n                    onSave: _unref(uiStore).handleTagManagerSave\n                }, null, 8 /* PROPS */, [\"visible\", \"widget-id\", \"displayed-tag-ids\", \"displayed-category-ids\", \"onClose\", \"onSave\"]),\n                _createCommentVNode(\"  (DashboardWidget ) \"),\n                _createVNode(_unref(CategorySelectPopup), {\n                    visible: _unref(uiStore).categorySelectDialog.visible,\n                    \"category-id\": _unref(uiStore).categorySelectDialog.props.categoryId,\n                    \"row-context\": _unref(uiStore).categorySelectDialog.props.rowContext,\n                    \"widget-id\": _unref(uiStore).categorySelectDialog.props.widgetId,\n                    onClose: _unref(uiStore).closeCategorySelectDialog,\n                    onSelect: handleCategoryTagSelect\n                }, null, 8 /* PROPS */, [\"visible\", \"category-id\", \"row-context\", \"widget-id\", \"onClose\"]),\n                _createCommentVNode(\"  (DashboardWidget ) \"),\n                _createVNode(_unref(TagPreEditDialog), {\n                    visible: _unref(uiStore).tagPreEditDialog.visible,\n                    \"tag-label\": _unref(uiStore).tagPreEditDialog.props.tagLabel,\n                    \"resolved-prompt\": _unref(uiStore).tagPreEditDialog.props.resolvedPrompt,\n                    \"show-companions\": _unref(uiStore).tagPreEditDialog.props.showCompanions,\n                    \"widget-id\": _unref(uiStore).tagPreEditDialog.props.widgetId,\n                    onClose: _unref(uiStore).closeTagPreEditDialog\n                }, null, 8 /* PROPS */, [\"visible\", \"tag-label\", \"resolved-prompt\", \"show-companions\", \"widget-id\", \"onClose\"]),\n                _createCommentVNode(\"  () \"),\n                _createVNode(_unref(PresetSaveDialog), {\n                    visible: _unref(uiStore).presetSaveDialog.visible,\n                    \"preset-type\": _unref(uiStore).presetSaveDialog.props.presetType,\n                    \"summary-items\": _unref(uiStore).presetSaveDialog.props.summaryItems,\n                    \"initial-name\": _unref(uiStore).presetSaveDialog.props.initialName,\n                    \"check-duplicate\": _unref(uiStore).presetSaveDialog.props.checkDuplicate,\n                    \"onUpdate:visible\": _unref(uiStore).closePresetSaveDialog,\n                    onSave: _unref(uiStore).handlePresetSave\n                }, null, 8 /* PROPS */, [\"visible\", \"preset-type\", \"summary-items\", \"initial-name\", \"check-duplicate\", \"onUpdate:visible\", \"onSave\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(DivinationOverlay), {\n                    visible: _unref(uiStore).divinationOverlay.visible,\n                    result: _unref(uiStore).divinationOverlay.result,\n                    onClose: _unref(uiStore).closeDivinationOverlay,\n                    onRetry: _unref(performDivination),\n                    onConfirm: handleDivinationConfirm\n                }, null, 8 /* PROPS */, [\"visible\", \"result\", \"onClose\", \"onRetry\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(PromptEditorDialog), {\n                    visible: _unref(uiStore).promptEditorDialog.visible,\n                    prompt: _unref(uiStore).promptEditorDialog.props.prompt,\n                    onClose: _unref(uiStore).closePromptEditorDialog,\n                    onSave: handlePromptEditorSave\n                }, null, 8 /* PROPS */, [\"visible\", \"prompt\", \"onClose\"]),\n                _createCommentVNode(\"  (TableStatusBoard ) \"),\n                _createVNode(_unref(AddTableDialog), {\n                    visible: _unref(uiStore).addTableDialog.visible,\n                    \"onUpdate:visible\": _cache[14] || (_cache[14] = ($event) => ((_unref(uiStore).addTableDialog.visible) = $event)),\n                    onConfirm: _unref(uiStore).handleAddTableConfirm\n                }, null, 8 /* PROPS */, [\"visible\", \"onConfirm\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(IconSelectDialog), {\n                    visible: _unref(uiStore).iconSelectDialog.visible,\n                    \"current-icon\": _unref(uiStore).iconSelectDialog.props.currentIcon,\n                    \"onUpdate:visible\": _unref(uiStore).closeIconSelectDialog,\n                    onSelect: _unref(uiStore).handleIconSelect\n                }, null, 8 /* PROPS */, [\"visible\", \"current-icon\", \"onUpdate:visible\", \"onSelect\"]),\n                _createCommentVNode(\"  () \"),\n                _createVNode(_unref(TagPreviewTooltip)),\n                _createCommentVNode(\"  Toast  \"),\n                _createVNode(_unref(Toast), {\n                    visible: _unref(toastState).visible,\n                    message: _unref(toastState).message,\n                    type: _unref(toastState).type\n                }, null, 8 /* PROPS */, [\"visible\", \"message\", \"type\"])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * useTouchScrollFix.ts - \n *\n *  v2\n *  document \n *\n * 6.4.1.ts:4489-4544\n */\n\nimport { onMounted, onUnmounted, ref } from 'vue';\n\n/**\n *  Composable\n *\n * \n * - \n * - \n * - \n *\n *  Vue \n */\nexport function useTouchScrollFix() {\n  // \n  const startX = ref(0);\n  const startY = ref(0);\n\n  // \n  let touchStartHandler: ((e: TouchEvent) => void) | null = null;\n  let touchMoveHandler: ((e: TouchEvent) => void) | null = null;\n\n  /**\n   * touchstart \n   * \n   */\n  function handleTouchStart(e: TouchEvent) {\n    const target = e.target as HTMLElement;\n\n    // \n    if (!target.closest?.('.acu-layout-horizontal .acu-panel-content')) {\n      return;\n    }\n\n    const touch = e.touches[0];\n    startX.value = touch.clientX;\n    startY.value = touch.clientY;\n  }\n\n  /**\n   * touchmove \n   * \n   */\n  function handleTouchMove(e: TouchEvent) {\n    const target = e.target as HTMLElement;\n\n    // \n    if (!target.closest?.('.acu-layout-horizontal .acu-panel-content')) {\n      return;\n    }\n\n    // \n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || (target as HTMLElement).isContentEditable) {\n      return;\n    }\n\n    // \n    // \n    let node: HTMLElement | null = target;\n    let shouldAllowScroll = false;\n\n    while (node && node.classList && !node.classList.contains('acu-panel-content')) {\n      // \n      if (node.scrollHeight > node.clientHeight) {\n        const style = window.getComputedStyle(node);\n        if (['auto', 'scroll'].includes(style.overflowY)) {\n          // \n          shouldAllowScroll = true;\n          break;\n        }\n      }\n      node = node.parentElement;\n    }\n\n    // \n    if (shouldAllowScroll) {\n      return;\n    }\n\n    // \n    const touch = e.touches[0];\n    const dx = touch.clientX - startX.value;\n    const dy = touch.clientY - startY.value;\n\n    // \n    // \n    if (Math.abs(dy) > Math.abs(dx)) {\n      if (e.cancelable) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  function install() {\n    const pDoc = window.parent?.document;\n    if (!pDoc) {\n      console.warn('[ACU]  document');\n      return;\n    }\n\n    // \n    touchStartHandler = handleTouchStart;\n    touchMoveHandler = handleTouchMove;\n\n    //  capture: true \n    //  passive: false  preventDefault\n    pDoc.addEventListener('touchstart', touchStartHandler, { capture: true, passive: false });\n    pDoc.addEventListener('touchmove', touchMoveHandler, { capture: true, passive: false });\n\n    console.info('[ACU] composable ');\n  }\n\n  /**\n   * \n   */\n  function uninstall() {\n    const pDoc = window.parent?.document;\n    if (!pDoc) return;\n\n    if (touchStartHandler) {\n      pDoc.removeEventListener('touchstart', touchStartHandler, { capture: true } as EventListenerOptions);\n      touchStartHandler = null;\n    }\n\n    if (touchMoveHandler) {\n      pDoc.removeEventListener('touchmove', touchMoveHandler, { capture: true } as EventListenerOptions);\n      touchMoveHandler = null;\n    }\n\n    console.info('[ACU] ');\n  }\n\n  // \n  onMounted(() => {\n    install();\n  });\n\n  onUnmounted(() => {\n    uninstall();\n  });\n\n  // \n  return {\n    install,\n    uninstall,\n  };\n}\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/* eslint-disable @typescript-eslint/ban-ts-comment */\n// @ts-nocheck\n/**\n * ACU  - Vue \n *\n *  iframe \n * Vue  document\n *\n *  API  Vue Composables\n *  App.vue  Tab \n */\n\nimport { polyfill } from 'mobile-drag-drop';\nimport 'mobile-drag-drop/default.css';\nimport { scrollBehaviourDragImageTranslateOverride } from 'mobile-drag-drop/scroll-behaviour';\nimport { createPinia } from 'pinia';\nimport { createApp, type App as VueApp } from 'vue';\nimport App from './App.vue';\nimport { getACUConfigManager } from './composables/useACUConfigManager';\nimport { cleanupSendIntercept, setupFocusTracking, setupSendIntercept } from './composables/useHiddenPrompt';\nimport { useDivinationStore } from './stores/useDivinationStore';\nimport { useUIStore } from './stores/useUIStore';\nimport { getCore } from './utils/index';\nimport { VERSION } from './version';\n\n//  polyfill\n//  HTML5  API \npolyfill({\n  //  300ms \n  holdToDrag: 300,\n  // \n  dragImageTranslateOverride: scrollBehaviourDragImageTranslateOverride,\n});\n\n// jQuery  -  jQuery \n(window as any).$ = (window.parent as any).$;\n\nconst SCRIPT_ID = 'acu-parent-container';\nconst MAX_DATA_RETRIES = 10;\n\n// \nconst LOCAL_KEYS = {\n  WIN_CONFIG: 'acu_win_config',\n  ACTIVE_TAB: 'acu_active_tab',\n  UI_COLLAPSE: 'acu_ui_collapse_state',\n} as const;\n\n/**\n *  6.4.1\n *\n *  Dashboard \n * \n * 1.  Tab\n * 2. \n *\n *  Vue  Pinia store \n */\nfunction checkAndResetCenteredMode(): void {\n  try {\n    const winConfigRaw = localStorage.getItem(LOCAL_KEYS.WIN_CONFIG);\n\n    // 1\n    if (!winConfigRaw) {\n      // \n      const defaultConfig = { width: 400, left: '50%', bottom: '50%', isCentered: true };\n      localStorage.setItem(LOCAL_KEYS.WIN_CONFIG, JSON.stringify(defaultConfig));\n      //  activeTab\n      localStorage.removeItem(LOCAL_KEYS.ACTIVE_TAB);\n      // \n      localStorage.setItem(LOCAL_KEYS.UI_COLLAPSE, 'false');\n      console.info('[ACU]  activeTab');\n      return;\n    }\n\n    // 2\n    const winConfig = JSON.parse(winConfigRaw);\n    if (winConfig?.isCentered === true) {\n      //  activeTab\n      localStorage.removeItem(LOCAL_KEYS.ACTIVE_TAB);\n      // \n      localStorage.setItem(LOCAL_KEYS.UI_COLLAPSE, 'false');\n      console.info('[ACU]  activeTab');\n    }\n  } catch (e) {\n    // \n    const defaultConfig = { width: 400, left: '50%', bottom: '50%', isCentered: true };\n    localStorage.setItem(LOCAL_KEYS.WIN_CONFIG, JSON.stringify(defaultConfig));\n    localStorage.removeItem(LOCAL_KEYS.ACTIVE_TAB);\n    localStorage.setItem(LOCAL_KEYS.UI_COLLAPSE, 'false');\n    console.warn('[ACU]  win_config :', e);\n  }\n}\n\n// Vue  ()\nlet vueApp: VueApp | null = null;\nlet mountContainer: HTMLElement | null = null;\n\n//  ID ()\nlet dbCheckTimerId: ReturnType<typeof setTimeout> | null = null;\n\n//  ()\nlet isShuttingDown = false;\n\n//  API \nlet isDatabaseReady = false;\n\n/**\n *  Vue \n */\nfunction initVueApp() {\n  const parentDoc = window.parent.document;\n\n  // \n  const existingRoot = parentDoc.getElementById(SCRIPT_ID);\n  if (existingRoot) {\n    console.warn('[ACU] Vue ');\n    return;\n  }\n\n  //  - ID  'acu-parent-container'\n  mountContainer = parentDoc.createElement('div');\n  mountContainer.id = SCRIPT_ID;\n  parentDoc.body.appendChild(mountContainer);\n\n  //  Pinia \n  const pinia = createPinia();\n\n  //  Vue \n  vueApp = createApp(App);\n  vueApp.use(pinia);\n\n  // \n  //  API  App.vue  composables\n  //  Vue  Tab \n  vueApp.mount(mountContainer);\n\n  console.info(`[ACU] Vue  (${SCRIPT_ID})`);\n}\n\n/**\n *  API  UI\n *\n *  Promise API  resolve\n */\nfunction waitForDatabaseApi(): Promise<void> {\n  return new Promise(resolve => {\n    let dataCheckRetries = 0;\n\n    const checkApi = () => {\n      // \n      if (isShuttingDown) {\n        console.info('[ACU]  API ');\n        return;\n      }\n\n      const { $, getDB } = getCore();\n      const api = getDB();\n\n      //  API  jQuery \n      if (api && typeof api.exportTableAsJson === 'function' && $) {\n        // \n        const data = api.exportTableAsJson();\n        const hasData = data && Object.keys(data).length > 0;\n\n        // \n        if (!hasData && dataCheckRetries < MAX_DATA_RETRIES) {\n          dataCheckRetries++;\n          console.info(`[ACU]  API ... (${dataCheckRetries}/${MAX_DATA_RETRIES})`);\n          dbCheckTimerId = setTimeout(checkApi, 1000);\n          return;\n        }\n\n        //  ID\n        dbCheckTimerId = null;\n        isDatabaseReady = true;\n        resolve();\n      } else {\n        // API \n        dbCheckTimerId = setTimeout(checkApi, 1000);\n      }\n    };\n\n    checkApi();\n  });\n}\n\n/**\n *  ACU\n *\n * \n * 1. extensionSettings \n * 2.  API  UI\n * 3.  Vue \n */\nfunction initACU() {\n  //  Vue \n  //  Pinia store  activeTab \n  checkAndResetCenteredMode();\n\n  // 1. extensionSettings \n  const configManager = getACUConfigManager();\n  configManager.loadConfig();\n  console.info('[ACU] ');\n\n  // 2.  API  UI\n  waitForDatabaseApi().then(() => {\n    console.info('[ACU]  API ');\n  });\n\n  // 3.  Vue \n  initVueApp();\n}\n\n/**\n *  Vue \n *\n *  API  Vue Composables\n *  Vue \n */\nfunction cleanup() {\n  console.info('[ACU] ...');\n\n  // \n  isShuttingDown = true;\n\n  // \n  if (dbCheckTimerId !== null) {\n    clearTimeout(dbCheckTimerId);\n    dbCheckTimerId = null;\n    console.info('[ACU] ');\n  }\n\n  //  Vue \n  // composables \n  if (vueApp) {\n    vueApp.unmount();\n    vueApp = null;\n    console.info('[ACU] Vue ');\n  }\n\n  // \n  if (mountContainer) {\n    mountContainer.remove();\n    mountContainer = null;\n    console.info('[ACU] ');\n  }\n\n  console.info('[ACU] ');\n}\n\n// ============================================================\n// \n// ============================================================\n\n$(() => {\n  console.info(`[ACU] v${VERSION} `);\n\n  // \n  replaceScriptButtons([{ name: ' ', visible: true }]);\n\n  // \n  eventOn(getButtonEvent(' '), () => {\n    //  Vue \n    if (!vueApp) {\n      console.warn('[ACU] Vue ');\n      return;\n    }\n\n    //  store \n    const uiStore = useUIStore();\n    const currentPrompt = (window as any).__acu_hidden_prompt || '';\n    uiStore.openPromptEditorDialog(currentPrompt);\n  });\n\n  //  AI \n  //  AI \n  //  'generation_started' 'js_generation_started' generate \n  eventOn('generation_started', () => {\n    if (!vueApp) return;\n\n    const divinationStore = useDivinationStore();\n    // \n    if (divinationStore.config.enableWordPool && divinationStore.config.autoSync) {\n      console.info('[ACU]  AI ...');\n      divinationStore.syncFromACU();\n    }\n  });\n\n  //  DOM \n  setTimeout(() => {\n    setupSendIntercept();\n    setupFocusTracking(); // \n  }, 500);\n\n  //  ACU +  +  Vue\n  errorCatched(initACU)();\n\n  //  ( pagehide  unload)\n  $(window).on('pagehide', () => {\n    console.info('[ACU] ');\n    //  DOM \n    cleanupSendIntercept();\n    cleanup();\n  });\n});\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","EXT_SETTINGS_KEY","LOCAL_KEYS","DATA_SNAPSHOT","CONFIG_CACHE","WINDOW_POSITION","BALL_POSITION","LOCAL_STATE","DEFAULT_LOCAL_STATE","windowPosition","x","y","width","isCentered","isCollapsed","isPinned","activeTab","layout","DEFAULT_CHAT_CONFIG","visibleTabs","tabOrder","tableHeights","tableStyles","reverseTables","cellLocks","DEFAULT_BUTTONS_CONFIG","visibleButtons","buttonOrder","buttonGroups","longPressDirectExec","DEFAULT_THEME_CONFIG","presets","activePresetId","themeVars","themeVarOpacities","highlight","manualColor","manualHex","aiColor","aiHex","titleColor","titleHex","backgroundConfig","customCSS","DEFAULT_DIVINATION_CONFIG","config","enabled","drawCount","enableBias","autoSync","cardBackImage","themeColor","themeId","flipMode","peepMode","dimensions","customTemplate","enableWordDrawing","enableTableWords","enableWordPool","wordDrawMode","wordsPerItem","tablePoolConfig","categoryConfig","tableSyncConfig","DEFAULT_BALL_CONFIG","appearance","type","size","notifyAnimation","borderColor","borderOpacity","bgColor","bgOpacity","imageInvert","customFonts","DEFAULT_CONFIG","version","lastUpdated","Date","now","tabs","buttons","theme","ui","dashboard","widgets","columns","showStats","tagLibrary","categories","tags","divination","ball","chats","_instance","getACUConfigManager","isLoaded","ref","reactive","localState","deepMergeConfig","stored","async","saveConfig","SillyTavern","extensionSettings","saveSettingsDebounced","cacheToLocal","e","console","error","loadLocalState","localStorage","getItem","Object","assign","parse","saveLocalState","setItem","restoreFromCache","cached","merged","loadConfig","warn","info","value","getChatConfig","chatId","setChatConfig","chatConfig","exportAllConfigs","exportVersion","exportTime","importConfigs","jsonString","success","message","resetToDefault","useACUConfigManager","STORE_NAME","dbInstance","urlCache","Map","useAvatarManager","isReady","initDB","Promise","resolve","reject","request","indexedDB","open","onerror","errMsg","onsuccess","result","onclose","event","target","onupgradeneeded","db","objectStoreNames","contains","createObjectStore","keyPath","saveAvatar","record","store","transaction","objectStore","has","name","URL","revokeObjectURL","get","delete","updatedAt","put","getAvatar","getAllAvatars","getAll","getSillyTavernUserAvatar","w","window","parent","$","jQuery","$userMes","last","find","attr","src","includes","$avatar","first","ST","getContext","ctx","userAvatar","getPlayerNameFromTable","api","AutoCardUpdaterAPI","exportTableAsJson","rawData","key","sheet","isPlayerNode","playerPatterns","lowerName","toLowerCase","pattern","playerName","resolvePrimaryName","all","aliases","deleteAvatar","deleteAvatars","names","tx","completed","total","hasAvatar","getKey","getStats","items","totalSizeBytes","reduce","sum","blob","count","totalSizeMB","toFixed","clearAll","forEach","url","clear","getAvatarUrl","createObjectURL","set","primaryName","stAvatar","getAvatarDisplayConfig","offsetX","offsetY","scale","getSillyTavernCharacterAvatar","$aiMes","characterAvatar","addAlias","alias","removeAlias","filter","a","getAliasMap","getAliases","setAliases","getDisplayLabel","setDisplayLabel","_name","_labelIndices","getDisplayChars","Intl","Segmenter","segmenter","granularity","Array","from","segment","s","cleanup","GLOBAL_THEME_BG_KEY","saveBackground","imageData","mimeType","timestamp","loadBackground","blobUrl","deleteBackground","fileToBlob","file","urlToBlob","startsWith","response","fetch","mode","ok","Error","status","revokeBlobUrl","PRIMARY_KEYS","getCurrentChatId","persistedLocks","pendingLocks","currentChatId","useCellLock","configManager","loadLocks","saveLocks","findRowIndexByKey","_tableName","rowKey","headers","parsed","idx","parseInt","substring","Number","isFinite","index","eqIdx","indexOf","field","parseRowKey","colIdx","String","syncToDatabase","locks","getDB","setTableLockState","tableData","sheetKey","tableName","tableLocks","keys","clearTableLocks","rowIndices","cellKeys","lock","entries","rowIndex","_fullRow","fieldName","_fields","colIndex","rows","cols","cells","getRowKey","row","pkField","fieldIndex","rebuildRow","fields","_snapshot","fill","pendingLockCount","computed","values","initPendingLocks","toggleCellLock","newLocks","log","countLocks","toggleRowLock","snapshot","h","savePendingLocks","discardPendingLocks","isCellLockedPending","isRowLockedPending","getLockedFieldsPending","hasRowAnyLockPending","isCellLocked","isRowLocked","applyLocks","tableContent","modified","restored","rowIndexMap","newRow","updateLockedValue","newValue","updated","DEFAULT_LUCK_TIERS","weight","color","prompt","autoIncrement","createIndex","unique","addSnapshot","add","deleteSnapshot","top","chat","firstMsg","chat_id","makeRowKey","areCellsEqual","b","keysA","keysB","useRowHistory","isLoading","saveSnapshot","source","sorted","sort","toDelete","slice","MAX_SNAPSHOTS_PER_ROW","getSnapshots","snapshots","snapshotToTableRow","templateRow","cell","tableRowToCells","getDiff","oldSnapshot","newCells","changedCols","Set","formatRelativeTime","diff","Math","floor","toLocaleDateString","month","day","hour","minute","clearCurrentChatHistory","openCursor","IDBKeyRange","only","deletedCount","cursor","continue","oncomplete","latest","indexColumnName","checkEmptyCell","checkIndexGap","emptyCheckColumns","isSummaryOrOutlineTable","extractNumber","str","trim","match","extractTableNameFromKey","rowMatch","cellMatch","extractRowIndexFromKey","checkTableIntegrity","sheetId","snapshotSheet","aiChangedRows","issues","hasIssues","isArray","snapshotRowCount","currentRowCount","newRowStartContentIndex","newRowEndContentIndex","indexColIdx","findIndex","lastSnapshotIndex","contentRowIndex","headerName","cellValue","issueType","description","currentValue","currentIndex","expectedValue","prevContentRowIndex","prevIndex","useTableIntegrityCheck","mergedConfig","issuesByTable","allIssues","problematicTables","tables","issueStats","emptyCount","gapCount","issue","emptyCell","indexGap","checkIntegrity","aiDiffMap","newIssuesMap","tableAiRows","snapSheetId","hasTableIssues","getTableIssues","clearIssues","getSummaryText","stats","parts","state","visible","timer","show","duration","clearTimeout","setTimeout","hide","warning","useToast","toast","getTableDisplayName","tableId","detectWordPoolTables","wordPoolTables","replace","displayName","nameMatch","some","keyword","idMatch","getWordPoolTableContent","drawFromLatestRowWithConfig","tableConfig","tableWords","cfg","latestRow","words","trimmed","min","shuffled","shuffleArray","remaining","limit","maxFromThisTable","allWords","array","j","random","DEFAULT_BALL_APPEARANCE","enableNotifyAnimation","NAV_BUTTONS","icon","label","fontFamily","cardWidth","fontSize","itemsPerPage","highlightNew","highlightColor","highlightManualColor","highlightAiColor","customTitleColor","limitLongText","showDashboard","showPagination","lockPanel","purgeConfirmation","gridColumns","autoSave","autoSaveDelay","clearTableOnSwipe","collapseTabBar","showCollapseTabButton","mobileSafeAreaBottom","autoImportInteractions","enableIOSInputFix","THEMES","FONTS","val","HIGHLIGHT_COLORS","orange","main","bg","red","blue","green","purple","teal","pink","lime","indigo","cyan","brown","grey","useConfigStore","defineStore","klona","visibleButtonsRef","buttonOrderRef","buttonGroupsRef","longPressDirectExecRef","isInitializing","saveButtonsConfig","watch","deep","fontFamilyValue","font","f","hexToColorObj","hex","normalizedHex","r","g","highlightColorObj","highlightManualColorObj","customHighlightManualHex","colorKey","highlightAiColorObj","customHighlightAiHex","titleColorObj","customTitleHex","gridColumnsCss","sortedVisibleButtons","order","hiddenButtons","usedSecondaries","secondaryId","Boolean","btn","hidden","hasHiddenButtons","buttonsConfig","updateConfig","updates","resetConfig","setTheme","setFontFamily","fontId","setLayout","setHighlightColor","setHighlightManualColor","setHighlightAiColor","setTitleColor","toggleHighlightNew","toggleCustomTitleColor","toggleShowDashboard","toggleShowPagination","toggleLockPanel","toggleLimitLongText","setVisibleButtons","setButtonOrder","isButtonVisible","buttonId","toggleButtonVisibility","current","splice","getButtonConfig","setButtonGroups","groups","addButtonGroup","primaryId","removeButtonGroupSecondary","getSecondaryButtonId","group","isSecondaryButton","toggleLongPressDirectExec","setLongPressDirectExec","resetButtonConfig","useBallAppearanceStore","isBallInitializing","fontImportUrls","importUrl","allFonts","hexToRgba","opacity","exec","cssVariables","app","updateAppearance","setIcon","setSize","max","setBorderColor","setBgColor","setNotifyAnimation","animation","setEnableNotifyAnimation","resetAppearance","setAppearance","newAppearance","addFont","newFont","removeFont","DEFAULT_DASHBOARD_CONFIG","hasInitializedDefaults","useDashboardStore","isInitialized","isDashboardConfigInitializing","enabledWidgets","allWidgets","applyDefaultsToEmptyWidgets","hasChanges","widget","hasTags","widgetTagConfig","displayedTagIds","hasCategories","displayedCategoryIds","template","searchText","title","keywords","ensureDefaultWidgets","allowSave","storedConfig","addSpecialWidget","randomTables","matchRules","task","templateKey","global","tableInfo","rule","addWidget","defaultActions","actions","lowerSearchText","displayStyle","newWidget","substr","displayColumns","maxRows","colSpan","updateWidget","widgetId","widgetType","specialConfig","updateStatus","optionsPanel","randomWordPool","loadConfigFromManager","loadedExistingConfig","removeWidget","toggleWidget","moveWidget","newOrder","setWidgetActions","findWidgetByTableId","hasWidget","hasSpecialWidget","removeSpecialWidget","getWidgetById","cleanupInvalidWidgets","existingTableIds","validIdsSet","SNAPSHOT_KEY","normalizeValue","strValue","useDataStore","stagedData","lastSavedData","manualDiffMap","diffMap","pendingDeletes","isSaving","targetFloorInfo","integrityChecker","integrityIssues","hasIntegrityIssues","integrityStats","hasPendingDeletes","hasUnsavedChanges","hasUndoData","loadSnapshot","clearSnapshot","removeItem","getCellKey","getSillyTavern","getSnapshotCellValue","syncToStagedData","tableRows","newContent","rowData","clearChanges","clearDeletes","processToTableData","rowIdx","filterDeletedRows","realIdx","writeToFloor","floorIndex","targetMsg","finalKey","TavernDB_ACU_IsolatedData","existingKeys","independentData","modifiedKeys","updateGroupKeys","tagData","sheetsToSave","syncWorldbook","syncWorldbookEntries","createIfNeeded","syncErr","saveChatDebounced","saveChat","toggleDelete","extractTableIdFromKey","split","tableNameParts","test","getTableIdByName","getCellChangeType","cellId","getRowChangeType","colCount","hasManual","hasAi","c","cellKey","getModifiedTableIds","tableNames","tableIds","getStagedData","loadFromDatabase","clonedData","processed","acc","setStagedData","cloned","generateDiffMap","currentData","snapData","currentSheet","snapSheet","currentRow","snapRow","realRowIdx","maxCols","saveToDatabase","savedToFloor","dataToSave","filteredData","targetFloor","msg","is_user","isAuto","reason","findTargetFloor","saveToFloor","purgeFloorRange","startFloor","endFloor","maxIdx","safeStartFloor","safeEndFloor","isNaN","keysToDelete","purgedCount","messageModified","prototype","hasOwnProperty","call","latestData","insertRow","afterIndex","updateCell","options","oldValue","skipHistory","chat_metadata","rowBeforeEdit","then","catch","err","every","_","toggleDeleteRow","markForDelete","unmarkForDelete","hasTableAiChanges","getTablesWithAiChanges","tablesSet","isRowChanged","isRowPendingDelete","isPendingDelete","isCellChanged","saveLastState","currentSnapshot","undoToLastSave","restoredData","newDiffKeys","restoredSheet","restoredRow","clearUndoCache","getUndoData","getIntegritySummary","clearIntegrityIssues","WORLDBOOK_NAME","DEFAULT_LUCK_DIMENSION","tiers","DEFAULT_SANITY_DIMENSION","DEFAULT_MISUNDERSTANDING_DIMENSION","tableColumnConfig","useDivinationStore","loadStoredConfig","isFirstWatch","createPreset","preset","createdAt","toISOString","newPresets","parseEntryName","entryName","bias","biasStr","loadFromWorldbook","getWorldbook","entry","uid","path","strategy","rawEntry","weightedRandom","weights","totalWeight","syncFromACU","syncConfig","table","newEntriesMap","header","headerStr","categoryName","entryKey","cellVal","word","existingEntries","finalEntries","fullEntryName","existingEntry","existingWords","mergedWords","mergedKeys","keys_secondary","logic","scan_depth","position","role","depth","probability","recursion","prevent_incoming","prevent_outgoing","delay_until","effect","sticky","cooldown","delay","newEntryNames","orphanEntries","createOrReplaceWorldbook","render","performDivination","dimensionResults","selectedLuck","dim","tierWeights","t","selectedTier","dimension","tier","drawnWords","remainingCount","poolWords","maxCount","cats","enabledCats","catConfig","cat","maxFromThisCat","catWeights","luckTier","luckId","getWeight","selectedCat","drawFromWorldbookWithConfig","luckResult","otherDimensions","luck","addDimension","newConfig","updateDimension","removeDimension","uploadCardBack","compressed","updateCategory","category","allEntries","entryIndex","saveCurrentToPreset","currentPresets","existingIndex","p","existing","deletePreset","presetId","applyPreset","restoreDefaultDimensions","migrateDimensionsToPreset","targetPresetId","targetIndex","d","newDim","FACTION_COLOR_PALETTE","border","background","DEFAULT_FACTION_STYLE","DEFAULT_NODE_STYLE","borderWidth","backgroundColor","shape","DEFAULT_LEGEND_CONFIG","emoji","DEFAULT_GRAPH_CONFIG","nodeSize","edgeWidth","relationLabelFontSize","nameLabelFontSize","factionLabelFontSize","showLegend","showBackground","factionColors","factionAvatars","nodeOverrides","legendConfig","useGraphConfigStore","graphConfig","immediate","isGraphConfigInitializing","initChatId","_chatId","refresh","setFactionColor","factionName","colorConfig","getFactionColor","existingFactions","useDefault","colorIndex","hasFactionColor","initFactionColors","factionNames","newColors","setFactionAvatar","avatarConfig","getFactionAvatar","removeFactionAvatar","newAvatars","hasFactionAvatar","getAllFactionAvatars","setFactionOverride","factionId","override","getFactionOverride","removeFactionOverride","setNodeStyleOverride","nodeId","getNodeStyleOverride","removeNodeStyleOverride","newOverrides","hasNodeStyleOverride","setLegendEnabled","setLegendPosition","addLegendItem","newItem","updateLegendItem","removeLegendItem","getLegendConfig","resetLegendConfig","matchLegendColor","relationWord","kw","setShowBackground","DEFAULT_LIBRARY","categoryId","promptTemplate","allowPreEdit","generateId","prefix","useTagLibraryStore","library","getInitialLibrary","activeCategoryId","searchKeyword","isTagLibraryInitializing","currentMode","selectedTagIds","selectedCategoryIds","selectionType","saveLibrary","addCategory","parentPath","parentCategory","newCategory","getCategoryById","filteredTags","tag","currentCategory","validCategoryIds","pathPrefix","getTime","createTag","newTag","moveTagsToCategory","tagIds","idsSet","clearSelection","totalTags","totalCategories","uncategorizedCount","loadLibrary","deleteCategory","categoryIdsToDelete","getCategoryByPath","getChildCategories","getCategoryTagCount","categoryIds","upsertTag","deleteTag","tagId","deleteTags","getTagById","getTagsByCategory","moveTagToCategory","setMode","toggleTagSelection","toggleCategorySelection","migrateSelectedTags","targetCategoryId","migrateSelectedCategories","targetParentPath","migrateSelectedItems","targetCategory","targetPath","oldPath","newPath","childCat","childNewPath","exportLibrary","scope","categoriesToExport","tagsToExport","exportedAt","importLibrary","addedCategories","addedTags","updatedTags","renamedTags","pathToCategoryId","importCat","importTag","existingTag","conflictStrategy","newLabel","suffix","selectCategory","resetSelection","DEFAULT_HIGHLIGHT_CONFIG","hexToBgRgba","alpha","getColorValue","customHex","useThemeStore","currentThemeVars","currentThemeVarOpacities","currentHighlight","isThemeInitializing","syncToConfigManager","configStore","baseTheme","manualHighlightColor","aiHighlightColor","titleBgColor","activePreset","syncFromConfigStore","syncToConfigStore","ballStore","ballAppearance","copyBackgroundToPreset","imageUrl","isApplyingPreset","updatePreset","getInjectedStyles","styles","cssVar","rgbaValue","blur","css","loadFromStorage","force","activeId","bgConfig","hasIndexedDBImage","saveToStorage","newBgConfig","bgKey","externalUrl","renamePreset","newName","setManualHighlightColor","setAiHighlightColor","setThemeVar","removeThemeVar","newVars","clearThemeVars","setThemeVarOpacity","removeThemeVarOpacity","newOpacities","clearThemeVarOpacities","setBackgroundConfig","getBackgroundConfig","setCustomCSS","clearCustomCSS","getFullInjectedCSS","STORAGE_KEYS","TAB_DASHBOARD","TAB_OPTIONS","TAB_RELATIONSHIP_GRAPH","getSmartTabIcon","useUIStore","tableOrder","chatConfigRef","visibleTabsRef","tabOrderRef","loadChatConfig","isChatConfigInitializing","ballPosition","innerHeight","currentPage","searchTerm","scrollTop","isEditingOrder","isContentHidden","isMobile","isLockEditMode","showLockedOnly","initialSettingsPanel","rowEditDialog","props","currentRowData","widgetSettingsDialog","widgetConfig","tableHeaders","dashboardHistoryDialog","titleColIndex","avatarCropDialog","initialOffsetX","initialOffsetY","initialScale","initialInvert","showInvertOption","avatarCropOnApply","shallowRef","avatarCropOnUpload","widgetActionsDialog","currentActions","avatarManagerDialog","nodes","factions","avatarManagerOnUpdate","avatarManagerOnLabelChange","nodeConfigDialog","fullName","currentLabel","selectedIndices","nodeConfigOnConfirm","nodeConfigOnResetToFullName","nodeConfigOnStyleUpdate","nodeLabelDialog","initialIndices","nodeLabelOnApply","nodeLabelOnReset","closeNodeLabelDialog","graphSettingsDialog","factionSettingsDialog","settingsDialog","directorDialog","inputFloorDialog","currentFloor","purgeRangeDialog","maxFloor","advancedPurgeDialog","initialStartFloor","initialEndFloor","selectedTableKeys","advancedPurgeOnConfirm","manualUpdateDialog","historyDialog","tabsPopup","addTableDialog","addTableOnConfirm","presetSaveDialog","presetType","summaryItems","initialName","presetSaveOnSave","categorySelectDialog","rowContext","tagPreEditDialog","tagLabel","resolvedPrompt","showCompanions","tagManagerDialog","tagManagerOnSave","iconSelectDialog","currentIcon","iconSelectOnSelect","closeIconSelectDialog","tagPreviewMode","tagPreviewTooltip","divinationOverlay","isQuickRerollMode","promptEditorDialog","isPanelVisible","isDashboardActive","isOptionsActive","currentSearchTerm","isHorizontalLayout","getSortedTabIds","allTabIds","closeAvatarCropDialog","closeNodeConfigDialog","openSettingsDialog","panel","closeAdvancedPurgeDialog","closePresetSaveDialog","closeAddTableDialog","closeTagManagerDialog","aiNotifySignal","isAiGenerating","reverseOrderTables","toggleCollapse","togglePin","setActiveTab","tabName","setTableOrder","setTableHeight","height","resetTableHeight","heights","getTableHeight","setTableStyle","style","getTableStyle","toggleTableReverse","isTableReversed","setCurrentPage","page","setSearchTerm","term","saveScrollTop","enterEditingOrder","exitEditingOrder","setEditingOrder","setMobile","newLayout","toggleLayout","closePanel","openPanel","setInitialized","updateSaveBtnState","$btn","document","addClass","removeClass","autoFitPanelHeight","$panel","currentTab","contentHeight","scrollHeight","maxHeight","newHeight","saveBallPosition","getBallPosition","resetBallPosition","parentHeight","setVisibleTabs","isTabVisible","tabNameOrId","toggleTabVisibility","tabId","resetVisibleTabs","setTabOrder","moveTab","newIndex","currentOrder","showTab","hideTab","resetTabConfig","syncNewTablesToVisibleTabs","allTableNames","newTabNames","openRowEditDialog","closeRowEditDialog","openWidgetSettingsDialog","closeWidgetSettingsDialog","openDashboardHistoryDialog","closeDashboardHistoryDialog","switchFromRowEditToHistory","openAvatarCropDialog","callbacks","onApply","onUpload","handleAvatarCropApply","handleAvatarCropUpload","openWidgetActionsDialog","closeWidgetActionsDialog","openAvatarManagerDialog","onUpdate","onLabelChange","closeAvatarManagerDialog","handleAvatarManagerUpdate","handleAvatarManagerLabelChange","openNodeConfigDialog","onConfirm","onResetToFullName","onStyleUpdate","handleNodeConfigConfirm","displayLabel","handleNodeConfigResetToFullName","handleNodeConfigStyleUpdate","openNodeLabelDialog","onReset","handleNodeLabelApply","handleNodeLabelReset","openGraphSettingsDialog","closeGraphSettingsDialog","openFactionSettingsDialog","closeFactionSettingsDialog","closeSettingsDialog","openDirectorDialog","closeDirectorDialog","openInputFloorDialog","closeInputFloorDialog","openPurgeRangeDialog","closePurgeRangeDialog","openAdvancedPurgeDialog","initialState","handleAdvancedPurgeConfirm","openManualUpdateDialog","closeManualUpdateDialog","openHistoryDialog","closeHistoryDialog","openTabsPopup","closeTabsPopup","toggleTabsPopup","openPresetSaveDialog","onSave","handlePresetSave","openAddTableDialog","handleAddTableConfirm","openCategorySelectDialog","closeCategorySelectDialog","openTagPreEditDialog","closeTagPreEditDialog","openTagManagerDialog","handleTagManagerSave","openIconSelectDialog","onSelect","handleIconSelect","openDivinationOverlay","isQuickReroll","closeDivinationOverlay","openPromptEditorDialog","closePromptEditorDialog","initDivinationSystem","divinationStore","openDivinationSettingsDialog","triggerAiNotify","setAiGenerating","toggleTagPreviewMode","showTagPreviewTooltip","hideTagPreviewTooltip","DEFAULT_BACKGROUND_CONFIG","THEME_VAR_CSS_MAP","bgNav","bgPanel","cardBg","tableHead","tableHover","badgeBg","inputBg","menuBg","overlayBg","textMain","textSub","menuText","btnBg","btnHover","btnActiveBg","btnActiveText","shadow","THEME_VAR_GROUPS","vars","DISPLAY_STYLE_OPTIONS","WIDGET_ACTIONS","goToTable","tooltip","undo","manualUpdate","relationshipGraph","settings","nativeEdit","quickReroll","secondaryIcon","WIDGET_TEMPLATES","character","location","TABLE_KEYWORD_RULES","fileToBase64","reader","FileReader","readAsDataURL","onload","compressImage","maxWidth","quality","img","Image","canvas","createElement","drawImage","toDataURL","RELATION_TYPES","level","COMPLEX_RELATION","matchesType","getRelationColor","relationWords","customLegendItems","typeName","isComplex","matchedLevels","hasPositive","l","hasNegative","priority","getRelationLegend","emojiMap","S","A","B","C","D","E","isDashed","shouldUseDashedLine","note","relation","text","cleanRelationText","SEGMENT_SEPARATORS","ITEM_SEPARATORS","COLON_PATTERN","getCellValue","resolveAlias","aliasMap","findColumnIndex","possibleNames","lowerHeaders","isCharacterTable","isEnglishName","getDefaultLabel","firstName","parseRelationshipTable","relationshipTable","characterTables","factionTable","warnings","edges","nodeIds","elements","nodeCount","edgeCount","sourceIdx","targetIdx","relationIdx","noteIdx","protagonistNames","characterNames","isProtagonist","nameIdx","addNode","nodeType","getNodeType","defaultLabel","classes","rawSource","rawTarget","colorResult","lineStyle","parseAttributeTableToElements","edgeIndex","knownNames","validTargets","edgeCache","nameColKeywords","relationColIdx","relationColKeywords","rawSourceName","relationText","sourceName","parsedRelations","results","segments","cleanSegment","bracketMatch","multiTargetMatch","target1","target2","relations","cleanedRelation","targets","commaMultiTargetMatch","targetsText","relationsText","singleTargetMatch","withMatch","hasValidRelation","colonMatch","RegExp","part1","part2","isReversed","containsKnownName","part1Known","part2Known","parseEmbeddedRelationship","edgeKey","useDashed","notes","priorityOrder","currentPriority","processedPairs","pairKey","reverseKey","reverseEdge","isBidirectional","bidirectional","findFactionTableInternal","allTables","factionKeywords","extractFactionMapping","factionList","extractFactionList","characterToFaction","factionColKeywords","factionIdx","charName","factionValue","sortedFactions","faction","extractCharacterFactions","factionRelations","el","parseEmbeddedRelationships","protagonistTables","otherTables","protagonistResult","otherResult","nodesMap","addElements","newEdge","getCore","getTableData","processJsonData","getBadgeStyle","parseOptionItems","optionColIndices","isMatrix","isMatrixMode","commonTags","cellText","currentHeaderTag","allTags","isOptionTable","__esModule","default","locals","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","CHAT_VAR_GRAPH_CONFIG","__name","initialLayout","emits","setup","__props","expose","__expose","emit","__emit","uiStore","graphConfigStore","themeStore","avatarManager","avatarCache","currentBackgroundUrl","containerRef","cy","isSearchMode","searchInputRef","focusedNodeId","hiddenInColaBeforeSearch","layoutMode","getGraphConfig","lastLayout","centerNodeId","getVariables","positions","layoutPositions","fcose","saveGraphConfig","insertOrAssignVariables","getSavedPositions","targetLayout","getCssVar","varName","fallback","parentDoc","wrapper","querySelector","getComputedStyle","getPropertyValue","documentElement","getThemeColors","preloadCanvasFont","fontName","fonts","load","legend","backgroundStyle","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","transform","transformOrigin","left","zIndex","pointerEvents","parsedData","characterTablesCount","characterTablesNames","aliasMapSize","customLegendEnabled","embeddedResult","hasData","currentFactions","handleBackToDashboard","getLayoutConfig","randomize","animate","animationDuration","fit","padding","nodeSeparation","idealEdgeLength","edgeElasticity","nestingFactor","gravity","numIter","nodeRepulsion","tilingPaddingVertical","tilingPaddingHorizontal","concentric","node","levelWidth","minNodeSpacing","initCytoscape","colors","savedPositions","savedCount","currentNodeCount","hasPositions","elementsWithData","avatarData","nodeShape","nodeBorderWidth","defaultBorderColor","nodeBorderColor","avatarUrl","avatarOffsetX","avatarOffsetY","avatarScale","container","selector","len","ratio","round","display","userZoomingEnabled","userPanningEnabled","boxSelectionEnabled","minZoom","maxZoom","wheelSensitivity","on","evt","focusOnNode","run","setCenterNode","hasClass","nodeConfig","getLabelConfig","chars","getDefaultIndices","handleNodeStyleUpdate","openNodeConfig","edge","debouncedSaveNodePositions","saveNodePositions","applyLabelConfig","setupFactionContainers","applyAllFactionStyles","applyAllConfigs","nodeHtmlLabel","query","halign","valign","halignBox","valignBox","tpl","nameFontSize","borderRadius","clipPath","contentSize","updateGraph","remove","toggleSearchMode","focus","handleClearFocus","handleSearchInput","matchedNode","targetNode","getElementById","batch","focusedNodes","neighborhood","n","focusedEdges","connectedEdges","parentContainerIds","containerId","containerNode","sourceId","targetId","focusedEles","not","eles","eleId","ele","fitToView","duplicateNode","hasMember","factionColor","move","factionEdgeIndex","rel","reverseRel","update","previousLayout","is","targetLayoutData","hasSavedPositions","firstNodeId","firstSavedPos","hasRestored","restoredCount","savedPos","beforePos","afterPos","restoreNodePositions","allZero","pos","firstPos","clearSavedPositions","currentLayout","layoutConfig","one","labels","saveLabelConfig","labelConfig","defaultSize","newSize","newBorderWidth","newBorderColor","newShape","trigger","applyAllNodeStyleOverrides","overrideEntries","factionContainers","factionConfig","styleObj","defaultOpacity","parseFloat","extractOpacityFromRgba","labelPosition","labelPositionToTextValign","labelPositionToTextHalign","labelFontSize","avatarManagerNodes","factionListForAvatar","openGraphSettings","newVisible","updateGraphStyles","edgeElements","edgeData","edgeId","bgLoadRequestId","loadAliasMap","preloadAvatars","cache","nodeName","displayConfig","handleAvatarUpdate","removeData","handleLabelChange","newUrl","requestId","loadBackgroundImage","updateNodeColors","baseStyles","onMounted","onBeforeUnmount","destroy","zoomIn","zoom","zoomOut","openAvatarManager","_ctx","_cache","dashed","ref_key","SearchBox","modelValue","$event","placeholder","autofocus","onSearch","onClear","active","onClick","resultCount","debounce","showResultCount","inputRef","isFocused","debouncedSearch","handleClear","handleEnter","selectAll","select","focused","onFocus","onBlur","onKeydown","sfc","__vccOpts","listToStyles","parentId","newStyles","part","sourceMap","hasDocument","DEBUG","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","ssrIdKey","isOldIE","navigator","userAgent","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","addStyle","createStyleElement","styleElement","appendChild","obj","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","replacement","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","firstChild","__webpack_require__","__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_klona_esm_74666e88__","__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__","Vue","defaultWindow","defaultNavigator","unrefElement","elRef","_a","plain","toValue","$el","useEventListener","args","cleanups","fn","firstParamTargets","stopWatch","_b","unref","raw_targets","raw_events","raw_listeners","raw_options","optionsClone","flatMap","listener","addEventListener","removeEventListener","register","flush","_iOSWorkaround","onClickOutside","handler","ignore","capture","detectIframe","controls","stop","cancel","listenerOptions","passive","body","children","shouldListen","shouldIgnore","querySelectorAll","composedPath","Element","vm","subTree","shapeFlag","hasMultipleRoots","child","checkMultipleRoots","detail","isProcessingClick","activeElement","tagName","useSupported","callback","isMounted","instance","getCurrentInstance","useMounted","Symbol","usePermission","permissionDesc","isSupported","permissionStatus","desc","permissions","toRaw","useClipboard","read","copiedDuring","legacy","isClipboardApiSupported","permissionRead","permissionWrite","copied","timeout","isAllowed","useLegacy","clipboard","readText","_c","getSelection","copy","writeText","ta","execCommand","legacyCopy","start","_global","globalThis","self","globalKey","handlers","getHandlers","getSSRHandler","guessSerializerType","rawInit","StorageSerializers","boolean","v","write","object","number","any","string","date","customStorageEventName","useStorage","defaults","storage","listenToStorageChanges","writeDefaults","mergeDefaults","shallow","eventFilter","onError","initOnMounted","keyComputed","_a2","serializer","pause","pauseWatch","resume","resumeWatch","dispatchWriteEvent","serialized","firstMounted","onStorageCustomEvent","ev","payload","storageArea","dispatchEvent","Storage","StorageEvent","CustomEvent","serializedData","rawValue","nextTick","useDraggable","pointerTypes","preventDefault","stopPropagation","exact","onMove","onEnd","onStart","initialValue","axis","draggingElement","containerElement","handle","draggingHandle","pressedDelta","filterEvent","pointerType","handleEvent","button","disabled","containerRect","getBoundingClientRect","targetRect","clientX","scrollLeft","clientY","scrollWidth","end","isDragging","useResizeObserver","observerOptions","observer","disconnect","_targets","els","ResizeObserver","_el","observe","useTextSelection","selection","ranges","rangeCount","getRangeAt","getRangesFromSelection","rects","range","useTextareaAutosize","textarea","element","input","styleProp","textareaScrollHeight","textareaOldWidth","triggerResize","_styleTarget","styleTarget","onResize","contentRect","requestAnimationFrame","tryRequestAnimationFrame","POSITIVE_INFINITY","_TransitionPresets","easeInSine","easeOutSine","easeInOutSine","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInBack","easeOutBack","easeInOutBack","useVirtualList","containerStyle","wrapperProps","scrollTo","calculateRange","currentList","resources","useVirtualListResources","overflowY","itemHeight","overscan","getViewCapacity","createGetViewCapacity","getOffset","createGetOffset","createCalculateRange","getDistanceTop","createGetDistance","offsetTop","totalHeight","createComputedTotalSize","useWatchForSizes","createScrollTo","marginTop","useVerticalVirtualList","overflowX","itemWidth","getDistanceLeft","offsetLeft","totalWidth","marginLeft","useHorizontalVirtualList","containerProps","onScroll","initialSize","box","isSVG","namespaceURI","stop1","boxSize","borderBoxSize","contentBoxSize","devicePixelContentBoxSize","$elem","rect","formatBoxSize","inlineSize","blockSize","offsetWidth","offsetHeight","stop2","useElementSize","itemSize","containerSize","ceil","capacity","scrollDirection","offset","viewCapacity","clientHeight","clientWidth","to","scrollToDictionaryForElementScrollKey","horizontal","vertical","getDistance","tryOnScopeDispose","getCurrentScope","onScopeDispose","isClient","WorkerGlobalScope","isObject","isIOS","getIsIOS","maxTouchPoints","toRef","readonly","customRef","createFilterWrapper","apply","thisArg","bypassFilter","invoke","debounceFilter","ms","maxTimer","lastRejector","_clearTimeout","timer2","lastInvoker","maxDuration","maxWait","rejectOnCancel","identity","arg","createSingletonPromise","_promise","reset","_prev","toArray","cacheStringFunction","create","hyphenateRE","camelizeRE","toUpperCase","getLifeCycleTarget","useDebounceFn","watchWithFilter","cb","watchOptions","watchPausable","isActive","extendFilter","pausableFilter","toRefs","objectRef","isRef","replaceRef","newObject","setPrototypeOf","getPrototypeOf","tryOnMounted","sync","useTimeoutFn","interval","immediateCallback","isPending","shallowReadonly","watchDebounced","watchImmediate","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","getter","definition","o","defineProperty","enumerable","prop","toStringTag","STYLE_ID_PREFIX","DYNAMIC_FONT_ID","THEME_CUSTOM_ID","useParentStyleInjection","getParentDoc","scriptId","getScriptId","baseStyleEl","dynamicStyleEl","fontStyleEl","themeCustomStyleEl","FONT_IMPORT_URLS","hanchan","maple","huiwen","cooper","yffyt","fusion","wenkai","notosans","zhuque","loadedFonts","injectFontStyles","styleId","styleEl","getFontFamilyValue","textContent","updateDynamicVariables","dynamicCSS","bigint","hexToRgb","updateThemeCustomStyles","applyTheme","targetTheme","classList","applyLayout","applyFont","targetFontId","linkId","link","href","loadFont","init","injectBaseStyles","createDynamicStyleElement","createThemeCustomStyleElement","newFontId","onUnmounted","applyAllStyles","findDatabaseSettingsKey","direct80","direct70","readFromLocalStorage","raw","writeToLocalStorage","useDbSettings","saveSettings","newSettings","mergedSettings","updateSettings","executeManualUpdate","triggerUpdate","loadSettings","localSettings","updateSetting","getTableList","isSummaryOrOutline","executeWithPreset","presetSettings","targetTableNames","silent","autoUpdateThreshold","updateBatchSize","skipUpdateFloors","autoUpdateFrequency","extractVersionNumber","findHighestVersionKey","matchedKeys","dbConfigCache","checkIsSummaryOrOutline","getLastUpdatedPosition","isSummary","currentIsolationKey","dataIsolationEnabled","dataIsolationCode","wasUpdated","isolatedData","msgIdentity","TavernDB_ACU_Identity","isLegacyMatch","TavernDB_ACU_ModifiedKeys","TavernDB_ACU_UpdateGroupKeys","TavernDB_ACU_IndependentData","TavernDB_ACU_SummaryData","TavernDB_ACU_Data","aiFloor","m","chatIndex","hasHistory","statusList","lastRefreshTime","currentTotalAiFloors","currentTotalFloors","useTableUpdateStatus","startTime","context","userscripts","__userscripts","settingsKey","settingsContainer","versionPrefix","globalMetaKey","activeIsolationCode","metaRaw","meta","profileSettingsKey","profileSettings","profRaw","isolationCode","localKey","getDbGlobalSettings","getTableTemplate","profileTemplateKey","templateRaw","getTemplateFromSettings","totalFloors","totalAiFloors","sheetKeys","orderNo","_acu_orderNo","Infinity","tableDataEntry","templateEntry","rawFreq","updateFrequency","effectiveFreq","unrecordedFloors","effectiveFrequency","lastUpdatedAiFloor","lastUpdatedChatIndex","elapsed","formatLastUpdate","getUnrecordedClass","z","UpdateSettingsSchema","AutoTriggerConfigSchema","onEmptyCell","onIndexGap","targetTables","updateTargetTables","UpdatePresetSchema","autoTrigger","optional","PresetStorageSchema","nullable","autoFixPresetId","globalAutoTriggerEnabled","globalAutoExecuteEnabled","SCRIPT_ID","STORAGE_KEY","DEFAULT_PRESET","getScriptVariables","script_id","useUpdatePresets","autoFixPreset","hasPresets","loadPresets","safeParse","savePresets","replaceVariables","saveScriptVariables","findPresetByName","trimmedName","createOrUpdatePreset","isNew","setActivePreset","setAutoFixPreset","duplicatePreset","createFromCurrent","currentSettings","getPresetSettings","setGlobalAutoTrigger","setGlobalAutoExecute","tableUpdateCallback","tableFillStartCallback","isShuttingDown","useApiCallbacks","dataStore","presetsManager","dbSettings","tableUpdateStatus","lastIssueNotifyTime","isAutoUpdating","hasRowChanged","oldRow","oldVal","newVal","saveAiChangesToHistory","oldData","newData","newSheet","oldSheet","tableRow","registerCallbacks","registerTableUpdateCallback","processedData","checkAndNotifyIssues","registerTableFillStartCallback","unregisterCallbacks","unregisterTableUpdateCallback","unregisterTableFillStartCallback","shouldTrigger","summary","findACUSettingsKey","v100Key","anyKey","getActiveIsolationCode","activeCode","settingsStr","CHAT_SHEET_GUIDE_FIELD","TABLE_ORDER_FIELD","useDataPersistence","executeFullSave","dataToUse","commitDeletes","finalData","configKey","targetMsgIndex","guideData","out","mate","headerRow","sourceData","initNode","insertNode","updateNode","deleteNode","uiSentinel","contextDepth","batchSize","skipFloors","exportConfig","splitByRow","entryType","preventRecursion","injectionTemplate","buildSheetGuideData","updateSheetGuide","_savedToFloor","directErr","findFloorForTable","autoSaveStop","setupAutoSave","skipRender","$saveBtn","originalIcon","html","savedData","modifiedTableIds","hasDeletes","floorMap","newTables","floorIdx","savedAny","slotKey","currentTagData","tablesToUpdate","executeIncrementalSave","savedFloor","startIdx","endIdx","changesCount","purgeTableDataByRange","changed","changedCount","removeKeyFromArray","arr","next","changedAny","msgChanged","tagKey","stopAutoSave","initDataPersistence","__acu_hidden_prompt","domCleanupFns","isProcessing","setHiddenPrompt","getHiddenPrompt","setupSendIntercept","cleanupSendIntercept","sendBtn","clickHandler","hiddenPrompt","stopImmediatePropagation","userInput","wrappedPrompt","combinedMessage","parentWin","TavernHelper","triggerSlash","Event","bubbles","click","handleSend","keydownHandler","shiftKey","appendPromptToInput","separator","targetSelector","currentVal","setSelectionRange","lastFocusedInput","focusListenerSetup","setupFocusTracking","className","closest","isACUInternalInput","getLastFocusedInput","setTargetInput","appendToActiveInput","isConnected","useHiddenPrompt","useCoreActions","tableKey","newRowIndex","copyContent","safeContent","textArea","$card","$cell","deleteKey","append","setInput","editCell","cellData","doc","freshData","$displayTarget","badgeStyle","MOBILE_REGEX","checkIsMobileLayout","innerWidth","useIsMobile","checkMobile","isTouchDevice","useDraggableWithSnap","initialX","initialY","edgePadding","elementWidth","onPositionChange","useParentWindow","getTargetWindow","getScreenSize","targetWindow","wasDragging","dragStartX","dragStartY","_position","mouseX","mouseY","dx","abs","dy","screenWidth","screenHeight","getSillyTavernContext","win","useSwipeEnhancement","cleanupFns","clearFloorData","willTriggerNewGeneration","swipe_id","swipes","hasACUData","handleSwipeClearOnly","lastIndex","lastMessage","swipes_length","handleSwipe","clearEnabled","getConfig","swipeBtn","__acu_processed","newEvent","MouseEvent","cancelable","view","initDesktopListener","lastProcessedSwipeTime","eventMakeFirst","tavern_events","MESSAGE_SWIPED","errorCatched","message_id","initTavernEventListener","TEMPLATE_PARTS","HEADER","LUCK","WORDS","DIMENSIONS","TEMPLATE_WITH_DIMENSIONS","buildFullPrompt","wordsText","dimensionsText","originalParent","styleCleanup","copiedStyleElements","useFullscreenSupport","isFullscreen","fullscreenDocument","fullscreenElement","isMigrated","eventListeners","iframeObserver","getACUContainer","migrateToFullscreen","targetDoc","parentElement","cleanupCopiedStyles","sourceDoc","acuStyleSelectors","originalStyle","clonedStyle","cloneNode","clonedLink","copyACUStyles","acuApp","newTop","setProperty","adjustBallPositionForFullscreen","restoreFromFullscreen","removeProperty","restoreBallPosition","handleFullscreenChange","mainFullscreen","streamingIframes","iframe","iframeEl","iframeDoc","contentDocument","detectFullscreenElement","addFullscreenListener","scanAndListenIframes","iframes","contentWindow","getACUMountPoint","MutationObserver","mutations","mutation","addedNodes","matches","chatContainer","childList","subtree","checkFullscreen","ballAppearanceStore","issueTooltip","imageStyle","imageOffsetX","imageOffsetY","imageScale","isAiNotifying","clearAiNotify","ballClasses","showAnimation","docked","isDocked","ballStyle","positionStyle","getTargetWindowSize","ballRef","clickTimer","defaultPos","winHeight","getDefaultPosition","newX","newY","handleClick","useParentEventListener","winWidth","ballSize","needUpdate","resetPosition","defaultY","setDocked","getAppearance","getButtonClass","_hoisted_6","WINDOW_CONFIG_KEY","panelType","DEFAULT_VISIBLE_BUTTONS","visibleIds","settingsIndex","collapseIndex","buttonsConfigVisible","isHiddenPopupVisible","toggleHiddenPopup","handleHiddenButtonClick","emitButtonAction","isRefreshing","getButtonStyle","longPressTimer","isLongPress","popupButtonId","getSecondaryId","getButtonIcon","getButtonLabel","getButtonTitle","startLongPress","endLongPress","actionId","panelRef","dataAreaRef","navContainerRef","resizeHandleRef","DEFAULT_CENTERED_CONFIG","bottom","preCheckSavedWin","needResetToCenter","windowConfig","getMobileSafeBottomMargin","hasTouch","mobileUA","isSmallScreen","isMobileDevice","validateAndFixWindowPosition","parentWidth","resetToCenter","newLeft","newBottom","safeBottomMargin","minSafeBottom","maxLeft","handleHeaderPointerDown","navEl","startX","startY","startLeft","winH","startBottom","handlePointerMove","moveE","originalEvent","maxBottom","handlePointerUp","off","preventClick","clickE","watchEffect","savedWin","leftValue","bottomValue","contentInnerRef","isManualHeight","panelHeight","panelTypeRef","showPaginationRef","resizeEl","startWidthResize","autoHeight","recalculate","recalculateHeight","contentRef","minHeight","maxHeightRatio","headerHeight","paginationHeight","contentPadding","onHeightChange","getParentHeight","getMaxHeight","getPanelType","getShowPagination","maxH","paginationH","newType","heightStyle","maximize","useSmartHeight","startWidth","newWidth","getPanelElement","getDataAreaElement","getCurrentHeight","exitCenteredMode","resetHeight","hasRelationshipGraph","finalHeight","isHorizontal","naturalHeight","cardsContainer","cards","maxCardHeight","card","cardContentHeight","toolbar","pagination","toolbarHeight","containerPadding","paddingTop","paddingBottom","contentEl","firstElementChild","isSpecialHorizontal","actualHeight","collapsed","pinned","$slots","onMousedown","onMouseup","onMouseleave","onTouchstartPassive","onTouchend","HiddenButtonsPopup","onClose","onButtonClick","hasOptionsTabs","sortedTabs","isSpecialTab","allVisibleTabs","createTabObject","nameOrId","tab","hasTabIssues","getTabTooltip","draggedTab","dropTargetTab","newTabs","handleDragEnd","getCurrentOrder","getVisibleTabs","draggable","onDragstart","dataTransfer","effectAllowed","setData","onDragover","onDrop","fromIndex","toIndex","removed","onDragend","detectedType","badgeClass","displayValue","textareaRef","localValue","hasSaved","hasTextSelection","checkTextSelection","autoResize","currentHeight","originalVisibility","visibility","handleSave","originalValue","handleKeydown","handleTouchStart","handleTouchMove","initialHeight","onPointerdown","onTouchstart","onTouchmove","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","isChanged","viewMode","showIndex","showHeader","showHistoryButton","customHighlights","allowEdit","cardRef","editingCell","isUndoing","cellLock","rowHistory","pullTopRef","pullBottomRef","swipeLeftRef","swipeRightRef","showEdgeHint","edgeHintTimer","isDeleting","titleCell","displayCells","isFullWidthCell","gridCells","fullWidthCells","currentRowLockKey","isCurrentRowLocked","isTitleLocked","getCellChangeClass","changeType","rowHighlightClass","isSelecting","shouldBlockInteraction","wasSelecting","selectionEndTimer","selectedText","removeAllRanges","useSelectionGuardEnhanced","isSwiping","gestureType","atStart","atEnd","checkScrollEdge","lengthX","lengthY","onInsertRow","onToggleDelete","horizontalThreshold","verticalThreshold","edgeThreshold","longPressDelay","longPressCancelThreshold","threshold","isSelectingVueUse","scrolledToEdge","touchStartX","touchStartY","directionLocked","gestureLocked","initialScrollHeight","initialClientHeight","initialIsShortCard","parentScrollStart","parentScrollContainer","shouldBlockClick","isSelectionMode","currentTarget","hasNativeSelection","touch","touches","scrollContainer","deltaX","deltaY","nativeSelection","newGestureType","isPullDown","displayWidth","handleTouchEnd","_e","isShortCard","isPullUp","oldEl","useCardGestures","pullHeight","absY","pullOpacity","swipeWidth","absX","swipeOpacity","handleScroll","getCellLockClass","isLocked","handleRowLock","isNowLocked","handleCellClick","handleTitleClick","handleCellSave","handleUndoRow","handleContextMenu","onContextmenu","InlineEditor","onCancel","Badge","useDivinationAction","buildPromptFromResult","dimensionsForPrompt","dimensionName","tierName","luckPrompt","wordsStr","dimensionMap","usedDimensions","dimPrompt","escapedName","regex","remainingPrompts","injectIntoLastUserMessage","getChatMessagesFn","getChatMessages","setChatMessagesFn","setChatMessages","getLastMessageIdFn","getLastMessageId","lastMsgId","allMessages","lastUserMsg","newDirective","confirmDivination","action","triggerQuickReroll","optionTables","getOptionItems","optionItem","optIdx","tagIdx","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","isEditing","firstRow","locationCols","timeCols","passed","weatherCol","peopleCol","attributes","footer","maxLen","footerIdx","locationText","locationParts","timeData","weatherData","col","getWeatherIcon","peopleList","isLong","footerData","getAttributeIcon","handleWidgetClick","person","selectedKeys","pendingFrequencyChanges","pendingNewTables","toggleButtonState","currentFrequencies","allDisabled","freq","allEnabled","hasPendingChanges","sortedStatusList","aHasAi","bHasAi","exitEditMode","toggleSelectAll","getEditingFrequency","handleRefresh","handleExport","fullTemplate","exportTemplate","updateConfigUiSentinel","jsonStr","Blob","download","handleDelete","confirm","importTemplateFromData","tablesToDelete","purgeResult","handleOpenPurgeDialog","handleOpenAddDialog","handleToggleEnabled","newFreq","handleTableClick","handleRowClick","changeCount","newTable","onInput","colspan","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","tagLibraryStore","previousCollapsedState","currentMaxLevel","collapsedPaths","editing","rowCount","displayRows","displayTitle","displayIcon","titleToMatch","hierarchyColumn","isHierarchyMode","getRowFullPath","getDisplayValue","hierarchyValue","pop","getRowLevel","fullPath","rowHasChildren","rowPath","otherRow","isRowCollapsed","lastSlash","lastIndexOf","getRowParentPath","pathParts","currentPath","toggleRowCollapse","isRowExpanded","maxLevelInData","maxLevel","isFullyExpanded","goBackLevel","toggleExpandCollapse","newCollapsed","canGoBack","showBackButton","showExpandCollapseButton","isRowAiChanged","hasAiUpdate","searchLower","isRowMatchSearch","pathToIndex","pathA","pathB","partsA","partsB","commonPrefixLength","branchPathA","branchPathB","branchIndexA","branchIndexB","localeCompare","sortByHierarchy","aAi","bAi","useVirtual","virtualListRows","listContainerProps","listWrapperProps","virtualGridRowGroups","gridContainerProps","gridWrapperProps","rowGroups","groupIntoRows","useGridVirtualScroll","bodyClass","displayedInteractiveTags","displayedCategories","getCategoryDisplayName","getCategoryButtonLabel","isFontAwesome","filteredActionsNoSettings","getTagCount","getDisplayTags","getInteractiveTags","titleColumn","colName","firstCell","displayTagColumns","column","TAG_SEPARATORS","tagConfig","interactiveTagConfig","sourceColumns","tagDefinitions","matchedDef","def","matchedDefinition","defaultTag","isFixed","getTagTooltip","preview","handleInteractiveTagClick","rowTitle","getPlayerName","handleNewInteractiveTagClick","resolveTagPrompt","isLocation","handleCategoryClick","getNewTagTooltip","name1","handleConfigActions","getActionIcon","hasSecondaryIcon","getSecondaryIcon","getActionTooltip","handleAction","openTableEditor","openVisualizer","openModal","openNativeEditor","handleNavigate","handleStatusTableClick","handleTitleTextClick","handleTitleAreaClick","startResize","newColSpan","handleDragStart","handleDrop","TableStatusBoard","onTableClick","EmbeddedOptionsPanel","onNavigate","GlobalStatusWidget","onRowClick","rowGroup","groupIndex","fixed","useInteractionImporter","tagStore","importFromRow","categoryPath","textToProcess","finalPrompt","ensureCategoryPath","importAll","successCount","importedRowKeys","filteredActions","getRowValue","isRowImported","handleImportAll","allRowsData","newAiDiff","wasCollapsedBeforeEditing","expandedTables","activeLimitPopup","tableCount","allExpanded","loadTableData","detectedTables","isTableEnabled","getTableLimit","getTableLimitText","setTableLimit","currentConfig","closePopups","toggleAllExpanded","newState","handleSettingsClick","step","checked","onChange","dashboardStore","isAddPanelOpen","draggingWidgetId","dropTargetId","gridRef","heightHandleRef","heightTouchTimer","notAddedTables","notAddedSpecialWidgets","aiHighlightedTableIds","getTableById","displayWidgets","widgetMatchesSearch","aHighlight","bHighlight","availableTables","getWidgetDisplayName","getTableIcon","nameToCheck","enterEditMode","handleAddWidget","isTableAdded","handleAddSpecialWidget","handleRemoveWidget","handleResizeWidget","targetWidgetId","targetWidget","handleHeightDragStart","handleHeightReset","handleHeightTouchEnd","handleRowEdit","handleWidgetAction","autoAddDefaultWidgets","onDblclick","RandomWordPoolWidget","onRemove","onAction","onDragStart","onDragEnd","InteractionTableWidget","onRowEdit","DashboardWidget","emptyText","localSearchTerm","changeTypeSnapshot","createChangeTypeSnapshot","filteredRows","getRowChangeTypeForSort","getChangePriority","sortedRows","aChangeType","bChangeType","aPriority","bPriority","totalPages","paginatedRows","totalRows","deletingCount","shouldShowPagination","paginationList","pages","toggleReverse","toggleLockMode","toggleShowLockedOnly","handleClose","clearSearch","goToPage","behavior","lastHeightTouchTime","newTerm","newMode","newTotal","DataCard","onCellClick","onContextMenu","onShowHistory","handleOptionHover","isHover","onMouseover","onMouseout","menuRef","menuStyle","parentWindow","viewportWidth","viewportHeight","clickOutsideHandler","rightClickHandler","close","handleInsertRow","handleCopy","handleUndoDelete","tabindex","footerTemplate","emptyHint","isAllSelected","footerText","isSelected","toggleItem","handleSelectAll","badge","jsonInput","selectedFileName","parseError","parsedTables","dialogRef","parsedTableItems","parseJson","extractTables","handleFileSelect","files","readAsText","handleConfirm","tablesToAdd","accept","SwitchList","initialSelectedTables","startInputRef","endInputRef","isExecuting","tableListItems","canConfirm","setRangeAll","focusEndInput","defaultRange","lastIdx","hasRealData","getDefaultFloorRange","loadAvailableTables","templatePresets","plotPresets","currentTemplate","currentPlot","loadData","retries","templates","getTemplatePresetNames","plots","getPlotPresetNames","getCurrentPlotPreset","handleTemplateChange","switchTemplatePreset","handlePlotChange","switchPlotPreset","handleImportTemplate","handleImportPlot","importPlotPresetFromData","switchTo","presetName","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","isEditMode","tempChanges","undoStack","selectedSnapshot","isPreviewing","openedTableName","openedRowIndex","computedTitleColIndex","titleValue","titleIdx","getTitleValue","changedColsKey","currentRowDataWithChanges","getSnapshotDisplayTitle","snapshotToTableRowLocal","getSnapshotDiff","currentCells","handleSnapshotToggle","startEdit","exitEdit","handleHistoryCellClick","newChanges","applyWholeCard","handlePreviewStart","handlePreviewEnd","resetState","loadSnapshots","newTableName","onToggle","EMOJI_LIST","FA_ICONS","manualInput","filteredIcons","handleSelect","handleSearch","handleManualConfirm","selected","onKeyup","currentFloorInfo","isValidFloor","isInteger","validationError","handleCancel","isUpdating","selectedPresetId","autoTriggerEnabled","autoExecuteEnabled","selectedTableNames","tableSelectorExpanded","availableColumns","selectedEmptyCheckColumns","integritySummary","columnListItems","summaryTables","handleSettingChange","handlePresetChange","handleAutoFixPresetChange","openSavePresetDialog","checkDuplicate","handleDeletePreset","handleAutoTriggerChange","handleAutoExecuteChange","handleTableSelectionChange","newSelection","saveColumnSelection","handleExecuteUpdate","autoFixId","columnsSet","loadAvailableColumns","Function","canSave","isDuplicate","hasInputError","showAdvancedDialog","handleOpenAdvanced","handleAdvancedConfirm","AdvancedPurgeDialog","VERSION","localAppearance","isPreviewAnimating","isPreviewNotify","imageInputRef","imageSourceType","imageUrlInput","isUrlImage","previewClasses","previewStyle","imagePreviewStyle","playPreviewAnim","playNotifyEffect","handleImageBtnClick","handleUrlModeSelect","applyImageUrl","handleImageUpload","openCropDialog","invert","clearImage","alt","btnId","visibleButtonCards","availableSecondaryButtons","currentPickerTarget","draggedIndex","attachmentPickerVisible","closeAttachmentPicker","handleReset","visibleInOrder","hiddenInOrder","currentVisible","gridStyle","gridTemplateColumns","getVisibleKey","allTabs","staged","isOptions","visibleTabItems","visibleKeys","hiddenTabItems","isAggregateTab","getTypeBadge","allKeys","handleClearAll","dragging","visibleKey","filtered","MAX_IMAGE_SIZE","storageKey","activeStorageKey","localConfig","backgroundUrlInput","fileInputRef","showUrlInput","previewRef","isPreviewDragging","dragStartPos","dragStartOffset","currentBlobUrl","previewImageStyle","emitUpdate","handleConfigChange","getEventPosition","handlePreviewDragStart","handlePreviewDragMove","handlePreviewDragEnd","previewEl","triggerFileInput","alert","processImageFile","handleUrlInputBlur","handleClearBackground","hint","showToolbar","isMigrating","selectedCount","isDropdownOpen","selectedPresetName","toggleDropdown","handleOutsideClick","isBuiltin","$emit","getPresetList","getActivePresetId","getCurrentThemeVars","getCurrentHighlight","getCustomCSS","getCurrentThemeVarOpacities","manualColorHex","aiColorHex","titleColorHex","selectedTheme","expandedGroups","customCSSText","syncColorInputs","selectDefaultPreset","selectPreset","confirmDeletePreset","handleQuickSave","openSaveDialog","onThemeChange","temp","onManualColorChange","onAiColorChange","onTitleColorChange","getGroupModifiedCount","getVarValue","getVarColorValue","setVar","hasVarOpacity","opacities","getVarOpacity","saveCSS","clearCSS","exportCSS","importCSS","parseColorValue","rgbaMatch","toHex","alphaHex","syncCssToSliders","cssVarToKey","newCss","convertedCount","cleanValue","removeRegex","handleFileImport","endsWith","newTheme","PresetManagerHeader","onRestoreDefault","onDelete","onSaveAs","BackgroundConfigPanel","groupId","setVarOpacity","collapsedDimensions","templateInputRef","showHelp","selectedDimensionIds","customTemplateRef","toggleHelp","handleSelectPreset","handleRestoreDefault","handleExportCurrentPreset","downloadJson","handleExportPresets","filename","triggerImport","handleImportPresets","importedCount","importedPreset","collapseAll","expandAll","toggleMigrateMode","handleMigrateTo","targetPreset","selectedDims","handleAddDimension","insertTemplatePlaceholder","onCollapseAll","onExpandAll","onImport","onExportCurrent","onExportAll","onToggleMigrate","onMigrateTo","dimIndex","dimId","tierIndex","newTier","DEFAULT_IMAGE","displayUrl","handleImageLoad","naturalWidth","handleImageError","onLoad","luckName","luckColor","loading","displayLuckName","maskText","char","displayWords","viewBox","dimValue","cx","CARD_THEMES","wafuku","defaultBackImage","CardFront","CornerOrnament","CardBack","mystic","nav","inject","storeToRefs","showTableSyncList","toggleTableSyncList","randomTableItems","enabledSyncTables","newSelectedIds","themeList","modeHintText","fileInput","triggerUpload","handleFileUpload","navigateTo","searchQuery","expandedId","editingContent","filteredCategories","debouncedSave","saveContent","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","showAddFontDialog","newFontName","newFontUrl","currentPanel","panelHistory","customTitles","panelTitle","handleBack","prevPanel","resetNavigation","goToPanel","provide","goBack","canAddFont","handleAddFont","TabConfigPanel","NavButtonConfigPanel","BallAppearancePanel","ThemePanel","DivinationPanel","DimensionManagerPanel","WordPoolPanel","dragStartOffsetX","dragStartOffsetY","applyAndClose","resetValues","handleDragMove","updateOffset","newOffsetX","newOffsetY","avatarList","pendingChanges","isDeleteMode","selectedForDelete","activeImportMenu","currentUploadItem","currentLabelItem","showCropDialog","currentCropItem","filteredList","hasTavernCharacterAvatar","hasTavernUserAvatar","createAvatarItem","labelsConfig","hasLocalBlob","labelIndices","aliasesText","avatars","changes","avatarIdx","switchTab","exitDeleteMode","getInitial","getSourceLabel","getAvatarStyle","closeImportMenu","compressedBase64","updateUrl","trimmedUrl","addPendingChange","updateListItem","updateAliases","openLabelDialog","updatedItem","indices","applyLabel","resetLabel","closeCropDialog","applyCrop","handleCropUpload","DataTransfer","enterDeleteMode","confirmDelete","configChanged","saveAll","itemId","newSet","tavernUrl","AvatarCropDialog","extractBaseColor","backgroundOpacity","padStart","newId","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","_hoisted_66","_hoisted_67","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","editingLegendId","editingLegendData","keywordsStr","getFactionBorderColor","getFactionBackgroundColor","defaultBg","getFactionOpacity","handleOpenAvatarManager","handleLegendEnabledChange","handleAddLegendItem","addedItem","handleEditLegendItem","handleSaveLegendItem","handleCancelEditLegendItem","handleResetLegendConfig","hexColor","currentOpacity","maxlength","localSelectedIndices","getThemeTextColor","localStyleConfig","loadStyleConfig","getDisplayCharsFromName","newIndices","displayChars","previewLabel","selectedChars","handleResetToFullName","handleResetStyle","getDefaultIndicesFromName","resetToFullName","themeClass","handleShowHistory","selectedActions","availableActions","getActionLabel","displayedTagCount","displayedCategoryCount","openTagManager","newTagIds","newCategoryIds","selectedDisplayColumn","availableDisplayColumns","handleDisplayColumnSelect","hasTagConfig","opt","isFlipped","getTheme","effectiveBackImage","aspectRatio","cardStyle","handleCardBackLoad","clampedRatio","displayData","parentBody","stars","handleOverlayClick","handleFlip","handleRetry","star","stroke","xmlns","TarotCard","onFlip","showRelationshipGraph","showOptionsPanel","localPrompt","displayedTags","displayedTagIdSet","isPreviewMode","emptyMessage","handleTagClick","handleGridClick","handleTagMouseLeave","handleTagTouchEnd","added","onMouseenter","onTouchcancel","ROOT_ICON_KEY","treeContainer","expandedCategories","stickyCategory","showRootIconInput","newRootIcon","rootIcon","isCategoryActive","catId","catPath","activeCategory","customCategories","pathMap","level1Categories","childrenCountMap","sortCategories","countA","countB","addCategoryAndChildren","level1","hasChildren","tagCount","saveRootIcon","handleRootClick","handleUncategorizedClick","handleMigrateToCategory","containerTop","lastItemAboveTop","dataset","expanded","isAlreadySelected","defaultCategoryId","labelInput","promptInput","form","showNewCategoryInput","newCategoryPath","newCategoryIcon","helpExpanded","showCategoryDropdown","showParentCategoryDropdown","newCategoryParentId","wildcards","allCategories","insertWildcard","wildcard","selectionStart","selectionEnd","createNewCategory","openNewCategoryIconSelect","toggleCategoryDropdown","toggleParentCategoryDropdown","selectParentCategory","closeDropdown","val1","val2","importData","errorMessage","importStats","conflicts","isTagConflict","resetImport","parseFile","executeImport","conflict","showEditDialog","showImportDialog","editingTag","localDisplayedTagIds","localDisplayedCategoryIds","isAllCurrentSelected","displayedItems","localDisplayedTagIdSet","toggleMode","showModeToast","getModeLabel","normal","migrate","export","toastr","timeOut","addDisplayedCategory","selectedCatIds","selectedTagCount","selectedCatCount","messages","handleDeleteCategory","removeDisplayedCategoryById","handleAddTag","handleCreateTag","selectedLevel1","handleDeleteTag","removeDisplayedTagById","handleAddCategory","handleTagSaved","handleEditDialogClose","handleImport","handleImported","toggleSelectAllCurrent","exportAll","exportSelected","TagCategoryTree","onCategoryClick","onAddCategory","onMigrateToCategory","onDeleteCategory","TagBadgeGrid","onTagClick","onCreateTag","onDeleteTag","onAddTag","TagEditDialog","onSaved","TagImportDialog","onImported","selectedSubCategoryId","subCategories","hasSubCategories","allTagsCount","getSubCategoryName","subCat","getSubCategoryTagCount","subCategoryId","selectSubCategory","handleTagMouseEnter","handleTagTouchStart","handleManageTags","getAllTables","editedPrompt","isLoadingAvatars","charNames","targetColIndex","chatVars","displayAvatars","textAvatar","charAt","loadAvatars","avatar","companionText","currentText","insertPos","tooltipStyle","estimatedWidth","RelationshipGraph","defineAsyncComponent","loader","loadingComponent","initStyles","cleanupStyles","executePurgeFloorRange","refreshTableStatus","toastState","touchStartHandler","touchMoveHandler","isContentEditable","shouldAllowScroll","install","pDoc","uninstall","useTouchScrollFix","swipeEnhancement","floatingBallRef","mainPanelRef","relationshipGraphRef","processedTables","contextMenuState","appClasses","rawRows","tabList","isTabBarCollapsed","optionsTables","hasRelationshipData","relationshipTableData","characterTablesData","factionTableData","currentTable","factionColIndex","lower","currentEditingRow","currentTargetFloor","maxFloorIndex","smartIcon","handlePanelClose","handleHideContent","handleToggle","handleTabChange","dataAreaEl","restoreTableHeight","savedHeight","handleTabsReorder","handleCollapseTabClick","handleTabsPopupClick","handleNavigateToTable","handleShowRelationshipGraph","handleOpenAvatarManagerFromSettings","handleSaveAs","handlePurge","handleDashboardAction","handleUndo","handleManualUpdate","handleTableClose","handleCategoryTagSelect","handleEl","setPointerCapture","pointerId","startHeight","upE","releasePointerCapture","currentTabName","allTableIds","handleToggleDelete","handleContextInsertRow","handleContextCopy","handleContextDelete","handleContextUndoDelete","handleHistoryApply","handleDivinationConfirm","handlePromptEditorSave","handleSettingsSave","handleOpenNative","handleSaveToFloor","handlePurgeRange","isCenteredMode","winConfigRaw","winConfig","handleClickOutside","isInsideACU","safeArea","FloatingBall","MainPanel","onRefresh","onUndo","onManualUpdate","onPurge","onOpenNative","onSettings","onTogglePin","onHideContent","onCollapseTab","TabBar","onTabChange","onOrderChange","onExitEditing","TabsPopup","onTabClick","Dashboard","onShowRelationshipGraph","onHeightDragStart","onHeightReset","OptionsPanel","DataTable","onSearchChange","ContextMenu","onCopy","onUndoDelete","SettingsDialog","DirectorDialog","InputFloorDialog","PurgeRangeDialog","onAdvancedConfirm","ManualUpdateDialog","HistoryDialog","RowEditDialog","WidgetSettingsDialog","WidgetActionsDialog","AvatarManagerDialog","NodeConfigDialog","NodeLabelDialog","GraphSettingsDialog","onOpenAvatarManager","FactionSettingsDialog","TagManagerDialog","CategorySelectPopup","TagPreEditDialog","PresetSaveDialog","DivinationOverlay","onRetry","PromptEditorDialog","AddTableDialog","IconSelectDialog","TagPreviewTooltip","Toast","holdToDrag","dragImageTranslateOverride","vueApp","mountContainer","dbCheckTimerId","isDatabaseReady","initACU","defaultConfig","checkAndResetCenteredMode","dataCheckRetries","checkApi","pinia","createPinia","createApp","App","use","mount","initVueApp","replaceScriptButtons","eventOn","getButtonEvent","currentPrompt","unmount"],"sourceRoot":""}
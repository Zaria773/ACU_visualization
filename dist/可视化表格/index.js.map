{"version":3,"file":"index.js","mappings":"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M+gB,SAAWG,EAClCe,GACF,EAgJEsB,YAvIF,SAAqBrkB,EAA2Bc,GAC9CuhB,EAAiBvhB,MAAMd,GAAOc,CAChC,EAsIEwjB,eAjIF,SAAwBtkB,UACfqiB,EAAiBvhB,MAAMd,EAChC,EAgIEukB,eA3HF,WACElC,EAAiBvhB,MAAQ,CAAC,CAC5B,EA4HE0jB,aAnHF,SAAsBlpB,GACpBinB,EAAUzhB,MAAQxF,EAClBynB,GACF,EAiHE0B,eA5GF,WACElC,EAAUzhB,MAAQ,GAClBiiB,GACF,EA4GEU,oBACAiB,mBArEF,WAIE,MAAO,CAHWjB,IACFlB,EAAUzhB,OAEEpC,OAAOC,SAASC,KAAK,OACnD,KClYW+lB,GAAiC,CAC5C,CACEC,MAAO,IACP1X,KAAM,OACNkR,MAAO,UACPyG,SAAU,CACR,IACA,KACA,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,IACA,KACA,KACA,MACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAGJ,CACED,MAAO,IACP1X,KAAM,KACNkR,MAAO,UACPyG,SAAU,CACR,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAGJ,CACED,MAAO,IACP1X,KAAM,SACNkR,MAAO,UACPyG,SAAU,CACR,IACA,IACA,KACA,KACA,KACA,KACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAGJ,CACED,MAAO,IACP1X,KAAM,WACNkR,MAAO,UACPyG,SAAU,CACR,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAGJ,CACED,MAAO,IACP1X,KAAM,OACNkR,MAAO,UACPyG,SAAU,CACR,KACA,KACA,KACA,KACA,KACA,KACA,MACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,OAGJ,CACED,MAAO,IACP1X,KAAM,OACNkR,MAAO,UACPyG,SAAU,CACR,IACA,IACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,KACA,KACA,QAMAC,GACG,IADHA,GAEE,QAFFA,GAGG,UAUT,SAASC,GAAYC,EAAcvnB,GACjC,OAAOA,EAAKonB,SAASxZ,KAAK4Z,GAAMD,EAAKvZ,SAASwZ,GAChD,CAaO,SAASC,GAAiBC,GAE/B,MAAMC,EAAQD,EACXE,MAAM,YACN1jB,IAAI2jB,GAAKA,EAAEC,QACX7mB,OAAO4mB,GAAKA,EAAEnqB,OAAS,GAE1B,GAAqB,IAAjBiqB,EAAMjqB,OACR,MAAO,CACLijB,MAAOuG,GAAetM,KAAKmN,GAAiB,MAAZA,EAAEZ,OAAgBxG,MAClDwG,MAAO,IACPa,SAAU,OACVC,WAAW,GAKf,MAAMC,EAAgB,IAAI9V,IAY1B,GAVAuV,EAAMlc,QAAQ8b,IACZ,IAAK,MAAMvnB,KAAQknB,GACjB,GAAII,GAAYC,EAAMvnB,GAAO,CAC3BkoB,EAAclrB,IAAIgD,EAAKmnB,OACvB,KACF,IAKuB,IAAvBe,EAAcnR,KAChB,MAAO,CACL4J,MAAOuG,GAAetM,KAAKmN,GAAiB,MAAZA,EAAEZ,OAAgBxG,MAClDwG,MAAO,IACPa,SAAU,OACVC,WAAW,GAKf,MACME,EADkC,CAAC,IAAK,IAAK,KAChBva,KAAKwa,GAAKF,EAAcG,IAAID,IACzDE,EAAcJ,EAAcG,IAAI,KAEtC,GAAIF,GAAeG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","sources":["webpack://tavern_helper_template/src//components/settings/NavButtonConfigPanel.vue?fdd1","webpack://tavern_helper_template/src//components/TabsPopup.vue?b353","webpack://tavern_helper_template/src//components/HiddenButtonsPopup.vue?11fb","webpack://tavern_helper_template/src//components/RelationshipGraph.vue?dfbf","src://tavern_helper_template/external var \"Vue\"","webpack://tavern_helper_template/src//components/HiddenButtonsPopup.vue?748f","webpack://tavern_helper_template/src//components/RelationshipGraph.vue?a1f4","webpack://tavern_helper_template/src//components/ActionBar.vue?16a1","webpack://tavern_helper_template/src//components/settings/TabConfigPanel.vue?cba8","webpack://tavern_helper_template/src//components/ui/SortableList.vue?3c1e","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js","webpack://tavern_helper_template/src//components/settings/NavButtonConfigPanel.vue?ef99","webpack://tavern_helper_template/src//components/dialogs/SettingsDialog.vue?ee43","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://tavern_helper_template/src//components/settings/TabConfigPanel.vue?bcbf","webpack://tavern_helper_template/src//components/dialogs/SettingsDialog.vue?5ad1","webpack://tavern_helper_template/src//components/dialogs/ManualUpdateDialog.vue?7eef","src://tavern_helper_template/src//composables/useToast.ts","webpack://tavern_helper_template/src//components/ui/SortableList.vue?4182","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js","webpack://tavern_helper_template/src//components/ActionBar.vue?c0a6","webpack://tavern_helper_template/src//components/TabsPopup.vue?3c0b","webpack://tavern_helper_template/src//components/dialogs/ManualUpdateDialog.vue?1bd4","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/node_modules/.pnpm/@vueuse+shared@13.9.0_vue@3.5.26_typescript@6.0.0-dev.20250807_/node_modules/@vueuse/shared/index.mjs","src://tavern_helper_template/node_modules/.pnpm/@vueuse+core@13.9.0_vue@3.5.26_typescript@6.0.0-dev.20250807_/node_modules/@vueuse/core/index.mjs","src://tavern_helper_template/src//stores/useConfigStore.ts","src://tavern_helper_template/src//types.ts","src://tavern_helper_template/src//stores/useThemeStore.ts","src://tavern_helper_template/src//utils/relationshipColors.ts","src://tavern_helper_template/src//utils/relationshipParser.ts","src://tavern_helper_template/src//utils/imageUpload.ts","src://tavern_helper_template/src//utils/index.ts","src://tavern_helper_template/src//composables/useParentStyleInjection.ts","src://tavern_helper_template/src//composables/useCellLock.ts","src://tavern_helper_template/src//composables/useIndexedDB.ts","src://tavern_helper_template/src//composables/useRowHistory.ts","src://tavern_helper_template/src//composables/useTableIntegrityCheck.ts","src://tavern_helper_template/src//stores/useDataStore.ts","src://tavern_helper_template/src//stores/useUIStore.ts","src://tavern_helper_template/src//composables/useDbSettings.ts","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src//composables/useUpdatePresets.ts","src://tavern_helper_template/src//composables/useApiCallbacks.ts","src://tavern_helper_template/src//composables/useDataPersistence.ts","src://tavern_helper_template/src//composables/useCoreActions.ts","src://tavern_helper_template/src//composables/useMobileGesturesNew.ts","src://tavern_helper_template/src//composables/useVueUseIntegration.ts","src://tavern_helper_template/src//composables/useSwipeEnhancement.ts","src://tavern_helper_template/src//composables/useAvatarManager.ts","src://tavern_helper_template/src//composables/useTableUpdateStatus.ts","src://tavern_helper_template/src//stores/useDashboardStore.ts","src://tavern_helper_template/src//components/FloatingBall.vue","webpack://tavern_helper_template/src//components/FloatingBall.vue?f802","src://tavern_helper_template/src//components/HiddenButtonsPopup.vue","webpack://tavern_helper_template/src//components/HiddenButtonsPopup.vue?bd56","src://tavern_helper_template/src//components/MainPanel.vue","webpack://tavern_helper_template/src//components/MainPanel.vue?d408","src://tavern_helper_template/src//components/TabBar.vue","webpack://tavern_helper_template/src//components/TabBar.vue?0540","src://tavern_helper_template/src//components/Badge.vue","webpack://tavern_helper_template/src//components/Badge.vue?ad3e","src://tavern_helper_template/src//components/InlineEditor.vue","webpack://tavern_helper_template/src//components/InlineEditor.vue?9350","src://tavern_helper_template/src//components/DataCard.vue","webpack://tavern_helper_template/src//components/DataCard.vue?d510","src://tavern_helper_template/src//components/dashboard/EmbeddedOptionsPanel.vue","webpack://tavern_helper_template/src//components/dashboard/EmbeddedOptionsPanel.vue?587d","src://tavern_helper_template/src//components/dashboard/TableStatusBoard.vue","webpack://tavern_helper_template/src//components/dashboard/TableStatusBoard.vue?713b","src://tavern_helper_template/src//components/dashboard/DashboardWidget.vue","webpack://tavern_helper_template/src//components/dashboard/DashboardWidget.vue?a159","src://tavern_helper_template/src//components/Dashboard.vue","webpack://tavern_helper_template/src//components/Dashboard.vue?5a35","src://tavern_helper_template/src//components/DataTable.vue","webpack://tavern_helper_template/src//components/DataTable.vue?68f7","src://tavern_helper_template/src//components/OptionsPanel.vue","webpack://tavern_helper_template/src//components/OptionsPanel.vue?65f4","src://tavern_helper_template/src//components/ContextMenu.vue","webpack://tavern_helper_template/src//components/ContextMenu.vue?73ab","src://tavern_helper_template/src//components/Pagination.vue","src://tavern_helper_template/src//components/SearchBox.vue","src://tavern_helper_template/src//components/dialogs/AdvancedPurgeDialog.vue","webpack://tavern_helper_template/src//components/dialogs/AdvancedPurgeDialog.vue?cf3f","src://tavern_helper_template/src//components/dialogs/AvatarCropDialog.vue","webpack://tavern_helper_template/src//components/dialogs/AvatarCropDialog.vue?917b","src://tavern_helper_template/src//components/dialogs/NodeLabelDialog.vue","webpack://tavern_helper_template/src//components/dialogs/NodeLabelDialog.vue?61d5","src://tavern_helper_template/src//components/dialogs/AvatarManagerDialog.vue","webpack://tavern_helper_template/src//components/dialogs/AvatarManagerDialog.vue?4de7","src://tavern_helper_template/src//components/dialogs/DashboardWidgetManagerDialog.vue","webpack://tavern_helper_template/src//components/dialogs/DashboardWidgetManagerDialog.vue?5942","src://tavern_helper_template/src//components/dialogs/HistoryDialog.vue","webpack://tavern_helper_template/src//components/dialogs/HistoryDialog.vue?3ed9","src://tavern_helper_template/src//components/dialogs/InputFloorDialog.vue","webpack://tavern_helper_template/src//components/dialogs/InputFloorDialog.vue?8de0","src://tavern_helper_template/src//components/dialogs/ManualUpdateDialog.vue","webpack://tavern_helper_template/src//components/dialogs/ManualUpdateDialog.vue?9640","src://tavern_helper_template/src//components/dialogs/PurgeRangeDialog.vue","webpack://tavern_helper_template/src//components/dialogs/PurgeRangeDialog.vue?f743","src://tavern_helper_template/src//components/dialogs/RowEditDialog.vue","webpack://tavern_helper_template/src//components/dialogs/RowEditDialog.vue?73a3","src://tavern_helper_template/src//components/settings/BallAppearancePanel.vue","webpack://tavern_helper_template/src//components/settings/BallAppearancePanel.vue?a35b","src://tavern_helper_template/src//components/settings/NavButtonConfigPanel.vue","webpack://tavern_helper_template/src//components/settings/NavButtonConfigPanel.vue?c467","src://tavern_helper_template/src//components/settings/TabConfigPanel.vue","webpack://tavern_helper_template/src//components/settings/TabConfigPanel.vue?a9d4","src://tavern_helper_template/src//components/settings/ThemePanel.vue","webpack://tavern_helper_template/src//components/settings/ThemePanel.vue?c9b7","src://tavern_helper_template/src//components/dialogs/SettingsDialog.vue","webpack://tavern_helper_template/src//components/dialogs/SettingsDialog.vue?cdd7","src://tavern_helper_template/src//components/dialogs/WidgetActionsDialog.vue","webpack://tavern_helper_template/src//components/dialogs/WidgetActionsDialog.vue?81c8","src://tavern_helper_template/src//components/dialogs/WidgetSettingsDialog.vue","webpack://tavern_helper_template/src//components/dialogs/WidgetSettingsDialog.vue?9fe6","src://tavern_helper_template/src//components/ActionBar.vue","webpack://tavern_helper_template/src//components/ActionBar.vue?4847","src://tavern_helper_template/src//components/ui/SortableList.vue","webpack://tavern_helper_template/src//components/ui/SortableList.vue?1ced","src://tavern_helper_template/src//components/Toast.vue","webpack://tavern_helper_template/src//components/Toast.vue?d1a0","src://tavern_helper_template/src//components/RelationshipGraph.vue","webpack://tavern_helper_template/src//components/RelationshipGraph.vue?61c8","src://tavern_helper_template/src//components/TabsPopup.vue","webpack://tavern_helper_template/src//components/TabsPopup.vue?b565","src://tavern_helper_template/src//App.vue","src://tavern_helper_template/src//composables/useTouchScrollFix.ts","webpack://tavern_helper_template/src//App.vue?6140","src://tavern_helper_template/src//index.ts"],"sourcesContent":["/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NavButtonConfigPanel.vue?vue&type=style&index=0&id=5b5624ec&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"57d9fc74\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NavButtonConfigPanel.vue?vue&type=style&index=0&id=5b5624ec&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./NavButtonConfigPanel.vue?vue&type=style&index=0&id=5b5624ec&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HiddenButtonsPopup.vue?vue&type=style&index=0&id=5d2fcd0e&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"b965f59c\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HiddenButtonsPopup.vue?vue&type=style&index=0&id=5d2fcd0e&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./HiddenButtonsPopup.vue?vue&type=style&index=0&id=5d2fcd0e&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-224.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RelationshipGraph.vue?vue&type=style&index=0&id=b32a3978&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"627ee88e\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-224.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RelationshipGraph.vue?vue&type=style&index=0&id=b32a3978&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-224.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RelationshipGraph.vue?vue&type=style&index=0&id=b32a3978&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","module.exports = Vue;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `\n`, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SortableList.vue?vue&type=style&index=0&id=23a88fea&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"71e08592\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SortableList.vue?vue&type=style&index=0&id=23a88fea&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SortableList.vue?vue&type=style&index=0&id=23a88fea&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsDialog.vue?vue&type=style&index=0&id=24569f77&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"a10baa00\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsDialog.vue?vue&type=style&index=0&id=24569f77&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SettingsDialog.vue?vue&type=style&index=0&id=24569f77&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabConfigPanel.vue?vue&type=style&index=0&id=c81c3978&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"3cbc0a74\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabConfigPanel.vue?vue&type=style&index=0&id=c81c3978&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabConfigPanel.vue?vue&type=style&index=0&id=c81c3978&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/**\n * useToast -  Toast  Composable\n *\n *  toastr  z-index \n * \n */\n\nimport { ref } from 'vue';\n\nexport type ToastType = 'success' | 'error' | 'warning' | 'info';\n\ninterface ToastState {\n  visible: boolean;\n  message: string;\n  type: ToastType;\n  timer: ReturnType<typeof setTimeout> | null;\n}\n\nconst state = ref<ToastState>({\n  visible: false,\n  message: '',\n  type: 'info',\n  timer: null,\n});\n\n/**\n *  Toast \n * @param message \n * @param type \n * @param duration  ()\n */\nfunction show(message: string, type: ToastType = 'info', duration = 3000): void {\n  // \n  if (state.value.timer) {\n    clearTimeout(state.value.timer);\n  }\n\n  // \n  state.value.visible = true;\n  state.value.message = message;\n  state.value.type = type;\n\n  // \n  state.value.timer = setTimeout(() => {\n    state.value.visible = false;\n    state.value.timer = null;\n  }, duration);\n}\n\n/**\n *  Toast\n */\nfunction hide(): void {\n  if (state.value.timer) {\n    clearTimeout(state.value.timer);\n  }\n  state.value.visible = false;\n  state.value.timer = null;\n}\n\n/**\n * \n */\nfunction success(message: string, duration = 3000): void {\n  show(message, 'success', duration);\n}\n\nfunction error(message: string, duration = 4000): void {\n  show(message, 'error', duration);\n}\n\nfunction warning(message: string, duration = 3500): void {\n  show(message, 'warning', duration);\n}\n\nfunction info(message: string, duration = 3000): void {\n  show(message, 'info', duration);\n}\n\nexport function useToast() {\n  return {\n    state,\n    show,\n    hide,\n    success,\n    error,\n    warning,\n    info,\n  };\n}\n\n//  composables\nexport const toast = {\n  show,\n  hide,\n  success,\n  error,\n  warning,\n  info,\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, ``, \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ActionBar.vue?vue&type=style&index=0&id=6bd4486e&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"edc193bc\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ActionBar.vue?vue&type=style&index=0&id=6bd4486e&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ActionBar.vue?vue&type=style&index=0&id=6bd4486e&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabsPopup.vue?vue&type=style&index=0&id=07936994&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"15f8d25c\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabsPopup.vue?vue&type=style&index=0&id=07936994&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabsPopup.vue?vue&type=style&index=0&id=07936994&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ManualUpdateDialog.vue?vue&type=style&index=0&id=acb73d8c&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"ef9792d6\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ManualUpdateDialog.vue?vue&type=style&index=0&id=acb73d8c&scoped=true&lang=scss\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.104.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-223.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.104.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.97.2_webpack@5.104.1/node_modules/sass-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ManualUpdateDialog.vue?vue&type=style&index=0&id=acb73d8c&scoped=true&lang=scss\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { shallowRef, watchEffect, readonly, watch, customRef, getCurrentScope, onScopeDispose, effectScope, getCurrentInstance, hasInjectionContext, inject, provide, ref, isRef, unref, toValue as toValue$1, computed, reactive, toRefs as toRefs$1, toRef as toRef$1, shallowReadonly, onBeforeMount, nextTick, onBeforeUnmount, onMounted, onUnmounted, isReactive } from 'vue';\n\nfunction computedEager(fn, options) {\n  var _a;\n  const result = shallowRef();\n  watchEffect(() => {\n    result.value = fn();\n  }, {\n    ...options,\n    flush: (_a = options == null ? void 0 : options.flush) != null ? _a : \"sync\"\n  });\n  return readonly(result);\n}\n\nfunction computedWithControl(source, fn, options = {}) {\n  let v = void 0;\n  let track;\n  let trigger;\n  let dirty = true;\n  const update = () => {\n    dirty = true;\n    trigger();\n  };\n  watch(source, update, { flush: \"sync\", ...options });\n  const get = typeof fn === \"function\" ? fn : fn.get;\n  const set = typeof fn === \"function\" ? void 0 : fn.set;\n  const result = customRef((_track, _trigger) => {\n    track = _track;\n    trigger = _trigger;\n    return {\n      get() {\n        if (dirty) {\n          v = get(v);\n          dirty = false;\n        }\n        track();\n        return v;\n      },\n      set(v2) {\n        set == null ? void 0 : set(v2);\n      }\n    };\n  });\n  result.trigger = update;\n  return result;\n}\n\nfunction tryOnScopeDispose(fn) {\n  if (getCurrentScope()) {\n    onScopeDispose(fn);\n    return true;\n  }\n  return false;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createEventHook() {\n  const fns = /* @__PURE__ */ new Set();\n  const off = (fn) => {\n    fns.delete(fn);\n  };\n  const clear = () => {\n    fns.clear();\n  };\n  const on = (fn) => {\n    fns.add(fn);\n    const offFn = () => off(fn);\n    tryOnScopeDispose(offFn);\n    return {\n      off: offFn\n    };\n  };\n  const trigger = (...args) => {\n    return Promise.all(Array.from(fns).map((fn) => fn(...args)));\n  };\n  return {\n    on,\n    off,\n    trigger,\n    clear\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createGlobalState(stateFactory) {\n  let initialized = false;\n  let state;\n  const scope = effectScope(true);\n  return (...args) => {\n    if (!initialized) {\n      state = scope.run(() => stateFactory(...args));\n      initialized = true;\n    }\n    return state;\n  };\n}\n\nconst localProvidedStateMap = /* @__PURE__ */ new WeakMap();\n\nconst injectLocal = /* @__NO_SIDE_EFFECTS__ */ (...args) => {\n  var _a;\n  const key = args[0];\n  const instance = (_a = getCurrentInstance()) == null ? void 0 : _a.proxy;\n  if (instance == null && !hasInjectionContext())\n    throw new Error(\"injectLocal must be called in setup\");\n  if (instance && localProvidedStateMap.has(instance) && key in localProvidedStateMap.get(instance))\n    return localProvidedStateMap.get(instance)[key];\n  return inject(...args);\n};\n\nfunction provideLocal(key, value) {\n  var _a;\n  const instance = (_a = getCurrentInstance()) == null ? void 0 : _a.proxy;\n  if (instance == null)\n    throw new Error(\"provideLocal must be called in setup\");\n  if (!localProvidedStateMap.has(instance))\n    localProvidedStateMap.set(instance, /* @__PURE__ */ Object.create(null));\n  const localProvidedState = localProvidedStateMap.get(instance);\n  localProvidedState[key] = value;\n  return provide(key, value);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createInjectionState(composable, options) {\n  const key = (options == null ? void 0 : options.injectionKey) || Symbol(composable.name || \"InjectionState\");\n  const defaultValue = options == null ? void 0 : options.defaultValue;\n  const useProvidingState = (...args) => {\n    const state = composable(...args);\n    provideLocal(key, state);\n    return state;\n  };\n  const useInjectedState = () => injectLocal(key, defaultValue);\n  return [useProvidingState, useInjectedState];\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createRef(value, deep) {\n  if (deep === true) {\n    return ref(value);\n  } else {\n    return shallowRef(value);\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createSharedComposable(composable) {\n  let subscribers = 0;\n  let state;\n  let scope;\n  const dispose = () => {\n    subscribers -= 1;\n    if (scope && subscribers <= 0) {\n      scope.stop();\n      state = void 0;\n      scope = void 0;\n    }\n  };\n  return (...args) => {\n    subscribers += 1;\n    if (!scope) {\n      scope = effectScope(true);\n      state = scope.run(() => composable(...args));\n    }\n    tryOnScopeDispose(dispose);\n    return state;\n  };\n}\n\nfunction extendRef(ref, extend, { enumerable = false, unwrap = true } = {}) {\n  for (const [key, value] of Object.entries(extend)) {\n    if (key === \"value\")\n      continue;\n    if (isRef(value) && unwrap) {\n      Object.defineProperty(ref, key, {\n        get() {\n          return value.value;\n        },\n        set(v) {\n          value.value = v;\n        },\n        enumerable\n      });\n    } else {\n      Object.defineProperty(ref, key, { value, enumerable });\n    }\n  }\n  return ref;\n}\n\nfunction get(obj, key) {\n  if (key == null)\n    return unref(obj);\n  return unref(obj)[key];\n}\n\nfunction isDefined(v) {\n  return unref(v) != null;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction makeDestructurable(obj, arr) {\n  if (typeof Symbol !== \"undefined\") {\n    const clone = { ...obj };\n    Object.defineProperty(clone, Symbol.iterator, {\n      enumerable: false,\n      value() {\n        let index = 0;\n        return {\n          next: () => ({\n            value: arr[index++],\n            done: index > arr.length\n          })\n        };\n      }\n    });\n    return clone;\n  } else {\n    return Object.assign([...arr], obj);\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction reactify(fn, options) {\n  const unrefFn = (options == null ? void 0 : options.computedGetter) === false ? unref : toValue$1;\n  return function(...args) {\n    return computed(() => fn.apply(this, args.map((i) => unrefFn(i))));\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction reactifyObject(obj, optionsOrKeys = {}) {\n  let keys = [];\n  let options;\n  if (Array.isArray(optionsOrKeys)) {\n    keys = optionsOrKeys;\n  } else {\n    options = optionsOrKeys;\n    const { includeOwnProperties = true } = optionsOrKeys;\n    keys.push(...Object.keys(obj));\n    if (includeOwnProperties)\n      keys.push(...Object.getOwnPropertyNames(obj));\n  }\n  return Object.fromEntries(\n    keys.map((key) => {\n      const value = obj[key];\n      return [\n        key,\n        typeof value === \"function\" ? reactify(value.bind(obj), options) : value\n      ];\n    })\n  );\n}\n\nfunction toReactive(objectRef) {\n  if (!isRef(objectRef))\n    return reactive(objectRef);\n  const proxy = new Proxy({}, {\n    get(_, p, receiver) {\n      return unref(Reflect.get(objectRef.value, p, receiver));\n    },\n    set(_, p, value) {\n      if (isRef(objectRef.value[p]) && !isRef(value))\n        objectRef.value[p].value = value;\n      else\n        objectRef.value[p] = value;\n      return true;\n    },\n    deleteProperty(_, p) {\n      return Reflect.deleteProperty(objectRef.value, p);\n    },\n    has(_, p) {\n      return Reflect.has(objectRef.value, p);\n    },\n    ownKeys() {\n      return Object.keys(objectRef.value);\n    },\n    getOwnPropertyDescriptor() {\n      return {\n        enumerable: true,\n        configurable: true\n      };\n    }\n  });\n  return reactive(proxy);\n}\n\nfunction reactiveComputed(fn) {\n  return toReactive(computed(fn));\n}\n\nfunction reactiveOmit(obj, ...keys) {\n  const flatKeys = keys.flat();\n  const predicate = flatKeys[0];\n  return reactiveComputed(() => typeof predicate === \"function\" ? Object.fromEntries(Object.entries(toRefs$1(obj)).filter(([k, v]) => !predicate(toValue$1(v), k))) : Object.fromEntries(Object.entries(toRefs$1(obj)).filter((e) => !flatKeys.includes(e[0]))));\n}\n\nconst isClient = typeof window !== \"undefined\" && typeof document !== \"undefined\";\nconst isWorker = typeof WorkerGlobalScope !== \"undefined\" && globalThis instanceof WorkerGlobalScope;\nconst isDef = (val) => typeof val !== \"undefined\";\nconst notNullish = (val) => val != null;\nconst assert = (condition, ...infos) => {\n  if (!condition)\n    console.warn(...infos);\n};\nconst toString = Object.prototype.toString;\nconst isObject = (val) => toString.call(val) === \"[object Object]\";\nconst now = () => Date.now();\nconst timestamp = () => +Date.now();\nconst clamp = (n, min, max) => Math.min(max, Math.max(min, n));\nconst noop = () => {\n};\nconst rand = (min, max) => {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\nconst hasOwn = (val, key) => Object.prototype.hasOwnProperty.call(val, key);\nconst isIOS = /* @__PURE__ */ getIsIOS();\nfunction getIsIOS() {\n  var _a, _b;\n  return isClient && ((_a = window == null ? void 0 : window.navigator) == null ? void 0 : _a.userAgent) && (/iP(?:ad|hone|od)/.test(window.navigator.userAgent) || ((_b = window == null ? void 0 : window.navigator) == null ? void 0 : _b.maxTouchPoints) > 2 && /iPad|Macintosh/.test(window == null ? void 0 : window.navigator.userAgent));\n}\n\nfunction toRef(...args) {\n  if (args.length !== 1)\n    return toRef$1(...args);\n  const r = args[0];\n  return typeof r === \"function\" ? readonly(customRef(() => ({ get: r, set: noop }))) : ref(r);\n}\nconst resolveRef = toRef;\n\nfunction reactivePick(obj, ...keys) {\n  const flatKeys = keys.flat();\n  const predicate = flatKeys[0];\n  return reactiveComputed(() => typeof predicate === \"function\" ? Object.fromEntries(Object.entries(toRefs$1(obj)).filter(([k, v]) => predicate(toValue$1(v), k))) : Object.fromEntries(flatKeys.map((k) => [k, toRef(obj, k)])));\n}\n\nfunction refAutoReset(defaultValue, afterMs = 1e4) {\n  return customRef((track, trigger) => {\n    let value = toValue$1(defaultValue);\n    let timer;\n    const resetAfter = () => setTimeout(() => {\n      value = toValue$1(defaultValue);\n      trigger();\n    }, toValue$1(afterMs));\n    tryOnScopeDispose(() => {\n      clearTimeout(timer);\n    });\n    return {\n      get() {\n        track();\n        return value;\n      },\n      set(newValue) {\n        value = newValue;\n        trigger();\n        clearTimeout(timer);\n        timer = resetAfter();\n      }\n    };\n  });\n}\n\nfunction createFilterWrapper(filter, fn) {\n  function wrapper(...args) {\n    return new Promise((resolve, reject) => {\n      Promise.resolve(filter(() => fn.apply(this, args), { fn, thisArg: this, args })).then(resolve).catch(reject);\n    });\n  }\n  return wrapper;\n}\nconst bypassFilter = (invoke) => {\n  return invoke();\n};\nfunction debounceFilter(ms, options = {}) {\n  let timer;\n  let maxTimer;\n  let lastRejector = noop;\n  const _clearTimeout = (timer2) => {\n    clearTimeout(timer2);\n    lastRejector();\n    lastRejector = noop;\n  };\n  let lastInvoker;\n  const filter = (invoke) => {\n    const duration = toValue$1(ms);\n    const maxDuration = toValue$1(options.maxWait);\n    if (timer)\n      _clearTimeout(timer);\n    if (duration <= 0 || maxDuration !== void 0 && maxDuration <= 0) {\n      if (maxTimer) {\n        _clearTimeout(maxTimer);\n        maxTimer = void 0;\n      }\n      return Promise.resolve(invoke());\n    }\n    return new Promise((resolve, reject) => {\n      lastRejector = options.rejectOnCancel ? reject : resolve;\n      lastInvoker = invoke;\n      if (maxDuration && !maxTimer) {\n        maxTimer = setTimeout(() => {\n          if (timer)\n            _clearTimeout(timer);\n          maxTimer = void 0;\n          resolve(lastInvoker());\n        }, maxDuration);\n      }\n      timer = setTimeout(() => {\n        if (maxTimer)\n          _clearTimeout(maxTimer);\n        maxTimer = void 0;\n        resolve(invoke());\n      }, duration);\n    });\n  };\n  return filter;\n}\nfunction throttleFilter(...args) {\n  let lastExec = 0;\n  let timer;\n  let isLeading = true;\n  let lastRejector = noop;\n  let lastValue;\n  let ms;\n  let trailing;\n  let leading;\n  let rejectOnCancel;\n  if (!isRef(args[0]) && typeof args[0] === \"object\")\n    ({ delay: ms, trailing = true, leading = true, rejectOnCancel = false } = args[0]);\n  else\n    [ms, trailing = true, leading = true, rejectOnCancel = false] = args;\n  const clear = () => {\n    if (timer) {\n      clearTimeout(timer);\n      timer = void 0;\n      lastRejector();\n      lastRejector = noop;\n    }\n  };\n  const filter = (_invoke) => {\n    const duration = toValue$1(ms);\n    const elapsed = Date.now() - lastExec;\n    const invoke = () => {\n      return lastValue = _invoke();\n    };\n    clear();\n    if (duration <= 0) {\n      lastExec = Date.now();\n      return invoke();\n    }\n    if (elapsed > duration && (leading || !isLeading)) {\n      lastExec = Date.now();\n      invoke();\n    } else if (trailing) {\n      lastValue = new Promise((resolve, reject) => {\n        lastRejector = rejectOnCancel ? reject : resolve;\n        timer = setTimeout(() => {\n          lastExec = Date.now();\n          isLeading = true;\n          resolve(invoke());\n          clear();\n        }, Math.max(0, duration - elapsed));\n      });\n    }\n    if (!leading && !timer)\n      timer = setTimeout(() => isLeading = true, duration);\n    isLeading = false;\n    return lastValue;\n  };\n  return filter;\n}\nfunction pausableFilter(extendFilter = bypassFilter, options = {}) {\n  const {\n    initialState = \"active\"\n  } = options;\n  const isActive = toRef(initialState === \"active\");\n  function pause() {\n    isActive.value = false;\n  }\n  function resume() {\n    isActive.value = true;\n  }\n  const eventFilter = (...args) => {\n    if (isActive.value)\n      extendFilter(...args);\n  };\n  return { isActive: readonly(isActive), pause, resume, eventFilter };\n}\n\nfunction promiseTimeout(ms, throwOnTimeout = false, reason = \"Timeout\") {\n  return new Promise((resolve, reject) => {\n    if (throwOnTimeout)\n      setTimeout(() => reject(reason), ms);\n    else\n      setTimeout(resolve, ms);\n  });\n}\nfunction identity(arg) {\n  return arg;\n}\nfunction createSingletonPromise(fn) {\n  let _promise;\n  function wrapper() {\n    if (!_promise)\n      _promise = fn();\n    return _promise;\n  }\n  wrapper.reset = async () => {\n    const _prev = _promise;\n    _promise = void 0;\n    if (_prev)\n      await _prev;\n  };\n  return wrapper;\n}\nfunction invoke(fn) {\n  return fn();\n}\nfunction containsProp(obj, ...props) {\n  return props.some((k) => k in obj);\n}\nfunction increaseWithUnit(target, delta) {\n  var _a;\n  if (typeof target === \"number\")\n    return target + delta;\n  const value = ((_a = target.match(/^-?\\d+\\.?\\d*/)) == null ? void 0 : _a[0]) || \"\";\n  const unit = target.slice(value.length);\n  const result = Number.parseFloat(value) + delta;\n  if (Number.isNaN(result))\n    return target;\n  return result + unit;\n}\nfunction pxValue(px) {\n  return px.endsWith(\"rem\") ? Number.parseFloat(px) * 16 : Number.parseFloat(px);\n}\nfunction objectPick(obj, keys, omitUndefined = false) {\n  return keys.reduce((n, k) => {\n    if (k in obj) {\n      if (!omitUndefined || obj[k] !== void 0)\n        n[k] = obj[k];\n    }\n    return n;\n  }, {});\n}\nfunction objectOmit(obj, keys, omitUndefined = false) {\n  return Object.fromEntries(Object.entries(obj).filter(([key, value]) => {\n    return (!omitUndefined || value !== void 0) && !keys.includes(key);\n  }));\n}\nfunction objectEntries(obj) {\n  return Object.entries(obj);\n}\nfunction toArray(value) {\n  return Array.isArray(value) ? value : [value];\n}\n\nfunction cacheStringFunction(fn) {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (str) => {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n}\nconst hyphenateRE = /\\B([A-Z])/g;\nconst hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, \"-$1\").toLowerCase());\nconst camelizeRE = /-(\\w)/g;\nconst camelize = cacheStringFunction((str) => {\n  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : \"\");\n});\n\nfunction getLifeCycleTarget(target) {\n  return target || getCurrentInstance();\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useDebounceFn(fn, ms = 200, options = {}) {\n  return createFilterWrapper(\n    debounceFilter(ms, options),\n    fn\n  );\n}\n\nfunction refDebounced(value, ms = 200, options = {}) {\n  const debounced = ref(toValue$1(value));\n  const updater = useDebounceFn(() => {\n    debounced.value = value.value;\n  }, ms, options);\n  watch(value, () => updater());\n  return shallowReadonly(debounced);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction refDefault(source, defaultValue) {\n  return computed({\n    get() {\n      var _a;\n      return (_a = source.value) != null ? _a : defaultValue;\n    },\n    set(value) {\n      source.value = value;\n    }\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useThrottleFn(fn, ms = 200, trailing = false, leading = true, rejectOnCancel = false) {\n  return createFilterWrapper(\n    throttleFilter(ms, trailing, leading, rejectOnCancel),\n    fn\n  );\n}\n\nfunction refThrottled(value, delay = 200, trailing = true, leading = true) {\n  if (delay <= 0)\n    return value;\n  const throttled = ref(toValue$1(value));\n  const updater = useThrottleFn(() => {\n    throttled.value = value.value;\n  }, delay, trailing, leading);\n  watch(value, () => updater());\n  return throttled;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction refWithControl(initial, options = {}) {\n  let source = initial;\n  let track;\n  let trigger;\n  const ref = customRef((_track, _trigger) => {\n    track = _track;\n    trigger = _trigger;\n    return {\n      get() {\n        return get();\n      },\n      set(v) {\n        set(v);\n      }\n    };\n  });\n  function get(tracking = true) {\n    if (tracking)\n      track();\n    return source;\n  }\n  function set(value, triggering = true) {\n    var _a, _b;\n    if (value === source)\n      return;\n    const old = source;\n    if (((_a = options.onBeforeChange) == null ? void 0 : _a.call(options, value, old)) === false)\n      return;\n    source = value;\n    (_b = options.onChanged) == null ? void 0 : _b.call(options, value, old);\n    if (triggering)\n      trigger();\n  }\n  const untrackedGet = () => get(false);\n  const silentSet = (v) => set(v, false);\n  const peek = () => get(false);\n  const lay = (v) => set(v, false);\n  return extendRef(\n    ref,\n    {\n      get,\n      set,\n      untrackedGet,\n      silentSet,\n      peek,\n      lay\n    },\n    { enumerable: true }\n  );\n}\nconst controlledRef = refWithControl;\n\nfunction set(...args) {\n  if (args.length === 2) {\n    const [ref, value] = args;\n    ref.value = value;\n  }\n  if (args.length === 3) {\n    const [target, key, value] = args;\n    target[key] = value;\n  }\n}\n\nfunction watchWithFilter(source, cb, options = {}) {\n  const {\n    eventFilter = bypassFilter,\n    ...watchOptions\n  } = options;\n  return watch(\n    source,\n    createFilterWrapper(\n      eventFilter,\n      cb\n    ),\n    watchOptions\n  );\n}\n\nfunction watchPausable(source, cb, options = {}) {\n  const {\n    eventFilter: filter,\n    initialState = \"active\",\n    ...watchOptions\n  } = options;\n  const { eventFilter, pause, resume, isActive } = pausableFilter(filter, { initialState });\n  const stop = watchWithFilter(\n    source,\n    cb,\n    {\n      ...watchOptions,\n      eventFilter\n    }\n  );\n  return { stop, pause, resume, isActive };\n}\n\nfunction syncRef(left, right, ...[options]) {\n  const {\n    flush = \"sync\",\n    deep = false,\n    immediate = true,\n    direction = \"both\",\n    transform = {}\n  } = options || {};\n  const watchers = [];\n  const transformLTR = \"ltr\" in transform && transform.ltr || ((v) => v);\n  const transformRTL = \"rtl\" in transform && transform.rtl || ((v) => v);\n  if (direction === \"both\" || direction === \"ltr\") {\n    watchers.push(watchPausable(\n      left,\n      (newValue) => {\n        watchers.forEach((w) => w.pause());\n        right.value = transformLTR(newValue);\n        watchers.forEach((w) => w.resume());\n      },\n      { flush, deep, immediate }\n    ));\n  }\n  if (direction === \"both\" || direction === \"rtl\") {\n    watchers.push(watchPausable(\n      right,\n      (newValue) => {\n        watchers.forEach((w) => w.pause());\n        left.value = transformRTL(newValue);\n        watchers.forEach((w) => w.resume());\n      },\n      { flush, deep, immediate }\n    ));\n  }\n  const stop = () => {\n    watchers.forEach((w) => w.stop());\n  };\n  return stop;\n}\n\nfunction syncRefs(source, targets, options = {}) {\n  const {\n    flush = \"sync\",\n    deep = false,\n    immediate = true\n  } = options;\n  const targetsArray = toArray(targets);\n  return watch(\n    source,\n    (newValue) => targetsArray.forEach((target) => target.value = newValue),\n    { flush, deep, immediate }\n  );\n}\n\nfunction toRefs(objectRef, options = {}) {\n  if (!isRef(objectRef))\n    return toRefs$1(objectRef);\n  const result = Array.isArray(objectRef.value) ? Array.from({ length: objectRef.value.length }) : {};\n  for (const key in objectRef.value) {\n    result[key] = customRef(() => ({\n      get() {\n        return objectRef.value[key];\n      },\n      set(v) {\n        var _a;\n        const replaceRef = (_a = toValue$1(options.replaceRef)) != null ? _a : true;\n        if (replaceRef) {\n          if (Array.isArray(objectRef.value)) {\n            const copy = [...objectRef.value];\n            copy[key] = v;\n            objectRef.value = copy;\n          } else {\n            const newObject = { ...objectRef.value, [key]: v };\n            Object.setPrototypeOf(newObject, Object.getPrototypeOf(objectRef.value));\n            objectRef.value = newObject;\n          }\n        } else {\n          objectRef.value[key] = v;\n        }\n      }\n    }));\n  }\n  return result;\n}\n\nconst toValue = toValue$1;\nconst resolveUnref = toValue$1;\n\nfunction tryOnBeforeMount(fn, sync = true, target) {\n  const instance = getLifeCycleTarget(target);\n  if (instance)\n    onBeforeMount(fn, target);\n  else if (sync)\n    fn();\n  else\n    nextTick(fn);\n}\n\nfunction tryOnBeforeUnmount(fn, target) {\n  const instance = getLifeCycleTarget(target);\n  if (instance)\n    onBeforeUnmount(fn, target);\n}\n\nfunction tryOnMounted(fn, sync = true, target) {\n  const instance = getLifeCycleTarget(target);\n  if (instance)\n    onMounted(fn, target);\n  else if (sync)\n    fn();\n  else\n    nextTick(fn);\n}\n\nfunction tryOnUnmounted(fn, target) {\n  const instance = getLifeCycleTarget(target);\n  if (instance)\n    onUnmounted(fn, target);\n}\n\nfunction createUntil(r, isNot = false) {\n  function toMatch(condition, { flush = \"sync\", deep = false, timeout, throwOnTimeout } = {}) {\n    let stop = null;\n    const watcher = new Promise((resolve) => {\n      stop = watch(\n        r,\n        (v) => {\n          if (condition(v) !== isNot) {\n            if (stop)\n              stop();\n            else\n              nextTick(() => stop == null ? void 0 : stop());\n            resolve(v);\n          }\n        },\n        {\n          flush,\n          deep,\n          immediate: true\n        }\n      );\n    });\n    const promises = [watcher];\n    if (timeout != null) {\n      promises.push(\n        promiseTimeout(timeout, throwOnTimeout).then(() => toValue$1(r)).finally(() => stop == null ? void 0 : stop())\n      );\n    }\n    return Promise.race(promises);\n  }\n  function toBe(value, options) {\n    if (!isRef(value))\n      return toMatch((v) => v === value, options);\n    const { flush = \"sync\", deep = false, timeout, throwOnTimeout } = options != null ? options : {};\n    let stop = null;\n    const watcher = new Promise((resolve) => {\n      stop = watch(\n        [r, value],\n        ([v1, v2]) => {\n          if (isNot !== (v1 === v2)) {\n            if (stop)\n              stop();\n            else\n              nextTick(() => stop == null ? void 0 : stop());\n            resolve(v1);\n          }\n        },\n        {\n          flush,\n          deep,\n          immediate: true\n        }\n      );\n    });\n    const promises = [watcher];\n    if (timeout != null) {\n      promises.push(\n        promiseTimeout(timeout, throwOnTimeout).then(() => toValue$1(r)).finally(() => {\n          stop == null ? void 0 : stop();\n          return toValue$1(r);\n        })\n      );\n    }\n    return Promise.race(promises);\n  }\n  function toBeTruthy(options) {\n    return toMatch((v) => Boolean(v), options);\n  }\n  function toBeNull(options) {\n    return toBe(null, options);\n  }\n  function toBeUndefined(options) {\n    return toBe(void 0, options);\n  }\n  function toBeNaN(options) {\n    return toMatch(Number.isNaN, options);\n  }\n  function toContains(value, options) {\n    return toMatch((v) => {\n      const array = Array.from(v);\n      return array.includes(value) || array.includes(toValue$1(value));\n    }, options);\n  }\n  function changed(options) {\n    return changedTimes(1, options);\n  }\n  function changedTimes(n = 1, options) {\n    let count = -1;\n    return toMatch(() => {\n      count += 1;\n      return count >= n;\n    }, options);\n  }\n  if (Array.isArray(toValue$1(r))) {\n    const instance = {\n      toMatch,\n      toContains,\n      changed,\n      changedTimes,\n      get not() {\n        return createUntil(r, !isNot);\n      }\n    };\n    return instance;\n  } else {\n    const instance = {\n      toMatch,\n      toBe,\n      toBeTruthy,\n      toBeNull,\n      toBeNaN,\n      toBeUndefined,\n      changed,\n      changedTimes,\n      get not() {\n        return createUntil(r, !isNot);\n      }\n    };\n    return instance;\n  }\n}\nfunction until(r) {\n  return createUntil(r);\n}\n\nfunction defaultComparator(value, othVal) {\n  return value === othVal;\n}\n// @__NO_SIDE_EFFECTS__\nfunction useArrayDifference(...args) {\n  var _a, _b;\n  const list = args[0];\n  const values = args[1];\n  let compareFn = (_a = args[2]) != null ? _a : defaultComparator;\n  const {\n    symmetric = false\n  } = (_b = args[3]) != null ? _b : {};\n  if (typeof compareFn === \"string\") {\n    const key = compareFn;\n    compareFn = (value, othVal) => value[key] === othVal[key];\n  }\n  const diff1 = computed(() => toValue$1(list).filter((x) => toValue$1(values).findIndex((y) => compareFn(x, y)) === -1));\n  if (symmetric) {\n    const diff2 = computed(() => toValue$1(values).filter((x) => toValue$1(list).findIndex((y) => compareFn(x, y)) === -1));\n    return computed(() => symmetric ? [...toValue$1(diff1), ...toValue$1(diff2)] : toValue$1(diff1));\n  } else {\n    return diff1;\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayEvery(list, fn) {\n  return computed(() => toValue$1(list).every((element, index, array) => fn(toValue$1(element), index, array)));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayFilter(list, fn) {\n  return computed(() => toValue$1(list).map((i) => toValue$1(i)).filter(fn));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayFind(list, fn) {\n  return computed(() => toValue$1(\n    toValue$1(list).find((element, index, array) => fn(toValue$1(element), index, array))\n  ));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayFindIndex(list, fn) {\n  return computed(() => toValue$1(list).findIndex((element, index, array) => fn(toValue$1(element), index, array)));\n}\n\nfunction findLast(arr, cb) {\n  let index = arr.length;\n  while (index-- > 0) {\n    if (cb(arr[index], index, arr))\n      return arr[index];\n  }\n  return void 0;\n}\n// @__NO_SIDE_EFFECTS__\nfunction useArrayFindLast(list, fn) {\n  return computed(() => toValue$1(\n    !Array.prototype.findLast ? findLast(toValue$1(list), (element, index, array) => fn(toValue$1(element), index, array)) : toValue$1(list).findLast((element, index, array) => fn(toValue$1(element), index, array))\n  ));\n}\n\nfunction isArrayIncludesOptions(obj) {\n  return isObject(obj) && containsProp(obj, \"formIndex\", \"comparator\");\n}\n// @__NO_SIDE_EFFECTS__\nfunction useArrayIncludes(...args) {\n  var _a;\n  const list = args[0];\n  const value = args[1];\n  let comparator = args[2];\n  let formIndex = 0;\n  if (isArrayIncludesOptions(comparator)) {\n    formIndex = (_a = comparator.fromIndex) != null ? _a : 0;\n    comparator = comparator.comparator;\n  }\n  if (typeof comparator === \"string\") {\n    const key = comparator;\n    comparator = (element, value2) => element[key] === toValue$1(value2);\n  }\n  comparator = comparator != null ? comparator : (element, value2) => element === toValue$1(value2);\n  return computed(() => toValue$1(list).slice(formIndex).some((element, index, array) => comparator(\n    toValue$1(element),\n    toValue$1(value),\n    index,\n    toValue$1(array)\n  )));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayJoin(list, separator) {\n  return computed(() => toValue$1(list).map((i) => toValue$1(i)).join(toValue$1(separator)));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayMap(list, fn) {\n  return computed(() => toValue$1(list).map((i) => toValue$1(i)).map(fn));\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArrayReduce(list, reducer, ...args) {\n  const reduceCallback = (sum, value, index) => reducer(toValue$1(sum), toValue$1(value), index);\n  return computed(() => {\n    const resolved = toValue$1(list);\n    return args.length ? resolved.reduce(reduceCallback, typeof args[0] === \"function\" ? toValue$1(args[0]()) : toValue$1(args[0])) : resolved.reduce(reduceCallback);\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useArraySome(list, fn) {\n  return computed(() => toValue$1(list).some((element, index, array) => fn(toValue$1(element), index, array)));\n}\n\nfunction uniq(array) {\n  return Array.from(new Set(array));\n}\nfunction uniqueElementsBy(array, fn) {\n  return array.reduce((acc, v) => {\n    if (!acc.some((x) => fn(v, x, array)))\n      acc.push(v);\n    return acc;\n  }, []);\n}\n// @__NO_SIDE_EFFECTS__\nfunction useArrayUnique(list, compareFn) {\n  return computed(() => {\n    const resolvedList = toValue$1(list).map((element) => toValue$1(element));\n    return compareFn ? uniqueElementsBy(resolvedList, compareFn) : uniq(resolvedList);\n  });\n}\n\nfunction useCounter(initialValue = 0, options = {}) {\n  let _initialValue = unref(initialValue);\n  const count = shallowRef(initialValue);\n  const {\n    max = Number.POSITIVE_INFINITY,\n    min = Number.NEGATIVE_INFINITY\n  } = options;\n  const inc = (delta = 1) => count.value = Math.max(Math.min(max, count.value + delta), min);\n  const dec = (delta = 1) => count.value = Math.min(Math.max(min, count.value - delta), max);\n  const get = () => count.value;\n  const set = (val) => count.value = Math.max(min, Math.min(max, val));\n  const reset = (val = _initialValue) => {\n    _initialValue = val;\n    return set(val);\n  };\n  return { count: shallowReadonly(count), inc, dec, get, set, reset };\n}\n\nconst REGEX_PARSE = /^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[T\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/i;\nconst REGEX_FORMAT = /[YMDHhms]o|\\[([^\\]]+)\\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|z{1,4}|SSS/g;\nfunction defaultMeridiem(hours, minutes, isLowercase, hasPeriod) {\n  let m = hours < 12 ? \"AM\" : \"PM\";\n  if (hasPeriod)\n    m = m.split(\"\").reduce((acc, curr) => acc += `${curr}.`, \"\");\n  return isLowercase ? m.toLowerCase() : m;\n}\nfunction formatOrdinal(num) {\n  const suffixes = [\"th\", \"st\", \"nd\", \"rd\"];\n  const v = num % 100;\n  return num + (suffixes[(v - 20) % 10] || suffixes[v] || suffixes[0]);\n}\nfunction formatDate(date, formatStr, options = {}) {\n  var _a;\n  const years = date.getFullYear();\n  const month = date.getMonth();\n  const days = date.getDate();\n  const hours = date.getHours();\n  const minutes = date.getMinutes();\n  const seconds = date.getSeconds();\n  const milliseconds = date.getMilliseconds();\n  const day = date.getDay();\n  const meridiem = (_a = options.customMeridiem) != null ? _a : defaultMeridiem;\n  const stripTimeZone = (dateString) => {\n    var _a2;\n    return (_a2 = dateString.split(\" \")[1]) != null ? _a2 : \"\";\n  };\n  const matches = {\n    Yo: () => formatOrdinal(years),\n    YY: () => String(years).slice(-2),\n    YYYY: () => years,\n    M: () => month + 1,\n    Mo: () => formatOrdinal(month + 1),\n    MM: () => `${month + 1}`.padStart(2, \"0\"),\n    MMM: () => date.toLocaleDateString(toValue$1(options.locales), { month: \"short\" }),\n    MMMM: () => date.toLocaleDateString(toValue$1(options.locales), { month: \"long\" }),\n    D: () => String(days),\n    Do: () => formatOrdinal(days),\n    DD: () => `${days}`.padStart(2, \"0\"),\n    H: () => String(hours),\n    Ho: () => formatOrdinal(hours),\n    HH: () => `${hours}`.padStart(2, \"0\"),\n    h: () => `${hours % 12 || 12}`.padStart(1, \"0\"),\n    ho: () => formatOrdinal(hours % 12 || 12),\n    hh: () => `${hours % 12 || 12}`.padStart(2, \"0\"),\n    m: () => String(minutes),\n    mo: () => formatOrdinal(minutes),\n    mm: () => `${minutes}`.padStart(2, \"0\"),\n    s: () => String(seconds),\n    so: () => formatOrdinal(seconds),\n    ss: () => `${seconds}`.padStart(2, \"0\"),\n    SSS: () => `${milliseconds}`.padStart(3, \"0\"),\n    d: () => day,\n    dd: () => date.toLocaleDateString(toValue$1(options.locales), { weekday: \"narrow\" }),\n    ddd: () => date.toLocaleDateString(toValue$1(options.locales), { weekday: \"short\" }),\n    dddd: () => date.toLocaleDateString(toValue$1(options.locales), { weekday: \"long\" }),\n    A: () => meridiem(hours, minutes),\n    AA: () => meridiem(hours, minutes, false, true),\n    a: () => meridiem(hours, minutes, true),\n    aa: () => meridiem(hours, minutes, true, true),\n    z: () => stripTimeZone(date.toLocaleDateString(toValue$1(options.locales), { timeZoneName: \"shortOffset\" })),\n    zz: () => stripTimeZone(date.toLocaleDateString(toValue$1(options.locales), { timeZoneName: \"shortOffset\" })),\n    zzz: () => stripTimeZone(date.toLocaleDateString(toValue$1(options.locales), { timeZoneName: \"shortOffset\" })),\n    zzzz: () => stripTimeZone(date.toLocaleDateString(toValue$1(options.locales), { timeZoneName: \"longOffset\" }))\n  };\n  return formatStr.replace(REGEX_FORMAT, (match, $1) => {\n    var _a2, _b;\n    return (_b = $1 != null ? $1 : (_a2 = matches[match]) == null ? void 0 : _a2.call(matches)) != null ? _b : match;\n  });\n}\nfunction normalizeDate(date) {\n  if (date === null)\n    return new Date(Number.NaN);\n  if (date === void 0)\n    return /* @__PURE__ */ new Date();\n  if (date instanceof Date)\n    return new Date(date);\n  if (typeof date === \"string\" && !/Z$/i.test(date)) {\n    const d = date.match(REGEX_PARSE);\n    if (d) {\n      const m = d[2] - 1 || 0;\n      const ms = (d[7] || \"0\").substring(0, 3);\n      return new Date(d[1], m, d[3] || 1, d[4] || 0, d[5] || 0, d[6] || 0, ms);\n    }\n  }\n  return new Date(date);\n}\n// @__NO_SIDE_EFFECTS__\nfunction useDateFormat(date, formatStr = \"HH:mm:ss\", options = {}) {\n  return computed(() => formatDate(normalizeDate(toValue$1(date)), toValue$1(formatStr), options));\n}\n\nfunction useIntervalFn(cb, interval = 1e3, options = {}) {\n  const {\n    immediate = true,\n    immediateCallback = false\n  } = options;\n  let timer = null;\n  const isActive = shallowRef(false);\n  function clean() {\n    if (timer) {\n      clearInterval(timer);\n      timer = null;\n    }\n  }\n  function pause() {\n    isActive.value = false;\n    clean();\n  }\n  function resume() {\n    const intervalValue = toValue$1(interval);\n    if (intervalValue <= 0)\n      return;\n    isActive.value = true;\n    if (immediateCallback)\n      cb();\n    clean();\n    if (isActive.value)\n      timer = setInterval(cb, intervalValue);\n  }\n  if (immediate && isClient)\n    resume();\n  if (isRef(interval) || typeof interval === \"function\") {\n    const stopWatch = watch(interval, () => {\n      if (isActive.value && isClient)\n        resume();\n    });\n    tryOnScopeDispose(stopWatch);\n  }\n  tryOnScopeDispose(pause);\n  return {\n    isActive: shallowReadonly(isActive),\n    pause,\n    resume\n  };\n}\n\nfunction useInterval(interval = 1e3, options = {}) {\n  const {\n    controls: exposeControls = false,\n    immediate = true,\n    callback\n  } = options;\n  const counter = shallowRef(0);\n  const update = () => counter.value += 1;\n  const reset = () => {\n    counter.value = 0;\n  };\n  const controls = useIntervalFn(\n    callback ? () => {\n      update();\n      callback(counter.value);\n    } : update,\n    interval,\n    { immediate }\n  );\n  if (exposeControls) {\n    return {\n      counter: shallowReadonly(counter),\n      reset,\n      ...controls\n    };\n  } else {\n    return shallowReadonly(counter);\n  }\n}\n\nfunction useLastChanged(source, options = {}) {\n  var _a;\n  const ms = shallowRef((_a = options.initialValue) != null ? _a : null);\n  watch(\n    source,\n    () => ms.value = timestamp(),\n    options\n  );\n  return shallowReadonly(ms);\n}\n\nfunction useTimeoutFn(cb, interval, options = {}) {\n  const {\n    immediate = true,\n    immediateCallback = false\n  } = options;\n  const isPending = shallowRef(false);\n  let timer;\n  function clear() {\n    if (timer) {\n      clearTimeout(timer);\n      timer = void 0;\n    }\n  }\n  function stop() {\n    isPending.value = false;\n    clear();\n  }\n  function start(...args) {\n    if (immediateCallback)\n      cb();\n    clear();\n    isPending.value = true;\n    timer = setTimeout(() => {\n      isPending.value = false;\n      timer = void 0;\n      cb(...args);\n    }, toValue$1(interval));\n  }\n  if (immediate) {\n    isPending.value = true;\n    if (isClient)\n      start();\n  }\n  tryOnScopeDispose(stop);\n  return {\n    isPending: shallowReadonly(isPending),\n    start,\n    stop\n  };\n}\n\nfunction useTimeout(interval = 1e3, options = {}) {\n  const {\n    controls: exposeControls = false,\n    callback\n  } = options;\n  const controls = useTimeoutFn(\n    callback != null ? callback : noop,\n    interval,\n    options\n  );\n  const ready = computed(() => !controls.isPending.value);\n  if (exposeControls) {\n    return {\n      ready,\n      ...controls\n    };\n  } else {\n    return ready;\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useToNumber(value, options = {}) {\n  const {\n    method = \"parseFloat\",\n    radix,\n    nanToZero\n  } = options;\n  return computed(() => {\n    let resolved = toValue$1(value);\n    if (typeof method === \"function\")\n      resolved = method(resolved);\n    else if (typeof resolved === \"string\")\n      resolved = Number[method](resolved, radix);\n    if (nanToZero && Number.isNaN(resolved))\n      resolved = 0;\n    return resolved;\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useToString(value) {\n  return computed(() => `${toValue$1(value)}`);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useToggle(initialValue = false, options = {}) {\n  const {\n    truthyValue = true,\n    falsyValue = false\n  } = options;\n  const valueIsRef = isRef(initialValue);\n  const _value = shallowRef(initialValue);\n  function toggle(value) {\n    if (arguments.length) {\n      _value.value = value;\n      return _value.value;\n    } else {\n      const truthy = toValue$1(truthyValue);\n      _value.value = _value.value === truthy ? toValue$1(falsyValue) : truthy;\n      return _value.value;\n    }\n  }\n  if (valueIsRef)\n    return toggle;\n  else\n    return [_value, toggle];\n}\n\nfunction watchArray(source, cb, options) {\n  let oldList = (options == null ? void 0 : options.immediate) ? [] : [...typeof source === \"function\" ? source() : Array.isArray(source) ? source : toValue$1(source)];\n  return watch(source, (newList, _, onCleanup) => {\n    const oldListRemains = Array.from({ length: oldList.length });\n    const added = [];\n    for (const obj of newList) {\n      let found = false;\n      for (let i = 0; i < oldList.length; i++) {\n        if (!oldListRemains[i] && obj === oldList[i]) {\n          oldListRemains[i] = true;\n          found = true;\n          break;\n        }\n      }\n      if (!found)\n        added.push(obj);\n    }\n    const removed = oldList.filter((_2, i) => !oldListRemains[i]);\n    cb(newList, oldList, added, removed, onCleanup);\n    oldList = [...newList];\n  }, options);\n}\n\nfunction watchAtMost(source, cb, options) {\n  const {\n    count,\n    ...watchOptions\n  } = options;\n  const current = shallowRef(0);\n  const stop = watchWithFilter(\n    source,\n    (...args) => {\n      current.value += 1;\n      if (current.value >= toValue$1(count))\n        nextTick(() => stop());\n      cb(...args);\n    },\n    watchOptions\n  );\n  return { count: current, stop };\n}\n\nfunction watchDebounced(source, cb, options = {}) {\n  const {\n    debounce = 0,\n    maxWait = void 0,\n    ...watchOptions\n  } = options;\n  return watchWithFilter(\n    source,\n    cb,\n    {\n      ...watchOptions,\n      eventFilter: debounceFilter(debounce, { maxWait })\n    }\n  );\n}\n\nfunction watchDeep(source, cb, options) {\n  return watch(\n    source,\n    cb,\n    {\n      ...options,\n      deep: true\n    }\n  );\n}\n\nfunction watchIgnorable(source, cb, options = {}) {\n  const {\n    eventFilter = bypassFilter,\n    ...watchOptions\n  } = options;\n  const filteredCb = createFilterWrapper(\n    eventFilter,\n    cb\n  );\n  let ignoreUpdates;\n  let ignorePrevAsyncUpdates;\n  let stop;\n  if (watchOptions.flush === \"sync\") {\n    let ignore = false;\n    ignorePrevAsyncUpdates = () => {\n    };\n    ignoreUpdates = (updater) => {\n      ignore = true;\n      updater();\n      ignore = false;\n    };\n    stop = watch(\n      source,\n      (...args) => {\n        if (!ignore)\n          filteredCb(...args);\n      },\n      watchOptions\n    );\n  } else {\n    const disposables = [];\n    let ignoreCounter = 0;\n    let syncCounter = 0;\n    ignorePrevAsyncUpdates = () => {\n      ignoreCounter = syncCounter;\n    };\n    disposables.push(\n      watch(\n        source,\n        () => {\n          syncCounter++;\n        },\n        { ...watchOptions, flush: \"sync\" }\n      )\n    );\n    ignoreUpdates = (updater) => {\n      const syncCounterPrev = syncCounter;\n      updater();\n      ignoreCounter += syncCounter - syncCounterPrev;\n    };\n    disposables.push(\n      watch(\n        source,\n        (...args) => {\n          const ignore = ignoreCounter > 0 && ignoreCounter === syncCounter;\n          ignoreCounter = 0;\n          syncCounter = 0;\n          if (ignore)\n            return;\n          filteredCb(...args);\n        },\n        watchOptions\n      )\n    );\n    stop = () => {\n      disposables.forEach((fn) => fn());\n    };\n  }\n  return { stop, ignoreUpdates, ignorePrevAsyncUpdates };\n}\n\nfunction watchImmediate(source, cb, options) {\n  return watch(\n    source,\n    cb,\n    {\n      ...options,\n      immediate: true\n    }\n  );\n}\n\nfunction watchOnce(source, cb, options) {\n  return watch(\n    source,\n    cb,\n    {\n      ...options,\n      once: true\n    }\n  );\n}\n\nfunction watchThrottled(source, cb, options = {}) {\n  const {\n    throttle = 0,\n    trailing = true,\n    leading = true,\n    ...watchOptions\n  } = options;\n  return watchWithFilter(\n    source,\n    cb,\n    {\n      ...watchOptions,\n      eventFilter: throttleFilter(throttle, trailing, leading)\n    }\n  );\n}\n\nfunction watchTriggerable(source, cb, options = {}) {\n  let cleanupFn;\n  function onEffect() {\n    if (!cleanupFn)\n      return;\n    const fn = cleanupFn;\n    cleanupFn = void 0;\n    fn();\n  }\n  function onCleanup(callback) {\n    cleanupFn = callback;\n  }\n  const _cb = (value, oldValue) => {\n    onEffect();\n    return cb(value, oldValue, onCleanup);\n  };\n  const res = watchIgnorable(source, _cb, options);\n  const { ignoreUpdates } = res;\n  const trigger = () => {\n    let res2;\n    ignoreUpdates(() => {\n      res2 = _cb(getWatchSources(source), getOldValue(source));\n    });\n    return res2;\n  };\n  return {\n    ...res,\n    trigger\n  };\n}\nfunction getWatchSources(sources) {\n  if (isReactive(sources))\n    return sources;\n  if (Array.isArray(sources))\n    return sources.map((item) => toValue$1(item));\n  return toValue$1(sources);\n}\nfunction getOldValue(source) {\n  return Array.isArray(source) ? source.map(() => void 0) : void 0;\n}\n\nfunction whenever(source, cb, options) {\n  const stop = watch(\n    source,\n    (v, ov, onInvalidate) => {\n      if (v) {\n        if (options == null ? void 0 : options.once)\n          nextTick(() => stop());\n        cb(v, ov, onInvalidate);\n      }\n    },\n    {\n      ...options,\n      once: false\n    }\n  );\n  return stop;\n}\n\nexport { assert, refAutoReset as autoResetRef, bypassFilter, camelize, clamp, computedEager, computedWithControl, containsProp, computedWithControl as controlledComputed, controlledRef, createEventHook, createFilterWrapper, createGlobalState, createInjectionState, reactify as createReactiveFn, createRef, createSharedComposable, createSingletonPromise, debounceFilter, refDebounced as debouncedRef, watchDebounced as debouncedWatch, computedEager as eagerComputed, extendRef, formatDate, get, getLifeCycleTarget, hasOwn, hyphenate, identity, watchIgnorable as ignorableWatch, increaseWithUnit, injectLocal, invoke, isClient, isDef, isDefined, isIOS, isObject, isWorker, makeDestructurable, noop, normalizeDate, notNullish, now, objectEntries, objectOmit, objectPick, pausableFilter, watchPausable as pausableWatch, promiseTimeout, provideLocal, pxValue, rand, reactify, reactifyObject, reactiveComputed, reactiveOmit, reactivePick, refAutoReset, refDebounced, refDefault, refThrottled, refWithControl, resolveRef, resolveUnref, set, syncRef, syncRefs, throttleFilter, refThrottled as throttledRef, watchThrottled as throttledWatch, timestamp, toArray, toReactive, toRef, toRefs, toValue, tryOnBeforeMount, tryOnBeforeUnmount, tryOnMounted, tryOnScopeDispose, tryOnUnmounted, until, useArrayDifference, useArrayEvery, useArrayFilter, useArrayFind, useArrayFindIndex, useArrayFindLast, useArrayIncludes, useArrayJoin, useArrayMap, useArrayReduce, useArraySome, useArrayUnique, useCounter, useDateFormat, refDebounced as useDebounce, useDebounceFn, useInterval, useIntervalFn, useLastChanged, refThrottled as useThrottle, useThrottleFn, useTimeout, useTimeoutFn, useToNumber, useToString, useToggle, watchArray, watchAtMost, watchDebounced, watchDeep, watchIgnorable, watchImmediate, watchOnce, watchPausable, watchThrottled, watchTriggerable, watchWithFilter, whenever };\n","import { noop, makeDestructurable, camelize, isClient, toArray, watchImmediate, isObject, tryOnScopeDispose, isIOS, notNullish, tryOnMounted, objectOmit, promiseTimeout, until, injectLocal, provideLocal, pxValue, increaseWithUnit, objectEntries, createRef, createSingletonPromise, useTimeoutFn, pausableWatch, toRef, createEventHook, useIntervalFn, computedWithControl, timestamp, pausableFilter, watchIgnorable, debounceFilter, bypassFilter, createFilterWrapper, toRefs, watchOnce, containsProp, hasOwn, throttleFilter, useDebounceFn, useThrottleFn, tryOnUnmounted, clamp, syncRef, objectPick, watchWithFilter, identity, isDef, whenever, isWorker } from '@vueuse/shared';\nexport * from '@vueuse/shared';\nimport { isRef, shallowRef, ref, watchEffect, computed, inject, defineComponent, h, TransitionGroup, Fragment, shallowReactive, toValue, unref, getCurrentInstance, onMounted, watch, customRef, onUpdated, readonly, reactive, hasInjectionContext, toRaw, shallowReadonly, nextTick, markRaw, getCurrentScope, isReadonly, onBeforeUpdate } from 'vue';\n\nfunction computedAsync(evaluationCallback, initialState, optionsOrRef) {\n  var _a;\n  let options;\n  if (isRef(optionsOrRef)) {\n    options = {\n      evaluating: optionsOrRef\n    };\n  } else {\n    options = optionsOrRef || {};\n  }\n  const {\n    lazy = false,\n    flush = \"pre\",\n    evaluating = void 0,\n    shallow = true,\n    onError = (_a = globalThis.reportError) != null ? _a : noop\n  } = options;\n  const started = shallowRef(!lazy);\n  const current = shallow ? shallowRef(initialState) : ref(initialState);\n  let counter = 0;\n  watchEffect(async (onInvalidate) => {\n    if (!started.value)\n      return;\n    counter++;\n    const counterAtBeginning = counter;\n    let hasFinished = false;\n    if (evaluating) {\n      Promise.resolve().then(() => {\n        evaluating.value = true;\n      });\n    }\n    try {\n      const result = await evaluationCallback((cancelCallback) => {\n        onInvalidate(() => {\n          if (evaluating)\n            evaluating.value = false;\n          if (!hasFinished)\n            cancelCallback();\n        });\n      });\n      if (counterAtBeginning === counter)\n        current.value = result;\n    } catch (e) {\n      onError(e);\n    } finally {\n      if (evaluating && counterAtBeginning === counter)\n        evaluating.value = false;\n      hasFinished = true;\n    }\n  }, { flush });\n  if (lazy) {\n    return computed(() => {\n      started.value = true;\n      return current.value;\n    });\n  } else {\n    return current;\n  }\n}\n\nfunction computedInject(key, options, defaultSource, treatDefaultAsFactory) {\n  let source = inject(key);\n  if (defaultSource)\n    source = inject(key, defaultSource);\n  if (treatDefaultAsFactory)\n    source = inject(key, defaultSource, treatDefaultAsFactory);\n  if (typeof options === \"function\") {\n    return computed((oldValue) => options(source, oldValue));\n  } else {\n    return computed({\n      get: (oldValue) => options.get(source, oldValue),\n      set: options.set\n    });\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createReusableTemplate(options = {}) {\n  const {\n    inheritAttrs = true\n  } = options;\n  const render = shallowRef();\n  const define = /*@__PURE__*/ defineComponent({\n    setup(_, { slots }) {\n      return () => {\n        render.value = slots.default;\n      };\n    }\n  });\n  const reuse = /*@__PURE__*/ defineComponent({\n    inheritAttrs,\n    props: options.props,\n    setup(props, { attrs, slots }) {\n      return () => {\n        var _a;\n        if (!render.value && process.env.NODE_ENV !== \"production\")\n          throw new Error(\"[VueUse] Failed to find the definition of reusable template\");\n        const vnode = (_a = render.value) == null ? void 0 : _a.call(render, {\n          ...options.props == null ? keysToCamelKebabCase(attrs) : props,\n          $slots: slots\n        });\n        return inheritAttrs && (vnode == null ? void 0 : vnode.length) === 1 ? vnode[0] : vnode;\n      };\n    }\n  });\n  return makeDestructurable(\n    { define, reuse },\n    [define, reuse]\n  );\n}\nfunction keysToCamelKebabCase(obj) {\n  const newObj = {};\n  for (const key in obj)\n    newObj[camelize(key)] = obj[key];\n  return newObj;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createTemplatePromise(options = {}) {\n  let index = 0;\n  const instances = ref([]);\n  function create(...args) {\n    const props = shallowReactive({\n      key: index++,\n      args,\n      promise: void 0,\n      resolve: () => {\n      },\n      reject: () => {\n      },\n      isResolving: false,\n      options\n    });\n    instances.value.push(props);\n    props.promise = new Promise((_resolve, _reject) => {\n      props.resolve = (v) => {\n        props.isResolving = true;\n        return _resolve(v);\n      };\n      props.reject = _reject;\n    }).finally(() => {\n      props.promise = void 0;\n      const index2 = instances.value.indexOf(props);\n      if (index2 !== -1)\n        instances.value.splice(index2, 1);\n    });\n    return props.promise;\n  }\n  function start(...args) {\n    if (options.singleton && instances.value.length > 0)\n      return instances.value[0].promise;\n    return create(...args);\n  }\n  const component = /*@__PURE__*/ defineComponent((_, { slots }) => {\n    const renderList = () => instances.value.map((props) => {\n      var _a;\n      return h(Fragment, { key: props.key }, (_a = slots.default) == null ? void 0 : _a.call(slots, props));\n    });\n    if (options.transition)\n      return () => h(TransitionGroup, options.transition, renderList);\n    return renderList;\n  });\n  component.start = start;\n  return component;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction createUnrefFn(fn) {\n  return function(...args) {\n    return fn.apply(this, args.map((i) => toValue(i)));\n  };\n}\n\nconst defaultWindow = isClient ? window : void 0;\nconst defaultDocument = isClient ? window.document : void 0;\nconst defaultNavigator = isClient ? window.navigator : void 0;\nconst defaultLocation = isClient ? window.location : void 0;\n\nfunction unrefElement(elRef) {\n  var _a;\n  const plain = toValue(elRef);\n  return (_a = plain == null ? void 0 : plain.$el) != null ? _a : plain;\n}\n\nfunction useEventListener(...args) {\n  const cleanups = [];\n  const cleanup = () => {\n    cleanups.forEach((fn) => fn());\n    cleanups.length = 0;\n  };\n  const register = (el, event, listener, options) => {\n    el.addEventListener(event, listener, options);\n    return () => el.removeEventListener(event, listener, options);\n  };\n  const firstParamTargets = computed(() => {\n    const test = toArray(toValue(args[0])).filter((e) => e != null);\n    return test.every((e) => typeof e !== \"string\") ? test : void 0;\n  });\n  const stopWatch = watchImmediate(\n    () => {\n      var _a, _b;\n      return [\n        (_b = (_a = firstParamTargets.value) == null ? void 0 : _a.map((e) => unrefElement(e))) != null ? _b : [defaultWindow].filter((e) => e != null),\n        toArray(toValue(firstParamTargets.value ? args[1] : args[0])),\n        toArray(unref(firstParamTargets.value ? args[2] : args[1])),\n        // @ts-expect-error - TypeScript gets the correct types, but somehow still complains\n        toValue(firstParamTargets.value ? args[3] : args[2])\n      ];\n    },\n    ([raw_targets, raw_events, raw_listeners, raw_options]) => {\n      cleanup();\n      if (!(raw_targets == null ? void 0 : raw_targets.length) || !(raw_events == null ? void 0 : raw_events.length) || !(raw_listeners == null ? void 0 : raw_listeners.length))\n        return;\n      const optionsClone = isObject(raw_options) ? { ...raw_options } : raw_options;\n      cleanups.push(\n        ...raw_targets.flatMap(\n          (el) => raw_events.flatMap(\n            (event) => raw_listeners.map((listener) => register(el, event, listener, optionsClone))\n          )\n        )\n      );\n    },\n    { flush: \"post\" }\n  );\n  const stop = () => {\n    stopWatch();\n    cleanup();\n  };\n  tryOnScopeDispose(cleanup);\n  return stop;\n}\n\nlet _iOSWorkaround = false;\nfunction onClickOutside(target, handler, options = {}) {\n  const { window = defaultWindow, ignore = [], capture = true, detectIframe = false, controls = false } = options;\n  if (!window) {\n    return controls ? { stop: noop, cancel: noop, trigger: noop } : noop;\n  }\n  if (isIOS && !_iOSWorkaround) {\n    _iOSWorkaround = true;\n    const listenerOptions = { passive: true };\n    Array.from(window.document.body.children).forEach((el) => el.addEventListener(\"click\", noop, listenerOptions));\n    window.document.documentElement.addEventListener(\"click\", noop, listenerOptions);\n  }\n  let shouldListen = true;\n  const shouldIgnore = (event) => {\n    return toValue(ignore).some((target2) => {\n      if (typeof target2 === \"string\") {\n        return Array.from(window.document.querySelectorAll(target2)).some((el) => el === event.target || event.composedPath().includes(el));\n      } else {\n        const el = unrefElement(target2);\n        return el && (event.target === el || event.composedPath().includes(el));\n      }\n    });\n  };\n  function hasMultipleRoots(target2) {\n    const vm = toValue(target2);\n    return vm && vm.$.subTree.shapeFlag === 16;\n  }\n  function checkMultipleRoots(target2, event) {\n    const vm = toValue(target2);\n    const children = vm.$.subTree && vm.$.subTree.children;\n    if (children == null || !Array.isArray(children))\n      return false;\n    return children.some((child) => child.el === event.target || event.composedPath().includes(child.el));\n  }\n  const listener = (event) => {\n    const el = unrefElement(target);\n    if (event.target == null)\n      return;\n    if (!(el instanceof Element) && hasMultipleRoots(target) && checkMultipleRoots(target, event))\n      return;\n    if (!el || el === event.target || event.composedPath().includes(el))\n      return;\n    if (\"detail\" in event && event.detail === 0)\n      shouldListen = !shouldIgnore(event);\n    if (!shouldListen) {\n      shouldListen = true;\n      return;\n    }\n    handler(event);\n  };\n  let isProcessingClick = false;\n  const cleanup = [\n    useEventListener(window, \"click\", (event) => {\n      if (!isProcessingClick) {\n        isProcessingClick = true;\n        setTimeout(() => {\n          isProcessingClick = false;\n        }, 0);\n        listener(event);\n      }\n    }, { passive: true, capture }),\n    useEventListener(window, \"pointerdown\", (e) => {\n      const el = unrefElement(target);\n      shouldListen = !shouldIgnore(e) && !!(el && !e.composedPath().includes(el));\n    }, { passive: true }),\n    detectIframe && useEventListener(window, \"blur\", (event) => {\n      setTimeout(() => {\n        var _a;\n        const el = unrefElement(target);\n        if (((_a = window.document.activeElement) == null ? void 0 : _a.tagName) === \"IFRAME\" && !(el == null ? void 0 : el.contains(window.document.activeElement))) {\n          handler(event);\n        }\n      }, 0);\n    }, { passive: true })\n  ].filter(Boolean);\n  const stop = () => cleanup.forEach((fn) => fn());\n  if (controls) {\n    return {\n      stop,\n      cancel: () => {\n        shouldListen = false;\n      },\n      trigger: (event) => {\n        shouldListen = true;\n        listener(event);\n        shouldListen = false;\n      }\n    };\n  }\n  return stop;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useMounted() {\n  const isMounted = shallowRef(false);\n  const instance = getCurrentInstance();\n  if (instance) {\n    onMounted(() => {\n      isMounted.value = true;\n    }, instance);\n  }\n  return isMounted;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useSupported(callback) {\n  const isMounted = useMounted();\n  return computed(() => {\n    isMounted.value;\n    return Boolean(callback());\n  });\n}\n\nfunction useMutationObserver(target, callback, options = {}) {\n  const { window = defaultWindow, ...mutationOptions } = options;\n  let observer;\n  const isSupported = useSupported(() => window && \"MutationObserver\" in window);\n  const cleanup = () => {\n    if (observer) {\n      observer.disconnect();\n      observer = void 0;\n    }\n  };\n  const targets = computed(() => {\n    const value = toValue(target);\n    const items = toArray(value).map(unrefElement).filter(notNullish);\n    return new Set(items);\n  });\n  const stopWatch = watch(\n    targets,\n    (newTargets) => {\n      cleanup();\n      if (isSupported.value && newTargets.size) {\n        observer = new MutationObserver(callback);\n        newTargets.forEach((el) => observer.observe(el, mutationOptions));\n      }\n    },\n    { immediate: true, flush: \"post\" }\n  );\n  const takeRecords = () => {\n    return observer == null ? void 0 : observer.takeRecords();\n  };\n  const stop = () => {\n    stopWatch();\n    cleanup();\n  };\n  tryOnScopeDispose(stop);\n  return {\n    isSupported,\n    stop,\n    takeRecords\n  };\n}\n\nfunction onElementRemoval(target, callback, options = {}) {\n  const {\n    window = defaultWindow,\n    document = window == null ? void 0 : window.document,\n    flush = \"sync\"\n  } = options;\n  if (!window || !document)\n    return noop;\n  let stopFn;\n  const cleanupAndUpdate = (fn) => {\n    stopFn == null ? void 0 : stopFn();\n    stopFn = fn;\n  };\n  const stopWatch = watchEffect(() => {\n    const el = unrefElement(target);\n    if (el) {\n      const { stop } = useMutationObserver(\n        document,\n        (mutationsList) => {\n          const targetRemoved = mutationsList.map((mutation) => [...mutation.removedNodes]).flat().some((node) => node === el || node.contains(el));\n          if (targetRemoved) {\n            callback(mutationsList);\n          }\n        },\n        {\n          window,\n          childList: true,\n          subtree: true\n        }\n      );\n      cleanupAndUpdate(stop);\n    }\n  }, { flush });\n  const stopHandle = () => {\n    stopWatch();\n    cleanupAndUpdate();\n  };\n  tryOnScopeDispose(stopHandle);\n  return stopHandle;\n}\n\nfunction createKeyPredicate(keyFilter) {\n  if (typeof keyFilter === \"function\")\n    return keyFilter;\n  else if (typeof keyFilter === \"string\")\n    return (event) => event.key === keyFilter;\n  else if (Array.isArray(keyFilter))\n    return (event) => keyFilter.includes(event.key);\n  return () => true;\n}\nfunction onKeyStroke(...args) {\n  let key;\n  let handler;\n  let options = {};\n  if (args.length === 3) {\n    key = args[0];\n    handler = args[1];\n    options = args[2];\n  } else if (args.length === 2) {\n    if (typeof args[1] === \"object\") {\n      key = true;\n      handler = args[0];\n      options = args[1];\n    } else {\n      key = args[0];\n      handler = args[1];\n    }\n  } else {\n    key = true;\n    handler = args[0];\n  }\n  const {\n    target = defaultWindow,\n    eventName = \"keydown\",\n    passive = false,\n    dedupe = false\n  } = options;\n  const predicate = createKeyPredicate(key);\n  const listener = (e) => {\n    if (e.repeat && toValue(dedupe))\n      return;\n    if (predicate(e))\n      handler(e);\n  };\n  return useEventListener(target, eventName, listener, passive);\n}\nfunction onKeyDown(key, handler, options = {}) {\n  return onKeyStroke(key, handler, { ...options, eventName: \"keydown\" });\n}\nfunction onKeyPressed(key, handler, options = {}) {\n  return onKeyStroke(key, handler, { ...options, eventName: \"keypress\" });\n}\nfunction onKeyUp(key, handler, options = {}) {\n  return onKeyStroke(key, handler, { ...options, eventName: \"keyup\" });\n}\n\nconst DEFAULT_DELAY = 500;\nconst DEFAULT_THRESHOLD = 10;\nfunction onLongPress(target, handler, options) {\n  var _a, _b;\n  const elementRef = computed(() => unrefElement(target));\n  let timeout;\n  let posStart;\n  let startTimestamp;\n  let hasLongPressed = false;\n  function clear() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = void 0;\n    }\n    posStart = void 0;\n    startTimestamp = void 0;\n    hasLongPressed = false;\n  }\n  function getDelay(ev) {\n    const delay = options == null ? void 0 : options.delay;\n    if (typeof delay === \"function\") {\n      return delay(ev);\n    }\n    return delay != null ? delay : DEFAULT_DELAY;\n  }\n  function onRelease(ev) {\n    var _a2, _b2, _c;\n    const [_startTimestamp, _posStart, _hasLongPressed] = [startTimestamp, posStart, hasLongPressed];\n    clear();\n    if (!(options == null ? void 0 : options.onMouseUp) || !_posStart || !_startTimestamp)\n      return;\n    if (((_a2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _a2.self) && ev.target !== elementRef.value)\n      return;\n    if ((_b2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _b2.prevent)\n      ev.preventDefault();\n    if ((_c = options == null ? void 0 : options.modifiers) == null ? void 0 : _c.stop)\n      ev.stopPropagation();\n    const dx = ev.x - _posStart.x;\n    const dy = ev.y - _posStart.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    options.onMouseUp(ev.timeStamp - _startTimestamp, distance, _hasLongPressed);\n  }\n  function onDown(ev) {\n    var _a2, _b2, _c;\n    if (((_a2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _a2.self) && ev.target !== elementRef.value)\n      return;\n    clear();\n    if ((_b2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _b2.prevent)\n      ev.preventDefault();\n    if ((_c = options == null ? void 0 : options.modifiers) == null ? void 0 : _c.stop)\n      ev.stopPropagation();\n    posStart = {\n      x: ev.x,\n      y: ev.y\n    };\n    startTimestamp = ev.timeStamp;\n    timeout = setTimeout(\n      () => {\n        hasLongPressed = true;\n        handler(ev);\n      },\n      getDelay(ev)\n    );\n  }\n  function onMove(ev) {\n    var _a2, _b2, _c, _d;\n    if (((_a2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _a2.self) && ev.target !== elementRef.value)\n      return;\n    if (!posStart || (options == null ? void 0 : options.distanceThreshold) === false)\n      return;\n    if ((_b2 = options == null ? void 0 : options.modifiers) == null ? void 0 : _b2.prevent)\n      ev.preventDefault();\n    if ((_c = options == null ? void 0 : options.modifiers) == null ? void 0 : _c.stop)\n      ev.stopPropagation();\n    const dx = ev.x - posStart.x;\n    const dy = ev.y - posStart.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    if (distance >= ((_d = options == null ? void 0 : options.distanceThreshold) != null ? _d : DEFAULT_THRESHOLD))\n      clear();\n  }\n  const listenerOptions = {\n    capture: (_a = options == null ? void 0 : options.modifiers) == null ? void 0 : _a.capture,\n    once: (_b = options == null ? void 0 : options.modifiers) == null ? void 0 : _b.once\n  };\n  const cleanup = [\n    useEventListener(elementRef, \"pointerdown\", onDown, listenerOptions),\n    useEventListener(elementRef, \"pointermove\", onMove, listenerOptions),\n    useEventListener(elementRef, [\"pointerup\", \"pointerleave\"], onRelease, listenerOptions)\n  ];\n  const stop = () => cleanup.forEach((fn) => fn());\n  return stop;\n}\n\nfunction isFocusedElementEditable() {\n  const { activeElement, body } = document;\n  if (!activeElement)\n    return false;\n  if (activeElement === body)\n    return false;\n  switch (activeElement.tagName) {\n    case \"INPUT\":\n    case \"TEXTAREA\":\n      return true;\n  }\n  return activeElement.hasAttribute(\"contenteditable\");\n}\nfunction isTypedCharValid({\n  keyCode,\n  metaKey,\n  ctrlKey,\n  altKey\n}) {\n  if (metaKey || ctrlKey || altKey)\n    return false;\n  if (keyCode >= 48 && keyCode <= 57 || keyCode >= 96 && keyCode <= 105)\n    return true;\n  if (keyCode >= 65 && keyCode <= 90)\n    return true;\n  return false;\n}\nfunction onStartTyping(callback, options = {}) {\n  const { document: document2 = defaultDocument } = options;\n  const keydown = (event) => {\n    if (!isFocusedElementEditable() && isTypedCharValid(event)) {\n      callback(event);\n    }\n  };\n  if (document2)\n    useEventListener(document2, \"keydown\", keydown, { passive: true });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction templateRef(key, initialValue = null) {\n  const instance = getCurrentInstance();\n  let _trigger = () => {\n  };\n  const element = customRef((track, trigger) => {\n    _trigger = trigger;\n    return {\n      get() {\n        var _a, _b;\n        track();\n        return (_b = (_a = instance == null ? void 0 : instance.proxy) == null ? void 0 : _a.$refs[key]) != null ? _b : initialValue;\n      },\n      set() {\n      }\n    };\n  });\n  tryOnMounted(_trigger);\n  onUpdated(_trigger);\n  return element;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useActiveElement(options = {}) {\n  var _a;\n  const {\n    window = defaultWindow,\n    deep = true,\n    triggerOnRemoval = false\n  } = options;\n  const document = (_a = options.document) != null ? _a : window == null ? void 0 : window.document;\n  const getDeepActiveElement = () => {\n    var _a2;\n    let element = document == null ? void 0 : document.activeElement;\n    if (deep) {\n      while (element == null ? void 0 : element.shadowRoot)\n        element = (_a2 = element == null ? void 0 : element.shadowRoot) == null ? void 0 : _a2.activeElement;\n    }\n    return element;\n  };\n  const activeElement = shallowRef();\n  const trigger = () => {\n    activeElement.value = getDeepActiveElement();\n  };\n  if (window) {\n    const listenerOptions = {\n      capture: true,\n      passive: true\n    };\n    useEventListener(\n      window,\n      \"blur\",\n      (event) => {\n        if (event.relatedTarget !== null)\n          return;\n        trigger();\n      },\n      listenerOptions\n    );\n    useEventListener(\n      window,\n      \"focus\",\n      trigger,\n      listenerOptions\n    );\n  }\n  if (triggerOnRemoval) {\n    onElementRemoval(activeElement, trigger, { document });\n  }\n  trigger();\n  return activeElement;\n}\n\nfunction useRafFn(fn, options = {}) {\n  const {\n    immediate = true,\n    fpsLimit = void 0,\n    window = defaultWindow,\n    once = false\n  } = options;\n  const isActive = shallowRef(false);\n  const intervalLimit = computed(() => {\n    return fpsLimit ? 1e3 / toValue(fpsLimit) : null;\n  });\n  let previousFrameTimestamp = 0;\n  let rafId = null;\n  function loop(timestamp) {\n    if (!isActive.value || !window)\n      return;\n    if (!previousFrameTimestamp)\n      previousFrameTimestamp = timestamp;\n    const delta = timestamp - previousFrameTimestamp;\n    if (intervalLimit.value && delta < intervalLimit.value) {\n      rafId = window.requestAnimationFrame(loop);\n      return;\n    }\n    previousFrameTimestamp = timestamp;\n    fn({ delta, timestamp });\n    if (once) {\n      isActive.value = false;\n      rafId = null;\n      return;\n    }\n    rafId = window.requestAnimationFrame(loop);\n  }\n  function resume() {\n    if (!isActive.value && window) {\n      isActive.value = true;\n      previousFrameTimestamp = 0;\n      rafId = window.requestAnimationFrame(loop);\n    }\n  }\n  function pause() {\n    isActive.value = false;\n    if (rafId != null && window) {\n      window.cancelAnimationFrame(rafId);\n      rafId = null;\n    }\n  }\n  if (immediate)\n    resume();\n  tryOnScopeDispose(pause);\n  return {\n    isActive: readonly(isActive),\n    pause,\n    resume\n  };\n}\n\nfunction useAnimate(target, keyframes, options) {\n  let config;\n  let animateOptions;\n  if (isObject(options)) {\n    config = options;\n    animateOptions = objectOmit(options, [\"window\", \"immediate\", \"commitStyles\", \"persist\", \"onReady\", \"onError\"]);\n  } else {\n    config = { duration: options };\n    animateOptions = options;\n  }\n  const {\n    window = defaultWindow,\n    immediate = true,\n    commitStyles,\n    persist,\n    playbackRate: _playbackRate = 1,\n    onReady,\n    onError = (e) => {\n      console.error(e);\n    }\n  } = config;\n  const isSupported = useSupported(() => window && HTMLElement && \"animate\" in HTMLElement.prototype);\n  const animate = shallowRef(void 0);\n  const store = shallowReactive({\n    startTime: null,\n    currentTime: null,\n    timeline: null,\n    playbackRate: _playbackRate,\n    pending: false,\n    playState: immediate ? \"idle\" : \"paused\",\n    replaceState: \"active\"\n  });\n  const pending = computed(() => store.pending);\n  const playState = computed(() => store.playState);\n  const replaceState = computed(() => store.replaceState);\n  const startTime = computed({\n    get() {\n      return store.startTime;\n    },\n    set(value) {\n      store.startTime = value;\n      if (animate.value)\n        animate.value.startTime = value;\n    }\n  });\n  const currentTime = computed({\n    get() {\n      return store.currentTime;\n    },\n    set(value) {\n      store.currentTime = value;\n      if (animate.value) {\n        animate.value.currentTime = value;\n        syncResume();\n      }\n    }\n  });\n  const timeline = computed({\n    get() {\n      return store.timeline;\n    },\n    set(value) {\n      store.timeline = value;\n      if (animate.value)\n        animate.value.timeline = value;\n    }\n  });\n  const playbackRate = computed({\n    get() {\n      return store.playbackRate;\n    },\n    set(value) {\n      store.playbackRate = value;\n      if (animate.value)\n        animate.value.playbackRate = value;\n    }\n  });\n  const play = () => {\n    if (animate.value) {\n      try {\n        animate.value.play();\n        syncResume();\n      } catch (e) {\n        syncPause();\n        onError(e);\n      }\n    } else {\n      update();\n    }\n  };\n  const pause = () => {\n    var _a;\n    try {\n      (_a = animate.value) == null ? void 0 : _a.pause();\n      syncPause();\n    } catch (e) {\n      onError(e);\n    }\n  };\n  const reverse = () => {\n    var _a;\n    if (!animate.value)\n      update();\n    try {\n      (_a = animate.value) == null ? void 0 : _a.reverse();\n      syncResume();\n    } catch (e) {\n      syncPause();\n      onError(e);\n    }\n  };\n  const finish = () => {\n    var _a;\n    try {\n      (_a = animate.value) == null ? void 0 : _a.finish();\n      syncPause();\n    } catch (e) {\n      onError(e);\n    }\n  };\n  const cancel = () => {\n    var _a;\n    try {\n      (_a = animate.value) == null ? void 0 : _a.cancel();\n      syncPause();\n    } catch (e) {\n      onError(e);\n    }\n  };\n  watch(() => unrefElement(target), (el) => {\n    if (el) {\n      update(true);\n    } else {\n      animate.value = void 0;\n    }\n  });\n  watch(() => keyframes, (value) => {\n    if (animate.value) {\n      update();\n      const targetEl = unrefElement(target);\n      if (targetEl) {\n        animate.value.effect = new KeyframeEffect(\n          targetEl,\n          toValue(value),\n          animateOptions\n        );\n      }\n    }\n  }, { deep: true });\n  tryOnMounted(() => update(true), false);\n  tryOnScopeDispose(cancel);\n  function update(init) {\n    const el = unrefElement(target);\n    if (!isSupported.value || !el)\n      return;\n    if (!animate.value)\n      animate.value = el.animate(toValue(keyframes), animateOptions);\n    if (persist)\n      animate.value.persist();\n    if (_playbackRate !== 1)\n      animate.value.playbackRate = _playbackRate;\n    if (init && !immediate)\n      animate.value.pause();\n    else\n      syncResume();\n    onReady == null ? void 0 : onReady(animate.value);\n  }\n  const listenerOptions = { passive: true };\n  useEventListener(animate, [\"cancel\", \"finish\", \"remove\"], syncPause, listenerOptions);\n  useEventListener(animate, \"finish\", () => {\n    var _a;\n    if (commitStyles)\n      (_a = animate.value) == null ? void 0 : _a.commitStyles();\n  }, listenerOptions);\n  const { resume: resumeRef, pause: pauseRef } = useRafFn(() => {\n    if (!animate.value)\n      return;\n    store.pending = animate.value.pending;\n    store.playState = animate.value.playState;\n    store.replaceState = animate.value.replaceState;\n    store.startTime = animate.value.startTime;\n    store.currentTime = animate.value.currentTime;\n    store.timeline = animate.value.timeline;\n    store.playbackRate = animate.value.playbackRate;\n  }, { immediate: false });\n  function syncResume() {\n    if (isSupported.value)\n      resumeRef();\n  }\n  function syncPause() {\n    if (isSupported.value && window)\n      window.requestAnimationFrame(pauseRef);\n  }\n  return {\n    isSupported,\n    animate,\n    // actions\n    play,\n    pause,\n    reverse,\n    finish,\n    cancel,\n    // state\n    pending,\n    playState,\n    replaceState,\n    startTime,\n    currentTime,\n    timeline,\n    playbackRate\n  };\n}\n\nfunction useAsyncQueue(tasks, options) {\n  const {\n    interrupt = true,\n    onError = noop,\n    onFinished = noop,\n    signal\n  } = options || {};\n  const promiseState = {\n    aborted: \"aborted\",\n    fulfilled: \"fulfilled\",\n    pending: \"pending\",\n    rejected: \"rejected\"\n  };\n  const initialResult = Array.from(Array.from({ length: tasks.length }), () => ({ state: promiseState.pending, data: null }));\n  const result = reactive(initialResult);\n  const activeIndex = shallowRef(-1);\n  if (!tasks || tasks.length === 0) {\n    onFinished();\n    return {\n      activeIndex,\n      result\n    };\n  }\n  function updateResult(state, res) {\n    activeIndex.value++;\n    result[activeIndex.value].data = res;\n    result[activeIndex.value].state = state;\n  }\n  tasks.reduce((prev, curr) => {\n    return prev.then((prevRes) => {\n      var _a;\n      if (signal == null ? void 0 : signal.aborted) {\n        updateResult(promiseState.aborted, new Error(\"aborted\"));\n        return;\n      }\n      if (((_a = result[activeIndex.value]) == null ? void 0 : _a.state) === promiseState.rejected && interrupt) {\n        onFinished();\n        return;\n      }\n      const done = curr(prevRes).then((currentRes) => {\n        updateResult(promiseState.fulfilled, currentRes);\n        if (activeIndex.value === tasks.length - 1)\n          onFinished();\n        return currentRes;\n      });\n      if (!signal)\n        return done;\n      return Promise.race([done, whenAborted(signal)]);\n    }).catch((e) => {\n      if (signal == null ? void 0 : signal.aborted) {\n        updateResult(promiseState.aborted, e);\n        return e;\n      }\n      updateResult(promiseState.rejected, e);\n      onError();\n      return e;\n    });\n  }, Promise.resolve());\n  return {\n    activeIndex,\n    result\n  };\n}\nfunction whenAborted(signal) {\n  return new Promise((resolve, reject) => {\n    const error = new Error(\"aborted\");\n    if (signal.aborted)\n      reject(error);\n    else\n      signal.addEventListener(\"abort\", () => reject(error), { once: true });\n  });\n}\n\nfunction useAsyncState(promise, initialState, options) {\n  var _a;\n  const {\n    immediate = true,\n    delay = 0,\n    onError = (_a = globalThis.reportError) != null ? _a : noop,\n    onSuccess = noop,\n    resetOnExecute = true,\n    shallow = true,\n    throwError\n  } = options != null ? options : {};\n  const state = shallow ? shallowRef(initialState) : ref(initialState);\n  const isReady = shallowRef(false);\n  const isLoading = shallowRef(false);\n  const error = shallowRef(void 0);\n  async function execute(delay2 = 0, ...args) {\n    if (resetOnExecute)\n      state.value = toValue(initialState);\n    error.value = void 0;\n    isReady.value = false;\n    isLoading.value = true;\n    if (delay2 > 0)\n      await promiseTimeout(delay2);\n    const _promise = typeof promise === \"function\" ? promise(...args) : promise;\n    try {\n      const data = await _promise;\n      state.value = data;\n      isReady.value = true;\n      onSuccess(data);\n    } catch (e) {\n      error.value = e;\n      onError(e);\n      if (throwError)\n        throw e;\n    } finally {\n      isLoading.value = false;\n    }\n    return state.value;\n  }\n  if (immediate) {\n    execute(delay);\n  }\n  const shell = {\n    state,\n    isReady,\n    isLoading,\n    error,\n    execute,\n    executeImmediate: (...args) => execute(0, ...args)\n  };\n  function waitUntilIsLoaded() {\n    return new Promise((resolve, reject) => {\n      until(isLoading).toBe(false).then(() => resolve(shell)).catch(reject);\n    });\n  }\n  return {\n    ...shell,\n    then(onFulfilled, onRejected) {\n      return waitUntilIsLoaded().then(onFulfilled, onRejected);\n    }\n  };\n}\n\nconst defaults = {\n  array: (v) => JSON.stringify(v),\n  object: (v) => JSON.stringify(v),\n  set: (v) => JSON.stringify(Array.from(v)),\n  map: (v) => JSON.stringify(Object.fromEntries(v)),\n  null: () => \"\"\n};\nfunction getDefaultSerialization(target) {\n  if (!target)\n    return defaults.null;\n  if (target instanceof Map)\n    return defaults.map;\n  else if (target instanceof Set)\n    return defaults.set;\n  else if (Array.isArray(target))\n    return defaults.array;\n  else\n    return defaults.object;\n}\n\nfunction useBase64(target, options) {\n  const base64 = shallowRef(\"\");\n  const promise = shallowRef();\n  function execute() {\n    if (!isClient)\n      return;\n    promise.value = new Promise((resolve, reject) => {\n      try {\n        const _target = toValue(target);\n        if (_target == null) {\n          resolve(\"\");\n        } else if (typeof _target === \"string\") {\n          resolve(blobToBase64(new Blob([_target], { type: \"text/plain\" })));\n        } else if (_target instanceof Blob) {\n          resolve(blobToBase64(_target));\n        } else if (_target instanceof ArrayBuffer) {\n          resolve(window.btoa(String.fromCharCode(...new Uint8Array(_target))));\n        } else if (_target instanceof HTMLCanvasElement) {\n          resolve(_target.toDataURL(options == null ? void 0 : options.type, options == null ? void 0 : options.quality));\n        } else if (_target instanceof HTMLImageElement) {\n          const img = _target.cloneNode(false);\n          img.crossOrigin = \"Anonymous\";\n          imgLoaded(img).then(() => {\n            const canvas = document.createElement(\"canvas\");\n            const ctx = canvas.getContext(\"2d\");\n            canvas.width = img.width;\n            canvas.height = img.height;\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n            resolve(canvas.toDataURL(options == null ? void 0 : options.type, options == null ? void 0 : options.quality));\n          }).catch(reject);\n        } else if (typeof _target === \"object\") {\n          const _serializeFn = (options == null ? void 0 : options.serializer) || getDefaultSerialization(_target);\n          const serialized = _serializeFn(_target);\n          return resolve(blobToBase64(new Blob([serialized], { type: \"application/json\" })));\n        } else {\n          reject(new Error(\"target is unsupported types\"));\n        }\n      } catch (error) {\n        reject(error);\n      }\n    });\n    promise.value.then((res) => {\n      base64.value = (options == null ? void 0 : options.dataUrl) === false ? res.replace(/^data:.*?;base64,/, \"\") : res;\n    });\n    return promise.value;\n  }\n  if (isRef(target) || typeof target === \"function\")\n    watch(target, execute, { immediate: true });\n  else\n    execute();\n  return {\n    base64,\n    promise,\n    execute\n  };\n}\nfunction imgLoaded(img) {\n  return new Promise((resolve, reject) => {\n    if (!img.complete) {\n      img.onload = () => {\n        resolve();\n      };\n      img.onerror = reject;\n    } else {\n      resolve();\n    }\n  });\n}\nfunction blobToBase64(blob) {\n  return new Promise((resolve, reject) => {\n    const fr = new FileReader();\n    fr.onload = (e) => {\n      resolve(e.target.result);\n    };\n    fr.onerror = reject;\n    fr.readAsDataURL(blob);\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useBattery(options = {}) {\n  const { navigator = defaultNavigator } = options;\n  const events = [\"chargingchange\", \"chargingtimechange\", \"dischargingtimechange\", \"levelchange\"];\n  const isSupported = useSupported(() => navigator && \"getBattery\" in navigator && typeof navigator.getBattery === \"function\");\n  const charging = shallowRef(false);\n  const chargingTime = shallowRef(0);\n  const dischargingTime = shallowRef(0);\n  const level = shallowRef(1);\n  let battery;\n  function updateBatteryInfo() {\n    charging.value = this.charging;\n    chargingTime.value = this.chargingTime || 0;\n    dischargingTime.value = this.dischargingTime || 0;\n    level.value = this.level;\n  }\n  if (isSupported.value) {\n    navigator.getBattery().then((_battery) => {\n      battery = _battery;\n      updateBatteryInfo.call(battery);\n      useEventListener(battery, events, updateBatteryInfo, { passive: true });\n    });\n  }\n  return {\n    isSupported,\n    charging,\n    chargingTime,\n    dischargingTime,\n    level\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useBluetooth(options) {\n  let {\n    acceptAllDevices = false\n  } = options || {};\n  const {\n    filters = void 0,\n    optionalServices = void 0,\n    navigator = defaultNavigator\n  } = options || {};\n  const isSupported = useSupported(() => navigator && \"bluetooth\" in navigator);\n  const device = shallowRef();\n  const error = shallowRef(null);\n  watch(device, () => {\n    connectToBluetoothGATTServer();\n  });\n  async function requestDevice() {\n    if (!isSupported.value)\n      return;\n    error.value = null;\n    if (filters && filters.length > 0)\n      acceptAllDevices = false;\n    try {\n      device.value = await (navigator == null ? void 0 : navigator.bluetooth.requestDevice({\n        acceptAllDevices,\n        filters,\n        optionalServices\n      }));\n    } catch (err) {\n      error.value = err;\n    }\n  }\n  const server = shallowRef();\n  const isConnected = shallowRef(false);\n  function reset() {\n    isConnected.value = false;\n    device.value = void 0;\n    server.value = void 0;\n  }\n  async function connectToBluetoothGATTServer() {\n    error.value = null;\n    if (device.value && device.value.gatt) {\n      useEventListener(device, \"gattserverdisconnected\", reset, { passive: true });\n      try {\n        server.value = await device.value.gatt.connect();\n        isConnected.value = server.value.connected;\n      } catch (err) {\n        error.value = err;\n      }\n    }\n  }\n  tryOnMounted(() => {\n    var _a;\n    if (device.value)\n      (_a = device.value.gatt) == null ? void 0 : _a.connect();\n  });\n  tryOnScopeDispose(() => {\n    var _a;\n    if (device.value)\n      (_a = device.value.gatt) == null ? void 0 : _a.disconnect();\n  });\n  return {\n    isSupported,\n    isConnected: readonly(isConnected),\n    // Device:\n    device,\n    requestDevice,\n    // Server:\n    server,\n    // Errors:\n    error\n  };\n}\n\nconst ssrWidthSymbol = Symbol(\"vueuse-ssr-width\");\n// @__NO_SIDE_EFFECTS__\nfunction useSSRWidth() {\n  const ssrWidth = hasInjectionContext() ? injectLocal(ssrWidthSymbol, null) : null;\n  return typeof ssrWidth === \"number\" ? ssrWidth : void 0;\n}\nfunction provideSSRWidth(width, app) {\n  if (app !== void 0) {\n    app.provide(ssrWidthSymbol, width);\n  } else {\n    provideLocal(ssrWidthSymbol, width);\n  }\n}\n\nfunction useMediaQuery(query, options = {}) {\n  const { window = defaultWindow, ssrWidth = useSSRWidth() } = options;\n  const isSupported = useSupported(() => window && \"matchMedia\" in window && typeof window.matchMedia === \"function\");\n  const ssrSupport = shallowRef(typeof ssrWidth === \"number\");\n  const mediaQuery = shallowRef();\n  const matches = shallowRef(false);\n  const handler = (event) => {\n    matches.value = event.matches;\n  };\n  watchEffect(() => {\n    if (ssrSupport.value) {\n      ssrSupport.value = !isSupported.value;\n      const queryStrings = toValue(query).split(\",\");\n      matches.value = queryStrings.some((queryString) => {\n        const not = queryString.includes(\"not all\");\n        const minWidth = queryString.match(/\\(\\s*min-width:\\s*(-?\\d+(?:\\.\\d*)?[a-z]+\\s*)\\)/);\n        const maxWidth = queryString.match(/\\(\\s*max-width:\\s*(-?\\d+(?:\\.\\d*)?[a-z]+\\s*)\\)/);\n        let res = Boolean(minWidth || maxWidth);\n        if (minWidth && res) {\n          res = ssrWidth >= pxValue(minWidth[1]);\n        }\n        if (maxWidth && res) {\n          res = ssrWidth <= pxValue(maxWidth[1]);\n        }\n        return not ? !res : res;\n      });\n      return;\n    }\n    if (!isSupported.value)\n      return;\n    mediaQuery.value = window.matchMedia(toValue(query));\n    matches.value = mediaQuery.value.matches;\n  });\n  useEventListener(mediaQuery, \"change\", handler, { passive: true });\n  return computed(() => matches.value);\n}\n\nconst breakpointsTailwind = {\n  \"sm\": 640,\n  \"md\": 768,\n  \"lg\": 1024,\n  \"xl\": 1280,\n  \"2xl\": 1536\n};\nconst breakpointsBootstrapV5 = {\n  xs: 0,\n  sm: 576,\n  md: 768,\n  lg: 992,\n  xl: 1200,\n  xxl: 1400\n};\nconst breakpointsVuetifyV2 = {\n  xs: 0,\n  sm: 600,\n  md: 960,\n  lg: 1264,\n  xl: 1904\n};\nconst breakpointsVuetifyV3 = {\n  xs: 0,\n  sm: 600,\n  md: 960,\n  lg: 1280,\n  xl: 1920,\n  xxl: 2560\n};\nconst breakpointsVuetify = breakpointsVuetifyV2;\nconst breakpointsAntDesign = {\n  xs: 480,\n  sm: 576,\n  md: 768,\n  lg: 992,\n  xl: 1200,\n  xxl: 1600\n};\nconst breakpointsQuasar = {\n  xs: 0,\n  sm: 600,\n  md: 1024,\n  lg: 1440,\n  xl: 1920\n};\nconst breakpointsSematic = {\n  mobileS: 320,\n  mobileM: 375,\n  mobileL: 425,\n  tablet: 768,\n  laptop: 1024,\n  laptopL: 1440,\n  desktop4K: 2560\n};\nconst breakpointsMasterCss = {\n  \"3xs\": 360,\n  \"2xs\": 480,\n  \"xs\": 600,\n  \"sm\": 768,\n  \"md\": 1024,\n  \"lg\": 1280,\n  \"xl\": 1440,\n  \"2xl\": 1600,\n  \"3xl\": 1920,\n  \"4xl\": 2560\n};\nconst breakpointsPrimeFlex = {\n  sm: 576,\n  md: 768,\n  lg: 992,\n  xl: 1200\n};\nconst breakpointsElement = {\n  xs: 0,\n  sm: 768,\n  md: 992,\n  lg: 1200,\n  xl: 1920\n};\n\n// @__NO_SIDE_EFFECTS__\nfunction useBreakpoints(breakpoints, options = {}) {\n  function getValue(k, delta) {\n    let v = toValue(breakpoints[toValue(k)]);\n    if (delta != null)\n      v = increaseWithUnit(v, delta);\n    if (typeof v === \"number\")\n      v = `${v}px`;\n    return v;\n  }\n  const { window = defaultWindow, strategy = \"min-width\", ssrWidth = useSSRWidth() } = options;\n  const ssrSupport = typeof ssrWidth === \"number\";\n  const mounted = ssrSupport ? shallowRef(false) : { value: true };\n  if (ssrSupport) {\n    tryOnMounted(() => mounted.value = !!window);\n  }\n  function match(query, size) {\n    if (!mounted.value && ssrSupport) {\n      return query === \"min\" ? ssrWidth >= pxValue(size) : ssrWidth <= pxValue(size);\n    }\n    if (!window)\n      return false;\n    return window.matchMedia(`(${query}-width: ${size})`).matches;\n  }\n  const greaterOrEqual = (k) => {\n    return useMediaQuery(() => `(min-width: ${getValue(k)})`, options);\n  };\n  const smallerOrEqual = (k) => {\n    return useMediaQuery(() => `(max-width: ${getValue(k)})`, options);\n  };\n  const shortcutMethods = Object.keys(breakpoints).reduce((shortcuts, k) => {\n    Object.defineProperty(shortcuts, k, {\n      get: () => strategy === \"min-width\" ? greaterOrEqual(k) : smallerOrEqual(k),\n      enumerable: true,\n      configurable: true\n    });\n    return shortcuts;\n  }, {});\n  function current() {\n    const points = Object.keys(breakpoints).map((k) => [k, shortcutMethods[k], pxValue(getValue(k))]).sort((a, b) => a[2] - b[2]);\n    return computed(() => points.filter(([, v]) => v.value).map(([k]) => k));\n  }\n  return Object.assign(shortcutMethods, {\n    greaterOrEqual,\n    smallerOrEqual,\n    greater(k) {\n      return useMediaQuery(() => `(min-width: ${getValue(k, 0.1)})`, options);\n    },\n    smaller(k) {\n      return useMediaQuery(() => `(max-width: ${getValue(k, -0.1)})`, options);\n    },\n    between(a, b) {\n      return useMediaQuery(() => `(min-width: ${getValue(a)}) and (max-width: ${getValue(b, -0.1)})`, options);\n    },\n    isGreater(k) {\n      return match(\"min\", getValue(k, 0.1));\n    },\n    isGreaterOrEqual(k) {\n      return match(\"min\", getValue(k));\n    },\n    isSmaller(k) {\n      return match(\"max\", getValue(k, -0.1));\n    },\n    isSmallerOrEqual(k) {\n      return match(\"max\", getValue(k));\n    },\n    isInBetween(a, b) {\n      return match(\"min\", getValue(a)) && match(\"max\", getValue(b, -0.1));\n    },\n    current,\n    active() {\n      const bps = current();\n      return computed(() => bps.value.length === 0 ? \"\" : bps.value.at(strategy === \"min-width\" ? -1 : 0));\n    }\n  });\n}\n\nfunction useBroadcastChannel(options) {\n  const {\n    name,\n    window = defaultWindow\n  } = options;\n  const isSupported = useSupported(() => window && \"BroadcastChannel\" in window);\n  const isClosed = shallowRef(false);\n  const channel = ref();\n  const data = ref();\n  const error = shallowRef(null);\n  const post = (data2) => {\n    if (channel.value)\n      channel.value.postMessage(data2);\n  };\n  const close = () => {\n    if (channel.value)\n      channel.value.close();\n    isClosed.value = true;\n  };\n  if (isSupported.value) {\n    tryOnMounted(() => {\n      error.value = null;\n      channel.value = new BroadcastChannel(name);\n      const listenerOptions = {\n        passive: true\n      };\n      useEventListener(channel, \"message\", (e) => {\n        data.value = e.data;\n      }, listenerOptions);\n      useEventListener(channel, \"messageerror\", (e) => {\n        error.value = e;\n      }, listenerOptions);\n      useEventListener(channel, \"close\", () => {\n        isClosed.value = true;\n      }, listenerOptions);\n    });\n  }\n  tryOnScopeDispose(() => {\n    close();\n  });\n  return {\n    isSupported,\n    channel,\n    data,\n    post,\n    close,\n    error,\n    isClosed\n  };\n}\n\nconst WRITABLE_PROPERTIES = [\n  \"hash\",\n  \"host\",\n  \"hostname\",\n  \"href\",\n  \"pathname\",\n  \"port\",\n  \"protocol\",\n  \"search\"\n];\n// @__NO_SIDE_EFFECTS__\nfunction useBrowserLocation(options = {}) {\n  const { window = defaultWindow } = options;\n  const refs = Object.fromEntries(\n    WRITABLE_PROPERTIES.map((key) => [key, ref()])\n  );\n  for (const [key, ref] of objectEntries(refs)) {\n    watch(ref, (value) => {\n      if (!(window == null ? void 0 : window.location) || window.location[key] === value)\n        return;\n      window.location[key] = value;\n    });\n  }\n  const buildState = (trigger) => {\n    var _a;\n    const { state: state2, length } = (window == null ? void 0 : window.history) || {};\n    const { origin } = (window == null ? void 0 : window.location) || {};\n    for (const key of WRITABLE_PROPERTIES)\n      refs[key].value = (_a = window == null ? void 0 : window.location) == null ? void 0 : _a[key];\n    return reactive({\n      trigger,\n      state: state2,\n      length,\n      origin,\n      ...refs\n    });\n  };\n  const state = ref(buildState(\"load\"));\n  if (window) {\n    const listenerOptions = { passive: true };\n    useEventListener(window, \"popstate\", () => state.value = buildState(\"popstate\"), listenerOptions);\n    useEventListener(window, \"hashchange\", () => state.value = buildState(\"hashchange\"), listenerOptions);\n  }\n  return state;\n}\n\nfunction useCached(refValue, comparator = (a, b) => a === b, options) {\n  const { deepRefs = true, ...watchOptions } = options || {};\n  const cachedValue = createRef(refValue.value, deepRefs);\n  watch(() => refValue.value, (value) => {\n    if (!comparator(value, cachedValue.value))\n      cachedValue.value = value;\n  }, watchOptions);\n  return cachedValue;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePermission(permissionDesc, options = {}) {\n  const {\n    controls = false,\n    navigator = defaultNavigator\n  } = options;\n  const isSupported = useSupported(() => navigator && \"permissions\" in navigator);\n  const permissionStatus = shallowRef();\n  const desc = typeof permissionDesc === \"string\" ? { name: permissionDesc } : permissionDesc;\n  const state = shallowRef();\n  const update = () => {\n    var _a, _b;\n    state.value = (_b = (_a = permissionStatus.value) == null ? void 0 : _a.state) != null ? _b : \"prompt\";\n  };\n  useEventListener(permissionStatus, \"change\", update, { passive: true });\n  const query = createSingletonPromise(async () => {\n    if (!isSupported.value)\n      return;\n    if (!permissionStatus.value) {\n      try {\n        permissionStatus.value = await navigator.permissions.query(desc);\n      } catch (e) {\n        permissionStatus.value = void 0;\n      } finally {\n        update();\n      }\n    }\n    if (controls)\n      return toRaw(permissionStatus.value);\n  });\n  query();\n  if (controls) {\n    return {\n      state,\n      isSupported,\n      query\n    };\n  } else {\n    return state;\n  }\n}\n\nfunction useClipboard(options = {}) {\n  const {\n    navigator = defaultNavigator,\n    read = false,\n    source,\n    copiedDuring = 1500,\n    legacy = false\n  } = options;\n  const isClipboardApiSupported = useSupported(() => navigator && \"clipboard\" in navigator);\n  const permissionRead = usePermission(\"clipboard-read\");\n  const permissionWrite = usePermission(\"clipboard-write\");\n  const isSupported = computed(() => isClipboardApiSupported.value || legacy);\n  const text = shallowRef(\"\");\n  const copied = shallowRef(false);\n  const timeout = useTimeoutFn(() => copied.value = false, copiedDuring, { immediate: false });\n  async function updateText() {\n    let useLegacy = !(isClipboardApiSupported.value && isAllowed(permissionRead.value));\n    if (!useLegacy) {\n      try {\n        text.value = await navigator.clipboard.readText();\n      } catch (e) {\n        useLegacy = true;\n      }\n    }\n    if (useLegacy) {\n      text.value = legacyRead();\n    }\n  }\n  if (isSupported.value && read)\n    useEventListener([\"copy\", \"cut\"], updateText, { passive: true });\n  async function copy(value = toValue(source)) {\n    if (isSupported.value && value != null) {\n      let useLegacy = !(isClipboardApiSupported.value && isAllowed(permissionWrite.value));\n      if (!useLegacy) {\n        try {\n          await navigator.clipboard.writeText(value);\n        } catch (e) {\n          useLegacy = true;\n        }\n      }\n      if (useLegacy)\n        legacyCopy(value);\n      text.value = value;\n      copied.value = true;\n      timeout.start();\n    }\n  }\n  function legacyCopy(value) {\n    const ta = document.createElement(\"textarea\");\n    ta.value = value != null ? value : \"\";\n    ta.style.position = \"absolute\";\n    ta.style.opacity = \"0\";\n    document.body.appendChild(ta);\n    ta.select();\n    document.execCommand(\"copy\");\n    ta.remove();\n  }\n  function legacyRead() {\n    var _a, _b, _c;\n    return (_c = (_b = (_a = document == null ? void 0 : document.getSelection) == null ? void 0 : _a.call(document)) == null ? void 0 : _b.toString()) != null ? _c : \"\";\n  }\n  function isAllowed(status) {\n    return status === \"granted\" || status === \"prompt\";\n  }\n  return {\n    isSupported,\n    text,\n    copied,\n    copy\n  };\n}\n\nfunction useClipboardItems(options = {}) {\n  const {\n    navigator = defaultNavigator,\n    read = false,\n    source,\n    copiedDuring = 1500\n  } = options;\n  const isSupported = useSupported(() => navigator && \"clipboard\" in navigator);\n  const content = ref([]);\n  const copied = shallowRef(false);\n  const timeout = useTimeoutFn(() => copied.value = false, copiedDuring, { immediate: false });\n  function updateContent() {\n    if (isSupported.value) {\n      navigator.clipboard.read().then((items) => {\n        content.value = items;\n      });\n    }\n  }\n  if (isSupported.value && read) {\n    useEventListener([\"copy\", \"cut\"], updateContent, { passive: true });\n  }\n  async function copy(value = toValue(source)) {\n    if (isSupported.value && value != null) {\n      await navigator.clipboard.write(value);\n      content.value = value;\n      copied.value = true;\n      timeout.start();\n    }\n  }\n  return {\n    isSupported,\n    content: shallowReadonly(content),\n    copied: readonly(copied),\n    copy,\n    read: updateContent\n  };\n}\n\nfunction cloneFnJSON(source) {\n  return JSON.parse(JSON.stringify(source));\n}\nfunction useCloned(source, options = {}) {\n  const cloned = ref({});\n  const isModified = shallowRef(false);\n  let _lastSync = false;\n  const {\n    manual,\n    clone = cloneFnJSON,\n    // watch options\n    deep = true,\n    immediate = true\n  } = options;\n  watch(cloned, () => {\n    if (_lastSync) {\n      _lastSync = false;\n      return;\n    }\n    isModified.value = true;\n  }, {\n    deep: true,\n    flush: \"sync\"\n  });\n  function sync() {\n    _lastSync = true;\n    isModified.value = false;\n    cloned.value = clone(toValue(source));\n  }\n  if (!manual && (isRef(source) || typeof source === \"function\")) {\n    watch(source, sync, {\n      ...options,\n      deep,\n      immediate\n    });\n  } else {\n    sync();\n  }\n  return { cloned, isModified, sync };\n}\n\nconst _global = typeof globalThis !== \"undefined\" ? globalThis : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : {};\nconst globalKey = \"__vueuse_ssr_handlers__\";\nconst handlers = /* @__PURE__ */ getHandlers();\nfunction getHandlers() {\n  if (!(globalKey in _global))\n    _global[globalKey] = _global[globalKey] || {};\n  return _global[globalKey];\n}\nfunction getSSRHandler(key, fallback) {\n  return handlers[key] || fallback;\n}\nfunction setSSRHandler(key, fn) {\n  handlers[key] = fn;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePreferredDark(options) {\n  return useMediaQuery(\"(prefers-color-scheme: dark)\", options);\n}\n\nfunction guessSerializerType(rawInit) {\n  return rawInit == null ? \"any\" : rawInit instanceof Set ? \"set\" : rawInit instanceof Map ? \"map\" : rawInit instanceof Date ? \"date\" : typeof rawInit === \"boolean\" ? \"boolean\" : typeof rawInit === \"string\" ? \"string\" : typeof rawInit === \"object\" ? \"object\" : !Number.isNaN(rawInit) ? \"number\" : \"any\";\n}\n\nconst StorageSerializers = {\n  boolean: {\n    read: (v) => v === \"true\",\n    write: (v) => String(v)\n  },\n  object: {\n    read: (v) => JSON.parse(v),\n    write: (v) => JSON.stringify(v)\n  },\n  number: {\n    read: (v) => Number.parseFloat(v),\n    write: (v) => String(v)\n  },\n  any: {\n    read: (v) => v,\n    write: (v) => String(v)\n  },\n  string: {\n    read: (v) => v,\n    write: (v) => String(v)\n  },\n  map: {\n    read: (v) => new Map(JSON.parse(v)),\n    write: (v) => JSON.stringify(Array.from(v.entries()))\n  },\n  set: {\n    read: (v) => new Set(JSON.parse(v)),\n    write: (v) => JSON.stringify(Array.from(v))\n  },\n  date: {\n    read: (v) => new Date(v),\n    write: (v) => v.toISOString()\n  }\n};\nconst customStorageEventName = \"vueuse-storage\";\nfunction useStorage(key, defaults, storage, options = {}) {\n  var _a;\n  const {\n    flush = \"pre\",\n    deep = true,\n    listenToStorageChanges = true,\n    writeDefaults = true,\n    mergeDefaults = false,\n    shallow,\n    window = defaultWindow,\n    eventFilter,\n    onError = (e) => {\n      console.error(e);\n    },\n    initOnMounted\n  } = options;\n  const data = (shallow ? shallowRef : ref)(typeof defaults === \"function\" ? defaults() : defaults);\n  const keyComputed = computed(() => toValue(key));\n  if (!storage) {\n    try {\n      storage = getSSRHandler(\"getDefaultStorage\", () => {\n        var _a2;\n        return (_a2 = defaultWindow) == null ? void 0 : _a2.localStorage;\n      })();\n    } catch (e) {\n      onError(e);\n    }\n  }\n  if (!storage)\n    return data;\n  const rawInit = toValue(defaults);\n  const type = guessSerializerType(rawInit);\n  const serializer = (_a = options.serializer) != null ? _a : StorageSerializers[type];\n  const { pause: pauseWatch, resume: resumeWatch } = pausableWatch(\n    data,\n    (newValue) => write(newValue),\n    { flush, deep, eventFilter }\n  );\n  watch(keyComputed, () => update(), { flush });\n  let firstMounted = false;\n  const onStorageEvent = (ev) => {\n    if (initOnMounted && !firstMounted) {\n      return;\n    }\n    update(ev);\n  };\n  const onStorageCustomEvent = (ev) => {\n    if (initOnMounted && !firstMounted) {\n      return;\n    }\n    updateFromCustomEvent(ev);\n  };\n  if (window && listenToStorageChanges) {\n    if (storage instanceof Storage)\n      useEventListener(window, \"storage\", onStorageEvent, { passive: true });\n    else\n      useEventListener(window, customStorageEventName, onStorageCustomEvent);\n  }\n  if (initOnMounted) {\n    tryOnMounted(() => {\n      firstMounted = true;\n      update();\n    });\n  } else {\n    update();\n  }\n  function dispatchWriteEvent(oldValue, newValue) {\n    if (window) {\n      const payload = {\n        key: keyComputed.value,\n        oldValue,\n        newValue,\n        storageArea: storage\n      };\n      window.dispatchEvent(storage instanceof Storage ? new StorageEvent(\"storage\", payload) : new CustomEvent(customStorageEventName, {\n        detail: payload\n      }));\n    }\n  }\n  function write(v) {\n    try {\n      const oldValue = storage.getItem(keyComputed.value);\n      if (v == null) {\n        dispatchWriteEvent(oldValue, null);\n        storage.removeItem(keyComputed.value);\n      } else {\n        const serialized = serializer.write(v);\n        if (oldValue !== serialized) {\n          storage.setItem(keyComputed.value, serialized);\n          dispatchWriteEvent(oldValue, serialized);\n        }\n      }\n    } catch (e) {\n      onError(e);\n    }\n  }\n  function read(event) {\n    const rawValue = event ? event.newValue : storage.getItem(keyComputed.value);\n    if (rawValue == null) {\n      if (writeDefaults && rawInit != null)\n        storage.setItem(keyComputed.value, serializer.write(rawInit));\n      return rawInit;\n    } else if (!event && mergeDefaults) {\n      const value = serializer.read(rawValue);\n      if (typeof mergeDefaults === \"function\")\n        return mergeDefaults(value, rawInit);\n      else if (type === \"object\" && !Array.isArray(value))\n        return { ...rawInit, ...value };\n      return value;\n    } else if (typeof rawValue !== \"string\") {\n      return rawValue;\n    } else {\n      return serializer.read(rawValue);\n    }\n  }\n  function update(event) {\n    if (event && event.storageArea !== storage)\n      return;\n    if (event && event.key == null) {\n      data.value = rawInit;\n      return;\n    }\n    if (event && event.key !== keyComputed.value) {\n      return;\n    }\n    pauseWatch();\n    try {\n      const serializedData = serializer.write(data.value);\n      if (event === void 0 || (event == null ? void 0 : event.newValue) !== serializedData) {\n        data.value = read(event);\n      }\n    } catch (e) {\n      onError(e);\n    } finally {\n      if (event)\n        nextTick(resumeWatch);\n      else\n        resumeWatch();\n    }\n  }\n  function updateFromCustomEvent(event) {\n    update(event.detail);\n  }\n  return data;\n}\n\nconst CSS_DISABLE_TRANS = \"*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}\";\nfunction useColorMode(options = {}) {\n  const {\n    selector = \"html\",\n    attribute = \"class\",\n    initialValue = \"auto\",\n    window = defaultWindow,\n    storage,\n    storageKey = \"vueuse-color-scheme\",\n    listenToStorageChanges = true,\n    storageRef,\n    emitAuto,\n    disableTransition = true\n  } = options;\n  const modes = {\n    auto: \"\",\n    light: \"light\",\n    dark: \"dark\",\n    ...options.modes || {}\n  };\n  const preferredDark = usePreferredDark({ window });\n  const system = computed(() => preferredDark.value ? \"dark\" : \"light\");\n  const store = storageRef || (storageKey == null ? toRef(initialValue) : useStorage(storageKey, initialValue, storage, { window, listenToStorageChanges }));\n  const state = computed(() => store.value === \"auto\" ? system.value : store.value);\n  const updateHTMLAttrs = getSSRHandler(\n    \"updateHTMLAttrs\",\n    (selector2, attribute2, value) => {\n      const el = typeof selector2 === \"string\" ? window == null ? void 0 : window.document.querySelector(selector2) : unrefElement(selector2);\n      if (!el)\n        return;\n      const classesToAdd = /* @__PURE__ */ new Set();\n      const classesToRemove = /* @__PURE__ */ new Set();\n      let attributeToChange = null;\n      if (attribute2 === \"class\") {\n        const current = value.split(/\\s/g);\n        Object.values(modes).flatMap((i) => (i || \"\").split(/\\s/g)).filter(Boolean).forEach((v) => {\n          if (current.includes(v))\n            classesToAdd.add(v);\n          else\n            classesToRemove.add(v);\n        });\n      } else {\n        attributeToChange = { key: attribute2, value };\n      }\n      if (classesToAdd.size === 0 && classesToRemove.size === 0 && attributeToChange === null)\n        return;\n      let style;\n      if (disableTransition) {\n        style = window.document.createElement(\"style\");\n        style.appendChild(document.createTextNode(CSS_DISABLE_TRANS));\n        window.document.head.appendChild(style);\n      }\n      for (const c of classesToAdd) {\n        el.classList.add(c);\n      }\n      for (const c of classesToRemove) {\n        el.classList.remove(c);\n      }\n      if (attributeToChange) {\n        el.setAttribute(attributeToChange.key, attributeToChange.value);\n      }\n      if (disableTransition) {\n        window.getComputedStyle(style).opacity;\n        document.head.removeChild(style);\n      }\n    }\n  );\n  function defaultOnChanged(mode) {\n    var _a;\n    updateHTMLAttrs(selector, attribute, (_a = modes[mode]) != null ? _a : mode);\n  }\n  function onChanged(mode) {\n    if (options.onChanged)\n      options.onChanged(mode, defaultOnChanged);\n    else\n      defaultOnChanged(mode);\n  }\n  watch(state, onChanged, { flush: \"post\", immediate: true });\n  tryOnMounted(() => onChanged(state.value));\n  const auto = computed({\n    get() {\n      return emitAuto ? store.value : state.value;\n    },\n    set(v) {\n      store.value = v;\n    }\n  });\n  return Object.assign(auto, { store, system, state });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useConfirmDialog(revealed = shallowRef(false)) {\n  const confirmHook = createEventHook();\n  const cancelHook = createEventHook();\n  const revealHook = createEventHook();\n  let _resolve = noop;\n  const reveal = (data) => {\n    revealHook.trigger(data);\n    revealed.value = true;\n    return new Promise((resolve) => {\n      _resolve = resolve;\n    });\n  };\n  const confirm = (data) => {\n    revealed.value = false;\n    confirmHook.trigger(data);\n    _resolve({ data, isCanceled: false });\n  };\n  const cancel = (data) => {\n    revealed.value = false;\n    cancelHook.trigger(data);\n    _resolve({ data, isCanceled: true });\n  };\n  return {\n    isRevealed: computed(() => revealed.value),\n    reveal,\n    confirm,\n    cancel,\n    onReveal: revealHook.on,\n    onConfirm: confirmHook.on,\n    onCancel: cancelHook.on\n  };\n}\n\nfunction useCountdown(initialCountdown, options) {\n  var _a, _b;\n  const remaining = shallowRef(toValue(initialCountdown));\n  const intervalController = useIntervalFn(() => {\n    var _a2, _b2;\n    const value = remaining.value - 1;\n    remaining.value = value < 0 ? 0 : value;\n    (_a2 = options == null ? void 0 : options.onTick) == null ? void 0 : _a2.call(options);\n    if (remaining.value <= 0) {\n      intervalController.pause();\n      (_b2 = options == null ? void 0 : options.onComplete) == null ? void 0 : _b2.call(options);\n    }\n  }, (_a = options == null ? void 0 : options.interval) != null ? _a : 1e3, { immediate: (_b = options == null ? void 0 : options.immediate) != null ? _b : false });\n  const reset = (countdown) => {\n    var _a2;\n    remaining.value = (_a2 = toValue(countdown)) != null ? _a2 : toValue(initialCountdown);\n  };\n  const stop = () => {\n    intervalController.pause();\n    reset();\n  };\n  const resume = () => {\n    if (!intervalController.isActive.value) {\n      if (remaining.value > 0) {\n        intervalController.resume();\n      }\n    }\n  };\n  const start = (countdown) => {\n    reset(countdown);\n    intervalController.resume();\n  };\n  return {\n    remaining,\n    reset,\n    stop,\n    start,\n    pause: intervalController.pause,\n    resume,\n    isActive: intervalController.isActive\n  };\n}\n\nfunction useCssVar(prop, target, options = {}) {\n  const { window = defaultWindow, initialValue, observe = false } = options;\n  const variable = shallowRef(initialValue);\n  const elRef = computed(() => {\n    var _a;\n    return unrefElement(target) || ((_a = window == null ? void 0 : window.document) == null ? void 0 : _a.documentElement);\n  });\n  function updateCssVar() {\n    var _a;\n    const key = toValue(prop);\n    const el = toValue(elRef);\n    if (el && window && key) {\n      const value = (_a = window.getComputedStyle(el).getPropertyValue(key)) == null ? void 0 : _a.trim();\n      variable.value = value || variable.value || initialValue;\n    }\n  }\n  if (observe) {\n    useMutationObserver(elRef, updateCssVar, {\n      attributeFilter: [\"style\", \"class\"],\n      window\n    });\n  }\n  watch(\n    [elRef, () => toValue(prop)],\n    (_, old) => {\n      if (old[0] && old[1])\n        old[0].style.removeProperty(old[1]);\n      updateCssVar();\n    },\n    { immediate: true }\n  );\n  watch(\n    [variable, elRef],\n    ([val, el]) => {\n      const raw_prop = toValue(prop);\n      if ((el == null ? void 0 : el.style) && raw_prop) {\n        if (val == null)\n          el.style.removeProperty(raw_prop);\n        else\n          el.style.setProperty(raw_prop, val);\n      }\n    },\n    { immediate: true }\n  );\n  return variable;\n}\n\nfunction useCurrentElement(rootComponent) {\n  const vm = getCurrentInstance();\n  const currentElement = computedWithControl(\n    () => null,\n    () => rootComponent ? unrefElement(rootComponent) : vm.proxy.$el\n  );\n  onUpdated(currentElement.trigger);\n  onMounted(currentElement.trigger);\n  return currentElement;\n}\n\nfunction useCycleList(list, options) {\n  const state = shallowRef(getInitialValue());\n  const listRef = toRef(list);\n  const index = computed({\n    get() {\n      var _a;\n      const targetList = listRef.value;\n      let index2 = (options == null ? void 0 : options.getIndexOf) ? options.getIndexOf(state.value, targetList) : targetList.indexOf(state.value);\n      if (index2 < 0)\n        index2 = (_a = options == null ? void 0 : options.fallbackIndex) != null ? _a : 0;\n      return index2;\n    },\n    set(v) {\n      set(v);\n    }\n  });\n  function set(i) {\n    const targetList = listRef.value;\n    const length = targetList.length;\n    const index2 = (i % length + length) % length;\n    const value = targetList[index2];\n    state.value = value;\n    return value;\n  }\n  function shift(delta = 1) {\n    return set(index.value + delta);\n  }\n  function next(n = 1) {\n    return shift(n);\n  }\n  function prev(n = 1) {\n    return shift(-n);\n  }\n  function getInitialValue() {\n    var _a, _b;\n    return (_b = toValue((_a = options == null ? void 0 : options.initialValue) != null ? _a : toValue(list)[0])) != null ? _b : void 0;\n  }\n  watch(listRef, () => set(index.value));\n  return {\n    state,\n    index,\n    next,\n    prev,\n    go: set\n  };\n}\n\nfunction useDark(options = {}) {\n  const {\n    valueDark = \"dark\",\n    valueLight = \"\"\n  } = options;\n  const mode = useColorMode({\n    ...options,\n    onChanged: (mode2, defaultHandler) => {\n      var _a;\n      if (options.onChanged)\n        (_a = options.onChanged) == null ? void 0 : _a.call(options, mode2 === \"dark\", defaultHandler, mode2);\n      else\n        defaultHandler(mode2);\n    },\n    modes: {\n      dark: valueDark,\n      light: valueLight\n    }\n  });\n  const system = computed(() => mode.system.value);\n  const isDark = computed({\n    get() {\n      return mode.value === \"dark\";\n    },\n    set(v) {\n      const modeVal = v ? \"dark\" : \"light\";\n      if (system.value === modeVal)\n        mode.value = \"auto\";\n      else\n        mode.value = modeVal;\n    }\n  });\n  return isDark;\n}\n\nfunction fnBypass(v) {\n  return v;\n}\nfunction fnSetSource(source, value) {\n  return source.value = value;\n}\nfunction defaultDump(clone) {\n  return clone ? typeof clone === \"function\" ? clone : cloneFnJSON : fnBypass;\n}\nfunction defaultParse(clone) {\n  return clone ? typeof clone === \"function\" ? clone : cloneFnJSON : fnBypass;\n}\nfunction useManualRefHistory(source, options = {}) {\n  const {\n    clone = false,\n    dump = defaultDump(clone),\n    parse = defaultParse(clone),\n    setSource = fnSetSource\n  } = options;\n  function _createHistoryRecord() {\n    return markRaw({\n      snapshot: dump(source.value),\n      timestamp: timestamp()\n    });\n  }\n  const last = ref(_createHistoryRecord());\n  const undoStack = ref([]);\n  const redoStack = ref([]);\n  const _setSource = (record) => {\n    setSource(source, parse(record.snapshot));\n    last.value = record;\n  };\n  const commit = () => {\n    undoStack.value.unshift(last.value);\n    last.value = _createHistoryRecord();\n    if (options.capacity && undoStack.value.length > options.capacity)\n      undoStack.value.splice(options.capacity, Number.POSITIVE_INFINITY);\n    if (redoStack.value.length)\n      redoStack.value.splice(0, redoStack.value.length);\n  };\n  const clear = () => {\n    undoStack.value.splice(0, undoStack.value.length);\n    redoStack.value.splice(0, redoStack.value.length);\n  };\n  const undo = () => {\n    const state = undoStack.value.shift();\n    if (state) {\n      redoStack.value.unshift(last.value);\n      _setSource(state);\n    }\n  };\n  const redo = () => {\n    const state = redoStack.value.shift();\n    if (state) {\n      undoStack.value.unshift(last.value);\n      _setSource(state);\n    }\n  };\n  const reset = () => {\n    _setSource(last.value);\n  };\n  const history = computed(() => [last.value, ...undoStack.value]);\n  const canUndo = computed(() => undoStack.value.length > 0);\n  const canRedo = computed(() => redoStack.value.length > 0);\n  return {\n    source,\n    undoStack,\n    redoStack,\n    last,\n    history,\n    canUndo,\n    canRedo,\n    clear,\n    commit,\n    reset,\n    undo,\n    redo\n  };\n}\n\nfunction useRefHistory(source, options = {}) {\n  const {\n    deep = false,\n    flush = \"pre\",\n    eventFilter,\n    shouldCommit = () => true\n  } = options;\n  const {\n    eventFilter: composedFilter,\n    pause,\n    resume: resumeTracking,\n    isActive: isTracking\n  } = pausableFilter(eventFilter);\n  let lastRawValue = source.value;\n  const {\n    ignoreUpdates,\n    ignorePrevAsyncUpdates,\n    stop\n  } = watchIgnorable(\n    source,\n    commit,\n    { deep, flush, eventFilter: composedFilter }\n  );\n  function setSource(source2, value) {\n    ignorePrevAsyncUpdates();\n    ignoreUpdates(() => {\n      source2.value = value;\n      lastRawValue = value;\n    });\n  }\n  const manualHistory = useManualRefHistory(source, { ...options, clone: options.clone || deep, setSource });\n  const { clear, commit: manualCommit } = manualHistory;\n  function commit() {\n    ignorePrevAsyncUpdates();\n    if (!shouldCommit(lastRawValue, source.value))\n      return;\n    lastRawValue = source.value;\n    manualCommit();\n  }\n  function resume(commitNow) {\n    resumeTracking();\n    if (commitNow)\n      commit();\n  }\n  function batch(fn) {\n    let canceled = false;\n    const cancel = () => canceled = true;\n    ignoreUpdates(() => {\n      fn(cancel);\n    });\n    if (!canceled)\n      commit();\n  }\n  function dispose() {\n    stop();\n    clear();\n  }\n  return {\n    ...manualHistory,\n    isTracking,\n    pause,\n    resume,\n    commit,\n    batch,\n    dispose\n  };\n}\n\nfunction useDebouncedRefHistory(source, options = {}) {\n  const filter = options.debounce ? debounceFilter(options.debounce) : void 0;\n  const history = useRefHistory(source, { ...options, eventFilter: filter });\n  return {\n    ...history\n  };\n}\n\nfunction useDeviceMotion(options = {}) {\n  const {\n    window = defaultWindow,\n    requestPermissions = false,\n    eventFilter = bypassFilter\n  } = options;\n  const isSupported = useSupported(() => typeof DeviceMotionEvent !== \"undefined\");\n  const requirePermissions = useSupported(() => isSupported.value && \"requestPermission\" in DeviceMotionEvent && typeof DeviceMotionEvent.requestPermission === \"function\");\n  const permissionGranted = shallowRef(false);\n  const acceleration = ref({ x: null, y: null, z: null });\n  const rotationRate = ref({ alpha: null, beta: null, gamma: null });\n  const interval = shallowRef(0);\n  const accelerationIncludingGravity = ref({\n    x: null,\n    y: null,\n    z: null\n  });\n  function init() {\n    if (window) {\n      const onDeviceMotion = createFilterWrapper(\n        eventFilter,\n        (event) => {\n          var _a, _b, _c, _d, _e, _f, _g, _h, _i;\n          acceleration.value = {\n            x: ((_a = event.acceleration) == null ? void 0 : _a.x) || null,\n            y: ((_b = event.acceleration) == null ? void 0 : _b.y) || null,\n            z: ((_c = event.acceleration) == null ? void 0 : _c.z) || null\n          };\n          accelerationIncludingGravity.value = {\n            x: ((_d = event.accelerationIncludingGravity) == null ? void 0 : _d.x) || null,\n            y: ((_e = event.accelerationIncludingGravity) == null ? void 0 : _e.y) || null,\n            z: ((_f = event.accelerationIncludingGravity) == null ? void 0 : _f.z) || null\n          };\n          rotationRate.value = {\n            alpha: ((_g = event.rotationRate) == null ? void 0 : _g.alpha) || null,\n            beta: ((_h = event.rotationRate) == null ? void 0 : _h.beta) || null,\n            gamma: ((_i = event.rotationRate) == null ? void 0 : _i.gamma) || null\n          };\n          interval.value = event.interval;\n        }\n      );\n      useEventListener(window, \"devicemotion\", onDeviceMotion, { passive: true });\n    }\n  }\n  const ensurePermissions = async () => {\n    if (!requirePermissions.value)\n      permissionGranted.value = true;\n    if (permissionGranted.value)\n      return;\n    if (requirePermissions.value) {\n      const requestPermission = DeviceMotionEvent.requestPermission;\n      try {\n        const response = await requestPermission();\n        if (response === \"granted\") {\n          permissionGranted.value = true;\n          init();\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  };\n  if (isSupported.value) {\n    if (requestPermissions && requirePermissions.value) {\n      ensurePermissions().then(() => init());\n    } else {\n      init();\n    }\n  }\n  return {\n    acceleration,\n    accelerationIncludingGravity,\n    rotationRate,\n    interval,\n    isSupported,\n    requirePermissions,\n    ensurePermissions,\n    permissionGranted\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useDeviceOrientation(options = {}) {\n  const { window = defaultWindow } = options;\n  const isSupported = useSupported(() => window && \"DeviceOrientationEvent\" in window);\n  const isAbsolute = shallowRef(false);\n  const alpha = shallowRef(null);\n  const beta = shallowRef(null);\n  const gamma = shallowRef(null);\n  if (window && isSupported.value) {\n    useEventListener(window, \"deviceorientation\", (event) => {\n      isAbsolute.value = event.absolute;\n      alpha.value = event.alpha;\n      beta.value = event.beta;\n      gamma.value = event.gamma;\n    }, { passive: true });\n  }\n  return {\n    isSupported,\n    isAbsolute,\n    alpha,\n    beta,\n    gamma\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useDevicePixelRatio(options = {}) {\n  const {\n    window = defaultWindow\n  } = options;\n  const pixelRatio = shallowRef(1);\n  const query = useMediaQuery(() => `(resolution: ${pixelRatio.value}dppx)`, options);\n  let stop = noop;\n  if (window) {\n    stop = watchImmediate(query, () => pixelRatio.value = window.devicePixelRatio);\n  }\n  return {\n    pixelRatio: readonly(pixelRatio),\n    stop\n  };\n}\n\nfunction useDevicesList(options = {}) {\n  const {\n    navigator = defaultNavigator,\n    requestPermissions = false,\n    constraints = { audio: true, video: true },\n    onUpdated\n  } = options;\n  const devices = ref([]);\n  const videoInputs = computed(() => devices.value.filter((i) => i.kind === \"videoinput\"));\n  const audioInputs = computed(() => devices.value.filter((i) => i.kind === \"audioinput\"));\n  const audioOutputs = computed(() => devices.value.filter((i) => i.kind === \"audiooutput\"));\n  const isSupported = useSupported(() => navigator && navigator.mediaDevices && navigator.mediaDevices.enumerateDevices);\n  const permissionGranted = shallowRef(false);\n  let stream;\n  async function update() {\n    if (!isSupported.value)\n      return;\n    devices.value = await navigator.mediaDevices.enumerateDevices();\n    onUpdated == null ? void 0 : onUpdated(devices.value);\n    if (stream) {\n      stream.getTracks().forEach((t) => t.stop());\n      stream = null;\n    }\n  }\n  async function ensurePermissions() {\n    const deviceName = constraints.video ? \"camera\" : \"microphone\";\n    if (!isSupported.value)\n      return false;\n    if (permissionGranted.value)\n      return true;\n    const { state, query } = usePermission(deviceName, { controls: true });\n    await query();\n    if (state.value !== \"granted\") {\n      let granted = true;\n      try {\n        const allDevices = await navigator.mediaDevices.enumerateDevices();\n        const hasCamera = allDevices.some((device) => device.kind === \"videoinput\");\n        const hasMicrophone = allDevices.some((device) => device.kind === \"audioinput\" || device.kind === \"audiooutput\");\n        constraints.video = hasCamera ? constraints.video : false;\n        constraints.audio = hasMicrophone ? constraints.audio : false;\n        stream = await navigator.mediaDevices.getUserMedia(constraints);\n      } catch (e) {\n        stream = null;\n        granted = false;\n      }\n      update();\n      permissionGranted.value = granted;\n    } else {\n      permissionGranted.value = true;\n    }\n    return permissionGranted.value;\n  }\n  if (isSupported.value) {\n    if (requestPermissions)\n      ensurePermissions();\n    useEventListener(navigator.mediaDevices, \"devicechange\", update, { passive: true });\n    update();\n  }\n  return {\n    devices,\n    ensurePermissions,\n    permissionGranted,\n    videoInputs,\n    audioInputs,\n    audioOutputs,\n    isSupported\n  };\n}\n\nfunction useDisplayMedia(options = {}) {\n  var _a;\n  const enabled = shallowRef((_a = options.enabled) != null ? _a : false);\n  const video = options.video;\n  const audio = options.audio;\n  const { navigator = defaultNavigator } = options;\n  const isSupported = useSupported(() => {\n    var _a2;\n    return (_a2 = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : _a2.getDisplayMedia;\n  });\n  const constraint = { audio, video };\n  const stream = shallowRef();\n  async function _start() {\n    var _a2;\n    if (!isSupported.value || stream.value)\n      return;\n    stream.value = await navigator.mediaDevices.getDisplayMedia(constraint);\n    (_a2 = stream.value) == null ? void 0 : _a2.getTracks().forEach((t) => useEventListener(t, \"ended\", stop, { passive: true }));\n    return stream.value;\n  }\n  async function _stop() {\n    var _a2;\n    (_a2 = stream.value) == null ? void 0 : _a2.getTracks().forEach((t) => t.stop());\n    stream.value = void 0;\n  }\n  function stop() {\n    _stop();\n    enabled.value = false;\n  }\n  async function start() {\n    await _start();\n    if (stream.value)\n      enabled.value = true;\n    return stream.value;\n  }\n  watch(\n    enabled,\n    (v) => {\n      if (v)\n        _start();\n      else\n        _stop();\n    },\n    { immediate: true }\n  );\n  return {\n    isSupported,\n    stream,\n    start,\n    stop,\n    enabled\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useDocumentVisibility(options = {}) {\n  const { document = defaultDocument } = options;\n  if (!document)\n    return shallowRef(\"visible\");\n  const visibility = shallowRef(document.visibilityState);\n  useEventListener(document, \"visibilitychange\", () => {\n    visibility.value = document.visibilityState;\n  }, { passive: true });\n  return visibility;\n}\n\nfunction useDraggable(target, options = {}) {\n  var _a;\n  const {\n    pointerTypes,\n    preventDefault,\n    stopPropagation,\n    exact,\n    onMove,\n    onEnd,\n    onStart,\n    initialValue,\n    axis = \"both\",\n    draggingElement = defaultWindow,\n    containerElement,\n    handle: draggingHandle = target,\n    buttons = [0]\n  } = options;\n  const position = ref(\n    (_a = toValue(initialValue)) != null ? _a : { x: 0, y: 0 }\n  );\n  const pressedDelta = ref();\n  const filterEvent = (e) => {\n    if (pointerTypes)\n      return pointerTypes.includes(e.pointerType);\n    return true;\n  };\n  const handleEvent = (e) => {\n    if (toValue(preventDefault))\n      e.preventDefault();\n    if (toValue(stopPropagation))\n      e.stopPropagation();\n  };\n  const start = (e) => {\n    var _a2;\n    if (!toValue(buttons).includes(e.button))\n      return;\n    if (toValue(options.disabled) || !filterEvent(e))\n      return;\n    if (toValue(exact) && e.target !== toValue(target))\n      return;\n    const container = toValue(containerElement);\n    const containerRect = (_a2 = container == null ? void 0 : container.getBoundingClientRect) == null ? void 0 : _a2.call(container);\n    const targetRect = toValue(target).getBoundingClientRect();\n    const pos = {\n      x: e.clientX - (container ? targetRect.left - containerRect.left + container.scrollLeft : targetRect.left),\n      y: e.clientY - (container ? targetRect.top - containerRect.top + container.scrollTop : targetRect.top)\n    };\n    if ((onStart == null ? void 0 : onStart(pos, e)) === false)\n      return;\n    pressedDelta.value = pos;\n    handleEvent(e);\n  };\n  const move = (e) => {\n    if (toValue(options.disabled) || !filterEvent(e))\n      return;\n    if (!pressedDelta.value)\n      return;\n    const container = toValue(containerElement);\n    const targetRect = toValue(target).getBoundingClientRect();\n    let { x, y } = position.value;\n    if (axis === \"x\" || axis === \"both\") {\n      x = e.clientX - pressedDelta.value.x;\n      if (container)\n        x = Math.min(Math.max(0, x), container.scrollWidth - targetRect.width);\n    }\n    if (axis === \"y\" || axis === \"both\") {\n      y = e.clientY - pressedDelta.value.y;\n      if (container)\n        y = Math.min(Math.max(0, y), container.scrollHeight - targetRect.height);\n    }\n    position.value = {\n      x,\n      y\n    };\n    onMove == null ? void 0 : onMove(position.value, e);\n    handleEvent(e);\n  };\n  const end = (e) => {\n    if (toValue(options.disabled) || !filterEvent(e))\n      return;\n    if (!pressedDelta.value)\n      return;\n    pressedDelta.value = void 0;\n    onEnd == null ? void 0 : onEnd(position.value, e);\n    handleEvent(e);\n  };\n  if (isClient) {\n    const config = () => {\n      var _a2;\n      return {\n        capture: (_a2 = options.capture) != null ? _a2 : true,\n        passive: !toValue(preventDefault)\n      };\n    };\n    useEventListener(draggingHandle, \"pointerdown\", start, config);\n    useEventListener(draggingElement, \"pointermove\", move, config);\n    useEventListener(draggingElement, \"pointerup\", end, config);\n  }\n  return {\n    ...toRefs(position),\n    position,\n    isDragging: computed(() => !!pressedDelta.value),\n    style: computed(\n      () => `left:${position.value.x}px;top:${position.value.y}px;`\n    )\n  };\n}\n\nfunction useDropZone(target, options = {}) {\n  var _a, _b;\n  const isOverDropZone = shallowRef(false);\n  const files = shallowRef(null);\n  let counter = 0;\n  let isValid = true;\n  if (isClient) {\n    const _options = typeof options === \"function\" ? { onDrop: options } : options;\n    const multiple = (_a = _options.multiple) != null ? _a : true;\n    const preventDefaultForUnhandled = (_b = _options.preventDefaultForUnhandled) != null ? _b : false;\n    const getFiles = (event) => {\n      var _a2, _b2;\n      const list = Array.from((_b2 = (_a2 = event.dataTransfer) == null ? void 0 : _a2.files) != null ? _b2 : []);\n      return list.length === 0 ? null : multiple ? list : [list[0]];\n    };\n    const checkDataTypes = (types) => {\n      const dataTypes = unref(_options.dataTypes);\n      if (typeof dataTypes === \"function\")\n        return dataTypes(types);\n      if (!(dataTypes == null ? void 0 : dataTypes.length))\n        return true;\n      if (types.length === 0)\n        return false;\n      return types.every(\n        (type) => dataTypes.some((allowedType) => type.includes(allowedType))\n      );\n    };\n    const checkValidity = (items) => {\n      const types = Array.from(items != null ? items : []).map((item) => item.type);\n      const dataTypesValid = checkDataTypes(types);\n      const multipleFilesValid = multiple || items.length <= 1;\n      return dataTypesValid && multipleFilesValid;\n    };\n    const isSafari = () => /^(?:(?!chrome|android).)*safari/i.test(navigator.userAgent) && !(\"chrome\" in window);\n    const handleDragEvent = (event, eventType) => {\n      var _a2, _b2, _c, _d, _e, _f;\n      const dataTransferItemList = (_a2 = event.dataTransfer) == null ? void 0 : _a2.items;\n      isValid = (_b2 = dataTransferItemList && checkValidity(dataTransferItemList)) != null ? _b2 : false;\n      if (preventDefaultForUnhandled) {\n        event.preventDefault();\n      }\n      if (!isSafari() && !isValid) {\n        if (event.dataTransfer) {\n          event.dataTransfer.dropEffect = \"none\";\n        }\n        return;\n      }\n      event.preventDefault();\n      if (event.dataTransfer) {\n        event.dataTransfer.dropEffect = \"copy\";\n      }\n      const currentFiles = getFiles(event);\n      switch (eventType) {\n        case \"enter\":\n          counter += 1;\n          isOverDropZone.value = true;\n          (_c = _options.onEnter) == null ? void 0 : _c.call(_options, null, event);\n          break;\n        case \"over\":\n          (_d = _options.onOver) == null ? void 0 : _d.call(_options, null, event);\n          break;\n        case \"leave\":\n          counter -= 1;\n          if (counter === 0)\n            isOverDropZone.value = false;\n          (_e = _options.onLeave) == null ? void 0 : _e.call(_options, null, event);\n          break;\n        case \"drop\":\n          counter = 0;\n          isOverDropZone.value = false;\n          if (isValid) {\n            files.value = currentFiles;\n            (_f = _options.onDrop) == null ? void 0 : _f.call(_options, currentFiles, event);\n          }\n          break;\n      }\n    };\n    useEventListener(target, \"dragenter\", (event) => handleDragEvent(event, \"enter\"));\n    useEventListener(target, \"dragover\", (event) => handleDragEvent(event, \"over\"));\n    useEventListener(target, \"dragleave\", (event) => handleDragEvent(event, \"leave\"));\n    useEventListener(target, \"drop\", (event) => handleDragEvent(event, \"drop\"));\n  }\n  return {\n    files,\n    isOverDropZone\n  };\n}\n\nfunction useResizeObserver(target, callback, options = {}) {\n  const { window = defaultWindow, ...observerOptions } = options;\n  let observer;\n  const isSupported = useSupported(() => window && \"ResizeObserver\" in window);\n  const cleanup = () => {\n    if (observer) {\n      observer.disconnect();\n      observer = void 0;\n    }\n  };\n  const targets = computed(() => {\n    const _targets = toValue(target);\n    return Array.isArray(_targets) ? _targets.map((el) => unrefElement(el)) : [unrefElement(_targets)];\n  });\n  const stopWatch = watch(\n    targets,\n    (els) => {\n      cleanup();\n      if (isSupported.value && window) {\n        observer = new ResizeObserver(callback);\n        for (const _el of els) {\n          if (_el)\n            observer.observe(_el, observerOptions);\n        }\n      }\n    },\n    { immediate: true, flush: \"post\" }\n  );\n  const stop = () => {\n    cleanup();\n    stopWatch();\n  };\n  tryOnScopeDispose(stop);\n  return {\n    isSupported,\n    stop\n  };\n}\n\nfunction useElementBounding(target, options = {}) {\n  const {\n    reset = true,\n    windowResize = true,\n    windowScroll = true,\n    immediate = true,\n    updateTiming = \"sync\"\n  } = options;\n  const height = shallowRef(0);\n  const bottom = shallowRef(0);\n  const left = shallowRef(0);\n  const right = shallowRef(0);\n  const top = shallowRef(0);\n  const width = shallowRef(0);\n  const x = shallowRef(0);\n  const y = shallowRef(0);\n  function recalculate() {\n    const el = unrefElement(target);\n    if (!el) {\n      if (reset) {\n        height.value = 0;\n        bottom.value = 0;\n        left.value = 0;\n        right.value = 0;\n        top.value = 0;\n        width.value = 0;\n        x.value = 0;\n        y.value = 0;\n      }\n      return;\n    }\n    const rect = el.getBoundingClientRect();\n    height.value = rect.height;\n    bottom.value = rect.bottom;\n    left.value = rect.left;\n    right.value = rect.right;\n    top.value = rect.top;\n    width.value = rect.width;\n    x.value = rect.x;\n    y.value = rect.y;\n  }\n  function update() {\n    if (updateTiming === \"sync\")\n      recalculate();\n    else if (updateTiming === \"next-frame\")\n      requestAnimationFrame(() => recalculate());\n  }\n  useResizeObserver(target, update);\n  watch(() => unrefElement(target), (ele) => !ele && update());\n  useMutationObserver(target, update, {\n    attributeFilter: [\"style\", \"class\"]\n  });\n  if (windowScroll)\n    useEventListener(\"scroll\", update, { capture: true, passive: true });\n  if (windowResize)\n    useEventListener(\"resize\", update, { passive: true });\n  tryOnMounted(() => {\n    if (immediate)\n      update();\n  });\n  return {\n    height,\n    bottom,\n    left,\n    right,\n    top,\n    width,\n    x,\n    y,\n    update\n  };\n}\n\nfunction useElementByPoint(options) {\n  const {\n    x,\n    y,\n    document = defaultDocument,\n    multiple,\n    interval = \"requestAnimationFrame\",\n    immediate = true\n  } = options;\n  const isSupported = useSupported(() => {\n    if (toValue(multiple))\n      return document && \"elementsFromPoint\" in document;\n    return document && \"elementFromPoint\" in document;\n  });\n  const element = shallowRef(null);\n  const cb = () => {\n    var _a, _b;\n    element.value = toValue(multiple) ? (_a = document == null ? void 0 : document.elementsFromPoint(toValue(x), toValue(y))) != null ? _a : [] : (_b = document == null ? void 0 : document.elementFromPoint(toValue(x), toValue(y))) != null ? _b : null;\n  };\n  const controls = interval === \"requestAnimationFrame\" ? useRafFn(cb, { immediate }) : useIntervalFn(cb, interval, { immediate });\n  return {\n    isSupported,\n    element,\n    ...controls\n  };\n}\n\nfunction useElementHover(el, options = {}) {\n  const {\n    delayEnter = 0,\n    delayLeave = 0,\n    triggerOnRemoval = false,\n    window = defaultWindow\n  } = options;\n  const isHovered = shallowRef(false);\n  let timer;\n  const toggle = (entering) => {\n    const delay = entering ? delayEnter : delayLeave;\n    if (timer) {\n      clearTimeout(timer);\n      timer = void 0;\n    }\n    if (delay)\n      timer = setTimeout(() => isHovered.value = entering, delay);\n    else\n      isHovered.value = entering;\n  };\n  if (!window)\n    return isHovered;\n  useEventListener(el, \"mouseenter\", () => toggle(true), { passive: true });\n  useEventListener(el, \"mouseleave\", () => toggle(false), { passive: true });\n  if (triggerOnRemoval) {\n    onElementRemoval(\n      computed(() => unrefElement(el)),\n      () => toggle(false)\n    );\n  }\n  return isHovered;\n}\n\nfunction useElementSize(target, initialSize = { width: 0, height: 0 }, options = {}) {\n  const { window = defaultWindow, box = \"content-box\" } = options;\n  const isSVG = computed(() => {\n    var _a, _b;\n    return (_b = (_a = unrefElement(target)) == null ? void 0 : _a.namespaceURI) == null ? void 0 : _b.includes(\"svg\");\n  });\n  const width = shallowRef(initialSize.width);\n  const height = shallowRef(initialSize.height);\n  const { stop: stop1 } = useResizeObserver(\n    target,\n    ([entry]) => {\n      const boxSize = box === \"border-box\" ? entry.borderBoxSize : box === \"content-box\" ? entry.contentBoxSize : entry.devicePixelContentBoxSize;\n      if (window && isSVG.value) {\n        const $elem = unrefElement(target);\n        if ($elem) {\n          const rect = $elem.getBoundingClientRect();\n          width.value = rect.width;\n          height.value = rect.height;\n        }\n      } else {\n        if (boxSize) {\n          const formatBoxSize = toArray(boxSize);\n          width.value = formatBoxSize.reduce((acc, { inlineSize }) => acc + inlineSize, 0);\n          height.value = formatBoxSize.reduce((acc, { blockSize }) => acc + blockSize, 0);\n        } else {\n          width.value = entry.contentRect.width;\n          height.value = entry.contentRect.height;\n        }\n      }\n    },\n    options\n  );\n  tryOnMounted(() => {\n    const ele = unrefElement(target);\n    if (ele) {\n      width.value = \"offsetWidth\" in ele ? ele.offsetWidth : initialSize.width;\n      height.value = \"offsetHeight\" in ele ? ele.offsetHeight : initialSize.height;\n    }\n  });\n  const stop2 = watch(\n    () => unrefElement(target),\n    (ele) => {\n      width.value = ele ? initialSize.width : 0;\n      height.value = ele ? initialSize.height : 0;\n    }\n  );\n  function stop() {\n    stop1();\n    stop2();\n  }\n  return {\n    width,\n    height,\n    stop\n  };\n}\n\nfunction useIntersectionObserver(target, callback, options = {}) {\n  const {\n    root,\n    rootMargin = \"0px\",\n    threshold = 0,\n    window = defaultWindow,\n    immediate = true\n  } = options;\n  const isSupported = useSupported(() => window && \"IntersectionObserver\" in window);\n  const targets = computed(() => {\n    const _target = toValue(target);\n    return toArray(_target).map(unrefElement).filter(notNullish);\n  });\n  let cleanup = noop;\n  const isActive = shallowRef(immediate);\n  const stopWatch = isSupported.value ? watch(\n    () => [targets.value, unrefElement(root), isActive.value],\n    ([targets2, root2]) => {\n      cleanup();\n      if (!isActive.value)\n        return;\n      if (!targets2.length)\n        return;\n      const observer = new IntersectionObserver(\n        callback,\n        {\n          root: unrefElement(root2),\n          rootMargin,\n          threshold\n        }\n      );\n      targets2.forEach((el) => el && observer.observe(el));\n      cleanup = () => {\n        observer.disconnect();\n        cleanup = noop;\n      };\n    },\n    { immediate, flush: \"post\" }\n  ) : noop;\n  const stop = () => {\n    cleanup();\n    stopWatch();\n    isActive.value = false;\n  };\n  tryOnScopeDispose(stop);\n  return {\n    isSupported,\n    isActive,\n    pause() {\n      cleanup();\n      isActive.value = false;\n    },\n    resume() {\n      isActive.value = true;\n    },\n    stop\n  };\n}\n\nfunction useElementVisibility(element, options = {}) {\n  const {\n    window = defaultWindow,\n    scrollTarget,\n    threshold = 0,\n    rootMargin,\n    once = false\n  } = options;\n  const elementIsVisible = shallowRef(false);\n  const { stop } = useIntersectionObserver(\n    element,\n    (intersectionObserverEntries) => {\n      let isIntersecting = elementIsVisible.value;\n      let latestTime = 0;\n      for (const entry of intersectionObserverEntries) {\n        if (entry.time >= latestTime) {\n          latestTime = entry.time;\n          isIntersecting = entry.isIntersecting;\n        }\n      }\n      elementIsVisible.value = isIntersecting;\n      if (once) {\n        watchOnce(elementIsVisible, () => {\n          stop();\n        });\n      }\n    },\n    {\n      root: scrollTarget,\n      window,\n      threshold,\n      rootMargin: toValue(rootMargin)\n    }\n  );\n  return elementIsVisible;\n}\n\nconst events = /* @__PURE__ */ new Map();\n\n// @__NO_SIDE_EFFECTS__\nfunction useEventBus(key) {\n  const scope = getCurrentScope();\n  function on(listener) {\n    var _a;\n    const listeners = events.get(key) || /* @__PURE__ */ new Set();\n    listeners.add(listener);\n    events.set(key, listeners);\n    const _off = () => off(listener);\n    (_a = scope == null ? void 0 : scope.cleanups) == null ? void 0 : _a.push(_off);\n    return _off;\n  }\n  function once(listener) {\n    function _listener(...args) {\n      off(_listener);\n      listener(...args);\n    }\n    return on(_listener);\n  }\n  function off(listener) {\n    const listeners = events.get(key);\n    if (!listeners)\n      return;\n    listeners.delete(listener);\n    if (!listeners.size)\n      reset();\n  }\n  function reset() {\n    events.delete(key);\n  }\n  function emit(event, payload) {\n    var _a;\n    (_a = events.get(key)) == null ? void 0 : _a.forEach((v) => v(event, payload));\n  }\n  return { on, once, off, emit, reset };\n}\n\nfunction resolveNestedOptions$1(options) {\n  if (options === true)\n    return {};\n  return options;\n}\nfunction useEventSource(url, events = [], options = {}) {\n  const event = shallowRef(null);\n  const data = shallowRef(null);\n  const status = shallowRef(\"CONNECTING\");\n  const eventSource = ref(null);\n  const error = shallowRef(null);\n  const urlRef = toRef(url);\n  const lastEventId = shallowRef(null);\n  let explicitlyClosed = false;\n  let retried = 0;\n  const {\n    withCredentials = false,\n    immediate = true,\n    autoConnect = true,\n    autoReconnect,\n    serializer = {\n      read: (v) => v\n    }\n  } = options;\n  const close = () => {\n    if (isClient && eventSource.value) {\n      eventSource.value.close();\n      eventSource.value = null;\n      status.value = \"CLOSED\";\n      explicitlyClosed = true;\n    }\n  };\n  const _init = () => {\n    if (explicitlyClosed || typeof urlRef.value === \"undefined\")\n      return;\n    const es = new EventSource(urlRef.value, { withCredentials });\n    status.value = \"CONNECTING\";\n    eventSource.value = es;\n    es.onopen = () => {\n      status.value = \"OPEN\";\n      error.value = null;\n    };\n    es.onerror = (e) => {\n      status.value = \"CLOSED\";\n      error.value = e;\n      if (es.readyState === 2 && !explicitlyClosed && autoReconnect) {\n        es.close();\n        const {\n          retries = -1,\n          delay = 1e3,\n          onFailed\n        } = resolveNestedOptions$1(autoReconnect);\n        retried += 1;\n        if (typeof retries === \"number\" && (retries < 0 || retried < retries))\n          setTimeout(_init, delay);\n        else if (typeof retries === \"function\" && retries())\n          setTimeout(_init, delay);\n        else\n          onFailed == null ? void 0 : onFailed();\n      }\n    };\n    es.onmessage = (e) => {\n      var _a;\n      event.value = null;\n      data.value = (_a = serializer.read(e.data)) != null ? _a : null;\n      lastEventId.value = e.lastEventId;\n    };\n    for (const event_name of events) {\n      useEventListener(es, event_name, (e) => {\n        var _a, _b;\n        event.value = event_name;\n        data.value = (_a = serializer.read(e.data)) != null ? _a : null;\n        lastEventId.value = (_b = e.lastEventId) != null ? _b : null;\n      }, { passive: true });\n    }\n  };\n  const open = () => {\n    if (!isClient)\n      return;\n    close();\n    explicitlyClosed = false;\n    retried = 0;\n    _init();\n  };\n  if (immediate)\n    open();\n  if (autoConnect)\n    watch(urlRef, open);\n  tryOnScopeDispose(close);\n  return {\n    eventSource,\n    event,\n    data,\n    status,\n    error,\n    open,\n    close,\n    lastEventId\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useEyeDropper(options = {}) {\n  const { initialValue = \"\" } = options;\n  const isSupported = useSupported(() => typeof window !== \"undefined\" && \"EyeDropper\" in window);\n  const sRGBHex = shallowRef(initialValue);\n  async function open(openOptions) {\n    if (!isSupported.value)\n      return;\n    const eyeDropper = new window.EyeDropper();\n    const result = await eyeDropper.open(openOptions);\n    sRGBHex.value = result.sRGBHex;\n    return result;\n  }\n  return { isSupported, sRGBHex, open };\n}\n\nfunction useFavicon(newIcon = null, options = {}) {\n  const {\n    baseUrl = \"\",\n    rel = \"icon\",\n    document = defaultDocument\n  } = options;\n  const favicon = toRef(newIcon);\n  const applyIcon = (icon) => {\n    const elements = document == null ? void 0 : document.head.querySelectorAll(`link[rel*=\"${rel}\"]`);\n    if (!elements || elements.length === 0) {\n      const link = document == null ? void 0 : document.createElement(\"link\");\n      if (link) {\n        link.rel = rel;\n        link.href = `${baseUrl}${icon}`;\n        link.type = `image/${icon.split(\".\").pop()}`;\n        document == null ? void 0 : document.head.append(link);\n      }\n      return;\n    }\n    elements == null ? void 0 : elements.forEach((el) => el.href = `${baseUrl}${icon}`);\n  };\n  watch(\n    favicon,\n    (i, o) => {\n      if (typeof i === \"string\" && i !== o)\n        applyIcon(i);\n    },\n    { immediate: true }\n  );\n  return favicon;\n}\n\nconst payloadMapping = {\n  json: \"application/json\",\n  text: \"text/plain\"\n};\nfunction isFetchOptions(obj) {\n  return obj && containsProp(obj, \"immediate\", \"refetch\", \"initialData\", \"timeout\", \"beforeFetch\", \"afterFetch\", \"onFetchError\", \"fetch\", \"updateDataOnError\");\n}\nconst reAbsolute = /^(?:[a-z][a-z\\d+\\-.]*:)?\\/\\//i;\nfunction isAbsoluteURL(url) {\n  return reAbsolute.test(url);\n}\nfunction headersToObject(headers) {\n  if (typeof Headers !== \"undefined\" && headers instanceof Headers)\n    return Object.fromEntries(headers.entries());\n  return headers;\n}\nfunction combineCallbacks(combination, ...callbacks) {\n  if (combination === \"overwrite\") {\n    return async (ctx) => {\n      let callback;\n      for (let i = callbacks.length - 1; i >= 0; i--) {\n        if (callbacks[i] != null) {\n          callback = callbacks[i];\n          break;\n        }\n      }\n      if (callback)\n        return { ...ctx, ...await callback(ctx) };\n      return ctx;\n    };\n  } else {\n    return async (ctx) => {\n      for (const callback of callbacks) {\n        if (callback)\n          ctx = { ...ctx, ...await callback(ctx) };\n      }\n      return ctx;\n    };\n  }\n}\nfunction createFetch(config = {}) {\n  const _combination = config.combination || \"chain\";\n  const _options = config.options || {};\n  const _fetchOptions = config.fetchOptions || {};\n  function useFactoryFetch(url, ...args) {\n    const computedUrl = computed(() => {\n      const baseUrl = toValue(config.baseUrl);\n      const targetUrl = toValue(url);\n      return baseUrl && !isAbsoluteURL(targetUrl) ? joinPaths(baseUrl, targetUrl) : targetUrl;\n    });\n    let options = _options;\n    let fetchOptions = _fetchOptions;\n    if (args.length > 0) {\n      if (isFetchOptions(args[0])) {\n        options = {\n          ...options,\n          ...args[0],\n          beforeFetch: combineCallbacks(_combination, _options.beforeFetch, args[0].beforeFetch),\n          afterFetch: combineCallbacks(_combination, _options.afterFetch, args[0].afterFetch),\n          onFetchError: combineCallbacks(_combination, _options.onFetchError, args[0].onFetchError)\n        };\n      } else {\n        fetchOptions = {\n          ...fetchOptions,\n          ...args[0],\n          headers: {\n            ...headersToObject(fetchOptions.headers) || {},\n            ...headersToObject(args[0].headers) || {}\n          }\n        };\n      }\n    }\n    if (args.length > 1 && isFetchOptions(args[1])) {\n      options = {\n        ...options,\n        ...args[1],\n        beforeFetch: combineCallbacks(_combination, _options.beforeFetch, args[1].beforeFetch),\n        afterFetch: combineCallbacks(_combination, _options.afterFetch, args[1].afterFetch),\n        onFetchError: combineCallbacks(_combination, _options.onFetchError, args[1].onFetchError)\n      };\n    }\n    return useFetch(computedUrl, fetchOptions, options);\n  }\n  return useFactoryFetch;\n}\nfunction useFetch(url, ...args) {\n  var _a, _b;\n  const supportsAbort = typeof AbortController === \"function\";\n  let fetchOptions = {};\n  let options = {\n    immediate: true,\n    refetch: false,\n    timeout: 0,\n    updateDataOnError: false\n  };\n  const config = {\n    method: \"GET\",\n    type: \"text\",\n    payload: void 0\n  };\n  if (args.length > 0) {\n    if (isFetchOptions(args[0]))\n      options = { ...options, ...args[0] };\n    else\n      fetchOptions = args[0];\n  }\n  if (args.length > 1) {\n    if (isFetchOptions(args[1]))\n      options = { ...options, ...args[1] };\n  }\n  const {\n    fetch = (_b = (_a = defaultWindow) == null ? void 0 : _a.fetch) != null ? _b : globalThis == null ? void 0 : globalThis.fetch,\n    initialData,\n    timeout\n  } = options;\n  const responseEvent = createEventHook();\n  const errorEvent = createEventHook();\n  const finallyEvent = createEventHook();\n  const isFinished = shallowRef(false);\n  const isFetching = shallowRef(false);\n  const aborted = shallowRef(false);\n  const statusCode = shallowRef(null);\n  const response = shallowRef(null);\n  const error = shallowRef(null);\n  const data = shallowRef(initialData || null);\n  const canAbort = computed(() => supportsAbort && isFetching.value);\n  let controller;\n  let timer;\n  const abort = (reason) => {\n    if (supportsAbort) {\n      controller == null ? void 0 : controller.abort(reason);\n      controller = new AbortController();\n      controller.signal.onabort = () => aborted.value = true;\n      fetchOptions = {\n        ...fetchOptions,\n        signal: controller.signal\n      };\n    }\n  };\n  const loading = (isLoading) => {\n    isFetching.value = isLoading;\n    isFinished.value = !isLoading;\n  };\n  if (timeout)\n    timer = useTimeoutFn(abort, timeout, { immediate: false });\n  let executeCounter = 0;\n  const execute = async (throwOnFailed = false) => {\n    var _a2, _b2;\n    abort();\n    loading(true);\n    error.value = null;\n    statusCode.value = null;\n    aborted.value = false;\n    executeCounter += 1;\n    const currentExecuteCounter = executeCounter;\n    const defaultFetchOptions = {\n      method: config.method,\n      headers: {}\n    };\n    const payload = toValue(config.payload);\n    if (payload) {\n      const headers = headersToObject(defaultFetchOptions.headers);\n      const proto = Object.getPrototypeOf(payload);\n      if (!config.payloadType && payload && (proto === Object.prototype || Array.isArray(proto)) && !(payload instanceof FormData))\n        config.payloadType = \"json\";\n      if (config.payloadType)\n        headers[\"Content-Type\"] = (_a2 = payloadMapping[config.payloadType]) != null ? _a2 : config.payloadType;\n      defaultFetchOptions.body = config.payloadType === \"json\" ? JSON.stringify(payload) : payload;\n    }\n    let isCanceled = false;\n    const context = {\n      url: toValue(url),\n      options: {\n        ...defaultFetchOptions,\n        ...fetchOptions\n      },\n      cancel: () => {\n        isCanceled = true;\n      }\n    };\n    if (options.beforeFetch)\n      Object.assign(context, await options.beforeFetch(context));\n    if (isCanceled || !fetch) {\n      loading(false);\n      return Promise.resolve(null);\n    }\n    let responseData = null;\n    if (timer)\n      timer.start();\n    return fetch(\n      context.url,\n      {\n        ...defaultFetchOptions,\n        ...context.options,\n        headers: {\n          ...headersToObject(defaultFetchOptions.headers),\n          ...headersToObject((_b2 = context.options) == null ? void 0 : _b2.headers)\n        }\n      }\n    ).then(async (fetchResponse) => {\n      response.value = fetchResponse;\n      statusCode.value = fetchResponse.status;\n      responseData = await fetchResponse.clone()[config.type]();\n      if (!fetchResponse.ok) {\n        data.value = initialData || null;\n        throw new Error(fetchResponse.statusText);\n      }\n      if (options.afterFetch) {\n        ({ data: responseData } = await options.afterFetch({\n          data: responseData,\n          response: fetchResponse,\n          context,\n          execute\n        }));\n      }\n      data.value = responseData;\n      responseEvent.trigger(fetchResponse);\n      return fetchResponse;\n    }).catch(async (fetchError) => {\n      let errorData = fetchError.message || fetchError.name;\n      if (options.onFetchError) {\n        ({ error: errorData, data: responseData } = await options.onFetchError({\n          data: responseData,\n          error: fetchError,\n          response: response.value,\n          context,\n          execute\n        }));\n      }\n      error.value = errorData;\n      if (options.updateDataOnError)\n        data.value = responseData;\n      errorEvent.trigger(fetchError);\n      if (throwOnFailed)\n        throw fetchError;\n      return null;\n    }).finally(() => {\n      if (currentExecuteCounter === executeCounter)\n        loading(false);\n      if (timer)\n        timer.stop();\n      finallyEvent.trigger(null);\n    });\n  };\n  const refetch = toRef(options.refetch);\n  watch(\n    [\n      refetch,\n      toRef(url)\n    ],\n    ([refetch2]) => refetch2 && execute(),\n    { deep: true }\n  );\n  const shell = {\n    isFinished: readonly(isFinished),\n    isFetching: readonly(isFetching),\n    statusCode,\n    response,\n    error,\n    data,\n    canAbort,\n    aborted,\n    abort,\n    execute,\n    onFetchResponse: responseEvent.on,\n    onFetchError: errorEvent.on,\n    onFetchFinally: finallyEvent.on,\n    // method\n    get: setMethod(\"GET\"),\n    put: setMethod(\"PUT\"),\n    post: setMethod(\"POST\"),\n    delete: setMethod(\"DELETE\"),\n    patch: setMethod(\"PATCH\"),\n    head: setMethod(\"HEAD\"),\n    options: setMethod(\"OPTIONS\"),\n    // type\n    json: setType(\"json\"),\n    text: setType(\"text\"),\n    blob: setType(\"blob\"),\n    arrayBuffer: setType(\"arrayBuffer\"),\n    formData: setType(\"formData\")\n  };\n  function setMethod(method) {\n    return (payload, payloadType) => {\n      if (!isFetching.value) {\n        config.method = method;\n        config.payload = payload;\n        config.payloadType = payloadType;\n        if (isRef(config.payload)) {\n          watch(\n            [\n              refetch,\n              toRef(config.payload)\n            ],\n            ([refetch2]) => refetch2 && execute(),\n            { deep: true }\n          );\n        }\n        return {\n          ...shell,\n          then(onFulfilled, onRejected) {\n            return waitUntilFinished().then(onFulfilled, onRejected);\n          }\n        };\n      }\n      return void 0;\n    };\n  }\n  function waitUntilFinished() {\n    return new Promise((resolve, reject) => {\n      until(isFinished).toBe(true).then(() => resolve(shell)).catch(reject);\n    });\n  }\n  function setType(type) {\n    return () => {\n      if (!isFetching.value) {\n        config.type = type;\n        return {\n          ...shell,\n          then(onFulfilled, onRejected) {\n            return waitUntilFinished().then(onFulfilled, onRejected);\n          }\n        };\n      }\n      return void 0;\n    };\n  }\n  if (options.immediate)\n    Promise.resolve().then(() => execute());\n  return {\n    ...shell,\n    then(onFulfilled, onRejected) {\n      return waitUntilFinished().then(onFulfilled, onRejected);\n    }\n  };\n}\nfunction joinPaths(start, end) {\n  if (!start.endsWith(\"/\") && !end.startsWith(\"/\")) {\n    return `${start}/${end}`;\n  }\n  if (start.endsWith(\"/\") && end.startsWith(\"/\")) {\n    return `${start.slice(0, -1)}${end}`;\n  }\n  return `${start}${end}`;\n}\n\nconst DEFAULT_OPTIONS = {\n  multiple: true,\n  accept: \"*\",\n  reset: false,\n  directory: false\n};\nfunction prepareInitialFiles(files) {\n  if (!files)\n    return null;\n  if (files instanceof FileList)\n    return files;\n  const dt = new DataTransfer();\n  for (const file of files) {\n    dt.items.add(file);\n  }\n  return dt.files;\n}\nfunction useFileDialog(options = {}) {\n  const {\n    document = defaultDocument\n  } = options;\n  const files = ref(prepareInitialFiles(options.initialFiles));\n  const { on: onChange, trigger: changeTrigger } = createEventHook();\n  const { on: onCancel, trigger: cancelTrigger } = createEventHook();\n  const inputRef = computed(() => {\n    var _a;\n    const input = (_a = unrefElement(options.input)) != null ? _a : document ? document.createElement(\"input\") : void 0;\n    if (input) {\n      input.type = \"file\";\n      input.onchange = (event) => {\n        const result = event.target;\n        files.value = result.files;\n        changeTrigger(files.value);\n      };\n      input.oncancel = () => {\n        cancelTrigger();\n      };\n    }\n    return input;\n  });\n  const reset = () => {\n    files.value = null;\n    if (inputRef.value && inputRef.value.value) {\n      inputRef.value.value = \"\";\n      changeTrigger(null);\n    }\n  };\n  const applyOptions = (options2) => {\n    const el = inputRef.value;\n    if (!el)\n      return;\n    el.multiple = toValue(options2.multiple);\n    el.accept = toValue(options2.accept);\n    el.webkitdirectory = toValue(options2.directory);\n    if (hasOwn(options2, \"capture\"))\n      el.capture = toValue(options2.capture);\n  };\n  const open = (localOptions) => {\n    const el = inputRef.value;\n    if (!el)\n      return;\n    const mergedOptions = {\n      ...DEFAULT_OPTIONS,\n      ...options,\n      ...localOptions\n    };\n    applyOptions(mergedOptions);\n    if (toValue(mergedOptions.reset))\n      reset();\n    el.click();\n  };\n  watchEffect(() => {\n    applyOptions(options);\n  });\n  return {\n    files: readonly(files),\n    open,\n    reset,\n    onCancel,\n    onChange\n  };\n}\n\nfunction useFileSystemAccess(options = {}) {\n  const {\n    window: _window = defaultWindow,\n    dataType = \"Text\"\n  } = options;\n  const window = _window;\n  const isSupported = useSupported(() => window && \"showSaveFilePicker\" in window && \"showOpenFilePicker\" in window);\n  const fileHandle = shallowRef();\n  const data = shallowRef();\n  const file = shallowRef();\n  const fileName = computed(() => {\n    var _a, _b;\n    return (_b = (_a = file.value) == null ? void 0 : _a.name) != null ? _b : \"\";\n  });\n  const fileMIME = computed(() => {\n    var _a, _b;\n    return (_b = (_a = file.value) == null ? void 0 : _a.type) != null ? _b : \"\";\n  });\n  const fileSize = computed(() => {\n    var _a, _b;\n    return (_b = (_a = file.value) == null ? void 0 : _a.size) != null ? _b : 0;\n  });\n  const fileLastModified = computed(() => {\n    var _a, _b;\n    return (_b = (_a = file.value) == null ? void 0 : _a.lastModified) != null ? _b : 0;\n  });\n  async function open(_options = {}) {\n    if (!isSupported.value)\n      return;\n    const [handle] = await window.showOpenFilePicker({ ...toValue(options), ..._options });\n    fileHandle.value = handle;\n    await updateData();\n  }\n  async function create(_options = {}) {\n    if (!isSupported.value)\n      return;\n    fileHandle.value = await window.showSaveFilePicker({ ...options, ..._options });\n    data.value = void 0;\n    await updateData();\n  }\n  async function save(_options = {}) {\n    if (!isSupported.value)\n      return;\n    if (!fileHandle.value)\n      return saveAs(_options);\n    if (data.value) {\n      const writableStream = await fileHandle.value.createWritable();\n      await writableStream.write(data.value);\n      await writableStream.close();\n    }\n    await updateFile();\n  }\n  async function saveAs(_options = {}) {\n    if (!isSupported.value)\n      return;\n    fileHandle.value = await window.showSaveFilePicker({ ...options, ..._options });\n    if (data.value) {\n      const writableStream = await fileHandle.value.createWritable();\n      await writableStream.write(data.value);\n      await writableStream.close();\n    }\n    await updateFile();\n  }\n  async function updateFile() {\n    var _a;\n    file.value = await ((_a = fileHandle.value) == null ? void 0 : _a.getFile());\n  }\n  async function updateData() {\n    var _a, _b;\n    await updateFile();\n    const type = toValue(dataType);\n    if (type === \"Text\")\n      data.value = await ((_a = file.value) == null ? void 0 : _a.text());\n    else if (type === \"ArrayBuffer\")\n      data.value = await ((_b = file.value) == null ? void 0 : _b.arrayBuffer());\n    else if (type === \"Blob\")\n      data.value = file.value;\n  }\n  watch(() => toValue(dataType), updateData);\n  return {\n    isSupported,\n    data,\n    file,\n    fileName,\n    fileMIME,\n    fileSize,\n    fileLastModified,\n    open,\n    create,\n    save,\n    saveAs,\n    updateData\n  };\n}\n\nfunction useFocus(target, options = {}) {\n  const { initialValue = false, focusVisible = false, preventScroll = false } = options;\n  const innerFocused = shallowRef(false);\n  const targetElement = computed(() => unrefElement(target));\n  const listenerOptions = { passive: true };\n  useEventListener(targetElement, \"focus\", (event) => {\n    var _a, _b;\n    if (!focusVisible || ((_b = (_a = event.target).matches) == null ? void 0 : _b.call(_a, \":focus-visible\")))\n      innerFocused.value = true;\n  }, listenerOptions);\n  useEventListener(targetElement, \"blur\", () => innerFocused.value = false, listenerOptions);\n  const focused = computed({\n    get: () => innerFocused.value,\n    set(value) {\n      var _a, _b;\n      if (!value && innerFocused.value)\n        (_a = targetElement.value) == null ? void 0 : _a.blur();\n      else if (value && !innerFocused.value)\n        (_b = targetElement.value) == null ? void 0 : _b.focus({ preventScroll });\n    }\n  });\n  watch(\n    targetElement,\n    () => {\n      focused.value = initialValue;\n    },\n    { immediate: true, flush: \"post\" }\n  );\n  return { focused };\n}\n\nconst EVENT_FOCUS_IN = \"focusin\";\nconst EVENT_FOCUS_OUT = \"focusout\";\nconst PSEUDO_CLASS_FOCUS_WITHIN = \":focus-within\";\nfunction useFocusWithin(target, options = {}) {\n  const { window = defaultWindow } = options;\n  const targetElement = computed(() => unrefElement(target));\n  const _focused = shallowRef(false);\n  const focused = computed(() => _focused.value);\n  const activeElement = useActiveElement(options);\n  if (!window || !activeElement.value) {\n    return { focused };\n  }\n  const listenerOptions = { passive: true };\n  useEventListener(targetElement, EVENT_FOCUS_IN, () => _focused.value = true, listenerOptions);\n  useEventListener(targetElement, EVENT_FOCUS_OUT, () => {\n    var _a, _b, _c;\n    return _focused.value = (_c = (_b = (_a = targetElement.value) == null ? void 0 : _a.matches) == null ? void 0 : _b.call(_a, PSEUDO_CLASS_FOCUS_WITHIN)) != null ? _c : false;\n  }, listenerOptions);\n  return { focused };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useFps(options) {\n  var _a;\n  const fps = shallowRef(0);\n  if (typeof performance === \"undefined\")\n    return fps;\n  const every = (_a = options == null ? void 0 : options.every) != null ? _a : 10;\n  let last = performance.now();\n  let ticks = 0;\n  useRafFn(() => {\n    ticks += 1;\n    if (ticks >= every) {\n      const now = performance.now();\n      const diff = now - last;\n      fps.value = Math.round(1e3 / (diff / ticks));\n      last = now;\n      ticks = 0;\n    }\n  });\n  return fps;\n}\n\nconst eventHandlers = [\n  \"fullscreenchange\",\n  \"webkitfullscreenchange\",\n  \"webkitendfullscreen\",\n  \"mozfullscreenchange\",\n  \"MSFullscreenChange\"\n];\nfunction useFullscreen(target, options = {}) {\n  const {\n    document = defaultDocument,\n    autoExit = false\n  } = options;\n  const targetRef = computed(() => {\n    var _a;\n    return (_a = unrefElement(target)) != null ? _a : document == null ? void 0 : document.documentElement;\n  });\n  const isFullscreen = shallowRef(false);\n  const requestMethod = computed(() => {\n    return [\n      \"requestFullscreen\",\n      \"webkitRequestFullscreen\",\n      \"webkitEnterFullscreen\",\n      \"webkitEnterFullScreen\",\n      \"webkitRequestFullScreen\",\n      \"mozRequestFullScreen\",\n      \"msRequestFullscreen\"\n    ].find((m) => document && m in document || targetRef.value && m in targetRef.value);\n  });\n  const exitMethod = computed(() => {\n    return [\n      \"exitFullscreen\",\n      \"webkitExitFullscreen\",\n      \"webkitExitFullScreen\",\n      \"webkitCancelFullScreen\",\n      \"mozCancelFullScreen\",\n      \"msExitFullscreen\"\n    ].find((m) => document && m in document || targetRef.value && m in targetRef.value);\n  });\n  const fullscreenEnabled = computed(() => {\n    return [\n      \"fullScreen\",\n      \"webkitIsFullScreen\",\n      \"webkitDisplayingFullscreen\",\n      \"mozFullScreen\",\n      \"msFullscreenElement\"\n    ].find((m) => document && m in document || targetRef.value && m in targetRef.value);\n  });\n  const fullscreenElementMethod = [\n    \"fullscreenElement\",\n    \"webkitFullscreenElement\",\n    \"mozFullScreenElement\",\n    \"msFullscreenElement\"\n  ].find((m) => document && m in document);\n  const isSupported = useSupported(() => targetRef.value && document && requestMethod.value !== void 0 && exitMethod.value !== void 0 && fullscreenEnabled.value !== void 0);\n  const isCurrentElementFullScreen = () => {\n    if (fullscreenElementMethod)\n      return (document == null ? void 0 : document[fullscreenElementMethod]) === targetRef.value;\n    return false;\n  };\n  const isElementFullScreen = () => {\n    if (fullscreenEnabled.value) {\n      if (document && document[fullscreenEnabled.value] != null) {\n        return document[fullscreenEnabled.value];\n      } else {\n        const target2 = targetRef.value;\n        if ((target2 == null ? void 0 : target2[fullscreenEnabled.value]) != null) {\n          return Boolean(target2[fullscreenEnabled.value]);\n        }\n      }\n    }\n    return false;\n  };\n  async function exit() {\n    if (!isSupported.value || !isFullscreen.value)\n      return;\n    if (exitMethod.value) {\n      if ((document == null ? void 0 : document[exitMethod.value]) != null) {\n        await document[exitMethod.value]();\n      } else {\n        const target2 = targetRef.value;\n        if ((target2 == null ? void 0 : target2[exitMethod.value]) != null)\n          await target2[exitMethod.value]();\n      }\n    }\n    isFullscreen.value = false;\n  }\n  async function enter() {\n    if (!isSupported.value || isFullscreen.value)\n      return;\n    if (isElementFullScreen())\n      await exit();\n    const target2 = targetRef.value;\n    if (requestMethod.value && (target2 == null ? void 0 : target2[requestMethod.value]) != null) {\n      await target2[requestMethod.value]();\n      isFullscreen.value = true;\n    }\n  }\n  async function toggle() {\n    await (isFullscreen.value ? exit() : enter());\n  }\n  const handlerCallback = () => {\n    const isElementFullScreenValue = isElementFullScreen();\n    if (!isElementFullScreenValue || isElementFullScreenValue && isCurrentElementFullScreen())\n      isFullscreen.value = isElementFullScreenValue;\n  };\n  const listenerOptions = { capture: false, passive: true };\n  useEventListener(document, eventHandlers, handlerCallback, listenerOptions);\n  useEventListener(() => unrefElement(targetRef), eventHandlers, handlerCallback, listenerOptions);\n  tryOnMounted(handlerCallback, false);\n  if (autoExit)\n    tryOnScopeDispose(exit);\n  return {\n    isSupported,\n    isFullscreen,\n    enter,\n    exit,\n    toggle\n  };\n}\n\nfunction mapGamepadToXbox360Controller(gamepad) {\n  return computed(() => {\n    if (gamepad.value) {\n      return {\n        buttons: {\n          a: gamepad.value.buttons[0],\n          b: gamepad.value.buttons[1],\n          x: gamepad.value.buttons[2],\n          y: gamepad.value.buttons[3]\n        },\n        bumper: {\n          left: gamepad.value.buttons[4],\n          right: gamepad.value.buttons[5]\n        },\n        triggers: {\n          left: gamepad.value.buttons[6],\n          right: gamepad.value.buttons[7]\n        },\n        stick: {\n          left: {\n            horizontal: gamepad.value.axes[0],\n            vertical: gamepad.value.axes[1],\n            button: gamepad.value.buttons[10]\n          },\n          right: {\n            horizontal: gamepad.value.axes[2],\n            vertical: gamepad.value.axes[3],\n            button: gamepad.value.buttons[11]\n          }\n        },\n        dpad: {\n          up: gamepad.value.buttons[12],\n          down: gamepad.value.buttons[13],\n          left: gamepad.value.buttons[14],\n          right: gamepad.value.buttons[15]\n        },\n        back: gamepad.value.buttons[8],\n        start: gamepad.value.buttons[9]\n      };\n    }\n    return null;\n  });\n}\n// @__NO_SIDE_EFFECTS__\nfunction useGamepad(options = {}) {\n  const {\n    navigator = defaultNavigator\n  } = options;\n  const isSupported = useSupported(() => navigator && \"getGamepads\" in navigator);\n  const gamepads = ref([]);\n  const onConnectedHook = createEventHook();\n  const onDisconnectedHook = createEventHook();\n  const stateFromGamepad = (gamepad) => {\n    const hapticActuators = [];\n    const vibrationActuator = \"vibrationActuator\" in gamepad ? gamepad.vibrationActuator : null;\n    if (vibrationActuator)\n      hapticActuators.push(vibrationActuator);\n    if (gamepad.hapticActuators)\n      hapticActuators.push(...gamepad.hapticActuators);\n    return {\n      id: gamepad.id,\n      index: gamepad.index,\n      connected: gamepad.connected,\n      mapping: gamepad.mapping,\n      timestamp: gamepad.timestamp,\n      vibrationActuator: gamepad.vibrationActuator,\n      hapticActuators,\n      axes: gamepad.axes.map((axes) => axes),\n      buttons: gamepad.buttons.map((button) => ({ pressed: button.pressed, touched: button.touched, value: button.value }))\n    };\n  };\n  const updateGamepadState = () => {\n    const _gamepads = (navigator == null ? void 0 : navigator.getGamepads()) || [];\n    for (const gamepad of _gamepads) {\n      if (gamepad && gamepads.value[gamepad.index])\n        gamepads.value[gamepad.index] = stateFromGamepad(gamepad);\n    }\n  };\n  const { isActive, pause, resume } = useRafFn(updateGamepadState);\n  const onGamepadConnected = (gamepad) => {\n    if (!gamepads.value.some(({ index }) => index === gamepad.index)) {\n      gamepads.value.push(stateFromGamepad(gamepad));\n      onConnectedHook.trigger(gamepad.index);\n    }\n    resume();\n  };\n  const onGamepadDisconnected = (gamepad) => {\n    gamepads.value = gamepads.value.filter((x) => x.index !== gamepad.index);\n    onDisconnectedHook.trigger(gamepad.index);\n  };\n  const listenerOptions = { passive: true };\n  useEventListener(\"gamepadconnected\", (e) => onGamepadConnected(e.gamepad), listenerOptions);\n  useEventListener(\"gamepaddisconnected\", (e) => onGamepadDisconnected(e.gamepad), listenerOptions);\n  tryOnMounted(() => {\n    const _gamepads = (navigator == null ? void 0 : navigator.getGamepads()) || [];\n    for (const gamepad of _gamepads) {\n      if (gamepad && gamepads.value[gamepad.index])\n        onGamepadConnected(gamepad);\n    }\n  });\n  pause();\n  return {\n    isSupported,\n    onConnected: onConnectedHook.on,\n    onDisconnected: onDisconnectedHook.on,\n    gamepads,\n    pause,\n    resume,\n    isActive\n  };\n}\n\nfunction useGeolocation(options = {}) {\n  const {\n    enableHighAccuracy = true,\n    maximumAge = 3e4,\n    timeout = 27e3,\n    navigator = defaultNavigator,\n    immediate = true\n  } = options;\n  const isSupported = useSupported(() => navigator && \"geolocation\" in navigator);\n  const locatedAt = shallowRef(null);\n  const error = shallowRef(null);\n  const coords = ref({\n    accuracy: 0,\n    latitude: Number.POSITIVE_INFINITY,\n    longitude: Number.POSITIVE_INFINITY,\n    altitude: null,\n    altitudeAccuracy: null,\n    heading: null,\n    speed: null\n  });\n  function updatePosition(position) {\n    locatedAt.value = position.timestamp;\n    coords.value = position.coords;\n    error.value = null;\n  }\n  let watcher;\n  function resume() {\n    if (isSupported.value) {\n      watcher = navigator.geolocation.watchPosition(\n        updatePosition,\n        (err) => error.value = err,\n        {\n          enableHighAccuracy,\n          maximumAge,\n          timeout\n        }\n      );\n    }\n  }\n  if (immediate)\n    resume();\n  function pause() {\n    if (watcher && navigator)\n      navigator.geolocation.clearWatch(watcher);\n  }\n  tryOnScopeDispose(() => {\n    pause();\n  });\n  return {\n    isSupported,\n    coords,\n    locatedAt,\n    error,\n    resume,\n    pause\n  };\n}\n\nconst defaultEvents$1 = [\"mousemove\", \"mousedown\", \"resize\", \"keydown\", \"touchstart\", \"wheel\"];\nconst oneMinute = 6e4;\nfunction useIdle(timeout = oneMinute, options = {}) {\n  const {\n    initialState = false,\n    listenForVisibilityChange = true,\n    events = defaultEvents$1,\n    window = defaultWindow,\n    eventFilter = throttleFilter(50)\n  } = options;\n  const idle = shallowRef(initialState);\n  const lastActive = shallowRef(timestamp());\n  let timer;\n  const reset = () => {\n    idle.value = false;\n    clearTimeout(timer);\n    timer = setTimeout(() => idle.value = true, timeout);\n  };\n  const onEvent = createFilterWrapper(\n    eventFilter,\n    () => {\n      lastActive.value = timestamp();\n      reset();\n    }\n  );\n  if (window) {\n    const document = window.document;\n    const listenerOptions = { passive: true };\n    for (const event of events)\n      useEventListener(window, event, onEvent, listenerOptions);\n    if (listenForVisibilityChange) {\n      useEventListener(document, \"visibilitychange\", () => {\n        if (!document.hidden)\n          onEvent();\n      }, listenerOptions);\n    }\n    if (!initialState)\n      reset();\n  }\n  return {\n    idle,\n    lastActive,\n    reset\n  };\n}\n\nasync function loadImage(options) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    const { src, srcset, sizes, class: clazz, loading, crossorigin, referrerPolicy, width, height, decoding, fetchPriority, ismap, usemap } = options;\n    img.src = src;\n    if (srcset != null)\n      img.srcset = srcset;\n    if (sizes != null)\n      img.sizes = sizes;\n    if (clazz != null)\n      img.className = clazz;\n    if (loading != null)\n      img.loading = loading;\n    if (crossorigin != null)\n      img.crossOrigin = crossorigin;\n    if (referrerPolicy != null)\n      img.referrerPolicy = referrerPolicy;\n    if (width != null)\n      img.width = width;\n    if (height != null)\n      img.height = height;\n    if (decoding != null)\n      img.decoding = decoding;\n    if (fetchPriority != null)\n      img.fetchPriority = fetchPriority;\n    if (ismap != null)\n      img.isMap = ismap;\n    if (usemap != null)\n      img.useMap = usemap;\n    img.onload = () => resolve(img);\n    img.onerror = reject;\n  });\n}\nfunction useImage(options, asyncStateOptions = {}) {\n  const state = useAsyncState(\n    () => loadImage(toValue(options)),\n    void 0,\n    {\n      resetOnExecute: true,\n      ...asyncStateOptions\n    }\n  );\n  watch(\n    () => toValue(options),\n    () => state.execute(asyncStateOptions.delay),\n    { deep: true }\n  );\n  return state;\n}\n\nfunction resolveElement(el) {\n  if (typeof Window !== \"undefined\" && el instanceof Window)\n    return el.document.documentElement;\n  if (typeof Document !== \"undefined\" && el instanceof Document)\n    return el.documentElement;\n  return el;\n}\n\nconst ARRIVED_STATE_THRESHOLD_PIXELS = 1;\nfunction useScroll(element, options = {}) {\n  const {\n    throttle = 0,\n    idle = 200,\n    onStop = noop,\n    onScroll = noop,\n    offset = {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    },\n    observe: _observe = {\n      mutation: false\n    },\n    eventListenerOptions = {\n      capture: false,\n      passive: true\n    },\n    behavior = \"auto\",\n    window = defaultWindow,\n    onError = (e) => {\n      console.error(e);\n    }\n  } = options;\n  const observe = typeof _observe === \"boolean\" ? {\n    mutation: _observe\n  } : _observe;\n  const internalX = shallowRef(0);\n  const internalY = shallowRef(0);\n  const x = computed({\n    get() {\n      return internalX.value;\n    },\n    set(x2) {\n      scrollTo(x2, void 0);\n    }\n  });\n  const y = computed({\n    get() {\n      return internalY.value;\n    },\n    set(y2) {\n      scrollTo(void 0, y2);\n    }\n  });\n  function scrollTo(_x, _y) {\n    var _a, _b, _c, _d;\n    if (!window)\n      return;\n    const _element = toValue(element);\n    if (!_element)\n      return;\n    (_c = _element instanceof Document ? window.document.body : _element) == null ? void 0 : _c.scrollTo({\n      top: (_a = toValue(_y)) != null ? _a : y.value,\n      left: (_b = toValue(_x)) != null ? _b : x.value,\n      behavior: toValue(behavior)\n    });\n    const scrollContainer = ((_d = _element == null ? void 0 : _element.document) == null ? void 0 : _d.documentElement) || (_element == null ? void 0 : _element.documentElement) || _element;\n    if (x != null)\n      internalX.value = scrollContainer.scrollLeft;\n    if (y != null)\n      internalY.value = scrollContainer.scrollTop;\n  }\n  const isScrolling = shallowRef(false);\n  const arrivedState = reactive({\n    left: true,\n    right: false,\n    top: true,\n    bottom: false\n  });\n  const directions = reactive({\n    left: false,\n    right: false,\n    top: false,\n    bottom: false\n  });\n  const onScrollEnd = (e) => {\n    if (!isScrolling.value)\n      return;\n    isScrolling.value = false;\n    directions.left = false;\n    directions.right = false;\n    directions.top = false;\n    directions.bottom = false;\n    onStop(e);\n  };\n  const onScrollEndDebounced = useDebounceFn(onScrollEnd, throttle + idle);\n  const setArrivedState = (target) => {\n    var _a;\n    if (!window)\n      return;\n    const el = ((_a = target == null ? void 0 : target.document) == null ? void 0 : _a.documentElement) || (target == null ? void 0 : target.documentElement) || unrefElement(target);\n    const { display, flexDirection, direction } = getComputedStyle(el);\n    const directionMultipler = direction === \"rtl\" ? -1 : 1;\n    const scrollLeft = el.scrollLeft;\n    directions.left = scrollLeft < internalX.value;\n    directions.right = scrollLeft > internalX.value;\n    const left = Math.abs(scrollLeft * directionMultipler) <= (offset.left || 0);\n    const right = Math.abs(scrollLeft * directionMultipler) + el.clientWidth >= el.scrollWidth - (offset.right || 0) - ARRIVED_STATE_THRESHOLD_PIXELS;\n    if (display === \"flex\" && flexDirection === \"row-reverse\") {\n      arrivedState.left = right;\n      arrivedState.right = left;\n    } else {\n      arrivedState.left = left;\n      arrivedState.right = right;\n    }\n    internalX.value = scrollLeft;\n    let scrollTop = el.scrollTop;\n    if (target === window.document && !scrollTop)\n      scrollTop = window.document.body.scrollTop;\n    directions.top = scrollTop < internalY.value;\n    directions.bottom = scrollTop > internalY.value;\n    const top = Math.abs(scrollTop) <= (offset.top || 0);\n    const bottom = Math.abs(scrollTop) + el.clientHeight >= el.scrollHeight - (offset.bottom || 0) - ARRIVED_STATE_THRESHOLD_PIXELS;\n    if (display === \"flex\" && flexDirection === \"column-reverse\") {\n      arrivedState.top = bottom;\n      arrivedState.bottom = top;\n    } else {\n      arrivedState.top = top;\n      arrivedState.bottom = bottom;\n    }\n    internalY.value = scrollTop;\n  };\n  const onScrollHandler = (e) => {\n    var _a;\n    if (!window)\n      return;\n    const eventTarget = (_a = e.target.documentElement) != null ? _a : e.target;\n    setArrivedState(eventTarget);\n    isScrolling.value = true;\n    onScrollEndDebounced(e);\n    onScroll(e);\n  };\n  useEventListener(\n    element,\n    \"scroll\",\n    throttle ? useThrottleFn(onScrollHandler, throttle, true, false) : onScrollHandler,\n    eventListenerOptions\n  );\n  tryOnMounted(() => {\n    try {\n      const _element = toValue(element);\n      if (!_element)\n        return;\n      setArrivedState(_element);\n    } catch (e) {\n      onError(e);\n    }\n  });\n  if ((observe == null ? void 0 : observe.mutation) && element != null && element !== window && element !== document) {\n    useMutationObserver(\n      element,\n      () => {\n        const _element = toValue(element);\n        if (!_element)\n          return;\n        setArrivedState(_element);\n      },\n      {\n        attributes: true,\n        childList: true,\n        subtree: true\n      }\n    );\n  }\n  useEventListener(\n    element,\n    \"scrollend\",\n    onScrollEnd,\n    eventListenerOptions\n  );\n  return {\n    x,\n    y,\n    isScrolling,\n    arrivedState,\n    directions,\n    measure() {\n      const _element = toValue(element);\n      if (window && _element)\n        setArrivedState(_element);\n    }\n  };\n}\n\nfunction useInfiniteScroll(element, onLoadMore, options = {}) {\n  var _a;\n  const {\n    direction = \"bottom\",\n    interval = 100,\n    canLoadMore = () => true\n  } = options;\n  const state = reactive(useScroll(\n    element,\n    {\n      ...options,\n      offset: {\n        [direction]: (_a = options.distance) != null ? _a : 0,\n        ...options.offset\n      }\n    }\n  ));\n  const promise = ref();\n  const isLoading = computed(() => !!promise.value);\n  const observedElement = computed(() => {\n    return resolveElement(toValue(element));\n  });\n  const isElementVisible = useElementVisibility(observedElement);\n  function checkAndLoad() {\n    state.measure();\n    if (!observedElement.value || !isElementVisible.value || !canLoadMore(observedElement.value))\n      return;\n    const { scrollHeight, clientHeight, scrollWidth, clientWidth } = observedElement.value;\n    const isNarrower = direction === \"bottom\" || direction === \"top\" ? scrollHeight <= clientHeight : scrollWidth <= clientWidth;\n    if (state.arrivedState[direction] || isNarrower) {\n      if (!promise.value) {\n        promise.value = Promise.all([\n          onLoadMore(state),\n          new Promise((resolve) => setTimeout(resolve, interval))\n        ]).finally(() => {\n          promise.value = null;\n          nextTick(() => checkAndLoad());\n        });\n      }\n    }\n  }\n  const stop = watch(\n    () => [state.arrivedState[direction], isElementVisible.value],\n    checkAndLoad,\n    { immediate: true }\n  );\n  tryOnUnmounted(stop);\n  return {\n    isLoading,\n    reset() {\n      nextTick(() => checkAndLoad());\n    }\n  };\n}\n\nconst defaultEvents = [\"mousedown\", \"mouseup\", \"keydown\", \"keyup\"];\n// @__NO_SIDE_EFFECTS__\nfunction useKeyModifier(modifier, options = {}) {\n  const {\n    events = defaultEvents,\n    document = defaultDocument,\n    initial = null\n  } = options;\n  const state = shallowRef(initial);\n  if (document) {\n    events.forEach((listenerEvent) => {\n      useEventListener(document, listenerEvent, (evt) => {\n        if (typeof evt.getModifierState === \"function\")\n          state.value = evt.getModifierState(modifier);\n      }, { passive: true });\n    });\n  }\n  return state;\n}\n\nfunction useLocalStorage(key, initialValue, options = {}) {\n  const { window = defaultWindow } = options;\n  return useStorage(key, initialValue, window == null ? void 0 : window.localStorage, options);\n}\n\nconst DefaultMagicKeysAliasMap = {\n  ctrl: \"control\",\n  command: \"meta\",\n  cmd: \"meta\",\n  option: \"alt\",\n  up: \"arrowup\",\n  down: \"arrowdown\",\n  left: \"arrowleft\",\n  right: \"arrowright\"\n};\n\nfunction useMagicKeys(options = {}) {\n  const {\n    reactive: useReactive = false,\n    target = defaultWindow,\n    aliasMap = DefaultMagicKeysAliasMap,\n    passive = true,\n    onEventFired = noop\n  } = options;\n  const current = reactive(/* @__PURE__ */ new Set());\n  const obj = {\n    toJSON() {\n      return {};\n    },\n    current\n  };\n  const refs = useReactive ? reactive(obj) : obj;\n  const metaDeps = /* @__PURE__ */ new Set();\n  const shiftDeps = /* @__PURE__ */ new Set();\n  const usedKeys = /* @__PURE__ */ new Set();\n  function setRefs(key, value) {\n    if (key in refs) {\n      if (useReactive)\n        refs[key] = value;\n      else\n        refs[key].value = value;\n    }\n  }\n  function reset() {\n    current.clear();\n    for (const key of usedKeys)\n      setRefs(key, false);\n  }\n  function updateRefs(e, value) {\n    var _a, _b;\n    const key = (_a = e.key) == null ? void 0 : _a.toLowerCase();\n    const code = (_b = e.code) == null ? void 0 : _b.toLowerCase();\n    const values = [code, key].filter(Boolean);\n    if (key) {\n      if (value)\n        current.add(key);\n      else\n        current.delete(key);\n    }\n    for (const key2 of values) {\n      usedKeys.add(key2);\n      setRefs(key2, value);\n    }\n    if (key === \"shift\" && !value) {\n      const shiftDepsArray = Array.from(shiftDeps);\n      const shiftIndex = shiftDepsArray.indexOf(\"shift\");\n      shiftDepsArray.forEach((key2, index) => {\n        if (index >= shiftIndex) {\n          current.delete(key2);\n          setRefs(key2, false);\n        }\n      });\n      shiftDeps.clear();\n    } else if (typeof e.getModifierState === \"function\" && e.getModifierState(\"Shift\") && value) {\n      [...current, ...values].forEach((key2) => shiftDeps.add(key2));\n    }\n    if (key === \"meta\" && !value) {\n      metaDeps.forEach((key2) => {\n        current.delete(key2);\n        setRefs(key2, false);\n      });\n      metaDeps.clear();\n    } else if (typeof e.getModifierState === \"function\" && e.getModifierState(\"Meta\") && value) {\n      [...current, ...values].forEach((key2) => metaDeps.add(key2));\n    }\n  }\n  useEventListener(target, \"keydown\", (e) => {\n    updateRefs(e, true);\n    return onEventFired(e);\n  }, { passive });\n  useEventListener(target, \"keyup\", (e) => {\n    updateRefs(e, false);\n    return onEventFired(e);\n  }, { passive });\n  useEventListener(\"blur\", reset, { passive });\n  useEventListener(\"focus\", reset, { passive });\n  const proxy = new Proxy(\n    refs,\n    {\n      get(target2, prop, rec) {\n        if (typeof prop !== \"string\")\n          return Reflect.get(target2, prop, rec);\n        prop = prop.toLowerCase();\n        if (prop in aliasMap)\n          prop = aliasMap[prop];\n        if (!(prop in refs)) {\n          if (/[+_-]/.test(prop)) {\n            const keys = prop.split(/[+_-]/g).map((i) => i.trim());\n            refs[prop] = computed(() => keys.map((key) => toValue(proxy[key])).every(Boolean));\n          } else {\n            refs[prop] = shallowRef(false);\n          }\n        }\n        const r = Reflect.get(target2, prop, rec);\n        return useReactive ? toValue(r) : r;\n      }\n    }\n  );\n  return proxy;\n}\n\nfunction usingElRef(source, cb) {\n  if (toValue(source))\n    cb(toValue(source));\n}\nfunction timeRangeToArray(timeRanges) {\n  let ranges = [];\n  for (let i = 0; i < timeRanges.length; ++i)\n    ranges = [...ranges, [timeRanges.start(i), timeRanges.end(i)]];\n  return ranges;\n}\nfunction tracksToArray(tracks) {\n  return Array.from(tracks).map(({ label, kind, language, mode, activeCues, cues, inBandMetadataTrackDispatchType }, id) => ({ id, label, kind, language, mode, activeCues, cues, inBandMetadataTrackDispatchType }));\n}\nconst defaultOptions = {\n  src: \"\",\n  tracks: []\n};\nfunction useMediaControls(target, options = {}) {\n  target = toRef(target);\n  options = {\n    ...defaultOptions,\n    ...options\n  };\n  const {\n    document = defaultDocument\n  } = options;\n  const listenerOptions = { passive: true };\n  const currentTime = shallowRef(0);\n  const duration = shallowRef(0);\n  const seeking = shallowRef(false);\n  const volume = shallowRef(1);\n  const waiting = shallowRef(false);\n  const ended = shallowRef(false);\n  const playing = shallowRef(false);\n  const rate = shallowRef(1);\n  const stalled = shallowRef(false);\n  const buffered = ref([]);\n  const tracks = ref([]);\n  const selectedTrack = shallowRef(-1);\n  const isPictureInPicture = shallowRef(false);\n  const muted = shallowRef(false);\n  const supportsPictureInPicture = document && \"pictureInPictureEnabled\" in document;\n  const sourceErrorEvent = createEventHook();\n  const playbackErrorEvent = createEventHook();\n  const disableTrack = (track) => {\n    usingElRef(target, (el) => {\n      if (track) {\n        const id = typeof track === \"number\" ? track : track.id;\n        el.textTracks[id].mode = \"disabled\";\n      } else {\n        for (let i = 0; i < el.textTracks.length; ++i)\n          el.textTracks[i].mode = \"disabled\";\n      }\n      selectedTrack.value = -1;\n    });\n  };\n  const enableTrack = (track, disableTracks = true) => {\n    usingElRef(target, (el) => {\n      const id = typeof track === \"number\" ? track : track.id;\n      if (disableTracks)\n        disableTrack();\n      el.textTracks[id].mode = \"showing\";\n      selectedTrack.value = id;\n    });\n  };\n  const togglePictureInPicture = () => {\n    return new Promise((resolve, reject) => {\n      usingElRef(target, async (el) => {\n        if (supportsPictureInPicture) {\n          if (!isPictureInPicture.value) {\n            el.requestPictureInPicture().then(resolve).catch(reject);\n          } else {\n            document.exitPictureInPicture().then(resolve).catch(reject);\n          }\n        }\n      });\n    });\n  };\n  watchEffect(() => {\n    if (!document)\n      return;\n    const el = toValue(target);\n    if (!el)\n      return;\n    const src = toValue(options.src);\n    let sources = [];\n    if (!src)\n      return;\n    if (typeof src === \"string\")\n      sources = [{ src }];\n    else if (Array.isArray(src))\n      sources = src;\n    else if (isObject(src))\n      sources = [src];\n    el.querySelectorAll(\"source\").forEach((e) => {\n      e.remove();\n    });\n    sources.forEach(({ src: src2, type, media }) => {\n      const source = document.createElement(\"source\");\n      source.setAttribute(\"src\", src2);\n      source.setAttribute(\"type\", type || \"\");\n      source.setAttribute(\"media\", media || \"\");\n      useEventListener(source, \"error\", sourceErrorEvent.trigger, listenerOptions);\n      el.appendChild(source);\n    });\n    el.load();\n  });\n  watch([target, volume], () => {\n    const el = toValue(target);\n    if (!el)\n      return;\n    el.volume = volume.value;\n  });\n  watch([target, muted], () => {\n    const el = toValue(target);\n    if (!el)\n      return;\n    el.muted = muted.value;\n  });\n  watch([target, rate], () => {\n    const el = toValue(target);\n    if (!el)\n      return;\n    el.playbackRate = rate.value;\n  });\n  watchEffect(() => {\n    if (!document)\n      return;\n    const textTracks = toValue(options.tracks);\n    const el = toValue(target);\n    if (!textTracks || !textTracks.length || !el)\n      return;\n    el.querySelectorAll(\"track\").forEach((e) => e.remove());\n    textTracks.forEach(({ default: isDefault, kind, label, src, srcLang }, i) => {\n      const track = document.createElement(\"track\");\n      track.default = isDefault || false;\n      track.kind = kind;\n      track.label = label;\n      track.src = src;\n      track.srclang = srcLang;\n      if (track.default)\n        selectedTrack.value = i;\n      el.appendChild(track);\n    });\n  });\n  const { ignoreUpdates: ignoreCurrentTimeUpdates } = watchIgnorable(currentTime, (time) => {\n    const el = toValue(target);\n    if (!el)\n      return;\n    el.currentTime = time;\n  });\n  const { ignoreUpdates: ignorePlayingUpdates } = watchIgnorable(playing, (isPlaying) => {\n    const el = toValue(target);\n    if (!el)\n      return;\n    if (isPlaying) {\n      el.play().catch((e) => {\n        playbackErrorEvent.trigger(e);\n        throw e;\n      });\n    } else {\n      el.pause();\n    }\n  });\n  useEventListener(\n    target,\n    \"timeupdate\",\n    () => ignoreCurrentTimeUpdates(() => currentTime.value = toValue(target).currentTime),\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"durationchange\",\n    () => duration.value = toValue(target).duration,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"progress\",\n    () => buffered.value = timeRangeToArray(toValue(target).buffered),\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"seeking\",\n    () => seeking.value = true,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"seeked\",\n    () => seeking.value = false,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    [\"waiting\", \"loadstart\"],\n    () => {\n      waiting.value = true;\n      ignorePlayingUpdates(() => playing.value = false);\n    },\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"loadeddata\",\n    () => waiting.value = false,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"playing\",\n    () => {\n      waiting.value = false;\n      ended.value = false;\n      ignorePlayingUpdates(() => playing.value = true);\n    },\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"ratechange\",\n    () => rate.value = toValue(target).playbackRate,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"stalled\",\n    () => stalled.value = true,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"ended\",\n    () => ended.value = true,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"pause\",\n    () => ignorePlayingUpdates(() => playing.value = false),\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"play\",\n    () => ignorePlayingUpdates(() => playing.value = true),\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"enterpictureinpicture\",\n    () => isPictureInPicture.value = true,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"leavepictureinpicture\",\n    () => isPictureInPicture.value = false,\n    listenerOptions\n  );\n  useEventListener(\n    target,\n    \"volumechange\",\n    () => {\n      const el = toValue(target);\n      if (!el)\n        return;\n      volume.value = el.volume;\n      muted.value = el.muted;\n    },\n    listenerOptions\n  );\n  const listeners = [];\n  const stop = watch([target], () => {\n    const el = toValue(target);\n    if (!el)\n      return;\n    stop();\n    listeners[0] = useEventListener(el.textTracks, \"addtrack\", () => tracks.value = tracksToArray(el.textTracks), listenerOptions);\n    listeners[1] = useEventListener(el.textTracks, \"removetrack\", () => tracks.value = tracksToArray(el.textTracks), listenerOptions);\n    listeners[2] = useEventListener(el.textTracks, \"change\", () => tracks.value = tracksToArray(el.textTracks), listenerOptions);\n  });\n  tryOnScopeDispose(() => listeners.forEach((listener) => listener()));\n  return {\n    currentTime,\n    duration,\n    waiting,\n    seeking,\n    ended,\n    stalled,\n    buffered,\n    playing,\n    rate,\n    // Volume\n    volume,\n    muted,\n    // Tracks\n    tracks,\n    selectedTrack,\n    enableTrack,\n    disableTrack,\n    // Picture in Picture\n    supportsPictureInPicture,\n    togglePictureInPicture,\n    isPictureInPicture,\n    // Events\n    onSourceError: sourceErrorEvent.on,\n    onPlaybackError: playbackErrorEvent.on\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useMemoize(resolver, options) {\n  const initCache = () => {\n    if (options == null ? void 0 : options.cache)\n      return shallowReactive(options.cache);\n    return shallowReactive(/* @__PURE__ */ new Map());\n  };\n  const cache = initCache();\n  const generateKey = (...args) => (options == null ? void 0 : options.getKey) ? options.getKey(...args) : JSON.stringify(args);\n  const _loadData = (key, ...args) => {\n    cache.set(key, resolver(...args));\n    return cache.get(key);\n  };\n  const loadData = (...args) => _loadData(generateKey(...args), ...args);\n  const deleteData = (...args) => {\n    cache.delete(generateKey(...args));\n  };\n  const clearData = () => {\n    cache.clear();\n  };\n  const memoized = (...args) => {\n    const key = generateKey(...args);\n    if (cache.has(key))\n      return cache.get(key);\n    return _loadData(key, ...args);\n  };\n  memoized.load = loadData;\n  memoized.delete = deleteData;\n  memoized.clear = clearData;\n  memoized.generateKey = generateKey;\n  memoized.cache = cache;\n  return memoized;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useMemory(options = {}) {\n  const memory = ref();\n  const isSupported = useSupported(() => typeof performance !== \"undefined\" && \"memory\" in performance);\n  if (isSupported.value) {\n    const { interval = 1e3 } = options;\n    useIntervalFn(() => {\n      memory.value = performance.memory;\n    }, interval, { immediate: options.immediate, immediateCallback: options.immediateCallback });\n  }\n  return { isSupported, memory };\n}\n\nconst UseMouseBuiltinExtractors = {\n  page: (event) => [event.pageX, event.pageY],\n  client: (event) => [event.clientX, event.clientY],\n  screen: (event) => [event.screenX, event.screenY],\n  movement: (event) => event instanceof MouseEvent ? [event.movementX, event.movementY] : null\n};\nfunction useMouse(options = {}) {\n  const {\n    type = \"page\",\n    touch = true,\n    resetOnTouchEnds = false,\n    initialValue = { x: 0, y: 0 },\n    window = defaultWindow,\n    target = window,\n    scroll = true,\n    eventFilter\n  } = options;\n  let _prevMouseEvent = null;\n  let _prevScrollX = 0;\n  let _prevScrollY = 0;\n  const x = shallowRef(initialValue.x);\n  const y = shallowRef(initialValue.y);\n  const sourceType = shallowRef(null);\n  const extractor = typeof type === \"function\" ? type : UseMouseBuiltinExtractors[type];\n  const mouseHandler = (event) => {\n    const result = extractor(event);\n    _prevMouseEvent = event;\n    if (result) {\n      [x.value, y.value] = result;\n      sourceType.value = \"mouse\";\n    }\n    if (window) {\n      _prevScrollX = window.scrollX;\n      _prevScrollY = window.scrollY;\n    }\n  };\n  const touchHandler = (event) => {\n    if (event.touches.length > 0) {\n      const result = extractor(event.touches[0]);\n      if (result) {\n        [x.value, y.value] = result;\n        sourceType.value = \"touch\";\n      }\n    }\n  };\n  const scrollHandler = () => {\n    if (!_prevMouseEvent || !window)\n      return;\n    const pos = extractor(_prevMouseEvent);\n    if (_prevMouseEvent instanceof MouseEvent && pos) {\n      x.value = pos[0] + window.scrollX - _prevScrollX;\n      y.value = pos[1] + window.scrollY - _prevScrollY;\n    }\n  };\n  const reset = () => {\n    x.value = initialValue.x;\n    y.value = initialValue.y;\n  };\n  const mouseHandlerWrapper = eventFilter ? (event) => eventFilter(() => mouseHandler(event), {}) : (event) => mouseHandler(event);\n  const touchHandlerWrapper = eventFilter ? (event) => eventFilter(() => touchHandler(event), {}) : (event) => touchHandler(event);\n  const scrollHandlerWrapper = eventFilter ? () => eventFilter(() => scrollHandler(), {}) : () => scrollHandler();\n  if (target) {\n    const listenerOptions = { passive: true };\n    useEventListener(target, [\"mousemove\", \"dragover\"], mouseHandlerWrapper, listenerOptions);\n    if (touch && type !== \"movement\") {\n      useEventListener(target, [\"touchstart\", \"touchmove\"], touchHandlerWrapper, listenerOptions);\n      if (resetOnTouchEnds)\n        useEventListener(target, \"touchend\", reset, listenerOptions);\n    }\n    if (scroll && type === \"page\")\n      useEventListener(window, \"scroll\", scrollHandlerWrapper, listenerOptions);\n  }\n  return {\n    x,\n    y,\n    sourceType\n  };\n}\n\nfunction useMouseInElement(target, options = {}) {\n  const {\n    windowResize = true,\n    windowScroll = true,\n    handleOutside = true,\n    window = defaultWindow\n  } = options;\n  const type = options.type || \"page\";\n  const { x, y, sourceType } = useMouse(options);\n  const targetRef = shallowRef(target != null ? target : window == null ? void 0 : window.document.body);\n  const elementX = shallowRef(0);\n  const elementY = shallowRef(0);\n  const elementPositionX = shallowRef(0);\n  const elementPositionY = shallowRef(0);\n  const elementHeight = shallowRef(0);\n  const elementWidth = shallowRef(0);\n  const isOutside = shallowRef(true);\n  function update() {\n    if (!window)\n      return;\n    const el = unrefElement(targetRef);\n    if (!el || !(el instanceof Element))\n      return;\n    const {\n      left,\n      top,\n      width,\n      height\n    } = el.getBoundingClientRect();\n    elementPositionX.value = left + (type === \"page\" ? window.pageXOffset : 0);\n    elementPositionY.value = top + (type === \"page\" ? window.pageYOffset : 0);\n    elementHeight.value = height;\n    elementWidth.value = width;\n    const elX = x.value - elementPositionX.value;\n    const elY = y.value - elementPositionY.value;\n    isOutside.value = width === 0 || height === 0 || elX < 0 || elY < 0 || elX > width || elY > height;\n    if (handleOutside || !isOutside.value) {\n      elementX.value = elX;\n      elementY.value = elY;\n    }\n  }\n  const stopFnList = [];\n  function stop() {\n    stopFnList.forEach((fn) => fn());\n    stopFnList.length = 0;\n  }\n  tryOnMounted(() => {\n    update();\n  });\n  if (window) {\n    const {\n      stop: stopResizeObserver\n    } = useResizeObserver(targetRef, update);\n    const {\n      stop: stopMutationObserver\n    } = useMutationObserver(targetRef, update, {\n      attributeFilter: [\"style\", \"class\"]\n    });\n    const stopWatch = watch(\n      [targetRef, x, y],\n      update\n    );\n    stopFnList.push(\n      stopResizeObserver,\n      stopMutationObserver,\n      stopWatch\n    );\n    useEventListener(\n      document,\n      \"mouseleave\",\n      () => isOutside.value = true,\n      { passive: true }\n    );\n    if (windowScroll) {\n      stopFnList.push(\n        useEventListener(\"scroll\", update, { capture: true, passive: true })\n      );\n    }\n    if (windowResize) {\n      stopFnList.push(\n        useEventListener(\"resize\", update, { passive: true })\n      );\n    }\n  }\n  return {\n    x,\n    y,\n    sourceType,\n    elementX,\n    elementY,\n    elementPositionX,\n    elementPositionY,\n    elementHeight,\n    elementWidth,\n    isOutside,\n    stop\n  };\n}\n\nfunction useMousePressed(options = {}) {\n  const {\n    touch = true,\n    drag = true,\n    capture = false,\n    initialValue = false,\n    window = defaultWindow\n  } = options;\n  const pressed = shallowRef(initialValue);\n  const sourceType = shallowRef(null);\n  if (!window) {\n    return {\n      pressed,\n      sourceType\n    };\n  }\n  const onPressed = (srcType) => (event) => {\n    var _a;\n    pressed.value = true;\n    sourceType.value = srcType;\n    (_a = options.onPressed) == null ? void 0 : _a.call(options, event);\n  };\n  const onReleased = (event) => {\n    var _a;\n    pressed.value = false;\n    sourceType.value = null;\n    (_a = options.onReleased) == null ? void 0 : _a.call(options, event);\n  };\n  const target = computed(() => unrefElement(options.target) || window);\n  const listenerOptions = { passive: true, capture };\n  useEventListener(target, \"mousedown\", onPressed(\"mouse\"), listenerOptions);\n  useEventListener(window, \"mouseleave\", onReleased, listenerOptions);\n  useEventListener(window, \"mouseup\", onReleased, listenerOptions);\n  if (drag) {\n    useEventListener(target, \"dragstart\", onPressed(\"mouse\"), listenerOptions);\n    useEventListener(window, \"drop\", onReleased, listenerOptions);\n    useEventListener(window, \"dragend\", onReleased, listenerOptions);\n  }\n  if (touch) {\n    useEventListener(target, \"touchstart\", onPressed(\"touch\"), listenerOptions);\n    useEventListener(window, \"touchend\", onReleased, listenerOptions);\n    useEventListener(window, \"touchcancel\", onReleased, listenerOptions);\n  }\n  return {\n    pressed,\n    sourceType\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useNavigatorLanguage(options = {}) {\n  const { window = defaultWindow } = options;\n  const navigator = window == null ? void 0 : window.navigator;\n  const isSupported = useSupported(() => navigator && \"language\" in navigator);\n  const language = shallowRef(navigator == null ? void 0 : navigator.language);\n  useEventListener(window, \"languagechange\", () => {\n    if (navigator)\n      language.value = navigator.language;\n  }, { passive: true });\n  return {\n    isSupported,\n    language\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useNetwork(options = {}) {\n  const { window = defaultWindow } = options;\n  const navigator = window == null ? void 0 : window.navigator;\n  const isSupported = useSupported(() => navigator && \"connection\" in navigator);\n  const isOnline = shallowRef(true);\n  const saveData = shallowRef(false);\n  const offlineAt = shallowRef(void 0);\n  const onlineAt = shallowRef(void 0);\n  const downlink = shallowRef(void 0);\n  const downlinkMax = shallowRef(void 0);\n  const rtt = shallowRef(void 0);\n  const effectiveType = shallowRef(void 0);\n  const type = shallowRef(\"unknown\");\n  const connection = isSupported.value && navigator.connection;\n  function updateNetworkInformation() {\n    if (!navigator)\n      return;\n    isOnline.value = navigator.onLine;\n    offlineAt.value = isOnline.value ? void 0 : Date.now();\n    onlineAt.value = isOnline.value ? Date.now() : void 0;\n    if (connection) {\n      downlink.value = connection.downlink;\n      downlinkMax.value = connection.downlinkMax;\n      effectiveType.value = connection.effectiveType;\n      rtt.value = connection.rtt;\n      saveData.value = connection.saveData;\n      type.value = connection.type;\n    }\n  }\n  const listenerOptions = { passive: true };\n  if (window) {\n    useEventListener(window, \"offline\", () => {\n      isOnline.value = false;\n      offlineAt.value = Date.now();\n    }, listenerOptions);\n    useEventListener(window, \"online\", () => {\n      isOnline.value = true;\n      onlineAt.value = Date.now();\n    }, listenerOptions);\n  }\n  if (connection)\n    useEventListener(connection, \"change\", updateNetworkInformation, listenerOptions);\n  updateNetworkInformation();\n  return {\n    isSupported,\n    isOnline: readonly(isOnline),\n    saveData: readonly(saveData),\n    offlineAt: readonly(offlineAt),\n    onlineAt: readonly(onlineAt),\n    downlink: readonly(downlink),\n    downlinkMax: readonly(downlinkMax),\n    effectiveType: readonly(effectiveType),\n    rtt: readonly(rtt),\n    type: readonly(type)\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useNow(options = {}) {\n  const {\n    controls: exposeControls = false,\n    interval = \"requestAnimationFrame\",\n    immediate = true\n  } = options;\n  const now = ref(/* @__PURE__ */ new Date());\n  const update = () => now.value = /* @__PURE__ */ new Date();\n  const controls = interval === \"requestAnimationFrame\" ? useRafFn(update, { immediate }) : useIntervalFn(update, interval, { immediate });\n  if (exposeControls) {\n    return {\n      now,\n      ...controls\n    };\n  } else {\n    return now;\n  }\n}\n\nfunction useObjectUrl(object) {\n  const url = shallowRef();\n  const release = () => {\n    if (url.value)\n      URL.revokeObjectURL(url.value);\n    url.value = void 0;\n  };\n  watch(\n    () => toValue(object),\n    (newObject) => {\n      release();\n      if (newObject)\n        url.value = URL.createObjectURL(newObject);\n    },\n    { immediate: true }\n  );\n  tryOnScopeDispose(release);\n  return readonly(url);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useClamp(value, min, max) {\n  if (typeof value === \"function\" || isReadonly(value))\n    return computed(() => clamp(toValue(value), toValue(min), toValue(max)));\n  const _value = ref(value);\n  return computed({\n    get() {\n      return _value.value = clamp(_value.value, toValue(min), toValue(max));\n    },\n    set(value2) {\n      _value.value = clamp(value2, toValue(min), toValue(max));\n    }\n  });\n}\n\nfunction useOffsetPagination(options) {\n  const {\n    total = Number.POSITIVE_INFINITY,\n    pageSize = 10,\n    page = 1,\n    onPageChange = noop,\n    onPageSizeChange = noop,\n    onPageCountChange = noop\n  } = options;\n  const currentPageSize = useClamp(pageSize, 1, Number.POSITIVE_INFINITY);\n  const pageCount = computed(() => Math.max(\n    1,\n    Math.ceil(toValue(total) / toValue(currentPageSize))\n  ));\n  const currentPage = useClamp(page, 1, pageCount);\n  const isFirstPage = computed(() => currentPage.value === 1);\n  const isLastPage = computed(() => currentPage.value === pageCount.value);\n  if (isRef(page)) {\n    syncRef(page, currentPage, {\n      direction: isReadonly(page) ? \"ltr\" : \"both\"\n    });\n  }\n  if (isRef(pageSize)) {\n    syncRef(pageSize, currentPageSize, {\n      direction: isReadonly(pageSize) ? \"ltr\" : \"both\"\n    });\n  }\n  function prev() {\n    currentPage.value--;\n  }\n  function next() {\n    currentPage.value++;\n  }\n  const returnValue = {\n    currentPage,\n    currentPageSize,\n    pageCount,\n    isFirstPage,\n    isLastPage,\n    prev,\n    next\n  };\n  watch(currentPage, () => {\n    onPageChange(reactive(returnValue));\n  });\n  watch(currentPageSize, () => {\n    onPageSizeChange(reactive(returnValue));\n  });\n  watch(pageCount, () => {\n    onPageCountChange(reactive(returnValue));\n  });\n  return returnValue;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useOnline(options = {}) {\n  const { isOnline } = useNetwork(options);\n  return isOnline;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePageLeave(options = {}) {\n  const { window = defaultWindow } = options;\n  const isLeft = shallowRef(false);\n  const handler = (event) => {\n    if (!window)\n      return;\n    event = event || window.event;\n    const from = event.relatedTarget || event.toElement;\n    isLeft.value = !from;\n  };\n  if (window) {\n    const listenerOptions = { passive: true };\n    useEventListener(window, \"mouseout\", handler, listenerOptions);\n    useEventListener(window.document, \"mouseleave\", handler, listenerOptions);\n    useEventListener(window.document, \"mouseenter\", handler, listenerOptions);\n  }\n  return isLeft;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useScreenOrientation(options = {}) {\n  const {\n    window = defaultWindow\n  } = options;\n  const isSupported = useSupported(() => window && \"screen\" in window && \"orientation\" in window.screen);\n  const screenOrientation = isSupported.value ? window.screen.orientation : {};\n  const orientation = ref(screenOrientation.type);\n  const angle = shallowRef(screenOrientation.angle || 0);\n  if (isSupported.value) {\n    useEventListener(window, \"orientationchange\", () => {\n      orientation.value = screenOrientation.type;\n      angle.value = screenOrientation.angle;\n    }, { passive: true });\n  }\n  const lockOrientation = (type) => {\n    if (isSupported.value && typeof screenOrientation.lock === \"function\")\n      return screenOrientation.lock(type);\n    return Promise.reject(new Error(\"Not supported\"));\n  };\n  const unlockOrientation = () => {\n    if (isSupported.value && typeof screenOrientation.unlock === \"function\")\n      screenOrientation.unlock();\n  };\n  return {\n    isSupported,\n    orientation,\n    angle,\n    lockOrientation,\n    unlockOrientation\n  };\n}\n\nfunction useParallax(target, options = {}) {\n  const {\n    deviceOrientationTiltAdjust = (i) => i,\n    deviceOrientationRollAdjust = (i) => i,\n    mouseTiltAdjust = (i) => i,\n    mouseRollAdjust = (i) => i,\n    window = defaultWindow\n  } = options;\n  const orientation = reactive(useDeviceOrientation({ window }));\n  const screenOrientation = reactive(useScreenOrientation({ window }));\n  const {\n    elementX: x,\n    elementY: y,\n    elementWidth: width,\n    elementHeight: height\n  } = useMouseInElement(target, { handleOutside: false, window });\n  const source = computed(() => {\n    if (orientation.isSupported && (orientation.alpha != null && orientation.alpha !== 0 || orientation.gamma != null && orientation.gamma !== 0)) {\n      return \"deviceOrientation\";\n    }\n    return \"mouse\";\n  });\n  const roll = computed(() => {\n    if (source.value === \"deviceOrientation\") {\n      let value;\n      switch (screenOrientation.orientation) {\n        case \"landscape-primary\":\n          value = orientation.gamma / 90;\n          break;\n        case \"landscape-secondary\":\n          value = -orientation.gamma / 90;\n          break;\n        case \"portrait-primary\":\n          value = -orientation.beta / 90;\n          break;\n        case \"portrait-secondary\":\n          value = orientation.beta / 90;\n          break;\n        default:\n          value = -orientation.beta / 90;\n      }\n      return deviceOrientationRollAdjust(value);\n    } else {\n      const value = -(y.value - height.value / 2) / height.value;\n      return mouseRollAdjust(value);\n    }\n  });\n  const tilt = computed(() => {\n    if (source.value === \"deviceOrientation\") {\n      let value;\n      switch (screenOrientation.orientation) {\n        case \"landscape-primary\":\n          value = orientation.beta / 90;\n          break;\n        case \"landscape-secondary\":\n          value = -orientation.beta / 90;\n          break;\n        case \"portrait-primary\":\n          value = orientation.gamma / 90;\n          break;\n        case \"portrait-secondary\":\n          value = -orientation.gamma / 90;\n          break;\n        default:\n          value = orientation.gamma / 90;\n      }\n      return deviceOrientationTiltAdjust(value);\n    } else {\n      const value = (x.value - width.value / 2) / width.value;\n      return mouseTiltAdjust(value);\n    }\n  });\n  return { roll, tilt, source };\n}\n\nfunction useParentElement(element = useCurrentElement()) {\n  const parentElement = shallowRef();\n  const update = () => {\n    const el = unrefElement(element);\n    if (el)\n      parentElement.value = el.parentElement;\n  };\n  tryOnMounted(update);\n  watch(() => toValue(element), update);\n  return parentElement;\n}\n\nfunction usePerformanceObserver(options, callback) {\n  const {\n    window = defaultWindow,\n    immediate = true,\n    ...performanceOptions\n  } = options;\n  const isSupported = useSupported(() => window && \"PerformanceObserver\" in window);\n  let observer;\n  const stop = () => {\n    observer == null ? void 0 : observer.disconnect();\n  };\n  const start = () => {\n    if (isSupported.value) {\n      stop();\n      observer = new PerformanceObserver(callback);\n      observer.observe(performanceOptions);\n    }\n  };\n  tryOnScopeDispose(stop);\n  if (immediate)\n    start();\n  return {\n    isSupported,\n    start,\n    stop\n  };\n}\n\nconst defaultState = {\n  x: 0,\n  y: 0,\n  pointerId: 0,\n  pressure: 0,\n  tiltX: 0,\n  tiltY: 0,\n  width: 0,\n  height: 0,\n  twist: 0,\n  pointerType: null\n};\nconst keys = /* @__PURE__ */ Object.keys(defaultState);\nfunction usePointer(options = {}) {\n  const {\n    target = defaultWindow\n  } = options;\n  const isInside = shallowRef(false);\n  const state = shallowRef(options.initialValue || {});\n  Object.assign(state.value, defaultState, state.value);\n  const handler = (event) => {\n    isInside.value = true;\n    if (options.pointerTypes && !options.pointerTypes.includes(event.pointerType))\n      return;\n    state.value = objectPick(event, keys, false);\n  };\n  if (target) {\n    const listenerOptions = { passive: true };\n    useEventListener(target, [\"pointerdown\", \"pointermove\", \"pointerup\"], handler, listenerOptions);\n    useEventListener(target, \"pointerleave\", () => isInside.value = false, listenerOptions);\n  }\n  return {\n    ...toRefs(state),\n    isInside\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePointerLock(target, options = {}) {\n  const { document = defaultDocument } = options;\n  const isSupported = useSupported(() => document && \"pointerLockElement\" in document);\n  const element = shallowRef();\n  const triggerElement = shallowRef();\n  let targetElement;\n  if (isSupported.value) {\n    const listenerOptions = { passive: true };\n    useEventListener(document, \"pointerlockchange\", () => {\n      var _a;\n      const currentElement = (_a = document.pointerLockElement) != null ? _a : element.value;\n      if (targetElement && currentElement === targetElement) {\n        element.value = document.pointerLockElement;\n        if (!element.value)\n          targetElement = triggerElement.value = null;\n      }\n    }, listenerOptions);\n    useEventListener(document, \"pointerlockerror\", () => {\n      var _a;\n      const currentElement = (_a = document.pointerLockElement) != null ? _a : element.value;\n      if (targetElement && currentElement === targetElement) {\n        const action = document.pointerLockElement ? \"release\" : \"acquire\";\n        throw new Error(`Failed to ${action} pointer lock.`);\n      }\n    }, listenerOptions);\n  }\n  async function lock(e) {\n    var _a;\n    if (!isSupported.value)\n      throw new Error(\"Pointer Lock API is not supported by your browser.\");\n    triggerElement.value = e instanceof Event ? e.currentTarget : null;\n    targetElement = e instanceof Event ? (_a = unrefElement(target)) != null ? _a : triggerElement.value : unrefElement(e);\n    if (!targetElement)\n      throw new Error(\"Target element undefined.\");\n    targetElement.requestPointerLock();\n    return await until(element).toBe(targetElement);\n  }\n  async function unlock() {\n    if (!element.value)\n      return false;\n    document.exitPointerLock();\n    await until(element).toBeNull();\n    return true;\n  }\n  return {\n    isSupported,\n    element,\n    triggerElement,\n    lock,\n    unlock\n  };\n}\n\nfunction usePointerSwipe(target, options = {}) {\n  const targetRef = toRef(target);\n  const {\n    threshold = 50,\n    onSwipe,\n    onSwipeEnd,\n    onSwipeStart,\n    disableTextSelect = false\n  } = options;\n  const posStart = reactive({ x: 0, y: 0 });\n  const updatePosStart = (x, y) => {\n    posStart.x = x;\n    posStart.y = y;\n  };\n  const posEnd = reactive({ x: 0, y: 0 });\n  const updatePosEnd = (x, y) => {\n    posEnd.x = x;\n    posEnd.y = y;\n  };\n  const distanceX = computed(() => posStart.x - posEnd.x);\n  const distanceY = computed(() => posStart.y - posEnd.y);\n  const { max, abs } = Math;\n  const isThresholdExceeded = computed(() => max(abs(distanceX.value), abs(distanceY.value)) >= threshold);\n  const isSwiping = shallowRef(false);\n  const isPointerDown = shallowRef(false);\n  const direction = computed(() => {\n    if (!isThresholdExceeded.value)\n      return \"none\";\n    if (abs(distanceX.value) > abs(distanceY.value)) {\n      return distanceX.value > 0 ? \"left\" : \"right\";\n    } else {\n      return distanceY.value > 0 ? \"up\" : \"down\";\n    }\n  });\n  const eventIsAllowed = (e) => {\n    var _a, _b, _c;\n    const isReleasingButton = e.buttons === 0;\n    const isPrimaryButton = e.buttons === 1;\n    return (_c = (_b = (_a = options.pointerTypes) == null ? void 0 : _a.includes(e.pointerType)) != null ? _b : isReleasingButton || isPrimaryButton) != null ? _c : true;\n  };\n  const listenerOptions = { passive: true };\n  const stops = [\n    useEventListener(target, \"pointerdown\", (e) => {\n      if (!eventIsAllowed(e))\n        return;\n      isPointerDown.value = true;\n      const eventTarget = e.target;\n      eventTarget == null ? void 0 : eventTarget.setPointerCapture(e.pointerId);\n      const { clientX: x, clientY: y } = e;\n      updatePosStart(x, y);\n      updatePosEnd(x, y);\n      onSwipeStart == null ? void 0 : onSwipeStart(e);\n    }, listenerOptions),\n    useEventListener(target, \"pointermove\", (e) => {\n      if (!eventIsAllowed(e))\n        return;\n      if (!isPointerDown.value)\n        return;\n      const { clientX: x, clientY: y } = e;\n      updatePosEnd(x, y);\n      if (!isSwiping.value && isThresholdExceeded.value)\n        isSwiping.value = true;\n      if (isSwiping.value)\n        onSwipe == null ? void 0 : onSwipe(e);\n    }, listenerOptions),\n    useEventListener(target, \"pointerup\", (e) => {\n      if (!eventIsAllowed(e))\n        return;\n      if (isSwiping.value)\n        onSwipeEnd == null ? void 0 : onSwipeEnd(e, direction.value);\n      isPointerDown.value = false;\n      isSwiping.value = false;\n    }, listenerOptions)\n  ];\n  tryOnMounted(() => {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    (_b = (_a = targetRef.value) == null ? void 0 : _a.style) == null ? void 0 : _b.setProperty(\"touch-action\", \"pan-y\");\n    if (disableTextSelect) {\n      (_d = (_c = targetRef.value) == null ? void 0 : _c.style) == null ? void 0 : _d.setProperty(\"-webkit-user-select\", \"none\");\n      (_f = (_e = targetRef.value) == null ? void 0 : _e.style) == null ? void 0 : _f.setProperty(\"-ms-user-select\", \"none\");\n      (_h = (_g = targetRef.value) == null ? void 0 : _g.style) == null ? void 0 : _h.setProperty(\"user-select\", \"none\");\n    }\n  });\n  const stop = () => stops.forEach((s) => s());\n  return {\n    isSwiping: readonly(isSwiping),\n    direction: readonly(direction),\n    posStart: readonly(posStart),\n    posEnd: readonly(posEnd),\n    distanceX,\n    distanceY,\n    stop\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePreferredColorScheme(options) {\n  const isLight = useMediaQuery(\"(prefers-color-scheme: light)\", options);\n  const isDark = useMediaQuery(\"(prefers-color-scheme: dark)\", options);\n  return computed(() => {\n    if (isDark.value)\n      return \"dark\";\n    if (isLight.value)\n      return \"light\";\n    return \"no-preference\";\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePreferredContrast(options) {\n  const isMore = useMediaQuery(\"(prefers-contrast: more)\", options);\n  const isLess = useMediaQuery(\"(prefers-contrast: less)\", options);\n  const isCustom = useMediaQuery(\"(prefers-contrast: custom)\", options);\n  return computed(() => {\n    if (isMore.value)\n      return \"more\";\n    if (isLess.value)\n      return \"less\";\n    if (isCustom.value)\n      return \"custom\";\n    return \"no-preference\";\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePreferredLanguages(options = {}) {\n  const { window = defaultWindow } = options;\n  if (!window)\n    return shallowRef([\"en\"]);\n  const navigator = window.navigator;\n  const value = shallowRef(navigator.languages);\n  useEventListener(window, \"languagechange\", () => {\n    value.value = navigator.languages;\n  }, { passive: true });\n  return value;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePreferredReducedMotion(options) {\n  const isReduced = useMediaQuery(\"(prefers-reduced-motion: reduce)\", options);\n  return computed(() => {\n    if (isReduced.value)\n      return \"reduce\";\n    return \"no-preference\";\n  });\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction usePreferredReducedTransparency(options) {\n  const isReduced = useMediaQuery(\"(prefers-reduced-transparency: reduce)\", options);\n  return computed(() => {\n    if (isReduced.value)\n      return \"reduce\";\n    return \"no-preference\";\n  });\n}\n\nfunction usePrevious(value, initialValue) {\n  const previous = shallowRef(initialValue);\n  watch(\n    toRef(value),\n    (_, oldValue) => {\n      previous.value = oldValue;\n    },\n    { flush: \"sync\" }\n  );\n  return readonly(previous);\n}\n\nconst topVarName = \"--vueuse-safe-area-top\";\nconst rightVarName = \"--vueuse-safe-area-right\";\nconst bottomVarName = \"--vueuse-safe-area-bottom\";\nconst leftVarName = \"--vueuse-safe-area-left\";\nfunction useScreenSafeArea() {\n  const top = shallowRef(\"\");\n  const right = shallowRef(\"\");\n  const bottom = shallowRef(\"\");\n  const left = shallowRef(\"\");\n  if (isClient) {\n    const topCssVar = useCssVar(topVarName);\n    const rightCssVar = useCssVar(rightVarName);\n    const bottomCssVar = useCssVar(bottomVarName);\n    const leftCssVar = useCssVar(leftVarName);\n    topCssVar.value = \"env(safe-area-inset-top, 0px)\";\n    rightCssVar.value = \"env(safe-area-inset-right, 0px)\";\n    bottomCssVar.value = \"env(safe-area-inset-bottom, 0px)\";\n    leftCssVar.value = \"env(safe-area-inset-left, 0px)\";\n    tryOnMounted(update);\n    useEventListener(\"resize\", useDebounceFn(update), { passive: true });\n  }\n  function update() {\n    top.value = getValue(topVarName);\n    right.value = getValue(rightVarName);\n    bottom.value = getValue(bottomVarName);\n    left.value = getValue(leftVarName);\n  }\n  return {\n    top,\n    right,\n    bottom,\n    left,\n    update\n  };\n}\nfunction getValue(position) {\n  return getComputedStyle(document.documentElement).getPropertyValue(position);\n}\n\nfunction useScriptTag(src, onLoaded = noop, options = {}) {\n  const {\n    immediate = true,\n    manual = false,\n    type = \"text/javascript\",\n    async = true,\n    crossOrigin,\n    referrerPolicy,\n    noModule,\n    defer,\n    document = defaultDocument,\n    attrs = {},\n    nonce = void 0\n  } = options;\n  const scriptTag = shallowRef(null);\n  let _promise = null;\n  const loadScript = (waitForScriptLoad) => new Promise((resolve, reject) => {\n    const resolveWithElement = (el2) => {\n      scriptTag.value = el2;\n      resolve(el2);\n      return el2;\n    };\n    if (!document) {\n      resolve(false);\n      return;\n    }\n    let shouldAppend = false;\n    let el = document.querySelector(`script[src=\"${toValue(src)}\"]`);\n    if (!el) {\n      el = document.createElement(\"script\");\n      el.type = type;\n      el.async = async;\n      el.src = toValue(src);\n      if (defer)\n        el.defer = defer;\n      if (crossOrigin)\n        el.crossOrigin = crossOrigin;\n      if (noModule)\n        el.noModule = noModule;\n      if (referrerPolicy)\n        el.referrerPolicy = referrerPolicy;\n      if (nonce) {\n        el.nonce = nonce;\n      }\n      Object.entries(attrs).forEach(([name, value]) => el == null ? void 0 : el.setAttribute(name, value));\n      shouldAppend = true;\n    } else if (el.hasAttribute(\"data-loaded\")) {\n      resolveWithElement(el);\n    }\n    const listenerOptions = {\n      passive: true\n    };\n    useEventListener(el, \"error\", (event) => reject(event), listenerOptions);\n    useEventListener(el, \"abort\", (event) => reject(event), listenerOptions);\n    useEventListener(el, \"load\", () => {\n      el.setAttribute(\"data-loaded\", \"true\");\n      onLoaded(el);\n      resolveWithElement(el);\n    }, listenerOptions);\n    if (shouldAppend)\n      el = document.head.appendChild(el);\n    if (!waitForScriptLoad)\n      resolveWithElement(el);\n  });\n  const load = (waitForScriptLoad = true) => {\n    if (!_promise)\n      _promise = loadScript(waitForScriptLoad);\n    return _promise;\n  };\n  const unload = () => {\n    if (!document)\n      return;\n    _promise = null;\n    if (scriptTag.value)\n      scriptTag.value = null;\n    const el = document.querySelector(`script[src=\"${toValue(src)}\"]`);\n    if (el)\n      document.head.removeChild(el);\n  };\n  if (immediate && !manual)\n    tryOnMounted(load);\n  if (!manual)\n    tryOnUnmounted(unload);\n  return { scriptTag, load, unload };\n}\n\nfunction checkOverflowScroll(ele) {\n  const style = window.getComputedStyle(ele);\n  if (style.overflowX === \"scroll\" || style.overflowY === \"scroll\" || style.overflowX === \"auto\" && ele.clientWidth < ele.scrollWidth || style.overflowY === \"auto\" && ele.clientHeight < ele.scrollHeight) {\n    return true;\n  } else {\n    const parent = ele.parentNode;\n    if (!parent || parent.tagName === \"BODY\")\n      return false;\n    return checkOverflowScroll(parent);\n  }\n}\nfunction preventDefault(rawEvent) {\n  const e = rawEvent || window.event;\n  const _target = e.target;\n  if (checkOverflowScroll(_target))\n    return false;\n  if (e.touches.length > 1)\n    return true;\n  if (e.preventDefault)\n    e.preventDefault();\n  return false;\n}\nconst elInitialOverflow = /* @__PURE__ */ new WeakMap();\nfunction useScrollLock(element, initialState = false) {\n  const isLocked = shallowRef(initialState);\n  let stopTouchMoveListener = null;\n  let initialOverflow = \"\";\n  watch(toRef(element), (el) => {\n    const target = resolveElement(toValue(el));\n    if (target) {\n      const ele = target;\n      if (!elInitialOverflow.get(ele))\n        elInitialOverflow.set(ele, ele.style.overflow);\n      if (ele.style.overflow !== \"hidden\")\n        initialOverflow = ele.style.overflow;\n      if (ele.style.overflow === \"hidden\")\n        return isLocked.value = true;\n      if (isLocked.value)\n        return ele.style.overflow = \"hidden\";\n    }\n  }, {\n    immediate: true\n  });\n  const lock = () => {\n    const el = resolveElement(toValue(element));\n    if (!el || isLocked.value)\n      return;\n    if (isIOS) {\n      stopTouchMoveListener = useEventListener(\n        el,\n        \"touchmove\",\n        (e) => {\n          preventDefault(e);\n        },\n        { passive: false }\n      );\n    }\n    el.style.overflow = \"hidden\";\n    isLocked.value = true;\n  };\n  const unlock = () => {\n    const el = resolveElement(toValue(element));\n    if (!el || !isLocked.value)\n      return;\n    if (isIOS)\n      stopTouchMoveListener == null ? void 0 : stopTouchMoveListener();\n    el.style.overflow = initialOverflow;\n    elInitialOverflow.delete(el);\n    isLocked.value = false;\n  };\n  tryOnScopeDispose(unlock);\n  return computed({\n    get() {\n      return isLocked.value;\n    },\n    set(v) {\n      if (v)\n        lock();\n      else unlock();\n    }\n  });\n}\n\nfunction useSessionStorage(key, initialValue, options = {}) {\n  const { window = defaultWindow } = options;\n  return useStorage(key, initialValue, window == null ? void 0 : window.sessionStorage, options);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useShare(shareOptions = {}, options = {}) {\n  const { navigator = defaultNavigator } = options;\n  const _navigator = navigator;\n  const isSupported = useSupported(() => _navigator && \"canShare\" in _navigator);\n  const share = async (overrideOptions = {}) => {\n    if (isSupported.value) {\n      const data = {\n        ...toValue(shareOptions),\n        ...toValue(overrideOptions)\n      };\n      let granted = true;\n      if (data.files && _navigator.canShare)\n        granted = _navigator.canShare({ files: data.files });\n      if (granted)\n        return _navigator.share(data);\n    }\n  };\n  return {\n    isSupported,\n    share\n  };\n}\n\nconst defaultSortFn = (source, compareFn) => source.sort(compareFn);\nconst defaultCompare = (a, b) => a - b;\nfunction useSorted(...args) {\n  var _a, _b, _c, _d;\n  const [source] = args;\n  let compareFn = defaultCompare;\n  let options = {};\n  if (args.length === 2) {\n    if (typeof args[1] === \"object\") {\n      options = args[1];\n      compareFn = (_a = options.compareFn) != null ? _a : defaultCompare;\n    } else {\n      compareFn = (_b = args[1]) != null ? _b : defaultCompare;\n    }\n  } else if (args.length > 2) {\n    compareFn = (_c = args[1]) != null ? _c : defaultCompare;\n    options = (_d = args[2]) != null ? _d : {};\n  }\n  const {\n    dirty = false,\n    sortFn = defaultSortFn\n  } = options;\n  if (!dirty)\n    return computed(() => sortFn([...toValue(source)], compareFn));\n  watchEffect(() => {\n    const result = sortFn(toValue(source), compareFn);\n    if (isRef(source))\n      source.value = result;\n    else\n      source.splice(0, source.length, ...result);\n  });\n  return source;\n}\n\nfunction useSpeechRecognition(options = {}) {\n  const {\n    interimResults = true,\n    continuous = true,\n    maxAlternatives = 1,\n    window = defaultWindow\n  } = options;\n  const lang = toRef(options.lang || \"en-US\");\n  const isListening = shallowRef(false);\n  const isFinal = shallowRef(false);\n  const result = shallowRef(\"\");\n  const error = shallowRef(void 0);\n  let recognition;\n  const start = () => {\n    isListening.value = true;\n  };\n  const stop = () => {\n    isListening.value = false;\n  };\n  const toggle = (value = !isListening.value) => {\n    if (value) {\n      start();\n    } else {\n      stop();\n    }\n  };\n  const SpeechRecognition = window && (window.SpeechRecognition || window.webkitSpeechRecognition);\n  const isSupported = useSupported(() => SpeechRecognition);\n  if (isSupported.value) {\n    recognition = new SpeechRecognition();\n    recognition.continuous = continuous;\n    recognition.interimResults = interimResults;\n    recognition.lang = toValue(lang);\n    recognition.maxAlternatives = maxAlternatives;\n    recognition.onstart = () => {\n      isListening.value = true;\n      isFinal.value = false;\n    };\n    watch(lang, (lang2) => {\n      if (recognition && !isListening.value)\n        recognition.lang = lang2;\n    });\n    recognition.onresult = (event) => {\n      const currentResult = event.results[event.resultIndex];\n      const { transcript } = currentResult[0];\n      isFinal.value = currentResult.isFinal;\n      result.value = transcript;\n      error.value = void 0;\n    };\n    recognition.onerror = (event) => {\n      error.value = event;\n    };\n    recognition.onend = () => {\n      isListening.value = false;\n      recognition.lang = toValue(lang);\n    };\n    watch(isListening, (newValue, oldValue) => {\n      if (newValue === oldValue)\n        return;\n      if (newValue)\n        recognition.start();\n      else\n        recognition.stop();\n    });\n  }\n  tryOnScopeDispose(() => {\n    stop();\n  });\n  return {\n    isSupported,\n    isListening,\n    isFinal,\n    recognition,\n    result,\n    error,\n    toggle,\n    start,\n    stop\n  };\n}\n\nfunction useSpeechSynthesis(text, options = {}) {\n  const {\n    pitch = 1,\n    rate = 1,\n    volume = 1,\n    window = defaultWindow,\n    onBoundary\n  } = options;\n  const synth = window && window.speechSynthesis;\n  const isSupported = useSupported(() => synth);\n  const isPlaying = shallowRef(false);\n  const status = shallowRef(\"init\");\n  const spokenText = toRef(text || \"\");\n  const lang = toRef(options.lang || \"en-US\");\n  const error = shallowRef(void 0);\n  const toggle = (value = !isPlaying.value) => {\n    isPlaying.value = value;\n  };\n  const bindEventsForUtterance = (utterance2) => {\n    utterance2.lang = toValue(lang);\n    utterance2.voice = toValue(options.voice) || null;\n    utterance2.pitch = toValue(pitch);\n    utterance2.rate = toValue(rate);\n    utterance2.volume = toValue(volume);\n    utterance2.onstart = () => {\n      isPlaying.value = true;\n      status.value = \"play\";\n    };\n    utterance2.onpause = () => {\n      isPlaying.value = false;\n      status.value = \"pause\";\n    };\n    utterance2.onresume = () => {\n      isPlaying.value = true;\n      status.value = \"play\";\n    };\n    utterance2.onend = () => {\n      isPlaying.value = false;\n      status.value = \"end\";\n    };\n    utterance2.onerror = (event) => {\n      error.value = event;\n    };\n    utterance2.onboundary = (event) => {\n      onBoundary == null ? void 0 : onBoundary(event);\n    };\n  };\n  const utterance = computed(() => {\n    isPlaying.value = false;\n    status.value = \"init\";\n    const newUtterance = new SpeechSynthesisUtterance(spokenText.value);\n    bindEventsForUtterance(newUtterance);\n    return newUtterance;\n  });\n  const speak = () => {\n    synth.cancel();\n    if (utterance)\n      synth.speak(utterance.value);\n  };\n  const stop = () => {\n    synth.cancel();\n    isPlaying.value = false;\n  };\n  if (isSupported.value) {\n    bindEventsForUtterance(utterance.value);\n    watch(lang, (lang2) => {\n      if (utterance.value && !isPlaying.value)\n        utterance.value.lang = lang2;\n    });\n    if (options.voice) {\n      watch(options.voice, () => {\n        synth.cancel();\n      });\n    }\n    watch(isPlaying, () => {\n      if (isPlaying.value)\n        synth.resume();\n      else\n        synth.pause();\n    });\n  }\n  tryOnScopeDispose(() => {\n    isPlaying.value = false;\n  });\n  return {\n    isSupported,\n    isPlaying,\n    status,\n    utterance,\n    error,\n    stop,\n    toggle,\n    speak\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useStepper(steps, initialStep) {\n  const stepsRef = ref(steps);\n  const stepNames = computed(() => Array.isArray(stepsRef.value) ? stepsRef.value : Object.keys(stepsRef.value));\n  const index = ref(stepNames.value.indexOf(initialStep != null ? initialStep : stepNames.value[0]));\n  const current = computed(() => at(index.value));\n  const isFirst = computed(() => index.value === 0);\n  const isLast = computed(() => index.value === stepNames.value.length - 1);\n  const next = computed(() => stepNames.value[index.value + 1]);\n  const previous = computed(() => stepNames.value[index.value - 1]);\n  function at(index2) {\n    if (Array.isArray(stepsRef.value))\n      return stepsRef.value[index2];\n    return stepsRef.value[stepNames.value[index2]];\n  }\n  function get(step) {\n    if (!stepNames.value.includes(step))\n      return;\n    return at(stepNames.value.indexOf(step));\n  }\n  function goTo(step) {\n    if (stepNames.value.includes(step))\n      index.value = stepNames.value.indexOf(step);\n  }\n  function goToNext() {\n    if (isLast.value)\n      return;\n    index.value++;\n  }\n  function goToPrevious() {\n    if (isFirst.value)\n      return;\n    index.value--;\n  }\n  function goBackTo(step) {\n    if (isAfter(step))\n      goTo(step);\n  }\n  function isNext(step) {\n    return stepNames.value.indexOf(step) === index.value + 1;\n  }\n  function isPrevious(step) {\n    return stepNames.value.indexOf(step) === index.value - 1;\n  }\n  function isCurrent(step) {\n    return stepNames.value.indexOf(step) === index.value;\n  }\n  function isBefore(step) {\n    return index.value < stepNames.value.indexOf(step);\n  }\n  function isAfter(step) {\n    return index.value > stepNames.value.indexOf(step);\n  }\n  return {\n    steps: stepsRef,\n    stepNames,\n    index,\n    current,\n    next,\n    previous,\n    isFirst,\n    isLast,\n    at,\n    get,\n    goTo,\n    goToNext,\n    goToPrevious,\n    goBackTo,\n    isNext,\n    isPrevious,\n    isCurrent,\n    isBefore,\n    isAfter\n  };\n}\n\nfunction useStorageAsync(key, initialValue, storage, options = {}) {\n  var _a;\n  const {\n    flush = \"pre\",\n    deep = true,\n    listenToStorageChanges = true,\n    writeDefaults = true,\n    mergeDefaults = false,\n    shallow,\n    window = defaultWindow,\n    eventFilter,\n    onError = (e) => {\n      console.error(e);\n    },\n    onReady\n  } = options;\n  const rawInit = toValue(initialValue);\n  const type = guessSerializerType(rawInit);\n  const data = (shallow ? shallowRef : ref)(toValue(initialValue));\n  const serializer = (_a = options.serializer) != null ? _a : StorageSerializers[type];\n  if (!storage) {\n    try {\n      storage = getSSRHandler(\"getDefaultStorageAsync\", () => {\n        var _a2;\n        return (_a2 = defaultWindow) == null ? void 0 : _a2.localStorage;\n      })();\n    } catch (e) {\n      onError(e);\n    }\n  }\n  async function read(event) {\n    if (!storage || event && event.key !== key)\n      return;\n    try {\n      const rawValue = event ? event.newValue : await storage.getItem(key);\n      if (rawValue == null) {\n        data.value = rawInit;\n        if (writeDefaults && rawInit !== null)\n          await storage.setItem(key, await serializer.write(rawInit));\n      } else if (mergeDefaults) {\n        const value = await serializer.read(rawValue);\n        if (typeof mergeDefaults === \"function\")\n          data.value = mergeDefaults(value, rawInit);\n        else if (type === \"object\" && !Array.isArray(value))\n          data.value = { ...rawInit, ...value };\n        else data.value = value;\n      } else {\n        data.value = await serializer.read(rawValue);\n      }\n    } catch (e) {\n      onError(e);\n    }\n  }\n  const promise = new Promise((resolve) => {\n    read().then(() => {\n      onReady == null ? void 0 : onReady(data.value);\n      resolve(data);\n    });\n  });\n  if (window && listenToStorageChanges)\n    useEventListener(window, \"storage\", (e) => Promise.resolve().then(() => read(e)), { passive: true });\n  if (storage) {\n    watchWithFilter(\n      data,\n      async () => {\n        try {\n          if (data.value == null)\n            await storage.removeItem(key);\n          else\n            await storage.setItem(key, await serializer.write(data.value));\n        } catch (e) {\n          onError(e);\n        }\n      },\n      {\n        flush,\n        deep,\n        eventFilter\n      }\n    );\n  }\n  Object.assign(data, {\n    then: promise.then.bind(promise),\n    catch: promise.catch.bind(promise)\n  });\n  return data;\n}\n\nlet _id = 0;\nfunction useStyleTag(css, options = {}) {\n  const isLoaded = shallowRef(false);\n  const {\n    document = defaultDocument,\n    immediate = true,\n    manual = false,\n    id = `vueuse_styletag_${++_id}`\n  } = options;\n  const cssRef = shallowRef(css);\n  let stop = () => {\n  };\n  const load = () => {\n    if (!document)\n      return;\n    const el = document.getElementById(id) || document.createElement(\"style\");\n    if (!el.isConnected) {\n      el.id = id;\n      if (options.nonce)\n        el.nonce = options.nonce;\n      if (options.media)\n        el.media = options.media;\n      document.head.appendChild(el);\n    }\n    if (isLoaded.value)\n      return;\n    stop = watch(\n      cssRef,\n      (value) => {\n        el.textContent = value;\n      },\n      { immediate: true }\n    );\n    isLoaded.value = true;\n  };\n  const unload = () => {\n    if (!document || !isLoaded.value)\n      return;\n    stop();\n    document.head.removeChild(document.getElementById(id));\n    isLoaded.value = false;\n  };\n  if (immediate && !manual)\n    tryOnMounted(load);\n  if (!manual)\n    tryOnScopeDispose(unload);\n  return {\n    id,\n    css: cssRef,\n    unload,\n    load,\n    isLoaded: readonly(isLoaded)\n  };\n}\n\nfunction useSwipe(target, options = {}) {\n  const {\n    threshold = 50,\n    onSwipe,\n    onSwipeEnd,\n    onSwipeStart,\n    passive = true\n  } = options;\n  const coordsStart = reactive({ x: 0, y: 0 });\n  const coordsEnd = reactive({ x: 0, y: 0 });\n  const diffX = computed(() => coordsStart.x - coordsEnd.x);\n  const diffY = computed(() => coordsStart.y - coordsEnd.y);\n  const { max, abs } = Math;\n  const isThresholdExceeded = computed(() => max(abs(diffX.value), abs(diffY.value)) >= threshold);\n  const isSwiping = shallowRef(false);\n  const direction = computed(() => {\n    if (!isThresholdExceeded.value)\n      return \"none\";\n    if (abs(diffX.value) > abs(diffY.value)) {\n      return diffX.value > 0 ? \"left\" : \"right\";\n    } else {\n      return diffY.value > 0 ? \"up\" : \"down\";\n    }\n  });\n  const getTouchEventCoords = (e) => [e.touches[0].clientX, e.touches[0].clientY];\n  const updateCoordsStart = (x, y) => {\n    coordsStart.x = x;\n    coordsStart.y = y;\n  };\n  const updateCoordsEnd = (x, y) => {\n    coordsEnd.x = x;\n    coordsEnd.y = y;\n  };\n  const listenerOptions = { passive, capture: !passive };\n  const onTouchEnd = (e) => {\n    if (isSwiping.value)\n      onSwipeEnd == null ? void 0 : onSwipeEnd(e, direction.value);\n    isSwiping.value = false;\n  };\n  const stops = [\n    useEventListener(target, \"touchstart\", (e) => {\n      if (e.touches.length !== 1)\n        return;\n      const [x, y] = getTouchEventCoords(e);\n      updateCoordsStart(x, y);\n      updateCoordsEnd(x, y);\n      onSwipeStart == null ? void 0 : onSwipeStart(e);\n    }, listenerOptions),\n    useEventListener(target, \"touchmove\", (e) => {\n      if (e.touches.length !== 1)\n        return;\n      const [x, y] = getTouchEventCoords(e);\n      updateCoordsEnd(x, y);\n      if (listenerOptions.capture && !listenerOptions.passive && Math.abs(diffX.value) > Math.abs(diffY.value))\n        e.preventDefault();\n      if (!isSwiping.value && isThresholdExceeded.value)\n        isSwiping.value = true;\n      if (isSwiping.value)\n        onSwipe == null ? void 0 : onSwipe(e);\n    }, listenerOptions),\n    useEventListener(target, [\"touchend\", \"touchcancel\"], onTouchEnd, listenerOptions)\n  ];\n  const stop = () => stops.forEach((s) => s());\n  return {\n    isSwiping,\n    direction,\n    coordsStart,\n    coordsEnd,\n    lengthX: diffX,\n    lengthY: diffY,\n    stop,\n    // TODO: Remove in the next major version\n    isPassiveEventSupported: true\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useTemplateRefsList() {\n  const refs = ref([]);\n  refs.value.set = (el) => {\n    if (el)\n      refs.value.push(el);\n  };\n  onBeforeUpdate(() => {\n    refs.value.length = 0;\n  });\n  return refs;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useTextDirection(options = {}) {\n  const {\n    document = defaultDocument,\n    selector = \"html\",\n    observe = false,\n    initialValue = \"ltr\"\n  } = options;\n  function getValue() {\n    var _a, _b;\n    return (_b = (_a = document == null ? void 0 : document.querySelector(selector)) == null ? void 0 : _a.getAttribute(\"dir\")) != null ? _b : initialValue;\n  }\n  const dir = ref(getValue());\n  tryOnMounted(() => dir.value = getValue());\n  if (observe && document) {\n    useMutationObserver(\n      document.querySelector(selector),\n      () => dir.value = getValue(),\n      { attributes: true }\n    );\n  }\n  return computed({\n    get() {\n      return dir.value;\n    },\n    set(v) {\n      var _a, _b;\n      dir.value = v;\n      if (!document)\n        return;\n      if (dir.value)\n        (_a = document.querySelector(selector)) == null ? void 0 : _a.setAttribute(\"dir\", dir.value);\n      else\n        (_b = document.querySelector(selector)) == null ? void 0 : _b.removeAttribute(\"dir\");\n    }\n  });\n}\n\nfunction getRangesFromSelection(selection) {\n  var _a;\n  const rangeCount = (_a = selection.rangeCount) != null ? _a : 0;\n  return Array.from({ length: rangeCount }, (_, i) => selection.getRangeAt(i));\n}\n// @__NO_SIDE_EFFECTS__\nfunction useTextSelection(options = {}) {\n  const {\n    window = defaultWindow\n  } = options;\n  const selection = ref(null);\n  const text = computed(() => {\n    var _a, _b;\n    return (_b = (_a = selection.value) == null ? void 0 : _a.toString()) != null ? _b : \"\";\n  });\n  const ranges = computed(() => selection.value ? getRangesFromSelection(selection.value) : []);\n  const rects = computed(() => ranges.value.map((range) => range.getBoundingClientRect()));\n  function onSelectionChange() {\n    selection.value = null;\n    if (window)\n      selection.value = window.getSelection();\n  }\n  if (window)\n    useEventListener(window.document, \"selectionchange\", onSelectionChange, { passive: true });\n  return {\n    text,\n    rects,\n    ranges,\n    selection\n  };\n}\n\nfunction tryRequestAnimationFrame(window = defaultWindow, fn) {\n  if (window && typeof window.requestAnimationFrame === \"function\") {\n    window.requestAnimationFrame(fn);\n  } else {\n    fn();\n  }\n}\nfunction useTextareaAutosize(options = {}) {\n  var _a, _b;\n  const { window = defaultWindow } = options;\n  const textarea = toRef(options == null ? void 0 : options.element);\n  const input = toRef((_a = options == null ? void 0 : options.input) != null ? _a : \"\");\n  const styleProp = (_b = options == null ? void 0 : options.styleProp) != null ? _b : \"height\";\n  const textareaScrollHeight = shallowRef(1);\n  const textareaOldWidth = shallowRef(0);\n  function triggerResize() {\n    var _a2;\n    if (!textarea.value)\n      return;\n    let height = \"\";\n    textarea.value.style[styleProp] = \"1px\";\n    textareaScrollHeight.value = (_a2 = textarea.value) == null ? void 0 : _a2.scrollHeight;\n    const _styleTarget = toValue(options == null ? void 0 : options.styleTarget);\n    if (_styleTarget)\n      _styleTarget.style[styleProp] = `${textareaScrollHeight.value}px`;\n    else\n      height = `${textareaScrollHeight.value}px`;\n    textarea.value.style[styleProp] = height;\n  }\n  watch([input, textarea], () => nextTick(triggerResize), { immediate: true });\n  watch(textareaScrollHeight, () => {\n    var _a2;\n    return (_a2 = options == null ? void 0 : options.onResize) == null ? void 0 : _a2.call(options);\n  });\n  useResizeObserver(textarea, ([{ contentRect }]) => {\n    if (textareaOldWidth.value === contentRect.width)\n      return;\n    tryRequestAnimationFrame(window, () => {\n      textareaOldWidth.value = contentRect.width;\n      triggerResize();\n    });\n  });\n  if (options == null ? void 0 : options.watch)\n    watch(options.watch, triggerResize, { immediate: true, deep: true });\n  return {\n    textarea,\n    input,\n    triggerResize\n  };\n}\n\nfunction useThrottledRefHistory(source, options = {}) {\n  const { throttle = 200, trailing = true } = options;\n  const filter = throttleFilter(throttle, trailing);\n  const history = useRefHistory(source, { ...options, eventFilter: filter });\n  return {\n    ...history\n  };\n}\n\nconst DEFAULT_UNITS = [\n  { max: 6e4, value: 1e3, name: \"second\" },\n  { max: 276e4, value: 6e4, name: \"minute\" },\n  { max: 72e6, value: 36e5, name: \"hour\" },\n  { max: 5184e5, value: 864e5, name: \"day\" },\n  { max: 24192e5, value: 6048e5, name: \"week\" },\n  { max: 28512e6, value: 2592e6, name: \"month\" },\n  { max: Number.POSITIVE_INFINITY, value: 31536e6, name: \"year\" }\n];\nconst DEFAULT_MESSAGES = {\n  justNow: \"just now\",\n  past: (n) => n.match(/\\d/) ? `${n} ago` : n,\n  future: (n) => n.match(/\\d/) ? `in ${n}` : n,\n  month: (n, past) => n === 1 ? past ? \"last month\" : \"next month\" : `${n} month${n > 1 ? \"s\" : \"\"}`,\n  year: (n, past) => n === 1 ? past ? \"last year\" : \"next year\" : `${n} year${n > 1 ? \"s\" : \"\"}`,\n  day: (n, past) => n === 1 ? past ? \"yesterday\" : \"tomorrow\" : `${n} day${n > 1 ? \"s\" : \"\"}`,\n  week: (n, past) => n === 1 ? past ? \"last week\" : \"next week\" : `${n} week${n > 1 ? \"s\" : \"\"}`,\n  hour: (n) => `${n} hour${n > 1 ? \"s\" : \"\"}`,\n  minute: (n) => `${n} minute${n > 1 ? \"s\" : \"\"}`,\n  second: (n) => `${n} second${n > 1 ? \"s\" : \"\"}`,\n  invalid: \"\"\n};\nfunction DEFAULT_FORMATTER(date) {\n  return date.toISOString().slice(0, 10);\n}\n// @__NO_SIDE_EFFECTS__\nfunction useTimeAgo(time, options = {}) {\n  const {\n    controls: exposeControls = false,\n    updateInterval = 3e4\n  } = options;\n  const { now, ...controls } = useNow({ interval: updateInterval, controls: true });\n  const timeAgo = computed(() => formatTimeAgo(new Date(toValue(time)), options, toValue(now)));\n  if (exposeControls) {\n    return {\n      timeAgo,\n      ...controls\n    };\n  } else {\n    return timeAgo;\n  }\n}\nfunction formatTimeAgo(from, options = {}, now = Date.now()) {\n  var _a;\n  const {\n    max,\n    messages = DEFAULT_MESSAGES,\n    fullDateFormatter = DEFAULT_FORMATTER,\n    units = DEFAULT_UNITS,\n    showSecond = false,\n    rounding = \"round\"\n  } = options;\n  const roundFn = typeof rounding === \"number\" ? (n) => +n.toFixed(rounding) : Math[rounding];\n  const diff = +now - +from;\n  const absDiff = Math.abs(diff);\n  function getValue(diff2, unit) {\n    return roundFn(Math.abs(diff2) / unit.value);\n  }\n  function format(diff2, unit) {\n    const val = getValue(diff2, unit);\n    const past = diff2 > 0;\n    const str = applyFormat(unit.name, val, past);\n    return applyFormat(past ? \"past\" : \"future\", str, past);\n  }\n  function applyFormat(name, val, isPast) {\n    const formatter = messages[name];\n    if (typeof formatter === \"function\")\n      return formatter(val, isPast);\n    return formatter.replace(\"{0}\", val.toString());\n  }\n  if (absDiff < 6e4 && !showSecond)\n    return messages.justNow;\n  if (typeof max === \"number\" && absDiff > max)\n    return fullDateFormatter(new Date(from));\n  if (typeof max === \"string\") {\n    const unitMax = (_a = units.find((i) => i.name === max)) == null ? void 0 : _a.max;\n    if (unitMax && absDiff > unitMax)\n      return fullDateFormatter(new Date(from));\n  }\n  for (const [idx, unit] of units.entries()) {\n    const val = getValue(diff, unit);\n    if (val <= 0 && units[idx - 1])\n      return format(diff, units[idx - 1]);\n    if (absDiff < unit.max)\n      return format(diff, unit);\n  }\n  return messages.invalid;\n}\n\nconst UNITS = [\n  { name: \"year\", ms: 31536e6 },\n  { name: \"month\", ms: 2592e6 },\n  { name: \"week\", ms: 6048e5 },\n  { name: \"day\", ms: 864e5 },\n  { name: \"hour\", ms: 36e5 },\n  { name: \"minute\", ms: 6e4 },\n  { name: \"second\", ms: 1e3 }\n];\nfunction useTimeAgoIntl(time, options = {}) {\n  const {\n    controls: exposeControls = false,\n    updateInterval = 3e4\n  } = options;\n  const { now, ...controls } = useNow({ interval: updateInterval, controls: true });\n  const result = computed(\n    () => getTimeAgoIntlResult(new Date(toValue(time)), options, toValue(now))\n  );\n  const parts = computed(() => result.value.parts);\n  const timeAgoIntl = computed(\n    () => formatTimeAgoIntlParts(parts.value, {\n      ...options,\n      locale: result.value.resolvedLocale\n    })\n  );\n  return exposeControls ? { timeAgoIntl, parts, ...controls } : timeAgoIntl;\n}\nfunction formatTimeAgoIntl(from, options = {}, now = Date.now()) {\n  const { parts, resolvedLocale } = getTimeAgoIntlResult(from, options, now);\n  return formatTimeAgoIntlParts(parts, {\n    ...options,\n    locale: resolvedLocale\n  });\n}\nfunction getTimeAgoIntlResult(from, options = {}, now = Date.now()) {\n  const {\n    locale,\n    relativeTimeFormatOptions = { numeric: \"auto\" }\n  } = options;\n  const rtf = new Intl.RelativeTimeFormat(locale, relativeTimeFormatOptions);\n  const { locale: resolvedLocale } = rtf.resolvedOptions();\n  const diff = +from - +now;\n  const absDiff = Math.abs(diff);\n  for (const { name, ms } of UNITS) {\n    if (absDiff >= ms) {\n      return {\n        resolvedLocale,\n        parts: rtf.formatToParts(Math.round(diff / ms), name)\n      };\n    }\n  }\n  return {\n    resolvedLocale,\n    parts: rtf.formatToParts(0, \"second\")\n  };\n}\nfunction formatTimeAgoIntlParts(parts, options = {}) {\n  const {\n    insertSpace = true,\n    joinParts,\n    locale\n  } = options;\n  if (typeof joinParts === \"function\")\n    return joinParts(parts, locale);\n  if (!insertSpace)\n    return parts.map((part) => part.value).join(\"\");\n  return parts.map((part) => part.value.trim()).join(\" \");\n}\n\nfunction useTimeoutPoll(fn, interval, options = {}) {\n  const {\n    immediate = true,\n    immediateCallback = false\n  } = options;\n  const { start } = useTimeoutFn(loop, interval, { immediate });\n  const isActive = shallowRef(false);\n  async function loop() {\n    if (!isActive.value)\n      return;\n    await fn();\n    start();\n  }\n  function resume() {\n    if (!isActive.value) {\n      isActive.value = true;\n      if (immediateCallback)\n        fn();\n      start();\n    }\n  }\n  function pause() {\n    isActive.value = false;\n  }\n  if (immediate && isClient)\n    resume();\n  tryOnScopeDispose(pause);\n  return {\n    isActive,\n    pause,\n    resume\n  };\n}\n\nfunction useTimestamp(options = {}) {\n  const {\n    controls: exposeControls = false,\n    offset = 0,\n    immediate = true,\n    interval = \"requestAnimationFrame\",\n    callback\n  } = options;\n  const ts = shallowRef(timestamp() + offset);\n  const update = () => ts.value = timestamp() + offset;\n  const cb = callback ? () => {\n    update();\n    callback(ts.value);\n  } : update;\n  const controls = interval === \"requestAnimationFrame\" ? useRafFn(cb, { immediate }) : useIntervalFn(cb, interval, { immediate });\n  if (exposeControls) {\n    return {\n      timestamp: ts,\n      ...controls\n    };\n  } else {\n    return ts;\n  }\n}\n\nfunction useTitle(newTitle = null, options = {}) {\n  var _a, _b, _c;\n  const {\n    document = defaultDocument,\n    restoreOnUnmount = (t) => t\n  } = options;\n  const originalTitle = (_a = document == null ? void 0 : document.title) != null ? _a : \"\";\n  const title = toRef((_b = newTitle != null ? newTitle : document == null ? void 0 : document.title) != null ? _b : null);\n  const isReadonly = !!(newTitle && typeof newTitle === \"function\");\n  function format(t) {\n    if (!(\"titleTemplate\" in options))\n      return t;\n    const template = options.titleTemplate || \"%s\";\n    return typeof template === \"function\" ? template(t) : toValue(template).replace(/%s/g, t);\n  }\n  watch(\n    title,\n    (newValue, oldValue) => {\n      if (newValue !== oldValue && document)\n        document.title = format(newValue != null ? newValue : \"\");\n    },\n    { immediate: true }\n  );\n  if (options.observe && !options.titleTemplate && document && !isReadonly) {\n    useMutationObserver(\n      (_c = document.head) == null ? void 0 : _c.querySelector(\"title\"),\n      () => {\n        if (document && document.title !== title.value)\n          title.value = format(document.title);\n      },\n      { childList: true }\n    );\n  }\n  tryOnScopeDispose(() => {\n    if (restoreOnUnmount) {\n      const restoredTitle = restoreOnUnmount(originalTitle, title.value || \"\");\n      if (restoredTitle != null && document)\n        document.title = restoredTitle;\n    }\n  });\n  return title;\n}\n\nconst _TransitionPresets = {\n  easeInSine: [0.12, 0, 0.39, 0],\n  easeOutSine: [0.61, 1, 0.88, 1],\n  easeInOutSine: [0.37, 0, 0.63, 1],\n  easeInQuad: [0.11, 0, 0.5, 0],\n  easeOutQuad: [0.5, 1, 0.89, 1],\n  easeInOutQuad: [0.45, 0, 0.55, 1],\n  easeInCubic: [0.32, 0, 0.67, 0],\n  easeOutCubic: [0.33, 1, 0.68, 1],\n  easeInOutCubic: [0.65, 0, 0.35, 1],\n  easeInQuart: [0.5, 0, 0.75, 0],\n  easeOutQuart: [0.25, 1, 0.5, 1],\n  easeInOutQuart: [0.76, 0, 0.24, 1],\n  easeInQuint: [0.64, 0, 0.78, 0],\n  easeOutQuint: [0.22, 1, 0.36, 1],\n  easeInOutQuint: [0.83, 0, 0.17, 1],\n  easeInExpo: [0.7, 0, 0.84, 0],\n  easeOutExpo: [0.16, 1, 0.3, 1],\n  easeInOutExpo: [0.87, 0, 0.13, 1],\n  easeInCirc: [0.55, 0, 1, 0.45],\n  easeOutCirc: [0, 0.55, 0.45, 1],\n  easeInOutCirc: [0.85, 0, 0.15, 1],\n  easeInBack: [0.36, 0, 0.66, -0.56],\n  easeOutBack: [0.34, 1.56, 0.64, 1],\n  easeInOutBack: [0.68, -0.6, 0.32, 1.6]\n};\nconst TransitionPresets = /* @__PURE__ */ Object.assign({}, { linear: identity }, _TransitionPresets);\nfunction createEasingFunction([p0, p1, p2, p3]) {\n  const a = (a1, a2) => 1 - 3 * a2 + 3 * a1;\n  const b = (a1, a2) => 3 * a2 - 6 * a1;\n  const c = (a1) => 3 * a1;\n  const calcBezier = (t, a1, a2) => ((a(a1, a2) * t + b(a1, a2)) * t + c(a1)) * t;\n  const getSlope = (t, a1, a2) => 3 * a(a1, a2) * t * t + 2 * b(a1, a2) * t + c(a1);\n  const getTforX = (x) => {\n    let aGuessT = x;\n    for (let i = 0; i < 4; ++i) {\n      const currentSlope = getSlope(aGuessT, p0, p2);\n      if (currentSlope === 0)\n        return aGuessT;\n      const currentX = calcBezier(aGuessT, p0, p2) - x;\n      aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n  };\n  return (x) => p0 === p1 && p2 === p3 ? x : calcBezier(getTforX(x), p1, p3);\n}\nfunction lerp(a, b, alpha) {\n  return a + alpha * (b - a);\n}\nfunction toVec(t) {\n  return (typeof t === \"number\" ? [t] : t) || [];\n}\nfunction executeTransition(source, from, to, options = {}) {\n  var _a, _b;\n  const {\n    window = defaultWindow\n  } = options;\n  const fromVal = toValue(from);\n  const toVal = toValue(to);\n  const v1 = toVec(fromVal);\n  const v2 = toVec(toVal);\n  const duration = (_a = toValue(options.duration)) != null ? _a : 1e3;\n  const startedAt = Date.now();\n  const endAt = Date.now() + duration;\n  const trans = typeof options.transition === \"function\" ? options.transition : (_b = toValue(options.transition)) != null ? _b : identity;\n  const ease = typeof trans === \"function\" ? trans : createEasingFunction(trans);\n  return new Promise((resolve) => {\n    source.value = fromVal;\n    const tick = () => {\n      var _a2;\n      if ((_a2 = options.abort) == null ? void 0 : _a2.call(options)) {\n        resolve();\n        return;\n      }\n      const now = Date.now();\n      const alpha = ease((now - startedAt) / duration);\n      const arr = toVec(source.value).map((n, i) => lerp(v1[i], v2[i], alpha));\n      if (Array.isArray(source.value))\n        source.value = arr.map((n, i) => {\n          var _a3, _b2;\n          return lerp((_a3 = v1[i]) != null ? _a3 : 0, (_b2 = v2[i]) != null ? _b2 : 0, alpha);\n        });\n      else if (typeof source.value === \"number\")\n        source.value = arr[0];\n      if (now < endAt) {\n        window == null ? void 0 : window.requestAnimationFrame(tick);\n      } else {\n        source.value = toVal;\n        resolve();\n      }\n    };\n    tick();\n  });\n}\nfunction useTransition(source, options = {}) {\n  let currentId = 0;\n  const sourceVal = () => {\n    const v = toValue(source);\n    return typeof v === \"number\" ? v : v.map(toValue);\n  };\n  const outputRef = ref(sourceVal());\n  watch(sourceVal, async (to) => {\n    var _a, _b;\n    if (toValue(options.disabled))\n      return;\n    const id = ++currentId;\n    if (options.delay)\n      await promiseTimeout(toValue(options.delay));\n    if (id !== currentId)\n      return;\n    const toVal = Array.isArray(to) ? to.map(toValue) : toValue(to);\n    (_a = options.onStarted) == null ? void 0 : _a.call(options);\n    await executeTransition(outputRef, outputRef.value, toVal, {\n      ...options,\n      abort: () => {\n        var _a2;\n        return id !== currentId || ((_a2 = options.abort) == null ? void 0 : _a2.call(options));\n      }\n    });\n    (_b = options.onFinished) == null ? void 0 : _b.call(options);\n  }, { deep: true });\n  watch(() => toValue(options.disabled), (disabled) => {\n    if (disabled) {\n      currentId++;\n      outputRef.value = sourceVal();\n    }\n  });\n  tryOnScopeDispose(() => {\n    currentId++;\n  });\n  return computed(() => toValue(options.disabled) ? sourceVal() : outputRef.value);\n}\n\nfunction useUrlSearchParams(mode = \"history\", options = {}) {\n  const {\n    initialValue = {},\n    removeNullishValues = true,\n    removeFalsyValues = false,\n    write: enableWrite = true,\n    writeMode = \"replace\",\n    window = defaultWindow,\n    stringify = (params) => params.toString()\n  } = options;\n  if (!window)\n    return reactive(initialValue);\n  const state = reactive({});\n  function getRawParams() {\n    if (mode === \"history\") {\n      return window.location.search || \"\";\n    } else if (mode === \"hash\") {\n      const hash = window.location.hash || \"\";\n      const index = hash.indexOf(\"?\");\n      return index > 0 ? hash.slice(index) : \"\";\n    } else {\n      return (window.location.hash || \"\").replace(/^#/, \"\");\n    }\n  }\n  function constructQuery(params) {\n    const stringified = stringify(params);\n    if (mode === \"history\")\n      return `${stringified ? `?${stringified}` : \"\"}${window.location.hash || \"\"}`;\n    if (mode === \"hash-params\")\n      return `${window.location.search || \"\"}${stringified ? `#${stringified}` : \"\"}`;\n    const hash = window.location.hash || \"#\";\n    const index = hash.indexOf(\"?\");\n    if (index > 0)\n      return `${window.location.search || \"\"}${hash.slice(0, index)}${stringified ? `?${stringified}` : \"\"}`;\n    return `${window.location.search || \"\"}${hash}${stringified ? `?${stringified}` : \"\"}`;\n  }\n  function read() {\n    return new URLSearchParams(getRawParams());\n  }\n  function updateState(params) {\n    const unusedKeys = new Set(Object.keys(state));\n    for (const key of params.keys()) {\n      const paramsForKey = params.getAll(key);\n      state[key] = paramsForKey.length > 1 ? paramsForKey : params.get(key) || \"\";\n      unusedKeys.delete(key);\n    }\n    Array.from(unusedKeys).forEach((key) => delete state[key]);\n  }\n  const { pause, resume } = pausableWatch(\n    state,\n    () => {\n      const params = new URLSearchParams(\"\");\n      Object.keys(state).forEach((key) => {\n        const mapEntry = state[key];\n        if (Array.isArray(mapEntry))\n          mapEntry.forEach((value) => params.append(key, value));\n        else if (removeNullishValues && mapEntry == null)\n          params.delete(key);\n        else if (removeFalsyValues && !mapEntry)\n          params.delete(key);\n        else\n          params.set(key, mapEntry);\n      });\n      write(params, false);\n    },\n    { deep: true }\n  );\n  function write(params, shouldUpdate, shouldWriteHistory = true) {\n    pause();\n    if (shouldUpdate)\n      updateState(params);\n    if (writeMode === \"replace\") {\n      window.history.replaceState(\n        window.history.state,\n        window.document.title,\n        window.location.pathname + constructQuery(params)\n      );\n    } else {\n      if (shouldWriteHistory) {\n        window.history.pushState(\n          window.history.state,\n          window.document.title,\n          window.location.pathname + constructQuery(params)\n        );\n      }\n    }\n    nextTick(() => resume());\n  }\n  function onChanged() {\n    if (!enableWrite)\n      return;\n    write(read(), true, false);\n  }\n  const listenerOptions = { passive: true };\n  useEventListener(window, \"popstate\", onChanged, listenerOptions);\n  if (mode !== \"history\")\n    useEventListener(window, \"hashchange\", onChanged, listenerOptions);\n  const initial = read();\n  if (initial.keys().next().value)\n    updateState(initial);\n  else\n    Object.assign(state, initialValue);\n  return state;\n}\n\nfunction useUserMedia(options = {}) {\n  var _a, _b;\n  const enabled = shallowRef((_a = options.enabled) != null ? _a : false);\n  const autoSwitch = shallowRef((_b = options.autoSwitch) != null ? _b : true);\n  const constraints = ref(options.constraints);\n  const { navigator = defaultNavigator } = options;\n  const isSupported = useSupported(() => {\n    var _a2;\n    return (_a2 = navigator == null ? void 0 : navigator.mediaDevices) == null ? void 0 : _a2.getUserMedia;\n  });\n  const stream = shallowRef();\n  function getDeviceOptions(type) {\n    switch (type) {\n      case \"video\": {\n        if (constraints.value)\n          return constraints.value.video || false;\n        break;\n      }\n      case \"audio\": {\n        if (constraints.value)\n          return constraints.value.audio || false;\n        break;\n      }\n    }\n  }\n  async function _start() {\n    if (!isSupported.value || stream.value)\n      return;\n    stream.value = await navigator.mediaDevices.getUserMedia({\n      video: getDeviceOptions(\"video\"),\n      audio: getDeviceOptions(\"audio\")\n    });\n    return stream.value;\n  }\n  function _stop() {\n    var _a2;\n    (_a2 = stream.value) == null ? void 0 : _a2.getTracks().forEach((t) => t.stop());\n    stream.value = void 0;\n  }\n  function stop() {\n    _stop();\n    enabled.value = false;\n  }\n  async function start() {\n    await _start();\n    if (stream.value)\n      enabled.value = true;\n    return stream.value;\n  }\n  async function restart() {\n    _stop();\n    return await start();\n  }\n  watch(\n    enabled,\n    (v) => {\n      if (v)\n        _start();\n      else _stop();\n    },\n    { immediate: true }\n  );\n  watch(\n    constraints,\n    () => {\n      if (autoSwitch.value && stream.value)\n        restart();\n    },\n    { immediate: true }\n  );\n  tryOnScopeDispose(() => {\n    stop();\n  });\n  return {\n    isSupported,\n    stream,\n    start,\n    stop,\n    restart,\n    constraints,\n    enabled,\n    autoSwitch\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useVModel(props, key, emit, options = {}) {\n  var _a, _b, _c;\n  const {\n    clone = false,\n    passive = false,\n    eventName,\n    deep = false,\n    defaultValue,\n    shouldEmit\n  } = options;\n  const vm = getCurrentInstance();\n  const _emit = emit || (vm == null ? void 0 : vm.emit) || ((_a = vm == null ? void 0 : vm.$emit) == null ? void 0 : _a.bind(vm)) || ((_c = (_b = vm == null ? void 0 : vm.proxy) == null ? void 0 : _b.$emit) == null ? void 0 : _c.bind(vm == null ? void 0 : vm.proxy));\n  let event = eventName;\n  if (!key) {\n    key = \"modelValue\";\n  }\n  event = event || `update:${key.toString()}`;\n  const cloneFn = (val) => !clone ? val : typeof clone === \"function\" ? clone(val) : cloneFnJSON(val);\n  const getValue = () => isDef(props[key]) ? cloneFn(props[key]) : defaultValue;\n  const triggerEmit = (value) => {\n    if (shouldEmit) {\n      if (shouldEmit(value))\n        _emit(event, value);\n    } else {\n      _emit(event, value);\n    }\n  };\n  if (passive) {\n    const initialValue = getValue();\n    const proxy = ref(initialValue);\n    let isUpdating = false;\n    watch(\n      () => props[key],\n      (v) => {\n        if (!isUpdating) {\n          isUpdating = true;\n          proxy.value = cloneFn(v);\n          nextTick(() => isUpdating = false);\n        }\n      }\n    );\n    watch(\n      proxy,\n      (v) => {\n        if (!isUpdating && (v !== props[key] || deep))\n          triggerEmit(v);\n      },\n      { deep }\n    );\n    return proxy;\n  } else {\n    return computed({\n      get() {\n        return getValue();\n      },\n      set(value) {\n        triggerEmit(value);\n      }\n    });\n  }\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useVModels(props, emit, options = {}) {\n  const ret = {};\n  for (const key in props) {\n    ret[key] = useVModel(\n      props,\n      key,\n      emit,\n      options\n    );\n  }\n  return ret;\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useVibrate(options) {\n  const {\n    pattern = [],\n    interval = 0,\n    navigator = defaultNavigator\n  } = options || {};\n  const isSupported = useSupported(() => typeof navigator !== \"undefined\" && \"vibrate\" in navigator);\n  const patternRef = toRef(pattern);\n  let intervalControls;\n  const vibrate = (pattern2 = patternRef.value) => {\n    if (isSupported.value)\n      navigator.vibrate(pattern2);\n  };\n  const stop = () => {\n    if (isSupported.value)\n      navigator.vibrate(0);\n    intervalControls == null ? void 0 : intervalControls.pause();\n  };\n  if (interval > 0) {\n    intervalControls = useIntervalFn(\n      vibrate,\n      interval,\n      {\n        immediate: false,\n        immediateCallback: false\n      }\n    );\n  }\n  return {\n    isSupported,\n    pattern,\n    intervalControls,\n    vibrate,\n    stop\n  };\n}\n\nfunction useVirtualList(list, options) {\n  const { containerStyle, wrapperProps, scrollTo, calculateRange, currentList, containerRef } = \"itemHeight\" in options ? useVerticalVirtualList(options, list) : useHorizontalVirtualList(options, list);\n  return {\n    list: currentList,\n    scrollTo,\n    containerProps: {\n      ref: containerRef,\n      onScroll: () => {\n        calculateRange();\n      },\n      style: containerStyle\n    },\n    wrapperProps\n  };\n}\nfunction useVirtualListResources(list) {\n  const containerRef = shallowRef(null);\n  const size = useElementSize(containerRef);\n  const currentList = ref([]);\n  const source = shallowRef(list);\n  const state = ref({ start: 0, end: 10 });\n  return { state, source, currentList, size, containerRef };\n}\nfunction createGetViewCapacity(state, source, itemSize) {\n  return (containerSize) => {\n    if (typeof itemSize === \"number\")\n      return Math.ceil(containerSize / itemSize);\n    const { start = 0 } = state.value;\n    let sum = 0;\n    let capacity = 0;\n    for (let i = start; i < source.value.length; i++) {\n      const size = itemSize(i);\n      sum += size;\n      capacity = i;\n      if (sum > containerSize)\n        break;\n    }\n    return capacity - start;\n  };\n}\nfunction createGetOffset(source, itemSize) {\n  return (scrollDirection) => {\n    if (typeof itemSize === \"number\")\n      return Math.floor(scrollDirection / itemSize) + 1;\n    let sum = 0;\n    let offset = 0;\n    for (let i = 0; i < source.value.length; i++) {\n      const size = itemSize(i);\n      sum += size;\n      if (sum >= scrollDirection) {\n        offset = i;\n        break;\n      }\n    }\n    return offset + 1;\n  };\n}\nfunction createCalculateRange(type, overscan, getOffset, getViewCapacity, { containerRef, state, currentList, source }) {\n  return () => {\n    const element = containerRef.value;\n    if (element) {\n      const offset = getOffset(type === \"vertical\" ? element.scrollTop : element.scrollLeft);\n      const viewCapacity = getViewCapacity(type === \"vertical\" ? element.clientHeight : element.clientWidth);\n      const from = offset - overscan;\n      const to = offset + viewCapacity + overscan;\n      state.value = {\n        start: from < 0 ? 0 : from,\n        end: to > source.value.length ? source.value.length : to\n      };\n      currentList.value = source.value.slice(state.value.start, state.value.end).map((ele, index) => ({\n        data: ele,\n        index: index + state.value.start\n      }));\n    }\n  };\n}\nfunction createGetDistance(itemSize, source) {\n  return (index) => {\n    if (typeof itemSize === \"number\") {\n      const size2 = index * itemSize;\n      return size2;\n    }\n    const size = source.value.slice(0, index).reduce((sum, _, i) => sum + itemSize(i), 0);\n    return size;\n  };\n}\nfunction useWatchForSizes(size, list, containerRef, calculateRange) {\n  watch([size.width, size.height, () => toValue(list), containerRef], () => {\n    calculateRange();\n  });\n}\nfunction createComputedTotalSize(itemSize, source) {\n  return computed(() => {\n    if (typeof itemSize === \"number\")\n      return source.value.length * itemSize;\n    return source.value.reduce((sum, _, index) => sum + itemSize(index), 0);\n  });\n}\nconst scrollToDictionaryForElementScrollKey = {\n  horizontal: \"scrollLeft\",\n  vertical: \"scrollTop\"\n};\nfunction createScrollTo(type, calculateRange, getDistance, containerRef) {\n  return (index) => {\n    if (containerRef.value) {\n      containerRef.value[scrollToDictionaryForElementScrollKey[type]] = getDistance(index);\n      calculateRange();\n    }\n  };\n}\nfunction useHorizontalVirtualList(options, list) {\n  const resources = useVirtualListResources(list);\n  const { state, source, currentList, size, containerRef } = resources;\n  const containerStyle = { overflowX: \"auto\" };\n  const { itemWidth, overscan = 5 } = options;\n  const getViewCapacity = createGetViewCapacity(state, source, itemWidth);\n  const getOffset = createGetOffset(source, itemWidth);\n  const calculateRange = createCalculateRange(\"horizontal\", overscan, getOffset, getViewCapacity, resources);\n  const getDistanceLeft = createGetDistance(itemWidth, source);\n  const offsetLeft = computed(() => getDistanceLeft(state.value.start));\n  const totalWidth = createComputedTotalSize(itemWidth, source);\n  useWatchForSizes(size, list, containerRef, calculateRange);\n  const scrollTo = createScrollTo(\"horizontal\", calculateRange, getDistanceLeft, containerRef);\n  const wrapperProps = computed(() => {\n    return {\n      style: {\n        height: \"100%\",\n        width: `${totalWidth.value - offsetLeft.value}px`,\n        marginLeft: `${offsetLeft.value}px`,\n        display: \"flex\"\n      }\n    };\n  });\n  return {\n    scrollTo,\n    calculateRange,\n    wrapperProps,\n    containerStyle,\n    currentList,\n    containerRef\n  };\n}\nfunction useVerticalVirtualList(options, list) {\n  const resources = useVirtualListResources(list);\n  const { state, source, currentList, size, containerRef } = resources;\n  const containerStyle = { overflowY: \"auto\" };\n  const { itemHeight, overscan = 5 } = options;\n  const getViewCapacity = createGetViewCapacity(state, source, itemHeight);\n  const getOffset = createGetOffset(source, itemHeight);\n  const calculateRange = createCalculateRange(\"vertical\", overscan, getOffset, getViewCapacity, resources);\n  const getDistanceTop = createGetDistance(itemHeight, source);\n  const offsetTop = computed(() => getDistanceTop(state.value.start));\n  const totalHeight = createComputedTotalSize(itemHeight, source);\n  useWatchForSizes(size, list, containerRef, calculateRange);\n  const scrollTo = createScrollTo(\"vertical\", calculateRange, getDistanceTop, containerRef);\n  const wrapperProps = computed(() => {\n    return {\n      style: {\n        width: \"100%\",\n        height: `${totalHeight.value - offsetTop.value}px`,\n        marginTop: `${offsetTop.value}px`\n      }\n    };\n  });\n  return {\n    calculateRange,\n    scrollTo,\n    containerStyle,\n    wrapperProps,\n    currentList,\n    containerRef\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useWakeLock(options = {}) {\n  const {\n    navigator = defaultNavigator,\n    document = defaultDocument\n  } = options;\n  const requestedType = shallowRef(false);\n  const sentinel = shallowRef(null);\n  const documentVisibility = useDocumentVisibility({ document });\n  const isSupported = useSupported(() => navigator && \"wakeLock\" in navigator);\n  const isActive = computed(() => !!sentinel.value && documentVisibility.value === \"visible\");\n  if (isSupported.value) {\n    useEventListener(sentinel, \"release\", () => {\n      var _a, _b;\n      requestedType.value = (_b = (_a = sentinel.value) == null ? void 0 : _a.type) != null ? _b : false;\n    }, { passive: true });\n    whenever(\n      () => documentVisibility.value === \"visible\" && (document == null ? void 0 : document.visibilityState) === \"visible\" && requestedType.value,\n      (type) => {\n        requestedType.value = false;\n        forceRequest(type);\n      }\n    );\n  }\n  async function forceRequest(type) {\n    var _a;\n    await ((_a = sentinel.value) == null ? void 0 : _a.release());\n    sentinel.value = isSupported.value ? await navigator.wakeLock.request(type) : null;\n  }\n  async function request(type) {\n    if (documentVisibility.value === \"visible\")\n      await forceRequest(type);\n    else\n      requestedType.value = type;\n  }\n  async function release() {\n    requestedType.value = false;\n    const s = sentinel.value;\n    sentinel.value = null;\n    await (s == null ? void 0 : s.release());\n  }\n  return {\n    sentinel,\n    isSupported,\n    isActive,\n    request,\n    forceRequest,\n    release\n  };\n}\n\nfunction useWebNotification(options = {}) {\n  const {\n    window = defaultWindow,\n    requestPermissions: _requestForPermissions = true\n  } = options;\n  const defaultWebNotificationOptions = options;\n  const isSupported = useSupported(() => {\n    if (!window || !(\"Notification\" in window))\n      return false;\n    if (Notification.permission === \"granted\")\n      return true;\n    try {\n      const notification2 = new Notification(\"\");\n      notification2.onshow = () => {\n        notification2.close();\n      };\n    } catch (e) {\n      if (e.name === \"TypeError\")\n        return false;\n    }\n    return true;\n  });\n  const permissionGranted = shallowRef(isSupported.value && \"permission\" in Notification && Notification.permission === \"granted\");\n  const notification = ref(null);\n  const ensurePermissions = async () => {\n    if (!isSupported.value)\n      return;\n    if (!permissionGranted.value && Notification.permission !== \"denied\") {\n      const result = await Notification.requestPermission();\n      if (result === \"granted\")\n        permissionGranted.value = true;\n    }\n    return permissionGranted.value;\n  };\n  const { on: onClick, trigger: clickTrigger } = createEventHook();\n  const { on: onShow, trigger: showTrigger } = createEventHook();\n  const { on: onError, trigger: errorTrigger } = createEventHook();\n  const { on: onClose, trigger: closeTrigger } = createEventHook();\n  const show = async (overrides) => {\n    if (!isSupported.value || !permissionGranted.value)\n      return;\n    const options2 = Object.assign({}, defaultWebNotificationOptions, overrides);\n    notification.value = new Notification(options2.title || \"\", options2);\n    notification.value.onclick = clickTrigger;\n    notification.value.onshow = showTrigger;\n    notification.value.onerror = errorTrigger;\n    notification.value.onclose = closeTrigger;\n    return notification.value;\n  };\n  const close = () => {\n    if (notification.value)\n      notification.value.close();\n    notification.value = null;\n  };\n  if (_requestForPermissions)\n    tryOnMounted(ensurePermissions);\n  tryOnScopeDispose(close);\n  if (isSupported.value && window) {\n    const document = window.document;\n    useEventListener(document, \"visibilitychange\", (e) => {\n      e.preventDefault();\n      if (document.visibilityState === \"visible\") {\n        close();\n      }\n    });\n  }\n  return {\n    isSupported,\n    notification,\n    ensurePermissions,\n    permissionGranted,\n    show,\n    close,\n    onClick,\n    onShow,\n    onError,\n    onClose\n  };\n}\n\nconst DEFAULT_PING_MESSAGE = \"ping\";\nfunction resolveNestedOptions(options) {\n  if (options === true)\n    return {};\n  return options;\n}\nfunction useWebSocket(url, options = {}) {\n  const {\n    onConnected,\n    onDisconnected,\n    onError,\n    onMessage,\n    immediate = true,\n    autoConnect = true,\n    autoClose = true,\n    protocols = []\n  } = options;\n  const data = ref(null);\n  const status = shallowRef(\"CLOSED\");\n  const wsRef = ref();\n  const urlRef = toRef(url);\n  let heartbeatPause;\n  let heartbeatResume;\n  let explicitlyClosed = false;\n  let retried = 0;\n  let bufferedData = [];\n  let retryTimeout;\n  let pongTimeoutWait;\n  const _sendBuffer = () => {\n    if (bufferedData.length && wsRef.value && status.value === \"OPEN\") {\n      for (const buffer of bufferedData)\n        wsRef.value.send(buffer);\n      bufferedData = [];\n    }\n  };\n  const resetRetry = () => {\n    if (retryTimeout != null) {\n      clearTimeout(retryTimeout);\n      retryTimeout = void 0;\n    }\n  };\n  const resetHeartbeat = () => {\n    clearTimeout(pongTimeoutWait);\n    pongTimeoutWait = void 0;\n  };\n  const close = (code = 1e3, reason) => {\n    resetRetry();\n    if (!isClient && !isWorker || !wsRef.value)\n      return;\n    explicitlyClosed = true;\n    resetHeartbeat();\n    heartbeatPause == null ? void 0 : heartbeatPause();\n    wsRef.value.close(code, reason);\n    wsRef.value = void 0;\n  };\n  const send = (data2, useBuffer = true) => {\n    if (!wsRef.value || status.value !== \"OPEN\") {\n      if (useBuffer)\n        bufferedData.push(data2);\n      return false;\n    }\n    _sendBuffer();\n    wsRef.value.send(data2);\n    return true;\n  };\n  const _init = () => {\n    if (explicitlyClosed || typeof urlRef.value === \"undefined\")\n      return;\n    const ws = new WebSocket(urlRef.value, protocols);\n    wsRef.value = ws;\n    status.value = \"CONNECTING\";\n    ws.onopen = () => {\n      status.value = \"OPEN\";\n      retried = 0;\n      onConnected == null ? void 0 : onConnected(ws);\n      heartbeatResume == null ? void 0 : heartbeatResume();\n      _sendBuffer();\n    };\n    ws.onclose = (ev) => {\n      status.value = \"CLOSED\";\n      resetHeartbeat();\n      heartbeatPause == null ? void 0 : heartbeatPause();\n      onDisconnected == null ? void 0 : onDisconnected(ws, ev);\n      if (!explicitlyClosed && options.autoReconnect && (wsRef.value == null || ws === wsRef.value)) {\n        const {\n          retries = -1,\n          delay = 1e3,\n          onFailed\n        } = resolveNestedOptions(options.autoReconnect);\n        const checkRetires = typeof retries === \"function\" ? retries : () => typeof retries === \"number\" && (retries < 0 || retried < retries);\n        if (checkRetires(retried)) {\n          retried += 1;\n          retryTimeout = setTimeout(_init, delay);\n        } else {\n          onFailed == null ? void 0 : onFailed();\n        }\n      }\n    };\n    ws.onerror = (e) => {\n      onError == null ? void 0 : onError(ws, e);\n    };\n    ws.onmessage = (e) => {\n      if (options.heartbeat) {\n        resetHeartbeat();\n        const {\n          message = DEFAULT_PING_MESSAGE,\n          responseMessage = message\n        } = resolveNestedOptions(options.heartbeat);\n        if (e.data === toValue(responseMessage))\n          return;\n      }\n      data.value = e.data;\n      onMessage == null ? void 0 : onMessage(ws, e);\n    };\n  };\n  if (options.heartbeat) {\n    const {\n      message = DEFAULT_PING_MESSAGE,\n      interval = 1e3,\n      pongTimeout = 1e3\n    } = resolveNestedOptions(options.heartbeat);\n    const { pause, resume } = useIntervalFn(\n      () => {\n        send(toValue(message), false);\n        if (pongTimeoutWait != null)\n          return;\n        pongTimeoutWait = setTimeout(() => {\n          close();\n          explicitlyClosed = false;\n        }, pongTimeout);\n      },\n      interval,\n      { immediate: false }\n    );\n    heartbeatPause = pause;\n    heartbeatResume = resume;\n  }\n  if (autoClose) {\n    if (isClient)\n      useEventListener(\"beforeunload\", () => close(), { passive: true });\n    tryOnScopeDispose(close);\n  }\n  const open = () => {\n    if (!isClient && !isWorker)\n      return;\n    close();\n    explicitlyClosed = false;\n    retried = 0;\n    _init();\n  };\n  if (immediate)\n    open();\n  if (autoConnect)\n    watch(urlRef, open);\n  return {\n    data,\n    status,\n    close,\n    send,\n    open,\n    ws: wsRef\n  };\n}\n\nfunction useWebWorker(arg0, workerOptions, options) {\n  const {\n    window = defaultWindow\n  } = options != null ? options : {};\n  const data = ref(null);\n  const worker = shallowRef();\n  const post = (...args) => {\n    if (!worker.value)\n      return;\n    worker.value.postMessage(...args);\n  };\n  const terminate = function terminate2() {\n    if (!worker.value)\n      return;\n    worker.value.terminate();\n  };\n  if (window) {\n    if (typeof arg0 === \"string\")\n      worker.value = new Worker(arg0, workerOptions);\n    else if (typeof arg0 === \"function\")\n      worker.value = arg0();\n    else\n      worker.value = arg0;\n    worker.value.onmessage = (e) => {\n      data.value = e.data;\n    };\n    tryOnScopeDispose(() => {\n      if (worker.value)\n        worker.value.terminate();\n    });\n  }\n  return {\n    data,\n    post,\n    terminate,\n    worker\n  };\n}\n\nfunction depsParser(deps, localDeps) {\n  if (deps.length === 0 && localDeps.length === 0)\n    return \"\";\n  const depsString = deps.map((dep) => `'${dep}'`).toString();\n  const depsFunctionString = localDeps.filter((dep) => typeof dep === \"function\").map((fn) => {\n    const str = fn.toString();\n    if (str.trim().startsWith(\"function\")) {\n      return str;\n    } else {\n      const name = fn.name;\n      return `const ${name} = ${str}`;\n    }\n  }).join(\";\");\n  const importString = `importScripts(${depsString});`;\n  return `${depsString.trim() === \"\" ? \"\" : importString} ${depsFunctionString}`;\n}\n\nfunction jobRunner(userFunc) {\n  return (e) => {\n    const userFuncArgs = e.data[0];\n    return Promise.resolve(userFunc.apply(void 0, userFuncArgs)).then((result) => {\n      postMessage([\"SUCCESS\", result]);\n    }).catch((error) => {\n      postMessage([\"ERROR\", error]);\n    });\n  };\n}\n\nfunction createWorkerBlobUrl(fn, deps, localDeps) {\n  const blobCode = `${depsParser(deps, localDeps)}; onmessage=(${jobRunner})(${fn})`;\n  const blob = new Blob([blobCode], { type: \"text/javascript\" });\n  const url = URL.createObjectURL(blob);\n  return url;\n}\n\nfunction useWebWorkerFn(fn, options = {}) {\n  const {\n    dependencies = [],\n    localDependencies = [],\n    timeout,\n    window = defaultWindow\n  } = options;\n  const worker = ref();\n  const workerStatus = shallowRef(\"PENDING\");\n  const promise = ref({});\n  const timeoutId = shallowRef();\n  const workerTerminate = (status = \"PENDING\") => {\n    if (worker.value && worker.value._url && window) {\n      worker.value.terminate();\n      URL.revokeObjectURL(worker.value._url);\n      promise.value = {};\n      worker.value = void 0;\n      window.clearTimeout(timeoutId.value);\n      workerStatus.value = status;\n    }\n  };\n  workerTerminate();\n  tryOnScopeDispose(workerTerminate);\n  const generateWorker = () => {\n    const blobUrl = createWorkerBlobUrl(fn, dependencies, localDependencies);\n    const newWorker = new Worker(blobUrl);\n    newWorker._url = blobUrl;\n    newWorker.onmessage = (e) => {\n      const { resolve = () => {\n      }, reject = () => {\n      } } = promise.value;\n      const [status, result] = e.data;\n      switch (status) {\n        case \"SUCCESS\":\n          resolve(result);\n          workerTerminate(status);\n          break;\n        default:\n          reject(result);\n          workerTerminate(\"ERROR\");\n          break;\n      }\n    };\n    newWorker.onerror = (e) => {\n      const { reject = () => {\n      } } = promise.value;\n      e.preventDefault();\n      reject(e);\n      workerTerminate(\"ERROR\");\n    };\n    if (timeout) {\n      timeoutId.value = setTimeout(\n        () => workerTerminate(\"TIMEOUT_EXPIRED\"),\n        timeout\n      );\n    }\n    return newWorker;\n  };\n  const callWorker = (...fnArgs) => new Promise((resolve, reject) => {\n    var _a;\n    promise.value = {\n      resolve,\n      reject\n    };\n    (_a = worker.value) == null ? void 0 : _a.postMessage([[...fnArgs]]);\n    workerStatus.value = \"RUNNING\";\n  });\n  const workerFn = (...fnArgs) => {\n    if (workerStatus.value === \"RUNNING\") {\n      console.error(\n        \"[useWebWorkerFn] You can only run one instance of the worker at a time.\"\n      );\n      return Promise.reject();\n    }\n    worker.value = generateWorker();\n    return callWorker(...fnArgs);\n  };\n  return {\n    workerFn,\n    workerStatus,\n    workerTerminate\n  };\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useWindowFocus(options = {}) {\n  const { window = defaultWindow } = options;\n  if (!window)\n    return shallowRef(false);\n  const focused = shallowRef(window.document.hasFocus());\n  const listenerOptions = { passive: true };\n  useEventListener(window, \"blur\", () => {\n    focused.value = false;\n  }, listenerOptions);\n  useEventListener(window, \"focus\", () => {\n    focused.value = true;\n  }, listenerOptions);\n  return focused;\n}\n\nfunction useWindowScroll(options = {}) {\n  const { window = defaultWindow, ...rest } = options;\n  return useScroll(window, rest);\n}\n\n// @__NO_SIDE_EFFECTS__\nfunction useWindowSize(options = {}) {\n  const {\n    window = defaultWindow,\n    initialWidth = Number.POSITIVE_INFINITY,\n    initialHeight = Number.POSITIVE_INFINITY,\n    listenOrientation = true,\n    includeScrollbar = true,\n    type = \"inner\"\n  } = options;\n  const width = shallowRef(initialWidth);\n  const height = shallowRef(initialHeight);\n  const update = () => {\n    if (window) {\n      if (type === \"outer\") {\n        width.value = window.outerWidth;\n        height.value = window.outerHeight;\n      } else if (type === \"visual\" && window.visualViewport) {\n        const { width: visualViewportWidth, height: visualViewportHeight, scale } = window.visualViewport;\n        width.value = Math.round(visualViewportWidth * scale);\n        height.value = Math.round(visualViewportHeight * scale);\n      } else if (includeScrollbar) {\n        width.value = window.innerWidth;\n        height.value = window.innerHeight;\n      } else {\n        width.value = window.document.documentElement.clientWidth;\n        height.value = window.document.documentElement.clientHeight;\n      }\n    }\n  };\n  update();\n  tryOnMounted(update);\n  const listenerOptions = { passive: true };\n  useEventListener(\"resize\", update, listenerOptions);\n  if (window && type === \"visual\" && window.visualViewport) {\n    useEventListener(window.visualViewport, \"resize\", update, listenerOptions);\n  }\n  if (listenOrientation) {\n    const matches = useMediaQuery(\"(orientation: portrait)\");\n    watch(matches, () => update());\n  }\n  return { width, height };\n}\n\nexport { DefaultMagicKeysAliasMap, StorageSerializers, TransitionPresets, computedAsync as asyncComputed, breakpointsAntDesign, breakpointsBootstrapV5, breakpointsElement, breakpointsMasterCss, breakpointsPrimeFlex, breakpointsQuasar, breakpointsSematic, breakpointsTailwind, breakpointsVuetify, breakpointsVuetifyV2, breakpointsVuetifyV3, cloneFnJSON, computedAsync, computedInject, createFetch, createReusableTemplate, createTemplatePromise, createUnrefFn, customStorageEventName, defaultDocument, defaultLocation, defaultNavigator, defaultWindow, executeTransition, formatTimeAgo, formatTimeAgoIntl, formatTimeAgoIntlParts, getSSRHandler, mapGamepadToXbox360Controller, onClickOutside, onElementRemoval, onKeyDown, onKeyPressed, onKeyStroke, onKeyUp, onLongPress, onStartTyping, provideSSRWidth, setSSRHandler, templateRef, unrefElement, useActiveElement, useAnimate, useAsyncQueue, useAsyncState, useBase64, useBattery, useBluetooth, useBreakpoints, useBroadcastChannel, useBrowserLocation, useCached, useClipboard, useClipboardItems, useCloned, useColorMode, useConfirmDialog, useCountdown, useCssVar, useCurrentElement, useCycleList, useDark, useDebouncedRefHistory, useDeviceMotion, useDeviceOrientation, useDevicePixelRatio, useDevicesList, useDisplayMedia, useDocumentVisibility, useDraggable, useDropZone, useElementBounding, useElementByPoint, useElementHover, useElementSize, useElementVisibility, useEventBus, useEventListener, useEventSource, useEyeDropper, useFavicon, useFetch, useFileDialog, useFileSystemAccess, useFocus, useFocusWithin, useFps, useFullscreen, useGamepad, useGeolocation, useIdle, useImage, useInfiniteScroll, useIntersectionObserver, useKeyModifier, useLocalStorage, useMagicKeys, useManualRefHistory, useMediaControls, useMediaQuery, useMemoize, useMemory, useMounted, useMouse, useMouseInElement, useMousePressed, useMutationObserver, useNavigatorLanguage, useNetwork, useNow, useObjectUrl, useOffsetPagination, useOnline, usePageLeave, useParallax, useParentElement, usePerformanceObserver, usePermission, usePointer, usePointerLock, usePointerSwipe, usePreferredColorScheme, usePreferredContrast, usePreferredDark, usePreferredLanguages, usePreferredReducedMotion, usePreferredReducedTransparency, usePrevious, useRafFn, useRefHistory, useResizeObserver, useSSRWidth, useScreenOrientation, useScreenSafeArea, useScriptTag, useScroll, useScrollLock, useSessionStorage, useShare, useSorted, useSpeechRecognition, useSpeechSynthesis, useStepper, useStorage, useStorageAsync, useStyleTag, useSupported, useSwipe, useTemplateRefsList, useTextDirection, useTextSelection, useTextareaAutosize, useThrottledRefHistory, useTimeAgo, useTimeAgoIntl, useTimeoutPoll, useTimestamp, useTitle, useTransition, useUrlSearchParams, useUserMedia, useVModel, useVModels, useVibrate, useVirtualList, useWakeLock, useWebNotification, useWebSocket, useWebWorker, useWebWorkerFn, useWindowFocus, useWindowScroll, useWindowSize };\n","/**\n *  Store\n *  (getConfig/saveConfig)\n */\n\nimport { useStorage } from '@vueuse/core';\nimport { defineStore } from 'pinia';\nimport { computed, ref, watch } from 'vue';\nimport type {\n  ACUConfig,\n  ACUScriptVariables,\n  ButtonGroup,\n  CustomFont,\n  FloatingBallAnimation,\n  FloatingBallAppearance,\n  NavButtonConfig,\n} from '../types';\n\n/**  () */\nconst STORAGE_KEY_UI_CONFIG = 'acu_ui_config_v18';\n\n/**  ID -  */\nconst SCRIPT_ID = 'acu_visualizer_ui';\n\n/**  -  */\nexport const DEFAULT_BALL_APPEARANCE: FloatingBallAppearance = {\n  type: 'icon',\n  content: 'fa-layer-group',\n  size: 50,\n  notifyAnimation: 'ripple',\n  borderColor: '#ffffff',\n  borderOpacity: 40,\n  bgColor: '#ffffff',\n  bgOpacity: 25,\n};\n\n/**  */\nexport const NAV_BUTTONS: NavButtonConfig[] = [\n  { id: 'save', icon: 'fa-save', label: '' },\n  { id: 'saveAs', icon: 'fa-file-export', label: '' },\n  { id: 'undo', icon: 'fa-undo', label: '' },\n  { id: 'refresh', icon: 'fa-sync-alt', label: '' },\n  { id: 'manualUpdate', icon: 'fa-hand-sparkles', label: '' },\n  { id: 'purge', icon: 'fa-eraser', label: '' },\n  { id: 'pin', icon: 'fa-thumbtack', label: '' },\n  { id: 'toggle', icon: 'fa-compress', label: '' },\n  { id: 'openNative', icon: 'fa-external-link-alt', label: '' },\n  { id: 'collapseTab', icon: 'fa-box-open', label: 'Tab' },\n  { id: 'settings', icon: 'fa-cog', label: '' },\n];\n\n/**  ID  */\nexport type NavButtonId = (typeof NAV_BUTTONS)[number]['id'];\n\n/**  */\nconst DEFAULT_VISIBLE_BUTTONS = ['save', 'collapseTab', 'refresh', 'toggle', 'settings'];\n\n/**  */\nconst DEFAULT_BUTTON_ORDER = [\n  'save',\n  'collapseTab',\n  'refresh',\n  'toggle',\n  'settings',\n  'saveAs',\n  'undo',\n  'manualUpdate',\n  'purge',\n  'pin',\n  'openNative',\n];\n\n/**  */\nconst DEFAULT_BUTTON_GROUPS: ButtonGroup[] = [];\n\n/**  -  DEFAULT_CONFIG */\nexport const DEFAULT_CONFIG: ACUConfig = {\n  theme: 'retro',\n  fontFamily: 'default',\n  cardWidth: 280,\n  fontSize: 13,\n  itemsPerPage: 20,\n  highlightNew: true,\n  highlightColor: 'orange',\n  highlightManualColor: 'orange',\n  highlightAiColor: 'blue',\n  customTitleColor: false,\n  titleColor: 'orange',\n  layout: 'vertical',\n  limitLongText: true,\n  showDashboard: true,\n  showPagination: true,\n  lockPanel: false,\n  purgeConfirmation: true,\n  gridColumns: 0,\n  autoSave: false,\n  autoSaveDelay: 5000,\n  visibleButtons: DEFAULT_VISIBLE_BUTTONS,\n  buttonOrder: DEFAULT_BUTTON_ORDER,\n  buttonGroups: DEFAULT_BUTTON_GROUPS,\n  longPressDirectExec: false,\n  clearTableOnSwipe: true,\n  collapseTabBar: false,\n  mobileSafeAreaBottom: 50,\n};\n\n/**  */\nexport const THEMES = [\n  { id: 'retro', name: '', icon: 'fa-scroll' },\n  { id: 'dark', name: '', icon: 'fa-moon' },\n  { id: 'modern', name: '', icon: 'fa-sun' },\n  { id: 'forest', name: '', icon: 'fa-tree' },\n  { id: 'ocean', name: '', icon: 'fa-water' },\n  { id: 'cyber', name: '', icon: 'fa-bolt' },\n  { id: 'purple', name: '', icon: 'fa-magic' },\n] as const;\n\n/**  */\nexport const FONTS = [\n  { id: 'default', name: ' (Modern)', val: `'Segoe UI', 'Microsoft YaHei', sans-serif` },\n  { id: 'hanchan', name: '', val: `\"\", sans-serif` },\n  { id: 'maple', name: 'Maple Mono ()', val: `\"Maple Mono NF CN\", monospace` },\n  { id: 'huiwen', name: ' (Huiwen)', val: `\"Huiwen-mincho\", serif` },\n  { id: 'cooper', name: 'Cooper', val: `\"CooperZhengKai\", serif` },\n  { id: 'yffyt', name: 'YFFYT ()', val: `\"YFFYT\", sans-serif` },\n  { id: 'fusion', name: 'Fusion Pixel ()', val: `\"Fusion Pixel 12px M latin\", monospace` },\n  { id: 'wenkai', name: ' (WenKai)', val: `\"LXGW WenKai\", serif` },\n  { id: 'notosans', name: ' (Noto Sans)', val: `\"Noto Sans CJK\", sans-serif` },\n  { id: 'zhuque', name: ' (Zhuque)', val: `\"Zhuque Fangsong (technical preview)\", serif` },\n] as const;\n\n/**  */\nexport const HIGHLIGHT_COLORS = {\n  orange: { main: '#d35400', bg: 'rgba(211, 84, 0, 0.1)', name: '' },\n  red: { main: '#e74c3c', bg: 'rgba(231, 76, 60, 0.1)', name: '' },\n  blue: { main: '#3498db', bg: 'rgba(52, 152, 219, 0.1)', name: '' },\n  green: { main: '#27ae60', bg: 'rgba(39, 174, 96, 0.1)', name: '' },\n  purple: { main: '#9b59b6', bg: 'rgba(155, 89, 182, 0.1)', name: '' },\n  teal: { main: '#1abc9c', bg: 'rgba(26, 188, 156, 0.1)', name: '' },\n  pink: { main: '#e91e63', bg: 'rgba(233, 30, 99, 0.1)', name: '' },\n  lime: { main: '#82c91e', bg: 'rgba(130, 201, 30, 0.1)', name: '' },\n  indigo: { main: '#3f51b5', bg: 'rgba(63, 81, 181, 0.1)', name: '' },\n  cyan: { main: '#00bcd4', bg: 'rgba(0, 188, 212, 0.1)', name: '' },\n  brown: { main: '#795548', bg: 'rgba(121, 85, 72, 0.1)', name: '' },\n  grey: { main: '#607d8b', bg: 'rgba(96, 125, 139, 0.1)', name: '' },\n} as const;\n\nexport const useConfigStore = defineStore('acu-config', () => {\n  // ============================================================\n  //  -  useStorage  localStorage\n  // ============================================================\n\n  /**  -  */\n  const config = useStorage<ACUConfig>(STORAGE_KEY_UI_CONFIG, DEFAULT_CONFIG, localStorage, {\n    mergeDefaults: true, // \n  });\n\n  // ============================================================\n  // Getters\n  // ============================================================\n\n  /**  */\n  const theme = computed(() => config.value.theme);\n\n  /**  */\n  const fontFamily = computed(() => config.value.fontFamily);\n\n  /**  */\n  const fontFamilyValue = computed(() => {\n    const font = FONTS.find(f => f.id === config.value.fontFamily);\n    return font?.val || FONTS[0].val;\n  });\n\n  /**\n   *  hex \n   */\n  function hexToColorObj(hex: string): { main: string; bg: string; name: string } {\n    //  hex \n    const normalizedHex = hex.startsWith('#') ? hex : `#${hex}`;\n    //  (10% )\n    const r = parseInt(normalizedHex.slice(1, 3), 16);\n    const g = parseInt(normalizedHex.slice(3, 5), 16);\n    const b = parseInt(normalizedHex.slice(5, 7), 16);\n    return {\n      main: normalizedHex,\n      bg: `rgba(${r}, ${g}, ${b}, 0.1)`,\n      name: '',\n    };\n  }\n\n  /**  () */\n  const highlightColorObj = computed(() => {\n    return HIGHLIGHT_COLORS[config.value.highlightColor as keyof typeof HIGHLIGHT_COLORS] || HIGHLIGHT_COLORS.orange;\n  });\n\n  /**  */\n  const highlightManualColorObj = computed(() => {\n    //  hex \n    if (config.value.highlightManualColor === 'custom' && config.value.customHighlightManualHex) {\n      return hexToColorObj(config.value.customHighlightManualHex);\n    }\n    // \n    const colorKey = config.value.highlightManualColor || config.value.highlightColor;\n    return HIGHLIGHT_COLORS[colorKey as keyof typeof HIGHLIGHT_COLORS] || HIGHLIGHT_COLORS.orange;\n  });\n\n  /** AI */\n  const highlightAiColorObj = computed(() => {\n    //  hex \n    if (config.value.highlightAiColor === 'custom' && config.value.customHighlightAiHex) {\n      return hexToColorObj(config.value.customHighlightAiHex);\n    }\n    const colorKey = config.value.highlightAiColor || 'blue';\n    return HIGHLIGHT_COLORS[colorKey as keyof typeof HIGHLIGHT_COLORS] || HIGHLIGHT_COLORS.blue;\n  });\n\n  /**  */\n  const titleColorObj = computed(() => {\n    if (config.value.customTitleColor) {\n      //  hex \n      if (config.value.titleColor === 'custom' && config.value.customTitleHex) {\n        return hexToColorObj(config.value.customTitleHex);\n      }\n      return HIGHLIGHT_COLORS[config.value.titleColor as keyof typeof HIGHLIGHT_COLORS] || HIGHLIGHT_COLORS.orange;\n    }\n    return highlightManualColorObj.value;\n  });\n\n  /**  CSS  */\n  const gridColumnsCss = computed(() => {\n    return config.value.gridColumns && config.value.gridColumns > 0\n      ? `repeat(${config.value.gridColumns}, 1fr)`\n      : 'repeat(auto-fill, minmax(110px, 1fr))';\n  });\n\n  // ============================================================\n  // Actions\n  // ============================================================\n\n  /**\n   * \n   * @param updates \n   */\n  function updateConfig(updates: Partial<ACUConfig>) {\n    config.value = { ...config.value, ...updates };\n  }\n\n  /**\n   * \n   */\n  function resetConfig() {\n    config.value = { ...DEFAULT_CONFIG };\n  }\n\n  /**\n   * \n   * @param themeId  ID\n   */\n  function setTheme(themeId: string) {\n    updateConfig({ theme: themeId });\n  }\n\n  /**\n   * \n   * @param fontId  ID\n   */\n  function setFontFamily(fontId: string) {\n    updateConfig({ fontFamily: fontId });\n  }\n\n  /**\n   * \n   * @param layout \n   */\n  function setLayout(layout: 'vertical' | 'horizontal') {\n    updateConfig({ layout });\n  }\n\n  /**\n   *  (API)\n   * @param colorKey  key\n   */\n  function setHighlightColor(colorKey: string) {\n    updateConfig({ highlightColor: colorKey, highlightManualColor: colorKey });\n  }\n\n  /**\n   * \n   * @param colorKey  key\n   */\n  function setHighlightManualColor(colorKey: string) {\n    updateConfig({ highlightManualColor: colorKey, highlightColor: colorKey });\n  }\n\n  /**\n   * AI\n   * @param colorKey  key\n   */\n  function setHighlightAiColor(colorKey: string) {\n    updateConfig({ highlightAiColor: colorKey });\n  }\n\n  /**\n   * \n   * @param colorKey  key\n   */\n  function setTitleColor(colorKey: string) {\n    updateConfig({ titleColor: colorKey });\n  }\n\n  /**\n   * \n   */\n  function toggleHighlightNew() {\n    updateConfig({ highlightNew: !config.value.highlightNew });\n  }\n\n  /**\n   * \n   */\n  function toggleCustomTitleColor() {\n    updateConfig({ customTitleColor: !config.value.customTitleColor });\n  }\n\n  /**\n   * \n   */\n  function toggleShowDashboard() {\n    updateConfig({ showDashboard: !config.value.showDashboard });\n  }\n\n  /**\n   * \n   */\n  function toggleShowPagination() {\n    updateConfig({ showPagination: !config.value.showPagination });\n  }\n\n  /**\n   * \n   */\n  function toggleLockPanel() {\n    updateConfig({ lockPanel: !config.value.lockPanel });\n  }\n\n  /**\n   * \n   */\n  function toggleLimitLongText() {\n    updateConfig({ limitLongText: !config.value.limitLongText });\n  }\n\n  // ============================================================\n  //  Actions\n  // ============================================================\n\n  /**\n   * \n   * @param buttons  ID \n   */\n  function setVisibleButtons(buttons: string[]) {\n    config.value.visibleButtons = buttons;\n  }\n\n  /**\n   * \n   * @param order  ID \n   */\n  function setButtonOrder(order: string[]) {\n    config.value.buttonOrder = order;\n  }\n\n  /**\n   * \n   * @param buttonId  ID\n   */\n  function isButtonVisible(buttonId: string): boolean {\n    return config.value.visibleButtons.includes(buttonId);\n  }\n\n  /**\n   * \n   * @param buttonId  ID\n   */\n  function toggleButtonVisibility(buttonId: string) {\n    const current = [...config.value.visibleButtons];\n    const index = current.indexOf(buttonId);\n    if (index > -1) {\n      current.splice(index, 1);\n    } else {\n      current.push(buttonId);\n    }\n    config.value.visibleButtons = current;\n  }\n\n  /**\n   * \n   */\n  const sortedVisibleButtons = computed(() => {\n    const order = config.value.buttonOrder;\n    const visible = config.value.visibleButtons;\n    //  buttonOrder \n    return order.filter((id: string) => visible.includes(id));\n  });\n\n  /**\n   * \n   * - \n   * - \n   * -  hidden \n   */\n  const hiddenButtons = computed(() => {\n    const visible = config.value.visibleButtons;\n    const groups = config.value.buttonGroups || [];\n    const usedSecondaries = groups.map(g => g.secondaryId).filter(Boolean);\n\n    return NAV_BUTTONS.filter(btn => !btn.hidden && !visible.includes(btn.id) && !usedSecondaries.includes(btn.id));\n  });\n\n  /**\n   * \n   */\n  const hasHiddenButtons = computed(() => hiddenButtons.value.length > 0);\n\n  /**\n   * \n   * @param buttonId  ID\n   */\n  function getButtonConfig(buttonId: string): NavButtonConfig | undefined {\n    return NAV_BUTTONS.find(btn => btn.id === buttonId);\n  }\n\n  // ============================================================\n  //  Actions\n  // ============================================================\n\n  /**\n   * \n   */\n  const buttonGroups = computed(() => config.value.buttonGroups || []);\n\n  /**\n   * \n   */\n  const longPressDirectExec = computed(() => config.value.longPressDirectExec || false);\n\n  /**\n   * \n   * @param groups \n   */\n  function setButtonGroups(groups: ButtonGroup[]) {\n    config.value.buttonGroups = groups;\n  }\n\n  /**\n   * \n   * @param primaryId  ID\n   * @param secondaryId  ID\n   */\n  function addButtonGroup(primaryId: string, secondaryId: string) {\n    // \n    const groups = (config.value.buttonGroups || []).filter(\n      g => g.secondaryId !== secondaryId && g.primaryId !== primaryId,\n    );\n    // \n    groups.push({ primaryId, secondaryId });\n    config.value.buttonGroups = [...groups]; // \n    console.log('[ACU] addButtonGroup:', primaryId, '->', secondaryId, 'groups:', config.value.buttonGroups);\n  }\n\n  /**\n   * \n   * @param primaryId  ID\n   */\n  function removeButtonGroupSecondary(primaryId: string) {\n    const groups = (config.value.buttonGroups || []).filter(g => g.primaryId !== primaryId);\n    config.value.buttonGroups = [...groups]; // \n    console.log('[ACU] removeButtonGroupSecondary:', primaryId, 'groups:', config.value.buttonGroups);\n  }\n\n  /**\n   *  ID\n   * @param primaryId  ID\n   */\n  function getSecondaryButtonId(primaryId: string): string | null {\n    const group = (config.value.buttonGroups || []).find(g => g.primaryId === primaryId);\n    return group?.secondaryId || null;\n  }\n\n  /**\n   * \n   * @param buttonId  ID\n   */\n  function isSecondaryButton(buttonId: string): boolean {\n    return (config.value.buttonGroups || []).some(g => g.secondaryId === buttonId);\n  }\n\n  /**\n   * \n   */\n  function toggleLongPressDirectExec() {\n    config.value.longPressDirectExec = !config.value.longPressDirectExec;\n  }\n\n  /**\n   * \n   * @param value \n   */\n  function setLongPressDirectExec(value: boolean) {\n    config.value.longPressDirectExec = value;\n  }\n\n  /**\n   * \n   */\n  function resetButtonConfig() {\n    config.value.visibleButtons = [...DEFAULT_VISIBLE_BUTTONS];\n    config.value.buttonOrder = [...DEFAULT_BUTTON_ORDER];\n    config.value.buttonGroups = [...DEFAULT_BUTTON_GROUPS];\n    config.value.longPressDirectExec = false;\n  }\n\n  return {\n    // \n    config,\n\n    // Getters\n    theme,\n    fontFamily,\n    fontFamilyValue,\n    highlightColorObj,\n    highlightManualColorObj,\n    highlightAiColorObj,\n    titleColorObj,\n    gridColumnsCss,\n\n    // Actions\n    updateConfig,\n    resetConfig,\n    setTheme,\n    setFontFamily,\n    setLayout,\n    setHighlightColor,\n    setHighlightManualColor,\n    setHighlightAiColor,\n    setTitleColor,\n    toggleHighlightNew,\n    toggleCustomTitleColor,\n    toggleShowDashboard,\n    toggleShowPagination,\n    toggleLockPanel,\n    toggleLimitLongText,\n\n    // \n    setVisibleButtons,\n    setButtonOrder,\n    isButtonVisible,\n    toggleButtonVisibility,\n    sortedVisibleButtons,\n    hiddenButtons,\n    hasHiddenButtons,\n    getButtonConfig,\n\n    // \n    buttonGroups,\n    longPressDirectExec,\n    setButtonGroups,\n    addButtonGroup,\n    removeButtonGroupSecondary,\n    getSecondaryButtonId,\n    isSecondaryButton,\n    toggleLongPressDirectExec,\n    setLongPressDirectExec,\n    resetButtonConfig,\n  };\n});\n\n// ============================================================\n//  Store ()\n// ============================================================\n\nexport const useBallAppearanceStore = defineStore('acu-ball-appearance', () => {\n  // ============================================================\n  // \n  // ============================================================\n\n  /**  */\n  const appearance = ref<FloatingBallAppearance>({ ...DEFAULT_BALL_APPEARANCE });\n\n  /**  */\n  const customFonts = ref<CustomFont[]>([]);\n\n  /**  */\n  const isLoaded = ref(false);\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function loadFromScriptVariables() {\n    try {\n      if (typeof getVariables !== 'function') {\n        console.warn('[ACU] getVariables ');\n        isLoaded.value = true;\n        return;\n      }\n\n      const scriptVars = getVariables({ type: 'script', script_id: SCRIPT_ID }) as ACUScriptVariables;\n\n      if (scriptVars?.ballAppearance) {\n        appearance.value = { ...DEFAULT_BALL_APPEARANCE, ...scriptVars.ballAppearance };\n      }\n\n      if (scriptVars?.customFonts) {\n        customFonts.value = scriptVars.customFonts;\n      }\n\n      isLoaded.value = true;\n      console.info('[ACU] ');\n    } catch (e) {\n      console.error('[ACU] :', e);\n      isLoaded.value = true;\n    }\n  }\n\n  /**\n   * \n   */\n  function saveToScriptVariables() {\n    try {\n      if (typeof getVariables !== 'function' || typeof replaceVariables !== 'function') {\n        console.warn('[ACU]  API ');\n        return;\n      }\n\n      const scriptVars = getVariables({ type: 'script', script_id: SCRIPT_ID }) as ACUScriptVariables;\n\n      const newVars: ACUScriptVariables = {\n        ...scriptVars,\n        configVersion: 1,\n        ballAppearance: appearance.value,\n        customFonts: customFonts.value,\n      };\n\n      replaceVariables(newVars, { type: 'script', script_id: SCRIPT_ID });\n      console.info('[ACU] ');\n    } catch (e) {\n      console.error('[ACU] :', e);\n    }\n  }\n\n  // \n  watch(\n    [appearance, customFonts],\n    () => {\n      if (isLoaded.value) {\n        saveToScriptVariables();\n      }\n    },\n    { deep: true },\n  );\n\n  // ============================================================\n  //  Actions\n  // ============================================================\n\n  /**\n   * \n   * @param updates \n   */\n  function updateAppearance(updates: Partial<FloatingBallAppearance>) {\n    appearance.value = { ...appearance.value, ...updates };\n  }\n\n  /**\n   * \n   * @param type \n   * @param content \n   */\n  function setIcon(type: FloatingBallAppearance['type'], content: string) {\n    appearance.value.type = type;\n    appearance.value.content = content;\n  }\n\n  /**\n   * \n   * @param size  (40-100)\n   */\n  function setSize(size: number) {\n    appearance.value.size = Math.max(40, Math.min(100, size));\n  }\n\n  /**\n   * \n   * @param color  (hex)\n   * @param opacity  (0-100)\n   */\n  function setBorderColor(color: string, opacity?: number) {\n    appearance.value.borderColor = color;\n    if (opacity !== undefined) {\n      appearance.value.borderOpacity = opacity;\n    }\n  }\n\n  /**\n   * \n   * @param color  (hex)\n   * @param opacity  (0-100)\n   */\n  function setBgColor(color: string, opacity?: number) {\n    appearance.value.bgColor = color;\n    if (opacity !== undefined) {\n      appearance.value.bgOpacity = opacity;\n    }\n  }\n\n  /**\n   * \n   * @param animation \n   */\n  function setNotifyAnimation(animation: FloatingBallAnimation) {\n    appearance.value.notifyAnimation = animation;\n  }\n\n  /**\n   * \n   */\n  function resetAppearance() {\n    appearance.value = { ...DEFAULT_BALL_APPEARANCE };\n  }\n\n  // ============================================================\n  //  Actions\n  // ============================================================\n\n  /**\n   * \n   * @param font  ( id)\n   */\n  function addFont(font: Omit<CustomFont, 'id'>): CustomFont {\n    const newFont: CustomFont = {\n      ...font,\n      id: `custom_${Date.now()}`,\n    };\n    customFonts.value.push(newFont);\n    return newFont;\n  }\n\n  /**\n   * \n   * @param fontId  ID\n   */\n  function removeFont(fontId: string) {\n    const index = customFonts.value.findIndex(f => f.id === fontId);\n    if (index > -1) {\n      customFonts.value.splice(index, 1);\n    }\n  }\n\n  /**\n   *  @import URLs\n   */\n  const fontImportUrls = computed(() => {\n    return customFonts.value.filter(f => f.importUrl).map(f => f.importUrl);\n  });\n\n  /**\n   * \n   */\n  const allFonts = computed(() => {\n    return [\n      ...FONTS,\n      ...customFonts.value.map(f => ({\n        id: f.id,\n        name: f.name,\n        val: f.fontFamily,\n      })),\n    ];\n  });\n\n  // ============================================================\n  //  - CSS \n  // ============================================================\n\n  /**\n   *  hex  rgba\n   */\n  function hexToRgba(hex: string, opacity: number): string {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    if (!result) return hex;\n    const r = parseInt(result[1], 16);\n    const g = parseInt(result[2], 16);\n    const b = parseInt(result[3], 16);\n    return `rgba(${r}, ${g}, ${b}, ${opacity / 100})`;\n  }\n\n  /**\n   *  CSS \n   */\n  const cssVariables = computed(() => {\n    const app = appearance.value;\n    return {\n      '--ball-size': `${app.size}px`,\n      '--ball-border-color': app.borderColor,\n      '--ball-border-color-rgba': hexToRgba(app.borderColor, app.borderOpacity),\n      '--ball-bg-color': hexToRgba(app.bgColor, app.bgOpacity),\n    };\n  });\n\n  return {\n    // \n    appearance,\n    customFonts,\n    isLoaded,\n\n    // \n    loadFromScriptVariables,\n    saveToScriptVariables,\n\n    // \n    updateAppearance,\n    setIcon,\n    setSize,\n    setBorderColor,\n    setBgColor,\n    setNotifyAnimation,\n    resetAppearance,\n\n    // \n    addFont,\n    removeFont,\n    fontImportUrls,\n    allFonts,\n\n    // CSS \n    cssVariables,\n    hexToRgba,\n  };\n});\n","/**\n * ACU Visualizer \n */\n\n// ============================================================\n// \n// ============================================================\n\n/**  - AI */\nexport type ChangeType = 'manual' | 'ai' | null;\n\nexport interface ACUConfig {\n  /**  ID */\n  theme: string;\n  /**  ID */\n  fontFamily: string;\n  /**  */\n  cardWidth: number;\n  /**  */\n  fontSize: number;\n  /**  */\n  itemsPerPage: number;\n  /**  */\n  highlightNew: boolean;\n  /**  key () */\n  highlightColor: string;\n  /**  key */\n  highlightManualColor: string;\n  /** AI key */\n  highlightAiColor: string;\n  /**  */\n  customTitleColor: boolean;\n  /**  key */\n  titleColor: string;\n  /**  (hex) */\n  customHighlightManualHex?: string;\n  /**  AI  (hex) */\n  customHighlightAiHex?: string;\n  /**  (hex) */\n  customTitleHex?: string;\n  /**  */\n  layout: 'vertical' | 'horizontal';\n  /**  */\n  limitLongText: boolean;\n  /**  */\n  showDashboard: boolean;\n  /**  */\n  showPagination: boolean;\n  /**  */\n  lockPanel: boolean;\n  /**  */\n  purgeConfirmation: boolean;\n  /**  (0 ) */\n  gridColumns: number;\n  /**  */\n  autoSave?: boolean;\n  /**  () */\n  autoSaveDelay?: number;\n  /**  ID  */\n  visibleButtons: string[];\n  /**  */\n  buttonOrder: string[];\n  /**  */\n  buttonGroups: ButtonGroup[];\n  /**  */\n  longPressDirectExec: boolean;\n  /** Swipe  */\n  clearTableOnSwipe?: boolean;\n  /** TabTab */\n  collapseTabBar?: boolean;\n  /**  (0-150px0) */\n  mobileSafeAreaBottom?: number;\n}\n\n/**  */\nexport interface NavButtonConfig {\n  /**  ID */\n  id: string;\n  /**  class (FontAwesome) */\n  icon: string;\n  /**  */\n  label: string;\n  /**  () */\n  hidden?: boolean;\n}\n\n/**\n * \n * \n */\nexport interface ButtonGroup {\n  /**  ID */\n  primaryId: string;\n  /**  ID */\n  secondaryId: string | null;\n}\n\n/**\n * Tab  Tab \n */\nexport interface TabConfigEntry {\n  /** Tab ID */\n  id: string;\n  /** Tab  */\n  name: string;\n  /** Tab  () */\n  icon?: string;\n  /** Tab  */\n  type: 'normal' | 'dashboard' | 'options' | 'special';\n  /**  */\n  visible: boolean;\n  /**  */\n  order: number;\n}\n\n/** Tab  */\nexport interface TabConfigItem {\n  /** Tab ID */\n  id: string;\n  /** Tab  */\n  name: string;\n  /** Tab  */\n  icon: string;\n  /**  */\n  visible: boolean;\n  /**  */\n  order: number;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport interface RawDatabaseData {\n  [sheetId: string]: {\n    name?: string;\n    content?: (string | number)[][];\n  };\n}\n\n/**  */\nexport interface TableRow {\n  /**  */\n  index: number;\n  /**  */\n  key: string;\n  /**  */\n  cells: TableCell[];\n  /**  */\n  changed?: boolean;\n  /**  */\n  deleting?: boolean;\n}\n\n/**  */\nexport interface TableCell {\n  /**  */\n  colIndex: number;\n  /** / */\n  key: string;\n  /**  */\n  value: string | number;\n  /**  */\n  changed?: boolean;\n}\n\n/**  */\nexport interface ProcessedTable {\n  /**  ID */\n  id: string;\n  /**  */\n  name: string;\n  /**  */\n  headers: string[];\n  /**  */\n  rows: TableRow[];\n}\n\n// ============================================================\n// UI \n// ============================================================\n\n/**  */\nexport interface BallPosition {\n  x: number;\n  y: number;\n}\n\n/**  */\nexport interface WindowConfig {\n  /**  */\n  width?: number;\n  /**  */\n  left?: string | number;\n  /**  */\n  bottom?: string | number;\n  /**  */\n  isCentered?: boolean;\n}\n\n/** Tab  */\nexport interface TabItem {\n  /** Tab ID */\n  id: string;\n  /** Tab  */\n  name: string;\n  /** Tab  */\n  icon?: string;\n  /**  Tab (/) */\n  special?: boolean;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport interface CellClickEvent {\n  tableId: string;\n  rowIndex: number;\n  colIndex: number;\n  value: string | number;\n}\n\n/** Tab  */\nexport interface TabChangeEvent {\n  tabId: string;\n  previousTabId: string | null;\n}\n\n// ============================================================\n// /\n// ============================================================\n\n/**  */\nexport interface ThemeConfig {\n  id: string;\n  name: string;\n  icon: string;\n}\n\n/**  */\nexport interface FontConfig {\n  id: string;\n  name: string;\n  val: string;\n}\n\n/**  */\nexport interface HighlightColor {\n  main: string;\n  bg: string;\n  name: string;\n}\n\n// ============================================================\n//  - Vue \n// ============================================================\n\n/**  ( Vue ) */\nexport interface CellData {\n  /** / */\n  key: string;\n  /**  */\n  value: string;\n}\n\n/**  ( Vue ) */\nexport interface RowData {\n  /**  */\n  index: number;\n  /**  */\n  cells: CellData[];\n}\n\n/**  (tableId -> ) */\nexport type TableData = Record<string, RowData[]>;\n\n/**  */\nexport interface FloorInfo {\n  /**  */\n  index: number;\n  /**  */\n  isAuto: boolean;\n  /**  */\n  reason: string;\n}\n\n/**  () */\nexport interface IsolatedDataEntry {\n  /**  */\n  independentData: Record<string, RawDatabaseData[string]>;\n  /**  */\n  modifiedKeys: string[];\n  /**  */\n  updateGroupKeys: string[];\n}\n\n/**  ACU  */\nexport interface MessageACUData {\n  /**  () */\n  TavernDB_ACU_IsolatedData?: Record<string, IsolatedDataEntry>;\n}\n\n/** SillyTavern  */\nexport interface STChatMessage extends MessageACUData {\n  /**  */\n  is_user?: boolean;\n  /**  */\n  mes?: string;\n  /**  */\n  [key: string]: unknown;\n}\n\n/**  */\nexport interface SaveResult {\n  /**  */\n  success: boolean;\n  /**  (-1 ) */\n  savedToFloor: number;\n  /**  */\n  error?: string;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport type FloatingBallAnimation = 'ripple' | 'arc';\n\n/**  */\nexport type FloatingBallIconType = 'icon' | 'emoji' | 'image';\n\n/**\n * \n * \n */\nexport interface FloatingBallAppearance {\n  /** : FontAwesome / Emoji /  */\n  type: FloatingBallIconType;\n  /**\n   * :\n   * - type='icon': FA class ( 'fa-layer-group')\n   * - type='emoji': Emoji ( '')\n   * - type='image': Base64 \n   */\n  content: string;\n  /**  (40-100px) */\n  size: number;\n  /** AI */\n  notifyAnimation: FloatingBallAnimation;\n  /**  (hex  '#90cdf4') */\n  borderColor: string;\n  /**  (0-100) */\n  borderOpacity: number;\n  /**  (hex  '#2b2b2b') */\n  bgColor: string;\n  /**  (0-100) */\n  bgOpacity: number;\n  /**  X  (0-100) type='image'  */\n  imageOffsetX?: number;\n  /**  Y  (0-100) type='image'  */\n  imageOffsetY?: number;\n  /**  (100-300) type='image'  */\n  imageScale?: number;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n * \n */\nexport interface CustomFont {\n  /**  ID () */\n  id: string;\n  /**  */\n  name: string;\n  /** font-family  ( '\"Noto Sans SC\", sans-serif') */\n  fontFamily: string;\n  /** @import URL ( Google Fonts ),  */\n  importUrl?: string;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * ACU \n *  getVariables({type: 'script', script_id}) \n */\nexport interface ACUScriptVariables {\n  /**  () */\n  configVersion?: number;\n  /**  */\n  ballAppearance?: FloatingBallAppearance;\n  /**  */\n  customFonts?: CustomFont[];\n  /**\n   *  (: , : Base64)\n   * \n   */\n  images?: Record<string, string>;\n  /**\n   * \n   */\n  themePresets?: ThemePreset[];\n  /**\n   *  ID ()\n   */\n  activePresetId?: string;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n *  CSS \n *  variables.scss  18 \n */\nexport interface ThemeVariables {\n  //  (9)\n  /**  */\n  bgNav?: string;\n  /**  */\n  bgPanel?: string;\n  /**  */\n  cardBg?: string;\n  /**  */\n  tableHead?: string;\n  /**  */\n  tableHover?: string;\n  /**  */\n  badgeBg?: string;\n  /**  */\n  inputBg?: string;\n  /**  */\n  menuBg?: string;\n  /**  */\n  overlayBg?: string;\n\n  //  (3)\n  /**  */\n  textMain?: string;\n  /**  */\n  textSub?: string;\n  /**  */\n  menuText?: string;\n\n  //  (5)\n  /**  */\n  border?: string;\n  /**  */\n  btnBg?: string;\n  /**  */\n  btnHover?: string;\n  /**  */\n  btnActiveBg?: string;\n  /**  */\n  btnActiveText?: string;\n\n  //  (1)\n  /**  */\n  shadow?: string;\n}\n\n/**\n * \n */\nexport interface HighlightConfig {\n  /**  key ( ID) */\n  manualColor: string;\n  /**  (hex) */\n  manualHex?: string;\n  /** AI  key ( ID) */\n  aiColor: string;\n  /**  AI  (hex) */\n  aiHex?: string;\n  /**  key ( ID) */\n  titleColor: string;\n  /**  (hex) */\n  titleHex?: string;\n}\n\n/**\n * \n * +\n */\nexport interface ThemePreset {\n  /**  ID */\n  id: string;\n  /**  */\n  name: string;\n  /**  (ISO ) */\n  createdAt: string;\n  /**  ID ( 'retro', 'dark', 'modern' ) */\n  baseTheme: string;\n  /**\n   *  ( CSS )\n   * \n   */\n  themeVars?: Partial<ThemeVariables>;\n  /**  */\n  highlight: HighlightConfig;\n  /**  CSS  */\n  customCSS?: string;\n}\n\n/**\n * CSS \n *  ThemeVariables  CSS \n */\nexport const THEME_VAR_CSS_MAP: Record<keyof ThemeVariables, string> = {\n  bgNav: '--acu-bg-nav',\n  bgPanel: '--acu-bg-panel',\n  cardBg: '--acu-card-bg',\n  tableHead: '--acu-table-head',\n  tableHover: '--acu-table-hover',\n  badgeBg: '--acu-badge-bg',\n  inputBg: '--acu-input-bg',\n  menuBg: '--acu-menu-bg',\n  overlayBg: '--acu-overlay-bg',\n  textMain: '--acu-text-main',\n  textSub: '--acu-text-sub',\n  menuText: '--acu-menu-text',\n  border: '--acu-border',\n  btnBg: '--acu-btn-bg',\n  btnHover: '--acu-btn-hover',\n  btnActiveBg: '--acu-btn-active-bg',\n  btnActiveText: '--acu-btn-active-text',\n  shadow: '--acu-shadow',\n};\n\n/**\n * \n *  UI  18 \n */\nexport const THEME_VAR_GROUPS: Array<{\n  id: string;\n  name: string;\n  icon: string;\n  vars: Array<{ key: keyof ThemeVariables; label: string }>;\n}> = [\n  {\n    id: 'background',\n    name: '',\n    icon: 'fa-fill-drip',\n    vars: [\n      { key: 'bgNav', label: '' },\n      { key: 'bgPanel', label: '' },\n      { key: 'cardBg', label: '' },\n      { key: 'tableHead', label: '' },\n      { key: 'tableHover', label: '' },\n      { key: 'badgeBg', label: '' },\n      { key: 'inputBg', label: '' },\n      { key: 'menuBg', label: '' },\n      { key: 'overlayBg', label: '' },\n    ],\n  },\n  {\n    id: 'text',\n    name: '',\n    icon: 'fa-font',\n    vars: [\n      { key: 'textMain', label: '' },\n      { key: 'textSub', label: '' },\n      { key: 'menuText', label: '' },\n    ],\n  },\n  {\n    id: 'button',\n    name: '',\n    icon: 'fa-square',\n    vars: [\n      { key: 'border', label: '' },\n      { key: 'btnBg', label: '' },\n      { key: 'btnHover', label: '' },\n      { key: 'btnActiveBg', label: '' },\n      { key: 'btnActiveText', label: '' },\n    ],\n  },\n  {\n    id: 'effect',\n    name: '',\n    icon: 'fa-magic',\n    vars: [{ key: 'shadow', label: '' }],\n  },\n];\n\n// ============================================================\n// \n// ============================================================\n\n/**  ID  */\nexport type WidgetActionId =\n  | 'goToTable' // \n  | 'clear' // \n  | 'undo' // \n  | 'manualUpdate' // \n  | 'relationshipGraph' // \n  | 'settings' // \n  | 'nativeEdit'; // \n\n/**  */\nexport interface WidgetAction {\n  id: WidgetActionId;\n  icon: string; // FA  class\n  label: string; // \n  tooltip?: string; // \n}\n\n/**  */\nexport type WidgetDisplayStyle = 'grid' | 'list' | 'compact';\n\n/**  */\nexport interface TagDefinition {\n  /**  ID */\n  id: string;\n  /**  */\n  label: string;\n  /** : {{value}}, {{rowTitle}}, {{playerName}}, {{tableName}} */\n  promptTemplate: string;\n  /**  */\n  isFixed: boolean;\n}\n\n/**  */\nexport interface InteractiveTagConfig {\n  /**  */\n  sourceColumns: string[];\n  /**  */\n  tagDefinitions: TagDefinition[];\n}\n\n/**  */\nexport interface DashboardWidgetConfig {\n  /**  ID */\n  id: string;\n  /**  */\n  type: 'table' | 'stats' | 'custom' | 'updateStatus' | 'optionsPanel';\n  /**  ID (type='table' ) */\n  tableId?: string;\n  /**  */\n  title: string;\n  /**  (FA class) */\n  icon: string;\n  /**  (=) */\n  displayColumns: string[];\n  /**  */\n  maxRows: number;\n  /**  */\n  actions: WidgetActionId[];\n  /**  */\n  order: number;\n  /**  */\n  enabled: boolean;\n  /**  (1=, 2=) */\n  colSpan: 1 | 2;\n  /**  */\n  displayStyle: WidgetDisplayStyle;\n  /** = */\n  titleColumn?: string;\n  /**  */\n  displayTagColumns?: string[];\n  /**  */\n  interactiveTagConfig?: InteractiveTagConfig;\n}\n\n/**  */\nexport interface DashboardConfig {\n  /**  */\n  widgets: DashboardWidgetConfig[];\n  /**  */\n  layout: 'grid' | 'list';\n  /**  (grid ) */\n  columns: number;\n  /**  */\n  showStats: boolean;\n}\n\n/**  */\nexport const WIDGET_ACTIONS: Record<WidgetActionId, WidgetAction> = {\n  goToTable: { id: 'goToTable', icon: 'fa-external-link-alt', label: '', tooltip: '' },\n  clear: { id: 'clear', icon: 'fa-eraser', label: '', tooltip: '' },\n  undo: { id: 'undo', icon: 'fa-undo', label: '', tooltip: '' },\n  manualUpdate: { id: 'manualUpdate', icon: 'fa-hand-sparkles', label: '', tooltip: '' },\n  relationshipGraph: {\n    id: 'relationshipGraph',\n    icon: 'fa-project-diagram',\n    label: '',\n    tooltip: '',\n  },\n  settings: { id: 'settings', icon: 'fa-cog', label: '', tooltip: '' },\n  nativeEdit: { id: 'nativeEdit', icon: 'fa-external-link-alt', label: '', tooltip: '' },\n};\n\n/**  -  */\nexport const WIDGET_TEMPLATES: Record<string, Partial<DashboardWidgetConfig>> = {\n  npc: {\n    type: 'table',\n    title: 'NPC',\n    icon: 'fa-users',\n    displayColumns: ['', '', 'name', 'Name', '', ''],\n    maxRows: 8,\n    actions: ['goToTable', 'relationshipGraph'],\n    colSpan: 1,\n    displayStyle: 'grid',\n  },\n  task: {\n    type: 'table',\n    title: '',\n    icon: 'fa-tasks',\n    displayColumns: ['', '', 'name', 'Name', '', ''],\n    maxRows: 5,\n    actions: ['goToTable'],\n    colSpan: 1,\n    displayStyle: 'list',\n  },\n  item: {\n    type: 'table',\n    title: '',\n    icon: 'fa-box-open',\n    displayColumns: ['', '', 'name', 'Name', ''],\n    maxRows: 12,\n    actions: ['goToTable', 'clear'],\n    colSpan: 1,\n    displayStyle: 'grid',\n  },\n  character: {\n    type: 'table',\n    title: '',\n    icon: 'fa-user',\n    displayColumns: [],\n    maxRows: 1,\n    actions: ['goToTable'],\n    colSpan: 2,\n    displayStyle: 'list',\n  },\n  location: {\n    type: 'table',\n    title: '',\n    icon: 'fa-map-marker-alt',\n    displayColumns: ['', '', 'name', 'Name', ''],\n    maxRows: 5,\n    actions: ['goToTable'],\n    colSpan: 1,\n    displayStyle: 'list',\n  },\n};\n\n/**  */\nexport const TABLE_KEYWORD_RULES: Record<string, string[]> = {\n  npc: ['NPC', 'npc', '', '', '', '', ''],\n  task: ['', 'Task', 'task', 'Quest', 'quest', ''],\n  item: ['', '', 'Item', 'item', '', '', ''],\n  character: ['', '', 'Player', 'player', '', 'protagonist'],\n  location: ['', '', 'Location', 'location', ''],\n};\n","/**\n *  Store\n *  CSS\n */\n\nimport { defineStore } from 'pinia';\nimport { computed, ref, watch } from 'vue';\nimport type { ACUScriptVariables, HighlightConfig, ThemePreset, ThemeVariables } from '../types';\nimport { THEME_VAR_CSS_MAP } from '../types';\nimport { HIGHLIGHT_COLORS, THEMES, useConfigStore } from './useConfigStore';\n\n/**  ID -  */\nconst SCRIPT_ID = 'acu_visualizer_ui';\n\n/**  */\nconst STORAGE_KEY_THEME_PRESETS = 'acu_theme_presets_v1';\n\n/**  CSS  */\nconst STORAGE_KEY_CUSTOM_CSS = 'acu_custom_css_v1';\n\n/**  */\nexport const DEFAULT_HIGHLIGHT_CONFIG: HighlightConfig = {\n  manualColor: 'orange',\n  manualHex: '#d35400',\n  aiColor: 'blue',\n  aiHex: '#3498db',\n  titleColor: 'orange',\n  titleHex: '#d35400',\n};\n\n/**\n *  hex \n */\nfunction hexToBgRgba(hex: string, opacity: number = 0.1): string {\n  const normalizedHex = hex.startsWith('#') ? hex : `#${hex}`;\n  const r = parseInt(normalizedHex.slice(1, 3), 16);\n  const g = parseInt(normalizedHex.slice(3, 5), 16);\n  const b = parseInt(normalizedHex.slice(5, 7), 16);\n  return `rgba(${r}, ${g}, ${b}, ${opacity})`;\n}\n\n/**\n *  key  hex \n */\nfunction getColorValue(colorKey: string, customHex?: string): string {\n  if (colorKey === 'custom' && customHex) {\n    return customHex;\n  }\n  const preset = HIGHLIGHT_COLORS[colorKey as keyof typeof HIGHLIGHT_COLORS];\n  return preset?.main || '#d35400';\n}\n\nexport const useThemeStore = defineStore('acu-theme', () => {\n  // ============================================================\n  // \n  // ============================================================\n\n  /**  */\n  const presets = ref<ThemePreset[]>([]);\n\n  /**  ID () */\n  const activePresetId = ref<string | null>(null);\n\n  /**  () */\n  const currentThemeVars = ref<Partial<ThemeVariables>>({});\n\n  /**  */\n  const currentHighlight = ref<HighlightConfig>({ ...DEFAULT_HIGHLIGHT_CONFIG });\n\n  /**  CSS */\n  const customCSS = ref<string>('');\n\n  /**  */\n  const isLoaded = ref(false);\n\n  // ============================================================\n  // \n  // ============================================================\n\n  const configStore = useConfigStore();\n\n  /**  ID */\n  const baseTheme = computed(() => configStore.config.theme);\n\n  /**  */\n  const manualHighlightColor = computed(() => {\n    return getColorValue(currentHighlight.value.manualColor, currentHighlight.value.manualHex);\n  });\n\n  /** AI  */\n  const aiHighlightColor = computed(() => {\n    return getColorValue(currentHighlight.value.aiColor, currentHighlight.value.aiHex);\n  });\n\n  /**  */\n  const titleColor = computed(() => {\n    return getColorValue(currentHighlight.value.titleColor, currentHighlight.value.titleHex);\n  });\n\n  /**  */\n  const titleBgColor = computed(() => {\n    return hexToBgRgba(titleColor.value, 0.08);\n  });\n\n  /**  */\n  const activePreset = computed(() => {\n    if (!activePresetId.value) return null;\n    return presets.value.find(p => p.id === activePresetId.value) || null;\n  });\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function loadFromStorage() {\n    try {\n      //  localStorage \n      const presetsJson = localStorage.getItem(STORAGE_KEY_THEME_PRESETS);\n      if (presetsJson) {\n        presets.value = JSON.parse(presetsJson);\n      }\n\n      //  localStorage  CSS\n      const savedCSS = localStorage.getItem(STORAGE_KEY_CUSTOM_CSS);\n      if (savedCSS) {\n        customCSS.value = savedCSS;\n      }\n\n      // \n      if (typeof getVariables === 'function') {\n        const scriptVars = getVariables({ type: 'script', script_id: SCRIPT_ID }) as ACUScriptVariables;\n\n        if (scriptVars?.activePresetId) {\n          activePresetId.value = scriptVars.activePresetId;\n        }\n\n        if (scriptVars?.themePresets) {\n          //  ()\n          presets.value = scriptVars.themePresets;\n        }\n      }\n\n      //  configStore \n      syncFromConfigStore();\n\n      isLoaded.value = true;\n      console.info('[ACU Theme] ');\n    } catch (e) {\n      console.error('[ACU Theme] :', e);\n      isLoaded.value = true;\n    }\n  }\n\n  /**\n   * \n   */\n  function saveToStorage() {\n    try {\n      //  localStorage\n      localStorage.setItem(STORAGE_KEY_THEME_PRESETS, JSON.stringify(presets.value));\n\n      //  CSS  localStorage\n      localStorage.setItem(STORAGE_KEY_CUSTOM_CSS, customCSS.value);\n\n      // \n      if (typeof getVariables === 'function' && typeof replaceVariables === 'function') {\n        const scriptVars = getVariables({ type: 'script', script_id: SCRIPT_ID }) as ACUScriptVariables;\n\n        const newVars: ACUScriptVariables = {\n          ...scriptVars,\n          themePresets: presets.value,\n          activePresetId: activePresetId.value || undefined,\n        };\n\n        replaceVariables(newVars, { type: 'script', script_id: SCRIPT_ID });\n      }\n\n      //  configStore\n      syncToConfigStore();\n\n      console.info('[ACU Theme] ');\n    } catch (e) {\n      console.error('[ACU Theme] :', e);\n    }\n  }\n\n  /**\n   *  configStore \n   */\n  function syncFromConfigStore() {\n    const config = configStore.config;\n    currentHighlight.value = {\n      manualColor: config.highlightManualColor || config.highlightColor || 'orange',\n      manualHex: config.customHighlightManualHex,\n      aiColor: config.highlightAiColor || 'blue',\n      aiHex: config.customHighlightAiHex,\n      titleColor: config.titleColor || 'orange',\n      titleHex: config.customTitleHex,\n    };\n  }\n\n  /**\n   *  configStore\n   */\n  function syncToConfigStore() {\n    configStore.updateConfig({\n      highlightManualColor: currentHighlight.value.manualColor,\n      highlightColor: currentHighlight.value.manualColor, // \n      customHighlightManualHex: currentHighlight.value.manualHex,\n      highlightAiColor: currentHighlight.value.aiColor,\n      customHighlightAiHex: currentHighlight.value.aiHex,\n      titleColor: currentHighlight.value.titleColor,\n      customTitleHex: currentHighlight.value.titleHex,\n      // \n      highlightNew: true,\n      customTitleColor: true,\n    });\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function createPreset(name: string): ThemePreset {\n    const preset: ThemePreset = {\n      id: `preset_${Date.now()}`,\n      name,\n      createdAt: new Date().toISOString(),\n      baseTheme: baseTheme.value,\n      themeVars: { ...currentThemeVars.value },\n      highlight: { ...currentHighlight.value },\n      customCSS: customCSS.value,\n    };\n\n    presets.value.push(preset);\n    saveToStorage();\n    return preset;\n  }\n\n  /**\n   * \n   */\n  function saveCurrentToPreset(name: string): ThemePreset {\n    return createPreset(name);\n  }\n\n  /**\n   * \n   */\n  function deletePreset(presetId: string) {\n    const index = presets.value.findIndex(p => p.id === presetId);\n    if (index > -1) {\n      presets.value.splice(index, 1);\n\n      // \n      if (activePresetId.value === presetId) {\n        activePresetId.value = null;\n      }\n\n      saveToStorage();\n    }\n  }\n\n  /**\n   * \n   */\n  function applyPreset(presetId: string) {\n    const preset = presets.value.find(p => p.id === presetId);\n    if (!preset) return;\n\n    // \n    configStore.setTheme(preset.baseTheme);\n\n    // \n    currentThemeVars.value = { ...preset.themeVars };\n\n    // \n    currentHighlight.value = { ...preset.highlight };\n\n    //  CSS\n    customCSS.value = preset.customCSS || '';\n\n    // \n    activePresetId.value = presetId;\n\n    saveToStorage();\n  }\n\n  /**\n   * \n   */\n  function updatePreset(presetId: string, updates: Partial<ThemePreset>) {\n    const index = presets.value.findIndex(p => p.id === presetId);\n    if (index > -1) {\n      presets.value[index] = { ...presets.value[index], ...updates };\n      saveToStorage();\n    }\n  }\n\n  /**\n   * \n   */\n  function renamePreset(presetId: string, newName: string) {\n    updatePreset(presetId, { name: newName });\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function setManualHighlightColor(colorKey: string, customHex?: string) {\n    currentHighlight.value.manualColor = colorKey;\n    currentHighlight.value.manualHex = customHex;\n    saveToStorage();\n  }\n\n  /**\n   *  AI \n   */\n  function setAiHighlightColor(colorKey: string, customHex?: string) {\n    currentHighlight.value.aiColor = colorKey;\n    currentHighlight.value.aiHex = customHex;\n    saveToStorage();\n  }\n\n  /**\n   * \n   */\n  function setTitleColor(colorKey: string, customHex?: string) {\n    currentHighlight.value.titleColor = colorKey;\n    currentHighlight.value.titleHex = customHex;\n    saveToStorage();\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function setThemeVar(key: keyof ThemeVariables, value: string) {\n    currentThemeVars.value[key] = value;\n  }\n\n  /**\n   *  ()\n   */\n  function removeThemeVar(key: keyof ThemeVariables) {\n    delete currentThemeVars.value[key];\n  }\n\n  /**\n   * \n   */\n  function clearThemeVars() {\n    currentThemeVars.value = {};\n  }\n\n  // ============================================================\n  //  CSS\n  // ============================================================\n\n  /**\n   *  CSS\n   */\n  function setCustomCSS(css: string) {\n    customCSS.value = css;\n    saveToStorage();\n  }\n\n  /**\n   *  CSS\n   */\n  function clearCustomCSS() {\n    customCSS.value = '';\n    saveToStorage();\n  }\n\n  // ============================================================\n  // CSS \n  // ============================================================\n\n  /**\n   *  CSS \n   */\n  function getInjectedStyles(): string {\n    const styles: string[] = [];\n\n    // 1. \n    for (const [key, value] of Object.entries(currentThemeVars.value)) {\n      if (value) {\n        const cssVar = THEME_VAR_CSS_MAP[key as keyof ThemeVariables];\n        if (cssVar) {\n          styles.push(`${cssVar}: ${value};`);\n        }\n      }\n    }\n\n    // 2. \n    styles.push(`--acu-highlight: ${manualHighlightColor.value};`);\n    styles.push(`--acu-highlight-manual: ${manualHighlightColor.value};`);\n    styles.push(`--acu-highlight-manual-bg: ${hexToBgRgba(manualHighlightColor.value)};`);\n    styles.push(`--acu-highlight-ai: ${aiHighlightColor.value};`);\n    styles.push(`--acu-highlight-ai-bg: ${hexToBgRgba(aiHighlightColor.value)};`);\n    styles.push(`--acu-title-color: ${titleColor.value};`);\n    styles.push(`--acu-title-color-bg: ${titleBgColor.value};`);\n    styles.push(`--acu-accent: ${titleColor.value};`);\n\n    if (styles.length === 0) return '';\n\n    return `.acu-wrapper { ${styles.join(' ')} }`;\n  }\n\n  /**\n   *  CSS ( +  CSS)\n   */\n  function getFullInjectedCSS(): string {\n    const varStyles = getInjectedStyles();\n    const userCSS = customCSS.value;\n\n    return [varStyles, userCSS].filter(Boolean).join('\\n\\n');\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  // \n  watch(\n    [currentHighlight, currentThemeVars, customCSS],\n    () => {\n      if (isLoaded.value) {\n        saveToStorage();\n      }\n    },\n    { deep: true },\n  );\n\n  return {\n    // \n    presets,\n    activePresetId,\n    currentThemeVars,\n    currentHighlight,\n    customCSS,\n    isLoaded,\n\n    // \n    baseTheme,\n    manualHighlightColor,\n    aiHighlightColor,\n    titleColor,\n    titleBgColor,\n    activePreset,\n\n    // \n    loadFromStorage,\n    saveToStorage,\n    syncFromConfigStore,\n    syncToConfigStore,\n\n    // \n    createPreset,\n    saveCurrentToPreset,\n    deletePreset,\n    applyPreset,\n    updatePreset,\n    renamePreset,\n\n    // \n    setManualHighlightColor,\n    setAiHighlightColor,\n    setTitleColor,\n\n    // \n    setThemeVar,\n    removeThemeVar,\n    clearThemeVars,\n\n    //  CSS\n    setCustomCSS,\n    clearCustomCSS,\n\n    // CSS \n    getInjectedStyles,\n    getFullInjectedCSS,\n  };\n});\n","/**\n * \n *\n * \n */\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport type RelationLevel = 'S' | 'A' | 'B' | 'C' | 'D' | 'E' | '?';\n\n/**  */\nexport interface RelationType {\n  /**  */\n  level: RelationLevel;\n  /**  */\n  name: string;\n  /**  */\n  color: string;\n  /**  */\n  keywords: string[];\n}\n\n/**  */\nexport interface RelationColorResult {\n  /**  */\n  color: string;\n  /**  */\n  level: RelationLevel;\n  /**  */\n  typeName: string;\n  /**  */\n  isComplex: boolean;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n * S > A > E > D > B > C\n */\nexport const RELATION_TYPES: RelationType[] = [\n  {\n    level: 'S',\n    name: '/',\n    color: '#E91E63', // \n    keywords: [\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n    ],\n  },\n  {\n    level: 'A',\n    name: '',\n    color: '#2196F3', // \n    keywords: [\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n    ],\n  },\n  {\n    level: 'B',\n    name: '//',\n    color: '#4CAF50', // \n    keywords: [\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n    ],\n  },\n  {\n    level: 'C',\n    name: '/',\n    color: '#9E9E9E', // \n    keywords: [\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n    ],\n  },\n  {\n    level: 'D',\n    name: '',\n    color: '#FF9800', // \n    keywords: [\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n    ],\n  },\n  {\n    level: 'E',\n    name: '',\n    color: '#F44336', // \n    keywords: [\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n      '',\n    ],\n  },\n];\n\n/**  */\nconst COMPLEX_RELATION: Omit<RelationType, 'keywords'> = {\n  level: '?',\n  name: '/',\n  color: '#9C27B0', // \n};\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n */\nfunction matchesType(word: string, type: RelationType): boolean {\n  return type.keywords.some(kw => word.includes(kw));\n}\n\n/**\n * \n *\n * @param relationWords //\n * @returns \n *\n * @example\n * getRelationColor('')        // { color: '#E91E63', level: 'S', typeName: '/', isComplex: false }\n * getRelationColor(',')   // { color: '#9C27B0', level: '?', typeName: '/', isComplex: true }\n * getRelationColor('')        // { color: '#9E9E9E', level: 'C', typeName: '', isComplex: false }\n */\nexport function getRelationColor(relationWords: string): RelationColorResult {\n  // \n  const words = relationWords\n    .split(/[,;|]/)\n    .map(w => w.trim())\n    .filter(w => w.length > 0);\n\n  if (words.length === 0) {\n    return {\n      color: RELATION_TYPES.find(t => t.level === 'C')!.color,\n      level: 'C',\n      typeName: '',\n      isComplex: false,\n    };\n  }\n\n  // \n  const matchedLevels = new Set<RelationLevel>();\n\n  words.forEach(word => {\n    for (const type of RELATION_TYPES) {\n      if (matchesType(word, type)) {\n        matchedLevels.add(type.level);\n        break; // \n      }\n    }\n  });\n\n  // \n  if (matchedLevels.size === 0) {\n    return {\n      color: RELATION_TYPES.find(t => t.level === 'C')!.color,\n      level: 'C',\n      typeName: '',\n      isComplex: false,\n    };\n  }\n\n  // S/A/BE\n  const positivelevels: RelationLevel[] = ['S', 'A', 'B'];\n  const hasPositive = positivelevels.some(l => matchedLevels.has(l));\n  const hasNegative = matchedLevels.has('E');\n\n  if (hasPositive && hasNegative) {\n    return {\n      color: COMPLEX_RELATION.color,\n      level: COMPLEX_RELATION.level,\n      typeName: COMPLEX_RELATION.name,\n      isComplex: true,\n    };\n  }\n\n  // S > A > E > D > B > C\n  const priority: RelationLevel[] = ['S', 'A', 'E', 'D', 'B', 'C'];\n\n  for (const level of priority) {\n    if (matchedLevels.has(level)) {\n      const type = RELATION_TYPES.find(t => t.level === level)!;\n      return {\n        color: type.color,\n        level: type.level,\n        typeName: type.name,\n        isComplex: false,\n      };\n    }\n  }\n\n  // \n  return {\n    color: RELATION_TYPES.find(t => t.level === 'C')!.color,\n    level: 'C',\n    typeName: '',\n    isComplex: false,\n  };\n}\n\n/**\n *  UI \n */\nexport function getRelationLegend(): Array<{ level: RelationLevel; name: string; color: string; emoji: string }> {\n  const emojiMap: Record<RelationLevel, string> = {\n    S: '',\n    A: '',\n    B: '',\n    C: '',\n    D: '',\n    E: '',\n    '?': '',\n  };\n\n  return [\n    ...RELATION_TYPES.map(t => ({\n      level: t.level,\n      name: t.name,\n      color: t.color,\n      emoji: emojiMap[t.level],\n    })),\n    {\n      level: COMPLEX_RELATION.level,\n      name: COMPLEX_RELATION.name,\n      color: COMPLEX_RELATION.color,\n      emoji: emojiMap['?'],\n    },\n  ];\n}\n\n/**\n * \n * ///\n *\n * @param note \n * @param relation \n * @returns \n */\nexport function shouldUseDashedLine(note: string | undefined | null, relation?: string): boolean {\n  // /\n  const pastKeywords = ['', '', '', '', '', '', '', '', '', '', '', '', ''];\n  // /\n  const secretKeywords = ['', '', '', '', '', '', '', '', '', ''];\n\n  const allKeywords = [...pastKeywords, ...secretKeywords];\n  const text = (note || '') + (relation || '');\n\n  return allKeywords.some(kw => text.includes(kw));\n}\n\n/**\n * \n * - \n * - \n */\nexport function cleanRelationText(text: string): string {\n  if (!text) return '';\n  return text\n    .replace(/[.]+$/, '') // \n    .replace(/\\s+/g, '') // \n    .trim();\n}\n","/**\n * \n *\n *  Cytoscape \n */\nimport { cleanRelationText, getRelationColor, shouldUseDashedLine } from './relationshipColors';\n// ============================================================\n// \n// ============================================================\n/**\n * \n */\nfunction getCellValue(row, colIndex) {\n    const cell = row.cells.find(c => c.colIndex === colIndex);\n    return cell ? String(cell.value ?? '').trim() : '';\n}\n/**\n * \n * @param name \n * @param aliasMap \n * @returns \n */\nfunction resolveAlias(name, aliasMap) {\n    if (!aliasMap || !name)\n        return name;\n    return aliasMap.get(name) || name;\n}\n/**\n * \n */\nfunction findColumnIndex(headers, possibleNames) {\n    const lowerHeaders = headers.map(h => h.toLowerCase());\n    for (const name of possibleNames) {\n        const idx = lowerHeaders.findIndex(h => h.includes(name.toLowerCase()));\n        if (idx !== -1)\n            return idx;\n    }\n    return -1;\n}\n/**\n * /\n */\nexport function isCharacterTable(tableName, tableId) {\n    const name = tableName.toLowerCase();\n    const id = tableId.toLowerCase();\n    const keywords = ['', '', 'npc', 'character', '', 'protagonist', 'player'];\n    return keywords.some(kw => name.includes(kw) || id.includes(kw));\n}\n/**\n * \n */\nexport function isRelationshipTable(tableName, tableId) {\n    const name = tableName.toLowerCase();\n    const id = tableId.toLowerCase();\n    const keywords = ['', 'relationship', 'relation'];\n    return keywords.some(kw => name.includes(kw) || id.includes(kw));\n}\n// ============================================================\n//  - \n// ============================================================\n/**\n * \n */\nfunction isEnglishName(name) {\n    return /^[A-Za-z\\s'-]+$/.test(name) && name.includes(' ');\n}\n/**\n * \n * - : \n * - : \n */\nfunction getDefaultLabel(fullName) {\n    if (isEnglishName(fullName)) {\n        // \n        const firstName = fullName.split(' ')[0];\n        return firstName.length > 6 ? firstName.slice(0, 6) : firstName;\n    }\n    // \n    return fullName.length > 0 ? fullName[fullName.length - 1] : fullName;\n}\n// ============================================================\n// \n// ============================================================\n/**\n *  Cytoscape \n *\n * @param relationshipTable \n * @param characterTables \n * @param factionTable \n * @param aliasMap \n * @returns \n */\nexport function parseRelationshipTable(relationshipTable, characterTables = [], factionTable, aliasMap) {\n    const warnings = [];\n    const nodes = [];\n    const edges = [];\n    const nodeIds = new Set();\n    // \n    if (!relationshipTable || relationshipTable.rows.length === 0) {\n        return { elements: [], nodeCount: 0, edgeCount: 0, warnings: [''] };\n    }\n    const headers = relationshipTable.headers;\n    // \n    const sourceIdx = findColumnIndex(headers, ['source', '', '', '', 'from']);\n    const targetIdx = findColumnIndex(headers, ['target', '', '', '', 'to']);\n    const relationIdx = findColumnIndex(headers, ['', 'relation', '']);\n    const noteIdx = findColumnIndex(headers, ['', 'note', '', 'remark']);\n    // \n    if (sourceIdx === -1 || targetIdx === -1) {\n        return {\n            elements: [],\n            nodeCount: 0,\n            edgeCount: 0,\n            warnings: [' source/target '],\n        };\n    }\n    // \n    const protagonistNames = new Set();\n    const characterNames = new Set();\n    const factionNames = new Set();\n    // \n    characterTables.forEach(table => {\n        const tableName = table.name.toLowerCase();\n        const isProtagonist = tableName.includes('') || tableName.includes('protagonist');\n        const nameIdx = findColumnIndex(table.headers, ['', 'name', '', '']);\n        if (nameIdx !== -1) {\n            table.rows.forEach(row => {\n                const name = getCellValue(row, nameIdx);\n                if (name) {\n                    if (isProtagonist) {\n                        protagonistNames.add(name);\n                    }\n                    else {\n                        characterNames.add(name);\n                    }\n                }\n            });\n        }\n    });\n    // \n    if (factionTable) {\n        const nameIdx = findColumnIndex(factionTable.headers, ['', 'name', '']);\n        if (nameIdx !== -1) {\n            factionTable.rows.forEach(row => {\n                const name = getCellValue(row, nameIdx);\n                if (name)\n                    factionNames.add(name);\n            });\n        }\n    }\n    /**\n     * \n     */\n    function getNodeType(name) {\n        if (protagonistNames.has(name))\n            return 'protagonist';\n        if (characterNames.has(name))\n            return 'character';\n        if (factionNames.has(name))\n            return 'faction';\n        return 'unknown';\n    }\n    /**\n     * \n     * - : \n     * - : \n     */\n    function addNode(name) {\n        if (!name || nodeIds.has(name))\n            return;\n        nodeIds.add(name);\n        const nodeType = getNodeType(name);\n        // \n        const defaultLabel = getDefaultLabel(name);\n        nodes.push({\n            data: {\n                id: name,\n                label: defaultLabel,\n                type: nodeType,\n            },\n            classes: nodeType,\n        });\n    }\n    // \n    relationshipTable.rows.forEach((row, rowIndex) => {\n        const rawSource = getCellValue(row, sourceIdx);\n        const rawTarget = getCellValue(row, targetIdx);\n        const relation = relationIdx !== -1 ? getCellValue(row, relationIdx) : '';\n        const note = noteIdx !== -1 ? getCellValue(row, noteIdx) : '';\n        // \n        if (!rawSource || !rawTarget) {\n            if (rawSource || rawTarget) {\n                warnings.push(` ${rowIndex + 1} source: \"${rawSource}\", target: \"${rawTarget}\"`);\n            }\n            return;\n        }\n        // \n        const source = resolveAlias(rawSource, aliasMap);\n        const target = resolveAlias(rawTarget, aliasMap);\n        // \n        addNode(source);\n        addNode(target);\n        // \n        const colorResult = getRelationColor(relation);\n        // \n        edges.push({\n            data: {\n                id: `edge-${rowIndex}`,\n                source,\n                target,\n                label: relation || '',\n                note,\n                color: colorResult.color,\n                lineStyle: shouldUseDashedLine(note) ? 'dashed' : 'solid',\n                level: colorResult.level,\n            },\n        });\n    });\n    return {\n        elements: [...nodes, ...edges],\n        nodeCount: nodes.length,\n        edgeCount: edges.length,\n        warnings,\n    };\n}\n/**\n * \n */\nexport function findRelationshipTable(tables) {\n    return tables.find(t => isRelationshipTable(t.name, t.id)) || null;\n}\n/**\n * \n */\nexport function findFactionTable(tables) {\n    const keywords = ['', 'faction', '', 'organization', ''];\n    return (tables.find(t => {\n        const name = t.name.toLowerCase();\n        const id = t.id.toLowerCase();\n        return keywords.some(kw => name.includes(kw) || id.includes(kw));\n    }) || null);\n}\n/**\n * \n */\nexport function findCharacterTables(tables) {\n    return tables.filter(t => isCharacterTable(t.name, t.id) && !isRelationshipTable(t.name, t.id));\n}\n/**\n * \n *\n * \n * - \"\"  target: , relation: \n * - \"\"  targets: [, ], relation: \n * - \"\"  target: , relation: , note: \n * -   ; \n * -  \n *\n * @param text \n * @param knownNames \n * @returns \n */\nexport function parseEmbeddedRelationship(text, knownNames = new Set()) {\n    if (!text || typeof text !== 'string')\n        return [];\n    const results = [];\n    //  ; \n    const segments = text\n        .split(/[;]/)\n        .map(s => s.trim())\n        .filter(Boolean);\n    for (const segment of segments) {\n        // \n        let note = '';\n        let cleanSegment = segment;\n        const bracketMatch = segment.match(/[(]([^)]+)[)]/);\n        if (bracketMatch) {\n            note = bracketMatch[1];\n            cleanSegment = segment.replace(/[(][^)]+[)]/g, '').trim();\n        }\n        // \n        cleanSegment = cleanSegment.replace(/[\"\"]([^\"\"]+)[\"\"]/g, '$1');\n        // 1: {A}{B}{}\n        const multiTargetMatch = cleanSegment.match(/^(.+?)(.+?)(.+)$/);\n        if (multiTargetMatch) {\n            const target1 = multiTargetMatch[1].trim();\n            const target2 = multiTargetMatch[2].trim();\n            const relations = multiTargetMatch[3]\n                .split(/[,]/)\n                .map(r => r.trim())\n                .filter(Boolean);\n            for (const relation of relations) {\n                const cleanedRelation = cleanRelationText(relation);\n                if (cleanedRelation) {\n                    results.push({\n                        targets: [target1, target2],\n                        relation: cleanedRelation,\n                        note,\n                    });\n                }\n            }\n            continue;\n        }\n        // 2: {A}{B}...{}\n        //  \"\"  targets: [, ], relation: \n        const commaMultiTargetMatch = cleanSegment.match(/^(.+?[,].+?)(.+)$/);\n        if (commaMultiTargetMatch) {\n            const targetsText = commaMultiTargetMatch[1];\n            const relationsText = commaMultiTargetMatch[2];\n            // \n            const targets = targetsText\n                .split(/[,]/)\n                .map(t => t.trim())\n                .filter(Boolean);\n            // \n            if (targets.length > 1) {\n                // \n                const relations = relationsText\n                    .split(/[,]/)\n                    .map(r => r.trim())\n                    .filter(Boolean);\n                for (const relation of relations) {\n                    const cleanedRelation = cleanRelationText(relation);\n                    if (cleanedRelation) {\n                        results.push({\n                            targets,\n                            relation: cleanedRelation,\n                            note,\n                        });\n                    }\n                }\n                continue;\n            }\n        }\n        // 3: {}{}\n        const singleTargetMatch = cleanSegment.match(/^(.+?)(.+)$/);\n        if (singleTargetMatch) {\n            const target = singleTargetMatch[1].trim();\n            const relationsText = singleTargetMatch[2];\n            //  \"\" \n            //  \"\"  \"\"SM\"\"\n            let relations;\n            if (relationsText.includes('')) {\n                //  \"\" \n                relations = relationsText\n                    .split(//)\n                    .map(r => r.trim())\n                    .filter(Boolean);\n            }\n            else {\n                //  \n                relations = relationsText\n                    .split(/[,]/)\n                    .map(r => r.trim())\n                    .filter(Boolean);\n            }\n            for (const relation of relations) {\n                const cleanedRelation = cleanRelationText(relation);\n                if (cleanedRelation) {\n                    results.push({\n                        targets: [target],\n                        relation: cleanedRelation,\n                        note,\n                    });\n                }\n            }\n            continue;\n        }\n        // 4: {}{}  {}:{}\n        //  \"\"  \":\"\n        const colonMatch = cleanSegment.match(/^(.+?)[:](.+)$/);\n        if (colonMatch) {\n            const target = colonMatch[1].trim();\n            const relationsText = colonMatch[2].trim();\n            // \n            const relations = relationsText\n                .split(/[,]/)\n                .map(r => r.trim())\n                .filter(Boolean);\n            for (const relation of relations) {\n                const cleanedRelation = cleanRelationText(relation);\n                if (cleanedRelation) {\n                    results.push({\n                        targets: [target],\n                        relation: cleanedRelation,\n                        note,\n                    });\n                }\n            }\n            continue;\n        }\n        // \n        console.info(`[RelationshipParser] : \"${segment}\"`);\n    }\n    return results;\n}\n/**\n *  Cytoscape \n *\n * @param characterTables \n * @param factionTable \n * @param aliasMap \n * @returns \n */\nexport function parseEmbeddedRelationships(characterTables = [], factionTable, aliasMap) {\n    const warnings = [];\n    const nodes = [];\n    const edges = [];\n    const nodeIds = new Set();\n    let edgeIndex = 0;\n    // \n    const allCharacterNames = new Set();\n    const protagonistNames = new Set();\n    const characterNames = new Set();\n    // \n    characterTables.forEach(table => {\n        const tableName = table.name.toLowerCase();\n        const isProtagonist = tableName.includes('') || tableName.includes('protagonist');\n        const nameIdx = findColumnIndex(table.headers, ['', 'name', '', '']);\n        if (nameIdx !== -1) {\n            table.rows.forEach(row => {\n                const name = getCellValue(row, nameIdx);\n                if (name) {\n                    allCharacterNames.add(name);\n                    if (isProtagonist) {\n                        protagonistNames.add(name);\n                    }\n                    else {\n                        characterNames.add(name);\n                    }\n                }\n            });\n        }\n    });\n    /**\n     * \n     */\n    function getNodeType(name) {\n        if (protagonistNames.has(name))\n            return 'protagonist';\n        if (characterNames.has(name))\n            return 'character';\n        return 'unknown';\n    }\n    /**\n     * \n     * - : \n     * - : \n     */\n    function addNode(name) {\n        if (!name || nodeIds.has(name))\n            return;\n        nodeIds.add(name);\n        const nodeType = getNodeType(name);\n        // \n        const defaultLabel = getDefaultLabel(name);\n        nodes.push({\n            data: {\n                id: name,\n                label: defaultLabel,\n                type: nodeType,\n            },\n            classes: nodeType,\n        });\n    }\n    //  sourcetarget \n    // key: \"source->target\", value: { relations: string[], notes: string[], color: string, level: string }\n    const edgeCache = new Map();\n    // \n    characterTables.forEach(table => {\n        const nameIdx = findColumnIndex(table.headers, ['', 'name', '', '']);\n        const relationColIdx = findColumnIndex(table.headers, ['', '', 'relationship', 'relations']);\n        if (nameIdx === -1 || relationColIdx === -1) {\n            return; // \n        }\n        table.rows.forEach(row => {\n            const sourceName = getCellValue(row, nameIdx);\n            const relationText = getCellValue(row, relationColIdx);\n            if (!sourceName || !relationText)\n                return;\n            // \n            addNode(sourceName);\n            // \n            const parsedRelations = parseEmbeddedRelationship(relationText, allCharacterNames);\n            for (const parsed of parsedRelations) {\n                // \n                const cleanedRelation = cleanRelationText(parsed.relation);\n                if (!cleanedRelation)\n                    continue;\n                for (const rawTarget of parsed.targets) {\n                    // \n                    const target = resolveAlias(rawTarget, aliasMap);\n                    // \n                    addNode(target);\n                    // \n                    const edgeKey = `${sourceName}->${target}`;\n                    // \n                    const colorResult = getRelationColor(cleanedRelation);\n                    const useDashed = shouldUseDashedLine(parsed.note, cleanedRelation);\n                    // \n                    if (edgeCache.has(edgeKey)) {\n                        const cached = edgeCache.get(edgeKey);\n                        // \n                        if (!cached.relations.includes(cleanedRelation)) {\n                            cached.relations.push(cleanedRelation);\n                        }\n                        // \n                        if (parsed.note && !cached.notes.includes(parsed.note)) {\n                            cached.notes.push(parsed.note);\n                        }\n                        // S > A > E > D > B > C > ?\n                        const priorityOrder = ['S', 'A', 'E', 'D', 'B', 'C', '?'];\n                        const currentPriority = priorityOrder.indexOf(cached.level);\n                        const newPriority = priorityOrder.indexOf(colorResult.level);\n                        if (newPriority < currentPriority || currentPriority === -1) {\n                            cached.color = colorResult.color;\n                            cached.level = colorResult.level;\n                        }\n                        // \n                        if (useDashed) {\n                            cached.useDashed = true;\n                        }\n                    }\n                    else {\n                        edgeCache.set(edgeKey, {\n                            relations: [parsed.relation],\n                            notes: parsed.note ? [parsed.note] : [],\n                            color: colorResult.color,\n                            level: colorResult.level,\n                            useDashed,\n                        });\n                    }\n                }\n            }\n        });\n    });\n    // \n    const processedPairs = new Set(); // \n    edgeCache.forEach((cached, edgeKey) => {\n        const [source, target] = edgeKey.split('->');\n        // \n        const pairKey = [source, target].sort().join('<->');\n        if (processedPairs.has(pairKey)) {\n            return; // \n        }\n        // \n        const reverseKey = `${target}->${source}`;\n        const reverseEdge = edgeCache.get(reverseKey);\n        // \n        //   \n        let isBidirectional = false;\n        if (reverseEdge) {\n            const sortedRelations = [...cached.relations].sort().join(',');\n            const sortedReverseRelations = [...reverseEdge.relations].sort().join(',');\n            isBidirectional = sortedRelations === sortedReverseRelations;\n        }\n        //  / \n        const label = cached.relations.join('/');\n        const note = cached.notes.join('; ');\n        if (isBidirectional) {\n            // \n            processedPairs.add(pairKey);\n            // \n            edges.push({\n                data: {\n                    id: `edge-${edgeIndex++}`,\n                    source,\n                    target,\n                    label: label || '',\n                    note,\n                    color: cached.color,\n                    lineStyle: cached.useDashed ? 'dashed' : 'solid',\n                    level: cached.level,\n                    bidirectional: true, // \n                },\n            });\n        }\n        else {\n            // \n            edges.push({\n                data: {\n                    id: `edge-${edgeIndex++}`,\n                    source,\n                    target,\n                    label: label || '',\n                    note,\n                    color: cached.color,\n                    lineStyle: cached.useDashed ? 'dashed' : 'solid',\n                    level: cached.level,\n                    bidirectional: false,\n                },\n            });\n        }\n    });\n    if (nodes.length === 0) {\n        warnings.push('');\n    }\n    return {\n        elements: [...nodes, ...edges],\n        nodeCount: nodes.length,\n        edgeCount: edges.length,\n        warnings,\n    };\n}\n","/**\n * \n * \n */\n\n/**\n *  Base64\n * @param file \n * @returns Base64  ( data:image/xxx;base64, )\n */\nexport function fileToBase64(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => resolve(reader.result as string);\n    reader.onerror = reject;\n  });\n}\n\n/**\n * \n * @param base64  Base64 \n * @param maxWidth  ( 100)\n * @param quality  0-1 ( 0.8)\n * @returns  Base64 \n */\nexport function compressImage(base64: string, maxWidth = 100, quality = 0.8): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      try {\n        const canvas = document.createElement('canvas');\n        const scale = Math.min(1, maxWidth / Math.max(img.width, img.height));\n        canvas.width = img.width * scale;\n        canvas.height = img.height * scale;\n\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n          reject(new Error(' canvas context'));\n          return;\n        }\n\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n        resolve(canvas.toDataURL('image/jpeg', quality));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    img.onerror = () => reject(new Error(''));\n    img.src = base64;\n  });\n}\n\n/**\n * \n * \n * @param base64  Base64 \n * @param size  ( 100)\n * @param quality  0-1 ( 0.8)\n * @returns  Base64 \n */\nexport function compressImageSquare(base64: string, size = 100, quality = 0.8): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.onload = () => {\n      try {\n        const canvas = document.createElement('canvas');\n        canvas.width = size;\n        canvas.height = size;\n\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n          reject(new Error(' canvas context'));\n          return;\n        }\n\n        // \n        const minDim = Math.min(img.width, img.height);\n        const sx = (img.width - minDim) / 2;\n        const sy = (img.height - minDim) / 2;\n\n        //  (sx, sy)  minDim x minDim \n        //  canvas  (0, 0)  size x size\n        ctx.drawImage(img, sx, sy, minDim, minDim, 0, 0, size, size);\n        resolve(canvas.toDataURL('image/jpeg', quality));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    img.onerror = () => reject(new Error(''));\n    img.src = base64;\n  });\n}\n\n/**\n *  Base64 \n * @param base64 Base64 \n * @returns \n */\nexport function getBase64Size(base64: string): number {\n  //  data:image/xxx;base64, \n  const base64Data = base64.split(',')[1] || base64;\n  // Base64  4/3\n  return Math.ceil(base64Data.length * 0.75);\n}\n\n/**\n * \n * @param bytes \n * @returns  ( \"50 KB\")\n */\nexport function formatFileSize(bytes: number): string {\n  if (bytes < 1024) return `${bytes} B`;\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n}\n\n/**\n * \n * @param options.maxWidth  ( 100)\n * @param options.quality  ( 0.8)\n * @param options.maxSizeKB  KB ( 50)\n * @returns Base64  null\n */\nexport function uploadImage(options?: {\n  maxWidth?: number;\n  quality?: number;\n  maxSizeKB?: number;\n}): Promise<string | null> {\n  const { maxWidth = 100, quality = 0.8, maxSizeKB = 50 } = options || {};\n\n  return new Promise(resolve => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.accept = 'image/*';\n\n    input.onchange = async () => {\n      const file = input.files?.[0];\n      if (!file) {\n        resolve(null);\n        return;\n      }\n\n      try {\n        let base64 = await fileToBase64(file);\n\n        // \n        base64 = await compressImage(base64, maxWidth, quality);\n\n        // \n        const sizeKB = getBase64Size(base64) / 1024;\n        if (sizeKB > maxSizeKB) {\n          // \n          base64 = await compressImage(base64, maxWidth * 0.7, quality * 0.7);\n          const newSizeKB = getBase64Size(base64) / 1024;\n          if (newSizeKB > maxSizeKB) {\n            console.warn(`[ACU]  ${maxSizeKB}KB (${newSizeKB.toFixed(1)}KB)`);\n          }\n        }\n\n        resolve(base64);\n      } catch (e) {\n        console.error('[ACU] :', e);\n        resolve(null);\n      }\n    };\n\n    input.oncancel = () => resolve(null);\n    input.click();\n  });\n}\n\n/**\n *  hex  rgba\n * @param hex Hex  ( '#ff0000')\n * @param opacity  0-100\n * @returns rgba \n */\nexport function hexToRgba(hex: string, opacity: number): string {\n  const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  if (!result) return hex;\n  const r = parseInt(result[1], 16);\n  const g = parseInt(result[2], 16);\n  const b = parseInt(result[3], 16);\n  return `rgba(${r}, ${g}, ${b}, ${opacity / 100})`;\n}\n\n/**\n *  rgba  hex  opacity\n * @param rgba rgba \n * @returns { hex, opacity }\n */\nexport function rgbaToHex(rgba: string): { hex: string; opacity: number } {\n  const match = rgba.match(/rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*([\\d.]+))?\\)/);\n  if (!match) return { hex: rgba, opacity: 100 };\n\n  const r = parseInt(match[1]).toString(16).padStart(2, '0');\n  const g = parseInt(match[2]).toString(16).padStart(2, '0');\n  const b = parseInt(match[3]).toString(16).padStart(2, '0');\n  const opacity = match[4] ? Math.round(parseFloat(match[4]) * 100) : 100;\n\n  return { hex: `#${r}${g}${b}`, opacity };\n}\n","/**\n * \n * \n */\nimport type { RawDatabaseData } from '../types';\n\n// \nexport * from './relationshipColors';\nexport * from './relationshipParser';\n\n// \nexport * from './imageUpload';\n\n/**\n *  (jQuery  API)\n */\nexport function getCore() {\n  const w = window.parent || window;\n  return {\n    $: (window as any).jQuery || (w as any).jQuery,\n    getDB: () => (w as any).AutoCardUpdaterAPI || (window as any).AutoCardUpdaterAPI,\n  };\n}\n\n/**\n *  (API )\n */\nexport function getTableData(): RawDatabaseData | null {\n  const api = getCore().getDB();\n  try {\n    return api && api.exportTableAsJson ? api.exportTableAsJson() : null;\n  } catch (e) {\n    console.warn('[ACU] getTableData error:', e);\n    return null;\n  }\n}\n\n/**\n *  JSON \n * \n *  name  sheet\n */\nexport function processJsonData(data: any): Record<string, { key: string; headers: any[]; rows: any[][] }> | null {\n  if (!data || typeof data !== 'object') return {};\n  const tables: Record<string, { key: string; headers: any[]; rows: any[][] }> = {};\n  for (const sheetId in data) {\n    //  name  sheet\n    if (data[sheetId]?.name) {\n      const sheet = data[sheetId];\n      tables[sheet.name] = {\n        key: sheetId, //  Key \n        headers: sheet.content?.[0] || [],\n        rows: sheet.content?.slice(1) || [],\n      };\n    }\n  }\n  //  null\n  return Object.keys(tables).length > 0 ? tables : null;\n}\n\n/**\n * \n */\nexport function getIconForTableName(name: string): string {\n  if (name.includes('')) return 'fa-tachometer-alt';\n  if (name.includes('')) return 'fa-list-check';\n  if (name.includes('') || name.includes('')) return 'fa-user-circle';\n  if (name.includes('') || name.includes('') || name.includes('NPC')) return 'fa-users';\n  if (name.includes('') || name.includes('')) return 'fa-tasks';\n  if (name.includes('') || name.includes('') || name.includes('')) return 'fa-box-open';\n  if (name.includes('') || name.includes('')) return 'fa-bolt';\n  if (name.includes('') || name.includes('')) return 'fa-map-marked-alt';\n  if (name.includes('') || name.includes('')) return 'fa-book';\n  return 'fa-table';\n}\n\n/**\n * \n *  class\n */\nexport function getBadgeStyle(text: string): string {\n  if (!text) return '';\n  const str = String(text);\n  if (str === 'True' || str === 'Yes' || str === '' || str === '') return 'acu-badge-success';\n  if (str === 'False' || str === 'No' || str === '' || str === '') return 'acu-badge-danger';\n  if (str === '' || str === 'Doing') return 'acu-badge-warning';\n  if (/^\\d+%$/.test(str)) return 'acu-badge-info'; // \n  if (/^Lv\\.?\\d+$/i.test(str)) return 'acu-badge-primary'; // \n  return '';\n}\n","/**\n * ACU Visualizer - Parent Style Injection Composable\n *\n *  iframe \n *  teleport  CSS  window.parent.document.head\n */\n\nimport { computed, onMounted, onUnmounted, ref, watch } from 'vue';\nimport { FONTS, THEMES, useConfigStore } from '../stores/useConfigStore';\nimport { useThemeStore } from '../stores/useThemeStore';\nimport { getCore } from '../utils/index';\n\n//  CSS ?raw \nimport compiledStyles from '../styles/index.scss?raw';\n\n//  ID \nconst STYLE_ID_PREFIX = 'acu-styles';\n\n//  ID\nconst DYNAMIC_FONT_ID = 'acu-dynamic-font';\n\n//  CSS ID\nconst THEME_CUSTOM_ID = 'acu-theme-custom';\n\ndeclare function getScriptId(): string;\n\n/**\n *  Hex  RGB \n * @param hex -  \"#d35400\"  \"d35400\"\n * @returns  \"211, 84, 0\"\n */\nfunction hexToRgb(hex: string): string {\n  const h = hex.replace('#', '');\n  const bigint = parseInt(h, 16);\n  const r = (bigint >> 16) & 255;\n  const g = (bigint >> 8) & 255;\n  const b = bigint & 255;\n  return `${r}, ${g}, ${b}`;\n}\n\n/**\n *  Composable\n *\n * \n * 1. \n * 2.  CSS \n * 3. \n * 4. \n * 5. \n */\nexport function useParentStyleInjection() {\n  const configStore = useConfigStore();\n  const themeStore = useThemeStore();\n  const { $ } = getCore();\n\n  //  document\n  const getParentDoc = () => {\n    try {\n      return window.parent?.document || document;\n    } catch {\n      return document;\n    }\n  };\n\n  //  ID\n  const scriptId = computed(() => {\n    try {\n      return getScriptId();\n    } catch {\n      return 'acu-visualizer';\n    }\n  });\n\n  // \n  const baseStyleEl = ref<HTMLStyleElement | null>(null);\n  const dynamicStyleEl = ref<HTMLStyleElement | null>(null);\n  const fontStyleEl = ref<HTMLStyleElement | null>(null);\n  const themeCustomStyleEl = ref<HTMLStyleElement | null>(null);\n\n  // \n  const isInitialized = ref(false);\n\n  /**\n   *  CSS\n   */\n  const getFontImportCSS = (): string => {\n    return `\n      @import url(\"https://fontsapi.zeoseven.com/3/main/result.css\");   /*  */\n      @import url(\"https://fontsapi.zeoseven.com/442/main/result.css\"); /* Maple Mono */\n      @import url(\"https://fontsapi.zeoseven.com/256/main/result.css\"); /*  */\n      @import url(\"https://fontsapi.zeoseven.com/482/main/result.css\"); /* Cooper */\n      @import url(\"https://fontsapi.zeoseven.com/446/main/result.css\"); /* YFFYT */\n      @import url(\"https://fontsapi.zeoseven.com/570/main/result.css\"); /* Fusion Pixel */\n      @import url(\"https://fontsapi.zeoseven.com/292/main/result.css\"); /*  */\n      @import url(\"https://fontsapi.zeoseven.com/69/main/result.css\");  /*  */\n      @import url(\"https://fontsapi.zeoseven.com/7/main/result.css\");   /*  */\n    `;\n  };\n\n  /**\n   *  CSS \n   */\n  const getFontFamilyValue = (): string => {\n    const fontId = configStore.config.fontFamily || 'default';\n    const font = FONTS.find(f => f.id === fontId);\n    return font?.val || FONTS[0].val;\n  };\n\n  /**\n   * \n   * \n   */\n  const injectBaseStyles = (): void => {\n    const parentDoc = getParentDoc();\n    const styleId = `${STYLE_ID_PREFIX}-base-${scriptId.value}`;\n\n    // \n    if (parentDoc.getElementById(styleId)) {\n      console.info('[ACU Styles] Base styles already injected');\n      baseStyleEl.value = parentDoc.getElementById(styleId) as HTMLStyleElement;\n      return;\n    }\n\n    // \n    const styleEl = parentDoc.createElement('style');\n    styleEl.id = styleId;\n    styleEl.setAttribute('data-source', 'acu-visualizer');\n    styleEl.textContent = compiledStyles;\n    parentDoc.head.appendChild(styleEl);\n    baseStyleEl.value = styleEl;\n\n    console.info('[ACU Styles] Base styles injected');\n  };\n\n  /**\n   * \n   */\n  const injectFontStyles = (): void => {\n    const parentDoc = getParentDoc();\n    const styleId = `${DYNAMIC_FONT_ID}-${scriptId.value}`;\n\n    // \n    parentDoc.getElementById(styleId)?.remove();\n\n    // \n    const styleEl = parentDoc.createElement('style');\n    styleEl.id = styleId;\n    styleEl.setAttribute('data-source', 'acu-visualizer');\n\n    const fontFamily = getFontFamilyValue();\n    styleEl.textContent = `\n      ${getFontImportCSS()}\n\n      /*  */\n      .acu-wrapper,\n      .acu-modal-container,\n      .acu-attachment-picker-overlay,\n      .acu-toast,\n      .acu-edit-dialog,\n      .acu-cell-menu,\n      .acu-nav-container,\n      #acu-ghost-preview {\n        font-family: ${fontFamily} !important;\n      }\n\n      /*  */\n      .acu-wrapper p,\n      .acu-wrapper div:not(.fa):not(.fas):not(.far):not(.fab),\n      .acu-wrapper span:not(.fa):not(.fas):not(.far):not(.fab),\n      .acu-wrapper label,\n      .acu-wrapper button,\n      .acu-wrapper a,\n      .acu-wrapper input,\n      .acu-wrapper select,\n      .acu-wrapper textarea,\n      .acu-wrapper th,\n      .acu-wrapper td,\n      .acu-modal-container p,\n      .acu-modal-container div:not(.fa):not(.fas):not(.far):not(.fab),\n      .acu-modal-container span:not(.fa):not(.fas):not(.far):not(.fab),\n      .acu-modal-container label,\n      .acu-modal-container button,\n      .acu-modal-container a,\n      .acu-modal-container input,\n      .acu-modal-container select,\n      .acu-modal-container textarea,\n      .acu-modal-container th,\n      .acu-modal-container td {\n        font-family: ${fontFamily} !important;\n      }\n\n      /* Toast -  */\n      .acu-toast,\n      .acu-toast p,\n      .acu-toast div,\n      .acu-toast span,\n      .acu-toast-message,\n      .acu-toast.acu-toast-success,\n      .acu-toast.acu-toast-success span,\n      .acu-toast.acu-toast-error,\n      .acu-toast.acu-toast-error span,\n      .acu-toast.acu-toast-warning,\n      .acu-toast.acu-toast-warning span,\n      .acu-toast.acu-toast-info,\n      .acu-toast.acu-toast-info span {\n        font-family: ${fontFamily} !important;\n        color: var(--acu-text-main) !important;\n        text-shadow: none !important;\n      }\n\n      /* Toast  */\n      .acu-toast i {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n        color: var(--acu-text-main) !important;\n      }\n\n      /* Tab/ -  */\n      .acu-tab-btn,\n      .acu-tab-btn span,\n      .acu-tab-btn i,\n      .acu-nav-btn,\n      .acu-nav-btn span,\n      .acu-nav-btn i {\n        font-family: ${fontFamily} !important;\n        text-shadow: none !important;\n        color: var(--acu-text-main) !important;\n      }\n\n      /*  - () */\n      .acu-nav-btn.active,\n      .acu-nav-btn.active span,\n      .acu-nav-btn.active i {\n        background: var(--acu-text-main) !important;\n        background-color: var(--acu-text-main) !important;\n        color: var(--acu-bg-panel) !important;\n      }\n\n      /*  */\n      .acu-data-card,\n      .acu-data-card p,\n      .acu-data-card div:not(.fa):not(.fas):not(.far):not(.fab),\n      .acu-data-card span:not(.fa):not(.fas):not(.far):not(.fab),\n      .acu-card-label,\n      .acu-card-value,\n      .acu-grid-label,\n      .acu-grid-value,\n      .acu-full-label,\n      .acu-full-value,\n      .acu-editable-title {\n        font-family: ${fontFamily} !important;\n        text-shadow: none !important;\n      }\n\n      /*  */\n      .acu-panel-title,\n      .acu-settings-label,\n      .acu-btn-block,\n      .acu-nav-btn,\n      .acu-edit-textarea {\n        font-family: ${fontFamily} !important;\n      }\n\n      /*  Font Awesome  */\n      .acu-wrapper i.fa,\n      .acu-wrapper i.fas,\n      .acu-wrapper i.far,\n      .acu-wrapper i.fab,\n      .acu-wrapper .fa,\n      .acu-wrapper .fas,\n      .acu-wrapper .far,\n      .acu-wrapper .fab,\n      .acu-modal-container i.fa,\n      .acu-modal-container i.fas,\n      .acu-modal-container i.far,\n      .acu-modal-container i.fab,\n      .acu-modal-container .fa,\n      .acu-modal-container .fas,\n      .acu-modal-container .far,\n      .acu-modal-container .fab {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n      }\n\n      /*  -  text-shadow */\n      .acu-wrapper p,\n      .acu-wrapper div,\n      .acu-wrapper span,\n      .acu-wrapper label,\n      .acu-wrapper button,\n      .acu-modal-container p,\n      .acu-modal-container div,\n      .acu-modal-container span,\n      .acu-modal-container label,\n      .acu-modal-container button {\n        text-shadow: none !important;\n      }\n\n      /*  -  +  */\n      .acu-editable-title,\n      .acu-panel-title {\n        color: var(--acu-title-color) !important;\n        font-family: ${fontFamily} !important;\n      }\n\n      /*  */\n      .acu-dash-title,\n      .acu-dash-title span,\n      .acu-dash-title-text {\n        font-family: ${fontFamily} !important;\n        color: var(--acu-title-color) !important;\n        text-shadow: none !important;\n      }\n\n      /*  */\n      .acu-dash-title i,\n      .acu-dash-empty i,\n      .acu-dash-card i,\n      .acu-dash-npc-item i {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n        color: var(--acu-text-sub) !important;\n      }\n\n      /*  */\n      .acu-dash-empty,\n      .acu-dash-empty span {\n        font-family: ${fontFamily} !important;\n        color: var(--acu-text-sub) !important;\n        text-shadow: none !important;\n      }\n\n      /* \"\" */\n      .acu-empty-state,\n      .acu-empty-state p,\n      .acu-empty-state span,\n      .acu-no-data {\n        font-family: ${fontFamily} !important;\n        color: var(--acu-text-sub) !important;\n        text-shadow: none !important;\n      }\n\n      /*  */\n      .acu-empty-state i {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n        color: var(--acu-text-sub) !important;\n      }\n\n      /*  label -  */\n      label.acu-card-label,\n      label.acu-grid-label,\n      label.acu-full-label,\n      .acu-data-card label.acu-card-label,\n      .acu-data-card label.acu-grid-label,\n      .acu-data-card label.acu-full-label,\n      .acu-wrapper label.acu-card-label,\n      .acu-wrapper label.acu-grid-label,\n      .acu-wrapper label.acu-full-label {\n        font-family: ${fontFamily} !important;\n        font-size: calc(var(--acu-font-size, 13px) - 2px) !important;\n        text-shadow: none !important;\n      }\n\n      /* hint -  */\n      .acu-wrapper .hint,\n      .acu-wrapper .acu-text-sub,\n      .acu-modal-container .hint,\n      .acu-modal-container .acu-text-sub,\n      .acu-settings-label .hint {\n        color: var(--acu-text-sub) !important;\n        font-size: calc(var(--acu-font-size, 13px) - 2px) !important;\n      }\n\n      /* Tab/Nav  Font Awesome */\n      .acu-tab-btn i,\n      .acu-nav-btn i {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n      }\n\n      /*  */\n      .acu-manual-update-dialog p,\n      .acu-manual-update-dialog div,\n      .acu-manual-update-dialog span,\n      .acu-manual-update-dialog label,\n      .acu-modal-body p,\n      .acu-modal-body div,\n      .acu-modal-body span,\n      .acu-modal-body label {\n        color: var(--acu-text-main) !important;\n        text-shadow: none !important;\n      }\n\n      /*  -  */\n      .acu-modal-back,\n      .acu-modal-back i,\n      .acu-back-btn,\n      .acu-back-btn i {\n        color: var(--acu-text-main) !important;\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n      }\n\n      /*  */\n      .acu-modal-close i,\n      .acu-close-pill i {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n        color: inherit !important;\n      }\n\n      /*  -  */\n      .acu-wrapper button,\n      .acu-modal-container button,\n      .acu-close-pill,\n      .acu-tool-btn,\n      .acu-btn,\n      .acu-btn-primary,\n      .acu-btn-secondary,\n      .acu-btn-danger,\n      .acu-btn-save,\n      .btn-cancel,\n      .btn-confirm,\n      .acu-preset-dropdown-btn,\n      .acu-modal-btn,\n      .acu-action-btn,\n      .acu-page-btn,\n      .acu-dialog-btn {\n        font-family: ${fontFamily} !important;\n      }\n\n      /* CSS */\n      .acu-theme-panel button,\n      .acu-css-actions button,\n      .acu-css-actions .acu-tool-btn {\n        font-family: ${fontFamily} !important;\n      }\n\n      /*  */\n      .acu-avatar-manager-modal button,\n      .acu-avatar-manager-modal label,\n      .acu-avatar-manager-modal span,\n      .acu-avatar-manager button,\n      .acu-avatar-manager label,\n      .acu-avatar-manager span,\n      .acu-avatar-dialog button,\n      .acu-avatar-dialog label,\n      .acu-avatar-dialog span {\n        font-family: ${fontFamily} !important;\n      }\n\n      /*  -  */\n      .acu-modal-header i:not(.acu-close-pill i),\n      .acu-settings-title i {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n        color: var(--acu-text-main) !important;\n      }\n    `;\n\n    parentDoc.head.appendChild(styleEl);\n    fontStyleEl.value = styleEl;\n\n    console.info('[ACU Styles] Font styles injected');\n  };\n\n  /**\n   * \n   */\n  const createDynamicStyleElement = (): void => {\n    const parentDoc = getParentDoc();\n    const styleId = `${STYLE_ID_PREFIX}-dynamic-${scriptId.value}`;\n\n    // \n    parentDoc.getElementById(styleId)?.remove();\n\n    // \n    const styleEl = parentDoc.createElement('style');\n    styleEl.id = styleId;\n    styleEl.setAttribute('data-source', 'acu-visualizer');\n    parentDoc.head.appendChild(styleEl);\n    dynamicStyleEl.value = styleEl;\n\n    console.info('[ACU Styles] Dynamic styles element created');\n  };\n\n  /**\n   *  CSS \n   */\n  const updateDynamicVariables = (): void => {\n    if (!dynamicStyleEl.value) return;\n\n    const config = configStore.config;\n    const highlightColor = configStore.highlightColorObj;\n    const highlightManualColor = configStore.highlightManualColorObj;\n    const highlightAiColor = configStore.highlightAiColorObj;\n    const titleColor = configStore.titleColorObj;\n\n    // \n    const gridColumnsCss =\n      config.gridColumns && config.gridColumns > 0\n        ? `repeat(${config.gridColumns}, 1fr)`\n        : 'repeat(auto-fill, minmax(110px, 1fr))';\n\n    //  CSS \n    const dynamicCSS = `\n      .acu-wrapper,\n      .acu-modal-container,\n      .acu-attachment-picker-overlay,\n      .acu-toast,\n      .acu-cell-menu {\n        /*  */\n        --acu-card-width: ${config.cardWidth || 280}px;\n        --acu-font-size: ${config.fontSize || 13}px;\n\n        /*  () */\n        --acu-highlight: ${highlightColor.main};\n        --acu-highlight-bg: ${highlightColor.bg};\n        --acu-accent: ${highlightColor.main};\n\n        /*  */\n        --acu-highlight-manual: ${highlightManualColor.main};\n        --acu-highlight-manual-bg: ${highlightManualColor.bg};\n\n        /* AI */\n        --acu-highlight-ai: ${highlightAiColor.main};\n        --acu-highlight-ai-bg: ${highlightAiColor.bg};\n\n        /*  */\n        --acu-title-color: ${titleColor.main};\n        --acu-title-color-bg: ${titleColor.bg};\n        --acu-title-color-rgb: ${hexToRgb(titleColor.main)};\n\n        /*  */\n        --acu-nav-cols: ${gridColumnsCss};\n\n        /*  */\n        --acu-text-max-height: ${config.limitLongText !== false ? '80px' : 'none'};\n        --acu-text-overflow: ${config.limitLongText !== false ? 'auto' : 'visible'};\n      }\n\n      /* ============================================================\n       *  ()\n       * ============================================================ */\n\n      /*  () -  */\n      .acu-cell-changed-manual .acu-grid-value,\n      .acu-cell-changed-manual .acu-full-value,\n      .acu-cell-changed-manual .acu-card-value,\n      .acu-cell-changed-manual .acu-grid-value *,\n      .acu-cell-changed-manual .acu-full-value *,\n      .acu-cell-changed-manual .acu-card-value *,\n      .acu-row-changed-manual .acu-editable-title {\n        color: var(--acu-highlight-manual) !important;\n        font-weight: 600;\n      }\n\n      /* AI () -  */\n      .acu-cell-changed-ai .acu-grid-value,\n      .acu-cell-changed-ai .acu-full-value,\n      .acu-cell-changed-ai .acu-card-value,\n      .acu-cell-changed-ai .acu-grid-value *,\n      .acu-cell-changed-ai .acu-full-value *,\n      .acu-cell-changed-ai .acu-card-value *,\n      .acu-row-changed-ai .acu-editable-title {\n        color: var(--acu-highlight-ai) !important;\n        font-weight: 600;\n      }\n\n      /*  () */\n      .acu-cell-changed:not(.acu-cell-changed-manual):not(.acu-cell-changed-ai) .acu-grid-value,\n      .acu-cell-changed:not(.acu-cell-changed-manual):not(.acu-cell-changed-ai) .acu-full-value,\n      .acu-cell-changed:not(.acu-cell-changed-manual):not(.acu-cell-changed-ai) .acu-card-value,\n      .acu-cell-changed:not(.acu-cell-changed-manual):not(.acu-cell-changed-ai) .acu-grid-value *,\n      .acu-cell-changed:not(.acu-cell-changed-manual):not(.acu-cell-changed-ai) .acu-full-value *,\n      .acu-cell-changed:not(.acu-cell-changed-manual):not(.acu-cell-changed-ai) .acu-card-value *,\n      .acu-highlight-changed {\n        color: var(--acu-title-color) !important;\n        font-weight: 600;\n      }\n\n      /* ============================================================\n       *  - \n       *  + !important \n       * ============================================================ */\n\n      /*  (Range Input)  */\n      .acu-wrapper input[type=\"range\"],\n      .acu-modal-container input[type=\"range\"],\n      .acu-settings-control input[type=\"range\"] {\n        -webkit-appearance: none !important;\n        -moz-appearance: none !important;\n        appearance: none !important;\n        background: transparent !important;\n        background-color: transparent !important;\n        background-image: none !important;\n        border: none !important;\n        box-shadow: none !important;\n        outline: none !important;\n        width: 120px !important;\n        height: 20px !important;\n      }\n\n      /*  - Webkit */\n      .acu-wrapper input[type=\"range\"]::-webkit-slider-thumb,\n      .acu-modal-container input[type=\"range\"]::-webkit-slider-thumb,\n      .acu-settings-control input[type=\"range\"]::-webkit-slider-thumb {\n        -webkit-appearance: none !important;\n        appearance: none !important;\n        width: 16px !important;\n        height: 16px !important;\n        background: var(--acu-title-color) !important;\n        background-color: var(--acu-title-color) !important;\n        background-image: none !important;\n        border-radius: 50% !important;\n        border: none !important;\n        margin-top: -5px !important;\n        cursor: pointer !important;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;\n      }\n\n      /*  - Webkit */\n      .acu-wrapper input[type=\"range\"]::-webkit-slider-runnable-track,\n      .acu-modal-container input[type=\"range\"]::-webkit-slider-runnable-track,\n      .acu-settings-control input[type=\"range\"]::-webkit-slider-runnable-track {\n        -webkit-appearance: none !important;\n        width: 100% !important;\n        height: 6px !important;\n        background: var(--acu-border) !important;\n        background-color: var(--acu-border) !important;\n        background-image: none !important;\n        border-radius: 3px !important;\n        border: none !important;\n        cursor: pointer !important;\n        box-shadow: none !important;\n      }\n\n      /*  - Firefox */\n      .acu-wrapper input[type=\"range\"]::-moz-range-thumb,\n      .acu-modal-container input[type=\"range\"]::-moz-range-thumb,\n      .acu-settings-control input[type=\"range\"]::-moz-range-thumb {\n        -moz-appearance: none !important;\n        width: 16px !important;\n        height: 16px !important;\n        background: var(--acu-title-color) !important;\n        background-color: var(--acu-title-color) !important;\n        background-image: none !important;\n        border-radius: 50% !important;\n        border: none !important;\n        cursor: pointer !important;\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;\n      }\n\n      /*  - Firefox */\n      .acu-wrapper input[type=\"range\"]::-moz-range-track,\n      .acu-modal-container input[type=\"range\"]::-moz-range-track,\n      .acu-settings-control input[type=\"range\"]::-moz-range-track {\n        -moz-appearance: none !important;\n        width: 100% !important;\n        height: 6px !important;\n        background: var(--acu-border) !important;\n        background-color: var(--acu-border) !important;\n        background-image: none !important;\n        border-radius: 3px !important;\n        border: none !important;\n        cursor: pointer !important;\n        box-shadow: none !important;\n      }\n\n      /* /  */\n      .acu-wrapper input[type=\"text\"],\n      .acu-wrapper input[type=\"number\"],\n      .acu-wrapper input[type=\"password\"],\n      .acu-wrapper select,\n      .acu-wrapper textarea,\n      .acu-modal-container input[type=\"text\"],\n      .acu-modal-container input[type=\"number\"],\n      .acu-modal-container input[type=\"password\"],\n      .acu-modal-container select,\n      .acu-modal-container textarea,\n      .acu-settings-control input[type=\"text\"],\n      .acu-settings-control input[type=\"number\"],\n      .acu-settings-control select {\n        background: var(--acu-card-bg) !important;\n        background-color: var(--acu-card-bg) !important;\n        background-image: none !important;\n        border: 1px solid var(--acu-border) !important;\n        border-radius: 6px !important;\n        color: var(--acu-text-main) !important;\n        font-family: inherit !important;\n        font-size: 13px !important;\n        text-shadow: none !important;\n        box-shadow: none !important;\n        backdrop-filter: none !important;\n        filter: none !important;\n      }\n\n      .acu-wrapper input[type=\"text\"]:hover,\n      .acu-wrapper input[type=\"number\"]:hover,\n      .acu-wrapper select:hover,\n      .acu-modal-container input[type=\"text\"]:hover,\n      .acu-modal-container input[type=\"number\"]:hover,\n      .acu-modal-container select:hover,\n      .acu-settings-control input:hover,\n      .acu-settings-control select:hover {\n        border-color: var(--acu-title-color) !important;\n        background: var(--acu-card-bg) !important;\n        background-color: var(--acu-card-bg) !important;\n        background-image: none !important;\n        box-shadow: 0 0 0 2px var(--acu-title-color-bg) !important;\n      }\n\n      .acu-wrapper input[type=\"text\"]:focus,\n      .acu-wrapper input[type=\"number\"]:focus,\n      .acu-wrapper select:focus,\n      .acu-modal-container input[type=\"text\"]:focus,\n      .acu-modal-container input[type=\"number\"]:focus,\n      .acu-modal-container select:focus,\n      .acu-settings-control input:focus,\n      .acu-settings-control select:focus {\n        border-color: var(--acu-title-color) !important;\n        background: var(--acu-card-bg) !important;\n        background-color: var(--acu-card-bg) !important;\n        background-image: none !important;\n        box-shadow: 0 0 0 2px var(--acu-title-color-bg) !important;\n        outline: none !important;\n      }\n\n      /*  */\n      .acu-wrapper select,\n      .acu-modal-container select,\n      .acu-settings-control select {\n        -webkit-appearance: none !important;\n        -moz-appearance: none !important;\n        appearance: none !important;\n        padding-right: 30px !important;\n        background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23666'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E\") !important;\n        background-repeat: no-repeat !important;\n        background-position: right 8px center !important;\n        background-size: 16px !important;\n      }\n\n      /*   */\n      .acu-wrapper::-webkit-scrollbar,\n      .acu-wrapper *::-webkit-scrollbar,\n      .acu-modal-container::-webkit-scrollbar,\n      .acu-modal-container *::-webkit-scrollbar {\n        width: 6px !important;\n        height: 6px !important;\n      }\n\n      .acu-wrapper::-webkit-scrollbar-track,\n      .acu-wrapper *::-webkit-scrollbar-track,\n      .acu-modal-container::-webkit-scrollbar-track,\n      .acu-modal-container *::-webkit-scrollbar-track {\n        background: transparent !important;\n        background-color: transparent !important;\n      }\n\n      .acu-wrapper::-webkit-scrollbar-thumb,\n      .acu-wrapper *::-webkit-scrollbar-thumb,\n      .acu-modal-container::-webkit-scrollbar-thumb,\n      .acu-modal-container *::-webkit-scrollbar-thumb {\n        background: var(--acu-border) !important;\n        background-color: var(--acu-border) !important;\n        background-image: none !important;\n        border-radius: 3px !important;\n        border: none !important;\n        box-shadow: none !important;\n      }\n\n      .acu-wrapper::-webkit-scrollbar-thumb:hover,\n      .acu-wrapper *::-webkit-scrollbar-thumb:hover,\n      .acu-modal-container::-webkit-scrollbar-thumb:hover,\n      .acu-modal-container *::-webkit-scrollbar-thumb:hover {\n        background: var(--acu-text-sub) !important;\n        background-color: var(--acu-text-sub) !important;\n      }\n\n      /*   -  font-family */\n      .acu-wrapper,\n      .acu-wrapper p,\n      .acu-wrapper div,\n      .acu-wrapper span,\n      .acu-wrapper label,\n      .acu-wrapper li,\n      .acu-wrapper a,\n      .acu-wrapper button,\n      .acu-wrapper th,\n      .acu-wrapper td,\n      .acu-modal-container,\n      .acu-modal-container p,\n      .acu-modal-container div,\n      .acu-modal-container span,\n      .acu-modal-container label,\n      .acu-modal-container li,\n      .acu-modal-container a,\n      .acu-modal-container button,\n      .acu-modal-container th,\n      .acu-modal-container td {\n        font-family: var(--acu-font-family) !important;\n        font-size: var(--acu-font-size, 13px) !important;\n        text-shadow: none !important;\n        line-height: 1.5 !important;\n      }\n\n      /*  -  */\n      .acu-settings-label,\n      .acu-card-label,\n      .acu-grid-label,\n      .acu-full-label,\n      .acu-wrapper .acu-card-value,\n      .acu-wrapper .acu-grid-value,\n      .acu-modal-container .acu-modal-body {\n        color: var(--acu-text-main) !important;\n        font-size: var(--acu-font-size, 13px) !important;\n      }\n\n      /*  */\n      .acu-wrapper .hint,\n      .acu-wrapper .acu-text-sub,\n      .acu-modal-container .hint,\n      .acu-modal-container .acu-text-sub,\n      .acu-settings-label .hint {\n        color: var(--acu-text-sub) !important;\n        font-size: 11px !important;\n      }\n\n      /*  -  --acu-title-color  */\n      .acu-wrapper h1,\n      .acu-wrapper h2,\n      .acu-wrapper h3,\n      .acu-wrapper h4,\n      .acu-wrapper h5,\n      .acu-wrapper h6,\n      .acu-modal-container h1,\n      .acu-modal-container h2,\n      .acu-modal-container h3,\n      .acu-modal-container h4,\n      .acu-modal-container h5,\n      .acu-modal-container h6 {\n        color: var(--acu-title-color) !important;\n        text-shadow: none !important;\n        font-weight: 600 !important;\n      }\n\n      /*  -  --acu-text-main */\n      .acu-settings-title,\n      .acu-modal-title {\n        color: var(--acu-text-main) !important;\n        text-shadow: none !important;\n        font-weight: 600 !important;\n      }\n\n      /*  -  --acu-title-color +  */\n      .acu-panel-title,\n      .acu-editable-title,\n      .acu-card-label,\n      .acu-grid-label,\n      .acu-full-label {\n        color: var(--acu-title-color) !important;\n        font-family: var(--acu-font-family) !important;\n        text-shadow: none !important;\n        font-weight: 600 !important;\n      }\n\n      /* Tab  -  */\n      .acu-tab-btn,\n      .acu-tab-btn span,\n      .acu-nav-btn,\n      .acu-action-btn {\n        font-family: var(--acu-font-family) !important;\n        font-size: var(--acu-font-size, 13px) !important;\n        text-shadow: none !important;\n      }\n\n      /* Toast  -  */\n      .acu-toast,\n      .acu-toast-message,\n      .acu-toast span {\n        font-family: var(--acu-font-family) !important;\n        font-size: var(--acu-font-size, 13px) !important;\n        text-shadow: none !important;\n        color: #fff !important;\n      }\n\n      /* Tab  */\n      .acu-tab-btn,\n      .acu-nav-btn,\n      .acu-action-btn {\n        font-family: var(--acu-font-family) !important;\n        font-size: var(--acu-font-size, 13px) !important;\n        text-shadow: none !important;\n      }\n\n      /*  */\n      .acu-settings-section .acu-settings-title,\n      .acu-config-section h4,\n      .acu-collapse-header,\n      .acu-collapse-title,\n      summary {\n        font-family: var(--acu-font-family) !important;\n        font-size: var(--acu-font-size, 13px) !important;\n        color: var(--acu-text-main) !important;\n        text-shadow: none !important;\n      }\n\n      /*  - Font Awesome  */\n      .acu-wrapper i.fa,\n      .acu-wrapper i.fas,\n      .acu-wrapper i.far,\n      .acu-wrapper i.fab,\n      .acu-wrapper .fa,\n      .acu-wrapper .fas,\n      .acu-wrapper .far,\n      .acu-wrapper .fab,\n      .acu-modal-container i.fa,\n      .acu-modal-container i.fas,\n      .acu-modal-container i.far,\n      .acu-modal-container i.fab,\n      .acu-modal-container .fa,\n      .acu-modal-container .fas,\n      .acu-modal-container .far,\n      .acu-modal-container .fab {\n        font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free', FontAwesome !important;\n      }\n    `;\n\n    dynamicStyleEl.value.textContent = dynamicCSS;\n  };\n\n  /**\n   *  CSS \n   */\n  const createThemeCustomStyleElement = (): void => {\n    const parentDoc = getParentDoc();\n    const styleId = `${THEME_CUSTOM_ID}-${scriptId.value}`;\n\n    // \n    parentDoc.getElementById(styleId)?.remove();\n\n    // \n    const styleEl = parentDoc.createElement('style');\n    styleEl.id = styleId;\n    styleEl.setAttribute('data-source', 'acu-visualizer-theme');\n    parentDoc.head.appendChild(styleEl);\n    themeCustomStyleEl.value = styleEl;\n\n    console.info('[ACU Styles] Theme custom styles element created');\n  };\n\n  /**\n   *  CSS\n   *  themeStore  CSS\n   */\n  const updateThemeCustomStyles = (): void => {\n    if (!themeCustomStyleEl.value) return;\n\n    //  themeStore  CSS\n    const customCSS = themeStore.getFullInjectedCSS();\n    themeCustomStyleEl.value.textContent = customCSS;\n\n    console.info('[ACU Styles] Theme custom styles updated');\n  };\n\n  /**\n   * \n   *  .acu-theme-* \n   */\n  const applyTheme = (themeId?: string): void => {\n    const parentDoc = getParentDoc();\n    const wrapper = parentDoc.querySelector('.acu-wrapper');\n    if (!wrapper) return;\n\n    const targetTheme = themeId || configStore.config.theme || 'retro';\n\n    // \n    THEMES.forEach(theme => {\n      wrapper.classList.remove(`acu-theme-${theme.id}`);\n    });\n\n    // \n    wrapper.classList.add(`acu-theme-${targetTheme}`);\n\n    console.info(`[ACU Styles] Theme applied: ${targetTheme}`);\n  };\n\n  /**\n   * \n   */\n  const applyLayout = (layout?: 'vertical' | 'horizontal'): void => {\n    const parentDoc = getParentDoc();\n    const display = parentDoc.querySelector('.acu-data-display');\n    if (!display) return;\n\n    const targetLayout = layout || configStore.config.layout || 'vertical';\n\n    display.classList.remove('acu-layout-vertical', 'acu-layout-horizontal');\n    display.classList.add(`acu-layout-${targetLayout}`);\n\n    console.info(`[ACU Styles] Layout applied: ${targetLayout}`);\n  };\n\n  /**\n   * \n   */\n  const applyFont = (fontId?: string): void => {\n    // \n    injectFontStyles();\n\n    console.info(`[ACU Styles] Font applied: ${fontId || configStore.config.fontFamily}`);\n  };\n\n  /**\n   * \n   * \n   */\n  const applyAllStyles = (): void => {\n    updateDynamicVariables();\n    updateThemeCustomStyles();\n    applyTheme();\n    applyLayout();\n    applyFont();\n  };\n\n  /**\n   * \n   */\n  const cleanup = (): void => {\n    const parentDoc = getParentDoc();\n    const id = scriptId.value;\n\n    // \n    parentDoc.getElementById(`${STYLE_ID_PREFIX}-base-${id}`)?.remove();\n\n    // \n    parentDoc.getElementById(`${STYLE_ID_PREFIX}-dynamic-${id}`)?.remove();\n\n    // \n    parentDoc.getElementById(`${DYNAMIC_FONT_ID}-${id}`)?.remove();\n\n    // \n    parentDoc.getElementById(`${THEME_CUSTOM_ID}-${id}`)?.remove();\n\n    baseStyleEl.value = null;\n    dynamicStyleEl.value = null;\n    fontStyleEl.value = null;\n    themeCustomStyleEl.value = null;\n    isInitialized.value = false;\n\n    console.info('[ACU Styles] Styles cleaned up');\n  };\n\n  /**\n   * \n   */\n  const init = (): void => {\n    if (isInitialized.value) {\n      console.info('[ACU Styles] Already initialized');\n      return;\n    }\n\n    // \n    injectBaseStyles();\n\n    // \n    injectFontStyles();\n\n    // \n    createDynamicStyleElement();\n\n    // \n    createThemeCustomStyleElement();\n\n    // \n    themeStore.loadFromStorage();\n\n    // \n    updateDynamicVariables();\n\n    // \n    updateThemeCustomStyles();\n\n    isInitialized.value = true;\n    console.info('[ACU Styles] Style system initialized');\n  };\n\n  // \n  watch(\n    () => configStore.config,\n    newConfig => {\n      if (!isInitialized.value) return;\n\n      // \n      updateDynamicVariables();\n\n      // \n      applyTheme(newConfig.theme);\n\n      // \n      applyLayout(newConfig.layout);\n    },\n    { deep: true },\n  );\n\n  // \n  watch(\n    () => configStore.config.fontFamily,\n    newFontId => {\n      if (!isInitialized.value) return;\n      applyFont(newFontId);\n    },\n  );\n\n  // \n  watch(\n    [() => themeStore.currentThemeVars, () => themeStore.currentHighlight, () => themeStore.customCSS],\n    () => {\n      if (!isInitialized.value) return;\n      updateThemeCustomStyles();\n    },\n    { deep: true },\n  );\n\n  // \n  onMounted(() => {\n    init();\n  });\n\n  onUnmounted(() => {\n    cleanup();\n  });\n\n  return {\n    // \n    isInitialized,\n\n    // \n    init,\n    cleanup,\n    updateDynamicVariables,\n    updateThemeCustomStyles,\n    applyTheme,\n    applyLayout,\n    applyFont,\n    applyAllStyles,\n\n    // \n    baseStyleEl,\n    dynamicStyleEl,\n    fontStyleEl,\n    themeCustomStyleEl,\n  };\n}\n\n// \nexport type UseParentStyleInjection = ReturnType<typeof useParentStyleInjection>;\n","/**\n *  Composable\n *\n *  LockManager\n * - \n * -  contextFingerprint \n * -   \n * - AI applyLocks \n */\nimport { computed, ref } from 'vue';\n// ============================================================\n// \n// ============================================================\nconst STORAGE_KEY_PREFIX = 'acu_locked_fields_v2_';\nconst MAX_CONTEXTS = 20;\n/**  */\nconst PRIMARY_KEYS = {\n    : null,\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n    : '',\n};\n// ============================================================\n// \n// ============================================================\n/**  */\nfunction getCurrentContextFingerprint() {\n    try {\n        //  SillyTavern  ID\n        const ctx = window.SillyTavern?.getContext?.();\n        if (ctx?.chatId) {\n            return ctx.chatId;\n        }\n        //  + \n        if (ctx?.characterId && ctx?.chat?.length > 0) {\n            return `${ctx.characterId}_${ctx.chat.length}`;\n        }\n    }\n    catch {\n        // ignore\n    }\n    return 'default';\n}\n/**  */\nfunction getStorageKey(ctxId) {\n    return STORAGE_KEY_PREFIX + (ctxId || getCurrentContextFingerprint());\n}\n// ============================================================\n// \n// ============================================================\n/**  localStorage  */\nconst persistedLocks = ref({});\n/**  */\nconst pendingLocks = ref({});\n/**  ID */\nlet currentContextId = null;\n// ============================================================\n//  Composable\n// ============================================================\nexport function useCellLock() {\n    /**  localStorage  */\n    function loadLocks() {\n        const ctxId = getCurrentContextFingerprint();\n        // \n        if (currentContextId !== ctxId) {\n            currentContextId = ctxId;\n            try {\n                const stored = localStorage.getItem(getStorageKey(ctxId));\n                if (stored) {\n                    const data = JSON.parse(stored);\n                    delete data._lastAccess;\n                    persistedLocks.value = data;\n                }\n                else {\n                    persistedLocks.value = {};\n                }\n            }\n            catch {\n                persistedLocks.value = {};\n            }\n        }\n        return persistedLocks.value;\n    }\n    /**  localStorage */\n    function saveLocks() {\n        try {\n            const dataToSave = { ...persistedLocks.value, _lastAccess: Date.now() };\n            localStorage.setItem(getStorageKey(), JSON.stringify(dataToSave));\n            cleanupOldContexts();\n        }\n        catch (e) {\n            console.warn('[CellLock] ', e);\n        }\n    }\n    /**  N  */\n    function cleanupOldContexts() {\n        try {\n            const allKeys = [];\n            for (let i = 0; i < localStorage.length; i++) {\n                const key = localStorage.key(i);\n                if (key?.startsWith(STORAGE_KEY_PREFIX)) {\n                    allKeys.push(key);\n                }\n            }\n            if (allKeys.length <= MAX_CONTEXTS)\n                return;\n            const keyWithTime = allKeys.map(key => {\n                try {\n                    const data = JSON.parse(localStorage.getItem(key) || '{}');\n                    return { key, time: data?._lastAccess || 0 };\n                }\n                catch {\n                    return { key, time: 0 };\n                }\n            });\n            keyWithTime.sort((a, b) => b.time - a.time);\n            const toDelete = keyWithTime.slice(MAX_CONTEXTS);\n            toDelete.forEach(item => localStorage.removeItem(item.key));\n            if (toDelete.length > 0) {\n                console.log(`[CellLock]  ${toDelete.length} `);\n            }\n        }\n        catch (e) {\n            console.warn('[CellLock] ', e);\n        }\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**  */\n    function initPendingLocks() {\n        loadLocks();\n        // \n        pendingLocks.value = JSON.parse(JSON.stringify(persistedLocks.value));\n    }\n    /**  */\n    function savePendingLocks() {\n        persistedLocks.value = JSON.parse(JSON.stringify(pendingLocks.value));\n        saveLocks();\n    }\n    /**  */\n    function discardPendingLocks() {\n        pendingLocks.value = {};\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     * @param tableName \n     * @param row \n     * @param headers \n     * @param rowIndex  fallback\n     */\n    function getRowKey(tableName, row, headers, rowIndex) {\n        const pkField = PRIMARY_KEYS[tableName];\n        // \n        if (pkField === null)\n            return '_row_0';\n        let fieldIndex = 1; // \n        if (pkField) {\n            const idx = headers.indexOf(pkField);\n            if (idx !== -1)\n                fieldIndex = idx;\n        }\n        const value = row[fieldIndex];\n        // \n        if (value) {\n            return `${pkField || headers[fieldIndex]}=${value}`;\n        }\n        // Fallback\n        if (rowIndex !== undefined) {\n            return `_row_${rowIndex}`;\n        }\n        //  fallback\n        for (let i = 0; i < row.length; i++) {\n            if (row[i] && i !== 0) {\n                return `${headers[i] || `col${i}`}=${row[i]}`;\n            }\n        }\n        return null;\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     * @param tableName \n     * @param rowKey \n     * @param fieldName \n     * @param value \n     */\n    function toggleCellLock(tableName, rowKey, fieldName, value) {\n        // \n        const newLocks = JSON.parse(JSON.stringify(pendingLocks.value));\n        if (!newLocks[tableName]) {\n            newLocks[tableName] = {};\n        }\n        if (!newLocks[tableName][rowKey]) {\n            newLocks[tableName][rowKey] = {\n                _fullRow: false,\n                _fields: {},\n                _snapshot: null,\n            };\n        }\n        const lock = newLocks[tableName][rowKey];\n        let result;\n        //  snapshot \n        if (lock._fullRow && lock._snapshot) {\n            if (lock._snapshot[fieldName] !== undefined) {\n                delete lock._snapshot[fieldName];\n                //  snapshot \n                if (Object.keys(lock._snapshot).length === 0) {\n                    lock._fullRow = false;\n                    lock._snapshot = null;\n                }\n                result = false; // \n            }\n            else {\n                //  snapshot  fields\n                lock._fields[fieldName] = value;\n                result = true; // \n            }\n        }\n        else {\n            // \n            if (lock._fields[fieldName] !== undefined) {\n                delete lock._fields[fieldName];\n                result = false; // \n            }\n            else {\n                lock._fields[fieldName] = value;\n                result = true; // \n            }\n        }\n        // \n        if (!lock._fullRow && Object.keys(lock._fields).length === 0) {\n            delete newLocks[tableName][rowKey];\n            if (Object.keys(newLocks[tableName]).length === 0) {\n                delete newLocks[tableName];\n            }\n        }\n        // \n        pendingLocks.value = newLocks;\n        console.log('[CellLock] toggleCellLock:', tableName, rowKey, fieldName, '->', result, 'count:', countLocks(newLocks));\n        return result;\n    }\n    /**  */\n    function countLocks(locks) {\n        let count = 0;\n        for (const tableLocks of Object.values(locks)) {\n            if (typeof tableLocks !== 'object')\n                continue;\n            for (const lock of Object.values(tableLocks)) {\n                if (lock._fullRow) {\n                    count += Object.keys(lock._snapshot || {}).length;\n                }\n                else {\n                    count += Object.keys(lock._fields || {}).length;\n                }\n            }\n        }\n        return count;\n    }\n    /**\n     * \n     * @param tableName \n     * @param rowKey \n     * @param headers \n     * @param row \n     */\n    function toggleRowLock(tableName, rowKey, headers, row) {\n        // \n        const newLocks = JSON.parse(JSON.stringify(pendingLocks.value));\n        if (!newLocks[tableName]) {\n            newLocks[tableName] = {};\n        }\n        const lock = newLocks[tableName]?.[rowKey];\n        // \n        if (lock?._fullRow) {\n            delete newLocks[tableName][rowKey];\n            if (Object.keys(newLocks[tableName]).length === 0) {\n                delete newLocks[tableName];\n            }\n            pendingLocks.value = newLocks;\n            console.log('[CellLock] toggleRowLock: ', tableName, rowKey);\n            return false; // \n        }\n        // \n        const snapshot = {};\n        headers.forEach((h, i) => {\n            if (h && row[i] != null && row[i] !== '') {\n                snapshot[h] = row[i];\n            }\n        });\n        newLocks[tableName][rowKey] = {\n            _fullRow: true,\n            _fields: {},\n            _snapshot: snapshot,\n        };\n        pendingLocks.value = newLocks;\n        console.log('[CellLock] toggleRowLock: ', tableName, rowKey, 'fields:', Object.keys(snapshot).length);\n        return true; // \n    }\n    /**  */\n    function cleanupEmptyLock(tableName, rowKey) {\n        const lock = pendingLocks.value[tableName]?.[rowKey];\n        if (!lock)\n            return;\n        if (!lock._fullRow && Object.keys(lock._fields).length === 0) {\n            delete pendingLocks.value[tableName][rowKey];\n            if (Object.keys(pendingLocks.value[tableName]).length === 0) {\n                delete pendingLocks.value[tableName];\n            }\n        }\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    function isCellLockedPending(tableName, rowKey, fieldName) {\n        const lock = pendingLocks.value[tableName]?.[rowKey];\n        if (!lock)\n            return false;\n        if (lock._fullRow)\n            return lock._snapshot?.[fieldName] !== undefined;\n        return lock._fields?.[fieldName] !== undefined;\n    }\n    /**\n     * \n     */\n    function isRowLockedPending(tableName, rowKey) {\n        return pendingLocks.value[tableName]?.[rowKey]?._fullRow === true;\n    }\n    /**\n     * \n     */\n    function getLockedFieldsPending(tableName, rowKey) {\n        const lock = pendingLocks.value[tableName]?.[rowKey];\n        if (!lock)\n            return [];\n        if (lock._fullRow)\n            return Object.keys(lock._snapshot || {});\n        return Object.keys(lock._fields || {});\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    function isCellLocked(tableName, rowKey, fieldName) {\n        loadLocks();\n        const lock = persistedLocks.value[tableName]?.[rowKey];\n        if (!lock)\n            return false;\n        if (lock._fullRow)\n            return lock._snapshot?.[fieldName] !== undefined;\n        return lock._fields?.[fieldName] !== undefined;\n    }\n    /**\n     * \n     */\n    function isRowLocked(tableName, rowKey) {\n        loadLocks();\n        return persistedLocks.value[tableName]?.[rowKey]?._fullRow === true;\n    }\n    // ============================================================\n    // AI \n    // ============================================================\n    /**\n     * \n     * \n     *\n     * @param tableName \n     * @param rowKey \n     * @param fieldName \n     * @param newValue \n     * @returns \n     */\n    function updateLockedValue(tableName, rowKey, fieldName, newValue) {\n        loadLocks();\n        const lock = persistedLocks.value[tableName]?.[rowKey];\n        if (!lock)\n            return false;\n        let updated = false;\n        // \n        if (lock._fullRow && lock._snapshot && lock._snapshot[fieldName] !== undefined) {\n            lock._snapshot[fieldName] = newValue;\n            updated = true;\n        }\n        // \n        if (lock._fields && lock._fields[fieldName] !== undefined) {\n            lock._fields[fieldName] = newValue;\n            updated = true;\n        }\n        if (updated) {\n            saveLocks();\n            console.log('[CellLock] updateLockedValue:', tableName, rowKey, fieldName, '->', newValue);\n        }\n        return updated;\n    }\n    /**\n     *  AI \n     * @param tableName \n     * @param tableContent \n     * @returns \n     */\n    function applyLocks(tableName, tableContent) {\n        loadLocks();\n        const tableLocks = persistedLocks.value[tableName];\n        if (!tableLocks || !tableContent || tableContent.length < 2) {\n            return { modified: false, restored: [] };\n        }\n        const headers = tableContent[0];\n        const restored = [];\n        let modified = false;\n        // \n        //  (i-1) key \n        const rowIndexMap = {};\n        for (let i = 1; i < tableContent.length; i++) {\n            //  i-1  DataCard.vue  data.index \n            const key = getRowKey(tableName, tableContent[i], headers, i - 1);\n            if (key)\n                rowIndexMap[key] = i;\n        }\n        for (const [rowKey, lock] of Object.entries(tableLocks)) {\n            const idx = rowIndexMap[rowKey];\n            if (idx === undefined) {\n                // \n                const newRow = rebuildRow(headers, lock);\n                if (newRow) {\n                    tableContent.push(newRow);\n                    restored.push(rowKey);\n                    modified = true;\n                    console.info(`[CellLock] : ${rowKey}`);\n                }\n                continue;\n            }\n            const row = tableContent[idx];\n            const fields = lock._fullRow ? lock._snapshot : lock._fields;\n            if (fields) {\n                for (const [field, value] of Object.entries(fields)) {\n                    const colIdx = headers.indexOf(field);\n                    if (colIdx !== -1 && row[colIdx] !== value) {\n                        console.info(`[CellLock] : ${tableName}[${rowKey}].${field} = \"${value}\" (: \"${row[colIdx]}\")`);\n                        row[colIdx] = value;\n                        modified = true;\n                    }\n                }\n            }\n        }\n        return { modified, restored };\n    }\n    /**  */\n    function rebuildRow(headers, lock) {\n        const fields = lock._fullRow ? lock._snapshot : lock._fields;\n        if (!fields || Object.keys(fields).length === 0)\n            return null;\n        const row = new Array(headers.length).fill(null);\n        for (const [field, value] of Object.entries(fields)) {\n            const idx = headers.indexOf(field);\n            if (idx !== -1)\n                row[idx] = value;\n        }\n        return row;\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**  */\n    const pendingLockCount = computed(() => {\n        let count = 0;\n        for (const tableLocks of Object.values(pendingLocks.value)) {\n            if (typeof tableLocks !== 'object')\n                continue;\n            for (const lock of Object.values(tableLocks)) {\n                if (lock._fullRow) {\n                    count += Object.keys(lock._snapshot || {}).length;\n                }\n                else {\n                    count += Object.keys(lock._fields || {}).length;\n                }\n            }\n        }\n        return count;\n    });\n    /**\n     * \n     * @param tableName \n     * @param rowKey \n     */\n    function hasRowAnyLockPending(tableName, rowKey) {\n        const lock = pendingLocks.value[tableName]?.[rowKey];\n        if (!lock)\n            return false;\n        if (lock._fullRow)\n            return true;\n        return Object.keys(lock._fields || {}).length > 0;\n    }\n    // ============================================================\n    // \n    // ============================================================\n    return {\n        // \n        loadLocks,\n        initPendingLocks,\n        // \n        getRowKey,\n        // \n        pendingLocks,\n        toggleCellLock,\n        toggleRowLock,\n        savePendingLocks,\n        discardPendingLocks,\n        // \n        isCellLockedPending,\n        isRowLockedPending,\n        getLockedFieldsPending,\n        hasRowAnyLockPending,\n        // \n        isCellLocked,\n        isRowLocked,\n        // AI \n        applyLocks,\n        updateLockedValue,\n        // \n        pendingLockCount,\n    };\n}\n","/**\n * IndexedDB \n *  IndexedDB CRUD \n *\n * \n * - \n * -  chatId \n * -  500MB \n */\n\nconst DB_NAME = 'acu_history_db';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'row_snapshots';\n\nlet dbInstance: IDBDatabase | null = null;\n\n/**\n * \n */\nexport interface RowSnapshot {\n  /** IndexedDB  ID */\n  id?: number;\n  /**  */\n  chatId: string;\n  /**  \"-\" */\n  rowKey: string;\n  /** Unix  */\n  timestamp: number;\n  /**  */\n  source: 'manual' | 'ai';\n  /**  ( -> ) */\n  cells: Record<number, string>;\n}\n\n/**\n * \n * \n */\nexport async function initDB(): Promise<IDBDatabase> {\n  if (dbInstance) return dbInstance;\n\n  return new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n    request.onerror = () => {\n      console.error('[ACU IndexedDB] :', request.error);\n      reject(request.error);\n    };\n\n    request.onsuccess = () => {\n      dbInstance = request.result;\n      console.info('[ACU IndexedDB] ');\n      resolve(dbInstance);\n    };\n\n    request.onupgradeneeded = event => {\n      const db = (event.target as IDBOpenDBRequest).result;\n\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\n        const store = db.createObjectStore(STORE_NAME, {\n          keyPath: 'id',\n          autoIncrement: true,\n        });\n\n        // +\n        store.createIndex('by_chat_row', ['chatId', 'rowKey'], { unique: false });\n        // \n        store.createIndex('by_chat', 'chatId', { unique: false });\n        // \n        store.createIndex('by_timestamp', 'timestamp', { unique: false });\n\n        console.info('[ACU IndexedDB] ');\n      }\n    };\n  });\n}\n\n/**\n * \n * @param snapshot  id\n * @returns  ID\n */\nexport async function addSnapshot(snapshot: Omit<RowSnapshot, 'id'>): Promise<number> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.add(snapshot);\n\n    request.onsuccess = () => {\n      console.info('[ACU IndexedDB] , ID:', request.result);\n      resolve(request.result as number);\n    };\n\n    request.onerror = () => {\n      console.error('[ACU IndexedDB] :', request.error);\n      reject(request.error);\n    };\n  });\n}\n\n/**\n *  chatId + rowKey \n * @param chatId ID\n * @param rowKey Key\n * @returns \n */\nexport async function getSnapshots(chatId: string, rowKey: string): Promise<RowSnapshot[]> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readonly');\n    const store = tx.objectStore(STORE_NAME);\n    const index = store.index('by_chat_row');\n    const request = index.getAll([chatId, rowKey]);\n\n    request.onsuccess = () => {\n      resolve(request.result || []);\n    };\n\n    request.onerror = () => {\n      console.error('[ACU IndexedDB] :', request.error);\n      reject(request.error);\n    };\n  });\n}\n\n/**\n *  ID \n * @param id ID\n */\nexport async function deleteSnapshot(id: number): Promise<void> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.delete(id);\n\n    request.onsuccess = () => {\n      console.info('[ACU IndexedDB] , ID:', id);\n      resolve();\n    };\n\n    request.onerror = () => {\n      console.error('[ACU IndexedDB] :', request.error);\n      reject(request.error);\n    };\n  });\n}\n\n/**\n *  chatId \n * \n * @param chatId ID\n */\nexport async function deleteByChat(chatId: string): Promise<void> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    const index = store.index('by_chat');\n    const request = index.openCursor(IDBKeyRange.only(chatId));\n\n    let deletedCount = 0;\n\n    request.onsuccess = event => {\n      const cursor = (event.target as IDBRequest).result;\n      if (cursor) {\n        cursor.delete();\n        deletedCount++;\n        cursor.continue();\n      }\n    };\n\n    tx.oncomplete = () => {\n      console.info(`[ACU IndexedDB] ,  ${deletedCount} `);\n      resolve();\n    };\n\n    tx.onerror = () => {\n      console.error('[ACU IndexedDB] :', tx.error);\n      reject(tx.error);\n    };\n  });\n}\n\n/**\n * \n * \n */\nexport async function clearAll(): Promise<void> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readwrite');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.clear();\n\n    request.onsuccess = () => {\n      console.info('[ACU IndexedDB] ');\n      resolve();\n    };\n\n    request.onerror = () => {\n      console.error('[ACU IndexedDB] :', request.error);\n      reject(request.error);\n    };\n  });\n}\n\n/**\n * \n * \n */\nexport async function getStats(): Promise<{ count: number }> {\n  const db = await initDB();\n  return new Promise((resolve, reject) => {\n    const tx = db.transaction(STORE_NAME, 'readonly');\n    const store = tx.objectStore(STORE_NAME);\n    const request = store.count();\n\n    request.onsuccess = () => {\n      resolve({ count: request.result });\n    };\n\n    request.onerror = () => {\n      reject(request.error);\n    };\n  });\n}\n","/**\n *  Composable\n * \n *\n * \n * -  5 \n * - \n * -  ID \n */\n\nimport { ref } from 'vue';\nimport * as db from './useIndexedDB';\nimport type { RowSnapshot } from './useIndexedDB';\nimport type { TableRow, TableCell } from '../types';\n\n/**  */\nconst MAX_SNAPSHOTS_PER_ROW = 5;\n\n/**\n * ID\n *  SillyTavern  ID\n */\nfunction getCurrentChatId(): string {\n  try {\n    //  SillyTavern\n    const ST = (window as any).SillyTavern || (window.parent as any)?.SillyTavern || (window.top as any)?.SillyTavern;\n\n    if (ST?.getCurrentChatId) {\n      const chatId = ST.getCurrentChatId();\n      if (chatId) return chatId;\n    }\n\n    // \n    if (ST?.chat?.length > 0) {\n      // \n      const firstMsg = ST.chat[0];\n      if (firstMsg?.chat_id) return firstMsg.chat_id;\n    }\n  } catch (e) {\n    console.warn('[ACU History]  chatId :', e);\n  }\n  return 'default';\n}\n\n/**\n * \n *  useDataStore.getRowKey \n * @param tableName \n * @param rowIndex \n */\nfunction makeRowKey(tableName: string, rowIndex: number): string {\n  return `${tableName}-row-${rowIndex}`;\n}\n\n/**\n *  cells \n */\nfunction areCellsEqual(a: Record<number, string>, b: Record<number, string>): boolean {\n  const keysA = Object.keys(a).map(Number);\n  const keysB = Object.keys(b).map(Number);\n\n  if (keysA.length !== keysB.length) return false;\n\n  for (const key of keysA) {\n    if (a[key] !== b[key]) return false;\n  }\n\n  return true;\n}\n\n/**\n *  Composable\n */\nexport function useRowHistory() {\n  const isLoading = ref(false);\n\n  /**\n   * \n   *  + \n   *\n   * @param tableName \n   * @param rowIndex \n   * @param cells  (colIndex -> value)\n   * @param source  ('manual' | 'ai')\n   */\n  async function saveSnapshot(\n    tableName: string,\n    rowIndex: number,\n    cells: Record<number, string>,\n    source: 'manual' | 'ai',\n  ): Promise<void> {\n    try {\n      isLoading.value = true;\n      const chatId = getCurrentChatId();\n      const rowKey = makeRowKey(tableName, rowIndex);\n\n      // \n      const existing = await db.getSnapshots(chatId, rowKey);\n      const sorted = existing.sort((a, b) => b.timestamp - a.timestamp);\n\n      //  cells \n      if (sorted.length > 0) {\n        const latest = sorted[0];\n        if (areCellsEqual(cells, latest.cells)) {\n          console.info('[ACU History] ');\n          return;\n        }\n      }\n\n      // \n      await db.addSnapshot({\n        chatId,\n        rowKey,\n        timestamp: Date.now(),\n        source,\n        cells,\n      });\n\n      console.info(`[ACU History]  ${rowKey}  (${source})`);\n\n      // \n      if (sorted.length >= MAX_SNAPSHOTS_PER_ROW) {\n        const toDelete = sorted.slice(MAX_SNAPSHOTS_PER_ROW - 1);\n        for (const snapshot of toDelete) {\n          if (snapshot.id !== undefined) {\n            await db.deleteSnapshot(snapshot.id);\n          }\n        }\n        console.info(`[ACU History]  ${toDelete.length} `);\n      }\n    } catch (e) {\n      console.error('[ACU History] :', e);\n    } finally {\n      isLoading.value = false;\n    }\n  }\n\n  /**\n   * \n   *  5 \n   *\n   * @param tableName \n   * @param rowIndex \n   */\n  async function getSnapshots(tableName: string, rowIndex: number): Promise<RowSnapshot[]> {\n    try {\n      isLoading.value = true;\n      const chatId = getCurrentChatId();\n      const rowKey = makeRowKey(tableName, rowIndex);\n\n      console.info('[ACU History] , :', { chatId, rowKey, tableName, rowIndex });\n\n      const snapshots = await db.getSnapshots(chatId, rowKey);\n      console.info('[ACU History] :', snapshots.length, '');\n\n      return snapshots.sort((a, b) => b.timestamp - a.timestamp).slice(0, MAX_SNAPSHOTS_PER_ROW);\n    } catch (e) {\n      console.error('[ACU History] :', e);\n      return [];\n    } finally {\n      isLoading.value = false;\n    }\n  }\n\n  /**\n   *  TableRow \n   *  DataCard \n   *\n   * @param snapshot \n   * @param templateRow  cells  key \n   */\n  function snapshotToTableRow(snapshot: RowSnapshot, templateRow: TableRow): TableRow {\n    return {\n      index: templateRow.index,\n      key: templateRow.key,\n      cells: templateRow.cells.map((cell, colIndex) => ({\n        ...cell,\n        value: snapshot.cells[colIndex] !== undefined ? snapshot.cells[colIndex] : cell.value,\n      })),\n    };\n  }\n\n  /**\n   *  TableRow  cells \n   * \n   *\n   * @param row \n   */\n  function tableRowToCells(row: TableRow): Record<number, string> {\n    const cells: Record<number, string> = {};\n    row.cells.forEach((cell, index) => {\n      cells[index] = cell.value;\n    });\n    return cells;\n  }\n\n  /**\n   * \n   * \n   *\n   * @param oldSnapshot \n   * @param newCells  cells \n   */\n  function getDiff(oldSnapshot: RowSnapshot, newCells: Record<number, string>): Set<number> {\n    const changedCols = new Set<number>();\n\n    // \n    for (const [key, value] of Object.entries(newCells)) {\n      const colIndex = Number(key);\n      if (oldSnapshot.cells[colIndex] !== value) {\n        changedCols.add(colIndex);\n      }\n    }\n\n    // \n    for (const key of Object.keys(oldSnapshot.cells)) {\n      const colIndex = Number(key);\n      if (newCells[colIndex] === undefined) {\n        changedCols.add(colIndex);\n      }\n    }\n\n    return changedCols;\n  }\n\n  /**\n   * \n   * @param timestamp Unix \n   */\n  function formatRelativeTime(timestamp: number): string {\n    const now = Date.now();\n    const diff = now - timestamp;\n\n    if (diff < 60000) return '';\n    if (diff < 3600000) return `${Math.floor(diff / 60000)}`;\n    if (diff < 86400000) return `${Math.floor(diff / 3600000)}`;\n    if (diff < 172800000) return '';\n\n    return new Date(timestamp).toLocaleDateString('zh-CN', {\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  }\n\n  /**\n   * \n   */\n  async function clearCurrentChatHistory(): Promise<void> {\n    try {\n      const chatId = getCurrentChatId();\n      await db.deleteByChat(chatId);\n      console.info('[ACU History] ');\n    } catch (e) {\n      console.error('[ACU History] :', e);\n    }\n  }\n\n  return {\n    isLoading,\n    saveSnapshot,\n    getSnapshots,\n    snapshotToTableRow,\n    tableRowToCells,\n    getDiff,\n    formatRelativeTime,\n    clearCurrentChatHistory,\n    getCurrentChatId,\n  };\n}\n\n// ============================================================\n//  composable\n// ============================================================\n\n/**\n *  composable\n *  useDataStore \n *\n * @param chatId ID\n * @param tableName \n * @param row  (TableRow )\n * @param source  ('manual' | 'ai')\n */\nexport async function saveSnapshot(\n  chatId: string,\n  tableName: string,\n  row: TableRow,\n  source: 'manual' | 'ai',\n): Promise<void> {\n  try {\n    const rowKey = makeRowKey(tableName, row.index);\n\n    //  TableRow.cells  Record<number, string>\n    const cells: Record<number, string> = {};\n    row.cells.forEach((cell, index) => {\n      cells[index] = String(cell.value);\n    });\n\n    // \n    const existing = await db.getSnapshots(chatId, rowKey);\n    const sorted = existing.sort((a, b) => b.timestamp - a.timestamp);\n\n    //  cells \n    if (sorted.length > 0) {\n      const latest = sorted[0];\n      if (areCellsEqual(cells, latest.cells)) {\n        console.info('[ACU History] ');\n        return;\n      }\n    }\n\n    // \n    await db.addSnapshot({\n      chatId,\n      rowKey,\n      timestamp: Date.now(),\n      source,\n      cells,\n    });\n\n    console.info(`[ACU History]  ${rowKey}  (${source})`);\n\n    // \n    if (sorted.length >= MAX_SNAPSHOTS_PER_ROW) {\n      const toDelete = sorted.slice(MAX_SNAPSHOTS_PER_ROW - 1);\n      for (const snapshot of toDelete) {\n        if (snapshot.id !== undefined) {\n          await db.deleteSnapshot(snapshot.id);\n        }\n      }\n      console.info(`[ACU History]  ${toDelete.length} `);\n    }\n  } catch (e) {\n    console.error('[ACU History] :', e);\n  }\n}\n\n// \nexport type { RowSnapshot };\n","/**\n *  Composable\n *  AI /\n *\n * \n * -  AI  aiDiffMap\n * - / aiDiffMap \n *\n *  \n * 1. AI \n * 2. AI \n */\nimport { computed, ref } from 'vue';\n// ============================================================\n// \n// ============================================================\nconst DEFAULT_CONFIG = {\n    indexColumnName: '',\n    checkEmptyCell: true,\n    checkIndexGap: true,\n};\n// ============================================================\n// \n// ============================================================\n/**\n * \n * @param tableName \n */\nexport function isSummaryOrOutlineTable(tableName) {\n    if (!tableName || typeof tableName !== 'string')\n        return false;\n    const name = tableName.toLowerCase();\n    return name.includes('') || name.includes('') || name.includes('summary') || name.includes('outline');\n}\n/**\n * \n * AM1, AM2, 1, 2, \n * @param value \n */\nfunction extractNumber(value) {\n    if (value === undefined || value === null)\n        return null;\n    const str = String(value).trim();\n    if (str === '')\n        return null;\n    // \n    const match = str.match(/(\\d+)/);\n    if (match) {\n        return parseInt(match[1], 10);\n    }\n    return null;\n}\n/**\n *  aiDiffMap key \n * key : \"-row-\"  \"--\"\n */\nfunction extractTableNameFromKey(key) {\n    //  \"-row-\" \n    const rowMatch = key.match(/^(.+)-row-\\d+$/);\n    if (rowMatch)\n        return rowMatch[1];\n    //  \"--\" \n    const cellMatch = key.match(/^(.+)-\\d+-\\d+$/);\n    if (cellMatch)\n        return cellMatch[1];\n    return null;\n}\n/**\n *  aiDiffMap key \n */\nfunction extractRowIndexFromKey(key) {\n    //  \"-row-\" \n    const rowMatch = key.match(/-row-(\\d+)$/);\n    if (rowMatch)\n        return parseInt(rowMatch[1], 10);\n    //  \"--\" \n    const cellMatch = key.match(/-(\\d+)-\\d+$/);\n    if (cellMatch)\n        return parseInt(cellMatch[1], 10);\n    return null;\n}\n/**\n *  AI \n *  AI  > \n * \n *\n * @param sheetId ID\n * @param sheet \n * @param snapshotSheet AI\n * @param aiChangedRows AI AI\n * @param config \n */\nfunction checkTableIntegrity(sheetId, sheet, snapshotSheet, aiChangedRows, config) {\n    const tableName = sheet.name || sheetId;\n    const issues = [];\n    // /\n    if (!isSummaryOrOutlineTable(tableName)) {\n        return { sheetId, tableName, hasIssues: false, issues: [] };\n    }\n    // \n    if (!sheet.content || !Array.isArray(sheet.content) || sheet.content.length < 2) {\n        return { sheetId, tableName, hasIssues: false, issues: [] };\n    }\n    // \n    const snapshotRowCount = snapshotSheet?.content?.length || 1;\n    const currentRowCount = sheet.content.length;\n    //  > \n    if (currentRowCount <= snapshotRowCount) {\n        // \n        return { sheetId, tableName, hasIssues: false, issues: [] };\n    }\n    // content \n    //  snapshotRowCount \n    const newRowStartContentIndex = snapshotRowCount;\n    const newRowEndContentIndex = currentRowCount - 1;\n    console.info(`[ACU IntegrityCheck]  \"${tableName}\" : ` +\n        `${snapshotRowCount - 1}  ${currentRowCount - 1}, ` +\n        `: ${newRowStartContentIndex}~${newRowEndContentIndex}(content)`);\n    const headers = sheet.content[0];\n    const indexColIdx = headers.findIndex(h => String(h).trim() === config.indexColumnName);\n    // \n    if (indexColIdx === -1) {\n        console.info(`[ACU IntegrityCheck]  \"${tableName}\" `);\n        return { sheetId, tableName, hasIssues: false, issues: [] };\n    }\n    // AI\n    let lastSnapshotIndex = null;\n    if (snapshotSheet?.content && snapshotSheet.content.length > 1) {\n        const snapshotLastRow = snapshotSheet.content[snapshotSheet.content.length - 1];\n        lastSnapshotIndex = extractNumber(snapshotLastRow[indexColIdx]);\n    }\n    // \n    for (let contentRowIndex = newRowStartContentIndex; contentRowIndex <= newRowEndContentIndex; contentRowIndex++) {\n        const row = sheet.content[contentRowIndex];\n        const rowIndex = contentRowIndex - 1; // \n        //  AI  aiChangedRows \n        //  AI \n        //  1:  AI \n        if (config.checkEmptyCell) {\n            for (let colIdx = 0; colIdx < headers.length; colIdx++) {\n                const cellValue = row[colIdx];\n                const strValue = cellValue !== undefined && cellValue !== null ? String(cellValue).trim() : '';\n                if (strValue === '') {\n                    issues.push({\n                        sheetId,\n                        tableName,\n                        rowIndex,\n                        colIndex: colIdx,\n                        issueType: 'empty_cell',\n                        description: `AI ${contentRowIndex} \"${headers[colIdx]}\" `,\n                        currentValue: '',\n                    });\n                }\n            }\n        }\n        //  2: \n        if (config.checkIndexGap) {\n            const currentIndex = extractNumber(row[indexColIdx]);\n            if (contentRowIndex === newRowStartContentIndex && lastSnapshotIndex !== null && currentIndex !== null) {\n                // \n                if (currentIndex !== lastSnapshotIndex + 1) {\n                    issues.push({\n                        sheetId,\n                        tableName,\n                        rowIndex,\n                        colIndex: indexColIdx,\n                        issueType: 'index_gap',\n                        description: `AI ${lastSnapshotIndex}  ${currentIndex}`,\n                        currentValue: String(row[indexColIdx] ?? ''),\n                        expectedValue: String(lastSnapshotIndex + 1),\n                    });\n                }\n            }\n            else if (contentRowIndex > newRowStartContentIndex) {\n                // \n                const prevContentRowIndex = contentRowIndex - 1;\n                const prevRow = sheet.content[prevContentRowIndex];\n                const prevIndex = extractNumber(prevRow[indexColIdx]);\n                if (prevIndex !== null && currentIndex !== null && currentIndex !== prevIndex + 1) {\n                    issues.push({\n                        sheetId,\n                        tableName,\n                        rowIndex,\n                        colIndex: indexColIdx,\n                        issueType: 'index_gap',\n                        description: `AI ${prevIndex}  ${currentIndex}`,\n                        currentValue: String(row[indexColIdx] ?? ''),\n                        expectedValue: String(prevIndex + 1),\n                    });\n                }\n            }\n        }\n    }\n    return {\n        sheetId,\n        tableName,\n        hasIssues: issues.length > 0,\n        issues,\n    };\n}\n// ============================================================\n// Composable\n// ============================================================\n/**\n *  Composable\n * @param config \n */\nexport function useTableIntegrityCheck(config = {}) {\n    const mergedConfig = { ...DEFAULT_CONFIG, ...config };\n    /** tableName ->  */\n    const issuesByTable = ref(new Map());\n    /**  */\n    const allIssues = computed(() => {\n        const result = [];\n        issuesByTable.value.forEach(issues => {\n            result.push(...issues);\n        });\n        return result;\n    });\n    /**  */\n    const hasIssues = computed(() => allIssues.value.length > 0);\n    /**  */\n    const problematicTables = computed(() => {\n        const tables = [];\n        issuesByTable.value.forEach((issues, tableName) => {\n            if (issues.length > 0) {\n                tables.push(tableName);\n            }\n        });\n        return tables;\n    });\n    /**  */\n    const issueStats = computed(() => {\n        let emptyCount = 0;\n        let gapCount = 0;\n        allIssues.value.forEach(issue => {\n            if (issue.issueType === 'empty_cell')\n                emptyCount++;\n            if (issue.issueType === 'index_gap')\n                gapCount++;\n        });\n        return {\n            total: allIssues.value.length,\n            emptyCell: emptyCount,\n            indexGap: gapCount,\n        };\n    });\n    /**\n     *  aiDiffMap\n     *  AI /\n     *\n     * @param data \n     * @param snapshot AI\n     * @param aiDiffMap AI \n     */\n    function checkIntegrity(data, snapshot, aiDiffMap) {\n        const newIssuesMap = new Map();\n        //  AI \n        if (!data || !aiDiffMap || aiDiffMap.size === 0) {\n            issuesByTable.value = newIssuesMap;\n            return;\n        }\n        //  aiDiffMap  AI \n        const tableAiRows = new Map();\n        for (const key of aiDiffMap) {\n            const tableName = extractTableNameFromKey(key);\n            const rowIndex = extractRowIndexFromKey(key);\n            if (tableName && rowIndex !== null) {\n                if (!tableAiRows.has(tableName)) {\n                    tableAiRows.set(tableName, new Set());\n                }\n                tableAiRows.get(tableName).add(rowIndex);\n            }\n        }\n        //  AI \n        for (const sheetId in data) {\n            // \n            if (sheetId === 'mate' || sheetId === 'updated' || sheetId === 'created' || sheetId.startsWith('_')) {\n                continue;\n            }\n            const sheet = data[sheetId];\n            if (!sheet || !sheet.name)\n                continue;\n            const tableName = sheet.name;\n            const aiChangedRows = tableAiRows.get(tableName);\n            //  AI \n            if (!aiChangedRows || aiChangedRows.size === 0) {\n                continue;\n            }\n            // \n            let snapshotSheet = null;\n            if (snapshot) {\n                for (const snapSheetId in snapshot) {\n                    if (snapshot[snapSheetId]?.name === tableName) {\n                        snapshotSheet = snapshot[snapSheetId];\n                        break;\n                    }\n                }\n            }\n            const result = checkTableIntegrity(sheetId, sheet, snapshotSheet, aiChangedRows, mergedConfig);\n            if (result.hasIssues) {\n                newIssuesMap.set(result.tableName, result.issues);\n                console.warn(`[ACU IntegrityCheck]  \"${result.tableName}\"  ${result.issues.length} `);\n            }\n        }\n        issuesByTable.value = newIssuesMap;\n        if (hasIssues.value) {\n            console.warn(`[ACU IntegrityCheck]  ${allIssues.value.length} `);\n        }\n        else {\n            console.info('[ACU IntegrityCheck] AI');\n        }\n    }\n    /**\n     * \n     * @param tableName \n     */\n    function hasTableIssues(tableName) {\n        const issues = issuesByTable.value.get(tableName);\n        return issues ? issues.length > 0 : false;\n    }\n    /**\n     * \n     * @param tableName \n     */\n    function getTableIssues(tableName) {\n        return issuesByTable.value.get(tableName) || [];\n    }\n    /**\n     * \n     */\n    function clearIssues() {\n        issuesByTable.value = new Map();\n    }\n    /**\n     * \n     */\n    function getSummaryText() {\n        if (!hasIssues.value)\n            return '';\n        const stats = issueStats.value;\n        const parts = [];\n        if (stats.emptyCell > 0) {\n            parts.push(`${stats.emptyCell} `);\n        }\n        if (stats.indexGap > 0) {\n            parts.push(`${stats.indexGap} `);\n        }\n        return ` ${parts.join('')} ${stats.total} `;\n    }\n    return {\n        // \n        issuesByTable,\n        allIssues,\n        hasIssues,\n        problematicTables,\n        issueStats,\n        // \n        checkIntegrity,\n        hasTableIssues,\n        getTableIssues,\n        clearIssues,\n        getSummaryText,\n        // \n        isSummaryOrOutlineTable,\n    };\n}\n// ============================================================\n// \n// ============================================================\nexport { checkTableIntegrity, extractNumber };\n","/**\n *  Store\n *  globalStagedData, currentDiffMap, pendingDeletes, isSaving \n *\n * :\n * -  acu_*  localStorage \n * -  TavernDB_ACU_IsolatedData \n * -  AutoCardUpdaterAPI \n */\nimport { klona } from 'klona';\nimport { useCellLock } from '../composables/useCellLock';\nimport { saveSnapshot as saveRowSnapshot } from '../composables/useRowHistory';\nimport { isSummaryOrOutlineTable, useTableIntegrityCheck } from '../composables/useTableIntegrityCheck';\nimport { getCore, getTableData } from '../utils/index';\n// ============================================================\n//  ( types/index.ts )\n// ============================================================\n/**  -  */\nexport const STORAGE_KEYS = {\n    SNAPSHOT: 'acu_data_snapshot_v18_5',\n    TABLE_ORDER: 'acu_table_order',\n    ACTIVE_TAB: 'acu_active_tab',\n    UI_CONFIG: 'acu_ui_config_v18',\n    UI_COLLAPSE: 'acu_ui_collapse',\n    TABLE_HEIGHTS: 'acu_table_heights',\n    REVERSE_TABLES: 'acu_reverse_tables',\n    PIN: 'acu_pin',\n    TABLE_STYLES: 'acu_table_styles',\n    WINDOW_CONFIG: 'acu_win_config',\n    V5_SETTINGS: 'shujuku_v34_allSettings_v2',\n};\n// ============================================================\n// \n// ============================================================\n/**\n * \n * null, undefined, '', 'null', 'undefined' \n * @param value \n * @returns \n */\nfunction normalizeValue(value) {\n    if (value === null || value === undefined)\n        return '';\n    const strValue = String(value).trim();\n    // 'null'  'undefined' \n    if (strValue === 'null' || strValue === 'undefined')\n        return '';\n    return strValue;\n}\n// ============================================================\n// Store \n// ============================================================\nexport const useDataStore = defineStore('acu-data', () => {\n    // ============================================================\n    //  - \n    // ============================================================\n    /**  -  globalStagedData () */\n    const stagedData = ref(null);\n    /**  - Vue  */\n    const tables = ref({});\n    /**  -  */\n    const snapshot = ref(null);\n    /**  -  */\n    const lastSavedData = ref(null);\n    /**\n     * AI - AI \n     *  generateDiffMap \n     */\n    const aiDiffMap = reactive(new Set());\n    /**\n     *  - \n     *  updateCell/insertRow \n     */\n    const manualDiffMap = reactive(new Set());\n    /**\n     *  () - \n     * @deprecated  getCellChangeType/getRowChangeType \n     */\n    const diffMap = computed(() => {\n        const merged = new Set();\n        aiDiffMap.forEach(key => merged.add(key));\n        manualDiffMap.forEach(key => merged.add(key));\n        return merged;\n    });\n    /**  -  pendingDeletes ( reactive  Set ) */\n    const pendingDeletes = reactive(new Set());\n    /**  -  isSaving */\n    const isSaving = ref(false);\n    /**  */\n    const isLoading = ref(false);\n    /**  */\n    const targetFloorInfo = ref(null);\n    // ============================================================\n    // \n    // ============================================================\n    /**  */\n    const integrityChecker = useTableIntegrityCheck();\n    /**  */\n    const cellLock = useCellLock();\n    /**  ->  */\n    const integrityIssues = integrityChecker.issuesByTable;\n    /**  */\n    const hasIntegrityIssues = integrityChecker.hasIssues;\n    /**  */\n    const problematicTables = integrityChecker.problematicTables;\n    /**  */\n    const integrityStats = integrityChecker.issueStats;\n    // ============================================================\n    // Getters\n    // ============================================================\n    /**  */\n    const hasPendingDeletes = computed(() => pendingDeletes.size > 0);\n    /**  */\n    const hasUnsavedChanges = computed(() => aiDiffMap.size > 0 || manualDiffMap.size > 0 || pendingDeletes.size > 0);\n    /**  -  */\n    const hasChanges = hasUnsavedChanges;\n    /**  */\n    const hasUndoData = computed(() => lastSavedData.value !== null);\n    /**  ( API) */\n    function getStagedData() {\n        return stagedData.value;\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    function loadSnapshot() {\n        try {\n            const data = localStorage.getItem(STORAGE_KEYS.SNAPSHOT);\n            return data ? JSON.parse(data) : null;\n        }\n        catch {\n            return null;\n        }\n    }\n    /**\n     *  localStorage\n     */\n    function saveSnapshot(data) {\n        try {\n            //  generateDiffMap \n            snapshot.value = klona(data);\n            //  localStorage\n            localStorage.setItem(STORAGE_KEYS.SNAPSHOT, JSON.stringify(data));\n        }\n        catch (e) {\n            console.error('[ACU] Save snapshot failed:', e);\n        }\n    }\n    /**\n     * \n     */\n    function clearSnapshot() {\n        try {\n            localStorage.removeItem(STORAGE_KEYS.SNAPSHOT);\n        }\n        catch {\n            // ignore\n        }\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     *  snapshot stagedData\n     * \n     */\n    function saveLastState() {\n        //  snapshot localStorage \n        const currentSnapshot = snapshot.value || loadSnapshot();\n        if (currentSnapshot) {\n            lastSavedData.value = klona(currentSnapshot);\n            console.info('[ACU] ');\n        }\n        else {\n            console.warn('[ACU] ');\n        }\n    }\n    /**\n     *  App.vue \n     * @returns  null\n     */\n    function getUndoData() {\n        if (!lastSavedData.value) {\n            return null;\n        }\n        return klona(lastSavedData.value);\n    }\n    /**\n     * \n     * \n     * @returns \n     */\n    function undoToLastSave() {\n        if (!lastSavedData.value) {\n            console.warn('[ACU] ');\n            return false;\n        }\n        // \n        const restoredData = klona(lastSavedData.value);\n        stagedData.value = restoredData;\n        const processed = processToTableData(restoredData);\n        tables.value = processed;\n        //  snapshot\n        // \"\"\n        //  snapshot \n        //  AI  AI \n        aiDiffMap.clear();\n        pendingDeletes.clear();\n        //  key\n        const newDiffKeys = [];\n        //  snapshot \n        //  generateDiffMap  key tableName:rowIdx:colIdx\n        if (snapshot.value) {\n            for (const sheetId in restoredData) {\n                if (sheetId === 'mate' || sheetId === 'updated' || sheetId === 'created' || sheetId.startsWith('_')) {\n                    continue;\n                }\n                const restoredSheet = restoredData[sheetId];\n                const snapSheet = snapshot.value[sheetId];\n                if (!restoredSheet?.content)\n                    continue;\n                const tableName = restoredSheet.name || sheetId.replace('sheet_', '');\n                // \n                if (!snapSheet?.content) {\n                    for (let rowIdx = 1; rowIdx < restoredSheet.content.length; rowIdx++) {\n                        const realRowIdx = rowIdx - 1;\n                        const rowKey = getRowKey(tableName, realRowIdx);\n                        newDiffKeys.push(rowKey);\n                    }\n                    continue;\n                }\n                // \n                const maxRows = Math.max(restoredSheet.content.length, snapSheet.content.length);\n                for (let rowIdx = 1; rowIdx < maxRows; rowIdx++) {\n                    const restoredRow = restoredSheet.content[rowIdx];\n                    const snapRow = snapSheet.content[rowIdx];\n                    const realRowIdx = rowIdx - 1;\n                    // \n                    if (!restoredRow || !snapRow) {\n                        const rowKey = getRowKey(tableName, realRowIdx);\n                        newDiffKeys.push(rowKey);\n                        continue;\n                    }\n                    // \n                    const maxCols = Math.max(restoredRow.length, snapRow.length);\n                    for (let colIdx = 0; colIdx < maxCols; colIdx++) {\n                        const restoredVal = String(restoredRow[colIdx] ?? '');\n                        const snapVal = String(snapRow[colIdx] ?? '');\n                        if (restoredVal !== snapVal) {\n                            const cellKey = getCellKey(tableName, realRowIdx, colIdx);\n                            newDiffKeys.push(cellKey);\n                        }\n                    }\n                }\n            }\n        }\n        // \n        manualDiffMap.clear();\n        newDiffKeys.forEach(key => manualDiffMap.add(key));\n        // \"\"\n        // 0\n        manualDiffMap.add('__undo_pending__');\n        console.info(`[ACU] :  ${manualDiffMap.size} `);\n        // \n        // lastSavedData.value = null;\n        console.info('[ACU] ');\n        return true;\n    }\n    /**\n     * \n     */\n    function clearUndoCache() {\n        lastSavedData.value = null;\n        console.info('[ACU] ');\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    function getRowKey(tableId, rowIndex) {\n        return `${tableId}-row-${rowIndex}`;\n    }\n    /**\n     * \n     */\n    function getCellKey(tableId, rowIndex, colIndex) {\n        return `${tableId}-${rowIndex}-${colIndex}`;\n    }\n    /**\n     *  SillyTavern \n     */\n    function getSillyTavern() {\n        let ST = window.SillyTavern || (window.parent ? window.parent.SillyTavern : null);\n        if (!ST && window.top && window.top.SillyTavern) {\n            ST = window.top.SillyTavern;\n        }\n        return ST;\n    }\n    /**\n     *  Key\n     */\n    function getIsolationConfigKey() {\n        let configKey = '';\n        try {\n            let storage = window.localStorage;\n            if (!storage.getItem(STORAGE_KEYS.V5_SETTINGS) && window.parent) {\n                try {\n                    storage = window.parent.localStorage;\n                }\n                catch {\n                    // ignore cross-origin\n                }\n            }\n            const settingsStr = storage.getItem(STORAGE_KEYS.V5_SETTINGS);\n            if (settingsStr) {\n                const settings = JSON.parse(settingsStr);\n                if (settings.dataIsolationEnabled && settings.dataIsolationCode) {\n                    configKey = settings.dataIsolationCode;\n                }\n            }\n        }\n        catch {\n            // ignore\n        }\n        return configKey;\n    }\n    /**\n     * \n     */\n    function getSnapshotCellValue(tableId, rowIndex, colIndex) {\n        if (!snapshot.value)\n            return '';\n        for (const sheetId in snapshot.value) {\n            const sheet = snapshot.value[sheetId];\n            if (sheet && sheet.name === tableId && sheet.content) {\n                const row = sheet.content[rowIndex + 1];\n                if (row && row[colIndex] !== undefined) {\n                    return String(row[colIndex]);\n                }\n            }\n        }\n        return '';\n    }\n    /**\n     *  tables  stagedData\n     */\n    function syncToStagedData() {\n        if (!stagedData.value)\n            return;\n        const data = klona(stagedData.value);\n        for (const sheetId in data) {\n            const sheet = data[sheetId];\n            if (!sheet || !sheet.name || !sheet.content)\n                continue;\n            const tableRows = tables.value[sheet.name];\n            if (!tableRows)\n                continue;\n            const headers = sheet.content[0] || [];\n            const newContent = [headers];\n            for (const row of tableRows) {\n                const rowData = [];\n                for (let i = 0; i < headers.length; i++) {\n                    const cell = row.cells[i];\n                    rowData.push(cell ? cell.value : '');\n                }\n                newContent.push(rowData);\n            }\n            sheet.content = newContent;\n        }\n        stagedData.value = data;\n    }\n    /**\n     *  ()\n     */\n    function clearChanges(clearDeletes = false) {\n        aiDiffMap.clear();\n        manualDiffMap.clear();\n        if (clearDeletes) {\n            pendingDeletes.clear();\n        }\n    }\n    /**\n     *  ()\n     * \n     * @returns \n     */\n    function setStagedData(data) {\n        //  -  AI \n        const modifiedData = klona(data);\n        let totalRestored = 0;\n        for (const sheetId in modifiedData) {\n            const sheet = modifiedData[sheetId];\n            if (!sheet?.name || !sheet.content || !Array.isArray(sheet.content))\n                continue;\n            const result = cellLock.applyLocks(sheet.name, sheet.content);\n            if (result.modified) {\n                totalRestored += result.restored.length;\n                console.info(`[ACU]  \"${sheet.name}\" `);\n            }\n        }\n        if (totalRestored > 0) {\n            console.info(`[ACU]  ${totalRestored}  AI `);\n        }\n        stagedData.value = modifiedData;\n        const processed = processToTableData(modifiedData);\n        tables.value = processed;\n        console.info('[ACU] ');\n        // \n        return modifiedData;\n    }\n    /**\n     *  AI  ()\n     *  aiDiffMap manualDiffMap\n     */\n    function generateDiffMap(currentData) {\n        //  AI \n        aiDiffMap.clear();\n        if (!snapshot.value) {\n            // \n            return;\n        }\n        const snapData = snapshot.value;\n        for (const sheetId in currentData) {\n            if (sheetId === 'mate' || sheetId === 'updated' || sheetId === 'created' || sheetId.startsWith('_')) {\n                continue;\n            }\n            const currentSheet = currentData[sheetId];\n            const snapSheet = snapData[sheetId];\n            if (!currentSheet || !currentSheet.content)\n                continue;\n            const tableName = currentSheet.name || sheetId.replace('sheet_', '');\n            //  AI \n            if (!snapSheet || !snapSheet.content) {\n                for (let rowIdx = 1; rowIdx < currentSheet.content.length; rowIdx++) {\n                    const rowKey = getRowKey(tableName, rowIdx - 1);\n                    //  AI \n                    if (!manualDiffMap.has(rowKey)) {\n                        aiDiffMap.add(rowKey);\n                    }\n                }\n                continue;\n            }\n            // \n            const maxRows = Math.max(currentSheet.content.length, snapSheet.content.length);\n            for (let rowIdx = 1; rowIdx < maxRows; rowIdx++) {\n                const currentRow = currentSheet.content[rowIdx];\n                const snapRow = snapSheet.content[rowIdx];\n                const realRowIdx = rowIdx - 1;\n                // \n                if (!currentRow || !snapRow) {\n                    const rowKey = getRowKey(tableName, realRowIdx);\n                    if (!manualDiffMap.has(rowKey)) {\n                        aiDiffMap.add(rowKey);\n                    }\n                    // currentRow  snapRow  cellKey\n                    //  getCellChangeClass \n                    if (currentRow && !snapRow) {\n                        for (let colIdx = 0; colIdx < currentRow.length; colIdx++) {\n                            const cellKey = getCellKey(tableName, realRowIdx, colIdx);\n                            if (!manualDiffMap.has(cellKey)) {\n                                aiDiffMap.add(cellKey);\n                            }\n                        }\n                    }\n                    continue;\n                }\n                // \n                const maxCols = Math.max(currentRow.length, snapRow.length);\n                for (let colIdx = 0; colIdx < maxCols; colIdx++) {\n                    // null, undefined, '', 'null' \n                    const currentVal = normalizeValue(currentRow[colIdx]);\n                    const snapVal = normalizeValue(snapRow[colIdx]);\n                    if (currentVal !== snapVal) {\n                        const cellKey = getCellKey(tableName, realRowIdx, colIdx);\n                        //  AI \n                        if (!manualDiffMap.has(cellKey)) {\n                            aiDiffMap.add(cellKey);\n                        }\n                    }\n                }\n            }\n        }\n        console.info(`[ACU] AIAI: ${aiDiffMap.size}, : ${manualDiffMap.size}`);\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    async function loadFromDatabase() {\n        if (isLoading.value) {\n            console.warn('[ACU] ');\n            return;\n        }\n        try {\n            isLoading.value = true;\n            console.info('[ACU] ...');\n            const rawData = getTableData();\n            if (!rawData) {\n                console.warn('[ACU] ');\n                return;\n            }\n            //  -  AI \n            const modifiedData = klona(rawData);\n            let totalRestored = 0;\n            for (const sheetId in modifiedData) {\n                const sheet = modifiedData[sheetId];\n                if (!sheet?.name || !sheet.content || !Array.isArray(sheet.content))\n                    continue;\n                const result = cellLock.applyLocks(sheet.name, sheet.content);\n                if (result.modified) {\n                    totalRestored += result.restored.length;\n                    console.info(`[ACU]  \"${sheet.name}\"  ${result.restored.length} `);\n                }\n            }\n            if (totalRestored > 0) {\n                console.info(`[ACU]  ${totalRestored}  AI `);\n            }\n            stagedData.value = modifiedData;\n            const processed = processToTableData(modifiedData);\n            tables.value = processed;\n            snapshot.value = klona(modifiedData);\n            aiDiffMap.clear();\n            manualDiffMap.clear();\n            pendingDeletes.clear();\n            saveSnapshot(modifiedData);\n            //  AI \n            integrityChecker.checkIntegrity(modifiedData, null, new Set());\n            console.info('[ACU] :', Object.keys(processed).length);\n        }\n        catch (error) {\n            console.error('[ACU] :', error);\n            throw error;\n        }\n        finally {\n            isLoading.value = false;\n        }\n    }\n    /**\n     *  Vue \n     *  processJsonData  name  sheet\n     */\n    function processToTableData(rawData) {\n        const result = {};\n        for (const sheetId in rawData) {\n            const sheet = rawData[sheetId];\n            //  name  sheet\n            if (!sheet?.name) {\n                continue;\n            }\n            if (!sheet.content || !Array.isArray(sheet.content)) {\n                continue;\n            }\n            //  sheet.name \n            const tableName = sheet.name;\n            const headers = sheet.content[0] || [];\n            const rows = [];\n            for (let rowIdx = 1; rowIdx < sheet.content.length; rowIdx++) {\n                const rowData = sheet.content[rowIdx];\n                const cells = [];\n                for (let colIdx = 0; colIdx < headers.length; colIdx++) {\n                    cells.push({\n                        key: String(headers[colIdx] || `col_${colIdx}`),\n                        value: String(rowData[colIdx] ?? ''),\n                    });\n                }\n                rows.push({\n                    index: rowIdx - 1,\n                    cells,\n                });\n            }\n            result[tableName] = rows;\n        }\n        return result;\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    function findTargetFloor() {\n        const ST = getSillyTavern();\n        if (!ST || !ST.chat || ST.chat.length === 0)\n            return -1;\n        for (let i = ST.chat.length - 1; i >= 0; i--) {\n            const msg = ST.chat[i];\n            if (!msg.is_user && msg.TavernDB_ACU_IsolatedData) {\n                targetFloorInfo.value = {\n                    index: i,\n                    isAuto: true,\n                    reason: '',\n                };\n                return i;\n            }\n        }\n        for (let i = ST.chat.length - 1; i >= 0; i--) {\n            const msg = ST.chat[i];\n            if (!msg.is_user) {\n                targetFloorInfo.value = {\n                    index: i,\n                    isAuto: true,\n                    reason: '',\n                };\n                return i;\n            }\n        }\n        return -1;\n    }\n    /**\n     * \n     */\n    function filterDeletedRows(data) {\n        if (pendingDeletes.size === 0)\n            return data;\n        const result = klona(data);\n        for (const sheetId in result) {\n            if (sheetId === 'mate')\n                continue;\n            const sheet = result[sheetId];\n            if (!sheet || !sheet.name || !sheet.content)\n                continue;\n            const newContent = [sheet.content[0]];\n            for (let i = 1; i < sheet.content.length; i++) {\n                const realIdx = i - 1;\n                const rowKey = getRowKey(sheet.name, realIdx);\n                if (!pendingDeletes.has(rowKey)) {\n                    newContent.push(sheet.content[i]);\n                }\n            }\n            sheet.content = newContent;\n        }\n        return result;\n    }\n    /**\n     * \n     */\n    async function writeToFloor(floorIndex, data) {\n        const ST = getSillyTavern();\n        if (!ST || !ST.chat || !ST.chat[floorIndex]) {\n            throw new Error(` ${floorIndex} `);\n        }\n        const targetMsg = ST.chat[floorIndex];\n        let finalKey = getIsolationConfigKey();\n        if (targetMsg.TavernDB_ACU_IsolatedData) {\n            const existingKeys = Object.keys(targetMsg.TavernDB_ACU_IsolatedData);\n            if (existingKeys.length > 0) {\n                finalKey = existingKeys[0];\n            }\n        }\n        else {\n            targetMsg.TavernDB_ACU_IsolatedData = {};\n        }\n        if (!targetMsg.TavernDB_ACU_IsolatedData[finalKey]) {\n            targetMsg.TavernDB_ACU_IsolatedData[finalKey] = {\n                independentData: {},\n                modifiedKeys: [],\n                updateGroupKeys: [],\n            };\n        }\n        const tagData = targetMsg.TavernDB_ACU_IsolatedData[finalKey];\n        if (!tagData.independentData)\n            tagData.independentData = {};\n        const sheetsToSave = Object.keys(data).filter(k => k.startsWith('sheet_'));\n        sheetsToSave.forEach(k => {\n            tagData.independentData[k] = klona(data[k]);\n        });\n        const existingKeys = tagData.modifiedKeys || [];\n        tagData.modifiedKeys = [...new Set([...existingKeys, ...sheetsToSave])];\n    }\n    /**\n     * \n     */\n    async function syncWorldbook() {\n        const api = getCore().getDB();\n        if (api && api.syncWorldbookEntries) {\n            try {\n                await api.syncWorldbookEntries({ createIfNeeded: true });\n            }\n            catch (syncErr) {\n                console.warn('[ACU] Worldbook sync failed:', syncErr);\n            }\n        }\n    }\n    /**\n     * \n     */\n    async function saveChatDebounced() {\n        const ST = getSillyTavern();\n        if (ST?.saveChatDebounced) {\n            await ST.saveChatDebounced();\n        }\n        else if (ST?.saveChat) {\n            await ST.saveChat();\n        }\n    }\n    /**\n     * \n     */\n    async function saveToDatabase() {\n        if (isSaving.value) {\n            console.warn('[ACU] ');\n            return { success: false, savedToFloor: -1, error: '' };\n        }\n        try {\n            isSaving.value = true;\n            console.info('[ACU] ...');\n            let dataToSave = stagedData.value;\n            if (!dataToSave) {\n                dataToSave = getTableData();\n            }\n            if (!dataToSave) {\n                throw new Error('');\n            }\n            const filteredData = filterDeletedRows(klona(dataToSave));\n            const targetFloor = findTargetFloor();\n            if (targetFloor === -1) {\n                throw new Error('');\n            }\n            await writeToFloor(targetFloor, filteredData);\n            await syncWorldbook();\n            await saveChatDebounced();\n            snapshot.value = klona(filteredData);\n            stagedData.value = klona(filteredData);\n            clearChanges(true);\n            saveSnapshot(filteredData);\n            console.info(`[ACU] : ${targetFloor}`);\n            return { success: true, savedToFloor: targetFloor };\n        }\n        catch (error) {\n            const errMsg = error.message;\n            console.error('[ACU] :', error);\n            return { success: false, savedToFloor: -1, error: errMsg };\n        }\n        finally {\n            isSaving.value = false;\n        }\n    }\n    /**\n     * \n     */\n    async function saveToFloor(floorIndex) {\n        if (isSaving.value) {\n            console.warn('[ACU] ');\n            return { success: false, savedToFloor: -1, error: '' };\n        }\n        try {\n            isSaving.value = true;\n            console.info(`[ACU]  ${floorIndex} ...`);\n            let dataToSave = stagedData.value;\n            if (!dataToSave) {\n                dataToSave = getTableData();\n            }\n            if (!dataToSave) {\n                throw new Error('');\n            }\n            const filteredData = filterDeletedRows(klona(dataToSave));\n            await writeToFloor(floorIndex, filteredData);\n            await syncWorldbook();\n            await saveChatDebounced();\n            snapshot.value = klona(filteredData);\n            stagedData.value = klona(filteredData);\n            clearChanges(true);\n            saveSnapshot(filteredData);\n            console.info(`[ACU]  ${floorIndex} `);\n            return { success: true, savedToFloor: floorIndex };\n        }\n        catch (error) {\n            const errMsg = error.message;\n            console.error('[ACU] :', error);\n            return { success: false, savedToFloor: -1, error: errMsg };\n        }\n        finally {\n            isSaving.value = false;\n        }\n    }\n    /**\n     * \n     */\n    async function purgeFloorRange(startFloor, endFloor) {\n        if (isSaving.value) {\n            console.warn('[ACU] ');\n            return;\n        }\n        try {\n            isSaving.value = true;\n            console.info(`[ACU]  ${startFloor}  ${endFloor} ...`);\n            const ST = getSillyTavern();\n            if (!ST || !ST.chat) {\n                throw new Error('');\n            }\n            const maxIdx = ST.chat.length - 1;\n            const safeStartFloor = Math.max(0, startFloor);\n            const safeEndFloor = Math.min(maxIdx, endFloor);\n            if (isNaN(safeStartFloor) || isNaN(safeEndFloor) || safeStartFloor > safeEndFloor) {\n                throw new Error('');\n            }\n            const keysToDelete = [\n                'TavernDB_ACU_Data',\n                'TavernDB_ACU_SummaryData',\n                'TavernDB_ACU_IndependentData',\n                'TavernDB_ACU_Identity',\n                'TavernDB_ACU_IsolatedData',\n                'TavernDB_ACU_ModifiedKeys',\n                'TavernDB_ACU_UpdateGroupKeys',\n            ];\n            let purgedCount = 0;\n            for (let i = safeStartFloor; i <= safeEndFloor; i++) {\n                const msg = ST.chat[i];\n                if (!msg)\n                    continue;\n                let messageModified = false;\n                for (const key of keysToDelete) {\n                    if (Object.prototype.hasOwnProperty.call(msg, key)) {\n                        delete msg[key];\n                        messageModified = true;\n                    }\n                }\n                if (messageModified) {\n                    purgedCount++;\n                }\n            }\n            if (purgedCount > 0) {\n                await saveChatDebounced();\n                clearSnapshot();\n                clearChanges(true);\n                await syncWorldbook();\n            }\n            console.info(`[ACU]  ${purgedCount} `);\n        }\n        catch (error) {\n            console.error('[ACU] :', error);\n            throw error;\n        }\n        finally {\n            isSaving.value = false;\n        }\n    }\n    // ============================================================\n    // \n    // ============================================================\n    /**\n     * \n     */\n    function insertRow(tableId, afterIndex) {\n        const tableRows = tables.value[tableId];\n        if (!tableRows || tableRows.length === 0) {\n            console.warn(`[ACU]  ${tableId} `);\n            return;\n        }\n        const templateRow = tableRows[0];\n        const newRow = {\n            index: tableRows.length,\n            cells: templateRow.cells.map((cell) => ({\n                key: cell.key,\n                value: '',\n            })),\n        };\n        tableRows.splice(afterIndex + 1, 0, newRow);\n        tableRows.forEach((row, i) => {\n            row.index = i;\n        });\n        const rowKey = getRowKey(tableId, afterIndex + 1);\n        // \n        manualDiffMap.add(rowKey);\n        syncToStagedData();\n        console.info(`[ACU]  ${tableId}  ${afterIndex} `);\n    }\n    /**\n     * ID\n     * \n     */\n    function getCurrentChatId() {\n        const ST = getSillyTavern();\n        // 1:  API\n        if (ST?.getCurrentChatId) {\n            const id = ST.getCurrentChatId();\n            if (id)\n                return id;\n        }\n        // 2:  chat_metadata \n        if (ST?.chat_metadata?.chat_id) {\n            return String(ST.chat_metadata.chat_id);\n        }\n        // 3: \n        if (ST?.chat?.length > 0 && ST.chat[0]?.chat_id) {\n            return ST.chat[0].chat_id;\n        }\n        //  'default' \n        return 'default';\n    }\n    /**\n     * \n     * @param tableId  ID\n     * @param rowIndex \n     * @param colIndex \n     * @param value \n     * @param options \n     * @param options.skipHistory \n     */\n    function updateCell(tableId, rowIndex, colIndex, value, options) {\n        const tableRows = tables.value[tableId];\n        if (!tableRows || !tableRows[rowIndex]) {\n            console.warn(`[ACU] : ${tableId}[${rowIndex}][${colIndex}]`);\n            return;\n        }\n        const row = tableRows[rowIndex];\n        if (row.cells[colIndex]) {\n            const oldValue = row.cells[colIndex].value;\n            row.cells[colIndex].value = value;\n            const cellKey = getCellKey(tableId, rowIndex, colIndex);\n            const snapshotValue = getSnapshotCellValue(tableId, rowIndex, colIndex);\n            if (value !== snapshotValue) {\n                // \n                manualDiffMap.add(cellKey);\n                //  AI \n                aiDiffMap.delete(cellKey);\n                // ===  ===\n                // \n                if (!options?.skipHistory) {\n                    const chatId = getCurrentChatId();\n                    console.info('[ACU] , :', {\n                        chatId,\n                        tableId,\n                        rowIndex,\n                        colIndex,\n                        oldValue: oldValue.substring(0, 50) + (oldValue.length > 50 ? '...' : ''),\n                        newValue: value.substring(0, 50) + (value.length > 50 ? '...' : ''),\n                    });\n                    if (chatId) {\n                        // \n                        const rowBeforeEdit = {\n                            index: rowIndex,\n                            key: getRowKey(tableId, rowIndex),\n                            cells: row.cells.map((cell, i) => ({\n                                colIndex: i,\n                                key: cell.key,\n                                value: i === colIndex ? oldValue : cell.value,\n                            })),\n                        };\n                        // \n                        saveRowSnapshot(chatId, tableId, rowBeforeEdit, 'manual')\n                            .then(() => {\n                            console.info('[ACU] ');\n                        })\n                            .catch((err) => {\n                            console.warn('[ACU] :', err);\n                        });\n                    }\n                    else {\n                        console.warn('[ACU]  chatId');\n                    }\n                }\n                // ===  ===\n            }\n            else {\n                // \n                manualDiffMap.delete(cellKey);\n                aiDiffMap.delete(cellKey);\n                const isRowUnchanged = row.cells.every((cell, i) => cell.value === getSnapshotCellValue(tableId, rowIndex, i));\n                if (isRowUnchanged) {\n                    row.cells.forEach((_, i) => {\n                        const key = getCellKey(tableId, rowIndex, i);\n                        manualDiffMap.delete(key);\n                        aiDiffMap.delete(key);\n                    });\n                }\n            }\n            syncToStagedData();\n            console.info(`[ACU]  ${tableId}[${rowIndex}][${colIndex}]: \"${oldValue}\" -> \"${value}\"`);\n        }\n    }\n    /**\n     *  ( API)\n     */\n    function toggleDelete(rowKey) {\n        if (pendingDeletes.has(rowKey)) {\n            pendingDeletes.delete(rowKey);\n            console.info(`[ACU] : ${rowKey}`);\n        }\n        else {\n            pendingDeletes.add(rowKey);\n            console.info(`[ACU] : ${rowKey}`);\n        }\n    }\n    /**\n     *  ( API)\n     */\n    function toggleDeleteRow(tableId, rowIndex) {\n        const rowKey = getRowKey(tableId, rowIndex);\n        toggleDelete(rowKey);\n    }\n    /**\n     * \n     */\n    function markForDelete(tableId, rowIndex) {\n        const rowKey = getRowKey(tableId, rowIndex);\n        pendingDeletes.add(rowKey);\n    }\n    /**\n     * \n     */\n    function unmarkForDelete(tableId, rowIndex) {\n        const rowKey = getRowKey(tableId, rowIndex);\n        pendingDeletes.delete(rowKey);\n    }\n    /**\n     *  AI \n     *  Tab \n     */\n    function hasTableAiChanges(tableName) {\n        //  aiDiffMap\n        for (const key of aiDiffMap) {\n            // key : \"-row-\"  \"--\"\n            if (key.startsWith(`${tableName}-`)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     *  AI \n     */\n    function getTablesWithAiChanges() {\n        const tablesSet = new Set();\n        for (const key of aiDiffMap) {\n            //  key \n            // key : \"-row-\"  \"--\"\n            const parts = key.split('-');\n            if (parts.length >= 2) {\n                //  \"row\" \n                const tableNameParts = [];\n                for (let i = 0; i < parts.length; i++) {\n                    if (parts[i] === 'row' || /^\\d+$/.test(parts[i])) {\n                        break;\n                    }\n                    tableNameParts.push(parts[i]);\n                }\n                if (tableNameParts.length > 0) {\n                    tablesSet.add(tableNameParts.join('-'));\n                }\n            }\n        }\n        return Array.from(tablesSet);\n    }\n    /**\n     * \n     * @returns 'manual' | 'ai' | null\n     */\n    function getCellChangeType(cellId) {\n        // \n        if (manualDiffMap.has(cellId))\n            return 'manual';\n        if (aiDiffMap.has(cellId))\n            return 'ai';\n        return null;\n    }\n    /**\n     * \n     * @returns 'manual' | 'ai' | null ( manual AI  ai)\n     */\n    function getRowChangeType(tableId, rowIndex, colCount) {\n        const rowKey = getRowKey(tableId, rowIndex);\n        // \n        if (manualDiffMap.has(rowKey))\n            return 'manual';\n        if (aiDiffMap.has(rowKey))\n            return 'ai';\n        // \n        if (pendingDeletes.has(rowKey))\n            return 'manual';\n        const tableRows = tables.value[tableId];\n        const cols = colCount ?? (tableRows?.[rowIndex]?.cells.length || 0);\n        let hasManual = false;\n        let hasAi = false;\n        for (let c = 0; c < cols; c++) {\n            const cellKey = getCellKey(tableId, rowIndex, c);\n            if (manualDiffMap.has(cellKey))\n                hasManual = true;\n            if (aiDiffMap.has(cellKey))\n                hasAi = true;\n        }\n        // \n        if (hasManual)\n            return 'manual';\n        if (hasAi)\n            return 'ai';\n        return null;\n    }\n    /**\n     *  ( API)\n     */\n    function isRowChanged(tableId, rowIndex, colCount) {\n        return getRowChangeType(tableId, rowIndex, colCount) !== null;\n    }\n    /**\n     * \n     */\n    function isRowPendingDelete(tableId, rowIndex) {\n        return pendingDeletes.has(getRowKey(tableId, rowIndex));\n    }\n    /**\n     *  ( API)\n     */\n    function isPendingDelete(rowKey) {\n        return pendingDeletes.has(rowKey);\n    }\n    /**\n     *  ( API)\n     */\n    function isCellChanged(cellId) {\n        return getCellChangeType(cellId) !== null;\n    }\n    // ============================================================\n    //  Store \n    // ============================================================\n    return {\n        // \n        stagedData,\n        tables,\n        snapshot,\n        aiDiffMap,\n        manualDiffMap,\n        diffMap, // \n        pendingDeletes,\n        isSaving,\n        isLoading,\n        targetFloorInfo,\n        lastSavedData,\n        // Getters\n        hasPendingDeletes,\n        hasUnsavedChanges,\n        hasChanges,\n        hasUndoData,\n        getStagedData,\n        // \n        loadFromDatabase,\n        processToTableData,\n        setStagedData,\n        generateDiffMap,\n        // \n        saveToDatabase,\n        saveToFloor,\n        purgeFloorRange,\n        // \n        insertRow,\n        updateCell,\n        toggleDelete,\n        toggleDeleteRow,\n        markForDelete,\n        unmarkForDelete,\n        //  ( API)\n        getCellChangeType,\n        getRowChangeType,\n        hasTableAiChanges,\n        getTablesWithAiChanges,\n        //  ( API)\n        isRowChanged,\n        isRowPendingDelete,\n        isPendingDelete,\n        isCellChanged,\n        // \n        getRowKey,\n        getCellKey,\n        clearChanges,\n        syncToStagedData,\n        // \n        loadSnapshot,\n        saveSnapshot,\n        clearSnapshot,\n        // \n        saveLastState,\n        undoToLastSave,\n        clearUndoCache,\n        getUndoData,\n        // \n        integrityIssues,\n        hasIntegrityIssues,\n        problematicTables,\n        integrityStats,\n        /**\n         * \n         *  AI \n         */\n        checkIntegrity: (data) => {\n            //  aiDiffMap\n            integrityChecker.checkIntegrity(data, snapshot.value, aiDiffMap);\n        },\n        hasTableIssues: integrityChecker.hasTableIssues,\n        getTableIssues: integrityChecker.getTableIssues,\n        getIntegritySummary: integrityChecker.getSummaryText,\n        clearIntegrityIssues: integrityChecker.clearIssues,\n        isSummaryOrOutlineTable,\n    };\n});\n","/**\n * UI  Store\n *  isCollapsed, isPinned, currentPage, currentSearchTerm, globalScrollTop, isEditingOrder \n */\nimport { useStorage } from '@vueuse/core';\nimport { useDataStore } from './useDataStore';\nimport { shallowRef } from 'vue';\n//  props  tables  store  Props \n/**  () */\nexport const STORAGE_KEYS = {\n    UI_COLLAPSE: 'acu_ui_collapse_state',\n    PIN: 'acu_pin_state',\n    ACTIVE_TAB: 'acu_active_tab',\n    TABLE_ORDER: 'acu_table_order',\n    TABLE_HEIGHTS: 'acu_table_heights',\n    TABLE_STYLES: 'acu_table_styles',\n    REVERSE_TABLES: 'acu_reverse_tables',\n    BALL_POSITION: 'acu_float_ball_pos',\n    LAYOUT: 'acu_layout',\n    VISIBLE_TABS: 'acu_visible_tabs',\n    TAB_ORDER: 'acu_tab_order',\n};\n/**  Tab  */\nexport const TAB_DASHBOARD = 'acu_tab_dashboard_home';\nexport const TAB_OPTIONS = 'acu_tab_options_panel';\nexport const TAB_RELATIONSHIP_GRAPH = 'acu_tab_relationship_graph';\nexport const useUIStore = defineStore('acu-ui', () => {\n    // ============================================================\n    //  -  useStorage  localStorage\n    //\n    //  index.ts checkAndResetCenteredMode\n    //  Vue  activeTab \n    // ============================================================\n    /**  -  isCollapsed */\n    const isCollapsed = useStorage(STORAGE_KEYS.UI_COLLAPSE, false);\n    /**  -  isPinned */\n    const isPinned = useStorage(STORAGE_KEYS.PIN, false);\n    /**  Tab -  getActiveTabState/saveActiveTabState */\n    const activeTab = useStorage(STORAGE_KEYS.ACTIVE_TAB, null);\n    /**  -  getSavedTableOrder/saveTableOrder */\n    const tableOrder = useStorage(STORAGE_KEYS.TABLE_ORDER, []);\n    /**  -  getTableHeights/saveTableHeights */\n    const tableHeights = useStorage(STORAGE_KEYS.TABLE_HEIGHTS, {});\n    /**  -  getTableStyles/saveTableStyles */\n    const tableStyles = useStorage(STORAGE_KEYS.TABLE_STYLES, {});\n    /**  -  getReverseOrderTables/saveReverseOrderTables */\n    const reverseTables = useStorage(STORAGE_KEYS.REVERSE_TABLES, []);\n    /**  */\n    const ballPosition = useStorage(STORAGE_KEYS.BALL_POSITION, {\n        x: 20,\n        y: typeof window !== 'undefined' ? window.innerHeight - 150 : 500,\n    });\n    /**  - (horizontal)(vertical) */\n    const layout = useStorage(STORAGE_KEYS.LAYOUT, 'horizontal');\n    /**  Tab ID  -  */\n    const visibleTabs = useStorage(STORAGE_KEYS.VISIBLE_TABS, []);\n    /** Tab  -  */\n    const tabOrder = useStorage(STORAGE_KEYS.TAB_ORDER, []);\n    // ============================================================\n    //  - \n    // ============================================================\n    /**  -  currentPage */\n    const currentPage = ref(1);\n    /**  -  currentSearchTerm */\n    const searchTerm = ref('');\n    /**  -  globalScrollTop */\n    const scrollTop = ref(0);\n    /**  -  isEditingOrder */\n    const isEditingOrder = ref(false);\n    /**  -  isInitialized */\n    const isInitialized = ref(false);\n    /**  () */\n    const isContentHidden = ref(false);\n    /**  */\n    const isMobile = ref(false);\n    /**  */\n    const isLockEditMode = ref(false);\n    /**  */\n    const showLockedOnly = ref(false);\n    // ============================================================\n    //  - \n    // ============================================================\n    /**  */\n    const rowEditDialog = reactive({\n        visible: false,\n        props: {\n            tableName: '',\n            tableId: '',\n            rowIndex: 0,\n            currentRowData: null,\n        },\n    });\n    /**  */\n    const widgetSettingsDialog = reactive({\n        visible: false,\n        props: {\n            widgetId: '',\n            widgetConfig: null,\n            tableHeaders: [],\n        },\n    });\n    /** Dashboard  */\n    const dashboardHistoryDialog = reactive({\n        visible: false,\n        props: {\n            tableName: '',\n            tableId: '',\n            rowIndex: 0,\n            currentRowData: null,\n            titleColIndex: 0,\n        },\n    });\n    /**  */\n    const avatarCropDialog = reactive({\n        visible: false,\n        props: {\n            imageUrl: '',\n            name: '',\n            initialOffsetX: 50,\n            initialOffsetY: 50,\n            initialScale: 150,\n        },\n    });\n    /**  -  shallowRef  reactive  */\n    const avatarCropOnApply = shallowRef(null);\n    const avatarCropOnUpload = shallowRef(null);\n    /**  */\n    const widgetManagerDialog = reactive({\n        visible: false,\n    });\n    /**  */\n    const widgetActionsDialog = reactive({\n        visible: false,\n        props: {\n            widgetId: '',\n            currentActions: [],\n        },\n    });\n    // ============================================================\n    // Getters\n    // ============================================================\n    /**  */\n    const isPanelVisible = computed(() => !isCollapsed.value && activeTab.value !== null);\n    /**  */\n    const isDashboardActive = computed(() => activeTab.value === TAB_DASHBOARD);\n    /**  */\n    const isOptionsActive = computed(() => activeTab.value === TAB_OPTIONS);\n    // ============================================================\n    // Actions\n    // ============================================================\n    /**\n     * \n     */\n    function toggleCollapse() {\n        isCollapsed.value = !isCollapsed.value;\n    }\n    /**\n     * \n     */\n    function togglePin() {\n        isPinned.value = !isPinned.value;\n    }\n    /**\n     *  Tab\n     * @param tabName Tab \n     */\n    function setActiveTab(tabName) {\n        activeTab.value = tabName;\n        //  tab \n        currentPage.value = 1;\n        searchTerm.value = '';\n    }\n    /**\n     * \n     * @param order \n     */\n    function setTableOrder(order) {\n        tableOrder.value = order;\n    }\n    /**\n     * \n     * @param tableName \n     * @param height \n     */\n    function setTableHeight(tableName, height) {\n        tableHeights.value = { ...tableHeights.value, [tableName]: height };\n    }\n    /**\n     *  ()\n     * @param tableName \n     */\n    function resetTableHeight(tableName) {\n        const heights = { ...tableHeights.value };\n        delete heights[tableName];\n        tableHeights.value = heights;\n    }\n    /**\n     * \n     * @param tableName \n     */\n    function getTableHeight(tableName) {\n        return tableHeights.value[tableName];\n    }\n    /**\n     * \n     * @param tableName \n     * @param style \n     */\n    function setTableStyle(tableName, style) {\n        tableStyles.value = { ...tableStyles.value, [tableName]: style };\n    }\n    /**\n     * \n     * @param tableName \n     */\n    function getTableStyle(tableName) {\n        return tableStyles.value[tableName] || 'list';\n    }\n    /**\n     * \n     * @param tableName \n     */\n    function toggleTableReverse(tableName) {\n        const current = [...reverseTables.value];\n        const index = current.indexOf(tableName);\n        if (index > -1) {\n            current.splice(index, 1);\n        }\n        else {\n            current.push(tableName);\n        }\n        reverseTables.value = current;\n    }\n    /**\n     * \n     * @param tableName \n     */\n    function isTableReversed(tableName) {\n        return reverseTables.value.includes(tableName);\n    }\n    /**\n     * \n     * @param page \n     */\n    function setCurrentPage(page) {\n        currentPage.value = Math.max(1, page);\n    }\n    /**\n     * \n     * @param term \n     */\n    function setSearchTerm(term) {\n        searchTerm.value = term.toLowerCase();\n        // \n        currentPage.value = 1;\n    }\n    /**\n     * \n     */\n    const currentSearchTerm = computed(() => searchTerm.value);\n    /**\n     * \n     * @param top \n     */\n    function saveScrollTop(top) {\n        scrollTop.value = top;\n    }\n    /**\n     * \n     */\n    function enterEditingOrder() {\n        isEditingOrder.value = true;\n    }\n    /**\n     * \n     */\n    function exitEditingOrder() {\n        isEditingOrder.value = false;\n    }\n    /**\n     * \n     * @param status \n     */\n    function setEditingOrder(status) {\n        isEditingOrder.value = status;\n    }\n    /**\n     * \n     * @param status \n     */\n    function setMobile(status) {\n        isMobile.value = status;\n    }\n    /**\n     * \n     * @param newLayout \n     */\n    function setLayout(newLayout) {\n        layout.value = newLayout;\n    }\n    /**\n     * \n     */\n    function toggleLayout() {\n        layout.value = layout.value === 'horizontal' ? 'vertical' : 'horizontal';\n    }\n    /**\n     * \n     */\n    const isHorizontalLayout = computed(() => layout.value === 'horizontal');\n    /**\n     *  ()\n     */\n    function closePanel() {\n        isCollapsed.value = true; // \n        isContentHidden.value = false; // \n    }\n    /**\n     * \n     *  Tab\n     */\n    function openPanel() {\n        isContentHidden.value = false;\n        isCollapsed.value = false;\n        //  TabisPanelVisible  activeTab !== null\n        if (activeTab.value === null) {\n            activeTab.value = TAB_DASHBOARD;\n        }\n    }\n    /**\n     * \n     * @param status \n     */\n    function setInitialized(status) {\n        isInitialized.value = status;\n    }\n    /**\n     * \n     * @param position \n     */\n    function saveBallPosition(position) {\n        ballPosition.value = position;\n    }\n    /**\n     * \n     */\n    function getBallPosition() {\n        return ballPosition.value;\n    }\n    /**\n     * \n     *  iframe \n     */\n    function resetBallPosition() {\n        const parentHeight = typeof window !== 'undefined' ? (window.parent?.innerHeight ?? window.innerHeight) : 500;\n        ballPosition.value = {\n            x: 20,\n            y: Math.max(100, parentHeight - 150), // \n        };\n    }\n    /**\n     * \n     * @param force \n     */\n    function autoFitPanelHeight(force = false) {\n        const { $ } = window.jQuery ? { $: window.jQuery } : { $: window.parent.$ };\n        if (!$)\n            return;\n        const $panel = $(window.parent.document).find('#acu-data-area');\n        if (!$panel.length)\n            return;\n        // \n        const currentTab = activeTab.value;\n        if (!force && currentTab && tableHeights.value[currentTab]) {\n            return;\n        }\n        // \n        // \n        // \n        setTimeout(() => {\n            const contentHeight = $panel[0].scrollHeight;\n            const winHeight = $(window.parent).height() || 800;\n            const maxHeight = winHeight - 200;\n            let newHeight = Math.min(contentHeight + 20, maxHeight);\n            if (newHeight < 200)\n                newHeight = 200;\n            $panel.css('height', newHeight + 'px');\n        }, 100);\n    }\n    // ============================================================\n    // Tab  Actions\n    // ============================================================\n    /**\n     *  Tab\n     * @param tabs Tab ID \n     */\n    function setVisibleTabs(tabs) {\n        visibleTabs.value = tabs;\n    }\n    /**\n     *  Tab \n     * @param tabId Tab ID\n     */\n    function isTabVisible(tabId) {\n        // \n        if (visibleTabs.value.length === 0)\n            return true;\n        return visibleTabs.value.includes(tabId);\n    }\n    /**\n     *  Tab \n     * @param tabId Tab ID\n     */\n    function toggleTabVisibility(tabId) {\n        const current = [...visibleTabs.value];\n        const index = current.indexOf(tabId);\n        if (index > -1) {\n            current.splice(index, 1);\n        }\n        else {\n            current.push(tabId);\n        }\n        visibleTabs.value = current;\n    }\n    /**\n     *  Tab \n     */\n    function resetVisibleTabs() {\n        visibleTabs.value = [];\n    }\n    /**\n     *  Tab \n     * @param order Tab ID \n     */\n    function setTabOrder(order) {\n        tabOrder.value = order;\n    }\n    /**\n     *  Tab ID \n     * @param allTabIds  Tab ID \n     * @returns  Tab ID \n     */\n    function getSortedTabIds(allTabIds) {\n        if (!tabOrder.value || tabOrder.value.length === 0) {\n            return allTabIds;\n        }\n        //  tabOrder  tabOrder \n        const orderedIds = tabOrder.value.filter(id => allTabIds.includes(id));\n        const unorderedIds = allTabIds.filter(id => !tabOrder.value.includes(id));\n        return [...orderedIds, ...unorderedIds];\n    }\n    /**\n     *  Tab \n     * @param tabId  Tab ID\n     * @param newIndex \n     * @param allTabIds  Tab ID \n     */\n    function moveTab(tabId, newIndex, allTabIds) {\n        const currentOrder = getSortedTabIds(allTabIds);\n        const currentIndex = currentOrder.indexOf(tabId);\n        if (currentIndex === -1)\n            return;\n        const newOrder = [...currentOrder];\n        newOrder.splice(currentIndex, 1);\n        newOrder.splice(newIndex, 0, tabId);\n        tabOrder.value = newOrder;\n    }\n    /**\n     *  Tab \n     * @param tabId Tab ID\n     */\n    function showTab(tabId) {\n        if (!visibleTabs.value.includes(tabId)) {\n            visibleTabs.value = [...visibleTabs.value, tabId];\n        }\n    }\n    /**\n     *  Tab \n     * @param tabId Tab ID\n     */\n    function hideTab(tabId) {\n        visibleTabs.value = visibleTabs.value.filter(id => id !== tabId);\n    }\n    /**\n     *  Tab \n     */\n    function resetTabConfig() {\n        visibleTabs.value = [];\n        tabOrder.value = [];\n    }\n    // ============================================================\n    //  Actions\n    // ============================================================\n    /**\n     * \n     * @param props \n     */\n    function openRowEditDialog(props) {\n        rowEditDialog.props = { ...props };\n        rowEditDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeRowEditDialog() {\n        rowEditDialog.visible = false;\n    }\n    /**\n     * \n     * @param props \n     */\n    function openWidgetSettingsDialog(props) {\n        widgetSettingsDialog.props = { ...props };\n        widgetSettingsDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeWidgetSettingsDialog() {\n        widgetSettingsDialog.visible = false;\n    }\n    /**\n     * Dashboard \n     * @param props \n     */\n    function openDashboardHistoryDialog(props) {\n        dashboardHistoryDialog.props = { ...props };\n        dashboardHistoryDialog.visible = true;\n    }\n    /**\n     * Dashboard \n     */\n    function closeDashboardHistoryDialog() {\n        dashboardHistoryDialog.visible = false;\n    }\n    /**\n     * \n     */\n    function switchFromRowEditToHistory() {\n        // \n        dashboardHistoryDialog.props = {\n            tableName: rowEditDialog.props.tableName,\n            tableId: rowEditDialog.props.tableId,\n            rowIndex: rowEditDialog.props.rowIndex,\n            currentRowData: rowEditDialog.props.currentRowData,\n            titleColIndex: 0,\n        };\n        // \n        rowEditDialog.visible = false;\n        dashboardHistoryDialog.visible = true;\n    }\n    /**\n     * \n     * @param props \n     * @param callbacks \n     */\n    function openAvatarCropDialog(props, callbacks) {\n        avatarCropDialog.props = {\n            imageUrl: props.imageUrl,\n            name: props.name,\n            initialOffsetX: props.initialOffsetX ?? 50,\n            initialOffsetY: props.initialOffsetY ?? 50,\n            initialScale: props.initialScale ?? 150,\n        };\n        avatarCropOnApply.value = callbacks.onApply;\n        avatarCropOnUpload.value = callbacks.onUpload ?? null;\n        avatarCropDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeAvatarCropDialog() {\n        avatarCropDialog.visible = false;\n        // \n        avatarCropOnApply.value = null;\n        avatarCropOnUpload.value = null;\n    }\n    /**\n     * \n     * @param data \n     */\n    function handleAvatarCropApply(data) {\n        if (avatarCropOnApply.value) {\n            avatarCropOnApply.value(data);\n        }\n        closeAvatarCropDialog();\n    }\n    /**\n     * \n     * @param file \n     */\n    function handleAvatarCropUpload(file) {\n        if (avatarCropOnUpload.value) {\n            avatarCropOnUpload.value(file);\n        }\n    }\n    /**\n     * \n     */\n    function openWidgetManagerDialog() {\n        widgetManagerDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeWidgetManagerDialog() {\n        widgetManagerDialog.visible = false;\n    }\n    /**\n     * \n     * @param props \n     */\n    function openWidgetActionsDialog(props) {\n        widgetActionsDialog.props = { ...props };\n        widgetActionsDialog.visible = true;\n    }\n    /**\n     * \n     */\n    function closeWidgetActionsDialog() {\n        widgetActionsDialog.visible = false;\n    }\n    /**\n     * \n     *  visibleTabs \n     * @param allTableIds  ID \n     * @returns  ID \n     */\n    function syncNewTablesToVisibleTabs(allTableIds) {\n        //  visibleTabs \n        if (visibleTabs.value.length === 0) {\n            return [];\n        }\n        //  visibleTabs \n        const newTabIds = allTableIds.filter(id => !visibleTabs.value.includes(id));\n        // \n        if (newTabIds.length > 0) {\n            visibleTabs.value = [...visibleTabs.value, ...newTabIds];\n            console.info(`[ACU]  ${newTabIds.length} :`, newTabIds);\n        }\n        return newTabIds;\n    }\n    // ============================================================\n    //  Actions\n    // ============================================================\n    /**\n     * \n     * ( updateSaveBtnState)\n     */\n    function updateSaveBtnState() {\n        const { $ } = window.jQuery ? { $: window.jQuery } : { $: window.parent.$ };\n        if (!$)\n            return;\n        const dataStore = useDataStore();\n        const hasChanges = dataStore.hasUnsavedChanges;\n        const $btn = $(window.parent.document).find('#acu-btn-save-global');\n        if ($btn.length) {\n            if (hasChanges) {\n                $btn.addClass('acu-has-changes');\n                $btn.find('i').addClass('fa-beat-fade');\n                $btn.css('color', '#e67e22');\n            }\n            else {\n                $btn.removeClass('acu-has-changes');\n                $btn.find('i').removeClass('fa-beat-fade');\n                $btn.css('color', '');\n            }\n        }\n    }\n    return {\n        // \n        isCollapsed,\n        isPinned,\n        activeTab,\n        tableOrder,\n        tableHeights,\n        tableStyles,\n        reverseTables,\n        ballPosition,\n        layout,\n        visibleTabs,\n        // \n        currentPage,\n        searchTerm,\n        currentSearchTerm,\n        scrollTop,\n        isEditingOrder,\n        isInitialized,\n        isContentHidden,\n        isMobile,\n        isLockEditMode,\n        showLockedOnly,\n        // Getters\n        isPanelVisible,\n        isDashboardActive,\n        isOptionsActive,\n        reverseOrderTables: reverseTables,\n        isHorizontalLayout,\n        // Actions\n        toggleCollapse,\n        togglePin,\n        setActiveTab,\n        setTableOrder,\n        setTableHeight,\n        resetTableHeight,\n        getTableHeight,\n        setTableStyle,\n        getTableStyle,\n        toggleTableReverse,\n        isTableReversed,\n        setCurrentPage,\n        setSearchTerm,\n        saveScrollTop,\n        enterEditingOrder,\n        exitEditingOrder,\n        setEditingOrder,\n        setMobile,\n        setLayout,\n        toggleLayout,\n        closePanel,\n        openPanel,\n        setInitialized,\n        updateSaveBtnState,\n        autoFitPanelHeight,\n        saveBallPosition,\n        getBallPosition,\n        resetBallPosition,\n        // Tab \n        setVisibleTabs,\n        isTabVisible,\n        toggleTabVisibility,\n        resetVisibleTabs,\n        tabOrder,\n        setTabOrder,\n        getSortedTabIds,\n        moveTab,\n        showTab,\n        hideTab,\n        resetTabConfig,\n        syncNewTablesToVisibleTabs,\n        // \n        rowEditDialog,\n        widgetSettingsDialog,\n        dashboardHistoryDialog,\n        avatarCropDialog,\n        widgetManagerDialog,\n        widgetActionsDialog,\n        //  Actions\n        openRowEditDialog,\n        closeRowEditDialog,\n        openWidgetSettingsDialog,\n        closeWidgetSettingsDialog,\n        openDashboardHistoryDialog,\n        closeDashboardHistoryDialog,\n        switchFromRowEditToHistory,\n        openAvatarCropDialog,\n        closeAvatarCropDialog,\n        handleAvatarCropApply,\n        handleAvatarCropUpload,\n        openWidgetManagerDialog,\n        closeWidgetManagerDialog,\n        openWidgetActionsDialog,\n        closeWidgetActionsDialog,\n    };\n});\n","/**\n *  Composable\n *  AutoCardUpdater \n *\n * \n * -  api.getSettings() / api.updateSettings() \n * -  localStorage  shujuku_*_allSettings_v2\n */\n\nimport { ref } from 'vue';\nimport { getCore } from '../utils';\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nexport interface DbSettings {\n  /** AI */\n  autoUpdateThreshold?: number;\n  /** N */\n  autoUpdateFrequency?: number;\n  /**  */\n  updateBatchSize?: number;\n  /** X */\n  skipUpdateFloors?: number;\n  /**  */\n  [key: string]: unknown;\n}\n\n/**  ( API ) */\nexport interface TableInfo {\n  /**  key ( sheet_0) */\n  key: string;\n  /**  */\n  name: string;\n  /** / */\n  isSummaryOrOutline: boolean;\n}\n\n/**  */\nexport interface PresetExecuteResult {\n  success: boolean;\n  message: string;\n  affectedTables?: string[];\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n *  Key ()\n * @returns localStorage \n */\nfunction findDatabaseSettingsKey(): string {\n  // \n  const direct80 = 'shujuku_v80_allSettings_v2';\n  if (localStorage.getItem(direct80)) return direct80;\n\n  const direct70 = 'shujuku_v70_allSettings_v2';\n  if (localStorage.getItem(direct70)) return direct70;\n\n  // \n  const keys = Object.keys(localStorage || {});\n  const found = keys.find(k => /^shujuku_.*_allSettings_v2$/.test(k));\n\n  return found || direct80;\n}\n\n/**\n *  localStorage \n */\nfunction readFromLocalStorage(): DbSettings {\n  try {\n    const key = findDatabaseSettingsKey();\n    const raw = localStorage.getItem(key);\n    return raw ? JSON.parse(raw) : {};\n  } catch (e) {\n    console.warn('[ACU]  localStorage :', e);\n    return {};\n  }\n}\n\n/**\n *  localStorage\n */\nfunction writeToLocalStorage(settings: DbSettings): void {\n  try {\n    const key = findDatabaseSettingsKey();\n    const existing = readFromLocalStorage();\n    localStorage.setItem(key, JSON.stringify({ ...existing, ...settings }));\n  } catch (e) {\n    console.warn('[ACU]  localStorage :', e);\n  }\n}\n\n// ============================================================\n// Composable\n// ============================================================\n\nexport function useDbSettings() {\n  /**  */\n  const settings = ref<DbSettings>({});\n\n  /**  */\n  const isLoading = ref(false);\n\n  /**  */\n  const isInitialized = ref(false);\n\n  /**\n   * \n   *  API localStorage\n   */\n  async function loadSettings(): Promise<DbSettings> {\n    isLoading.value = true;\n\n    try {\n      const api = getCore().getDB();\n\n      //  API\n      if (api && typeof api.getSettings === 'function') {\n        const apiSettings = await api.getSettings();\n        if (apiSettings && typeof apiSettings === 'object') {\n          settings.value = apiSettings;\n          console.info('[ACU]  API ');\n          return apiSettings;\n        }\n      }\n\n      //  localStorage\n      const localSettings = readFromLocalStorage();\n      settings.value = localSettings;\n      console.info('[ACU]  localStorage ');\n      return localSettings;\n    } catch (e) {\n      console.error('[ACU] :', e);\n      //  localStorage \n      const localSettings = readFromLocalStorage();\n      settings.value = localSettings;\n      return localSettings;\n    } finally {\n      isLoading.value = false;\n      isInitialized.value = true;\n    }\n  }\n\n  /**\n   * \n   *  API localStorage\n   * @param newSettings \n   */\n  async function saveSettings(newSettings: Partial<DbSettings>): Promise<boolean> {\n    try {\n      const api = getCore().getDB();\n\n      // \n      const mergedSettings = { ...settings.value, ...newSettings };\n\n      //  API\n      if (api && typeof api.updateSettings === 'function') {\n        await api.updateSettings(mergedSettings);\n        settings.value = mergedSettings;\n        console.info('[ACU]  API ');\n        return true;\n      }\n\n      //  localStorage\n      writeToLocalStorage(mergedSettings);\n      settings.value = mergedSettings;\n      console.info('[ACU]  localStorage ');\n      return true;\n    } catch (e) {\n      console.error('[ACU] :', e);\n      //  localStorage\n      try {\n        writeToLocalStorage({ ...settings.value, ...newSettings });\n        settings.value = { ...settings.value, ...newSettings };\n        return true;\n      } catch {\n        return false;\n      }\n    }\n  }\n\n  /**\n   * \n   * @param key \n   * @param value \n   */\n  async function updateSetting<K extends keyof DbSettings>(key: K, value: DbSettings[K]): Promise<void> {\n    await saveSettings({ [key]: value } as Partial<DbSettings>);\n  }\n\n  /**\n   * \n   *  api.manualUpdate() api.triggerUpdate()\n   */\n  async function executeManualUpdate(): Promise<boolean> {\n    try {\n      const api = getCore().getDB();\n\n      if (!api) {\n        console.warn('[ACU]  API ');\n        return false;\n      }\n\n      //  manualUpdate\n      if (typeof api.manualUpdate === 'function') {\n        await api.manualUpdate();\n        console.info('[ACU]  (manualUpdate)');\n        return true;\n      }\n\n      //  triggerUpdate\n      if (typeof api.triggerUpdate === 'function') {\n        const result = await api.triggerUpdate();\n        console.info('[ACU]  (triggerUpdate):', result);\n        return !!result;\n      }\n\n      console.warn('[ACU] ');\n      return false;\n    } catch (e) {\n      console.error('[ACU] :', e);\n      return false;\n    }\n  }\n\n  /**\n   * \n   *  UI\n   */\n  function getTableList(): TableInfo[] {\n    try {\n      const api = getCore().getDB();\n\n      if (!api) {\n        console.warn('[ACU]  API ');\n        return [];\n      }\n\n      //  API\n      if (typeof api.getTableList === 'function') {\n        const list = api.getTableList();\n        console.info('[ACU] :', list?.length || 0);\n        return list || [];\n      }\n\n      //  exportTableAsJson \n      if (typeof api.exportTableAsJson === 'function') {\n        const data = api.exportTableAsJson();\n        if (data && typeof data === 'object') {\n          const tables: TableInfo[] = [];\n          Object.keys(data).forEach(key => {\n            if (!key.startsWith('sheet_')) return;\n            const table = data[key];\n            const name = table?.name || key;\n            // /\n            const isSummaryOrOutline =\n              name.includes('') ||\n              name.includes('') ||\n              name.toLowerCase().includes('summary') ||\n              name.toLowerCase().includes('outline');\n            tables.push({ key, name, isSummaryOrOutline });\n          });\n          console.info('[ACU]  exportTableAsJson :', tables.length);\n          return tables;\n        }\n      }\n\n      console.warn('[ACU] ');\n      return [];\n    } catch (e) {\n      console.error('[ACU] :', e);\n      return [];\n    }\n  }\n\n  /**\n   *  API\n   * \n   *\n   * @param presetSettings \n   * @param targetTableNames =\n   * @param silent \n   */\n  async function executeWithPreset(\n    presetSettings: Partial<DbSettings>,\n    targetTableNames: string[] = [],\n    silent = false,\n  ): Promise<PresetExecuteResult> {\n    try {\n      const api = getCore().getDB();\n\n      if (!api) {\n        return { success: false, message: ' API ' };\n      }\n\n      //  API: executeWithPreset\n      if (typeof api.executeWithPreset === 'function') {\n        const result = await api.executeWithPreset({\n          settings: {\n            autoUpdateThreshold: presetSettings.autoUpdateThreshold,\n            updateBatchSize: presetSettings.updateBatchSize,\n            skipUpdateFloors: presetSettings.skipUpdateFloors,\n            autoUpdateFrequency: presetSettings.autoUpdateFrequency,\n          },\n          targetTableNames: targetTableNames.length > 0 ? targetTableNames : null,\n          silent,\n        });\n        console.info('[ACU] executeWithPreset :', result);\n        return result as PresetExecuteResult;\n      }\n\n      // \n      console.info('[ACU] : saveSettings + executeManualUpdate');\n      await saveSettings(presetSettings);\n      const success = await executeManualUpdate();\n      return {\n        success,\n        message: success ? '' : '',\n      };\n    } catch (e) {\n      console.error('[ACU] :', e);\n      return { success: false, message: String(e) };\n    }\n  }\n\n  return {\n    // \n    settings,\n    isLoading,\n    isInitialized,\n\n    // \n    loadSettings,\n    saveSettings,\n    updateSetting,\n    executeManualUpdate,\n    getTableList,\n    executeWithPreset,\n\n    // \n    findDatabaseSettingsKey,\n  };\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = z;","/**\n *  Composable\n * \n *\n * \n */\n\nimport { klona } from 'klona';\nimport { computed, ref } from 'vue';\nimport { z } from 'zod';\n\n// ============================================================\n// Schema \n// ============================================================\n\n/**  Schema */\nexport const UpdateSettingsSchema = z.object({\n  /** AI */\n  autoUpdateThreshold: z.number().min(1).max(500).default(3),\n  /**  */\n  updateBatchSize: z.number().min(1).max(50).default(3),\n  /** X */\n  skipUpdateFloors: z.number().min(0).max(20).default(0),\n  /** N */\n  autoUpdateFrequency: z.number().min(1).max(100).default(1),\n});\n\n/**  Schema */\nexport const AutoTriggerConfigSchema = z.object({\n  /**  */\n  enabled: z.boolean().default(false),\n  /**  */\n  onEmptyCell: z.boolean().default(true),\n  /**  */\n  onIndexGap: z.boolean().default(true),\n  /**  () */\n  targetTables: z.array(z.string()).default(['', '']),\n  /**  (=) */\n  updateTargetTables: z.array(z.string()).default([]),\n});\n\n/**  Schema */\nexport const UpdatePresetSchema = z.object({\n  /**  ID */\n  id: z.string(),\n  /**  */\n  name: z.string().min(1).max(50),\n  /**  */\n  createdAt: z.number(),\n  /**  */\n  settings: UpdateSettingsSchema,\n  /**  */\n  autoTrigger: AutoTriggerConfigSchema.optional().transform(v => AutoTriggerConfigSchema.parse(v ?? {})),\n});\n\n/**  Schema */\nexport const PresetStorageSchema = z.object({\n  /**  */\n  presets: z.array(UpdatePresetSchema).default([]),\n  /**  ID */\n  activePresetId: z.string().nullable().default(null),\n  /**  ID */\n  autoFixPresetId: z.string().nullable().default(null),\n  /**  */\n  globalAutoTriggerEnabled: z.boolean().default(false),\n  /**  */\n  globalAutoExecuteEnabled: z.boolean().default(false),\n});\n\n// ============================================================\n// \n// ============================================================\n\nexport type UpdateSettings = z.infer<typeof UpdateSettingsSchema>;\nexport type AutoTriggerConfig = z.infer<typeof AutoTriggerConfigSchema>;\nexport type UpdatePreset = z.infer<typeof UpdatePresetSchema>;\nexport type PresetStorage = z.infer<typeof PresetStorageSchema>;\n\n// ============================================================\n// \n// ============================================================\n\n/**  ID */\nconst SCRIPT_ID = 'acu-visualizer';\n\n/**  */\nconst STORAGE_KEY = 'updatePresets';\n\n/**  */\nconst DEFAULT_PRESET: Omit<UpdatePreset, 'id' | 'createdAt'> = {\n  name: '',\n  settings: {\n    autoUpdateThreshold: 3,\n    updateBatchSize: 3,\n    skipUpdateFloors: 0,\n    autoUpdateFrequency: 1,\n  },\n  autoTrigger: {\n    enabled: false,\n    onEmptyCell: true,\n    onIndexGap: true,\n    targetTables: ['', ''],\n    updateTargetTables: [], // \n  },\n};\n\n// ============================================================\n// \n// ============================================================\n\n/**\n *  ID\n */\nfunction generateId(): string {\n  return `preset_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * \n */\nfunction getScriptVariables(): Record<string, unknown> {\n  try {\n    //  API\n    if (typeof getVariables === 'function') {\n      return getVariables({ type: 'script', script_id: SCRIPT_ID }) || {};\n    }\n  } catch (e) {\n    console.warn('[ACU Presets] getVariables  localStorage ');\n  }\n\n  //  localStorage\n  try {\n    const data = localStorage.getItem(`acu_${STORAGE_KEY}`);\n    return data ? JSON.parse(data) : {};\n  } catch {\n    return {};\n  }\n}\n\n/**\n * \n */\nfunction saveScriptVariables(data: Record<string, unknown>): void {\n  try {\n    //  API\n    if (typeof replaceVariables === 'function') {\n      replaceVariables(klona(data), { type: 'script', script_id: SCRIPT_ID });\n      return;\n    }\n  } catch (e) {\n    console.warn('[ACU Presets] replaceVariables  localStorage ');\n  }\n\n  //  localStorage\n  try {\n    localStorage.setItem(`acu_${STORAGE_KEY}`, JSON.stringify(data));\n  } catch (e) {\n    console.error('[ACU Presets]  localStorage :', e);\n  }\n}\n\n// ============================================================\n// Composable\n// ============================================================\n\nexport function useUpdatePresets() {\n  /**  */\n  const storage = ref<PresetStorage>({\n    presets: [],\n    activePresetId: null,\n    autoFixPresetId: null,\n    globalAutoTriggerEnabled: false,\n    globalAutoExecuteEnabled: false,\n  });\n\n  /**  */\n  const isLoaded = ref(false);\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**  */\n  const presets = computed(() => storage.value.presets);\n\n  /**  */\n  const activePreset = computed(() => {\n    const id = storage.value.activePresetId;\n    return id ? storage.value.presets.find(p => p.id === id) || null : null;\n  });\n\n  /**  */\n  const autoFixPreset = computed(() => {\n    const id = storage.value.autoFixPresetId;\n    return id ? storage.value.presets.find(p => p.id === id) || null : null;\n  });\n\n  /**  */\n  const hasPresets = computed(() => storage.value.presets.length > 0);\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function loadPresets(): void {\n    try {\n      const data = getScriptVariables();\n      const raw = data[STORAGE_KEY];\n\n      if (raw) {\n        const parsed = PresetStorageSchema.safeParse(raw);\n        if (parsed.success) {\n          storage.value = parsed.data;\n          console.info('[ACU Presets] :', parsed.data.presets.length);\n        } else {\n          console.warn('[ACU Presets] ');\n          storage.value = PresetStorageSchema.parse({});\n        }\n      } else {\n        storage.value = PresetStorageSchema.parse({});\n      }\n\n      isLoaded.value = true;\n    } catch (e) {\n      console.error('[ACU Presets] :', e);\n      storage.value = PresetStorageSchema.parse({});\n      isLoaded.value = true;\n    }\n  }\n\n  /**\n   * \n   */\n  function savePresets(): void {\n    try {\n      const data = getScriptVariables();\n      data[STORAGE_KEY] = klona(storage.value);\n      saveScriptVariables(data);\n      console.info('[ACU Presets] ');\n    } catch (e) {\n      console.error('[ACU Presets] :', e);\n    }\n  }\n\n  /**\n   * \n   * @param name \n   * @returns  null\n   */\n  function findPresetByName(name: string): UpdatePreset | null {\n    const trimmedName = name.trim();\n    return storage.value.presets.find(p => p.name.trim() === trimmedName) || null;\n  }\n\n  /**\n   * \n   * @param name \n   * @param settings \n   * @param autoTrigger \n   */\n  function createPreset(\n    name: string,\n    settings: Partial<UpdateSettings> = {},\n    autoTrigger: Partial<AutoTriggerConfig> = {},\n  ): UpdatePreset {\n    const preset: UpdatePreset = {\n      id: generateId(),\n      name,\n      createdAt: Date.now(),\n      settings: UpdateSettingsSchema.parse({ ...DEFAULT_PRESET.settings, ...settings }),\n      autoTrigger: AutoTriggerConfigSchema.parse({ ...DEFAULT_PRESET.autoTrigger, ...autoTrigger }),\n    };\n\n    storage.value.presets.push(preset);\n    savePresets();\n\n    console.info('[ACU Presets] :', preset.name);\n    return preset;\n  }\n\n  /**\n   * \n   * @param name \n   * @param settings \n   * @param autoTrigger \n   * @returns { preset, isNew } \n   */\n  function createOrUpdatePreset(\n    name: string,\n    settings: Partial<UpdateSettings> = {},\n    autoTrigger: Partial<AutoTriggerConfig> = {},\n  ): { preset: UpdatePreset; isNew: boolean } {\n    const existing = findPresetByName(name);\n\n    if (existing) {\n      // \n      updatePreset(existing.id, {\n        settings: UpdateSettingsSchema.parse({ ...DEFAULT_PRESET.settings, ...settings }),\n        autoTrigger: AutoTriggerConfigSchema.parse({ ...DEFAULT_PRESET.autoTrigger, ...autoTrigger }),\n      });\n      console.info('[ACU Presets] :', name);\n      return { preset: existing, isNew: false };\n    } else {\n      // \n      const preset = createPreset(name, settings, autoTrigger);\n      return { preset, isNew: true };\n    }\n  }\n\n  /**\n   * \n   * @param id  ID\n   * @param updates \n   */\n  function updatePreset(id: string, updates: Partial<Omit<UpdatePreset, 'id' | 'createdAt'>>): boolean {\n    const index = storage.value.presets.findIndex(p => p.id === id);\n    if (index === -1) {\n      console.warn('[ACU Presets] :', id);\n      return false;\n    }\n\n    const preset = storage.value.presets[index];\n\n    if (updates.name !== undefined) {\n      preset.name = updates.name;\n    }\n    if (updates.settings !== undefined) {\n      preset.settings = UpdateSettingsSchema.parse({ ...preset.settings, ...updates.settings });\n    }\n    if (updates.autoTrigger !== undefined) {\n      preset.autoTrigger = AutoTriggerConfigSchema.parse({ ...preset.autoTrigger, ...updates.autoTrigger });\n    }\n\n    savePresets();\n    console.info('[ACU Presets] :', preset.name);\n    return true;\n  }\n\n  /**\n   * \n   * @param id  ID\n   */\n  function deletePreset(id: string): boolean {\n    const index = storage.value.presets.findIndex(p => p.id === id);\n    if (index === -1) {\n      console.warn('[ACU Presets] :', id);\n      return false;\n    }\n\n    const preset = storage.value.presets[index];\n    storage.value.presets.splice(index, 1);\n\n    // \n    if (storage.value.activePresetId === id) {\n      storage.value.activePresetId = null;\n    }\n    if (storage.value.autoFixPresetId === id) {\n      storage.value.autoFixPresetId = null;\n    }\n\n    savePresets();\n    console.info('[ACU Presets] :', preset.name);\n    return true;\n  }\n\n  /**\n   * \n   * @param id  IDnull \n   */\n  function setActivePreset(id: string | null): void {\n    storage.value.activePresetId = id;\n    savePresets();\n  }\n\n  /**\n   * \n   * @param id  IDnull \n   */\n  function setAutoFixPreset(id: string | null): void {\n    storage.value.autoFixPresetId = id;\n    savePresets();\n  }\n\n  /**\n   * \n   * @param id  ID\n   * @param newName \n   */\n  function duplicatePreset(id: string, newName?: string): UpdatePreset | null {\n    const source = storage.value.presets.find(p => p.id === id);\n    if (!source) {\n      console.warn('[ACU Presets] :', id);\n      return null;\n    }\n\n    return createPreset(newName || `${source.name} ()`, klona(source.settings), klona(source.autoTrigger));\n  }\n\n  /**\n   * \n   * @param name \n   * @param currentSettings \n   */\n  function createFromCurrent(name: string, currentSettings: Partial<UpdateSettings>): UpdatePreset {\n    return createPreset(name, currentSettings);\n  }\n\n  /**\n   * \n   * @param id  ID\n   */\n  function getPresetSettings(id: string): UpdateSettings | null {\n    const preset = storage.value.presets.find(p => p.id === id);\n    return preset ? klona(preset.settings) : null;\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**  */\n  const globalAutoTriggerEnabled = computed(() => storage.value.globalAutoTriggerEnabled);\n\n  /**  */\n  const globalAutoExecuteEnabled = computed(() => storage.value.globalAutoExecuteEnabled);\n\n  /**\n   * \n   */\n  function setGlobalAutoTrigger(enabled: boolean): void {\n    storage.value.globalAutoTriggerEnabled = enabled;\n    // \n    if (!enabled) {\n      storage.value.globalAutoExecuteEnabled = false;\n    }\n    savePresets();\n    console.info('[ACU Presets] :', enabled);\n  }\n\n  /**\n   * \n   */\n  function setGlobalAutoExecute(enabled: boolean): void {\n    storage.value.globalAutoExecuteEnabled = enabled;\n    savePresets();\n    console.info('[ACU Presets] :', enabled);\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  // \n  if (!isLoaded.value) {\n    loadPresets();\n  }\n\n  return {\n    // \n    storage,\n    presets,\n    activePreset,\n    autoFixPreset,\n    hasPresets,\n    isLoaded,\n    globalAutoTriggerEnabled,\n    globalAutoExecuteEnabled,\n\n    // \n    loadPresets,\n    savePresets,\n    createPreset,\n    createOrUpdatePreset,\n    findPresetByName,\n    updatePreset,\n    deletePreset,\n    setActivePreset,\n    setAutoFixPreset,\n    duplicatePreset,\n    createFromCurrent,\n    getPresetSettings,\n    setGlobalAutoTrigger,\n    setGlobalAutoExecute,\n\n    // Schema\n    UpdateSettingsSchema,\n    AutoTriggerConfigSchema,\n    UpdatePresetSchema,\n  };\n}\n","/**\n * useApiCallbacks.ts -  API \n *\n *  API  index.ts  Vue Composable\n * \n *\n * 6.4.1.ts  registerTableUpdateCallback  registerTableFillStartCallback\n */\n\nimport { onMounted, onUnmounted } from 'vue';\nimport { useDataStore } from '../stores/useDataStore';\nimport { useUIStore } from '../stores/useUIStore';\nimport { getCore, getTableData } from '../utils/index';\nimport { useDbSettings } from './useDbSettings';\nimport { toast } from './useToast';\nimport { useUpdatePresets } from './useUpdatePresets';\n\n// \nlet tableUpdateCallback: (() => void) | null = null;\nlet tableFillStartCallback: (() => void) | null = null;\n\n// \nlet isShuttingDown = false;\n\n/**\n * API  Composable\n *\n * \n * - \n * - \n * - /\n */\nexport function useApiCallbacks() {\n  const dataStore = useDataStore();\n  const uiStore = useUIStore();\n  const presetsManager = useUpdatePresets();\n  const dbSettings = useDbSettings();\n\n  // \n  let lastIssueNotifyTime = 0;\n  const NOTIFY_COOLDOWN = 30000; // 30\n\n  // \n  let isAutoUpdating = false;\n\n  /**\n   *  API \n   */\n  function registerCallbacks() {\n    const { getDB } = getCore();\n    const api = getDB();\n\n    if (!api) {\n      console.warn('[ACU]  API ');\n      return;\n    }\n\n    isShuttingDown = false;\n\n    // \n    if (api.registerTableUpdateCallback) {\n      tableUpdateCallback = () => {\n        // \n        if (isShuttingDown) return;\n\n        // \n        if (uiStore.isEditingOrder || dataStore.isSaving) return;\n\n        // \n        const newData = getTableData();\n        if (newData) {\n          dataStore.setStagedData(newData);\n\n          // \n          const allTableIds = Object.keys(newData).filter(k => k.startsWith('sheet_'));\n          uiStore.syncNewTablesToVisibleTabs(allTableIds);\n\n          //  AI  AI \n          dataStore.generateDiffMap(newData);\n\n          // \n          dataStore.checkIntegrity(newData);\n\n          // \n          checkAndNotifyIssues();\n        }\n      };\n      api.registerTableUpdateCallback(tableUpdateCallback);\n      console.info('[ACU] ');\n    }\n\n    //  + \n    //  6.4.1.ts:4556-4568\n    if (api.registerTableFillStartCallback) {\n      tableFillStartCallback = () => {\n        // \n        if (isShuttingDown) return;\n\n        // AI \n        dataStore.saveLastState();\n\n        // A. diffMap\n        //  diffMap pendingDeletes\n        if (dataStore.diffMap && dataStore.diffMap.size > 0) {\n          console.info('[ACU] ');\n          return;\n        }\n\n        // B. \n        const currentData = getTableData();\n        if (currentData && Object.keys(currentData).length > 0) {\n          dataStore.saveSnapshot(currentData);\n          console.info('[ACU] ');\n        }\n      };\n      api.registerTableFillStartCallback(tableFillStartCallback);\n      console.info('[ACU]  ()');\n    }\n  }\n\n  /**\n   *  API \n   */\n  function unregisterCallbacks() {\n    isShuttingDown = true;\n\n    const { getDB } = getCore();\n    const api = getDB();\n\n    if (!api) return;\n\n    try {\n      if (api.registerTableUpdateCallback && tableUpdateCallback) {\n        //  API  unregister \n        if (typeof api.unregisterTableUpdateCallback === 'function') {\n          api.unregisterTableUpdateCallback(tableUpdateCallback);\n        }\n        tableUpdateCallback = null;\n        console.info('[ACU] ');\n      }\n\n      if (api.registerTableFillStartCallback && tableFillStartCallback) {\n        if (typeof api.unregisterTableFillStartCallback === 'function') {\n          api.unregisterTableFillStartCallback(tableFillStartCallback);\n        }\n        tableFillStartCallback = null;\n        console.info('[ACU] ');\n      }\n    } catch (e) {\n      console.warn('[ACU] :', e);\n    }\n  }\n\n  /**\n   * \n   */\n  async function checkAndNotifyIssues() {\n    // \n    if (!dataStore.hasIntegrityIssues) return;\n\n    // \n    const now = Date.now();\n    if (now - lastIssueNotifyTime < NOTIFY_COOLDOWN) return;\n\n    // \n    if (isAutoUpdating) return;\n\n    // \n    const autoFixPreset = presetsManager.autoFixPreset.value;\n\n    if (autoFixPreset && autoFixPreset.autoTrigger.enabled) {\n      //  - \n      let shouldTrigger = false;\n\n      // \n      const problematicTables = dataStore.problematicTables;\n      if (problematicTables && problematicTables.length > 0) {\n        // \n        shouldTrigger = true;\n      }\n\n      if (shouldTrigger) {\n        lastIssueNotifyTime = now;\n        const summary = dataStore.getIntegritySummary();\n\n        // \n        isAutoUpdating = true;\n        toast.info(` ${summary}...`);\n        console.info('[ACU] :', summary);\n\n        try {\n          //  API: executeWithPreset + \n          const targetTables = autoFixPreset.autoTrigger.updateTargetTables || [];\n          const result = await dbSettings.executeWithPreset(\n            {\n              autoUpdateThreshold: autoFixPreset.settings.autoUpdateThreshold,\n              autoUpdateFrequency: autoFixPreset.settings.autoUpdateFrequency,\n              updateBatchSize: autoFixPreset.settings.updateBatchSize,\n              skipUpdateFloors: autoFixPreset.settings.skipUpdateFloors,\n            },\n            targetTables,\n          );\n\n          if (result.success) {\n            toast.success(' ');\n          } else {\n            toast.warning(' ' + (result.message || ''));\n          }\n        } catch (error) {\n          console.error('[ACU] :', error);\n          toast.error(' ');\n        } finally {\n          isAutoUpdating = false;\n        }\n      }\n    }\n    //  - /\n  }\n\n  // \n  onMounted(() => {\n    registerCallbacks();\n  });\n\n  onUnmounted(() => {\n    unregisterCallbacks();\n  });\n\n  // \n  return {\n    registerCallbacks,\n    unregisterCallbacks,\n    checkAndNotifyIssues,\n  };\n}\n","/**\n *  Composable\n *  saveDataToDatabase \n * : ()10.3+\n */\n\nimport { watchDebounced } from '@vueuse/core';\nimport { klona } from 'klona';\nimport type { WatchStopHandle } from 'vue';\nimport { useConfigStore } from '../stores/useConfigStore';\nimport { useDataStore } from '../stores/useDataStore';\nimport type { RawDatabaseData } from '../types';\nimport { getCore, getTableData } from '../utils/index';\nimport { toast } from './useToast';\n\n/**\n *  ACU \n * 10.3+  shujuku_v100_allSettings_v2\n *  shujuku_v34_allSettings_v2\n */\nfunction findACUSettingsKey(storage: Storage): string | null {\n  const keys = Object.keys(storage);\n  //  v100+ 10.3+ \n  const v100Key = keys.find(\n    k => k.match(/^shujuku_v\\d+_allSettings_v2$/) && parseInt(k.match(/v(\\d+)/)?.[1] || '0') >= 100,\n  );\n  if (v100Key) return v100Key;\n\n  // \n  const anyKey = keys.find(k => k.match(/^shujuku_v\\d+_allSettings_v2$/));\n  if (anyKey) return anyKey;\n\n  return null;\n}\n\n// ============================================================\n// 10.3+  (SheetGuide) \n// 9.5\n// ============================================================\n\n/** 10.3+  */\nconst CHAT_SHEET_GUIDE_FIELD = 'TavernDB_ACU_InternalSheetGuide';\n/**  */\nconst CHAT_SHEET_GUIDE_VERSION = 1;\n/**  */\nconst TABLE_ORDER_FIELD = 'orderNo';\n\n/**  */\ninterface SheetGuideSlot {\n  data: Record<string, unknown>;\n  updatedAt: number;\n  reason: string;\n}\n\n/**  */\ninterface SheetGuideContainer {\n  version: number;\n  tags: Record<string, SheetGuideSlot>;\n}\n\n/**\n *  + \n *  10.3  normalizeGuideData_ACU \n */\nfunction buildSheetGuideData(rawData: RawDatabaseData): Record<string, unknown> {\n  const out: Record<string, unknown> = { mate: { type: 'chatSheets', version: 1 } };\n\n  Object.keys(rawData).forEach(k => {\n    if (!k.startsWith('sheet_')) return;\n    const sheet = rawData[k] as Record<string, unknown> | undefined;\n    if (!sheet || typeof sheet !== 'object') return;\n\n    // 10.3normalizeGuideData_ACU\n    const content = sheet.content as (string | number)[][] | undefined;\n    const headerRow = Array.isArray(content) && Array.isArray(content[0]) ? content[0] : [null];\n\n    out[k] = {\n      uid: sheet.uid || k,\n      name: sheet.name || k,\n      sourceData: sheet.sourceData || {\n        note: '',\n        initNode: '',\n        insertNode: '',\n        updateNode: '',\n        deleteNode: '',\n      },\n      content: [headerRow], // \n      updateConfig: sheet.updateConfig || {\n        uiSentinel: -1,\n        contextDepth: -1,\n        updateFrequency: -1,\n        batchSize: -1,\n        skipFloors: -1,\n      },\n      exportConfig: sheet.exportConfig || {\n        enabled: false,\n        splitByRow: false,\n        entryName: (sheet.name as string) || k,\n        entryType: 'constant',\n        keywords: '',\n        preventRecursion: true,\n        injectionTemplate: '',\n      },\n      [TABLE_ORDER_FIELD]: (sheet as Record<string, unknown>)[TABLE_ORDER_FIELD] ?? undefined,\n    };\n  });\n\n  return out;\n}\n/**\n *  chat[0] 10.3+ \n * 9.5\n * @param ST SillyTavern \n * @param configKey \n * @param guideData \n */\nfunction updateSheetGuide(ST: any, configKey: string, guideData: Record<string, unknown>): boolean {\n  //  chat \n  if (!ST?.chat || ST.chat.length === 0) {\n    console.info('[ACU] ');\n    return false;\n  }\n\n  const firstMsg = ST.chat[0];\n  if (!firstMsg) {\n    console.info('[ACU] chat[0] ');\n    return false;\n  }\n\n  try {\n    // \n    let container: SheetGuideContainer | null = null;\n    const raw = firstMsg[CHAT_SHEET_GUIDE_FIELD];\n\n    if (raw) {\n      if (typeof raw === 'string') {\n        try {\n          container = JSON.parse(raw) as SheetGuideContainer;\n        } catch {\n          container = null;\n        }\n      } else if (typeof raw === 'object') {\n        container = raw as SheetGuideContainer;\n      }\n    }\n\n    // \n    if (!container || typeof container !== 'object') {\n      container = { version: CHAT_SHEET_GUIDE_VERSION, tags: {} };\n    }\n    if (!container.tags || typeof container.tags !== 'object') {\n      container.tags = {};\n    }\n\n    // \n    container.version = CHAT_SHEET_GUIDE_VERSION;\n    container.tags[configKey] = {\n      data: guideData,\n      updatedAt: Date.now(),\n      reason: 'vue_visualizer_save',\n    };\n\n    //  chat[0]\n    firstMsg[CHAT_SHEET_GUIDE_FIELD] = container;\n    console.info(\n      `[ACU]  chat[0]  (tag=${configKey || ''}, tables=${Object.keys(guideData).filter(k => k.startsWith('sheet_')).length})`,\n    );\n    return true;\n  } catch (e) {\n    console.warn('[ACU] :', e);\n    return false;\n  }\n}\n\n/**\n * \n */\nfunction getSheetGuideInfo(\n  ST: any,\n  configKey: string,\n): {\n  exists: boolean;\n  updatedAt: number | null;\n  reason: string | null;\n  tableCount: number;\n} {\n  const defaultResult = { exists: false, updatedAt: null, reason: null, tableCount: 0 };\n\n  if (!ST?.chat?.[0]) return defaultResult;\n\n  try {\n    let container = ST.chat[0][CHAT_SHEET_GUIDE_FIELD];\n    if (!container) return defaultResult;\n\n    if (typeof container === 'string') {\n      try {\n        container = JSON.parse(container);\n      } catch {\n        return defaultResult;\n      }\n    }\n\n    const slot = container?.tags?.[configKey];\n    if (!slot) return defaultResult;\n\n    const tableCount = Object.keys(slot.data || {}).filter(k => k.startsWith('sheet_')).length;\n\n    return {\n      exists: true,\n      updatedAt: slot.updatedAt || null,\n      reason: slot.reason || null,\n      tableCount,\n    };\n  } catch {\n    return defaultResult;\n  }\n}\n\n/**  localStorage  -  */\nconst LEGACY_KEYS = [\n  'acu_table_order',\n  'acu_reverse_tables',\n  'acu_table_heights',\n  'acu_active_tab',\n  'acu_ui_collapse',\n  'acu_pin',\n  'acu_table_styles',\n  'acu_win_config',\n] as const;\n\n/** V5  */\nconst STORAGE_KEY_V5_SETTINGS = 'acu_v5_isolation_settings';\n\nexport function useDataPersistence() {\n  const dataStore = useDataStore();\n  const configStore = useConfigStore();\n\n  // ============================================================\n  //  ( executeCoreSave)\n  // ============================================================\n\n  /**\n   * \n   * @param dataToUse \n   * @param commitDeletes \n   * @param targetIndex  (-1 )\n   */\n  async function executeCoreSave(\n    dataToUse: RawDatabaseData,\n    commitDeletes: boolean,\n    targetIndex: number = -1,\n  ): Promise<RawDatabaseData | null> {\n    // \n    const finalData = klona(dataToUse);\n\n    // A. \n    if (commitDeletes && dataStore.pendingDeletes.size > 0) {\n      for (const sheetId in finalData) {\n        if (sheetId === 'mate') continue;\n\n        const sheet = finalData[sheetId];\n        if (!sheet || !sheet.name || !sheet.content) continue;\n\n        const newContent: (string | number)[][] = [sheet.content[0]]; // \n        for (let i = 1; i < sheet.content.length; i++) {\n          const realIdx = i - 1;\n          // \n          if (!dataStore.pendingDeletes.has(`${sheet.name}-row-${realIdx}`)) {\n            newContent.push(sheet.content[i]);\n          }\n        }\n        sheet.content = newContent;\n      }\n    }\n\n    try {\n      // B.  SillyTavern \n      let ST = (window as any).SillyTavern || (window.parent ? (window.parent as any).SillyTavern : null);\n      if (!ST && (window as any).top && (window as any).top.SillyTavern) {\n        ST = (window as any).top.SillyTavern;\n      }\n\n      // C.  Key 9.5  10.3+\n      let configKey = '';\n      try {\n        let storage = window.localStorage;\n        let settingsKey = findACUSettingsKey(storage);\n\n        //  iframe  localStorage \n        if (!settingsKey && window.parent) {\n          try {\n            storage = window.parent.localStorage;\n            settingsKey = findACUSettingsKey(storage);\n          } catch {\n            // ignore cross-origin access\n          }\n        }\n\n        if (settingsKey) {\n          const settingsStr = storage.getItem(settingsKey);\n          if (settingsStr) {\n            const settings = JSON.parse(settingsStr);\n            if (settings.dataIsolationEnabled && settings.dataIsolationCode) {\n              configKey = settings.dataIsolationCode;\n              console.info(`[ACU] : \"${configKey}\" (from ${settingsKey})`);\n            }\n          }\n        } else {\n          console.info('[ACU]  ACU ');\n        }\n      } catch (e) {\n        console.warn('[ACU] :', e);\n      }\n\n      // D. \n      if (ST && ST.chat && ST.chat.length > 0) {\n        let targetMsg: any = null;\n        let targetMsgIndex = -1;\n\n        //  >  AI  >  AI \n        if (targetIndex >= 0 && targetIndex < ST.chat.length) {\n          targetMsgIndex = targetIndex;\n          targetMsg = ST.chat[targetMsgIndex];\n        } else {\n          // 1.  ACU  AI  ()\n          for (let i = ST.chat.length - 1; i >= 0; i--) {\n            if (!ST.chat[i].is_user && ST.chat[i].TavernDB_ACU_IsolatedData) {\n              targetMsgIndex = i;\n              targetMsg = ST.chat[i];\n              break;\n            }\n          }\n          // 2.  AI \n          if (!targetMsg) {\n            for (let i = ST.chat.length - 1; i >= 0; i--) {\n              if (!ST.chat[i].is_user) {\n                targetMsgIndex = i;\n                targetMsg = ST.chat[i];\n                break;\n              }\n            }\n          }\n        }\n\n        // \n        if (targetMsg) {\n          //  Key\n          let finalKey = configKey;\n          if (targetMsg.TavernDB_ACU_IsolatedData) {\n            const existingKeys = Object.keys(targetMsg.TavernDB_ACU_IsolatedData);\n            if (existingKeys.length > 0) {\n              finalKey = existingKeys[0]; //  Key\n            }\n          } else {\n            targetMsg.TavernDB_ACU_IsolatedData = {};\n          }\n\n          // \n          if (!targetMsg.TavernDB_ACU_IsolatedData[finalKey]) {\n            targetMsg.TavernDB_ACU_IsolatedData[finalKey] = {\n              independentData: {},\n              modifiedKeys: [],\n              updateGroupKeys: [],\n            };\n          }\n\n          const tagData = targetMsg.TavernDB_ACU_IsolatedData[finalKey];\n          if (!tagData.independentData) tagData.independentData = {};\n\n          //  sheet \n          const sheetsToSave = Object.keys(finalData).filter(k => k.startsWith('sheet_'));\n          sheetsToSave.forEach(k => {\n            tagData.independentData[k] = klona(finalData[k]);\n          });\n\n          //  Key\n          const existingKeys: string[] = tagData.modifiedKeys || [];\n          tagData.modifiedKeys = [...new Set([...existingKeys, ...sheetsToSave])];\n\n          // F. 10.3+ \n          // 9.5\n          // 10.3+ merge \n          if (sheetsToSave.length > 0) {\n            const guideData = buildSheetGuideData(finalData);\n            if (Object.keys(guideData).some(k => k.startsWith('sheet_'))) {\n              updateSheetGuide(ST, finalKey, guideData);\n            }\n          }\n\n          // \n          if (ST.saveChat) {\n            await ST.saveChat();\n\n            // E.  API  ( saveChat )\n            await syncWorldbook();\n\n            return { ...finalData, _savedToFloor: targetMsgIndex } as unknown as RawDatabaseData;\n          }\n        }\n      }\n    } catch (directErr) {\n      console.error('[ACU] Core save error:', directErr);\n      throw directErr;\n    }\n\n    //  saveChat \n    await syncWorldbook();\n\n    return finalData;\n  }\n\n  /**\n   * \n   */\n  async function syncWorldbook(): Promise<void> {\n    const api = getCore().getDB();\n    if (api && api.syncWorldbookEntries) {\n      try {\n        await api.syncWorldbookEntries({ createIfNeeded: true });\n      } catch (syncErr) {\n        console.warn('[ACU] Worldbook sync failed after save:', syncErr);\n      }\n    } else {\n      console.warn('[ACU] syncWorldbookEntries API not found, skipping sync.');\n    }\n  }\n\n  // ============================================================\n  //  ( saveDataToDatabase)\n  // ============================================================\n\n  /**\n   * \n   * @param tableData  ( API )\n   * @param skipRender  UI \n   * @param commitDeletes \n   * @param targetIndex  (-1 )\n   * @returns \n   */\n  async function saveToDatabase(\n    tableData: RawDatabaseData | null = null,\n    skipRender: boolean = false,\n    commitDeletes: boolean = false,\n    targetIndex: number = -1,\n  ): Promise<boolean> {\n    // 1. \n    if (dataStore.isSaving) {\n      console.warn('[ACU] Save already in progress');\n      return false;\n    }\n\n    // 2. \n    let dataToUse = dataStore.getStagedData();\n    if (!dataToUse) {\n      dataToUse = tableData || getTableData();\n    }\n\n    if (!dataToUse) {\n      console.warn('[ACU] ');\n      return false;\n    }\n\n    const { $ } = getCore();\n    const $saveBtn = $?.('#acu-btn-save-global, #acu-parent-container #acu-btn-save-global');\n    let originalIcon = '';\n\n    try {\n      // \n      dataStore.isSaving = true;\n\n      if (!skipRender && $saveBtn?.length) {\n        originalIcon = $saveBtn.html();\n        $saveBtn.html('<i class=\"fa-solid fa-spinner fa-spin\"></i>').prop('disabled', true);\n      }\n\n      // \n      const savedData = await executeCoreSave(dataToUse, commitDeletes, targetIndex);\n\n      if (!skipRender) {\n        // \n        const savedFloor = (savedData as any)?._savedToFloor;\n        if (savedFloor !== undefined) {\n          toast.success(` ${savedFloor}  ()`);\n        }\n\n        // \n        const parentDoc = window.parent?.document || document;\n        $(parentDoc).find('.acu-highlight-changed').removeClass('acu-highlight-changed');\n        $saveBtn?.removeClass('acu-save-alert');\n\n        // \n        dataStore.clearChanges(commitDeletes);\n\n        // \n        dataStore.stagedData = null;\n\n        // \n        if (savedData) {\n          dataStore.saveSnapshot(savedData);\n        }\n      }\n\n      // \n      await syncWorldbook();\n\n      return true;\n    } catch (e) {\n      console.error('[ACU] Save failed:', e);\n      if (!skipRender) {\n        toast.error(': ' + (e as Error).message);\n      }\n      return false;\n    } finally {\n      // \n      setTimeout(() => {\n        dataStore.isSaving = false;\n        if (!skipRender && $saveBtn?.length) {\n          $saveBtn.html(originalIcon || '<i class=\"fa-solid fa-save\"></i>').prop('disabled', false);\n        }\n      }, 100);\n    }\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param data \n   */\n  function saveSnapshot(data: RawDatabaseData): void {\n    dataStore.saveSnapshot(data);\n  }\n\n  /**\n   * \n   */\n  function loadSnapshot(): RawDatabaseData | null {\n    return dataStore.loadSnapshot();\n  }\n\n  /**\n   * \n   */\n  function clearSnapshot(): void {\n    dataStore.clearSnapshot();\n  }\n\n  // ============================================================\n  //  ( purgeFloorRange)\n  // ============================================================\n\n  /**\n   * \n   * @param startIdx \n   * @param endIdx \n   */\n  async function purgeFloorRange(startIdx: number, endIdx: number): Promise<void> {\n    if (dataStore.isSaving) return;\n\n    //  SillyTavern \n    let ST = (window as any).SillyTavern || (window.parent ? (window.parent as any).SillyTavern : null);\n    if (!ST && (window as any).top && (window as any).top.SillyTavern) {\n      ST = (window as any).top.SillyTavern;\n    }\n\n    if (!ST || !ST.chat) {\n      toast.error(' SillyTavern ');\n      return;\n    }\n\n    // \n    const maxIdx = ST.chat.length - 1;\n    startIdx = Math.max(0, startIdx);\n    endIdx = Math.min(maxIdx, endIdx);\n\n    if (isNaN(startIdx) || isNaN(endIdx) || startIdx > endIdx) {\n      toast.warning('');\n      return;\n    }\n\n    // \n    dataStore.isSaving = true;\n\n    try {\n      console.log(`[ACU-Purge] : ${startIdx} - ${endIdx}`);\n\n      let changesCount = 0;\n\n      // \n      const keysToDelete = [\n        'TavernDB_ACU_Data',\n        'TavernDB_ACU_SummaryData',\n        'TavernDB_ACU_IndependentData',\n        'TavernDB_ACU_Identity',\n        'TavernDB_ACU_IsolatedData',\n        'TavernDB_ACU_ModifiedKeys',\n        'TavernDB_ACU_UpdateGroupKeys',\n      ];\n\n      // \n      for (let i = startIdx; i <= endIdx; i++) {\n        const msg = ST.chat[i];\n        if (!msg) continue;\n\n        let messageModified = false;\n        for (const key of keysToDelete) {\n          if (Object.prototype.hasOwnProperty.call(msg, key)) {\n            delete msg[key];\n            messageModified = true;\n          }\n        }\n\n        if (messageModified) {\n          changesCount++;\n        }\n      }\n\n      // \n      if (changesCount > 0) {\n        // \n        if (ST.saveChat) {\n          await ST.saveChat();\n        }\n\n        // \n        await syncWorldbook();\n\n        //  merge \n        //  diff \n        const latestData = getTableData();\n        if (latestData) {\n          dataStore.saveSnapshot(latestData);\n        } else {\n          dataStore.clearSnapshot();\n        }\n        dataStore.clearChanges(true);\n\n        toast.success(` ${changesCount} `);\n      } else {\n        toast.info('');\n      }\n    } catch (e) {\n      console.error('[ACU] Purge Error:', e);\n      toast.error(': ' + (e as Error).message);\n    } finally {\n      dataStore.isSaving = false;\n    }\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * \n   * @param sheetKeys  key  ( ['sheet_0', 'sheet_2'])\n   * @param startIdx  (chat )\n   * @param endIdx  (chat )\n   * @returns \n   */\n  async function purgeTableDataByRange(\n    sheetKeys: string[],\n    startIdx: number,\n    endIdx: number,\n  ): Promise<{ changed: boolean; changedCount: number }> {\n    // \n    const keys = Array.isArray(sheetKeys)\n      ? [...new Set(sheetKeys.filter(k => typeof k === 'string' && k.startsWith('sheet_')))]\n      : [];\n\n    if (keys.length === 0) {\n      return { changed: false, changedCount: 0 };\n    }\n\n    //  SillyTavern \n    let ST = (window as any).SillyTavern || (window.parent ? (window.parent as any).SillyTavern : null);\n    if (!ST && (window as any).top && (window as any).top.SillyTavern) {\n      ST = (window as any).top.SillyTavern;\n    }\n\n    if (!ST?.chat || ST.chat.length === 0) {\n      toast.error(' SillyTavern ');\n      return { changed: false, changedCount: 0 };\n    }\n\n    // \n    const maxIdx = ST.chat.length - 1;\n    startIdx = Math.max(0, startIdx);\n    endIdx = Math.min(maxIdx, endIdx);\n\n    if (isNaN(startIdx) || isNaN(endIdx) || startIdx > endIdx) {\n      toast.warning('');\n      return { changed: false, changedCount: 0 };\n    }\n\n    // \n    if (dataStore.isSaving) {\n      toast.warning('');\n      return { changed: false, changedCount: 0 };\n    }\n    dataStore.isSaving = true;\n\n    //  key\n    const removeKeyFromArray = (arr: string[], key: string): { arr: string[]; changed: boolean } => {\n      if (!Array.isArray(arr) || arr.length === 0) return { arr, changed: false };\n      const next = arr.filter(x => x !== key);\n      return { arr: next, changed: next.length !== arr.length };\n    };\n\n    try {\n      console.info(`[ACU-AdvancedPurge]  [${keys.join(', ')}]  ${startIdx}-${endIdx} `);\n\n      let changedAny = false;\n      let changedCount = 0;\n\n      // \n      for (let i = startIdx; i <= endIdx; i++) {\n        const msg = ST.chat[i];\n        if (!msg || msg.is_user) continue;\n\n        let msgChanged = false;\n\n        //  TavernDB_ACU_IsolatedData (10.3+ )\n        if (msg.TavernDB_ACU_IsolatedData && typeof msg.TavernDB_ACU_IsolatedData === 'object') {\n          // \n          Object.keys(msg.TavernDB_ACU_IsolatedData).forEach(tagKey => {\n            const tagData = msg.TavernDB_ACU_IsolatedData[tagKey];\n            if (!tagData || typeof tagData !== 'object') return;\n\n            //  independentData \n            if (tagData.independentData && typeof tagData.independentData === 'object') {\n              keys.forEach(k => {\n                if (tagData.independentData[k]) {\n                  delete tagData.independentData[k];\n                  msgChanged = true;\n                }\n              });\n            }\n\n            //  modifiedKeys \n            if (Array.isArray(tagData.modifiedKeys)) {\n              keys.forEach(k => {\n                const r = removeKeyFromArray(tagData.modifiedKeys, k);\n                if (r.changed) {\n                  tagData.modifiedKeys = r.arr;\n                  msgChanged = true;\n                }\n              });\n            }\n\n            //  updateGroupKeys \n            if (Array.isArray(tagData.updateGroupKeys)) {\n              keys.forEach(k => {\n                const r = removeKeyFromArray(tagData.updateGroupKeys, k);\n                if (r.changed) {\n                  tagData.updateGroupKeys = r.arr;\n                  msgChanged = true;\n                }\n              });\n            }\n\n            //  independentData \n            if (\n              tagData.independentData &&\n              Object.keys(tagData.independentData).length === 0 &&\n              (!tagData.modifiedKeys || tagData.modifiedKeys.length === 0) &&\n              (!tagData.updateGroupKeys || tagData.updateGroupKeys.length === 0)\n            ) {\n              delete msg.TavernDB_ACU_IsolatedData[tagKey];\n              msgChanged = true;\n            }\n          });\n\n          //  IsolatedData \n          if (Object.keys(msg.TavernDB_ACU_IsolatedData).length === 0) {\n            delete msg.TavernDB_ACU_IsolatedData;\n            msgChanged = true;\n          }\n        }\n\n        // \n        if (msg.TavernDB_ACU_IndependentData && typeof msg.TavernDB_ACU_IndependentData === 'object') {\n          keys.forEach(k => {\n            if (msg.TavernDB_ACU_IndependentData[k]) {\n              delete msg.TavernDB_ACU_IndependentData[k];\n              msgChanged = true;\n            }\n          });\n        }\n\n        if (Array.isArray(msg.TavernDB_ACU_ModifiedKeys)) {\n          keys.forEach(k => {\n            const r = removeKeyFromArray(msg.TavernDB_ACU_ModifiedKeys, k);\n            if (r.changed) {\n              msg.TavernDB_ACU_ModifiedKeys = r.arr;\n              msgChanged = true;\n            }\n          });\n        }\n\n        if (Array.isArray(msg.TavernDB_ACU_UpdateGroupKeys)) {\n          keys.forEach(k => {\n            const r = removeKeyFromArray(msg.TavernDB_ACU_UpdateGroupKeys, k);\n            if (r.changed) {\n              msg.TavernDB_ACU_UpdateGroupKeys = r.arr;\n              msgChanged = true;\n            }\n          });\n        }\n\n        if (msg.TavernDB_ACU_Data && typeof msg.TavernDB_ACU_Data === 'object') {\n          keys.forEach(k => {\n            if (msg.TavernDB_ACU_Data[k]) {\n              delete msg.TavernDB_ACU_Data[k];\n              msgChanged = true;\n            }\n          });\n        }\n\n        if (msg.TavernDB_ACU_SummaryData && typeof msg.TavernDB_ACU_SummaryData === 'object') {\n          keys.forEach(k => {\n            if (msg.TavernDB_ACU_SummaryData[k]) {\n              delete msg.TavernDB_ACU_SummaryData[k];\n              msgChanged = true;\n            }\n          });\n        }\n\n        if (msgChanged) {\n          changedAny = true;\n          changedCount++;\n        }\n      }\n\n      // \n      if (changedAny) {\n        if (ST.saveChat) {\n          await ST.saveChat();\n        }\n\n        // \n        await syncWorldbook();\n\n        //  merge \n        //  diff \n        const latestData = getTableData();\n        if (latestData) {\n          dataStore.saveSnapshot(latestData);\n        } else {\n          dataStore.clearSnapshot();\n        }\n        dataStore.clearChanges(true);\n\n        console.info(`[ACU-AdvancedPurge]  ${changedCount} `);\n      }\n\n      return { changed: changedAny, changedCount };\n    } catch (e) {\n      console.error('[ACU-AdvancedPurge] :', e);\n      throw e;\n    } finally {\n      dataStore.isSaving = false;\n    }\n  }\n\n  // ============================================================\n  //  ()\n  // ============================================================\n\n  /**  WatchStop  */\n  let autoSaveStop: WatchStopHandle | null = null;\n\n  /**\n   * \n   * @param delay  (),  5000ms\n   */\n  function setupAutoSave(delay = 5000): void {\n    // \n    if (autoSaveStop) {\n      autoSaveStop();\n      autoSaveStop = null;\n    }\n\n    //  VueUse  watchDebounced \n    // watchDebounced  WatchStopHandle\n    autoSaveStop = watchDebounced(\n      () => dataStore.tables,\n      async () => {\n        // \n        if (dataStore.hasChanges && configStore.config.autoSave) {\n          try {\n            console.info('[ACU] ...');\n            await dataStore.saveToDatabase();\n            console.info('[ACU] ');\n          } catch (error) {\n            console.error('[ACU] :', error);\n          }\n        }\n      },\n      { debounce: delay, deep: true },\n    );\n\n    console.info(`[ACU] : ${delay}ms`);\n  }\n\n  /**\n   * \n   */\n  function stopAutoSave(): void {\n    if (autoSaveStop) {\n      autoSaveStop();\n      autoSaveStop = null;\n      console.info('[ACU] ');\n    }\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * \n   */\n  function migrateLegacyData(): void {\n    console.info('[ACU] ...');\n\n    let legacyDataFound = false;\n\n    LEGACY_KEYS.forEach(key => {\n      try {\n        const value = localStorage.getItem(key);\n        if (value) {\n          console.info(`[ACU] : ${key}`);\n          legacyDataFound = true;\n\n          // \n          try {\n            const parsed = JSON.parse(value);\n            const dataType = Array.isArray(parsed) ? 'array' : typeof parsed;\n            console.info(`[ACU]   - : ${dataType}`);\n          } catch {\n            console.info(`[ACU]   - : string`);\n          }\n        }\n      } catch (e) {\n        console.warn(`[ACU]  ${key} :`, e);\n      }\n    });\n\n    //  V5 \n    try {\n      const v5Settings = localStorage.getItem(STORAGE_KEY_V5_SETTINGS);\n      if (v5Settings) {\n        console.info('[ACU]  V5 ');\n        legacyDataFound = true;\n      }\n    } catch {\n      // ignore\n    }\n\n    if (!legacyDataFound) {\n      console.info('[ACU] ');\n    }\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * : \n   */\n  async function initDataPersistence(): Promise<void> {\n    console.info('[ACU] ...');\n\n    // 1. \n    migrateLegacyData();\n\n    // 2. \n    await dataStore.loadFromDatabase();\n\n    // 3.  ()\n    if (configStore.config.autoSave) {\n      setupAutoSave(configStore.config.autoSaveDelay || 5000);\n    }\n\n    console.info('[ACU] ');\n  }\n\n  // ============================================================\n  //  API\n  // ============================================================\n\n  return {\n    // \n    saveToDatabase,\n    syncWorldbook,\n\n    // \n    saveSnapshot,\n    loadSnapshot,\n    clearSnapshot,\n\n    // \n    purgeFloorRange,\n    purgeTableDataByRange,\n\n    // \n    setupAutoSave,\n    stopAutoSave,\n\n    // \n    migrateLegacyData,\n\n    // \n    initDataPersistence,\n\n    // \n    getTableData,\n\n    // Store  ()\n    dataStore,\n  };\n}\n","/**\n *  Composable\n *  CoreActions \n */\n\nimport { useDataStore } from '../stores/useDataStore';\nimport { getBadgeStyle, getCore } from '../utils';\nimport { useDataPersistence } from './useDataPersistence';\nimport { toast } from './useToast';\n\nexport function useCoreActions() {\n  const { saveToDatabase, getTableData, saveSnapshot, loadSnapshot } = useDataPersistence();\n  const dataStore = useDataStore();\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   * @param tableKey  Key (sheetId 'sheet_0')\n   * @param rowIdx  ()\n   */\n  const insertRow = async (tableKey: string, rowIdx: number) => {\n    //  stagedData API \n    let rawData = dataStore.getStagedData();\n    if (!rawData) {\n      rawData = getTableData();\n    }\n    if (!rawData) {\n      console.warn('[ACU insertRow] ');\n      toast.error('');\n      return;\n    }\n\n    const sheet = rawData[tableKey];\n    if (!sheet?.content) {\n      console.warn('[ACU insertRow] :', tableKey, ':', Object.keys(rawData));\n      toast.error('');\n      return;\n    }\n\n    const content = sheet.content;\n    const colCount = content[0] ? content[0].length : 2;\n\n    // \n    const newRow = new Array(colCount).fill('');\n    // \n    if (colCount > 0) newRow[0] = String(content.length);\n\n    // rowIdx  0 content[0]  +2\n    content.splice(rowIdx + 2, 0, newRow);\n\n    toast.info('...');\n\n    //  stagedData saveToDatabase \n    dataStore.setStagedData(rawData);\n\n    // \n    dataStore.saveLastState();\n\n    // \n    const success = await saveToDatabase(rawData, false, true);\n    if (success) {\n      toast.success('');\n    }\n  };\n\n  /**\n   * \n   * @param content \n   */\n  const copyContent = (content: string) => {\n    const parentWin = window.parent || window;\n    // \n    if ((parentWin as any).TavernHelper && (parentWin as any).TavernHelper.triggerSlash) {\n      try {\n        const safeContent = content.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n');\n        (parentWin as any).TavernHelper.triggerSlash(`/clipboard-set \"${safeContent}\"`);\n        toast.success('');\n        return;\n      } catch (err) {\n        console.warn('', err);\n      }\n    }\n\n    //  textarea\n    const textArea = document.createElement('textarea');\n    textArea.value = content;\n    textArea.style.position = 'fixed';\n    textArea.style.left = '-9999px';\n    document.body.appendChild(textArea);\n    textArea.select();\n    try {\n      document.execCommand('copy');\n      toast.success('');\n    } catch (err) {\n      prompt(':', content);\n    }\n    document.body.removeChild(textArea);\n  };\n\n  /**\n   * \n   * @param tableName \n   * @param rowIdx \n   * @param $card  DOM  (jQuery )\n   */\n  const toggleDelete = (tableName: string, rowIdx: number, $card: any) => {\n    //  $card \n    if (!($card && $card.length)) {\n      const { $ } = getCore();\n      if ($) {\n        const parentDoc = window.parent.document;\n        // \n        const $cell = $(parentDoc).find(`.acu-editable-title[data-tname=\"${tableName}\"][data-row=\"${rowIdx}\"]`);\n        if ($cell.length) {\n          $card = $cell.closest('.acu-data-card');\n        }\n      }\n    }\n\n    if (!($card && $card.find)) {\n      console.warn('[ACU] toggleDelete failed: card element not found', { tableName, rowIdx });\n      return;\n    }\n\n    const deleteKey = `${tableName}-row-${rowIdx}`;\n\n    if (dataStore.isPendingDelete(deleteKey)) {\n      // \n      dataStore.toggleDelete(deleteKey);\n      $card.find('.acu-badge-pending').remove();\n      toast.success('');\n    } else {\n      // \n      dataStore.toggleDelete(deleteKey);\n      if ($card.find('.acu-badge-pending').length === 0) {\n        $card.append('<div class=\"acu-badge-pending\"></div>');\n      }\n      toast.warning('');\n    }\n\n    //  ( UI  store )\n    //  pendingDeletes \n  };\n\n  /**\n   *  ()\n   * @param text \n   */\n  const setInput = (text: string) => {\n    const parentDoc = window.parent.document;\n    const textarea = parentDoc.getElementById('send_textarea') as HTMLTextAreaElement;\n    // \n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\n    if (textarea) {\n      // 1. \n      const currentVal = textarea.value || '';\n      const newVal = currentVal ? currentVal + ' ' + text : text;\n\n      // 2. \n      textarea.value = newVal;\n      textarea.dispatchEvent(new Event('input', { bubbles: true }));\n\n      // 3.  ()\n      if (!isMobile) {\n        textarea.focus();\n      }\n    } else {\n      console.warn('[ACU]  #send_textarea');\n    }\n  };\n\n  /**\n   * \n   * @param cellData \n   * @param newVal \n   * @param context \n   */\n  const editCell = (cellData: any, newVal: string, context?: Document) => {\n    const { tableKey, rowIdx, colIdx, $cell } = cellData;\n    const { $ } = getCore();\n    const doc = context || document;\n\n    let freshData = dataStore.getStagedData();\n    if (!freshData) freshData = getTableData();\n    if (!freshData) freshData = loadSnapshot();\n\n    if (freshData) {\n      const sheet = freshData[tableKey];\n      if (sheet?.content && sheet.content[rowIdx + 1]) {\n        sheet.content[rowIdx + 1][colIdx] = newVal;\n        dataStore.setStagedData(freshData);\n        saveSnapshot(freshData);\n      }\n    }\n\n    $cell.attr('data-val', encodeURIComponent(newVal));\n    $cell.data('val', encodeURIComponent(newVal));\n\n    let $displayTarget = $cell;\n    if ($cell.hasClass('acu-grid-item')) $displayTarget = $cell.find('.acu-grid-value');\n    else if ($cell.hasClass('acu-full-item')) $displayTarget = $cell.find('.acu-full-value');\n\n    const badgeStyle = getBadgeStyle(newVal);\n    if (badgeStyle && !$cell.hasClass('acu-editable-title')) {\n      $displayTarget.html(`<span class=\"acu-badge ${badgeStyle}\">${newVal}</span>`);\n    } else {\n      $displayTarget.text(newVal);\n    }\n\n    $displayTarget.addClass('acu-highlight-changed');\n    if ($cell.hasClass('acu-editable-title')) $cell.addClass('acu-highlight-changed');\n\n    //  Diff -  updateCell\n    dataStore.updateCell(tableKey, rowIdx, colIdx, newVal);\n\n    // UI \n    const $saveBtn = $(doc).find('#acu-btn-save-global');\n    $saveBtn.addClass('acu-save-alert');\n\n    toast.info('');\n  };\n\n  return {\n    insertRow,\n    copyContent,\n    toggleDelete,\n    setInput,\n    editCell,\n  };\n}\n","/**\n *  (VueUse )\n *\n * /\n *\n * \n * - \n * - \n * - \n */\n\nimport { useSwipe, useTextSelection, type UseSwipeDirection } from '@vueuse/core';\nimport { computed, onUnmounted, ref, watch, type Ref } from 'vue';\n\n// ============================================================\n// \n// ============================================================\n\nexport interface MobileGestureOptions {\n  /**  */\n  layout: 'horizontal' | 'vertical';\n  /**  */\n  threshold?: number;\n  /**  */\n  edgeThreshold?: number;\n  /**  */\n  onInsertRow?: () => void;\n  /**  */\n  onToggleDelete?: () => void;\n}\n\nexport interface CardGestureOptions {\n  /**  */\n  layout: 'horizontal' | 'vertical';\n  /**  */\n  onInsertRow: () => void;\n  /**  */\n  onToggleDelete: () => void;\n  /**\n   *  50\n   * : topH > 50 / botH > 50\n   */\n  horizontalThreshold?: number;\n  /**\n   *  40\n   * : leftW > 40 / rightW > 40\n   */\n  verticalThreshold?: number;\n  /**  5 */\n  edgeThreshold?: number;\n  /**\n   *  400\n   * : 400ms\n   */\n  longPressDelay?: number;\n  /**\n   *  5\n   * : Math.abs(deltaX) > 5 || Math.abs(deltaY) > 5\n   */\n  longPressCancelThreshold?: number;\n}\n\nexport interface GestureState {\n  /**  */\n  isSwiping: Ref<boolean>;\n  /**  */\n  isSelecting: Ref<boolean>;\n  /**  */\n  isAtEdge: Ref<boolean>;\n  /**  */\n  direction: Ref<UseSwipeDirection | null>;\n  /**  */\n  gestureType: Ref<'insert' | 'delete' | null>;\n}\n\n// ============================================================\n//  Composable ()\n// ============================================================\n\n/**\n *  - \n *\n * \n *\n * @example\n * ```vue\n * <script setup>\n * const containerRef = ref<HTMLElement>();\n * const { isSwiping, isSelecting, gestureType } = useMobileGestures(containerRef, {\n *   layout: 'horizontal',\n *   threshold: 80,\n *   onInsertRow: () => console.log(''),\n *   onToggleDelete: () => console.log(''),\n * });\n * </script>\n * ```\n */\nexport function useMobileGestures(target: Ref<HTMLElement | undefined>, options: MobileGestureOptions): GestureState {\n  const { layout, threshold = 80, edgeThreshold = 10, onInsertRow, onToggleDelete } = options;\n\n  // \n  const { text: selectedText } = useTextSelection();\n  const isSelecting = computed(() => selectedText.value.length > 0);\n\n  // \n  const isAtEdge = ref(false);\n  const scrollDirection = ref<'start' | 'end' | null>(null);\n\n  // \n  const gestureType = ref<'insert' | 'delete' | null>(null);\n\n  /**\n   * \n   */\n  const checkScrollEdge = (element: HTMLElement) => {\n    if (layout === 'horizontal') {\n      // \n      const atTop = element.scrollTop <= edgeThreshold;\n      const atBottom = element.scrollTop + element.clientHeight >= element.scrollHeight - edgeThreshold;\n\n      isAtEdge.value = atTop || atBottom;\n      scrollDirection.value = atTop ? 'start' : atBottom ? 'end' : null;\n    } else {\n      // \n      const atLeft = element.scrollLeft <= edgeThreshold;\n      const atRight = element.scrollLeft + element.clientWidth >= element.scrollWidth - edgeThreshold;\n\n      isAtEdge.value = atLeft || atRight;\n      scrollDirection.value = atLeft ? 'start' : atRight ? 'end' : null;\n    }\n  };\n\n  /**\n   * \n   */\n  const handleSwipeComplete = (dir: UseSwipeDirection, lengthX: number, lengthY: number) => {\n    if (isSelecting.value) {\n      console.info('[ACU Mobile] ');\n      return;\n    }\n\n    if (layout === 'horizontal' && dir === 'down' && lengthY > threshold && scrollDirection.value === 'start') {\n      //  - \n      console.info('[ACU Mobile]  - ');\n      gestureType.value = 'insert';\n      onInsertRow?.();\n    } else if (layout === 'horizontal' && dir === 'up' && lengthY > threshold && scrollDirection.value === 'end') {\n      //  - \n      console.info('[ACU Mobile]  - ');\n      gestureType.value = 'delete';\n      onToggleDelete?.();\n    } else if (layout === 'vertical' && dir === 'right' && lengthX > threshold) {\n      //  - \n      console.info('[ACU Mobile]  - ');\n      gestureType.value = 'delete';\n      onToggleDelete?.();\n    } else if (layout === 'vertical' && dir === 'left' && lengthX > threshold) {\n      //  - \n      console.info('[ACU Mobile]  - ');\n      gestureType.value = 'insert';\n      onInsertRow?.();\n    }\n\n    // \n    setTimeout(() => {\n      gestureType.value = null;\n    }, 300);\n  };\n\n  //  VueUse  useSwipe\n  const { direction, lengthX, lengthY, isSwiping } = useSwipe(target, {\n    passive: false,\n    threshold: 10,\n    onSwipeStart(e) {\n      // \n      if (isSelecting.value) {\n        e.preventDefault();\n        return;\n      }\n\n      // \n      if (target.value) {\n        checkScrollEdge(target.value);\n      }\n    },\n    onSwipe(_e) {\n      if (isSelecting.value) return;\n\n      // \n      if (target.value) {\n        checkScrollEdge(target.value);\n      }\n    },\n    onSwipeEnd(_e, dir) {\n      if (isSelecting.value) return;\n      if (dir) {\n        handleSwipeComplete(dir, Math.abs(lengthX.value), Math.abs(lengthY.value));\n      }\n    },\n  });\n\n  return {\n    isSwiping,\n    isSelecting,\n    isAtEdge,\n    direction,\n    gestureType,\n  };\n}\n\n// ============================================================\n//  Composable\n// ============================================================\n\n/**\n *  -  Touch \n *\n *  DataCard \n *  6.4.1.ts \n */\nexport function useCardGestures(cardRef: Ref<HTMLElement | undefined>, options: CardGestureOptions) {\n  const {\n    layout,\n    onInsertRow,\n    onToggleDelete,\n    //  50px 40px\n    horizontalThreshold = 50,\n    verticalThreshold = 40,\n    edgeThreshold = 5,\n    //  400ms\n    longPressDelay = 400,\n    //  5px \n    longPressCancelThreshold = 5,\n  } = options;\n\n  // \n  const threshold = layout === 'horizontal' ? horizontalThreshold : verticalThreshold;\n\n  //  VueUse\n  const { text } = useTextSelection();\n  const isSelectingVueUse = computed(() => text.value.length > 0);\n\n  //  false touchstart  checkScrollEdge \n  const scrolledToEdge = ref(false);\n  const atStart = ref(false);\n  const atEnd = ref(false);\n\n  // \n  const gestureType = ref<'insert' | 'delete' | null>(null);\n\n  // \n  const isSwiping = ref(false);\n  const touchStartX = ref(0);\n  const touchStartY = ref(0);\n  const lengthX = ref(0);\n  const lengthY = ref(0);\n\n  // ============================================================\n  // \n  //  touchmove \n  // ============================================================\n  const directionLocked = ref<'horizontal' | 'vertical' | null>(null);\n  const DIRECTION_LOCK_THRESHOLD = 10; //  10px \n\n  // ============================================================\n  // \n  // \n  // ============================================================\n  const gestureLocked = ref(false);\n\n  // ============================================================\n  // 2 scrollHeight \n  // .acu-pull-overlay  scrollHeight\n  //  touchstart \n  // ============================================================\n  const initialScrollHeight = ref(0);\n  const initialClientHeight = ref(0);\n  const initialIsShortCard = ref(false);\n\n  // \n  const parentScrollStart = ref(0); // touchstart  scrollLeft\n  const parentScrollContainer = ref<HTMLElement | null>(null); // \n\n  // ============================================================\n  // shouldBlockClick \n  //  touchstart \n  // ============================================================\n  const shouldBlockClick = ref(false);\n\n  // \n  const longPressTimer = ref<ReturnType<typeof setTimeout> | null>(null);\n  const isSelectionMode = ref(false);\n\n  /**\n   * \n   */\n  const checkScrollEdge = (e?: Event) => {\n    const target = e?.currentTarget as HTMLElement | undefined;\n    const el = target || cardRef.value;\n    if (!el) return;\n\n    if (layout === 'horizontal') {\n      // \n      atStart.value = el.scrollTop <= edgeThreshold;\n      atEnd.value = el.scrollTop + el.clientHeight >= el.scrollHeight - edgeThreshold;\n    } else {\n      // \n      atStart.value = el.scrollLeft <= edgeThreshold;\n      atEnd.value = el.scrollLeft + el.clientWidth >= el.scrollWidth - edgeThreshold;\n    }\n\n    scrolledToEdge.value = atStart.value || atEnd.value;\n  };\n\n  /**\n   *  window.getSelection()\n   */\n  const hasNativeSelection = (): boolean => {\n    const selection = window.getSelection();\n    return selection ? selection.toString().length > 0 : false;\n  };\n\n  /**\n   * \n   */\n  const isSelecting = computed(() => isSelectingVueUse.value || hasNativeSelection());\n\n  /**\n   * \n   * \n   */\n  const handleTouchStart = (e: TouchEvent) => {\n    const el = cardRef.value;\n    if (!el) return;\n\n    // \n    shouldBlockClick.value = false;\n    isSelectionMode.value = false;\n    gestureType.value = null;\n    directionLocked.value = null; // \n    gestureLocked.value = false; // \n\n    // \n    if (longPressTimer.value) {\n      clearTimeout(longPressTimer.value);\n      longPressTimer.value = null;\n    }\n\n    // \n    if (hasNativeSelection()) {\n      shouldBlockClick.value = true;\n    }\n\n    const touch = e.touches[0];\n    touchStartX.value = touch.clientX;\n    touchStartY.value = touch.clientY;\n    lengthX.value = 0;\n    lengthY.value = 0;\n    isSwiping.value = true;\n\n    // \n    if (layout === 'horizontal') {\n      const scrollContainer = el.closest('.acu-data-display') as HTMLElement | null;\n      parentScrollContainer.value = scrollContainer;\n      parentScrollStart.value = scrollContainer?.scrollLeft ?? 0;\n    }\n\n    //  atStart/atEnd  touchmove \n    // \"\" atStart  true touchmove \n    checkScrollEdge();\n\n    // 2 0 \n    initialScrollHeight.value = el.scrollHeight;\n    initialClientHeight.value = el.clientHeight;\n    initialIsShortCard.value = el.scrollHeight <= el.clientHeight + 2;\n\n    // 400ms\n    longPressTimer.value = setTimeout(() => {\n      isSelectionMode.value = true;\n      // \n      shouldBlockClick.value = true;\n    }, longPressDelay);\n  };\n\n  /**\n   * \n   * \n   */\n  const handleTouchMove = (e: TouchEvent) => {\n    const el = cardRef.value;\n    if (!el || !isSwiping.value) return;\n\n    const touch = e.touches[0];\n    const deltaX = touch.clientX - touchStartX.value;\n    const deltaY = touch.clientY - touchStartY.value;\n\n    lengthX.value = deltaX;\n    lengthY.value = deltaY;\n\n    //  5px\n    if (Math.abs(deltaX) > longPressCancelThreshold || Math.abs(deltaY) > longPressCancelThreshold) {\n      if (longPressTimer.value) {\n        clearTimeout(longPressTimer.value);\n        longPressTimer.value = null;\n      }\n    }\n\n    // \n    const nativeSelection = hasNativeSelection();\n    if (shouldBlockClick.value || isSelectionMode.value || nativeSelection) {\n      shouldBlockClick.value = true; // \n      return; // /\n    }\n\n    // \n    checkScrollEdge();\n\n    // ============================================================\n    // \n    // \n    // ============================================================\n    if (\n      !directionLocked.value &&\n      (Math.abs(deltaX) > DIRECTION_LOCK_THRESHOLD || Math.abs(deltaY) > DIRECTION_LOCK_THRESHOLD)\n    ) {\n      directionLocked.value = Math.abs(deltaX) > Math.abs(deltaY) ? 'horizontal' : 'vertical';\n      console.info('[ACU Card] :', directionLocked.value);\n    }\n\n    if (layout === 'horizontal') {\n      const scrollTop = el.scrollTop;\n\n      // 2\n      const isShortCard = initialIsShortCard.value;\n\n      // ============================================================\n      // \n      //  touchmove \n      // \n      // ============================================================\n      if (isShortCard) {\n        // \n        if (\n          !directionLocked.value &&\n          (Math.abs(deltaX) > DIRECTION_LOCK_THRESHOLD || Math.abs(deltaY) > DIRECTION_LOCK_THRESHOLD)\n        ) {\n          directionLocked.value = Math.abs(deltaX) > Math.abs(deltaY) ? 'horizontal' : 'vertical';\n          console.info('[ACU Card] :', directionLocked.value);\n        }\n\n        // \n        if (directionLocked.value === 'horizontal') {\n          if (!gestureLocked.value) {\n            gestureType.value = null;\n          }\n          // \n          if (parentScrollContainer.value) {\n            parentScrollContainer.value.scrollLeft = parentScrollStart.value - deltaX;\n          }\n          return; // \n        }\n\n        // \n        if (directionLocked.value === 'vertical' || (directionLocked.value === null && Math.abs(deltaY) > 5)) {\n          // \n          if (e.cancelable) e.preventDefault();\n          e.stopPropagation();\n\n          // deltaY * 0.6 30px\n          const displayHeight = Math.abs(deltaY) * 0.6;\n          const newGestureType = deltaY > 0 ? 'insert' : 'delete';\n\n          // 3.2/3.3 gestureType\n          //  gestureType \n          //  gestureType\n          if (displayHeight > 30) {\n            gestureType.value = newGestureType;\n            gestureLocked.value = true;\n          } else if (!gestureLocked.value) {\n            // \n            gestureType.value = null;\n          }\n          //  gestureType\n        }\n\n        return; // \n      }\n\n      // ============================================================\n      // \n      // ============================================================\n\n      // \n      // \n      if (directionLocked.value === 'horizontal') {\n        if (!gestureLocked.value) {\n          gestureType.value = null;\n        }\n\n        // \n        if (parentScrollContainer.value) {\n          parentScrollContainer.value.scrollLeft = parentScrollStart.value - deltaX;\n        }\n        return; // \n      }\n\n      // \n      if (directionLocked.value === 'vertical') {\n        // 1 -1  -2\n        const scrollHeight = el.scrollHeight;\n        const clientHeight = el.clientHeight;\n\n        // \n        const isPullDown = deltaY > 0 && scrollTop <= 0;\n        // \n        const isPullUp = deltaY < 0 && scrollTop + clientHeight >= scrollHeight - 2;\n\n        if (isPullDown || isPullUp) {\n          // \n          if (e.cancelable) e.preventDefault();\n          e.stopPropagation();\n\n          // deltaY * 0.6 30px\n          const displayHeight = Math.abs(deltaY) * 0.6;\n          const newGestureType = isPullDown ? 'insert' : 'delete';\n\n          // 3.2/3.3 gestureType\n          if (displayHeight > 30) {\n            gestureType.value = newGestureType;\n            gestureLocked.value = true;\n          } else if (!gestureLocked.value) {\n            gestureType.value = null;\n          }\n        } else if (!gestureLocked.value) {\n          gestureType.value = null;\n        }\n      }\n    } else if (layout === 'vertical' && Math.abs(deltaX) > Math.abs(deltaY) && Math.abs(deltaX) > 10) {\n      //  10px\n      // \n      if (e.cancelable) e.preventDefault();\n      e.stopPropagation();\n\n      // deltaX * 0.7 28px ( 40px)\n      const displayWidth = Math.abs(deltaX) * 0.7;\n      if (deltaX > 0 && displayWidth > 28) {\n        //  -> \n        gestureType.value = 'delete';\n      } else if (deltaX < 0 && displayWidth > 28) {\n        //  -> \n        gestureType.value = 'insert';\n      } else {\n        gestureType.value = null;\n      }\n    }\n  };\n\n  /**\n   * \n   * \n   */\n  const handleTouchEnd = (_e: TouchEvent) => {\n    const el = cardRef.value;\n    if (!el) return;\n\n    // \n    if (longPressTimer.value) {\n      clearTimeout(longPressTimer.value);\n      longPressTimer.value = null;\n    }\n\n    const deltaX = lengthX.value;\n    const deltaY = lengthY.value;\n\n    // 3.1\n    // /handleTouchEnd \n    //  directionLocked\n    if (layout === 'horizontal' && directionLocked.value === 'horizontal') {\n      console.info('[ACU Card TouchEnd] ');\n      isSwiping.value = false;\n      gestureType.value = null;\n      gestureLocked.value = false;\n      return;\n    }\n\n    // \n    console.info('[ACU Card TouchEnd] ', {\n      layout,\n      deltaX: deltaX.toFixed(1),\n      deltaY: deltaY.toFixed(1),\n      threshold,\n      isSelectionMode: isSelectionMode.value,\n      hasNativeSelection: hasNativeSelection(),\n      shouldBlockClick: shouldBlockClick.value,\n      gestureType: gestureType.value,\n    });\n\n    // \n    // \"\"\n    //  touchstart \n    if (isSelectionMode.value || hasNativeSelection()) {\n      console.info('[ACU Card TouchEnd] ');\n      shouldBlockClick.value = true;\n      isSwiping.value = false;\n      gestureType.value = null;\n      return;\n    }\n\n    // \n    if (shouldBlockClick.value) {\n      console.info('[ACU Card TouchEnd] shouldBlockClick ');\n      isSwiping.value = false;\n      gestureType.value = null;\n      return;\n    }\n\n    if (layout === 'horizontal') {\n      // \n      const scrollTop = el.scrollTop;\n      const scrollHeight = el.scrollHeight;\n      const clientHeight = el.clientHeight;\n\n      // 2\n      const isShortCard = initialIsShortCard.value;\n\n      const isPullDown = deltaY > 0 && (scrollTop <= 0 || isShortCard);\n      // 1 -1  -2\n      const isPullUp = deltaY < 0 && (scrollTop + clientHeight >= scrollHeight - 2 || isShortCard);\n\n      console.info('[ACU Card TouchEnd] ', {\n        scrollTop,\n        scrollHeight,\n        clientHeight,\n        isShortCard,\n        isPullDown,\n        isPullUp,\n        deltaY: deltaY.toFixed(1),\n        threshold,\n        : isPullDown && deltaY > threshold,\n        : isPullUp && Math.abs(deltaY) > threshold,\n      });\n\n      //  > 50px ( indicator height > 50)\n      //  deltaY * 0.6  height deltaY > 83.3 \n      //  topH > 50 threshold 50\n      if (isPullDown && deltaY > threshold) {\n        console.info('[ACU Card]  (deltaY:', deltaY, ')');\n        onInsertRow();\n      } else if (isPullUp && Math.abs(deltaY) > threshold) {\n        console.info('[ACU Card]  (deltaY:', deltaY, ')');\n        onToggleDelete();\n      } else {\n        console.info('[ACU Card TouchEnd] ');\n      }\n    } else if (layout === 'vertical') {\n      console.info('[ACU Card TouchEnd] ', {\n        deltaX: deltaX.toFixed(1),\n        threshold,\n        '()': deltaX > threshold,\n        '()': deltaX < -threshold,\n      });\n\n      //  > 40px\n      if (deltaX > threshold) {\n        // \n        console.info('[ACU Card]  (deltaX:', deltaX, ')');\n        onToggleDelete();\n      } else if (deltaX < -threshold) {\n        // \n        console.info('[ACU Card]  (deltaX:', deltaX, ')');\n        onInsertRow();\n      } else {\n        console.info('[ACU Card TouchEnd] ');\n      }\n    }\n\n    // \n    setTimeout(() => {\n      gestureType.value = null;\n      gestureLocked.value = false; // \n    }, 300);\n\n    isSwiping.value = false;\n  };\n\n  //  cardRef \n  watch(\n    cardRef,\n    (el, oldEl) => {\n      // \n      if (oldEl) {\n        oldEl.removeEventListener('touchstart', handleTouchStart);\n        oldEl.removeEventListener('touchmove', handleTouchMove);\n        oldEl.removeEventListener('touchend', handleTouchEnd);\n      }\n\n      // \n      if (el) {\n        el.addEventListener('touchstart', handleTouchStart, { passive: true });\n        el.addEventListener('touchmove', handleTouchMove, { passive: false });\n        el.addEventListener('touchend', handleTouchEnd, { passive: true });\n\n        // \n        checkScrollEdge();\n      }\n    },\n    { immediate: true },\n  );\n\n  // \n  onUnmounted(() => {\n    const el = cardRef.value;\n    if (el) {\n      el.removeEventListener('touchstart', handleTouchStart);\n      el.removeEventListener('touchmove', handleTouchMove);\n      el.removeEventListener('touchend', handleTouchEnd);\n    }\n    // \n    if (longPressTimer.value) {\n      clearTimeout(longPressTimer.value);\n      longPressTimer.value = null;\n    }\n  });\n\n  return {\n    /**  VueUse  API */\n    isSelecting,\n    /**  */\n    scrolledToEdge,\n    /**  */\n    atStart,\n    /**  */\n    atEnd,\n    /**  */\n    isSwiping,\n    /**  */\n    gestureType,\n    /**  */\n    checkScrollEdge,\n    /**  */\n    lengthX,\n    /**  */\n    lengthY,\n    /**  */\n    shouldBlockClick,\n    /**  */\n    isSelectionMode,\n  };\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n *  Composable\n *\n * \n *\n */\nexport function useSelectionGuardEnhanced() {\n  const { text } = useTextSelection();\n\n  // \n  const isSelecting = computed(() => text.value.length > 0);\n\n  // \n  const wasSelecting = ref(false);\n  const selectionEndTimer = ref<ReturnType<typeof setTimeout> | null>(null);\n\n  // \n  watch(isSelecting, newValue => {\n    if (!newValue && wasSelecting.value) {\n      // \n      selectionEndTimer.value = setTimeout(() => {\n        wasSelecting.value = false;\n      }, 100);\n    } else if (newValue) {\n      wasSelecting.value = true;\n      if (selectionEndTimer.value) {\n        clearTimeout(selectionEndTimer.value);\n        selectionEndTimer.value = null;\n      }\n    }\n  });\n\n  /**\n   * \n   */\n  const shouldBlockInteraction = () => {\n    return isSelecting.value || wasSelecting.value;\n  };\n\n  /**\n   * \n   */\n  const clearSelection = () => {\n    const selection = window.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n    }\n  };\n\n  return {\n    /**  */\n    selectedText: text,\n    /**  */\n    isSelecting,\n    /**  */\n    wasSelecting: computed(() => wasSelecting.value),\n    /**  */\n    shouldBlockInteraction,\n    /**  */\n    clearSelection,\n  };\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**  */\nconst MOBILE_REGEX = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;\n\n/**\n * \n *  UA\n */\nfunction checkIsMobileLayout(): boolean {\n  //  F12 \n  if (typeof window !== 'undefined') {\n    if (window.innerWidth <= 768) return true;\n    if (window.innerWidth > 1024) return false;\n  }\n  //  UA \n  return MOBILE_REGEX.test(navigator.userAgent);\n}\n\n/**\n * \n *  F12 \n */\nexport function useIsMobile() {\n  const isMobile = ref(checkIsMobileLayout());\n\n  //  F12 \n  if (typeof window !== 'undefined') {\n    const checkMobile = () => {\n      isMobile.value = checkIsMobileLayout();\n    };\n\n    window.addEventListener('resize', checkMobile);\n    onUnmounted(() => {\n      window.removeEventListener('resize', checkMobile);\n    });\n  }\n\n  return {\n    isMobile,\n    /**  */\n    isTouchDevice: computed(() => 'ontouchstart' in window || navigator.maxTouchPoints > 0),\n  };\n}\n\n// ============================================================\n// \n// ============================================================\n\nexport interface GestureIndicatorConfig {\n  /**  */\n  insertIcon: string;\n  /**  */\n  insertText: string;\n  /**  */\n  deleteIcon: string;\n  /**  */\n  deleteText: string;\n  /**  */\n  undoDeleteIcon: string;\n  /**  */\n  undoDeleteText: string;\n}\n\n/**\n * \n */\nexport function getGestureIndicatorConfig(): GestureIndicatorConfig {\n  return {\n    insertIcon: 'fas fa-plus-circle',\n    insertText: '',\n    deleteIcon: 'fas fa-trash-alt',\n    deleteText: '',\n    undoDeleteIcon: 'fas fa-undo',\n    undoDeleteText: '',\n  };\n}\n\n/**\n * \n */\nexport function getGestureIndicator(\n  gestureType: 'insert' | 'delete' | null,\n  isDeleting: boolean,\n): { icon: string; text: string; type: 'success' | 'danger' | 'warning' | null } | null {\n  if (!gestureType) return null;\n\n  const config = getGestureIndicatorConfig();\n\n  if (gestureType === 'insert') {\n    return {\n      icon: config.insertIcon,\n      text: config.insertText,\n      type: 'success',\n    };\n  }\n\n  if (gestureType === 'delete') {\n    if (isDeleting) {\n      return {\n        icon: config.undoDeleteIcon,\n        text: config.undoDeleteText,\n        type: 'warning',\n      };\n    }\n    return {\n      icon: config.deleteIcon,\n      text: config.deleteText,\n      type: 'danger',\n    };\n  }\n\n  return null;\n}\n","/**\n * VueUse \n *  VueUse \n *\n * \n * - useDraggableWithSnap:  + \n * - useAutoHeight: \n * - useCopyWithFeedback: \n * - useSelectionGuard: \n * - useParentEventListener: \n * - useDebouncedSave: \n */\nimport { onClickOutside, useClipboard, useDebounceFn, useDraggable, useEventListener, useResizeObserver, useStorage, useTextSelection, useThrottleFn, watchDebounced, } from '@vueuse/core';\nimport { computed, ref } from 'vue';\n// ============================================================\n//  + \n// ============================================================\n/**\n *  + \n *\n *  VueUse  useDraggable\n *  iframe \n *\n * @example\n * ```vue\n * <script setup>\n * const ballRef = ref<HTMLElement>();\n * const { x, y, style, isDragging } = useDraggableWithSnap(ballRef, {\n *   initialX: 100,\n *   initialY: 100,\n *   useParentWindow: true,\n *   onPositionChange: (x, y) => console.log(':', x, y)\n * });\n * </script>\n * <template>\n *   <div ref=\"ballRef\" :style=\"style\"></div>\n * </template>\n * ```\n */\nexport function useDraggableWithSnap(target, options = {}) {\n    const { initialX = 100, initialY = 100, edgePadding = 10, elementWidth = 50, onPositionChange, useParentWindow = false, } = options;\n    //  iframe\n    const getTargetWindow = () => {\n        if (useParentWindow && window.parent && window.parent !== window) {\n            return window.parent;\n        }\n        return window;\n    };\n    // \n    const getTargetDocument = () => {\n        return getTargetWindow().document;\n    };\n    // \n    const getScreenSize = () => {\n        const targetWindow = getTargetWindow();\n        return {\n            width: targetWindow.innerWidth,\n            height: targetWindow.innerHeight,\n        };\n    };\n    // \n    const getSnapThreshold = () => {\n        return options.snapThreshold ?? getScreenSize().width / 2;\n    };\n    // \n    const wasDragging = ref(false);\n    // \n    let dragStartX = 0;\n    let dragStartY = 0;\n    const DRAG_THRESHOLD = 5; //  5 \n    //  iframe \n    const draggingElement = computed(() => {\n        if (useParentWindow) {\n            try {\n                return getTargetDocument();\n            }\n            catch {\n                return document;\n            }\n        }\n        return document;\n    });\n    const { x, y, isDragging } = useDraggable(target, {\n        initialValue: {\n            x: initialX,\n            y: initialY,\n        },\n        // \n        draggingElement,\n        onStart(_position, event) {\n            wasDragging.value = false;\n            //  iframe \n            dragStartX = event.clientX;\n            dragStartY = event.clientY;\n        },\n        onMove(_position, event) {\n            // \n            const mouseX = event.clientX;\n            const mouseY = event.clientY;\n            const dx = Math.abs(mouseX - dragStartX);\n            const dy = Math.abs(mouseY - dragStartY);\n            if (dx > DRAG_THRESHOLD || dy > DRAG_THRESHOLD) {\n                wasDragging.value = true;\n            }\n        },\n        onEnd() {\n            if (wasDragging.value) {\n                const { width: screenWidth, height: screenHeight } = getScreenSize();\n                // \n                // \n                // \n                if (x.value < edgePadding) {\n                    x.value = edgePadding;\n                }\n                if (x.value > screenWidth - elementWidth - edgePadding) {\n                    x.value = screenWidth - elementWidth - edgePadding;\n                }\n                // \n                if (y.value < edgePadding) {\n                    y.value = edgePadding;\n                }\n                if (y.value > screenHeight - elementWidth - edgePadding) {\n                    y.value = screenHeight - elementWidth - edgePadding;\n                }\n                // \n                onPositionChange?.(x.value, y.value);\n                //  wasDragging click handler \n                // \n            }\n        },\n    });\n    // \n    const style = computed(() => ({\n        left: `${x.value}px`,\n        top: `${y.value}px`,\n        cursor: isDragging.value ? 'grabbing' : 'grab',\n    }));\n    return {\n        x,\n        y,\n        isDragging,\n        wasDragging,\n        style,\n        /**  */\n        reset: () => {\n            x.value = initialX;\n            y.value = initialY;\n            onPositionChange?.(x.value, y.value);\n        },\n    };\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n *  ResizeObserver \n * \n *\n * @example\n * ```vue\n * <script setup>\n * const contentRef = ref<HTMLElement>();\n * const { height, heightStyle } = useAutoHeight(contentRef, {\n *   minHeight: 200,\n *   maxHeightRatio: 0.8,\n *   onHeightChange: (h) => console.log(':', h)\n * });\n * </script>\n * <template>\n *   <div :style=\"heightStyle\">\n *     <div ref=\"contentRef\"></div>\n *   </div>\n * </template>\n * ```\n */\nexport function useAutoHeight(contentRef, options = {}) {\n    const { minHeight = 200, maxHeightRatio = 0.8, padding = 100, onHeightChange, useParentWindow = false } = options;\n    const height = ref(minHeight);\n    // \n    const getParentHeight = () => {\n        if (useParentWindow && window.parent && window.parent !== window) {\n            return window.parent.innerHeight;\n        }\n        return window.innerHeight;\n    };\n    // \n    useResizeObserver(contentRef, entries => {\n        const entry = entries[0];\n        if (!entry)\n            return;\n        const contentHeight = entry.contentRect.height;\n        const parentHeight = getParentHeight();\n        const maxHeight = parentHeight * maxHeightRatio;\n        const newHeight = Math.max(minHeight, Math.min(contentHeight + padding, maxHeight));\n        height.value = newHeight;\n        onHeightChange?.(newHeight);\n    });\n    // \n    const heightStyle = computed(() => ({\n        height: `${height.value}px`,\n        maxHeight: `${getParentHeight() * maxHeightRatio}px`,\n    }));\n    return {\n        height,\n        heightStyle,\n        /**  */\n        reset: () => {\n            height.value = minHeight;\n            onHeightChange?.(minHeight);\n        },\n    };\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n * \n * -  +  + () + paddingclamp  [min, max] \n * -  * 0.8\n *\n * @param contentRef - \n * @param panelType - normal/dashboard/options\n * @param showPagination -  configStore \n * @param options - \n *\n * @example\n * ```vue\n * <script setup>\n * const contentRef = ref<HTMLElement>();\n * const configStore = useConfigStore();\n * const panelType = computed(() => activeTab.value === 'dashboard' ? 'dashboard' : 'normal');\n *\n * const { height, heightStyle } = useSmartHeight(\n *   contentRef,\n *   panelType,\n *   computed(() => configStore.config.showPagination),\n *   {\n *     onHeightChange: (h) => console.log(':', h)\n *   }\n * );\n * </script>\n * <template>\n *   <div :style=\"heightStyle\">\n *     <div ref=\"contentRef\"></div>\n *   </div>\n * </template>\n * ```\n */\nexport function useSmartHeight(contentRef, panelType, showPagination, options = {}) {\n    const { minHeight = 200, maxHeightRatio = 0.8, headerHeight = 42, paginationHeight = 56, contentPadding = 25, onHeightChange, } = options;\n    const height = ref(minHeight);\n    //  iframe \n    const getParentHeight = () => {\n        if (window.parent && window.parent !== window) {\n            return window.parent.innerHeight;\n        }\n        return window.innerHeight;\n    };\n    // \n    const getMaxHeight = () => {\n        return getParentHeight() * maxHeightRatio;\n    };\n    // \n    const getPanelType = () => {\n        return typeof panelType === 'string' ? panelType : panelType.value;\n    };\n    // \n    const getShowPagination = () => {\n        return typeof showPagination === 'boolean' ? showPagination : showPagination.value;\n    };\n    // \n    useResizeObserver(contentRef, entries => {\n        const entry = entries[0];\n        if (!entry)\n            return;\n        const currentPanelType = getPanelType();\n        // \n        if (currentPanelType === 'dashboard') {\n            const maxH = getMaxHeight();\n            console.info('[ACU useSmartHeight] :', {\n                maxH,\n                parentHeight: getParentHeight(),\n                ratio: maxHeightRatio,\n            });\n            height.value = maxH;\n            onHeightChange?.(maxH);\n            return;\n        }\n        // \n        const contentHeight = entry.contentRect.height;\n        const paginationH = getShowPagination() ? paginationHeight : 0;\n        //  +  +  + \n        const totalHeight = headerHeight + contentHeight + contentPadding + paginationH;\n        // Clamp  [minHeight, maxHeight] \n        const maxH = getMaxHeight();\n        const newHeight = Math.max(minHeight, Math.min(totalHeight, maxH));\n        height.value = newHeight;\n        onHeightChange?.(newHeight);\n    });\n    // \n    if (typeof panelType !== 'string') {\n        watch(panelType, newType => {\n            if (newType === 'dashboard') {\n                const maxH = getMaxHeight();\n                console.info('[ACU useSmartHeight] :', maxH);\n                height.value = maxH;\n                onHeightChange?.(maxH);\n            }\n        });\n    }\n    // \n    if (typeof showPagination !== 'boolean') {\n        watch(showPagination, () => {\n            // \n            if (contentRef.value) {\n                const contentHeight = contentRef.value.scrollHeight;\n                const currentPanelType = getPanelType();\n                if (currentPanelType !== 'dashboard') {\n                    const paginationH = getShowPagination() ? paginationHeight : 0;\n                    const totalHeight = headerHeight + contentHeight + contentPadding + paginationH;\n                    const maxH = getMaxHeight();\n                    const newHeight = Math.max(minHeight, Math.min(totalHeight, maxH));\n                    height.value = newHeight;\n                    onHeightChange?.(newHeight);\n                }\n            }\n        });\n    }\n    // \n    const heightStyle = computed(() => ({\n        height: `${height.value}px`,\n        maxHeight: `${getMaxHeight()}px`,\n    }));\n    return {\n        /**  */\n        height,\n        /**  */\n        heightStyle,\n        /**  */\n        maxHeight: computed(() => getMaxHeight()),\n        /**  */\n        reset: () => {\n            height.value = minHeight;\n            onHeightChange?.(minHeight);\n        },\n        /**  */\n        maximize: () => {\n            const maxH = getMaxHeight();\n            height.value = maxH;\n            onHeightChange?.(maxH);\n        },\n        /**  */\n        recalculate: () => {\n            if (contentRef.value) {\n                const currentPanelType = getPanelType();\n                if (currentPanelType === 'dashboard') {\n                    const maxH = getMaxHeight();\n                    height.value = maxH;\n                    onHeightChange?.(maxH);\n                }\n                else {\n                    const contentHeight = contentRef.value.scrollHeight;\n                    const paginationH = getShowPagination() ? paginationHeight : 0;\n                    const totalHeight = headerHeight + contentHeight + contentPadding + paginationH;\n                    const maxH = getMaxHeight();\n                    const newHeight = Math.max(minHeight, Math.min(totalHeight, maxH));\n                    height.value = newHeight;\n                    onHeightChange?.(newHeight);\n                }\n            }\n        },\n    };\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n *  VueUse  useClipboard toastr \n *\n * @example\n * ```vue\n * <script setup>\n * const { copyWithToast, copied } = useCopyWithFeedback();\n *\n * const handleCopy = async () => {\n *   const success = await copyWithToast('');\n *   if (success) {\n *     console.log('');\n *   }\n * };\n * </script>\n * ```\n */\nexport function useCopyWithFeedback() {\n    const { copy, copied, isSupported } = useClipboard();\n    /**\n     *  toast \n     */\n    const copyWithToast = async (text, successMessage = '') => {\n        // \n        const { toast } = await import('./useToast');\n        if (!isSupported.value) {\n            console.warn('[ACU]  API ');\n            toast.warning('');\n            return false;\n        }\n        try {\n            await copy(text);\n            if (copied.value) {\n                toast.success(successMessage);\n                return true;\n            }\n            return false;\n        }\n        catch (error) {\n            console.error('[ACU] :', error);\n            toast.error('');\n            return false;\n        }\n    };\n    return {\n        copyWithToast,\n        copied,\n        isSupported,\n        /**  */\n        copy,\n    };\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n * \n *\n * @example\n * ```vue\n * <script setup>\n * const { isSelecting, shouldBlockInteraction } = useSelectionGuard();\n *\n * const handleClick = () => {\n *   if (shouldBlockInteraction()) return;\n *   // \n * };\n * </script>\n * ```\n */\nexport function useSelectionGuard() {\n    const { text } = useTextSelection();\n    const isSelecting = computed(() => text.value.length > 0);\n    /**\n     * \n     */\n    const shouldBlockInteraction = () => isSelecting.value;\n    return {\n        /**  */\n        selectedText: text,\n        /**  */\n        isSelecting,\n        /**  */\n        shouldBlockInteraction,\n    };\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n *  iframe \n *\n * @example\n * ```vue\n * <script setup>\n * useParentEventListener('resize', () => {\n *   console.log('');\n * });\n *\n * useParentEventListener('keydown', (e) => {\n *   if (e.key === 'Escape') {\n *     console.log(' Escape');\n *   }\n * });\n * </script>\n * ```\n */\nexport function useParentEventListener(event, handler, options) {\n    const targetWindow = window.parent && window.parent !== window ? window.parent : window;\n    return useEventListener(targetWindow, event, handler, options);\n}\n/**\n * \n */\nexport function useParentDocumentEventListener(event, handler, options) {\n    const targetDocument = window.parent && window.parent !== window ? window.parent.document : document;\n    return useEventListener(targetDocument, event, handler, options);\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n * \n *\n * @example\n * ```vue\n * <script setup>\n * const data = ref({ name: 'test' });\n *\n * useDebouncedSave(\n *   () => data.value,\n *   async (data) => {\n *     await saveToServer(data);\n *   },\n *   {\n *     delay: 500,\n *     onSuccess: () => console.log(''),\n *     onError: (err) => console.error('', err)\n *   }\n * );\n * </script>\n * ```\n */\nexport function useDebouncedSave(source, saveFn, options = {}) {\n    const { delay = 500, deep = true, onSuccess, onError } = options;\n    const isSaving = ref(false);\n    const lastError = ref(null);\n    watchDebounced(source, async (newValue) => {\n        isSaving.value = true;\n        lastError.value = null;\n        try {\n            await saveFn(newValue);\n            onSuccess?.();\n        }\n        catch (error) {\n            lastError.value = error;\n            console.error('[ACU] :', error);\n            onError?.(error);\n        }\n        finally {\n            isSaving.value = false;\n        }\n    }, { debounce: delay, deep });\n    return {\n        /**  */\n        isSaving,\n        /**  */\n        lastError,\n    };\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n * @example\n * ```vue\n * <script setup>\n * const position = useACUStorage('ball_position', { x: 100, y: 100 });\n * </script>\n * ```\n */\nexport function useACUStorage(key, defaultValue) {\n    return useStorage(`acu_${key}`, defaultValue);\n}\n// ============================================================\n// \n// ============================================================\n/**\n * \n *\n *  onClickOutside\n *\n * @example\n * ```vue\n * <script setup>\n * const menuRef = ref<HTMLElement>();\n * const visible = ref(true);\n *\n * useClickOutsideClose(menuRef, () => {\n *   visible.value = false;\n * }, {\n *   ignore: ['.acu-trigger-button']\n * });\n * </script>\n * ```\n */\nexport function useClickOutsideClose(target, callback, options) {\n    const { ignore = [], enabled = true } = options ?? {};\n    onClickOutside(target, event => {\n        // \n        const isEnabled = typeof enabled === 'boolean' ? enabled : enabled.value;\n        if (!isEnabled)\n            return;\n        // \n        const clickedElement = event.target;\n        const shouldIgnore = ignore.some(selector => clickedElement.closest(selector));\n        if (!shouldIgnore) {\n            callback();\n        }\n    }, { ignore });\n}\n// ============================================================\n//  VueUse \n// ============================================================\nexport { onClickOutside, useClipboard, useDebounceFn, useDraggable, useEventListener, useResizeObserver, useStorage, useTextSelection, useThrottleFn, watchDebounced, };\n","/**\n * Swipe  Composable\n *\n * Swipe \n *\n * \n */\n\nimport { onUnmounted, ref } from 'vue';\nimport { useConfigStore } from '../stores/useConfigStore';\nimport { useDataStore } from '../stores/useDataStore';\nimport { getCore } from '../utils/index';\nimport { toast } from './useToast';\n\n// ============================================================\n// \n// ============================================================\n\n/** Swipe  */\nexport interface SwipeEnhancementConfig {\n  /**  Swipe  */\n  clearTableOnSwipe: boolean;\n}\n\n/** SillyTavern  */\ninterface STChatMessage {\n  is_user?: boolean;\n  swipe_id?: number;\n  swipes?: string[];\n  [key: string]: unknown;\n}\n\n// ============================================================\n// \n// ============================================================\n\nconst DEFAULT_CONFIG: SwipeEnhancementConfig = {\n  clearTableOnSwipe: true,\n};\n\n// ============================================================\n// \n// ============================================================\n\n/**\n *  SillyTavern Context chat \n */\nfunction getSillyTavernContext(): any {\n  const win = window.parent || window;\n  const ST = (win as any).SillyTavern || (win as any).top?.SillyTavern;\n  if (ST && typeof ST.getContext === 'function') {\n    return ST.getContext();\n  }\n  return null;\n}\n\n/**\n *  touch \n */\nfunction isTouchOnLastMessage(target: Element | null): boolean {\n  if (!target) return false;\n\n  const parentDoc = window.parent.document;\n  const allMessages = parentDoc.querySelectorAll('#chat .mes');\n  if (allMessages.length === 0) return false;\n\n  const lastMessageEl = allMessages[allMessages.length - 1];\n  return lastMessageEl.contains(target);\n}\n\n// ============================================================\n// Composable \n// ============================================================\n\nexport function useSwipeEnhancement() {\n  const dataStore = useDataStore();\n  const configStore = useConfigStore();\n\n  // \n  const isProcessing = ref(false);\n  const config = ref<SwipeEnhancementConfig>({ ...DEFAULT_CONFIG });\n\n  // \n  const cleanupFns: Array<() => void> = [];\n\n  // \n  let touchStartX = 0;\n  let touchStartY = 0;\n  let isSwiping = false;\n  const SWIPE_THRESHOLD = 50;\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function updateConfig(newConfig: Partial<SwipeEnhancementConfig>) {\n    config.value = { ...config.value, ...newConfig };\n    console.info('[ACU Swipe] :', config.value);\n  }\n\n  /**\n   * \n   */\n  function getConfig(): SwipeEnhancementConfig {\n    return { ...config.value };\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  async function clearFloorData(floorIndex: number): Promise<boolean> {\n    try {\n      await dataStore.purgeFloorRange(floorIndex, floorIndex);\n      console.info(`[ACU Swipe]  ${floorIndex} `);\n      return true;\n    } catch (e) {\n      console.error('[ACU Swipe] :', e);\n      return false;\n    }\n  }\n\n  /**\n   * \n   */\n  function willTriggerNewGeneration(message: STChatMessage): boolean {\n    if (message.is_user) return false;\n\n    const currentSwipeId = message.swipe_id ?? 0;\n    const totalSwipes = message.swipes?.length ?? 1;\n\n    return currentSwipeId >= totalSwipes - 1;\n  }\n\n  /**\n   *  ACU \n   */\n  function hasACUData(message: STChatMessage): boolean {\n    //  TavernDB_ACU_IsolatedData \n    const isolatedData = (message as any).TavernDB_ACU_IsolatedData;\n    if (!isolatedData || typeof isolatedData !== 'object') {\n      return false;\n    }\n    // \n    return Object.keys(isolatedData).length > 0;\n  }\n\n  /**\n   *  Swipe  -  A\n   */\n  async function handleSwipeClearOnly(): Promise<void> {\n    console.info('[ACU Swipe] handleSwipeClearOnly ');\n\n    if (isProcessing.value) {\n      console.info('[ACU Swipe] ');\n      return;\n    }\n\n    const ctx = getSillyTavernContext();\n    if (!ctx?.chat?.length) {\n      console.warn('[ACU Swipe] SillyTavern context.chat ');\n      return;\n    }\n\n    const lastIndex = ctx.chat.length - 1;\n    const lastMessage = ctx.chat[lastIndex] as STChatMessage;\n\n    console.info('[ACU Swipe] :', {\n      index: lastIndex,\n      is_user: lastMessage.is_user,\n      swipe_id: lastMessage.swipe_id,\n      swipes_length: lastMessage.swipes?.length,\n    });\n\n    // \n    if (!willTriggerNewGeneration(lastMessage)) {\n      console.info('[ACU Swipe]  swipe');\n      return;\n    }\n\n    //  ACU \n    const hasData = hasACUData(lastMessage);\n    console.info('[ACU Swipe]  ACU :', hasData);\n\n    if (!hasData) {\n      console.info('[ACU Swipe]  ACU ');\n      return;\n    }\n\n    isProcessing.value = true;\n    try {\n      console.info('[ACU Swipe] ', lastIndex, '');\n      const success = await clearFloorData(lastIndex);\n      if (success) {\n        toast.info('Swipe: ');\n      }\n    } finally {\n      isProcessing.value = false;\n    }\n  }\n\n  /**\n   *  Swipe \n   *  configStore \n   */\n  async function handleSwipe(event?: Event): Promise<void> {\n    //  configStore \n    const clearEnabled = configStore.config.clearTableOnSwipe ?? config.value.clearTableOnSwipe;\n\n    console.info('[ACU Swipe] handleSwipe ', { clearEnabled });\n\n    if (!clearEnabled) {\n      console.info('[ACU Swipe] ');\n      return;\n    }\n\n    console.info('[ACU Swipe] ');\n    await handleSwipeClearOnly();\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  function initDesktopListener() {\n    const { $ } = getCore();\n    if (!$) {\n      console.warn('[ACU Swipe] jQuery ');\n      return;\n    }\n\n    const parentDoc = window.parent.document;\n\n    //  SillyTavern \n    const handler = (e: Event) => {\n      const target = e.target as HTMLElement;\n      //  swipe \n      if (!target.closest('.swipe_right')) return;\n\n      console.info('[ACU Swipe]  swipe_right ');\n      handleSwipe(e);\n    };\n\n    //  capture: true \n    parentDoc.addEventListener('click', handler, { capture: true });\n\n    // \n    cleanupFns.push(() => {\n      parentDoc.removeEventListener('click', handler, { capture: true });\n      console.info('[ACU Swipe] ');\n    });\n\n    console.info('[ACU Swipe]  ()');\n  }\n\n  /**\n   * \n   */\n  function initMobileListener() {\n    const parentDoc = window.parent.document;\n    const chatContainer = parentDoc.getElementById('chat');\n    if (!chatContainer) {\n      console.warn('[ACU Swipe]  #chat ');\n      return;\n    }\n\n    const handleTouchStart = (e: TouchEvent) => {\n      const touch = e.touches[0];\n      touchStartX = touch.clientX;\n      touchStartY = touch.clientY;\n      isSwiping = false;\n    };\n\n    const handleTouchMove = (e: TouchEvent) => {\n      if (isSwiping) return;\n\n      const touch = e.touches[0];\n      const deltaX = touch.clientX - touchStartX;\n      const deltaY = touch.clientY - touchStartY;\n\n      // \n      //  =  deltaX\n      if (Math.abs(deltaX) > Math.abs(deltaY) && deltaX < -SWIPE_THRESHOLD) {\n        isSwiping = true;\n\n        // \n        if (isTouchOnLastMessage(e.target as Element)) {\n          console.log('[ACU Swipe] ');\n          handleSwipe();\n        }\n      }\n    };\n\n    chatContainer.addEventListener('touchstart', handleTouchStart, { passive: true });\n    chatContainer.addEventListener('touchmove', handleTouchMove, { passive: true });\n\n    // \n    cleanupFns.push(() => {\n      chatContainer.removeEventListener('touchstart', handleTouchStart);\n      chatContainer.removeEventListener('touchmove', handleTouchMove);\n      console.info('[ACU Swipe] ');\n    });\n\n    console.info('[ACU Swipe] ');\n  }\n\n  /**\n   * \n   */\n  function init() {\n    initDesktopListener();\n    initMobileListener();\n    console.info('[ACU Swipe] Swipe ');\n  }\n\n  /**\n   * \n   */\n  function cleanup() {\n    cleanupFns.forEach(fn => fn());\n    cleanupFns.length = 0;\n    console.info('[ACU Swipe] Swipe ');\n  }\n\n  // \n  onUnmounted(() => {\n    cleanup();\n  });\n\n  // ============================================================\n  // \n  // ============================================================\n\n  return {\n    // \n    isProcessing,\n    config,\n\n    // \n    updateConfig,\n    getConfig,\n\n    // \n    clearFloorData,\n    handleSwipe,\n    handleSwipeClearOnly,\n\n    // \n    willTriggerNewGeneration,\n\n    // \n    init,\n    cleanup,\n  };\n}\n","/**\n * useAvatarManager -  Composable\n *\n * \n * - IndexedDB \n * - \n * -  URL\n * - \n * - \n */\n\nimport { ref } from 'vue';\n\n// ============================================================\n// \n// ============================================================\n\nexport interface AvatarRecord {\n  /**  */\n  name: string;\n  /**  Blob URL  */\n  blob?: Blob;\n  /**  URL */\n  url?: string;\n  /**  - X  (0-100) */\n  offsetX: number;\n  /**  - Y  (0-100) */\n  offsetY: number;\n  /**  -  (100-300) */\n  scale: number;\n  /**  */\n  aliases: string[];\n  /**\n   * @deprecated  acu_graph_config.labels\n   * \n   */\n  labelIndices?: number[];\n  /**  */\n  updatedAt: number;\n}\n\nexport interface AvatarStats {\n  count: number;\n  totalSizeBytes: number;\n  totalSizeMB: string;\n}\n\n// ============================================================\n// IndexedDB \n// ============================================================\n\nconst DB_NAME = 'acu_avatars';\nconst DB_VERSION = 1;\nconst STORE_NAME = 'avatars';\n\n// ============================================================\n// \n// ============================================================\n\nlet dbInstance: IDBDatabase | null = null;\nconst urlCache = new Map<string, string>(); //  ObjectURL \n\n// ============================================================\n// Composable \n// ============================================================\n\nexport function useAvatarManager() {\n  const isReady = ref(false);\n  const error = ref<string | null>(null);\n\n  // ============================================================\n  // IndexedDB \n  // ============================================================\n\n  async function initDB(): Promise<IDBDatabase> {\n    if (dbInstance) return dbInstance;\n\n    return new Promise((resolve, reject) => {\n      const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n      request.onerror = () => {\n        const errMsg = `[AvatarManager] : ${request.error?.message}`;\n        console.error(errMsg);\n        error.value = errMsg;\n        reject(request.error);\n      };\n\n      request.onsuccess = () => {\n        dbInstance = request.result;\n        isReady.value = true;\n        console.info('[AvatarManager] ');\n        resolve(dbInstance);\n      };\n\n      request.onupgradeneeded = event => {\n        const db = (event.target as IDBOpenDBRequest).result;\n\n        if (!db.objectStoreNames.contains(STORE_NAME)) {\n          // \n          db.createObjectStore(STORE_NAME, { keyPath: 'name' });\n          console.info('[AvatarManager] ');\n        }\n      };\n    });\n  }\n\n  // ============================================================\n  // CRUD \n  // ============================================================\n\n  /**\n   * \n   */\n  async function saveAvatar(record: AvatarRecord): Promise<void> {\n    const db = await initDB();\n\n    return new Promise((resolve, reject) => {\n      const tx = db.transaction(STORE_NAME, 'readwrite');\n      const store = tx.objectStore(STORE_NAME);\n\n      //  ObjectURL \n      if (urlCache.has(record.name)) {\n        URL.revokeObjectURL(urlCache.get(record.name)!);\n        urlCache.delete(record.name);\n      }\n\n      //  updatedAt \n      const data = {\n        ...record,\n        updatedAt: record.updatedAt || Date.now(),\n      };\n\n      const request = store.put(data);\n\n      request.onsuccess = () => {\n        console.info(`[AvatarManager] : ${record.name}`);\n        resolve();\n      };\n\n      request.onerror = () => {\n        console.error(`[AvatarManager] : ${request.error}`);\n        reject(request.error);\n      };\n    });\n  }\n\n  /**\n   * \n   */\n  async function getAvatar(name: string): Promise<AvatarRecord | null> {\n    if (!name) return null;\n\n    const db = await initDB();\n\n    return new Promise(resolve => {\n      const tx = db.transaction(STORE_NAME, 'readonly');\n      const store = tx.objectStore(STORE_NAME);\n      const request = store.get(name);\n\n      request.onsuccess = () => {\n        resolve(request.result || null);\n      };\n\n      request.onerror = () => {\n        console.error(`[AvatarManager] : ${request.error}`);\n        resolve(null);\n      };\n    });\n  }\n\n  /**\n   * \n   */\n  async function deleteAvatar(name: string): Promise<void> {\n    if (!name) return;\n\n    //  ObjectURL \n    if (urlCache.has(name)) {\n      URL.revokeObjectURL(urlCache.get(name)!);\n      urlCache.delete(name);\n    }\n\n    const db = await initDB();\n\n    return new Promise(resolve => {\n      const tx = db.transaction(STORE_NAME, 'readwrite');\n      const store = tx.objectStore(STORE_NAME);\n      const request = store.delete(name);\n\n      request.onsuccess = () => {\n        console.info(`[AvatarManager] : ${name}`);\n        resolve();\n      };\n\n      request.onerror = () => {\n        console.error(`[AvatarManager] : ${request.error}`);\n        resolve();\n      };\n    });\n  }\n\n  /**\n   * \n   */\n  async function deleteAvatars(names: string[]): Promise<void> {\n    if (!names.length) return;\n\n    //  ObjectURL \n    for (const name of names) {\n      if (urlCache.has(name)) {\n        URL.revokeObjectURL(urlCache.get(name)!);\n        urlCache.delete(name);\n      }\n    }\n\n    const db = await initDB();\n\n    return new Promise((resolve, reject) => {\n      const tx = db.transaction(STORE_NAME, 'readwrite');\n      const store = tx.objectStore(STORE_NAME);\n\n      let completed = 0;\n      const total = names.length;\n\n      for (const name of names) {\n        const request = store.delete(name);\n        request.onsuccess = () => {\n          completed++;\n          if (completed === total) {\n            console.info(`[AvatarManager] : ${total} `);\n            resolve();\n          }\n        };\n        request.onerror = () => {\n          console.error(`[AvatarManager] : ${name}`);\n          completed++;\n          if (completed === total) {\n            resolve();\n          }\n        };\n      }\n\n      tx.onerror = () => reject(tx.error);\n    });\n  }\n\n  /**\n   * \n   */\n  async function getAllAvatars(): Promise<AvatarRecord[]> {\n    const db = await initDB();\n\n    return new Promise(resolve => {\n      const tx = db.transaction(STORE_NAME, 'readonly');\n      const store = tx.objectStore(STORE_NAME);\n      const request = store.getAll();\n\n      request.onsuccess = () => {\n        resolve(request.result || []);\n      };\n\n      request.onerror = () => {\n        console.error(`[AvatarManager] : ${request.error}`);\n        resolve([]);\n      };\n    });\n  }\n\n  /**\n   * \n   */\n  async function hasAvatar(name: string): Promise<boolean> {\n    if (!name) return false;\n\n    const db = await initDB();\n\n    return new Promise(resolve => {\n      const tx = db.transaction(STORE_NAME, 'readonly');\n      const store = tx.objectStore(STORE_NAME);\n      const request = store.getKey(name);\n\n      request.onsuccess = () => resolve(request.result !== undefined);\n      request.onerror = () => resolve(false);\n    });\n  }\n\n  /**\n   * \n   */\n  async function getStats(): Promise<AvatarStats> {\n    const db = await initDB();\n\n    return new Promise(resolve => {\n      const tx = db.transaction(STORE_NAME, 'readonly');\n      const store = tx.objectStore(STORE_NAME);\n      const request = store.getAll();\n\n      request.onsuccess = () => {\n        const items = request.result || [];\n        const totalSizeBytes = items.reduce((sum, item) => {\n          return sum + (item.blob?.size || 0);\n        }, 0);\n\n        resolve({\n          count: items.length,\n          totalSizeBytes,\n          totalSizeMB: (totalSizeBytes / 1024 / 1024).toFixed(2),\n        });\n      };\n\n      request.onerror = () => {\n        resolve({ count: 0, totalSizeBytes: 0, totalSizeMB: '0.00' });\n      };\n    });\n  }\n\n  /**\n   * \n   */\n  async function clearAll(): Promise<void> {\n    //  ObjectURL \n    urlCache.forEach(url => URL.revokeObjectURL(url));\n    urlCache.clear();\n\n    const db = await initDB();\n\n    return new Promise(resolve => {\n      const tx = db.transaction(STORE_NAME, 'readwrite');\n      const store = tx.objectStore(STORE_NAME);\n      const request = store.clear();\n\n      request.onsuccess = () => {\n        console.info('[AvatarManager] ');\n        resolve();\n      };\n\n      request.onerror = () => {\n        console.error(`[AvatarManager] : ${request.error}`);\n        resolve();\n      };\n    });\n  }\n\n  // ============================================================\n  //  URL \n  // ============================================================\n\n  /**\n   *  URL API\n   *  Blob > URL > \n   */\n  async function getAvatarUrl(name: string): Promise<string | null> {\n    if (!name) return null;\n\n    // 1. \n    if (urlCache.has(name)) {\n      return urlCache.get(name)!;\n    }\n\n    // 2.  IndexedDB\n    const record = await getAvatar(name);\n\n    if (record) {\n      //  Blob \n      if (record.blob) {\n        const url = URL.createObjectURL(record.blob);\n        urlCache.set(name, url);\n        return url;\n      }\n\n      //  URL\n      if (record.url) {\n        return record.url;\n      }\n    }\n\n    // 3. \n    const primaryName = await resolvePrimaryName(name);\n    if (primaryName !== name) {\n      return getAvatarUrl(primaryName);\n    }\n\n    // 4. \n    if (isPlayerNode(name)) {\n      const stAvatar = getSillyTavernUserAvatar();\n      if (stAvatar) return stAvatar;\n    }\n\n    return null;\n  }\n\n  /**\n   * \n   */\n  async function getAvatarDisplayConfig(name: string): Promise<{ offsetX: number; offsetY: number; scale: number }> {\n    const record = await getAvatar(name);\n\n    if (record) {\n      return {\n        offsetX: record.offsetX ?? 50,\n        offsetY: record.offsetY ?? 50,\n        scale: record.scale ?? 150,\n      };\n    }\n\n    // \n    return { offsetX: 50, offsetY: 50, scale: 150 };\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   *  URL\n   *  persona \n   */\n  function getSillyTavernUserAvatar(): string | null {\n    try {\n      const w = window.parent || window;\n      const $ = (w as any).jQuery || (window as any).jQuery;\n\n      if ($) {\n        // 1.  persona \n        const $userMes = $('.mes[is_user=\"true\"]').last().find('.avatar img');\n        if ($userMes.length && $userMes.attr('src')) {\n          const src = $userMes.attr('src');\n          // \n          if (src && !src.includes('default') && !src.includes('placeholder')) {\n            return src;\n          }\n        }\n\n        // 2.  #user_avatar_block \n        const $avatar = $('#user_avatar_block img').first();\n        if ($avatar.length && $avatar.attr('src')) {\n          return $avatar.attr('src');\n        }\n      }\n\n      // 3.  SillyTavern API \n      const ST = (w as any).SillyTavern || (window as any).SillyTavern;\n      if (ST?.getContext) {\n        const ctx = ST.getContext();\n        if (ctx?.userAvatar) {\n          return ctx.userAvatar;\n        }\n      }\n    } catch (e) {\n      console.warn('[AvatarManager] getSillyTavernUserAvatar error:', e);\n    }\n\n    return null;\n  }\n\n  /**\n   *  URL\n   */\n  function getSillyTavernCharacterAvatar(): string | null {\n    try {\n      const w = window.parent || window;\n      const $ = (w as any).jQuery || (window as any).jQuery;\n\n      if ($) {\n        //  #avatar_img_holder img\n        const $avatar = $('#avatar_img_holder img').first();\n        if ($avatar.length && $avatar.attr('src')) {\n          return $avatar.attr('src');\n        }\n\n        //  AI \n        const $aiMes = $('.mes:not([is_user=\"true\"])').last().find('.avatar img');\n        if ($aiMes.length && $aiMes.attr('src')) {\n          return $aiMes.attr('src');\n        }\n      }\n\n      //  SillyTavern API \n      const ST = (w as any).SillyTavern || (window as any).SillyTavern;\n      if (ST?.getContext) {\n        const ctx = ST.getContext();\n        if (ctx?.characterAvatar) {\n          return ctx.characterAvatar;\n        }\n      }\n    } catch (e) {\n      console.warn('[AvatarManager] getSillyTavernCharacterAvatar error:', e);\n    }\n\n    return null;\n  }\n\n  /**\n   * \n   */\n  function getPlayerNameFromTable(): string | null {\n    try {\n      const w = window.parent || window;\n      const api = (w as any).AutoCardUpdaterAPI;\n\n      if (api?.exportTableAsJson) {\n        const rawData = api.exportTableAsJson();\n        for (const key in rawData) {\n          const sheet = rawData[key];\n          if (sheet?.name?.includes('') && sheet.content?.[1]?.[1]) {\n            return sheet.content[1][1];\n          }\n        }\n      }\n    } catch (e) {\n      console.warn('[AvatarManager] getPlayerNameFromTable error:', e);\n    }\n\n    return null;\n  }\n\n  /**\n   * \n   */\n  function isPlayerNode(name: string): boolean {\n    if (!name) return false;\n\n    // \n    const playerPatterns = ['<user>', '{{user}}', '', 'player', 'protagonist'];\n    const lowerName = name.toLowerCase();\n\n    for (const pattern of playerPatterns) {\n      if (lowerName === pattern.toLowerCase()) return true;\n    }\n\n    // \n    const playerName = getPlayerNameFromTable();\n    if (playerName && name === playerName) return true;\n\n    return false;\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * \n   */\n  async function resolvePrimaryName(name: string): Promise<string> {\n    if (!name) return name;\n\n    const all = await getAllAvatars();\n\n    for (const record of all) {\n      if (record.aliases?.includes(name)) {\n        return record.name;\n      }\n    }\n\n    return name;\n  }\n\n  /**\n   * \n   * @returns Map<, >\n   */\n  async function getAliasMap(): Promise<Map<string, string>> {\n    const all = await getAllAvatars();\n    const map = new Map<string, string>();\n\n    for (const record of all) {\n      if (record.aliases?.length) {\n        for (const alias of record.aliases) {\n          map.set(alias, record.name);\n        }\n      }\n    }\n\n    return map;\n  }\n\n  /**\n   * \n   */\n  async function getAliases(name: string): Promise<string[]> {\n    const record = await getAvatar(name);\n    return record?.aliases || [];\n  }\n\n  /**\n   * \n   */\n  async function setAliases(name: string, aliases: string[]): Promise<void> {\n    let record = await getAvatar(name);\n\n    if (!record) {\n      // \n      record = {\n        name,\n        offsetX: 50,\n        offsetY: 50,\n        scale: 150,\n        aliases,\n        updatedAt: Date.now(),\n      };\n    } else {\n      record = { ...record, aliases, updatedAt: Date.now() };\n    }\n\n    await saveAvatar(record);\n  }\n\n  /**\n   * \n   */\n  async function addAlias(name: string, alias: string): Promise<void> {\n    const record = await getAvatar(name);\n    if (!record) return;\n\n    const aliases = record.aliases || [];\n    if (!aliases.includes(alias)) {\n      aliases.push(alias);\n      await saveAvatar({ ...record, aliases, updatedAt: Date.now() });\n    }\n  }\n\n  /**\n   * \n   */\n  async function removeAlias(name: string, alias: string): Promise<void> {\n    const record = await getAvatar(name);\n    if (!record) return;\n\n    const aliases = (record.aliases || []).filter(a => a !== alias);\n    await saveAvatar({ ...record, aliases, updatedAt: Date.now() });\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   * @deprecated  acu_graph_config.labels\n   * \n   */\n  async function getDisplayLabel(name: string): Promise<string> {\n    //  IndexedDB \n    // \n    return name;\n  }\n\n  /**\n   * @deprecated  acu_graph_config.labels\n   * \n   */\n  async function setDisplayLabel(_name: string, _labelIndices: number[]): Promise<void> {\n    console.warn('[AvatarManager] setDisplayLabel ');\n    //  IndexedDB\n  }\n\n  /**\n   * \n   */\n  function getDisplayChars(name: string): string[] {\n    if (!name) return [];\n    //  Intl.Segmenter  Unicode  emoji\n    if (typeof Intl !== 'undefined' && Intl.Segmenter) {\n      const segmenter = new Intl.Segmenter('zh', { granularity: 'grapheme' });\n      return Array.from(segmenter.segment(name), s => s.segment);\n    }\n    // Fallback: \n    return [...name];\n  }\n\n  // ============================================================\n  // \n  // ============================================================\n\n  /**\n   *  ObjectURL \n   */\n  function cleanup(): void {\n    urlCache.forEach(url => URL.revokeObjectURL(url));\n    urlCache.clear();\n    console.info('[AvatarManager]  ObjectURL ');\n  }\n\n  // ============================================================\n  //  API\n  // ============================================================\n\n  return {\n    // \n    isReady,\n    error,\n\n    // \n    initDB,\n\n    // CRUD\n    saveAvatar,\n    getAvatar,\n    deleteAvatar,\n    deleteAvatars,\n    getAllAvatars,\n    hasAvatar,\n    getStats,\n    clearAll,\n\n    // \n    getAvatarUrl,\n    getAvatarDisplayConfig,\n\n    // \n    getSillyTavernUserAvatar,\n    getSillyTavernCharacterAvatar,\n    getPlayerNameFromTable,\n    isPlayerNode,\n\n    // \n    resolvePrimaryName,\n    addAlias,\n    removeAlias,\n    getAliasMap,\n    getAliases,\n    setAliases,\n\n    // \n    getDisplayLabel,\n    setDisplayLabel,\n    getDisplayChars,\n\n    // \n    cleanup,\n  };\n}\n\n// \nlet instance: ReturnType<typeof useAvatarManager> | null = null;\n\nexport function getAvatarManager() {\n  if (!instance) {\n    instance = useAvatarManager();\n  }\n  return instance;\n}\n","/**\n *  Composable\n * \n *\n * \n * - : api.exportTableAsJson()\n * - : api.getTableTemplate() ( updateConfig)\n * - : extensionSettings.__userscripts[shujuku_*]  localStorage \n * - : chat[].TavernDB_ACU_IsolatedData\n *\n * \n * - 9.5: localStorage shujuku_*_allSettings_v2\n * - 10.5+: extensionSettings shujuku_v*__userscript_settings_v1\n * - 12.1: extensionSettings shujuku_v104__userscript_settings_v1\n */\n\nimport { computed, ref } from 'vue';\nimport { getCore } from '../utils';\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n */\nexport interface TableUpdateStatus {\n  /**  key ( sheet_0) */\n  sheetKey: string;\n  /**  */\n  name: string;\n  /**  (-1=, 0=, >0=) */\n  updateFrequency: number;\n  /**  */\n  effectiveFrequency: number;\n  /**  AI  (10 = ) */\n  lastUpdatedAiFloor: number;\n  /**  chat  (0-1 = ) */\n  lastUpdatedChatIndex: number;\n  /**  AI  */\n  unrecordedFloors: number;\n  /**  AI  */\n  totalAiFloors: number;\n  /** chat.length */\n  totalFloors: number;\n  /**  */\n  hasHistory: boolean;\n  /** / */\n  isSummaryOrOutline: boolean;\n  /**  */\n  orderNo: number;\n}\n\n/**\n *  localStorage \n */\nexport interface DbGlobalSettings {\n  /**  */\n  dataIsolationEnabled: boolean;\n  /**  */\n  dataIsolationCode: string;\n  /**  */\n  autoUpdateFrequency: number;\n  /**  */\n  skipUpdateFloors: number;\n}\n\n/**\n * \n */\ninterface ChatMessage {\n  is_user?: boolean;\n  mes?: string;\n  TavernDB_ACU_IsolatedData?: Record<string, IsolatedDataEntry>;\n  TavernDB_ACU_Identity?: string;\n  TavernDB_ACU_ModifiedKeys?: string[];\n  TavernDB_ACU_UpdateGroupKeys?: string[];\n  TavernDB_ACU_IndependentData?: Record<string, unknown>;\n  TavernDB_ACU_Data?: Record<string, unknown>;\n  TavernDB_ACU_SummaryData?: Record<string, unknown>;\n  [key: string]: unknown;\n}\n\n/**\n * \n */\ninterface IsolatedDataEntry {\n  independentData?: Record<string, unknown>;\n  modifiedKeys?: string[];\n  updateGroupKeys?: string[];\n}\n\n/**\n * \n */\ninterface LastUpdateResult {\n  /** AI 1 */\n  aiFloor: number;\n  /** chat 0 */\n  chatIndex: number;\n  /**  */\n  hasHistory: boolean;\n}\n\n// ============================================================\n// \n// ============================================================\n\n/**\n * \n * @param key  \"shujuku_v104__userscript_settings_v1\"\n * @returns  104 0\n */\nfunction extractVersionNumber(key: string): number {\n  const match = key.match(/shujuku_v?(\\d+)/i);\n  return match ? parseInt(match[1], 10) : 0;\n}\n\n/**\n * \n * @param keys \n * @param pattern \n * @returns  null\n */\nfunction findHighestVersionKey(keys: string[], pattern: RegExp): string | null {\n  const matchedKeys = keys.filter(k => pattern.test(k));\n  if (matchedKeys.length === 0) return null;\n\n  // \n  matchedKeys.sort((a, b) => extractVersionNumber(b) - extractVersionNumber(a));\n  return matchedKeys[0];\n}\n\n/**\n * \n */\ninterface DbConfigCache {\n  versionPrefix: string; //  \"shujuku_v104\"\n  isolationCode: string;\n  userscripts: Record<string, unknown>;\n}\nlet dbConfigCache: DbConfigCache | null = null;\n\n/**\n * \n * 9.5 / 10.5+ / 12.1\n *  \n */\nfunction getDbGlobalSettings(): DbGlobalSettings {\n  const w = window.parent || window;\n  const defaultSettings: DbGlobalSettings = {\n    dataIsolationEnabled: false,\n    dataIsolationCode: '',\n    autoUpdateFrequency: 2,\n    skipUpdateFloors: 0,\n  };\n\n  try {\n    // []  SillyTavern extensionSettings  (10.5+)\n    const context = (\n      w as unknown as {\n        SillyTavern?: { getContext?: () => { extensionSettings?: { __userscripts?: Record<string, unknown> } } };\n      }\n    ).SillyTavern?.getContext?.();\n    const userscripts = context?.extensionSettings?.__userscripts;\n\n    if (userscripts) {\n      const allKeys = Object.keys(userscripts);\n\n      //  \n      // : shujuku_v__userscript_settings_v1 (10.5+/12.1)\n      const settingsKey = findHighestVersionKey(allKeys, /shujuku_v\\d+__userscript_settings_v1/i);\n\n      if (settingsKey && userscripts[settingsKey]) {\n        const raw = userscripts[settingsKey];\n        const settingsContainer = typeof raw === 'string' ? JSON.parse(raw) : (raw as Record<string, unknown>);\n\n        //  shujuku_v104\n        const versionPrefix = settingsKey.replace(/__userscript_settings_v1$/i, '');\n\n        //  globalMeta \n        const globalMetaKey = `${versionPrefix}_globalMeta_v1`;\n        let activeIsolationCode = '';\n        if (settingsContainer[globalMetaKey]) {\n          const metaRaw = settingsContainer[globalMetaKey];\n          const meta = typeof metaRaw === 'string' ? JSON.parse(metaRaw) : (metaRaw as Record<string, unknown>);\n          activeIsolationCode = String(meta.activeIsolationCode || '');\n        }\n\n        //  profile \n        const profileSettingsKey = `${versionPrefix}_profile_v1__${encodeURIComponent(activeIsolationCode) || '__default__'}__settings`;\n        let profileSettings: Record<string, unknown> = {};\n\n        if (settingsContainer[profileSettingsKey]) {\n          const profRaw = settingsContainer[profileSettingsKey];\n          profileSettings = typeof profRaw === 'string' ? JSON.parse(profRaw) : (profRaw as Record<string, unknown>);\n        }\n\n        // \n        dbConfigCache = {\n          versionPrefix,\n          isolationCode: activeIsolationCode,\n          userscripts: settingsContainer,\n        };\n\n        //   activeIsolationCode \n        //  profileSettings \n        const isIsolationEnabled = activeIsolationCode !== '';\n\n        return {\n          dataIsolationEnabled: isIsolationEnabled,\n          dataIsolationCode: activeIsolationCode,\n          autoUpdateFrequency: Number(profileSettings.autoUpdateFrequency) || 2,\n          skipUpdateFloors: Number(profileSettings.skipUpdateFloors) || 0,\n        };\n      }\n    }\n\n    // []  localStorage  9.5\n    const localStorage = (w as Window & { localStorage: Storage }).localStorage;\n    if (localStorage) {\n      const keys = Object.keys(localStorage);\n      //  localStorage \n      const localKey = findHighestVersionKey(keys, /shujuku.*settings/i);\n\n      if (localKey) {\n        const settings = JSON.parse(localStorage.getItem(localKey) || '{}');\n        return {\n          dataIsolationEnabled: !!settings.dataIsolationEnabled,\n          dataIsolationCode: String(settings.dataIsolationCode || ''),\n          autoUpdateFrequency: Number(settings.autoUpdateFrequency) || 2,\n          skipUpdateFloors: Number(settings.skipUpdateFloors) || 0,\n        };\n      }\n    }\n  } catch (e) {\n    console.warn('[ACU] :', e);\n  }\n\n  dbConfigCache = null;\n  return defaultSettings;\n}\n\n/**\n *  extensionSettings \n *  10.5  getTableTemplate() API \n * @returns  null\n */\nfunction getTemplateFromSettings(): Record<\n  string,\n  {\n    name?: string;\n    updateConfig?: {\n      updateFrequency?: number;\n      contextDepth?: number;\n      batchSize?: number;\n      skipFloors?: number;\n    };\n    orderNo?: number;\n  }\n> | null {\n  if (!dbConfigCache) return null;\n\n  try {\n    const { versionPrefix, isolationCode, userscripts } = dbConfigCache;\n\n    //  profile \n    const profileTemplateKey = `${versionPrefix}_profile_v1__${encodeURIComponent(isolationCode) || '__default__'}__template`;\n\n    if (userscripts[profileTemplateKey]) {\n      const templateRaw = userscripts[profileTemplateKey];\n      const template =\n        typeof templateRaw === 'string' ? JSON.parse(templateRaw) : (templateRaw as Record<string, unknown>);\n      return template as Record<\n        string,\n        {\n          name?: string;\n          updateConfig?: {\n            updateFrequency?: number;\n            contextDepth?: number;\n            batchSize?: number;\n            skipFloors?: number;\n          };\n          orderNo?: number;\n        }\n      >;\n    }\n  } catch (e) {\n    console.warn('[ACU] :', e);\n  }\n\n  return null;\n}\n\n/**\n * /\n */\nfunction checkIsSummaryOrOutline(name: string): boolean {\n  const lowerName = name.toLowerCase();\n  return (\n    name.includes('') || name.includes('') || lowerName.includes('summary') || lowerName.includes('outline')\n  );\n}\n\n/**\n * \n * : .kilocode//10.5index .js  6882-6950 \n *\n * @param sheetKey  key\n * @param chat \n * @param settings \n * @param isSummary /\n * @returns \n */\nfunction getLastUpdatedPosition(\n  sheetKey: string,\n  chat: ChatMessage[],\n  settings: DbGlobalSettings,\n  isSummary: boolean,\n): LastUpdateResult {\n  const currentIsolationKey = settings.dataIsolationEnabled ? settings.dataIsolationCode : '';\n\n  // \n  for (let i = chat.length - 1; i >= 0; i--) {\n    const msg = chat[i];\n    if (msg.is_user) continue;\n\n    let wasUpdated = false;\n\n    // [1]  TavernDB_ACU_IsolatedData\n    const isolatedData = msg.TavernDB_ACU_IsolatedData;\n    if (isolatedData && isolatedData[currentIsolationKey]) {\n      const tagData = isolatedData[currentIsolationKey];\n      const updateGroupKeys = tagData.updateGroupKeys || [];\n      const modifiedKeys = tagData.modifiedKeys || [];\n      const independentData = tagData.independentData || {};\n\n      if (updateGroupKeys.length > 0 && modifiedKeys.length > 0) {\n        wasUpdated = updateGroupKeys.includes(sheetKey);\n      } else if (modifiedKeys.includes(sheetKey)) {\n        wasUpdated = true;\n      } else if (independentData[sheetKey]) {\n        wasUpdated = true;\n      }\n    }\n\n    // [2] \n    if (!wasUpdated) {\n      const msgIdentity = msg.TavernDB_ACU_Identity;\n      let isLegacyMatch = false;\n\n      if (settings.dataIsolationEnabled) {\n        isLegacyMatch = msgIdentity === settings.dataIsolationCode;\n      } else {\n        // \n        isLegacyMatch = !msgIdentity;\n      }\n\n      if (isLegacyMatch) {\n        const modifiedKeys = msg.TavernDB_ACU_ModifiedKeys || [];\n        const updateGroupKeys = msg.TavernDB_ACU_UpdateGroupKeys || [];\n\n        if (updateGroupKeys.length > 0 && modifiedKeys.length > 0) {\n          wasUpdated = updateGroupKeys.includes(sheetKey);\n        } else if (modifiedKeys.includes(sheetKey)) {\n          wasUpdated = true;\n        } else if (\n          //  ModifiedKeys \n          msg.TavernDB_ACU_IndependentData &&\n          (msg.TavernDB_ACU_IndependentData as Record<string, unknown>)[sheetKey]\n        ) {\n          wasUpdated = true;\n        } else if (\n          isSummary &&\n          msg.TavernDB_ACU_SummaryData &&\n          (msg.TavernDB_ACU_SummaryData as Record<string, unknown>)[sheetKey]\n        ) {\n          wasUpdated = true;\n        } else if (\n          !isSummary &&\n          msg.TavernDB_ACU_Data &&\n          (msg.TavernDB_ACU_Data as Record<string, unknown>)[sheetKey]\n        ) {\n          wasUpdated = true;\n        }\n      }\n    }\n\n    if (wasUpdated) {\n      //  AI 1\n      const aiFloor = chat.slice(0, i + 1).filter(m => !m.is_user).length;\n      return {\n        aiFloor,\n        chatIndex: i,\n        hasHistory: true,\n      };\n    }\n  }\n\n  return {\n    aiFloor: 0,\n    chatIndex: -1,\n    hasHistory: false,\n  };\n}\n\n// ============================================================\n// Composable\n// ============================================================\n\n/**\n *  Composable\n * \n */\nexport function useTableUpdateStatus() {\n  /**  */\n  const statusList = ref<TableUpdateStatus[]>([]);\n\n  /**  */\n  const isLoading = ref(false);\n\n  /**  */\n  const lastRefreshTime = ref<Date | null>(null);\n\n  /**  AI  */\n  const currentTotalAiFloors = ref(0);\n\n  /**  */\n  const currentTotalFloors = ref(0);\n\n  /**\n   * \n   * @returns \n   */\n  async function refresh(): Promise<TableUpdateStatus[]> {\n    isLoading.value = true;\n\n    try {\n      const api = getCore().getDB();\n      const tableData = api?.exportTableAsJson?.();\n\n      if (!tableData) {\n        console.warn('[ACU] ');\n        statusList.value = [];\n        return [];\n      }\n\n      //  dbConfigCache\n      const settings = getDbGlobalSettings();\n\n      //   API  extensionSettings\n      // 10.5  getTableTemplate() API extensionSettings \n      let template: Record<\n        string,\n        {\n          name?: string;\n          updateConfig?: {\n            updateFrequency?: number;\n            contextDepth?: number;\n            batchSize?: number;\n            skipFloors?: number;\n          };\n          orderNo?: number;\n        }\n      > | null = null;\n\n      if (typeof api?.getTableTemplate === 'function') {\n        // 12.1+  API\n        template = api.getTableTemplate() as typeof template;\n      } else {\n        // 10.5  extensionSettings \n        template = getTemplateFromSettings();\n      }\n\n      console.info(\n        '[ACU] :',\n        template ? (typeof api?.getTableTemplate === 'function' ? 'API' : 'extensionSettings') : '',\n      );\n\n      // \n      const w = window.parent || window;\n      const chat: ChatMessage[] =\n        (w as unknown as { SillyTavern?: { getContext?: () => { chat?: ChatMessage[] } } }).SillyTavern?.getContext?.()\n          ?.chat || [];\n\n      // \n      const totalFloors = chat.length;\n      const totalAiFloors = chat.filter(m => !m.is_user).length;\n      currentTotalFloors.value = totalFloors;\n      currentTotalAiFloors.value = totalAiFloors;\n\n      const results: TableUpdateStatus[] = [];\n\n      //  key \n      const sheetKeys = Object.keys(tableData)\n        .filter(k => k.startsWith('sheet_'))\n        .sort((a, b) => {\n          //  orderNo _acu_orderNo\n          const orderA =\n            template?.[a]?.orderNo ?? (tableData[a] as { _acu_orderNo?: number })?._acu_orderNo ?? Infinity;\n          const orderB =\n            template?.[b]?.orderNo ?? (tableData[b] as { _acu_orderNo?: number })?._acu_orderNo ?? Infinity;\n          return orderA - orderB;\n        });\n\n      // \n      for (const sheetKey of sheetKeys) {\n        const tableDataEntry = tableData[sheetKey] as {\n          name?: string;\n          _acu_orderNo?: number;\n        };\n        //  \n        const templateEntry = template?.[sheetKey];\n\n        //  > \n        const name = templateEntry?.name || tableDataEntry?.name;\n        if (!name) continue;\n\n        //   updateConfig\n        const updateConfig = templateEntry?.updateConfig || {};\n        const rawFreq = updateConfig.updateFrequency ?? -1;\n\n        // \n        // -1 = \n        // 0 = \n        // >0 = \n        const effectiveFreq = rawFreq === -1 ? settings.autoUpdateFrequency : rawFreq;\n\n        const isSummaryOrOutline = checkIsSummaryOrOutline(name);\n\n        // \n        const { aiFloor, chatIndex, hasHistory } = getLastUpdatedPosition(sheetKey, chat, settings, isSummaryOrOutline);\n\n        //  AI \n        const unrecordedFloors = hasHistory ? totalAiFloors - aiFloor : totalAiFloors;\n\n        results.push({\n          sheetKey,\n          name,\n          updateFrequency: rawFreq,\n          effectiveFrequency: effectiveFreq,\n          lastUpdatedAiFloor: aiFloor,\n          lastUpdatedChatIndex: chatIndex,\n          unrecordedFloors,\n          totalAiFloors,\n          totalFloors,\n          hasHistory,\n          isSummaryOrOutline,\n          orderNo: templateEntry?.orderNo ?? tableDataEntry?._acu_orderNo ?? 999,\n        });\n      }\n\n      statusList.value = results;\n      lastRefreshTime.value = new Date();\n\n      console.info(\n        `[ACU]  ${results.length} : ${settings.autoUpdateFrequency}`,\n      );\n      return results;\n    } catch (e) {\n      console.error('[ACU] :', e);\n      statusList.value = [];\n      return [];\n    } finally {\n      isLoading.value = false;\n    }\n  }\n\n  /**\n   * \n   * @param item \n   * @returns  \"AI/\"  \"\"\n   */\n  function formatLastUpdate(item: TableUpdateStatus): string {\n    if (!item.hasHistory) {\n      return '';\n    }\n    return `${item.lastUpdatedAiFloor}/${item.lastUpdatedChatIndex}`;\n  }\n\n  /**\n   * \n   * @param item \n   * @returns CSS \n   */\n  function getUnrecordedClass(item: TableUpdateStatus): string {\n    if (!item.hasHistory) return '';\n    if (item.effectiveFrequency === 0) return ''; // \n\n    const ratio = item.unrecordedFloors / item.effectiveFrequency;\n    if (ratio >= 2) return 'danger'; // 2\n    if (ratio >= 1) return 'warning'; // \n    return 'success'; // \n  }\n\n  return {\n    /**  */\n    statusList: computed(() => statusList.value),\n    /**  */\n    isLoading: computed(() => isLoading.value),\n    /**  */\n    lastRefreshTime: computed(() => lastRefreshTime.value),\n    /**  AI  */\n    currentTotalAiFloors: computed(() => currentTotalAiFloors.value),\n    /**  */\n    currentTotalFloors: computed(() => currentTotalFloors.value),\n    /**  */\n    refresh,\n    /**  */\n    formatLastUpdate,\n    /**  */\n    getUnrecordedClass,\n  };\n}\n","/**\n *  Store\n * \n */\n\nimport { defineStore } from 'pinia';\nimport { computed, ref } from 'vue';\nimport type { DashboardConfig, DashboardWidgetConfig, WidgetActionId } from '../types';\nimport { TABLE_KEYWORD_RULES, WIDGET_TEMPLATES } from '../types';\nimport { getTableData, processJsonData } from '../utils';\n\n/**  */\nexport const DEFAULT_DASHBOARD_CONFIG: DashboardConfig = {\n  widgets: [],\n  layout: 'grid',\n  columns: 2,\n  showStats: true,\n};\n\n/**  ID */\nfunction generateId(): string {\n  return `widget_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nexport const useDashboardStore = defineStore('acu-dashboard', () => {\n  // ============================================================\n  // \n  // ============================================================\n\n  /**  */\n  const config = ref<DashboardConfig>({ ...DEFAULT_DASHBOARD_CONFIG });\n\n  /**  */\n  const isInitialized = ref(false);\n\n  // ============================================================\n  // Getters\n  // ============================================================\n\n  /**  order  */\n  const enabledWidgets = computed(() => config.value.widgets.filter(w => w.enabled).sort((a, b) => a.order - b.order));\n\n  /**  order  */\n  const allWidgets = computed(() => [...config.value.widgets].sort((a, b) => a.order - b.order));\n\n  /**  */\n  const showStats = computed(() => config.value.showStats);\n\n  /**  */\n  const columns = computed(() => config.value.columns);\n\n  /**  */\n  const layout = computed(() => config.value.layout);\n\n  // ============================================================\n  // Actions - \n  // ============================================================\n\n  /**\n   * \n   * \n   * \n   */\n  async function loadConfig(): Promise<void> {\n    try {\n      const vars = getVariables({ type: 'chat' });\n      if (vars && vars.acu_dashboard_config) {\n        config.value = {\n          ...DEFAULT_DASHBOARD_CONFIG,\n          ...vars.acu_dashboard_config,\n        };\n      }\n\n      //  widgets \n      if (config.value.widgets.length === 0) {\n        await initDefaultWidgets();\n      }\n\n      isInitialized.value = true;\n      console.log('[ACU Dashboard]  ():', config.value);\n    } catch (error) {\n      console.warn('[ACU Dashboard] :', error);\n      config.value = { ...DEFAULT_DASHBOARD_CONFIG };\n      isInitialized.value = true;\n    }\n  }\n\n  /**\n   * \n   *   /NPC    \n   */\n  async function initDefaultWidgets(): Promise<void> {\n    console.log('[ACU Dashboard] ...');\n\n    // 1. \"\"\n    addSpecialWidget('updateStatus');\n\n    // 2. \n    const rawData = getTableData();\n    if (!rawData) {\n      console.log('[ACU Dashboard] ');\n      saveConfig();\n      return;\n    }\n\n    const tables = processJsonData(rawData);\n    if (!tables) {\n      console.log('[ACU Dashboard] ');\n      saveConfig();\n      return;\n    }\n\n    //   \n    const matchRules = [\n      { keywords: ['', 'npc', 'NPC', '', '', '', ''], templateKey: 'npc' },\n      { keywords: ['', 'task', 'Task', 'quest', 'Quest', ''], templateKey: 'task' },\n      { keywords: ['', '', 'item', 'Item', '', '', ''], templateKey: 'item' },\n    ];\n\n    // 3. \n    for (const [tableName, tableInfo] of Object.entries(tables)) {\n      const tableId = tableInfo.key;\n      const lowerName = tableName.toLowerCase();\n\n      for (const rule of matchRules) {\n        if (rule.keywords.some(k => lowerName.includes(k.toLowerCase()))) {\n          // \n          if (!config.value.widgets.some(w => w.tableId === tableId)) {\n            addWidget(tableId, tableName, rule.templateKey);\n            console.log(`[ACU Dashboard] : ${tableName} (: ${rule.templateKey})`);\n          }\n          break; // \n        }\n      }\n    }\n\n    saveConfig();\n    console.log('[ACU Dashboard] ');\n  }\n\n  /**\n   * \n   * \n   */\n  async function saveConfig(): Promise<void> {\n    try {\n      const currentVars = getVariables({ type: 'chat' }) || {};\n      replaceVariables(\n        {\n          ...currentVars,\n          acu_dashboard_config: config.value,\n        },\n        { type: 'chat' },\n      );\n      console.log('[ACU Dashboard]  ()');\n    } catch (error) {\n      console.error('[ACU Dashboard] :', error);\n    }\n  }\n\n  /**\n   * \n   */\n  function updateConfig(updates: Partial<DashboardConfig>): void {\n    config.value = { ...config.value, ...updates };\n    saveConfig();\n  }\n\n  // ============================================================\n  // Actions - \n  // ============================================================\n\n  /**\n   * \n   * @param tableId  ID\n   * @param tableName \n   * @param templateKey  key ()\n   */\n  function addWidget(tableId: string, tableName?: string, templateKey?: string): DashboardWidgetConfig {\n    // \n    let template = templateKey ? WIDGET_TEMPLATES[templateKey] : undefined;\n\n    // \n    const searchText = tableName || tableId;\n    if (!template) {\n      for (const [key, keywords] of Object.entries(TABLE_KEYWORD_RULES)) {\n        if (keywords.some(k => searchText.toLowerCase().includes(k.toLowerCase()))) {\n          template = WIDGET_TEMPLATES[key];\n          break;\n        }\n      }\n    }\n\n    //  actions\n    let defaultActions = template?.actions || ['goToTable'];\n\n    // \"\"\"npc\"() relationshipGraph\n    const lowerSearchText = searchText.toLowerCase();\n    if (lowerSearchText.includes('') || lowerSearchText.includes('npc')) {\n      if (!defaultActions.includes('relationshipGraph')) {\n        defaultActions = [...defaultActions, 'relationshipGraph'];\n      }\n    }\n\n    const newWidget: DashboardWidgetConfig = {\n      id: generateId(),\n      type: 'table',\n      tableId,\n      //  >  > ID\n      title: template?.title || tableName || tableId,\n      icon: template?.icon || 'fa-table',\n      displayColumns: template?.displayColumns || [],\n      maxRows: template?.maxRows || 8,\n      actions: defaultActions,\n      order: config.value.widgets.length,\n      enabled: true,\n      colSpan: template?.colSpan || 1,\n      displayStyle: template?.displayStyle || 'list',\n    };\n\n    config.value.widgets.push(newWidget);\n    saveConfig();\n    return newWidget;\n  }\n\n  /**\n   * \n   * @param widgetId  ID\n   */\n  function removeWidget(widgetId: string): void {\n    const index = config.value.widgets.findIndex(w => w.id === widgetId);\n    if (index !== -1) {\n      config.value.widgets.splice(index, 1);\n      // \n      config.value.widgets.forEach((w, i) => {\n        w.order = i;\n      });\n      saveConfig();\n    }\n  }\n\n  /**\n   * \n   * @param widgetId  ID\n   * @param updates \n   */\n  function updateWidget(widgetId: string, updates: Partial<DashboardWidgetConfig>): void {\n    const widget = config.value.widgets.find(w => w.id === widgetId);\n    if (widget) {\n      Object.assign(widget, updates);\n      saveConfig();\n    }\n  }\n\n  /**\n   * \n   * @param widgetId  ID\n   */\n  function toggleWidget(widgetId: string): void {\n    const widget = config.value.widgets.find(w => w.id === widgetId);\n    if (widget) {\n      widget.enabled = !widget.enabled;\n      saveConfig();\n    }\n  }\n\n  /**\n   * \n   * @param widgetId  ID\n   * @param newOrder \n   */\n  function moveWidget(widgetId: string, newOrder: number): void {\n    const widgets = [...config.value.widgets];\n    const currentIndex = widgets.findIndex(w => w.id === widgetId);\n    if (currentIndex === -1) return;\n\n    const [widget] = widgets.splice(currentIndex, 1);\n    widgets.splice(newOrder, 0, widget);\n\n    //  order\n    widgets.forEach((w, i) => {\n      w.order = i;\n    });\n\n    config.value.widgets = widgets;\n    saveConfig();\n  }\n\n  /**\n   * \n   * @param widgetId  ID\n   * @param actions \n   */\n  function setWidgetActions(widgetId: string, actions: WidgetActionId[]): void {\n    updateWidget(widgetId, { actions });\n  }\n\n  /**\n   * \n   */\n  function resetConfig(): void {\n    config.value = { ...DEFAULT_DASHBOARD_CONFIG };\n    saveConfig();\n  }\n\n  /**\n   *  ID \n   * @param tableId  ID\n   */\n  function findWidgetByTableId(tableId: string): DashboardWidgetConfig | undefined {\n    return config.value.widgets.find(w => w.tableId === tableId);\n  }\n\n  /**\n   * \n   * @param tableId  ID\n   */\n  function hasWidget(tableId: string): boolean {\n    return config.value.widgets.some(w => w.tableId === tableId);\n  }\n\n  /**\n   * \n   * @param widgetType \n   */\n  function hasSpecialWidget(widgetType: 'updateStatus' | 'optionsPanel'): boolean {\n    return config.value.widgets.some(w => w.type === widgetType);\n  }\n\n  /**\n   * \n   * @param widgetType \n   */\n  function addSpecialWidget(widgetType: 'updateStatus' | 'optionsPanel'): DashboardWidgetConfig {\n    const specialConfigs: Record<'updateStatus' | 'optionsPanel', Partial<DashboardWidgetConfig>> = {\n      updateStatus: {\n        type: 'updateStatus',\n        title: '',\n        icon: 'fa-sync-alt',\n        colSpan: 2,\n        actions: ['nativeEdit'],\n      },\n      optionsPanel: {\n        type: 'optionsPanel',\n        title: '',\n        icon: 'fa-list-check',\n        colSpan: 2,\n      },\n    };\n\n    const specialConfig = specialConfigs[widgetType];\n\n    const newWidget: DashboardWidgetConfig = {\n      id: `special_${widgetType}_${Date.now()}`,\n      type: widgetType,\n      title: specialConfig.title || widgetType,\n      icon: specialConfig.icon || 'fa-cog',\n      displayColumns: [],\n      maxRows: 10,\n      actions: [],\n      order: config.value.widgets.length,\n      enabled: true,\n      colSpan: specialConfig.colSpan || 2,\n      displayStyle: 'list',\n    };\n\n    config.value.widgets.push(newWidget);\n    saveConfig();\n    return newWidget;\n  }\n\n  /**\n   * \n   * @param widgetType \n   */\n  function removeSpecialWidget(widgetType: 'updateStatus' | 'optionsPanel'): void {\n    const index = config.value.widgets.findIndex(w => w.type === widgetType);\n    if (index !== -1) {\n      config.value.widgets.splice(index, 1);\n      // \n      config.value.widgets.forEach((w, i) => {\n        w.order = i;\n      });\n      saveConfig();\n    }\n  }\n\n  return {\n    // \n    config,\n    isInitialized,\n\n    // Getters\n    enabledWidgets,\n    allWidgets,\n    showStats,\n    columns,\n    layout,\n\n    // Actions\n    loadConfig,\n    saveConfig,\n    updateConfig,\n    addWidget,\n    removeWidget,\n    updateWidget,\n    toggleWidget,\n    moveWidget,\n    setWidgetActions,\n    resetConfig,\n    findWidgetByTableId,\n    hasWidget,\n    hasSpecialWidget,\n    addSpecialWidget,\n    removeSpecialWidget,\n  };\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, Fragment as _Fragment, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = [\"title\"];\nconst _hoisted_2 = { class: \"ball-emoji\" };\nconst _hoisted_3 = {\n    key: 1,\n    class: \"acu-issue-badge\"\n};\nimport { computed, onMounted, onUnmounted, ref } from 'vue';\nimport { useDraggableWithSnap, useParentEventListener } from '../composables';\nimport { useBallAppearanceStore, useDataStore, useUIStore } from '../stores';\nimport { hexToRgba } from '../utils';\n// ============================================================\n// Store \n// ============================================================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'FloatingBall',\n    setup(__props, { expose: __expose }) {\n        /**\n         * FloatingBall.vue - \n         *  VueUse useDraggableWithSnap \n         *  iframe  window.parent \n         *  AI \n         */\n        const uiStore = useUIStore();\n        const dataStore = useDataStore();\n        const ballAppearanceStore = useBallAppearanceStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const hasIntegrityIssues = computed(() => dataStore.hasIntegrityIssues);\n        /**  */\n        const issueTooltip = computed(() => {\n            if (!hasIntegrityIssues.value)\n                return '';\n            return dataStore.getIntegritySummary();\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const appearance = computed(() => ballAppearanceStore.appearance);\n        /**  */\n        const imageStyle = computed(() => {\n            const app = appearance.value;\n            if (app.type !== 'image' || !app.content)\n                return {};\n            return {\n                backgroundImage: `url('${app.content}')`,\n                backgroundPosition: `${app.imageOffsetX ?? 50}% ${app.imageOffsetY ?? 50}%`,\n                backgroundSize: `${app.imageScale ?? 150}%`,\n                backgroundRepeat: 'no-repeat',\n            };\n        });\n        /** AI  */\n        const isAiNotifying = ref(false);\n        /**  */\n        let notifyTimer = null;\n        /**\n         *  AI \n         * @param duration  3000\n         */\n        function triggerAiNotify(duration = 3000) {\n            if (notifyTimer) {\n                clearTimeout(notifyTimer);\n            }\n            isAiNotifying.value = true;\n            notifyTimer = setTimeout(() => {\n                isAiNotifying.value = false;\n                notifyTimer = null;\n            }, duration);\n        }\n        /**  class  */\n        const ballClasses = computed(() => ({\n            docked: isDocked.value,\n            'has-issues': hasIntegrityIssues.value,\n            'ai-notify': isAiNotifying.value,\n            'anim-ripple': isAiNotifying.value && appearance.value.notifyAnimation === 'ripple',\n            'anim-arc': isAiNotifying.value && appearance.value.notifyAnimation === 'arc',\n        }));\n        /**  CSS  */\n        const ballStyle = computed(() => {\n            const app = appearance.value;\n            return {\n                '--ball-size': `${app.size}px`,\n                '--ball-border-color': app.borderColor,\n                '--ball-border-color-rgba': hexToRgba(app.borderColor, app.borderOpacity),\n                '--ball-bg-color': hexToRgba(app.bgColor, app.bgOpacity),\n                ...positionStyle.value,\n            };\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  iframe */\n        function getTargetWindowSize() {\n            const targetWindow = window.parent && window.parent !== window ? window.parent : window;\n            return {\n                width: targetWindow.innerWidth,\n                height: targetWindow.innerHeight,\n            };\n        }\n        /**  */\n        function getDefaultPosition() {\n            const { height: winHeight } = getTargetWindowSize();\n            return {\n                x: 20,\n                y: winHeight - 150,\n            };\n        }\n        // ============================================================\n        // \n        // ============================================================\n        const ballRef = ref();\n        /**  */\n        const isDocked = ref(false);\n        /**  (/) */\n        let clickTimer = null;\n        // ============================================================\n        //  VueUse \n        // ============================================================\n        const defaultPos = getDefaultPosition();\n        const { x, y, style: positionStyle, isDragging, wasDragging, } = useDraggableWithSnap(ballRef, {\n            initialX: defaultPos.x,\n            initialY: defaultPos.y,\n            edgePadding: 10,\n            elementWidth: computed(() => appearance.value.size).value,\n            useParentWindow: true,\n            onPositionChange: (newX, newY) => {\n                console.info('[ACU FloatingBall] :', newX, newY);\n            },\n        });\n        // ============================================================\n        // /\n        // ============================================================\n        function handleClick(e) {\n            console.log('[ACU FloatingBall] handleClick, wasDragging:', wasDragging.value, 'isDragging:', isDragging.value);\n            // \n            if (wasDragging.value) {\n                wasDragging.value = false;\n                e.stopPropagation();\n                console.log('[ACU FloatingBall] ');\n                return;\n            }\n            // \n            if (isDocked.value) {\n                isDocked.value = false;\n                e.stopPropagation();\n                return;\n            }\n            // /\n            if (clickTimer) {\n                //  - \n                clearTimeout(clickTimer);\n                clickTimer = null;\n                isDocked.value = true;\n                console.info('[ACU FloatingBall]  - ');\n            }\n            else {\n                // \n                clickTimer = setTimeout(() => {\n                    clickTimer = null;\n                    uiStore.openPanel();\n                    console.info('[ACU FloatingBall]  - ');\n                }, 250);\n            }\n        }\n        // ============================================================\n        //  resize \n        // ============================================================\n        useParentEventListener('resize', () => {\n            const { width: winWidth, height: winHeight } = getTargetWindowSize();\n            const ballSize = appearance.value.size;\n            const padding = 10;\n            let needUpdate = false;\n            // \n            if (x.value > winWidth - ballSize - padding) {\n                x.value = winWidth - ballSize - padding;\n                needUpdate = true;\n            }\n            if (y.value > winHeight - ballSize - padding) {\n                y.value = winHeight - ballSize - padding;\n                needUpdate = true;\n            }\n            if (x.value < padding) {\n                x.value = padding;\n                needUpdate = true;\n            }\n            if (y.value < padding) {\n                y.value = padding;\n                needUpdate = true;\n            }\n            if (needUpdate) {\n                console.info('[ACU FloatingBall] ');\n            }\n        });\n        // ============================================================\n        // \n        // ============================================================\n        onMounted(() => {\n            // \n            ballAppearanceStore.loadFromScriptVariables();\n        });\n        onUnmounted(() => {\n            if (clickTimer) {\n                clearTimeout(clickTimer);\n            }\n            if (notifyTimer) {\n                clearTimeout(notifyTimer);\n            }\n        });\n        // ============================================================\n        // \n        // ============================================================\n        __expose({\n            /**  */\n            resetPosition: () => {\n                const defaultY = (window.parent?.innerHeight ?? window.innerHeight) - 150;\n                x.value = 20;\n                y.value = defaultY;\n            },\n            /**  */\n            setDocked: (docked) => {\n                isDocked.value = docked;\n            },\n            /**  AI  */\n            triggerAiNotify,\n            /**  */\n            getAppearance: () => appearance.value,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                ref_key: \"ballRef\",\n                ref: ballRef,\n                class: _normalizeClass([\"acu-floating-ball-vue\", ballClasses.value]),\n                style: _normalizeStyle(ballStyle.value),\n                title: hasIntegrityIssues.value ? issueTooltip.value : '',\n                onClick: handleClick\n            }, [\n                _createCommentVNode(\"  -  \"),\n                (!isDocked.value)\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                        _createCommentVNode(\" FontAwesome  \"),\n                        (appearance.value.type === 'icon')\n                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                key: 0,\n                                class: _normalizeClass(['fa-solid', appearance.value.content])\n                            }, null, 2 /* CLASS */))\n                            : (appearance.value.type === 'emoji')\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\" Emoji \"),\n                                    _createElementVNode(\"span\", _hoisted_2, _toDisplayString(appearance.value.content), 1 /* TEXT */)\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                : (appearance.value.type === 'image' && appearance.value.content)\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                        _createCommentVNode(\"  -  div + background-image  \"),\n                                        _createElementVNode(\"div\", {\n                                            class: \"ball-image\",\n                                            style: _normalizeStyle(imageStyle.value)\n                                        }, null, 4 /* STYLE */)\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    : _createCommentVNode(\"v-if\", true)\n                    ], 64 /* STABLE_FRAGMENT */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                (hasIntegrityIssues.value && !isDocked.value)\n                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, \"!\"))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 14 /* CLASS, STYLE, PROPS */, _hoisted_1));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./FloatingBall.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./FloatingBall.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"popup-buttons-grid\" };\nconst _hoisted_2 = [\"title\", \"onClick\"];\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'HiddenButtonsPopup',\n    props: {\n        visible: { type: Boolean },\n        buttons: {},\n        isPinned: { type: Boolean, default: false }\n    },\n    emits: [\"close\", \"button-click\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * HiddenButtonsPopup - \n         *\n         * :\n         * - \n         * - \n         * - title\n         *\n         * :\n         * - MainPanel \"\"\n         */\n        const props = __props;\n        const emit = __emit;\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const getButtonClass = (buttonId) => {\n            const classes = [];\n            // \n            if (buttonId === 'purge') {\n                classes.push('btn-danger');\n            }\n            // \n            if (buttonId === 'pin') {\n                classes.push('btn-toggle');\n                if (props.isPinned) {\n                    classes.push('active');\n                }\n            }\n            return classes;\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const handleButtonClick = (buttonId) => {\n            emit('button-click', buttonId);\n            emit('close');\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"hidden-popup\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-hidden-buttons-popup\",\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.buttons, (btn) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: btn.id,\n                                        class: _normalizeClass([\"popup-button\", getButtonClass(btn.id)]),\n                                        title: btn.label,\n                                        onClick: _withModifiers(($event) => (handleButtonClick(btn.id)), [\"stop\"])\n                                    }, [\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(['fa-solid', btn.icon])\n                                        }, null, 2 /* CLASS */)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_2));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./HiddenButtonsPopup.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HiddenButtonsPopup.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HiddenButtonsPopup.vue?vue&type=style&index=0&id=5d2fcd0e&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5d2fcd0e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, renderSlot as _renderSlot, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeStyle as _normalizeStyle, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"acu-panel-content\" };\nconst _hoisted_2 = { class: \"acu-nav-actions-area\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"acu-action-btn-wrapper acu-lock-mode-btns\"\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"acu-lock-count\"\n};\nconst _hoisted_5 = [\"title\", \"onClick\", \"onMousedown\", \"onTouchstartPassive\"];\nconst _hoisted_6 = {\n    key: 0,\n    class: \"secondary-indicator\"\n};\nconst _hoisted_7 = [\"title\", \"onClick\"];\nconst _hoisted_8 = {\n    key: 1,\n    class: \"acu-action-btn-wrapper\"\n};\nimport { useEventListener, useStorage } from '@vueuse/core';\nimport { computed, onMounted, onUnmounted, ref, watchEffect } from 'vue';\nimport { toast, useCellLock, useSmartHeight } from '../composables';\nimport { NAV_BUTTONS, useConfigStore, useUIStore } from '../stores';\nimport HiddenButtonsPopup from './HiddenButtonsPopup.vue';\nconst WINDOW_CONFIG_KEY = 'acu_win_config';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MainPanel',\n    props: {\n        title: { default: 'ACU ' },\n        theme: { default: 'retro' },\n        layout: { default: 'vertical' },\n        isCollapsed: { type: Boolean, default: false },\n        isPinned: { type: Boolean, default: false },\n        isContentHidden: { type: Boolean, default: false },\n        lockPanel: { type: Boolean, default: false },\n        hasChanges: { type: Boolean, default: false },\n        panelType: { default: 'normal' }\n    },\n    emits: [\"refresh\", \"save\", \"save-as\", \"undo\", \"manual-update\", \"purge\", \"settings\", \"open-native\", \"toggle-pin\", \"toggle\", \"close\", \"hide-content\", \"height-change\", \"width-change\", \"collapse-tab\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * MainPanel.vue - \n         *\n         * \n         * 1. acu-data-display - \n         * 2. acu-resize-handle - \n         * 3. acu-nav-container - \n         *    - acu-nav-tabs-area - Tab \n         *    - acu-nav-separator - \n         *    - acu-nav-actions-area - \n         *\n         *  VueUse \n         * - useStorage: \n         * - useSmartHeight: \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Stores & Composables\n        // ============================================================\n        const uiStore = useUIStore();\n        const cellLock = useCellLock();\n        const configStore = useConfigStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const DEFAULT_VISIBLE_BUTTONS = ['save', 'refresh', 'settings', 'pin', 'toggle'];\n        /**  */\n        const visibleButtons = computed(() => {\n            let order = configStore.config.buttonOrder || NAV_BUTTONS.map((b) => b.id);\n            //  visibleButtons \n            const visibleIds = configStore.config.visibleButtons?.length > 0\n                ? [...configStore.config.visibleButtons]\n                : [...DEFAULT_VISIBLE_BUTTONS];\n            // Tab collapseTab \n            if (configStore.config.collapseTabBar) {\n                if (!visibleIds.includes('collapseTab')) {\n                    visibleIds.push('collapseTab');\n                }\n                //  collapseTab  order \n                if (!order.includes('collapseTab')) {\n                    //  settings \n                    const settingsIndex = order.indexOf('settings');\n                    if (settingsIndex >= 0) {\n                        order = [...order.slice(0, settingsIndex), 'collapseTab', ...order.slice(settingsIndex)];\n                    }\n                    else {\n                        order = [...order, 'collapseTab'];\n                    }\n                }\n            }\n            else {\n                // Tab collapseTab  order \n                const collapseIndex = visibleIds.indexOf('collapseTab');\n                if (collapseIndex > -1) {\n                    visibleIds.splice(collapseIndex, 1);\n                }\n            }\n            console.info('[ACU MainPanel] :', {\n                order,\n                visibleIds,\n                collapseTabBar: configStore.config.collapseTabBar,\n            });\n            return order\n                .map((id) => NAV_BUTTONS.find((b) => b.id === id))\n                .filter((btn) => {\n                if (!btn)\n                    return false;\n                // \n                return visibleIds.includes(btn.id);\n            });\n        });\n        /**  */\n        const hiddenButtons = computed(() => configStore.hiddenButtons);\n        /**  */\n        const hasHiddenButtons = computed(() => configStore.hasHiddenButtons);\n        /**  */\n        const isHiddenPopupVisible = ref(false);\n        /**  */\n        const toggleHiddenPopup = () => {\n            isHiddenPopupVisible.value = !isHiddenPopupVisible.value;\n        };\n        /**  */\n        const handleHiddenButtonClick = (buttonId) => {\n            isHiddenPopupVisible.value = false;\n            emitButtonAction(buttonId);\n        };\n        /**  */\n        const isRefreshing = ref(false);\n        /**  */\n        const getButtonClass = (buttonId) => {\n            const classes = [];\n            // \n            if (buttonId === 'purge') {\n                classes.push('acu-btn-danger');\n            }\n            // \n            if (buttonId === 'pin') {\n                classes.push('acu-btn-toggle');\n                if (props.isPinned) {\n                    classes.push('active');\n                }\n            }\n            // \n            if (buttonId === 'save' && props.hasChanges) {\n                classes.push('has-changes');\n            }\n            // \n            if (buttonId === 'refresh' && isRefreshing.value) {\n                classes.push('refreshing');\n            }\n            return classes;\n        };\n        /**  */\n        const getButtonStyle = (buttonId) => {\n            const styles = {};\n            // \n            if (buttonId === 'purge') {\n                styles.color = '#e74c3c';\n            }\n            // \n            if (buttonId === 'pin' && props.isPinned) {\n                styles.color = 'var(--acu-title-color)';\n                styles.borderColor = 'var(--acu-title-color)';\n                styles.background = 'var(--acu-btn-hover)';\n            }\n            return styles;\n        };\n        // ============================================================\n        //  ActionBar.vue \n        // ============================================================\n        let longPressTimer = null;\n        const isLongPress = ref(false);\n        const popupButtonId = ref(null);\n        /**\n         *  ID\n         * @param buttonId  ID\n         */\n        const getSecondaryId = (buttonId) => {\n            return configStore.getSecondaryButtonId(buttonId);\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const hasSecondary = (buttonId) => {\n            return getSecondaryId(buttonId) !== null;\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const getButtonIcon = (buttonId) => {\n            const btn = NAV_BUTTONS.find((b) => b.id === buttonId);\n            return btn?.icon || 'fa-circle';\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const getButtonLabel = (buttonId) => {\n            const btn = NAV_BUTTONS.find((b) => b.id === buttonId);\n            return btn?.label || buttonId;\n        };\n        /**\n         *  title\n         * @param buttonId  ID\n         */\n        const getButtonTitle = (buttonId) => {\n            const label = getButtonLabel(buttonId);\n            const secondaryId = getSecondaryId(buttonId);\n            if (secondaryId) {\n                const secondaryLabel = getButtonLabel(secondaryId);\n                return `${label} (: ${secondaryLabel})`;\n            }\n            return label;\n        };\n        /**  */\n        const startLongPress = (buttonId) => {\n            const secondaryId = getSecondaryId(buttonId);\n            console.log('[ACU MainPanel] startLongPress:', buttonId, 'secondaryId:', secondaryId, 'groups:', configStore.buttonGroups);\n            if (!secondaryId) {\n                console.log('[ACU MainPanel] No secondary button for:', buttonId);\n                return;\n            }\n            isLongPress.value = false;\n            longPressTimer = setTimeout(() => {\n                isLongPress.value = true;\n                console.log('[ACU MainPanel] Long press triggered for:', buttonId, 'directExec:', configStore.longPressDirectExec);\n                // \n                if (configStore.longPressDirectExec) {\n                    // \n                    console.log('[ACU MainPanel] Direct exec:', secondaryId);\n                    emitButtonAction(secondaryId);\n                }\n                else {\n                    // \n                    console.log('[ACU MainPanel] Popup button:', secondaryId);\n                    popupButtonId.value = buttonId;\n                    // 3\n                    setTimeout(() => {\n                        if (popupButtonId.value === buttonId) {\n                            popupButtonId.value = null;\n                        }\n                    }, 3000);\n                }\n            }, 600);\n        };\n        /**  */\n        const endLongPress = () => {\n            if (longPressTimer) {\n                clearTimeout(longPressTimer);\n                longPressTimer = null;\n            }\n        };\n        /**\n         * \n         * @param primaryId  ID\n         */\n        const handleSecondaryClick = (primaryId) => {\n            const secondaryId = getSecondaryId(primaryId);\n            if (secondaryId) {\n                emitButtonAction(secondaryId);\n            }\n            popupButtonId.value = null;\n        };\n        /**  */\n        const emitButtonAction = (actionId) => {\n            switch (actionId) {\n                case 'save':\n                    emit('save');\n                    break;\n                case 'saveAs':\n                    emit('save-as');\n                    break;\n                case 'undo':\n                    emit('undo');\n                    break;\n                case 'refresh':\n                    emit('refresh');\n                    break;\n                case 'manualUpdate':\n                    emit('manual-update');\n                    break;\n                case 'purge':\n                    emit('purge');\n                    break;\n                case 'pin':\n                    emit('toggle-pin');\n                    break;\n                case 'toggle':\n                    emit('toggle');\n                    break;\n                case 'settings':\n                    emit('settings');\n                    break;\n                case 'openNative':\n                    emit('open-native');\n                    break;\n                case 'collapseTab':\n                    emit('collapse-tab');\n                    break;\n                default:\n                    console.warn(`[MainPanel]  ID: ${actionId}`);\n            }\n        };\n        /**  */\n        const handleButtonClick = (buttonId) => {\n            // \n            if (isLongPress.value) {\n                isLongPress.value = false;\n                return;\n            }\n            // \n            if (buttonId === 'refresh') {\n                isRefreshing.value = true;\n                // 1\n                setTimeout(() => {\n                    isRefreshing.value = false;\n                }, 1000);\n            }\n            emitButtonAction(buttonId);\n        };\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const handleFinishLockEdit = () => {\n            //  pendingLocks \n            const count = cellLock.pendingLockCount.value;\n            cellLock.savePendingLocks();\n            uiStore.isLockEditMode = false;\n            toast.success(` ${count} `);\n        };\n        /**  */\n        const handleCancelLockEdit = () => {\n            cellLock.discardPendingLocks();\n            uiStore.isLockEditMode = false;\n            toast.info('');\n        };\n        /**  */\n        const toggleShowLockedOnly = () => {\n            uiStore.showLockedOnly = !uiStore.showLockedOnly;\n        };\n        // ============================================================\n        // Refs\n        // ============================================================\n        const panelRef = ref();\n        const dataAreaRef = ref();\n        const navContainerRef = ref();\n        const resizeHandleRef = ref();\n        // ============================================================\n        // \n        // ============================================================\n        // ============================================================\n        //  6.4.1.ts renderInterface \n        //  useStorage  localStorage\n        // \n        // ============================================================\n        const DEFAULT_CENTERED_CONFIG = { width: 400, left: '50%', bottom: '50%', isCentered: true };\n        //  localStorage \n        let preCheckSavedWin = null;\n        let needResetToCenter = false;\n        try {\n            const rawValue = localStorage.getItem(WINDOW_CONFIG_KEY);\n            preCheckSavedWin = rawValue ? JSON.parse(rawValue) : null;\n        }\n        catch (e) {\n            preCheckSavedWin = null;\n        }\n        //  6.4.1  + \n        // 1. \n        if (!preCheckSavedWin) {\n            needResetToCenter = true;\n            console.info('[ACU MainPanel] ');\n        }\n        else if (\n        // 2. bottom \n        // bottom  100px \n        !preCheckSavedWin.isCentered &&\n            typeof preCheckSavedWin.bottom === 'number' &&\n            preCheckSavedWin.bottom < 100) {\n            needResetToCenter = true;\n            console.warn('[ACU MainPanel]  (bottom=' + preCheckSavedWin.bottom + ')');\n        }\n        if (needResetToCenter) {\n            localStorage.setItem(WINDOW_CONFIG_KEY, JSON.stringify(DEFAULT_CENTERED_CONFIG));\n            //  6.4.1 tab\n            // \n            localStorage.removeItem('acu_active_tab');\n            console.info('[ACU MainPanel]  activeTab');\n        }\n        const windowConfig = useStorage(WINDOW_CONFIG_KEY, DEFAULT_CENTERED_CONFIG);\n        // ============================================================\n        //  - \n        // ============================================================\n        /** / */\n        function isMobileDevice() {\n            // \n            const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n            // \n            const mobileUA = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n            //  768px \n            const isSmallScreen = window.innerWidth < 768;\n            return hasTouch && (mobileUA || isSmallScreen);\n        }\n        /**\n         * \n         * \n         * \n         */\n        function getMobileSafeBottomMargin() {\n            if (!isMobileDevice()) {\n                return 0;\n            }\n            //  50px\n            return configStore.config.mobileSafeAreaBottom ?? 50;\n        }\n        /**  */\n        function getParentWindowSize() {\n            return {\n                width: window.parent?.innerWidth ?? window.innerWidth,\n                height: window.parent?.innerHeight ?? window.innerHeight,\n            };\n        }\n        /**\n         * \n         *  6.4.1  renderInterface \n         * 1. \n         * 2.  bottom \n         */\n        function validateAndFixWindowPosition() {\n            const config = windowConfig.value;\n            const { width: parentWidth, height: parentHeight } = getParentWindowSize();\n            console.info('[ACU MainPanel] :', JSON.stringify(config), 'parentHeight:', parentHeight);\n            //  6.4.1\n            if (!config || config.left === undefined || config.bottom === undefined) {\n                console.warn('[ACU MainPanel] ');\n                windowConfig.value = {\n                    width: config?.width || 400,\n                    left: '50%',\n                    bottom: '50%',\n                    isCentered: true,\n                };\n                return;\n            }\n            //  left  bottom  '50%'\n            if (config.isCentered) {\n                // left  bottom  '50%'\n                if (config.left !== '50%' || config.bottom !== '50%') {\n                    console.warn('[ACU MainPanel]  50%');\n                    windowConfig.value = {\n                        ...config,\n                        left: '50%',\n                        bottom: '50%',\n                    };\n                }\n                return;\n            }\n            // \n            let needUpdate = false;\n            let resetToCenter = false;\n            let newLeft = config.left;\n            const newBottom = config.bottom;\n            const safeBottomMargin = getMobileSafeBottomMargin();\n            // \n            const minSafeBottom = Math.max(safeBottomMargin, 50);\n            //  bottom \n            if (typeof config.bottom === 'number') {\n                // \n                if (config.bottom < minSafeBottom) {\n                    console.warn(`[ACU MainPanel]  (${config.bottom}px < ${minSafeBottom}px)`);\n                    resetToCenter = true;\n                }\n                else if (config.bottom > parentHeight - 50) {\n                    // \n                    console.warn(`[ACU MainPanel]  (${config.bottom}px > ${parentHeight - 50}px)`);\n                    resetToCenter = true;\n                }\n            }\n            else if (config.bottom !== '50%') {\n                // bottom  '50%'\n                console.warn('[ACU MainPanel]  bottom ');\n                resetToCenter = true;\n            }\n            //  left \n            if (typeof config.left === 'number') {\n                const maxLeft = parentWidth - 50;\n                if (config.left < -200) {\n                    newLeft = -200;\n                    needUpdate = true;\n                }\n                else if (config.left > maxLeft) {\n                    newLeft = Math.max(0, maxLeft);\n                    needUpdate = true;\n                }\n            }\n            else if (config.left !== '50%') {\n                // left  '50%'\n                console.warn('[ACU MainPanel]  left ');\n                resetToCenter = true;\n            }\n            // \n            if (resetToCenter) {\n                windowConfig.value = {\n                    width: config.width || 400,\n                    left: '50%',\n                    bottom: '50%',\n                    isCentered: true,\n                };\n                console.info('[ACU MainPanel] ');\n                return;\n            }\n            // \n            if (needUpdate) {\n                console.info('[ACU MainPanel] ');\n                windowConfig.value = {\n                    ...config,\n                    left: newLeft,\n                    bottom: newBottom,\n                };\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        // ============================================================\n        //  iframe  DOM \n        // Vue 3  (:style)  +  iframe \n        //  watchEffect  DOM  style  CSS \n        // ============================================================\n        watchEffect(() => {\n            if (!panelRef.value)\n                return;\n            //  6.4.1\n            let savedWin = windowConfig.value;\n            if (!savedWin) {\n                savedWin = { width: 400, left: '50%', bottom: '50%', isCentered: true };\n            }\n            const el = panelRef.value;\n            //  6.4.1\n            if (savedWin.width) {\n                el.style.setProperty('--acu-win-width', `${savedWin.width}px`);\n            }\n            if (savedWin.left !== undefined) {\n                const leftValue = typeof savedWin.left === 'number' ? `${savedWin.left}px` : savedWin.left;\n                el.style.setProperty('--acu-win-left', leftValue);\n            }\n            if (savedWin.bottom !== undefined) {\n                const bottomValue = typeof savedWin.bottom === 'number' ? `${savedWin.bottom}px` : savedWin.bottom;\n                el.style.setProperty('--acu-win-bottom', bottomValue);\n            }\n            //  transform top \n            if (savedWin.isCentered) {\n                //  top CSS \n                //  CSS \n                el.style.setProperty('--acu-win-left', '50%');\n                el.style.removeProperty('--acu-win-bottom');\n                el.style.transform = 'translate(-50%, -50%)';\n            }\n            else {\n                //  bottom \n                el.style.transform = 'none';\n            }\n        });\n        // ============================================================\n        //  jQuery $('body').on() \n        // src//index.vue \n        //  $  window.parent.$ $('body')  body\n        // ============================================================\n        /**\n         * \n         *  jQuery  body\n         * \n         * 1.  $('body').on()  move/up  $  jQuery\n         * 2.  5px \n         * 3.  click \n         */\n        function handleHeaderPointerDown(e) {\n            // \n            if (props.lockPanel)\n                return;\n            // \n            const target = e.target;\n            if (target.closest('.acu-resize-handle, .acu-slider, input'))\n                return;\n            // /\n            if (e.button !== 0)\n                return;\n            const navEl = navContainerRef.value;\n            if (!navEl || !panelRef.value)\n                return;\n            // \n            const startX = e.clientX;\n            const startY = e.clientY;\n            const rect = panelRef.value.getBoundingClientRect();\n            const startLeft = rect.left;\n            const winH = window.parent?.innerHeight ?? window.innerHeight;\n            const startBottom = winH - rect.bottom;\n            let isDragging = false;\n            let wasDragging = false;\n            const handlePointerMove = (moveE) => {\n                const originalEvent = moveE.originalEvent;\n                const dx = originalEvent.clientX - startX;\n                const dy = originalEvent.clientY - startY;\n                //  5px \n                if (!isDragging && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\n                    isDragging = true;\n                    wasDragging = true;\n                    // \n                    windowConfig.value.isCentered = false;\n                }\n                if (isDragging) {\n                    moveE.preventDefault();\n                    let newLeft = startLeft + dx;\n                    let newBottom = startBottom - dy;\n                    // \n                    const parentWidth = window.parent?.innerWidth ?? window.innerWidth;\n                    const safeBottomMargin = getMobileSafeBottomMargin();\n                    const maxLeft = parentWidth - 50;\n                    const minBottom = safeBottomMargin; // \n                    const maxBottom = winH - 50;\n                    if (newLeft < -200)\n                        newLeft = -200;\n                    if (newLeft > maxLeft)\n                        newLeft = maxLeft;\n                    if (newBottom < minBottom)\n                        newBottom = minBottom;\n                    if (newBottom > maxBottom)\n                        newBottom = maxBottom;\n                    windowConfig.value.left = newLeft;\n                    windowConfig.value.bottom = newBottom;\n                }\n            };\n            const handlePointerUp = () => {\n                //  jQuery $('body')  body\n                $('body').off('pointermove', handlePointerMove);\n                $('body').off('pointerup', handlePointerUp);\n                if (wasDragging) {\n                    //  click \n                    const preventClick = (clickE) => {\n                        clickE.stopPropagation();\n                        clickE.preventDefault();\n                        navEl.removeEventListener('click', preventClick, true);\n                    };\n                    navEl.addEventListener('click', preventClick, true);\n                    console.info('[ACU MainPanel] ');\n                }\n            };\n            //  jQuery  body $  window.parent.$\n            $('body').on('pointermove', handlePointerMove);\n            $('body').on('pointerup', handlePointerUp);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const contentInnerRef = ref();\n        /**  */\n        const isManualHeight = ref(false);\n        /**  */\n        const panelHeight = ref(0);\n        /**  */\n        const panelTypeRef = computed(() => props.panelType);\n        /**  store  */\n        const showPaginationRef = computed(() => configStore.config.showPagination);\n        // ============================================================\n        //  - \n        // ============================================================\n        onMounted(() => {\n            // \n            validateAndFixWindowPosition();\n            //  iframe \n            const navEl = navContainerRef.value;\n            if (navEl) {\n                navEl.addEventListener('pointerdown', handleHeaderPointerDown);\n                console.info('[ACU MainPanel] ');\n            }\n            // \n            const resizeEl = resizeHandleRef.value;\n            if (resizeEl) {\n                resizeEl.addEventListener('pointerdown', startWidthResize);\n                console.info('[ACU MainPanel] ');\n            }\n        });\n        // \n        onUnmounted(() => {\n            const navEl = navContainerRef.value;\n            if (navEl) {\n                navEl.removeEventListener('pointerdown', handleHeaderPointerDown);\n            }\n            const resizeEl = resizeHandleRef.value;\n            if (resizeEl) {\n                resizeEl.removeEventListener('pointerdown', startWidthResize);\n            }\n        });\n        //  resize\n        useEventListener(window.parent ?? window, 'resize', () => {\n            validateAndFixWindowPosition();\n        });\n        //  composable\n        const { height: autoHeight, recalculate: recalculateHeight } = useSmartHeight(contentInnerRef, panelTypeRef, showPaginationRef, {\n            minHeight: 200,\n            maxHeightRatio: 0.8,\n            headerHeight: 42,\n            paginationHeight: 56,\n            contentPadding: 25,\n            onHeightChange: height => {\n                if (!isManualHeight.value && dataAreaRef.value) {\n                    panelHeight.value = height;\n                    emit('height-change', height);\n                }\n            },\n        });\n        // \n        /**\n         * \n         * \n         */\n        const startHeightDrag = (e, handleEl) => {\n            if (e.button !== 0)\n                return;\n            e.preventDefault();\n            e.stopPropagation();\n            if (!dataAreaRef.value)\n                return;\n            handleEl.setPointerCapture(e.pointerId);\n            isManualHeight.value = true;\n            const startY = e.clientY;\n            const startHeight = dataAreaRef.value.offsetHeight;\n            const handlePointerMove = (moveE) => {\n                if (!dataAreaRef.value)\n                    return;\n                const dy = startY - moveE.clientY;\n                let newHeight = startHeight + dy;\n                // \n                const minHeight = 200;\n                const parentHeight = window.parent?.innerHeight ?? window.innerHeight;\n                const maxHeight = parentHeight * 0.8;\n                newHeight = Math.max(minHeight, Math.min(maxHeight, newHeight));\n                dataAreaRef.value.style.height = `${newHeight}px`;\n                panelHeight.value = newHeight;\n                emit('height-change', newHeight);\n            };\n            const handlePointerUp = (upE) => {\n                handleEl.releasePointerCapture(upE.pointerId);\n                handleEl.removeEventListener('pointermove', handlePointerMove);\n                handleEl.removeEventListener('pointerup', handlePointerUp);\n            };\n            handleEl.addEventListener('pointermove', handlePointerMove);\n            handleEl.addEventListener('pointerup', handlePointerUp);\n        };\n        /**\n         * \n         *\n         * \n         * 1. \n         * 2.  setTimeout + rAF \n         * 3.  scrollHeight \n         */\n        const resetHeight = () => {\n            if (!dataAreaRef.value)\n                return;\n            // 1. \n            isManualHeight.value = false;\n            // 2. \n            dataAreaRef.value.style.height = '';\n            dataAreaRef.value.style.minHeight = '';\n            dataAreaRef.value.style.maxHeight = '';\n            // 3.  setTimeout \n            // 50ms  rAF \n            setTimeout(() => {\n                requestAnimationFrame(() => {\n                    if (!dataAreaRef.value)\n                        return;\n                    // 4. \n                    const parentHeight = window.parent?.innerHeight ?? window.innerHeight;\n                    const maxAllowed = parentHeight * 0.8;\n                    const minHeight = 200;\n                    // 5. \n                    //  offsetHeight\n                    const contentEl = dataAreaRef.value.querySelector('.acu-panel-content');\n                    let naturalHeight;\n                    if (contentEl) {\n                        // DataTable/Dashboard/OptionsPanel\n                        const firstChild = contentEl.firstElementChild;\n                        if (firstChild) {\n                            naturalHeight = firstChild.offsetHeight + 20; // \n                        }\n                        else {\n                            naturalHeight = contentEl.scrollHeight;\n                        }\n                    }\n                    else {\n                        naturalHeight = dataAreaRef.value.scrollHeight;\n                    }\n                    // 6. clamp(naturalHeight, minHeight, maxAllowed)\n                    const finalHeight = Math.max(minHeight, Math.min(naturalHeight, maxAllowed));\n                    // 7. \n                    dataAreaRef.value.style.height = `${finalHeight}px`;\n                    panelHeight.value = finalHeight;\n                    console.info(`[ACU] : natural=${naturalHeight}, final=${finalHeight}, max=${maxAllowed}`);\n                    emit('height-change', finalHeight);\n                });\n            }, 50);\n        };\n        // ============================================================\n        //  Pointer Events API + setPointerCapture\n        // ============================================================\n        /**\n         * \n         *  jQuery $('body').on() \n         */\n        function startWidthResize(e) {\n            // \n            if (e.button !== 0)\n                return;\n            e.preventDefault();\n            e.stopPropagation();\n            const handleEl = resizeHandleRef.value;\n            if (!handleEl || !panelRef.value)\n                return;\n            const startX = e.clientX;\n            const rect = panelRef.value.getBoundingClientRect();\n            const startWidth = rect.width;\n            const handlePointerMove = (moveE) => {\n                const originalEvent = moveE.originalEvent;\n                const dx = originalEvent.clientX - startX;\n                let newWidth = startWidth + dx;\n                // \n                const minWidth = 300;\n                const parentWidth = window.parent?.innerWidth ?? window.innerWidth;\n                const maxWidth = parentWidth - 10;\n                if (newWidth < minWidth)\n                    newWidth = minWidth;\n                if (newWidth > maxWidth)\n                    newWidth = maxWidth;\n                windowConfig.value.width = newWidth;\n                emit('width-change', newWidth);\n            };\n            const handlePointerUp = () => {\n                //  jQuery $('body')  body\n                $('body').off('pointermove', handlePointerMove);\n                $('body').off('pointerup', handlePointerUp);\n                console.info('[ACU MainPanel] :', windowConfig.value.width);\n            };\n            //  jQuery  body $  window.parent.$\n            $('body').on('pointermove', handlePointerMove);\n            $('body').on('pointerup', handlePointerUp);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        const hideContent = () => {\n            emit('hide-content');\n        };\n        // ============================================================\n        // \n        // ============================================================\n        __expose({\n            /**  */\n            getPanelElement: () => panelRef.value,\n            /**  */\n            getDataAreaElement: () => dataAreaRef.value,\n            /**  */\n            getCurrentHeight: () => panelHeight.value,\n            /**  */\n            resetPosition: () => {\n                windowConfig.value = {\n                    width: 400,\n                    left: '50%',\n                    bottom: '50%',\n                    isCentered: true,\n                };\n            },\n            /**  */\n            exitCenteredMode: () => {\n                if (!windowConfig.value.isCentered)\n                    return;\n                const parentWidth = window.parent?.innerWidth ?? window.innerWidth;\n                windowConfig.value = {\n                    ...windowConfig.value,\n                    isCentered: false,\n                    // \n                    bottom: typeof windowConfig.value.bottom === 'number' && windowConfig.value.bottom >= 50\n                        ? windowConfig.value.bottom\n                        : 100,\n                    left: typeof windowConfig.value.left === 'number' ? windowConfig.value.left : parentWidth / 2 - 200,\n                };\n                console.info('[ACU MainPanel] ');\n            },\n            /**  */\n            resetHeight,\n            /**  */\n            recalculateHeight,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                ref_key: \"panelRef\",\n                ref: panelRef,\n                class: _normalizeClass([\"acu-wrapper\", [\n                        `acu-theme-${__props.theme}`,\n                        `acu-layout-${__props.layout}`,\n                        {\n                            collapsed: __props.isCollapsed,\n                            pinned: __props.isPinned,\n                            'acu-centered-mode': _unref(windowConfig).isCentered,\n                        },\n                    ]])\n            }, [\n                _createCommentVNode(\" 1.  \"),\n                _createElementVNode(\"div\", {\n                    ref_key: \"dataAreaRef\",\n                    ref: dataAreaRef,\n                    class: _normalizeClass([\"acu-data-display\", {\n                            visible: !__props.isContentHidden,\n                            'acu-layout-horizontal': __props.layout === 'horizontal',\n                            'acu-layout-vertical': __props.layout === 'vertical',\n                        }])\n                }, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _renderSlot(_ctx.$slots, \"default\")\n                    ])\n                ], 2 /* CLASS */),\n                _createCommentVNode(\" 2.  \"),\n                _createCommentVNode(\"  onMounted  iframe  \"),\n                (!__props.lockPanel)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        ref_key: \"resizeHandleRef\",\n                        ref: resizeHandleRef,\n                        class: \"acu-resize-handle\"\n                    }, null, 512 /* NEED_PATCH */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" 3.  \"),\n                _createCommentVNode(\"  onMounted  \"),\n                _createElementVNode(\"div\", {\n                    ref_key: \"navContainerRef\",\n                    ref: navContainerRef,\n                    class: _normalizeClass([\"acu-nav-container\", { 'acu-locked': __props.lockPanel }])\n                }, [\n                    _createCommentVNode(\" Tab  ( slot TabBar  .acu-nav-tabs-area) \"),\n                    _renderSlot(_ctx.$slots, \"tabs\"),\n                    _createCommentVNode(\"  \"),\n                    _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"acu-nav-separator\" }, null, -1 /* CACHED */)),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createCommentVNode(\" // \"),\n                        (_unref(uiStore).isLockEditMode)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-action-btn acu-btn-success\",\n                                    title: \"\",\n                                    onClick: _withModifiers(handleFinishLockEdit, [\"stop\"])\n                                }, [...(_cache[1] || (_cache[1] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-action-btn acu-btn-cancel\",\n                                    title: \"\",\n                                    onClick: _withModifiers(handleCancelLockEdit, [\"stop\"])\n                                }, [...(_cache[2] || (_cache[2] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-action-btn\", { 'acu-btn-active': _unref(uiStore).showLockedOnly }]),\n                                    title: \"\",\n                                    onClick: _withModifiers(toggleShowLockedOnly, [\"stop\"])\n                                }, [...(_cache[3] || (_cache[3] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-filter\" }, null, -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */),\n                                (_unref(cellLock).pendingLockCount.value > 0)\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(_unref(cellLock).pendingLockCount.value), 1 /* TEXT */))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(visibleButtons.value, (btn) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: btn.id,\n                                class: \"acu-action-btn-wrapper\"\n                            }, [\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-action-btn\", getButtonClass(btn.id)]),\n                                    title: getButtonTitle(btn.id),\n                                    style: _normalizeStyle(getButtonStyle(btn.id)),\n                                    onClick: _withModifiers(($event) => (handleButtonClick(btn.id)), [\"stop\"]),\n                                    onMousedown: _withModifiers(($event) => (startLongPress(btn.id)), [\"stop\"]),\n                                    onMouseup: _withModifiers(endLongPress, [\"stop\"]),\n                                    onMouseleave: endLongPress,\n                                    onTouchstartPassive: _withModifiers(($event) => (startLongPress(btn.id)), [\"stop\"]),\n                                    onTouchend: _withModifiers(endLongPress, [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(['fa-solid', btn.icon])\n                                    }, null, 2 /* CLASS */),\n                                    _createCommentVNode(\"  \"),\n                                    (hasSecondary(btn.id))\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 46 /* CLASS, STYLE, PROPS, NEED_HYDRATION */, _hoisted_5),\n                                _createCommentVNode(\"  \"),\n                                _createVNode(_Transition, { name: \"popup\" }, {\n                                    default: _withCtx(() => [\n                                        (popupButtonId.value === btn.id && getSecondaryId(btn.id))\n                                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                                key: 0,\n                                                class: \"acu-action-btn acu-popup-btn\",\n                                                title: getButtonLabel(getSecondaryId(btn.id)),\n                                                onClick: _withModifiers(($event) => (handleSecondaryClick(btn.id)), [\"stop\"])\n                                            }, [\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass(['fa-solid', getButtonIcon(getSecondaryId(btn.id))])\n                                                }, null, 2 /* CLASS */)\n                                            ], 8 /* PROPS */, _hoisted_7))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _: 2 /* DYNAMIC */\n                                }, 1024 /* DYNAMIC_SLOTS */)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */)),\n                        _createCommentVNode(\"  \"),\n                        (hasHiddenButtons.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-action-btn acu-more-btn\", { active: isHiddenPopupVisible.value }]),\n                                    title: \"\",\n                                    onClick: _withModifiers(toggleHiddenPopup, [\"stop\"])\n                                }, [...(_cache[4] || (_cache[4] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-chevron-up\" }, null, -1 /* CACHED */)\n                                    ]))], 2 /* CLASS */)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  actions-area  action  \"),\n                        _createVNode(HiddenButtonsPopup, {\n                            visible: isHiddenPopupVisible.value,\n                            buttons: hiddenButtons.value,\n                            \"is-pinned\": __props.isPinned,\n                            onClose: _cache[0] || (_cache[0] = ($event) => (isHiddenPopupVisible.value = false)),\n                            onButtonClick: handleHiddenButtonClick\n                        }, null, 8 /* PROPS */, [\"visible\", \"buttons\", \"is-pinned\"]),\n                        _createCommentVNode(\" Tab actions-area  action  \"),\n                        _renderSlot(_ctx.$slots, \"tabs-popup\")\n                    ])\n                ], 2 /* CLASS */)\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MainPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"acu-tab-bar\" };\nconst _hoisted_2 = [\"title\", \"draggable\", \"onClick\", \"onDragstart\", \"onDragover\", \"onDrop\"];\nimport { computed, ref, watch } from 'vue';\nimport { useDataStore } from '../stores/useDataStore';\nimport { TAB_DASHBOARD, TAB_OPTIONS, TAB_RELATIONSHIP_GRAPH, useUIStore } from '../stores/useUIStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TabBar',\n    props: {\n        tabs: {},\n        activeTab: {},\n        showDashboard: { type: Boolean, default: true },\n        hasOptionsTabs: { type: Boolean, default: false },\n        hasRelationshipGraph: { type: Boolean, default: false },\n        isEditingOrder: { type: Boolean, default: false },\n        gridColumns: { default: 'repeat(auto-fill, minmax(90px, 1fr))' }\n    },\n    emits: [\"tab-change\", \"order-change\", \"exit-editing\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * TabBar.vue - \n         *  Tab \n         *\n         *  useUIStore  visibleTabs  Tab\n         * -  visibleTabs  Tab\n         * -  visibleTabs \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Store\n        // ============================================================\n        const uiStore = useUIStore();\n        const dataStore = useDataStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  Tab  () */\n        const sortedTabs = ref([]);\n        /**\n         *  Tab (//)\n         */\n        function isSpecialTab(tabId) {\n            return tabId === TAB_DASHBOARD || tabId === TAB_OPTIONS || tabId === TAB_RELATIONSHIP_GRAPH;\n        }\n        /**\n         *  Tab \n         */\n        function createTabObject(tabId) {\n            if (tabId === TAB_DASHBOARD) {\n                return { id: TAB_DASHBOARD, name: '', icon: 'fas fa-home' };\n            }\n            if (tabId === TAB_RELATIONSHIP_GRAPH) {\n                return { id: TAB_RELATIONSHIP_GRAPH, name: '', icon: 'fas fa-project-diagram' };\n            }\n            if (tabId === TAB_OPTIONS) {\n                return { id: TAB_OPTIONS, name: '', icon: 'fas fa-sliders-h' };\n            }\n            return sortedTabs.value.find(t => t.id === tabId);\n        }\n        /**\n         *  Tab \n         * -  visibleTabs  ->  -> \n         * -  visibleTabs \n         */\n        const allVisibleTabs = computed(() => {\n            const visibleTabs = uiStore.visibleTabs;\n            // 1. \n            if (!visibleTabs || visibleTabs.length === 0) {\n                const tabs = [];\n                // \n                if (props.showDashboard) {\n                    tabs.push({ id: TAB_DASHBOARD, name: '', icon: 'fas fa-home' });\n                }\n                // \n                tabs.push(...sortedTabs.value);\n                // \n                if (props.hasRelationshipGraph) {\n                    tabs.push({ id: TAB_RELATIONSHIP_GRAPH, name: '', icon: 'fas fa-project-diagram' });\n                }\n                // \n                if (props.hasOptionsTabs) {\n                    tabs.push({ id: TAB_OPTIONS, name: '', icon: 'fas fa-sliders-h' });\n                }\n                return tabs;\n            }\n            // 2. \n            return visibleTabs\n                .map(tabId => createTabObject(tabId))\n                .filter((tab) => {\n                //  undefined  Tab\n                if (!tab)\n                    return false;\n                if (tab.id === TAB_DASHBOARD && !props.showDashboard)\n                    return false;\n                if (tab.id === TAB_RELATIONSHIP_GRAPH && !props.hasRelationshipGraph)\n                    return false;\n                if (tab.id === TAB_OPTIONS && !props.hasOptionsTabs)\n                    return false;\n                return true;\n            });\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         *  Tab \n         * @param tabName Tab \n         */\n        function hasTabIssues(tabName) {\n            return dataStore.hasTableIssues(tabName);\n        }\n        /**\n         *  Tab  AI \n         * @param tabName Tab \n         */\n        function hasTabAiChanges(tabName) {\n            return dataStore.hasTableAiChanges(tabName);\n        }\n        /**\n         *  Tab  tooltip\n         * @param tab Tab \n         */\n        function getTabTooltip(tab) {\n            if (hasTabIssues(tab.name)) {\n                const issues = dataStore.getTableIssues(tab.name);\n                return `  ${issues.length} `;\n            }\n            return tab.name;\n        }\n        /**  Tab */\n        let draggedTab = null;\n        /**  Tab */\n        let dropTargetTab = null;\n        // ============================================================\n        //  props \n        // ============================================================\n        watch(() => props.tabs, newTabs => {\n            sortedTabs.value = [...newTabs];\n        }, { immediate: true, deep: true });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         *  Tab\n         */\n        const selectTab = (tabId) => {\n            //  Tab\n            if (props.isEditingOrder)\n                return;\n            emit('tab-change', tabId);\n        };\n        /**\n         * \n         */\n        const exitEditingOrder = () => {\n            emit('exit-editing');\n        };\n        // ============================================================\n        //  ( HTML5 Drag & Drop)\n        // ============================================================\n        const handleDragStart = (e, tab) => {\n            if (!props.isEditingOrder) {\n                e.preventDefault();\n                return;\n            }\n            draggedTab = tab;\n            if (e.dataTransfer) {\n                e.dataTransfer.effectAllowed = 'move';\n                e.dataTransfer.setData('text/plain', tab.id);\n            }\n            // \n            e.target.classList.add('dragging');\n        };\n        const handleDragOver = (e, tab) => {\n            if (!props.isEditingOrder || !draggedTab)\n                return;\n            e.preventDefault();\n            dropTargetTab = tab;\n        };\n        const handleDrop = (e, tab) => {\n            if (!props.isEditingOrder || !draggedTab)\n                return;\n            e.preventDefault();\n            const fromIndex = sortedTabs.value.findIndex(t => t.id === draggedTab.id);\n            const toIndex = sortedTabs.value.findIndex(t => t.id === tab.id);\n            if (fromIndex !== -1 && toIndex !== -1 && fromIndex !== toIndex) {\n                // \n                const [removed] = sortedTabs.value.splice(fromIndex, 1);\n                sortedTabs.value.splice(toIndex, 0, removed);\n                // \n                emit('order-change', sortedTabs.value.map(t => t.id));\n            }\n            draggedTab = null;\n            dropTargetTab = null;\n        };\n        const handleDragEnd = (e) => {\n            e.target.classList.remove('dragging');\n            draggedTab = null;\n            dropTargetTab = null;\n        };\n        // ============================================================\n        // \n        // ============================================================\n        __expose({\n            /**  */\n            getCurrentOrder: () => sortedTabs.value.map(t => t.id),\n            /**  Tab */\n            getVisibleTabs: () => allVisibleTabs.value.map(t => t.id),\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"acu-order-controls\", { visible: __props.isEditingOrder }])\n                }, [\n                    _createElementVNode(\"span\", null, [\n                        _cache[1] || (_cache[1] = _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }, null, -1 /* CACHED */)),\n                        _cache[2] || (_cache[2] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-order-done-btn\",\n                            onClick: exitEditingOrder\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ], 2 /* CLASS */),\n                _createCommentVNode(\" Tab  \"),\n                _createElementVNode(\"div\", {\n                    class: \"acu-nav-tabs-area\",\n                    style: _normalizeStyle({ '--acu-nav-cols': __props.gridColumns })\n                }, [\n                    _createCommentVNode(\"  Tab  \"),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(allVisibleTabs.value, (tab) => {\n                        return (_openBlock(), _createElementBlock(\"button\", {\n                            key: tab.id,\n                            class: _normalizeClass([\"acu-nav-btn\", {\n                                    'acu-nav-btn-special': isSpecialTab(tab.id),\n                                    active: __props.activeTab === tab.id,\n                                    'drag-handle': __props.isEditingOrder,\n                                    'has-issues': !isSpecialTab(tab.id) && hasTabIssues(tab.name),\n                                    'has-ai-changes': !isSpecialTab(tab.id) && !hasTabIssues(tab.name) && hasTabAiChanges(tab.name),\n                                }]),\n                            title: getTabTooltip(tab),\n                            draggable: __props.isEditingOrder,\n                            onClick: _withModifiers(($event) => (selectTab(tab.id)), [\"stop\"]),\n                            onDragstart: ($event) => (handleDragStart($event, tab)),\n                            onDragover: _withModifiers(($event) => (handleDragOver($event, tab)), [\"prevent\"]),\n                            onDrop: ($event) => (handleDrop($event, tab)),\n                            onDragend: handleDragEnd\n                        }, [\n                            (tab.icon)\n                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                    key: 0,\n                                    class: _normalizeClass(tab.icon)\n                                }, null, 2 /* CLASS */))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"span\", null, _toDisplayString(tab.name), 1 /* TEXT */)\n                        ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_2));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ], 4 /* STYLE */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TabBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TabBar.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Badge',\n    props: {\n        value: {},\n        type: { default: 'default' }\n    },\n    setup(__props) {\n        /**\n         * Badge \n         * \n         *\n         * \n         * - default: \n         * - level:  ( Lv.)\n         * - percent:  ( %)\n         * - male/female: \n         * - number: \n         * - success/warning/danger: \n         */\n        const props = __props;\n        /**\n         * \n         */\n        const detectedType = computed(() => {\n            // \n            if (props.type !== 'default')\n                return props.type;\n            const value = String(props.value);\n            // : Lv.  LV.  lv.\n            if (/Lv\\.?\\s*\\d+/i.test(value))\n                return 'level';\n            // : %\n            if (/\\d+(\\.\\d+)?%/.test(value))\n                return 'percent';\n            // \n            if (value === '')\n                return 'male';\n            if (value === '')\n                return 'female';\n            // \n            if (/^[+-]?\\d+(\\.\\d+)?$/.test(value.trim()))\n                return 'number';\n            // \n            return 'default';\n        });\n        /**\n         *  CSS \n         */\n        const badgeClass = computed(() => `acu-badge-${detectedType.value}`);\n        /**\n         * \n         */\n        const displayValue = computed(() => {\n            const val = props.value;\n            if (val === null || val === undefined || val === '') {\n                return '-';\n            }\n            return String(val);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"span\", {\n                class: _normalizeClass([\"acu-badge\", badgeClass.value])\n            }, _toDisplayString(displayValue.value), 3 /* TEXT, CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Badge.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Badge.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { vModelText as _vModelText, withModifiers as _withModifiers, createElementVNode as _createElementVNode, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport { nextTick, onBeforeUnmount, onMounted, ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'InlineEditor',\n    props: {\n        value: {},\n        minHeight: { default: 24 }\n    },\n    emits: [\"save\", \"cancel\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * InlineEditor \n         * \n         *\n         * \n         * - \n         * -  scrollHeight\n         * - Escape \n         * - Enter Shift+Enter \n         * - \n         * - \n         * -  pointerdown/mousedown \n         */\n        const props = __props;\n        const emit = __emit;\n        // \n        const textareaRef = ref();\n        // \n        const localValue = ref(String(props.value));\n        // \n        const hasSaved = ref(false);\n        // \n        const hasTextSelection = ref(false);\n        /**\n         * \n         */\n        const checkTextSelection = () => {\n            const selection = window.getSelection();\n            hasTextSelection.value = selection !== null && selection.toString().length > 0;\n        };\n        /**\n         *  scrollHeight\n         *  6.4.1.ts  autoResize \n         *\n         *  maxHeight textarea \n         *  textarea\n         */\n        const autoResize = () => {\n            const textarea = textareaRef.value;\n            if (!textarea)\n                return;\n            // \n            const currentHeight = textarea.offsetHeight;\n            //  0  scrollHeight\n            //  visibility: hidden \n            const originalVisibility = textarea.style.visibility;\n            textarea.style.visibility = 'hidden';\n            textarea.style.height = '0px';\n            // \n            const scrollHeight = textarea.scrollHeight;\n            const newHeight = Math.max(scrollHeight, props.minHeight);\n            // \n            textarea.style.visibility = originalVisibility;\n            // \n            if (newHeight === currentHeight && currentHeight > 0) {\n                textarea.style.height = `${currentHeight}px`;\n                return;\n            }\n            // \n            textarea.style.height = `${newHeight}px`;\n        };\n        /**\n         * \n         */\n        watch(localValue, () => {\n            nextTick(autoResize);\n        });\n        /**\n         * \n         * \n         */\n        const handleSave = () => {\n            if (hasSaved.value)\n                return;\n            hasSaved.value = true;\n            // \n            const originalValue = String(props.value);\n            if (localValue.value !== originalValue) {\n                emit('save', localValue.value);\n            }\n            else {\n                // \n                emit('cancel');\n            }\n        };\n        /**\n         * \n         */\n        const handleKeydown = (e) => {\n            if (e.key === 'Escape') {\n                // Escape \n                e.preventDefault();\n                e.stopPropagation();\n                hasSaved.value = true; //  blur \n                emit('cancel');\n            }\n            else if (e.key === 'Enter' && !e.shiftKey) {\n                // Enter  Shift+Enter\n                e.preventDefault();\n                e.stopPropagation();\n                handleSave();\n            }\n            // Shift+Enter \n        };\n        /**\n         *  touchstart \n         * \n         */\n        const handleTouchStart = (e) => {\n            // \n            e.stopPropagation();\n            // \n        };\n        /**\n         *  touchmove \n         *  textarea \n         */\n        const handleTouchMove = (e) => {\n            // \n            checkTextSelection();\n            if (hasTextSelection.value) {\n                // \n                // \n                e.stopPropagation();\n                return;\n            }\n            //  textarea \n            e.stopPropagation();\n            //  textarea \n        };\n        /**\n         * \n         */\n        onMounted(() => {\n            nextTick(() => {\n                const textarea = textareaRef.value;\n                if (!textarea)\n                    return;\n                //  scrollHeight\n                // \n                const scrollHeight = textarea.scrollHeight;\n                const initialHeight = Math.max(scrollHeight, props.minHeight);\n                textarea.style.height = `${initialHeight}px`;\n                // \n                textarea.focus();\n                const len = textarea.value.length;\n                textarea.setSelectionRange(len, len);\n            });\n            //  selectionchange \n            document.addEventListener('selectionchange', checkTextSelection);\n        });\n        /**\n         * \n         */\n        onBeforeUnmount(() => {\n            document.removeEventListener('selectionchange', checkTextSelection);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"acu-inline-editor\",\n                onClick: _cache[5] || (_cache[5] = _withModifiers(() => { }, [\"stop\"])),\n                onMousedown: _cache[6] || (_cache[6] = _withModifiers(() => { }, [\"stop\"])),\n                onPointerdown: _cache[7] || (_cache[7] = _withModifiers(() => { }, [\"stop\"]))\n            }, [\n                _withDirectives(_createElementVNode(\"textarea\", {\n                    ref_key: \"textareaRef\",\n                    ref: textareaRef,\n                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localValue).value = $event)),\n                    class: \"acu-edit-textarea\",\n                    onBlur: handleSave,\n                    onKeydown: handleKeydown,\n                    onClick: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"])),\n                    onMousedown: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"stop\"])),\n                    onPointerdown: _cache[3] || (_cache[3] = _withModifiers(() => { }, [\"stop\"])),\n                    onTouchstart: handleTouchStart,\n                    onTouchmove: handleTouchMove,\n                    onTouchend: _cache[4] || (_cache[4] = _withModifiers(() => { }, [\"stop\"]))\n                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                    [_vModelText, localValue.value]\n                ])\n            ], 32 /* NEED_HYDRATION */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./InlineEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./InlineEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vShow as _vShow, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, Fragment as _Fragment, withModifiers as _withModifiers, renderList as _renderList } from \"vue\";\nconst _hoisted_1 = {\n    key: 0,\n    class: \"acu-card-header\"\n};\nconst _hoisted_2 = {\n    key: 0,\n    class: \"acu-card-index\"\n};\nconst _hoisted_3 = {\n    key: 0,\n    class: \"fas fa-lock acu-title-lock-icon\"\n};\nconst _hoisted_4 = { class: \"acu-card-main-grid\" };\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = { class: \"acu-grid-label\" };\nconst _hoisted_7 = { class: \"acu-grid-value\" };\nconst _hoisted_8 = {\n    key: 0,\n    class: \"fas fa-lock acu-lock-icon\"\n};\nconst _hoisted_9 = {\n    key: 0,\n    class: \"acu-card-full-area\"\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = { class: \"acu-full-label\" };\nconst _hoisted_12 = { class: \"acu-full-value\" };\nconst _hoisted_13 = { key: 1 };\nconst _hoisted_14 = {\n    key: 0,\n    class: \"fas fa-lock acu-lock-icon\"\n};\nconst _hoisted_15 = { class: \"acu-card-body\" };\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = { class: \"acu-card-label\" };\nconst _hoisted_18 = { class: \"acu-card-value\" };\nconst _hoisted_19 = {\n    key: 0,\n    class: \"fas fa-lock acu-lock-icon\"\n};\nconst _hoisted_20 = { class: \"acu-pull-icon\" };\nconst _hoisted_21 = { class: \"acu-pull-text\" };\nconst _hoisted_22 = {\n    key: 3,\n    class: \"acu-delete-stamp\"\n};\nimport { computed, ref, watch, watchEffect } from 'vue';\nimport { useCardGestures, useCellLock, useIsMobile, useSelectionGuardEnhanced } from '../composables';\nimport { useDataStore } from '../stores/useDataStore';\nimport { useUIStore } from '../stores/useUIStore';\nimport Badge from './Badge.vue';\nimport InlineEditor from './InlineEditor.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DataCard',\n    props: {\n        data: {},\n        tableId: {},\n        tableName: {},\n        isChanged: { type: Boolean, default: false },\n        layout: { default: 'vertical' },\n        viewMode: { default: 'card' },\n        showIndex: { type: Boolean, default: true },\n        showHeader: { type: Boolean, default: true },\n        titleColIndex: { default: 1 },\n        showHistoryButton: { type: Boolean, default: true },\n        customHighlights: { default: undefined }\n    },\n    emits: [\"cellClick\", \"insertRow\", \"toggleDelete\", \"contextMenu\", \"showHistory\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * DataCard  \n         *\n         * \n         * - /\n         * - \n         * - \n         * - \n         * - -  VueUse useSwipe\n         * - \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // \n        // ============================================================\n        const cardRef = ref();\n        const editingCell = ref(null);\n        const dataStore = useDataStore();\n        const uiStore = useUIStore();\n        const cellLock = useCellLock();\n        //  DOM refs iframe \n        const pullTopRef = ref();\n        const pullBottomRef = ref();\n        const swipeLeftRef = ref();\n        const swipeRightRef = ref();\n        // \n        const { isMobile } = useIsMobile();\n        // \n        const showEdgeHint = ref(false);\n        const edgeHintTimer = ref(null);\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const rowKey = computed(() => `${props.tableName}-row-${props.data.index}`);\n        /**  */\n        const isDeleting = computed(() => dataStore.pendingDeletes.has(rowKey.value));\n        /**  */\n        const titleCell = computed(() => {\n            if (props.titleColIndex >= 0 && props.data.cells.length > props.titleColIndex) {\n                return props.data.cells[props.titleColIndex];\n            }\n            return null;\n        });\n        /** 0 */\n        const displayCells = computed(() => {\n            //  0  ( null )\n            let cells = props.data.cells.filter((_, idx) => idx > 0);\n            // \n            if (props.showHeader && titleCell.value && props.titleColIndex > 0) {\n                cells = cells.filter((_, idx) => idx + 1 !== props.titleColIndex); // +1 0\n            }\n            return cells;\n        });\n        /**  */\n        const isFullWidthCell = (cell) => {\n            const value = String(cell.value);\n            const key = cell.key.toLowerCase();\n            //  50 \n            return (value.length > 50 ||\n                key.includes('') ||\n                key.includes('') ||\n                key.includes('') ||\n                key.includes('') ||\n                key.includes('detail') ||\n                key.includes('description'));\n        };\n        /** Grid  */\n        const gridCells = computed(() => displayCells.value.filter(cell => !isFullWidthCell(cell)));\n        /** Full-Width  */\n        const fullWidthCells = computed(() => displayCells.value.filter(cell => isFullWidthCell(cell)));\n        /**  fallback */\n        const currentRowLockKey = computed(() => {\n            const headers = props.data.cells.map(c => c.key);\n            const rowData = props.data.cells.map(c => String(c.value ?? ''));\n            return cellLock.getRowKey(props.tableName, rowData, headers, props.data.index);\n        });\n        /**  */\n        const isCurrentRowLocked = computed(() => {\n            if (!uiStore.isLockEditMode)\n                return false;\n            const key = currentRowLockKey.value;\n            if (!key)\n                return false;\n            return cellLock.isRowLockedPending(props.tableName, key);\n        });\n        /**  */\n        const isTitleLocked = computed(() => {\n            if (!uiStore.isLockEditMode || !titleCell.value)\n                return false;\n            const key = currentRowLockKey.value;\n            if (!key)\n                return false;\n            return cellLock.isCellLockedPending(props.tableName, key, titleCell.value.key);\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         *  CSS class\n         * @param colIndex \n         * @returns CSS class \n         */\n        function getCellChangeClass(colIndex) {\n            // 1. \n            if (props.customHighlights?.has(colIndex)) {\n                return {\n                    'acu-cell-changed': true,\n                    'acu-cell-changed-manual': true,\n                };\n            }\n            // 2.  store \n            const cellId = `${props.tableName}-${props.data.index}-${colIndex}`;\n            const changeType = dataStore.getCellChangeType(cellId);\n            return {\n                'acu-cell-changed': changeType !== null,\n                'acu-cell-changed-manual': changeType === 'manual',\n                'acu-cell-changed-ai': changeType === 'ai',\n            };\n        }\n        /**\n         *  CSS class\n         * AI\n         */\n        const rowHighlightClass = computed(() => {\n            const changeType = dataStore.getRowChangeType(props.tableName, props.data.index, props.data.cells.length);\n            // \n            if (changeType === 'manual') {\n                return 'acu-highlight-changed acu-highlight-manual';\n            }\n            else if (changeType === 'ai') {\n                return 'acu-highlight-changed acu-highlight-ai';\n            }\n            return '';\n        });\n        // ============================================================\n        //  (VueUse )\n        // ============================================================\n        /**  */\n        const { isSelecting, shouldBlockInteraction, wasSelecting } = useSelectionGuardEnhanced();\n        /**  */\n        const handleInsertRow = () => {\n            console.info('[ACU DataCard] ');\n            emit('insertRow');\n        };\n        const handleToggleDelete = () => {\n            console.info('[ACU DataCard] ', { isDeleting: isDeleting.value });\n            emit('toggleDelete');\n        };\n        /**  composable */\n        const { isSwiping, gestureType, atStart, atEnd, checkScrollEdge, lengthX, lengthY } = useCardGestures(cardRef, {\n            layout: props.layout,\n            horizontalThreshold: 50, // \n            verticalThreshold: 40, // \n            edgeThreshold: 10,\n            onInsertRow: handleInsertRow,\n            onToggleDelete: handleToggleDelete,\n        });\n        /**  */\n        const pullHeight = computed(() => {\n            if (props.layout !== 'horizontal')\n                return 0;\n            const absY = Math.abs(lengthY?.value || 0);\n            return Math.min(absY * 0.6, 120);\n        });\n        const pullOpacity = computed(() => {\n            return Math.min(pullHeight.value / 80, 1);\n        });\n        /**  */\n        const swipeWidth = computed(() => {\n            if (props.layout !== 'vertical')\n                return 0;\n            const absX = Math.abs(lengthX?.value || 0);\n            return Math.min(absX * 0.7, 120);\n        });\n        const swipeOpacity = computed(() => {\n            return Math.min(swipeWidth.value / 60, 1);\n        });\n        // ============================================================\n        //  iframe  DOM \n        // Vue 3  (:style)  +  iframe \n        //  watchEffect  DOM  style \n        // ============================================================\n        // \n        watchEffect(() => {\n            if (pullTopRef.value) {\n                pullTopRef.value.style.height = `${pullHeight.value}px`;\n                pullTopRef.value.style.opacity = String(pullOpacity.value);\n            }\n            if (pullBottomRef.value) {\n                pullBottomRef.value.style.height = `${pullHeight.value}px`;\n                pullBottomRef.value.style.opacity = String(pullOpacity.value);\n            }\n        });\n        // \n        watchEffect(() => {\n            if (swipeLeftRef.value) {\n                swipeLeftRef.value.style.width = `${swipeWidth.value}px`;\n                swipeLeftRef.value.style.opacity = String(swipeOpacity.value);\n            }\n            if (swipeRightRef.value) {\n                swipeRightRef.value.style.width = `${swipeWidth.value}px`;\n                swipeRightRef.value.style.opacity = String(swipeOpacity.value);\n            }\n        });\n        // \n        watch([atStart, atEnd], ([start, end]) => {\n            if (isMobile.value && (start || end)) {\n                // \n                if (edgeHintTimer.value) {\n                    clearTimeout(edgeHintTimer.value);\n                }\n                showEdgeHint.value = true;\n                // 2\n                edgeHintTimer.value = setTimeout(() => {\n                    showEdgeHint.value = false;\n                }, 2000);\n            }\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        const handleScroll = (e) => {\n            checkScrollEdge(e);\n        };\n        /**\n         *  CSS class\n         * @param colIndex \n         */\n        function getCellLockClass(colIndex) {\n            // \n            if (!uiStore.isLockEditMode) {\n                return {};\n            }\n            const cell = props.data.cells[colIndex];\n            if (!cell)\n                return {};\n            const rowKey = currentRowLockKey.value;\n            if (!rowKey)\n                return {};\n            const isLocked = cellLock.isCellLockedPending(props.tableName, rowKey, cell.key);\n            const isRowLocked = cellLock.isRowLockedPending(props.tableName, rowKey);\n            return {\n                'acu-cell-locked': isLocked || isRowLocked,\n                'acu-cell-row-locked': isRowLocked,\n            };\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const handleRowLock = () => {\n            const rowKey = currentRowLockKey.value;\n            if (!rowKey) {\n                console.warn('[ACU] ');\n                return;\n            }\n            const headers = props.data.cells.map(c => c.key);\n            const rowData = props.data.cells.map(c => String(c.value ?? ''));\n            const isNowLocked = cellLock.toggleRowLock(props.tableName, rowKey, headers, rowData);\n            console.info(`[ACU] : ${rowKey} -> ${isNowLocked ? '' : ''}`);\n        };\n        /**\n         * \n         */\n        const handleCellClick = (colIndex) => {\n            // \n            if (shouldBlockInteraction() || wasSelecting.value) {\n                console.info('[ACU] ');\n                return;\n            }\n            // \n            if (isSwiping.value) {\n                console.info('[ACU] ');\n                return;\n            }\n            // \n            if (isDeleting.value) {\n                console.info('[ACU] ');\n                return;\n            }\n            // ========================================\n            // \n            // ========================================\n            if (uiStore.isLockEditMode) {\n                const cell = props.data.cells[colIndex];\n                if (!cell)\n                    return;\n                const rowKey = currentRowLockKey.value;\n                if (!rowKey) {\n                    console.warn('[ACU] ');\n                    return;\n                }\n                // \n                const cellValue = String(cell.value ?? '');\n                const isNowLocked = cellLock.toggleCellLock(props.tableName, rowKey, cell.key, cellValue);\n                console.info(`[ACU] : ${cell.key} -> ${isNowLocked ? '' : ''}`);\n                return;\n            }\n            // ========================================\n            // \n            // ========================================\n            editingCell.value = colIndex;\n            emit('cellClick', props.data.index, colIndex);\n        };\n        /**\n         * \n         * - \n         * - \n         */\n        const handleTitleClick = () => {\n            if (props.titleColIndex < 0 || !titleCell.value)\n                return;\n            // \n            if (isDeleting.value) {\n                console.info('[ACU] ');\n                return;\n            }\n            // ========================================\n            // \n            // ========================================\n            if (uiStore.isLockEditMode) {\n                const rowKey = currentRowLockKey.value;\n                if (!rowKey) {\n                    console.warn('[ACU] ');\n                    return;\n                }\n                const cellValue = String(titleCell.value.value ?? '');\n                const isNowLocked = cellLock.toggleCellLock(props.tableName, rowKey, titleCell.value.key, cellValue);\n                console.info(`[ACU] : ${titleCell.value.key} -> ${isNowLocked ? '' : ''}`);\n                return;\n            }\n            // ========================================\n            // \n            // ========================================\n            console.info('[ACU DataCard]  colIndex:', props.titleColIndex);\n            editingCell.value = props.titleColIndex;\n            emit('cellClick', props.data.index, props.titleColIndex);\n        };\n        /**\n         * \n         */\n        const handleCellSave = (colIndex, value) => {\n            //  store  ( tableName  tableId processToTableData  sheet.name)\n            dataStore.updateCell(props.tableName, props.data.index, colIndex, value);\n            // \n            //  applyLocks \n            const cell = props.data.cells[colIndex];\n            const rowKey = currentRowLockKey.value;\n            if (cell && rowKey) {\n                // \n                if (cellLock.isCellLocked(props.tableName, rowKey, cell.key)) {\n                    cellLock.updateLockedValue(props.tableName, rowKey, cell.key, value);\n                    console.info('[ACU] :', cell.key, '->', value);\n                }\n            }\n            // \n            editingCell.value = null;\n        };\n        /**\n         *  PC \n         * \n         */\n        const handleContextMenu = (e) => {\n            //  UA  PC \n            // useIsMobile  window.innerWidth < 768 \n            const MOBILE_UA_REGEX = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;\n            const isTrulyMobile = MOBILE_UA_REGEX.test(navigator.userAgent);\n            if (isTrulyMobile) {\n                console.info('[ACU] ');\n                return;\n            }\n            emit('contextMenu', e, props.data.index);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                ref_key: \"cardRef\",\n                ref: cardRef,\n                class: _normalizeClass([\"acu-data-card\", [\n                        rowHighlightClass.value,\n                        {\n                            'acu-editing-lock': editingCell.value !== null,\n                            'acu-style-list': __props.viewMode === 'list',\n                            'acu-style-card': __props.viewMode === 'card',\n                            'acu-swiping': _unref(isSwiping),\n                        },\n                    ]]),\n                onContextmenu: _withModifiers(handleContextMenu, [\"prevent\"]),\n                onScroll: handleScroll\n            }, [\n                _createCommentVNode(\"  prepend  \"),\n                _createCommentVNode(\"  v-show  v-if  DOM  watchEffect  \"),\n                _withDirectives(_createElementVNode(\"div\", {\n                    ref_key: \"pullTopRef\",\n                    ref: pullTopRef,\n                    class: \"acu-pull-overlay acu-pull-top\"\n                }, [...(_cache[6] || (_cache[6] = [\n                        _createElementVNode(\"div\", { class: \"acu-pull-icon\" }, [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }),\n                            _createElementVNode(\"span\", { class: \"acu-pull-text\" }, \"\")\n                        ], -1 /* CACHED */)\n                    ]))], 512 /* NEED_PATCH */), [\n                    [_vShow, __props.layout === 'horizontal' && _unref(isMobile) && _unref(gestureType) === 'insert']\n                ]),\n                _createCommentVNode(\"  \"),\n                (__props.showHeader)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                        (__props.showIndex)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, \"#\" + _toDisplayString(__props.data.index + 1), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        (titleCell.value && editingCell.value === __props.titleColIndex && !_unref(uiStore).isLockEditMode)\n                            ? (_openBlock(), _createBlock(InlineEditor, {\n                                key: 1,\n                                class: \"acu-title-editor\",\n                                value: titleCell.value.value,\n                                onSave: _cache[0] || (_cache[0] = ($event) => (handleCellSave(__props.titleColIndex, $event))),\n                                onCancel: _cache[1] || (_cache[1] = ($event) => (editingCell.value = null))\n                            }, null, 8 /* PROPS */, [\"value\"]))\n                            : (titleCell.value)\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"span\", {\n                                        class: _normalizeClass([\"acu-editable-title\", { 'acu-title-locked': isTitleLocked.value }]),\n                                        onClick: handleTitleClick\n                                    }, [\n                                        _createTextVNode(_toDisplayString(titleCell.value.value || '') + \" \", 1 /* TEXT */),\n                                        (isTitleLocked.value)\n                                            ? (_openBlock(), _createElementBlock(\"i\", _hoisted_3))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ], 2 /* CLASS */)\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        (_unref(uiStore).isLockEditMode)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 3,\n                                class: _normalizeClass([\"acu-row-lock-btn\", { 'acu-row-locked': isCurrentRowLocked.value }]),\n                                title: \"/\",\n                                onClick: _withModifiers(handleRowLock, [\"stop\"])\n                            }, [\n                                _createElementVNode(\"i\", {\n                                    class: _normalizeClass(isCurrentRowLocked.value ? 'fas fa-lock' : 'fas fa-lock-open')\n                                }, null, 2 /* CLASS */)\n                            ], 2 /* CLASS */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \"),\n                        (__props.showHistoryButton && !_unref(uiStore).isLockEditMode)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 4,\n                                class: \"acu-history-trigger\",\n                                title: \"\",\n                                onClick: _cache[2] || (_cache[2] = _withModifiers(($event) => (emit('showHistory')), [\"stop\"]))\n                            }, [...(_cache[7] || (_cache[7] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  - Card  \"),\n                (__props.viewMode === 'card')\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\" Card  \"),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(gridCells.value, (cell) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: cell.colIndex,\n                                    class: _normalizeClass([\"acu-grid-item\", [getCellChangeClass(cell.colIndex), getCellLockClass(cell.colIndex)]]),\n                                    onClick: ($event) => (handleCellClick(cell.colIndex))\n                                }, [\n                                    _createElementVNode(\"label\", _hoisted_6, _toDisplayString(cell.key), 1 /* TEXT */),\n                                    _createElementVNode(\"div\", _hoisted_7, [\n                                        (editingCell.value === cell.colIndex && !_unref(uiStore).isLockEditMode)\n                                            ? (_openBlock(), _createBlock(InlineEditor, {\n                                                key: 0,\n                                                value: cell.value,\n                                                onSave: ($event) => (handleCellSave(cell.colIndex, $event)),\n                                                onCancel: _cache[3] || (_cache[3] = ($event) => (editingCell.value = null))\n                                            }, null, 8 /* PROPS */, [\"value\", \"onSave\"]))\n                                            : (_openBlock(), _createBlock(Badge, {\n                                                key: 1,\n                                                value: cell.value\n                                            }, null, 8 /* PROPS */, [\"value\"]))\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    (_unref(uiStore).isLockEditMode && getCellLockClass(cell.colIndex)['acu-cell-locked'])\n                                        ? (_openBlock(), _createElementBlock(\"i\", _hoisted_8))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 10 /* CLASS, PROPS */, _hoisted_5));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\" Full-Width  \"),\n                        (fullWidthCells.value.length > 0)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(fullWidthCells.value, (cell) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: cell.colIndex,\n                                        class: _normalizeClass([\"acu-full-item\", [getCellChangeClass(cell.colIndex), getCellLockClass(cell.colIndex)]]),\n                                        onClick: ($event) => (handleCellClick(cell.colIndex))\n                                    }, [\n                                        _createElementVNode(\"label\", _hoisted_11, _toDisplayString(cell.key), 1 /* TEXT */),\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            (editingCell.value === cell.colIndex && !_unref(uiStore).isLockEditMode)\n                                                ? (_openBlock(), _createBlock(InlineEditor, {\n                                                    key: 0,\n                                                    value: cell.value,\n                                                    \"max-height\": 300,\n                                                    onSave: ($event) => (handleCellSave(cell.colIndex, $event)),\n                                                    onCancel: _cache[4] || (_cache[4] = ($event) => (editingCell.value = null))\n                                                }, null, 8 /* PROPS */, [\"value\", \"onSave\"]))\n                                                : (_openBlock(), _createElementBlock(\"span\", _hoisted_13, _toDisplayString(cell.value || '-'), 1 /* TEXT */))\n                                        ]),\n                                        _createCommentVNode(\"  \"),\n                                        (_unref(uiStore).isLockEditMode && getCellLockClass(cell.colIndex)['acu-cell-locked'])\n                                            ? (_openBlock(), _createElementBlock(\"i\", _hoisted_14))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_10));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 64 /* STABLE_FRAGMENT */))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                        _createCommentVNode(\"  - List  \"),\n                        _createElementVNode(\"div\", _hoisted_15, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayCells.value, (cell) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: cell.colIndex,\n                                    class: _normalizeClass([\"acu-card-row\", [getCellChangeClass(cell.colIndex), getCellLockClass(cell.colIndex)]]),\n                                    onClick: ($event) => (handleCellClick(cell.colIndex))\n                                }, [\n                                    _createElementVNode(\"label\", _hoisted_17, _toDisplayString(cell.key) + \":\", 1 /* TEXT */),\n                                    _createElementVNode(\"div\", _hoisted_18, [\n                                        (editingCell.value === cell.colIndex && !_unref(uiStore).isLockEditMode)\n                                            ? (_openBlock(), _createBlock(InlineEditor, {\n                                                key: 0,\n                                                value: cell.value,\n                                                onSave: ($event) => (handleCellSave(cell.colIndex, $event)),\n                                                onCancel: _cache[5] || (_cache[5] = ($event) => (editingCell.value = null))\n                                            }, null, 8 /* PROPS */, [\"value\", \"onSave\"]))\n                                            : (_openBlock(), _createBlock(Badge, {\n                                                key: 1,\n                                                value: cell.value\n                                            }, null, 8 /* PROPS */, [\"value\"]))\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    (_unref(uiStore).isLockEditMode && getCellLockClass(cell.colIndex)['acu-cell-locked'])\n                                        ? (_openBlock(), _createElementBlock(\"i\", _hoisted_19))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 10 /* CLASS, PROPS */, _hoisted_16));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])\n                    ], 64 /* STABLE_FRAGMENT */)),\n                _createCommentVNode(\"  append  \"),\n                _createCommentVNode(\"  v-show  v-if  DOM  watchEffect  \"),\n                _withDirectives(_createElementVNode(\"div\", {\n                    ref_key: \"pullBottomRef\",\n                    ref: pullBottomRef,\n                    class: _normalizeClass([\"acu-pull-overlay acu-pull-bottom\", { 'acu-pull-restore': isDeleting.value }])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_20, [\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(isDeleting.value ? 'fa-solid fa-undo' : 'fa-solid fa-trash')\n                        }, null, 2 /* CLASS */),\n                        _createElementVNode(\"span\", _hoisted_21, _toDisplayString(isDeleting.value ? '' : ''), 1 /* TEXT */)\n                    ])\n                ], 2 /* CLASS */), [\n                    [_vShow, __props.layout === 'horizontal' && _unref(isMobile) && _unref(gestureType) === 'delete']\n                ]),\n                _createCommentVNode(\"  ( .acu-badge-pending ) \"),\n                (isDeleting.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, \"\"))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  .acu-swipe-overlay  \"),\n                _createCommentVNode(\"  v-show  v-if  DOM  watchEffect  \"),\n                (__props.layout === 'vertical' && _unref(isMobile))\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 4 }, [\n                        _createCommentVNode(\"  \"),\n                        _withDirectives(_createElementVNode(\"div\", {\n                            ref_key: \"swipeLeftRef\",\n                            ref: swipeLeftRef,\n                            class: _normalizeClass([\"acu-swipe-overlay acu-swipe-left\", { 'acu-swipe-restore': isDeleting.value }])\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(isDeleting.value ? 'fa-solid fa-undo' : 'fa-solid fa-trash')\n                            }, null, 2 /* CLASS */)\n                        ], 2 /* CLASS */), [\n                            [_vShow, _unref(gestureType) === 'delete']\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _withDirectives(_createElementVNode(\"div\", {\n                            ref_key: \"swipeRightRef\",\n                            ref: swipeRightRef,\n                            class: \"acu-swipe-overlay acu-swipe-right\"\n                        }, [...(_cache[8] || (_cache[8] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */)\n                            ]))], 512 /* NEED_PATCH */), [\n                            [_vShow, _unref(gestureType) === 'insert']\n                        ])\n                    ], 64 /* STABLE_FRAGMENT */))\n                    : _createCommentVNode(\"v-if\", true)\n            ], 34 /* CLASS, NEED_HYDRATION */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DataCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DataCard.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"acu-embedded-options\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_3 = { class: \"acu-embedded-options-list\" };\nconst _hoisted_4 = { class: \"acu-embedded-option-title\" };\nconst _hoisted_5 = { class: \"acu-embedded-option-rows\" };\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = {\n    key: 0,\n    class: \"acu-embedded-option-tags\"\n};\nconst _hoisted_8 = { class: \"acu-embedded-option-text\" };\nimport { computed } from 'vue';\nimport { useCoreActions } from '../../composables/useCoreActions';\n/**\n * \n * \n * 1. \n * 2. \n */\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'EmbeddedOptionsPanel',\n    props: {\n        tables: {}\n    },\n    setup(__props) {\n        /**\n         * \n         * \n         */\n        const props = __props;\n        // ============================================================\n        // Composables\n        // ============================================================\n        const { setInput } = useCoreActions();\n        // ============================================================\n        // Computed\n        // ============================================================\n        /** \"\" */\n        const optionTables = computed(() => {\n            return props.tables.filter(t => t.name.includes('') || t.name.toLowerCase().includes('option'));\n        });\n        // ============================================================\n        // \n        // ============================================================\n        function getOptionItems(table) {\n            if (!table || !table.rows)\n                return [];\n            return table.rows.map(row => {\n                const cells = row.cells;\n                if (cells.length === 0) {\n                    return { tags: [], text: '' };\n                }\n                else if (cells.length === 1) {\n                    // \n                    return { tags: [], text: String(cells[0].value) };\n                }\n                else {\n                    // \n                    const tags = cells\n                        .slice(0, -1)\n                        .map(c => String(c.value))\n                        .filter(v => v.trim() !== '');\n                    const text = String(cells[cells.length - 1].value);\n                    return { tags, text };\n                }\n            });\n        }\n        /**\n         * \n         */\n        function handleOptionClick(text) {\n            if (text.trim()) {\n                setInput(text.trim());\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                (optionTables.value.length === 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [...(_cache[0] || (_cache[0] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-inbox\" }, null, -1 /* CACHED */),\n                            _createTextVNode(\" \\\"\\\" \", -1 /* CACHED */)\n                        ]))]))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(optionTables.value, (table) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: table.id,\n                                    class: \"acu-embedded-option-group\"\n                                }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_4, _toDisplayString(table.name), 1 /* TEXT */),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_5, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getOptionItems(table), (optionItem, optIdx) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: optIdx,\n                                                class: \"acu-embedded-option-row\",\n                                                title: \"\",\n                                                onClick: _withModifiers(($event) => (handleOptionClick(optionItem.text)), [\"stop\"])\n                                            }, [\n                                                _createCommentVNode(\"  \"),\n                                                (optionItem.tags.length > 0)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(optionItem.tags, (tag, tagIdx) => {\n                                                            return (_openBlock(), _createElementBlock(\"span\", {\n                                                                key: tagIdx,\n                                                                class: \"acu-badge acu-option-tag\"\n                                                            }, _toDisplayString(tag), 1 /* TEXT */));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_8, _toDisplayString(optionItem.text), 1 /* TEXT */)\n                                            ], 8 /* PROPS */, _hoisted_6));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ])\n                                ]));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])\n                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./EmbeddedOptionsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EmbeddedOptionsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = { class: \"acu-status-board\" };\nconst _hoisted_2 = { class: \"acu-status-board-header\" };\nconst _hoisted_3 = { class: \"acu-status-board-summary\" };\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = { class: \"acu-status-table-wrapper\" };\nconst _hoisted_6 = { class: \"acu-status-table\" };\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = { class: \"acu-status-name\" };\nconst _hoisted_9 = { class: \"acu-status-freq\" };\nconst _hoisted_10 = {\n    key: 0,\n    class: \"acu-status-disabled\"\n};\nconst _hoisted_11 = { key: 1 };\nconst _hoisted_12 = {\n    key: 2,\n    class: \"acu-status-global-hint\"\n};\nconst _hoisted_13 = { class: \"acu-status-last-update\" };\nconst _hoisted_14 = { key: 0 };\nconst _hoisted_15 = { key: 1 };\nimport { onMounted } from 'vue';\nimport { useTableUpdateStatus } from '../../composables/useTableUpdateStatus';\n// ============================================================\n// Emits\n// ============================================================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TableStatusBoard',\n    emits: [\"tableClick\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * \n         * \n         */\n        const emit = __emit;\n        // ============================================================\n        // Composable\n        // ============================================================\n        const { statusList, isLoading, currentTotalAiFloors, refresh, formatLastUpdate, getUnrecordedClass } = useTableUpdateStatus();\n        // ============================================================\n        // Methods\n        // ============================================================\n        /**\n         * \n         */\n        async function handleRefresh() {\n            await refresh();\n        }\n        /**\n         * \n         */\n        function handleTableClick(item) {\n            emit('tableClick', item.sheetKey, item.name);\n        }\n        // ============================================================\n        // Lifecycle\n        // ============================================================\n        onMounted(() => {\n            // \n            refresh();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"span\", _hoisted_3, \"  \" + _toDisplayString(_unref(statusList).length) + \"   AI \" + _toDisplayString(_unref(currentTotalAiFloors)), 1 /* TEXT */),\n                    _createElementVNode(\"button\", {\n                        class: \"acu-toolbar-btn\",\n                        disabled: _unref(isLoading),\n                        title: \"\",\n                        onClick: _withModifiers(handleRefresh, [\"stop\"])\n                    }, [\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass([\"fas fa-redo\", { 'fa-spin': _unref(isLoading) }])\n                        }, null, 2 /* CLASS */)\n                    ], 8 /* PROPS */, _hoisted_4)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createElementVNode(\"table\", _hoisted_6, [\n                        _cache[2] || (_cache[2] = _createElementVNode(\"thead\", null, [\n                            _createElementVNode(\"tr\", null, [\n                                _createElementVNode(\"th\", { class: \"acu-status-col-name\" }, \"\"),\n                                _createElementVNode(\"th\", { class: \"acu-status-col-freq\" }, \"\"),\n                                _createElementVNode(\"th\", { class: \"acu-status-col-unrecorded\" }, \"\"),\n                                _createElementVNode(\"th\", { class: \"acu-status-col-last\" }, \"\")\n                            ])\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"tbody\", null, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(statusList), (item) => {\n                                return (_openBlock(), _createElementBlock(\"tr\", {\n                                    key: item.sheetKey,\n                                    onClick: _withModifiers(($event) => (handleTableClick(item)), [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"td\", _hoisted_8, _toDisplayString(item.name), 1 /* TEXT */),\n                                    _createElementVNode(\"td\", _hoisted_9, [\n                                        (item.effectiveFrequency === 0)\n                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, \"\"))\n                                            : (_openBlock(), _createElementBlock(\"span\", _hoisted_11, _toDisplayString(item.effectiveFrequency), 1 /* TEXT */)),\n                                        (item.updateFrequency === -1)\n                                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, \"()\"))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _createElementVNode(\"td\", {\n                                        class: _normalizeClass([\"acu-status-unrecorded\", _unref(getUnrecordedClass)(item)])\n                                    }, _toDisplayString(item.hasHistory ? item.unrecordedFloors : ''), 3 /* TEXT, CLASS */),\n                                    _createElementVNode(\"td\", _hoisted_13, [\n                                        _createCommentVNode(\" : AI/ \"),\n                                        _createTextVNode(\" \" + _toDisplayString(_unref(formatLastUpdate)(item)), 1 /* TEXT */)\n                                    ])\n                                ], 8 /* PROPS */, _hoisted_7));\n                            }), 128 /* KEYED_FRAGMENT */)),\n                            _createCommentVNode(\"  \"),\n                            (_unref(statusList).length === 0 && !_unref(isLoading))\n                                ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_14, [...(_cache[0] || (_cache[0] = [\n                                        _createElementVNode(\"td\", {\n                                            colspan: \"4\",\n                                            class: \"acu-status-empty\"\n                                        }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-inbox\" }),\n                                            _createTextVNode(\"  \")\n                                        ], -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            (_unref(isLoading) && _unref(statusList).length === 0)\n                                ? (_openBlock(), _createElementBlock(\"tr\", _hoisted_15, [...(_cache[1] || (_cache[1] = [\n                                        _createElementVNode(\"td\", {\n                                            colspan: \"4\",\n                                            class: \"acu-status-loading\"\n                                        }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-spinner fa-spin\" }),\n                                            _createTextVNode(\" ... \")\n                                        ], -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TableStatusBoard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TableStatusBoard.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, createBlock as _createBlock, createVNode as _createVNode, vShow as _vShow, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = [\"draggable\"];\nconst _hoisted_2 = {\n    key: 0,\n    class: \"acu-dash-count\"\n};\nconst _hoisted_3 = {\n    key: 0,\n    class: \"acu-dash-actions\"\n};\nconst _hoisted_4 = [\"title\"];\nconst _hoisted_5 = [\"title\", \"onClick\"];\nconst _hoisted_6 = {\n    key: 0,\n    class: \"acu-dash-npc-grid\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = { class: \"acu-dash-npc-text\" };\nconst _hoisted_9 = [\"title\", \"onClick\"];\nconst _hoisted_10 = { class: \"acu-dash-list\" };\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = { class: \"acu-dash-list-text\" };\nconst _hoisted_13 = [\"title\", \"onClick\"];\nconst _hoisted_14 = { class: \"acu-dash-compact\" };\nconst _hoisted_15 = { class: \"acu-dash-stat-label\" };\nconst _hoisted_16 = { class: \"acu-dash-empty\" };\nimport { computed, ref } from 'vue';\nimport { useCoreActions } from '../../composables/useCoreActions';\nimport { useUIStore } from '../../stores/useUIStore';\nimport { WIDGET_ACTIONS } from '../../types';\nimport EmbeddedOptionsPanel from './EmbeddedOptionsPanel.vue';\nimport TableStatusBoard from './TableStatusBoard.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DashboardWidget',\n    props: {\n        config: {},\n        tableData: {},\n        isEditing: { type: Boolean },\n        diffMap: {},\n        allTables: {}\n    },\n    emits: [\"navigate\", \"row-click\", \"row-edit\", \"action\", \"remove\", \"resize\", \"config-actions\", \"drag-start\", \"drag-end\", \"drop\"],\n    setup(__props, { emit: __emit }) {\n        const uiStore = useUIStore();\n        const { setInput } = useCoreActions();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const isCollapsed = ref(false);\n        // Props\n        const props = __props;\n        // Emits\n        const emit = __emit;\n        // ============================================================\n        // Computed\n        // ============================================================\n        /**  */\n        const totalCount = computed(() => props.tableData?.rows.length ?? 0);\n        /**  */\n        const rowCount = computed(() => displayRows.value.length);\n        /**  -  */\n        const displayTitle = computed(() => {\n            // \n            if (props.tableData?.name) {\n                return props.tableData.name;\n            }\n            // \n            return props.config.title;\n        });\n        /**  () */\n        const displayRows = computed(() => {\n            if (!props.tableData)\n                return [];\n            return props.tableData.rows;\n        });\n        /**  class */\n        const bodyClass = computed(() => ({\n            'acu-dash-body-scrollable': true,\n        }));\n        /**  goToTable  */\n        const filteredActions = computed(() => {\n            return props.config.actions.filter(actionId => actionId !== 'goToTable');\n        });\n        /**  goToTable  settings settings  */\n        const filteredActionsNoSettings = computed(() => {\n            return props.config.actions.filter(actionId => actionId !== 'goToTable' && actionId !== 'settings');\n        });\n        // ============================================================\n        // Methods - \n        // ============================================================\n        /**\n         *  ( titleColumn displayColumns)\n         */\n        function getDisplayValue(row) {\n            const { titleColumn, displayColumns } = props.config;\n            //  titleColumn\n            if (titleColumn) {\n                const cell = row.cells.find(c => c.key.toLowerCase() === titleColumn.toLowerCase() || c.key.toLowerCase().includes(titleColumn.toLowerCase()));\n                if (cell && cell.value) {\n                    return String(cell.value);\n                }\n            }\n            //  displayColumns\n            if (displayColumns.length > 0) {\n                for (const colName of displayColumns) {\n                    const cell = row.cells.find(c => c.key.toLowerCase().includes(colName.toLowerCase()));\n                    if (cell && cell.value) {\n                        return String(cell.value);\n                    }\n                }\n            }\n            // \n            const firstCell = row.cells.find(c => c.value && String(c.value).trim());\n            return firstCell ? String(firstCell.value) : ` ${row.index + 1}`;\n        }\n        /**\n         *  ()\n         * \n         */\n        function getSecondaryValue(row) {\n            const { displayColumns } = props.config;\n            const primaryValue = getDisplayValue(row);\n            // \n            if (displayColumns.length > 1) {\n                // \n                for (let i = 1; i < displayColumns.length; i++) {\n                    const colName = displayColumns[i];\n                    const cell = row.cells.find(c => c.key.toLowerCase().includes(colName.toLowerCase()));\n                    if (cell && cell.value) {\n                        const val = String(cell.value);\n                        // \n                        if (val !== primaryValue) {\n                            return val;\n                        }\n                    }\n                }\n            }\n            return null;\n        }\n        /**\n         *  ()\n         */\n        function getLabel(row) {\n            return row.cells[0]?.value ? String(row.cells[0].value) : ` ${row.index + 1}`;\n        }\n        /**\n         *  ()\n         */\n        function getValue(row) {\n            return row.cells[1]?.value ? String(row.cells[1].value) : '-';\n        }\n        /**\n         * \n         */\n        function isRowChanged(row) {\n            if (!props.config.tableId)\n                return false;\n            const key = `${props.config.tableId}:${row.key}`;\n            return props.diffMap.has(key);\n        }\n        /**\n         *  ( displayTagColumns )\n         */\n        function getDisplayTags(row) {\n            const displayTagColumns = props.config.displayTagColumns;\n            if (!displayTagColumns || displayTagColumns.length === 0) {\n                return [];\n            }\n            const tags = [];\n            for (const colName of displayTagColumns) {\n                // \n                const cell = row.cells.find(c => c.key.toLowerCase() === colName.toLowerCase() || c.key.toLowerCase().includes(colName.toLowerCase()));\n                if (cell && cell.value) {\n                    const value = String(cell.value).trim();\n                    if (value) {\n                        tags.push({ column: colName, value });\n                    }\n                }\n            }\n            return tags;\n        }\n        /**  */\n        const TAG_SEPARATORS = /[,;|/]/;\n        /**\n         *  ( interactiveTagConfig )\n         * \n         */\n        function getInteractiveTags(row) {\n            const tagConfig = props.config.interactiveTagConfig;\n            if (!tagConfig || tagConfig.sourceColumns.length === 0) {\n                return [];\n            }\n            const result = [];\n            const tagDefinitions = tagConfig.tagDefinitions || [];\n            // \n            for (const colName of tagConfig.sourceColumns) {\n                const cell = row.cells.find(c => c.key.toLowerCase() === colName.toLowerCase() || c.key.toLowerCase().includes(colName.toLowerCase()));\n                if (cell && cell.value) {\n                    const rawValue = String(cell.value).trim();\n                    if (!rawValue)\n                        continue;\n                    // \n                    const values = rawValue\n                        .split(TAG_SEPARATORS)\n                        .map(v => v.trim())\n                        .filter(Boolean);\n                    for (const value of values) {\n                        // \n                        const matchedDef = tagDefinitions.find(def => def.label.toLowerCase() === value.toLowerCase());\n                        if (matchedDef) {\n                            // \n                            result.push({ tag: matchedDef, value, matchedDefinition: true });\n                        }\n                        else {\n                            // \n                            const defaultTag = {\n                                id: `dynamic_${value}`,\n                                label: value,\n                                promptTemplate: '{{value}}', // \n                                isFixed: false,\n                            };\n                            result.push({ tag: defaultTag, value, matchedDefinition: false });\n                        }\n                    }\n                }\n            }\n            return result;\n        }\n        /**\n         *  tooltip\n         */\n        function getTagTooltip(tag) {\n            if (!tag.promptTemplate)\n                return tag.label;\n            // \n            let preview = tag.promptTemplate;\n            preview = preview.replace(/\\{\\{value\\}\\}/gi, `[${tag.label}]`);\n            preview = preview.replace(/\\{\\{rowTitle\\}\\}/gi, '[]');\n            preview = preview.replace(/\\{\\{playerName\\}\\}/gi, '[]');\n            return preview.length > 50 ? preview.substring(0, 50) + '...' : preview;\n        }\n        /**\n         * \n         * @param tag \n         * @param row \n         */\n        function handleInteractiveTagClick(tag, row) {\n            // \n            let prompt = tag.promptTemplate;\n            // {{value}} - \n            prompt = prompt.replace(/\\{\\{value\\}\\}/gi, tag.label);\n            // {{rowTitle}} - \n            const rowTitle = getDisplayValue(row);\n            prompt = prompt.replace(/\\{\\{rowTitle\\}\\}/gi, rowTitle);\n            // {{playerName}} - \n            const playerName = getPlayerName();\n            prompt = prompt.replace(/\\{\\{playerName\\}\\}/gi, playerName);\n            // \n            if (prompt) {\n                setInput(prompt);\n            }\n        }\n        /**\n         * \n         */\n        function getPlayerName() {\n            const parentWin = window.parent || window;\n            try {\n                const ctx = parentWin.SillyTavern?.getContext?.();\n                if (ctx?.name1) {\n                    return ctx.name1;\n                }\n            }\n            catch (e) {\n                console.warn('[ACU] ', e);\n            }\n            return '{{user}}';\n        }\n        // ============================================================\n        // Methods - \n        // ============================================================\n        /**\n         * \n         */\n        function handleConfigActions() {\n            uiStore.openWidgetActionsDialog({\n                widgetId: props.config.id,\n                currentActions: props.config.actions,\n            });\n        }\n        function getActionIcon(actionId) {\n            return WIDGET_ACTIONS[actionId]?.icon ?? 'fa-question';\n        }\n        function getActionTooltip(actionId) {\n            return WIDGET_ACTIONS[actionId]?.tooltip ?? actionId;\n        }\n        function handleAction(actionId) {\n            // \n            if (actionId === 'settings') {\n                // headers  string[]\n                const tableHeaders = props.tableData?.headers ?? [];\n                uiStore.openWidgetSettingsDialog({\n                    widgetId: props.config.id,\n                    widgetConfig: props.config,\n                    tableHeaders,\n                });\n                return;\n            }\n            // \n            if (actionId === 'nativeEdit') {\n                //  tableId \n                openNativeEditor(props.config.tableId);\n                return;\n            }\n            // \n            if (props.config.tableId) {\n                emit('action', actionId, props.config.tableId);\n            }\n        }\n        /**\n         * \n         * @param tableId  ID ( tableId )\n         */\n        function openNativeEditor(tableId) {\n            try {\n                const parentWin = window.parent || window;\n                const api = parentWin.AutoCardUpdaterAPI;\n                if (tableId && api?.openTableEditor) {\n                    //  tableId\n                    api.openTableEditor(tableId);\n                }\n                else if (api?.openVisualizer) {\n                    //  tableId\n                    api.openVisualizer();\n                    console.info('[ACU] ');\n                }\n                else if (api?.openModal) {\n                    // \n                    api.openModal();\n                }\n                else {\n                    console.warn('[ACU] API ');\n                }\n            }\n            catch (e) {\n                console.error('[ACU] ', e);\n            }\n        }\n        // ============================================================\n        // Methods - \n        // ============================================================\n        function handleNavigate() {\n            if (props.config.tableId) {\n                emit('navigate', props.config.tableId);\n            }\n        }\n        /**\n         * \n         * @param tableId  ID\n         */\n        function handleStatusTableClick(tableId) {\n            emit('navigate', tableId);\n        }\n        /**\n         *  - \n         */\n        function handleTitleTextClick() {\n            if (!props.isEditing && props.config.tableId) {\n                emit('navigate', props.config.tableId);\n            }\n        }\n        /**\n         * - /\n         */\n        function handleTitleAreaClick() {\n            if (!props.isEditing) {\n                isCollapsed.value = !isCollapsed.value;\n            }\n        }\n        /**\n         *  - \n         * ()\n         */\n        function handleRowClick(row) {\n            if (props.config.tableId) {\n                emit('row-edit', props.config.tableId, row);\n            }\n        }\n        function handleEditRow(row) {\n            if (props.config.tableId) {\n                emit('row-edit', props.config.tableId, row);\n            }\n        }\n        // ============================================================\n        // Methods - \n        // ============================================================\n        /**\n         * \n         */\n        function startResize(e) {\n            e.preventDefault();\n            // : 1 -> 2, 2 -> 1\n            const newColSpan = props.config.colSpan === 1 ? 2 : 1;\n            emit('resize', props.config.id, newColSpan);\n        }\n        /**\n         * \n         */\n        function handleDragStart(e) {\n            if (!props.isEditing) {\n                e.preventDefault();\n                return;\n            }\n            e.dataTransfer?.setData('text/plain', props.config.id);\n            emit('drag-start', props.config.id);\n        }\n        /**\n         * \n         */\n        function handleDragEnd() {\n            emit('drag-end');\n        }\n        /**\n         * \n         */\n        function handleDrop(e) {\n            e.preventDefault();\n            emit('drop', props.config.id);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"acu-dash-widget\", {\n                        'acu-dash-widget-wide': __props.config.colSpan === 2,\n                        'acu-dash-widget-editing': __props.isEditing,\n                    }]),\n                draggable: __props.isEditing,\n                onDragstart: handleDragStart,\n                onDragend: handleDragEnd,\n                onDragover: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"prevent\"])),\n                onDrop: handleDrop\n            }, [\n                _createCommentVNode(\"  () \"),\n                (__props.isEditing)\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                        _createElementVNode(\"button\", {\n                            class: \"acu-widget-remove\",\n                            title: \"\",\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (emit('remove', __props.config.id)), [\"stop\"]))\n                        }, [...(_cache[3] || (_cache[3] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-widget-config\",\n                            title: \"\",\n                            onClick: _withModifiers(handleConfigActions, [\"stop\"])\n                        }, [...(_cache[4] || (_cache[4] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"div\", {\n                            class: \"acu-widget-resize\",\n                            title: \"\",\n                            onMousedown: _withModifiers(startResize, [\"stop\"]),\n                            onTouchstart: _withModifiers(startResize, [\"stop\"])\n                        }, [...(_cache[5] || (_cache[5] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-expand-alt\" }, null, -1 /* CACHED */)\n                            ]))], 32 /* NEED_HYDRATION */)\n                    ], 64 /* STABLE_FRAGMENT */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  - / \"),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"acu-dash-title\", { 'acu-dash-title-clickable': !__props.isEditing }]),\n                    onClick: handleTitleAreaClick\n                }, [\n                    _createElementVNode(\"span\", {\n                        class: \"acu-dash-title-text\",\n                        onClick: _withModifiers(handleTitleTextClick, [\"stop\"])\n                    }, [\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(['fas', __props.config.icon])\n                        }, null, 2 /* CLASS */),\n                        _createTextVNode(\" \" + _toDisplayString(displayTitle.value) + \" \", 1 /* TEXT */),\n                        (rowCount.value > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, _toDisplayString(rowCount.value), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    (!__props.isEditing)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass([\"fas acu-dash-collapse-icon\", isCollapsed.value ? 'fa-chevron-down' : 'fa-chevron-up'])\n                            }, null, 2 /* CLASS */),\n                            _createCommentVNode(\"  (updateStatus ) \"),\n                            (__props.config.type !== 'updateStatus')\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 0,\n                                    class: \"acu-dash-action-btn\",\n                                    title: getActionTooltip('settings'),\n                                    onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (handleAction('settings')), [\"stop\"]))\n                                }, [...(_cache[6] || (_cache[6] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-cog\" }, null, -1 /* CACHED */)\n                                    ]))], 8 /* PROPS */, _hoisted_4))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\"  \"),\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredActionsNoSettings.value, (actionId) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: actionId,\n                                    class: \"acu-dash-action-btn\",\n                                    title: getActionTooltip(actionId),\n                                    onClick: _withModifiers(($event) => (handleAction(actionId)), [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(['fas', getActionIcon(actionId)])\n                                    }, null, 2 /* CLASS */)\n                                ], 8 /* PROPS */, _hoisted_5));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 2 /* CLASS */),\n                _createCommentVNode(\"  (, ) \"),\n                _withDirectives(_createElementVNode(\"div\", {\n                    class: _normalizeClass([\"acu-dash-body\", bodyClass.value])\n                }, [\n                    _createCommentVNode(\" :  \"),\n                    (__props.config.type === 'updateStatus')\n                        ? (_openBlock(), _createBlock(TableStatusBoard, {\n                            key: 0,\n                            onTableClick: handleStatusTableClick\n                        }))\n                        : (__props.config.type === 'optionsPanel')\n                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                _createCommentVNode(\" :  \"),\n                                _createVNode(EmbeddedOptionsPanel, {\n                                    tables: __props.allTables ?? [],\n                                    onNavigate: handleNavigate\n                                }, null, 8 /* PROPS */, [\"tables\"])\n                            ], 64 /* STABLE_FRAGMENT */))\n                            : (__props.tableData && displayRows.value.length > 0)\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createCommentVNode(\"  (NPC) \"),\n                                    (__props.config.displayStyle === 'grid')\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayRows.value, (row) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: row.key,\n                                                    class: _normalizeClass([\"acu-dash-npc-item acu-dash-interactive\", { 'acu-highlight-changed': isRowChanged(row) }]),\n                                                    onClick: _withModifiers(($event) => (handleRowClick(row)), [\"stop\"])\n                                                }, [\n                                                    _createElementVNode(\"span\", _hoisted_8, _toDisplayString(getDisplayValue(row)), 1 /* TEXT */),\n                                                    _createCommentVNode(\"  \"),\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getDisplayTags(row), (tag) => {\n                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                            key: tag.column,\n                                                            class: \"acu-dash-display-tag\"\n                                                        }, _toDisplayString(tag.value), 1 /* TEXT */));\n                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                    _createCommentVNode(\"  \"),\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getInteractiveTags(row), (item) => {\n                                                        return (_openBlock(), _createElementBlock(\"span\", {\n                                                            key: item.tag.id,\n                                                            class: _normalizeClass([\"acu-dash-interactive-tag\", { fixed: item.tag.isFixed }]),\n                                                            title: getTagTooltip(item.tag),\n                                                            onClick: _withModifiers(($event) => (handleInteractiveTagClick(item.tag, row)), [\"stop\"])\n                                                        }, _toDisplayString(item.value), 11 /* TEXT, CLASS, PROPS */, _hoisted_9));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ], 10 /* CLASS, PROPS */, _hoisted_7));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]))\n                                        : (__props.config.displayStyle === 'list')\n                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createCommentVNode(\"  () \"),\n                                                _createElementVNode(\"div\", _hoisted_10, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayRows.value, (row) => {\n                                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                                            key: row.key,\n                                                            class: _normalizeClass([\"acu-dash-list-item acu-dash-interactive\", { 'acu-highlight-changed': isRowChanged(row) }]),\n                                                            onClick: _withModifiers(($event) => (handleRowClick(row)), [\"stop\"])\n                                                        }, [\n                                                            _cache[7] || (_cache[7] = _createElementVNode(\"i\", {\n                                                                class: \"fas fa-circle\",\n                                                                style: { \"font-size\": \"6px\" }\n                                                            }, null, -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_12, _toDisplayString(getDisplayValue(row)), 1 /* TEXT */),\n                                                            _createCommentVNode(\"  \"),\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getDisplayTags(row), (tag) => {\n                                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                                    key: tag.column,\n                                                                    class: \"acu-dash-display-tag\"\n                                                                }, _toDisplayString(tag.value), 1 /* TEXT */));\n                                                            }), 128 /* KEYED_FRAGMENT */)),\n                                                            _createCommentVNode(\"  \"),\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getInteractiveTags(row), (item) => {\n                                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                                    key: item.tag.id,\n                                                                    class: _normalizeClass([\"acu-dash-interactive-tag\", { fixed: item.tag.isFixed }]),\n                                                                    title: getTagTooltip(item.tag),\n                                                                    onClick: _withModifiers(($event) => (handleInteractiveTagClick(item.tag, row)), [\"stop\"])\n                                                                }, _toDisplayString(item.value), 11 /* TEXT, CLASS, PROPS */, _hoisted_13));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ], 10 /* CLASS, PROPS */, _hoisted_11));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ])\n                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                                _createCommentVNode(\"  () \"),\n                                                _createElementVNode(\"div\", _hoisted_14, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayRows.value, (row) => {\n                                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                                            key: row.key,\n                                                            class: \"acu-dash-stat-row\"\n                                                        }, [\n                                                            _createElementVNode(\"span\", _hoisted_15, _toDisplayString(getLabel(row)), 1 /* TEXT */),\n                                                            _createElementVNode(\"span\", {\n                                                                class: _normalizeClass([\"acu-dash-stat-val\", { 'acu-highlight-changed': isRowChanged(row) }])\n                                                            }, _toDisplayString(getValue(row)), 3 /* TEXT, CLASS */)\n                                                        ]));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ])\n                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_16, [\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(['fas', __props.config.icon])\n                                        }, null, 2 /* CLASS */),\n                                        _cache[8] || (_cache[8] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                                    ])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                ], 2 /* CLASS */), [\n                    [_vShow, !isCollapsed.value]\n                ])\n            ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_1));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DashboardWidget.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DashboardWidget.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, unref as _unref, normalizeClass as _normalizeClass, createBlock as _createBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = { class: \"acu-dash-container-new\" };\nconst _hoisted_2 = { class: \"acu-dash-header\" };\nconst _hoisted_3 = { class: \"acu-dash-header-actions\" };\nconst _hoisted_4 = { class: \"acu-search-box\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"acu-dash-empty-state\"\n};\nconst _hoisted_6 = { class: \"acu-modal acu-actions-config-modal\" };\nconst _hoisted_7 = { class: \"acu-modal-header\" };\nconst _hoisted_8 = { class: \"acu-modal-body\" };\nconst _hoisted_9 = { class: \"acu-actions-list\" };\nconst _hoisted_10 = [\"checked\", \"onChange\"];\nimport { computed, onMounted, ref } from 'vue';\nimport { useDashboardStore } from '../stores/useDashboardStore';\nimport { useDataStore } from '../stores/useDataStore';\nimport { useUIStore } from '../stores/useUIStore';\nimport { TABLE_KEYWORD_RULES, WIDGET_ACTIONS } from '../types';\nimport { DashboardWidget } from './dashboard';\n\nimport { watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Dashboard',\n    props: {\n        tables: {}\n    },\n    emits: [\"navigate\", \"rowClick\", \"showRelationshipGraph\", \"action\", \"heightDragStart\", \"heightReset\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * Dashboard  ()\n         *  useDashboardStore \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Stores\n        // ============================================================\n        const dataStore = useDataStore();\n        const dashboardStore = useDashboardStore();\n        const uiStore = useUIStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const isEditing = ref(false);\n        /**  */\n        const searchTerm = ref('');\n        /**  ID */\n        const editingActionsWidgetId = ref(null);\n        /**  ID */\n        const draggingWidgetId = ref(null);\n        /**  ID */\n        const dropTargetId = ref(null);\n        /** Grid  */\n        const gridRef = ref(null);\n        /**  */\n        const heightHandleRef = ref(null);\n        /**  */\n        let heightTouchTimer = null;\n        // ============================================================\n        // Computed\n        // ============================================================\n        /**  */\n        const enabledWidgets = computed(() => dashboardStore.enabledWidgets);\n        /**  */\n        const diffMap = computed(() => dataStore.diffMap);\n        /**  */\n        const availableTables = computed(() => props.tables);\n        /**  */\n        const allActions = computed(() => Object.values(WIDGET_ACTIONS));\n        /**  */\n        const editingWidgetConfig = computed(() => {\n            if (!editingActionsWidgetId.value)\n                return null;\n            return dashboardStore.config.widgets.find(w => w.id === editingActionsWidgetId.value);\n        });\n        // ============================================================\n        // \n        // ============================================================\n        onMounted(async () => {\n            // \n            await dashboardStore.loadConfig();\n            // \n            if (dashboardStore.config.widgets.length === 0) {\n                autoAddDefaultWidgets();\n            }\n        });\n        // \n        watch(() => props.tables, () => {\n            // \n        });\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  ID  */\n        function getTableById(tableId) {\n            if (!tableId)\n                return null;\n            return props.tables.find(t => t.id === tableId) ?? null;\n        }\n        /**  */\n        function isTableAdded(tableId) {\n            return dashboardStore.hasWidget(tableId);\n        }\n        /**  */\n        function getTableIcon(tableId) {\n            for (const [key, keywords] of Object.entries(TABLE_KEYWORD_RULES)) {\n                if (keywords.some(k => tableId.toLowerCase().includes(k.toLowerCase()))) {\n                    const template = dashboardStore.config.widgets.find(w => w.tableId === tableId);\n                    return template?.icon ?? 'fa-table';\n                }\n            }\n            return 'fa-table';\n        }\n        /**  */\n        function autoAddDefaultWidgets() {\n            for (const table of props.tables) {\n                // \n                for (const [, keywords] of Object.entries(TABLE_KEYWORD_RULES)) {\n                    if (keywords.some(k => table.id.toLowerCase().includes(k.toLowerCase()) || table.name.includes(k))) {\n                        // \n                        dashboardStore.addWidget(table.id, table.name);\n                        break;\n                    }\n                }\n            }\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        function enterEditMode() {\n            isEditing.value = true;\n        }\n        function exitEditMode() {\n            isEditing.value = false;\n            draggingWidgetId.value = null;\n            dropTargetId.value = null;\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function openWidgetManager() {\n            uiStore.openWidgetManagerDialog(props.tables);\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function handleAddWidget(tableId) {\n            if (isTableAdded(tableId)) {\n                // \n                const widget = dashboardStore.findWidgetByTableId(tableId);\n                if (widget) {\n                    dashboardStore.removeWidget(widget.id);\n                }\n            }\n            else {\n                // \n                const table = props.tables.find(t => t.id === tableId);\n                dashboardStore.addWidget(tableId, table?.name);\n            }\n        }\n        /**  */\n        function hasSpecialWidget(widgetType) {\n            return dashboardStore.hasSpecialWidget(widgetType);\n        }\n        /**  */\n        function handleAddSpecialWidget(widgetType) {\n            if (hasSpecialWidget(widgetType)) {\n                dashboardStore.removeSpecialWidget(widgetType);\n            }\n            else {\n                dashboardStore.addSpecialWidget(widgetType);\n            }\n        }\n        /**  */\n        function handleRemoveWidget(widgetId) {\n            dashboardStore.removeWidget(widgetId);\n        }\n        /**  */\n        function handleResizeWidget(widgetId, colSpan) {\n            dashboardStore.updateWidget(widgetId, { colSpan });\n        }\n        /**  */\n        function handleConfigActions(widgetId) {\n            editingActionsWidgetId.value = widgetId;\n        }\n        /**  */\n        function isActionEnabled(actionId) {\n            return editingWidgetConfig.value?.actions.includes(actionId) ?? false;\n        }\n        /**  */\n        function toggleAction(actionId) {\n            if (!editingActionsWidgetId.value || !editingWidgetConfig.value)\n                return;\n            const currentActions = [...editingWidgetConfig.value.actions];\n            const index = currentActions.indexOf(actionId);\n            if (index >= 0) {\n                currentActions.splice(index, 1);\n            }\n            else {\n                currentActions.push(actionId);\n            }\n            dashboardStore.setWidgetActions(editingActionsWidgetId.value, currentActions);\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        function handleDragStart(widgetId) {\n            draggingWidgetId.value = widgetId;\n        }\n        function handleDragEnd() {\n            draggingWidgetId.value = null;\n            dropTargetId.value = null;\n        }\n        function handleDrop(targetWidgetId) {\n            if (!draggingWidgetId.value || draggingWidgetId.value === targetWidgetId)\n                return;\n            // \n            const targetWidget = dashboardStore.config.widgets.find(w => w.id === targetWidgetId);\n            if (targetWidget) {\n                dashboardStore.moveWidget(draggingWidgetId.value, targetWidget.order);\n            }\n            draggingWidgetId.value = null;\n            dropTargetId.value = null;\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**\n         * \n         */\n        function handleHeightDragStart(event) {\n            if (heightHandleRef.value) {\n                emit('heightDragStart', event, heightHandleRef.value);\n            }\n        }\n        /**\n         * \n         */\n        function handleHeightReset() {\n            emit('heightReset');\n        }\n        /**\n         *  ()\n         */\n        function handleHeightTouchEnd() {\n            if (heightTouchTimer) {\n                clearTimeout(heightTouchTimer);\n                heightTouchTimer = null;\n            }\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        function handleNavigate(tableId) {\n            emit('navigate', tableId);\n        }\n        function handleRowClick(tableId, row) {\n            emit('rowClick', tableId, row);\n        }\n        /**  -  uiStore  */\n        function handleRowEdit(tableId, row) {\n            const table = getTableById(tableId);\n            uiStore.openRowEditDialog({\n                tableId,\n                tableName: table?.name ?? tableId,\n                rowIndex: row.index,\n                currentRowData: row,\n            });\n        }\n        function handleWidgetAction(actionId, tableId) {\n            switch (actionId) {\n                case 'goToTable':\n                    emit('navigate', tableId);\n                    break;\n                case 'relationshipGraph':\n                    emit('showRelationshipGraph');\n                    break;\n                default:\n                    emit('action', actionId, tableId);\n                    break;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  -  / () /  /  /  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\"  \"),\n                    _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"acu-dash-header-left\" }, [\n                        _createElementVNode(\"span\", { class: \"acu-dash-header-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-th-large\" }),\n                            _createTextVNode(\"  \")\n                        ])\n                    ], -1 /* CACHED */)),\n                    _createCommentVNode(\"  \"),\n                    _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"acu-dash-header-spacer\" }, null, -1 /* CACHED */)),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createCommentVNode(\"  \"),\n                        (isEditing.value)\n                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-toolbar-btn\",\n                                    title: \"\",\n                                    onClick: _withModifiers(openWidgetManager, [\"stop\"])\n                                }, [...(_cache[4] || (_cache[4] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-cog\" }, null, -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-toolbar-btn acu-btn-primary\",\n                                    title: \"\",\n                                    onClick: _withModifiers(exitEditMode, [\"stop\"])\n                                }, [...(_cache[5] || (_cache[5] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */)\n                                    ]))])\n                            ], 64 /* STABLE_FRAGMENT */))\n                            : (_openBlock(), _createElementBlock(\"button\", {\n                                key: 1,\n                                class: \"acu-toolbar-btn\",\n                                title: \"\",\n                                onClick: _withModifiers(enterEditMode, [\"stop\"])\n                            }, [...(_cache[6] || (_cache[6] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-edit\" }, null, -1 /* CACHED */)\n                                ]))])),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"button\", {\n                            ref_key: \"heightHandleRef\",\n                            ref: heightHandleRef,\n                            class: \"acu-toolbar-btn acu-height-handle\",\n                            title: \" / \",\n                            onPointerdown: handleHeightDragStart,\n                            onDblclick: handleHeightReset,\n                            onTouchend: _withModifiers(handleHeightTouchEnd, [\"stop\"])\n                        }, [...(_cache[7] || (_cache[7] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-grip-lines\" }, null, -1 /* CACHED */)\n                            ]))], 544 /* NEED_HYDRATION, NEED_PATCH */),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _cache[8] || (_cache[8] = _createElementVNode(\"i\", { class: \"fas fa-search acu-search-icon\" }, null, -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((searchTerm).value = $event)),\n                                type: \"text\",\n                                class: \"acu-search-input\",\n                                placeholder: \"...\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, searchTerm.value]\n                            ]),\n                            (searchTerm.value)\n                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                    key: 0,\n                                    class: \"fas fa-times acu-search-clear\",\n                                    onClick: _cache[1] || (_cache[1] = ($event) => (searchTerm.value = ''))\n                                }))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    ref_key: \"gridRef\",\n                    ref: gridRef,\n                    class: \"acu-dash-grid\"\n                }, [\n                    _createCommentVNode(\"  \"),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(enabledWidgets.value, (widget) => {\n                        return (_openBlock(), _createBlock(_unref(DashboardWidget), {\n                            key: widget.id,\n                            config: widget,\n                            \"table-data\": getTableById(widget.tableId),\n                            \"is-editing\": isEditing.value,\n                            \"diff-map\": diffMap.value,\n                            \"all-tables\": availableTables.value,\n                            class: _normalizeClass({\n                                'acu-dash-widget-dragging': draggingWidgetId.value === widget.id,\n                                'acu-dash-widget-drop-target': dropTargetId.value === widget.id,\n                            }),\n                            onNavigate: handleNavigate,\n                            onRowClick: handleRowClick,\n                            onRowEdit: handleRowEdit,\n                            onAction: handleWidgetAction,\n                            onRemove: handleRemoveWidget,\n                            onResize: handleResizeWidget,\n                            onConfigActions: handleConfigActions,\n                            onDragStart: handleDragStart,\n                            onDragEnd: handleDragEnd,\n                            onDrop: handleDrop\n                        }, null, 8 /* PROPS */, [\"config\", \"table-data\", \"is-editing\", \"diff-map\", \"all-tables\", \"class\"]));\n                    }), 128 /* KEYED_FRAGMENT */)),\n                    _createCommentVNode(\"  -  \"),\n                    (enabledWidgets.value.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                            _cache[12] || (_cache[12] = _createElementVNode(\"i\", { class: \"fas fa-layer-group\" }, null, -1 /* CACHED */)),\n                            _cache[13] || (_cache[13] = _createElementVNode(\"p\", null, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-dash-add-first-btn\",\n                                onClick: _withModifiers(openWidgetManager, [\"stop\"])\n                            }, [...(_cache[11] || (_cache[11] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 512 /* NEED_PATCH */),\n                _createCommentVNode(\"  ( Teleport Vue ) \"),\n                (editingActionsWidgetId.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"acu-modal-container\",\n                        onClick: _cache[3] || (_cache[3] = _withModifiers(($event) => (editingActionsWidgetId.value = null), [\"self\"]))\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                _cache[14] || (_cache[14] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-close-pill\",\n                                    onClick: _cache[2] || (_cache[2] = _withModifiers(($event) => (editingActionsWidgetId.value = null), [\"stop\"]))\n                                }, \"\")\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _createElementVNode(\"div\", _hoisted_9, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(allActions.value, (action) => {\n                                        return (_openBlock(), _createElementBlock(\"label\", {\n                                            key: action.id,\n                                            class: _normalizeClass([\"acu-action-checkbox\", { active: isActionEnabled(action.id) }])\n                                        }, [\n                                            _createElementVNode(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: isActionEnabled(action.id),\n                                                onChange: ($event) => (toggleAction(action.id))\n                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_10),\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(['fas', action.icon])\n                                            }, null, 2 /* CLASS */),\n                                            _createElementVNode(\"span\", null, _toDisplayString(action.label), 1 /* TEXT */)\n                                        ], 2 /* CLASS */));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ])\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Dashboard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Dashboard.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, withModifiers as _withModifiers, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, unref as _unref, createBlock as _createBlock, renderSlot as _renderSlot } from \"vue\";\nconst _hoisted_1 = { class: \"acu-table-toolbar\" };\nconst _hoisted_2 = { class: \"acu-toolbar-left\" };\nconst _hoisted_3 = { class: \"acu-table-title\" };\nconst _hoisted_4 = { class: \"acu-table-count\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"acu-table-badge acu-badge-changed\"\n};\nconst _hoisted_6 = {\n    key: 1,\n    class: \"acu-table-badge acu-badge-deleting\"\n};\nconst _hoisted_7 = { class: \"acu-toolbar-right\" };\nconst _hoisted_8 = [\"title\"];\nconst _hoisted_9 = { class: \"acu-search-box\" };\nconst _hoisted_10 = {\n    key: 0,\n    class: \"acu-empty-state\"\n};\nconst _hoisted_11 = {\n    key: 0,\n    class: \"acu-pagination-container\"\n};\nconst _hoisted_12 = { class: \"acu-pagination-numbers\" };\nconst _hoisted_13 = {\n    key: 0,\n    class: \"acu-page-dots\"\n};\nconst _hoisted_14 = [\"onClick\"];\nimport { computed, nextTick, ref, watch } from 'vue';\nimport { useCellLock } from '../composables';\nimport { useConfigStore } from '../stores/useConfigStore';\nimport { useDataStore } from '../stores/useDataStore';\nimport { useUIStore } from '../stores/useUIStore';\nimport DataCard from './DataCard.vue';\n\nimport { h } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DataTable',\n    props: {\n        tableId: {},\n        tableName: {},\n        rows: {},\n        headers: { default: () => [] },\n        searchTerm: { default: '' },\n        showIndex: { type: Boolean, default: true },\n        showHeader: { type: Boolean, default: true },\n        showPagination: { type: Boolean, default: true },\n        emptyText: { default: '' },\n        isLoading: { type: Boolean, default: false }\n    },\n    emits: [\"cellClick\", \"insertRow\", \"toggleDelete\", \"contextMenu\", \"searchChange\", \"pageChange\", \"close\", \"heightDragStart\", \"heightReset\", \"showHistory\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * DataTable \n         *\n         *  DataCard \n         * - \n         * -  >  > \n         * - \n         * - /\n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Stores\n        // ============================================================\n        const dataStore = useDataStore();\n        const configStore = useConfigStore();\n        const uiStore = useUIStore();\n        // ============================================================\n        // \n        // ============================================================\n        const containerRef = ref();\n        const heightHandleRef = ref();\n        const viewMode = ref(uiStore.getTableStyle(props.tableName));\n        const localSearchTerm = ref(props.searchTerm);\n        const currentPage = ref(1);\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         *  ''  ''  ''/''/'' \n         *  1 null \n         */\n        const titleColIndex = computed(() => {\n            //  ''  '' \n            if (props.tableName.includes('') || props.tableName.includes('')) {\n                //  ''/''/'' \n                const idx = props.headers.findIndex(h => h && (h.includes('') || h.includes('') || h.includes('')));\n                if (idx > 0) {\n                    return idx;\n                }\n            }\n            //  1 null \n            return 1;\n        });\n        /**  */\n        const isReversed = computed(() => uiStore.isTableReversed(props.tableName));\n        /**  */\n        const filteredRows = computed(() => {\n            let rows = props.rows;\n            // \n            if (uiStore.showLockedOnly && uiStore.isLockEditMode) {\n                const cellLock = useCellLock();\n                rows = rows.filter(row => {\n                    const headers = row.cells.map(c => c.key);\n                    const rowData = row.cells.map(c => String(c.value ?? ''));\n                    const rowKey = cellLock.getRowKey(props.tableName, rowData, headers, row.index);\n                    if (!rowKey)\n                        return false;\n                    return cellLock.hasRowAnyLockPending(props.tableName, rowKey);\n                });\n            }\n            // \n            const term = localSearchTerm.value.toLowerCase().trim();\n            if (!term)\n                return rows;\n            return rows.filter(row => row.cells.some(cell => String(cell.value).toLowerCase().includes(term)));\n        });\n        /**\n         * \n         * @returns 'manual' | 'ai' | null\n         */\n        function getRowChangeType(row) {\n            return dataStore.getRowChangeType(props.tableName, row.index, row.cells.length);\n        }\n        /**\n         * manual = 2, ai = 1, null = 0\n         */\n        function getChangePriority(changeType) {\n            if (changeType === 'manual')\n                return 2;\n            if (changeType === 'ai')\n                return 1;\n            return 0;\n        }\n        /**  > AI >  >  */\n        const sortedRows = computed(() => {\n            const rows = [...filteredRows.value];\n            return rows.sort((a, b) => {\n                // 1. AI\n                const aChangeType = getRowChangeType(a);\n                const bChangeType = getRowChangeType(b);\n                const aPriority = getChangePriority(aChangeType);\n                const bPriority = getChangePriority(bChangeType);\n                if (aPriority !== bPriority) {\n                    return bPriority - aPriority; // \n                }\n                // 2. \n                return isReversed.value ? b.index - a.index : a.index - b.index;\n            });\n        });\n        /**  */\n        const itemsPerPage = computed(() => configStore.config.itemsPerPage || 20);\n        /**  */\n        const totalPages = computed(() => Math.max(1, Math.ceil(sortedRows.value.length / itemsPerPage.value)));\n        /**  */\n        const paginatedRows = computed(() => {\n            const start = (currentPage.value - 1) * itemsPerPage.value;\n            return sortedRows.value.slice(start, start + itemsPerPage.value);\n        });\n        /**  */\n        const totalRows = computed(() => props.rows.length);\n        /**  */\n        const changedCount = computed(() => {\n            return props.rows.filter(row => isRowChanged(row)).length;\n        });\n        /**  */\n        const deletingCount = computed(() => {\n            return props.rows.filter(row => {\n                const rowKey = `${props.tableName}-row-${row.index}`;\n                return dataStore.pendingDeletes.has(rowKey);\n            }).length;\n        });\n        /**  prop  */\n        const shouldShowPagination = computed(() => {\n            // prop  true \n            return props.showPagination && configStore.config.showPagination !== false;\n        });\n        /**  */\n        const paginationList = computed(() => {\n            const pages = [];\n            const total = totalPages.value;\n            const current = currentPage.value;\n            if (total <= 7) {\n                // \n                for (let i = 1; i <= total; i++) {\n                    pages.push(i);\n                }\n            }\n            else {\n                // \n                pages.push(1);\n                if (current > 3) {\n                    pages.push('...');\n                }\n                const start = Math.max(2, current - 1);\n                const end = Math.min(total - 1, current + 1);\n                for (let i = start; i <= end; i++) {\n                    pages.push(i);\n                }\n                if (current < total - 2) {\n                    pages.push('...');\n                }\n                pages.push(total);\n            }\n            return pages;\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function isRowChanged(row) {\n            return dataStore.isRowChanged(props.tableName, row.index, row.cells.length);\n        }\n        /**\n         * \n         */\n        function toggleReverse() {\n            uiStore.toggleTableReverse(props.tableName);\n        }\n        /**\n         * \n         */\n        function toggleViewMode() {\n            viewMode.value = viewMode.value === 'card' ? 'list' : 'card';\n        }\n        /**\n         * \n         */\n        function handleClose() {\n            emit('close');\n        }\n        /**\n         * \n         */\n        function handleSearchInput() {\n            // \n            currentPage.value = 1;\n            emit('searchChange', localSearchTerm.value);\n        }\n        /**\n         * \n         */\n        function clearSearch() {\n            localSearchTerm.value = '';\n            currentPage.value = 1;\n            emit('searchChange', '');\n        }\n        /**\n         * \n         */\n        function goToPage(page) {\n            if (page < 1 || page > totalPages.value)\n                return;\n            currentPage.value = page;\n            emit('pageChange', page);\n            // \n            nextTick(() => {\n                containerRef.value?.scrollTo({ top: 0, behavior: 'smooth' });\n            });\n        }\n        /**\n         * \n         */\n        function handleCellClick(rowIndex, colIndex) {\n            emit('cellClick', props.tableId, rowIndex, colIndex);\n        }\n        /**\n         * \n         */\n        function handleInsertRow(afterIndex) {\n            emit('insertRow', props.tableId, afterIndex);\n        }\n        /**\n         * \n         */\n        function handleToggleDelete(rowIndex) {\n            emit('toggleDelete', props.tableId, rowIndex);\n        }\n        /**\n         * \n         */\n        function handleContextMenu(event, rowIndex) {\n            emit('contextMenu', event, props.tableId, rowIndex);\n        }\n        /**\n         * \n         */\n        function handleHeightDragStart(e) {\n            if (heightHandleRef.value) {\n                emit('heightDragStart', e, heightHandleRef.value);\n            }\n        }\n        /**\n         * \n         */\n        function handleHeightReset() {\n            emit('heightReset');\n        }\n        /**\n         *  - \n         *  touchend  300ms \n         */\n        let lastHeightTouchTime = 0;\n        function handleHeightTouchEnd() {\n            const now = Date.now();\n            if (now - lastHeightTouchTime < 300) {\n                //  - \n                handleHeightReset();\n                lastHeightTouchTime = 0; // \n            }\n            else {\n                lastHeightTouchTime = now;\n            }\n        }\n        /**\n         * \n         */\n        function handleShowHistory(row) {\n            emit('showHistory', props.tableId, props.tableName, row.index, row);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        // \n        watch(() => props.searchTerm, newTerm => {\n            localSearchTerm.value = newTerm;\n        });\n        //  store\n        watch(viewMode, newMode => {\n            uiStore.setTableStyle(props.tableName, newMode);\n        });\n        // \n        watch(totalPages, newTotal => {\n            if (currentPage.value > newTotal) {\n                currentPage.value = Math.max(1, newTotal);\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"acu-data-table\", { 'acu-table-loading': __props.isLoading }])\n            }, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\"  + () \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"span\", _hoisted_3, _toDisplayString(__props.tableName), 1 /* TEXT */),\n                        _createElementVNode(\"span\", _hoisted_4, \"(\" + _toDisplayString(totalRows.value) + \")\", 1 /* TEXT */),\n                        (changedCount.value > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString(changedCount.value), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true),\n                        (deletingCount.value > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(deletingCount.value), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _createCommentVNode(\"  -  \"),\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-toolbar-btn\",\n                            title: viewMode.value === 'card' ? '' : '',\n                            onClick: toggleViewMode\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(viewMode.value === 'card' ? 'fas fa-list' : 'fas fa-th-large')\n                            }, null, 2 /* CLASS */)\n                        ], 8 /* PROPS */, _hoisted_8),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"button\", {\n                            class: _normalizeClass([\"acu-toolbar-btn\", { active: isReversed.value }]),\n                            title: \"\",\n                            onClick: toggleReverse\n                        }, [...(_cache[3] || (_cache[3] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-sort-amount-down-alt\" }, null, -1 /* CACHED */)\n                            ]))], 2 /* CLASS */),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"button\", {\n                            ref_key: \"heightHandleRef\",\n                            ref: heightHandleRef,\n                            class: \"acu-toolbar-btn acu-height-handle\",\n                            title: \" / \",\n                            onPointerdown: handleHeightDragStart,\n                            onDblclick: handleHeightReset,\n                            onTouchend: _withModifiers(handleHeightTouchEnd, [\"stop\"])\n                        }, [...(_cache[4] || (_cache[4] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-grip-lines\" }, null, -1 /* CACHED */)\n                            ]))], 544 /* NEED_HYDRATION, NEED_PATCH */),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_9, [\n                            _cache[5] || (_cache[5] = _createElementVNode(\"i\", { class: \"fas fa-search acu-search-icon\" }, null, -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localSearchTerm).value = $event)),\n                                type: \"text\",\n                                class: \"acu-search-input\",\n                                placeholder: \"...\",\n                                onInput: handleSearchInput\n                            }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                [_vModelText, localSearchTerm.value]\n                            ]),\n                            (localSearchTerm.value)\n                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                    key: 0,\n                                    class: \"fas fa-times acu-search-clear\",\n                                    onClick: clearSearch\n                                }))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-toolbar-btn acu-close-btn\",\n                            title: \"\",\n                            onClick: _withModifiers(handleClose, [\"stop\"])\n                        }, [...(_cache[6] || (_cache[6] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    ref_key: \"containerRef\",\n                    ref: containerRef,\n                    class: _normalizeClass([\"acu-cards-container\", [`acu-view-${viewMode.value}`]])\n                }, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(paginatedRows.value, (row) => {\n                        return (_openBlock(), _createBlock(DataCard, {\n                            key: `${__props.tableId}-${row.index}`,\n                            data: row,\n                            \"table-id\": __props.tableId,\n                            \"table-name\": __props.tableName,\n                            \"is-changed\": isRowChanged(row),\n                            layout: _unref(configStore).config.layout,\n                            \"view-mode\": viewMode.value,\n                            \"show-index\": __props.showIndex,\n                            \"show-header\": __props.showHeader,\n                            \"title-col-index\": titleColIndex.value,\n                            \"show-history-button\": true,\n                            onCellClick: handleCellClick,\n                            onInsertRow: ($event) => (handleInsertRow(row.index)),\n                            onToggleDelete: ($event) => (handleToggleDelete(row.index)),\n                            onContextMenu: handleContextMenu,\n                            onShowHistory: ($event) => (handleShowHistory(row))\n                        }, null, 8 /* PROPS */, [\"data\", \"table-id\", \"table-name\", \"is-changed\", \"layout\", \"view-mode\", \"show-index\", \"show-header\", \"title-col-index\", \"onInsertRow\", \"onToggleDelete\", \"onShowHistory\"]));\n                    }), 128 /* KEYED_FRAGMENT */)),\n                    _createCommentVNode(\"  \"),\n                    (filteredRows.value.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                            _cache[7] || (_cache[7] = _createElementVNode(\"i\", { class: \"fas fa-inbox\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"p\", null, _toDisplayString(__props.emptyText), 1 /* TEXT */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ], 2 /* CLASS */),\n                _createCommentVNode(\"  () \"),\n                _renderSlot(_ctx.$slots, \"pagination\", {}, () => [\n                    (shouldShowPagination.value && totalPages.value > 1)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [\n                            _createCommentVNode(\"  () \"),\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-page-btn acu-page-arrow\", { disabled: currentPage.value === 1 }]),\n                                title: \"\",\n                                onClick: _cache[1] || (_cache[1] = ($event) => (currentPage.value > 1 && goToPage(currentPage.value - 1)))\n                            }, [...(_cache[8] || (_cache[8] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-chevron-left\" }, null, -1 /* CACHED */)\n                                ]))], 2 /* CLASS */),\n                            _createCommentVNode(\"  () \"),\n                            _createElementVNode(\"div\", _hoisted_12, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(paginationList.value, (page) => {\n                                    return (_openBlock(), _createElementBlock(_Fragment, { key: page }, [\n                                        (page === '...')\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, \"...\"))\n                                            : (_openBlock(), _createElementBlock(\"div\", {\n                                                key: 1,\n                                                class: _normalizeClass([\"acu-page-btn\", { active: page === currentPage.value }]),\n                                                onClick: ($event) => (goToPage(page))\n                                            }, _toDisplayString(page), 11 /* TEXT, CLASS, PROPS */, _hoisted_14))\n                                    ], 64 /* STABLE_FRAGMENT */));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createCommentVNode(\"  () \"),\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-page-btn acu-page-arrow\", { disabled: currentPage.value === totalPages.value }]),\n                                title: \"\",\n                                onClick: _cache[2] || (_cache[2] = ($event) => (currentPage.value < totalPages.value && goToPage(currentPage.value + 1)))\n                            }, [...(_cache[9] || (_cache[9] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-chevron-right\" }, null, -1 /* CACHED */)\n                                ]))], 2 /* CLASS */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DataTable.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DataTable.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"acu-options-panel\" };\nconst _hoisted_2 = { class: \"acu-panel-header acu-options-header\" };\nconst _hoisted_3 = { class: \"acu-header-actions\" };\nconst _hoisted_4 = { class: \"acu-options-count\" };\nconst _hoisted_5 = { class: \"acu-panel-content acu-options-content\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"acu-empty-state\"\n};\nconst _hoisted_7 = { class: \"acu-options-list\" };\nconst _hoisted_8 = { class: \"acu-dash-title\" };\nconst _hoisted_9 = { class: \"acu-option-rows\" };\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = { class: \"acu-option-tags\" };\nconst _hoisted_12 = { class: \"acu-option-text\" };\nimport { computed } from 'vue';\nimport { useCoreActions } from '../composables/useCoreActions';\nimport { toast } from '../composables/useToast';\nimport { TAB_DASHBOARD, useUIStore } from '../stores';\n\nimport { h } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'OptionsPanel',\n    props: {\n        tables: {}\n    },\n    emits: [\"navigate\", \"optionClick\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * OptionsPanel \n         *\n         * \n         * - \"\"\n         * - \"/Option/\"\n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Composables & Stores\n        // ============================================================\n        const { setInput } = useCoreActions();\n        const uiStore = useUIStore();\n        // ============================================================\n        // \n        // ============================================================\n        /** \"\" */\n        const optionTables = computed(() => {\n            return props.tables.filter(t => t.name.includes(''));\n        });\n        // ============================================================\n        //  ()\n        // ============================================================\n        /**\n         * \n         *  >= 2 \"/Option/\"\n         */\n        function isMatrixMode(table) {\n            const headers = table.headers || [];\n            const optionColIndices = [];\n            headers.forEach((h, idx) => {\n                if (h && /(|Option|)/i.test(String(h))) {\n                    optionColIndices.push(idx);\n                }\n            });\n            return {\n                isMatrix: optionColIndices.length >= 2,\n                optionColIndices,\n            };\n        }\n        // ============================================================\n        //  ( createOptionItemHtml )\n        // ============================================================\n        /**\n         * \n         * /\n         */\n        function getOptionItems(table) {\n            const items = [];\n            const { isMatrix, optionColIndices } = isMatrixMode(table);\n            const headers = table.headers || [];\n            table.rows.forEach(row => {\n                const rowData = row.cells.map(c => String(c.value || '').trim());\n                if (isMatrix) {\n                    // \n                    const commonTags = [];\n                    rowData.forEach((cellText, idx) => {\n                        if (!optionColIndices.includes(idx) && cellText) {\n                            commonTags.push(cellText);\n                        }\n                    });\n                    optionColIndices.forEach(colIdx => {\n                        const cellText = rowData[colIdx];\n                        if (cellText) {\n                            const currentHeaderTag = headers[colIdx] || '';\n                            const allTags = [...commonTags];\n                            if (currentHeaderTag) {\n                                allTags.push(currentHeaderTag);\n                            }\n                            items.push({\n                                text: cellText,\n                                tags: allTags,\n                            });\n                        }\n                    });\n                }\n                else {\n                    // \n                    const validCells = rowData.filter(c => c !== '');\n                    if (validCells.length === 0)\n                        return;\n                    const targetText = validCells[validCells.length - 1];\n                    const tags = validCells.slice(0, validCells.length - 1);\n                    items.push({\n                        text: targetText,\n                        tags,\n                    });\n                }\n            });\n            return items;\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  -  */\n        function handleOptionClick(text) {\n            setInput(text);\n            emit('optionClick', text);\n            // Toast \n            toast.success('');\n        }\n        /**  */\n        function handleOptionHover(event, isHover) {\n            const target = event.currentTarget;\n            if (isHover) {\n                target.style.background = 'var(--acu-table-hover)';\n                target.style.borderColor = 'var(--acu-title-color)';\n            }\n            else {\n                target.style.background = 'rgba(255,255,255,0.05)';\n                target.style.borderColor = 'var(--acu-border)';\n            }\n        }\n        /**  */\n        function handleOptionMouseDown(event) {\n            const target = event.currentTarget;\n            target.style.transform = 'translateY(1px)';\n        }\n        /**  */\n        function handleOptionMouseUp(event) {\n            const target = event.currentTarget;\n            target.style.transform = 'translateY(0)';\n        }\n        /**  */\n        function handleBackToDashboard() {\n            uiStore.setActiveTab(TAB_DASHBOARD);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[5] || (_cache[5] = _createElementVNode(\"div\", { class: \"acu-panel-title acu-options-title\" }, [\n                        _createElementVNode(\"i\", { class: \"fa-solid fa-list-check\" }),\n                        _createTextVNode(\"  \")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"span\", _hoisted_4, _toDisplayString(optionTables.value.length) + \" \", 1 /* TEXT */),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-toolbar-btn acu-close-btn\",\n                            title: \"\",\n                            onClick: _withModifiers(handleBackToDashboard, [\"stop\"])\n                        }, [...(_cache[4] || (_cache[4] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                            ]))])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createCommentVNode(\"  \"),\n                    (optionTables.value.length === 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \"\\\"\\\"\"))\n                        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(optionTables.value, (table) => {\n                                    return (_openBlock(), _createElementBlock(\"div\", {\n                                        key: table.id,\n                                        class: \"acu-dash-card\"\n                                    }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_8, _toDisplayString(table.name), 1 /* TEXT */),\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_9, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getOptionItems(table), (optionItem, optIdx) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: optIdx,\n                                                    class: \"acu-option-row\",\n                                                    title: '',\n                                                    onClick: ($event) => (handleOptionClick(optionItem.text)),\n                                                    onMouseover: _cache[0] || (_cache[0] = ($event) => (handleOptionHover($event, true))),\n                                                    onMouseout: _cache[1] || (_cache[1] = ($event) => (handleOptionHover($event, false))),\n                                                    onMousedown: _cache[2] || (_cache[2] = ($event) => (handleOptionMouseDown($event))),\n                                                    onMouseup: _cache[3] || (_cache[3] = ($event) => (handleOptionMouseUp($event)))\n                                                }, [\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_11, [\n                                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(optionItem.tags, (tag, tagIdx) => {\n                                                            return (_openBlock(), _createElementBlock(\"span\", {\n                                                                key: tagIdx,\n                                                                class: \"acu-badge acu-option-tag\"\n                                                            }, _toDisplayString(tag), 1 /* TEXT */));\n                                                        }), 128 /* KEYED_FRAGMENT */))\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_12, _toDisplayString(optionItem.text), 1 /* TEXT */)\n                                                ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_10));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ])\n                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./OptionsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./OptionsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, withKeys as _withKeys, normalizeStyle as _normalizeStyle, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nimport { useClipboard } from '@vueuse/core';\nimport { computed, nextTick, onMounted, onUnmounted, ref, watch } from 'vue';\nimport { useDataStore } from '../stores/useDataStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ContextMenu',\n    props: {\n        visible: { type: Boolean },\n        x: {},\n        y: {},\n        tableId: {},\n        tableName: {},\n        rowIndex: {},\n        cellValue: {}\n    },\n    emits: [\"update:visible\", \"insertRow\", \"delete\", \"undoDelete\", \"copied\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * ContextMenu \n         *\n         * \n         * - \n         * - /\n         * - Escape \n         * - \n         *\n         * \n         * - \n         * - \n         * -  / \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs & Stores\n        // ============================================================\n        const menuRef = ref();\n        const dataStore = useDataStore();\n        const { copy, copied } = useClipboard();\n        // ============================================================\n        // Computed\n        // ============================================================\n        /**  */\n        const isDeleting = computed(() => {\n            //  tableName  rowKey DataCard \n            //  tableName tableId\n            const keyBase = props.tableName || props.tableId;\n            const rowKey = `${keyBase}-row-${props.rowIndex}`;\n            return dataStore.pendingDeletes.has(rowKey);\n        });\n        /**  */\n        const menuStyle = computed(() => {\n            //  iframe  UI \n            const menuWidth = 180;\n            const menuHeight = 200;\n            // \n            const parentWindow = window.parent || window;\n            const viewportWidth = parentWindow.innerWidth;\n            const viewportHeight = parentWindow.innerHeight;\n            let left = props.x;\n            let top = props.y;\n            // \n            if (left + menuWidth > viewportWidth) {\n                left = viewportWidth - menuWidth - 10;\n            }\n            // \n            if (top + menuHeight > viewportHeight) {\n                top = viewportHeight - menuHeight - 10;\n            }\n            // \n            left = Math.max(10, left);\n            top = Math.max(10, top);\n            return {\n                left: `${left}px`,\n                top: `${top}px`,\n            };\n        });\n        // ============================================================\n        // \n        // ============================================================\n        //  UI \n        // VueUse  onClickOutside  iframe  document\n        let clickOutsideHandler = null;\n        let rightClickHandler = null;\n        onMounted(() => {\n            const parentDoc = window.parent?.document || document;\n            clickOutsideHandler = (e) => {\n                if (!props.visible || !menuRef.value)\n                    return;\n                const target = e.target;\n                // \n                if (menuRef.value.contains(target))\n                    return;\n                // \n                console.info('[ACU] ');\n                close();\n            };\n            // \n            rightClickHandler = (e) => {\n                if (!props.visible || !menuRef.value)\n                    return;\n                const target = e.target;\n                if (menuRef.value.contains(target))\n                    return;\n                console.info('[ACU] ');\n                close();\n            };\n            //  capture \n            parentDoc.addEventListener('click', clickOutsideHandler, true);\n            parentDoc.addEventListener('contextmenu', rightClickHandler, true);\n            // \n            parentDoc.addEventListener('touchstart', clickOutsideHandler, true);\n        });\n        onUnmounted(() => {\n            const parentDoc = window.parent?.document || document;\n            if (clickOutsideHandler) {\n                parentDoc.removeEventListener('click', clickOutsideHandler, true);\n                parentDoc.removeEventListener('touchstart', clickOutsideHandler, true);\n                clickOutsideHandler = null;\n            }\n            if (rightClickHandler) {\n                parentDoc.removeEventListener('contextmenu', rightClickHandler, true);\n                rightClickHandler = null;\n            }\n        });\n        // ============================================================\n        // Watchers\n        // ============================================================\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                nextTick(() => {\n                    menuRef.value?.focus();\n                });\n            }\n        });\n        // ============================================================\n        // Methods\n        // ============================================================\n        /**  */\n        const close = () => {\n            emit('update:visible', false);\n        };\n        /**  */\n        const handleInsertRow = () => {\n            emit('insertRow', props.tableId, props.rowIndex);\n            close();\n        };\n        /**  */\n        const handleCopy = async () => {\n            if (props.cellValue) {\n                try {\n                    await copy(props.cellValue);\n                    emit('copied');\n                    //  toastr \n                }\n                catch (e) {\n                    console.error('[ACU] Copy failed:', e);\n                }\n            }\n            close();\n        };\n        /**  */\n        const handleDelete = () => {\n            emit('delete', props.tableId, props.rowIndex);\n            close();\n        };\n        /**  */\n        const handleUndoDelete = () => {\n            emit('undoDelete', props.tableId, props.rowIndex);\n            close();\n        };\n        // ============================================================\n        // Expose\n        // ============================================================\n        __expose({\n            /**  */\n            close,\n            /**  */\n            copied,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"acu-menu-fade\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            ref_key: \"menuRef\",\n                            ref: menuRef,\n                            class: \"acu-context-menu\",\n                            style: _normalizeStyle(menuStyle.value),\n                            tabindex: \"-1\",\n                            onKeydown: _withKeys(close, [\"escape\"]),\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(() => { }, [\"stop\"])),\n                            onMousedown: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"])),\n                            onTouchstart: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", {\n                                class: \"acu-menu-item\",\n                                onClick: _withModifiers(handleInsertRow, [\"stop\"])\n                            }, [...(_cache[3] || (_cache[3] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */),\n                                    _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                ]))]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", {\n                                class: \"acu-menu-item\",\n                                onClick: _withModifiers(handleCopy, [\"stop\"])\n                            }, [...(_cache[4] || (_cache[4] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-copy\" }, null, -1 /* CACHED */),\n                                    _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                ]))]),\n                            _createCommentVNode(\"  \"),\n                            _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"acu-menu-divider\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            (!isDeleting.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", {\n                                    key: 0,\n                                    class: \"acu-menu-item acu-menu-danger\",\n                                    onClick: _withModifiers(handleDelete, [\"stop\"])\n                                }, [...(_cache[5] || (_cache[5] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                    ]))]))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", {\n                                        class: \"acu-menu-item acu-menu-warning\",\n                                        onClick: _withModifiers(handleUndoDelete, [\"stop\"])\n                                    }, [...(_cache[6] || (_cache[6] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                        ]))])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                        ], 36 /* STYLE, NEED_HYDRATION */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ContextMenu.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ContextMenu.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = { class: \"acu-pagination\" };\nconst _hoisted_2 = { class: \"acu-pagination-info\" };\nconst _hoisted_3 = { class: \"acu-pagination-current\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"acu-pagination-total\"\n};\nconst _hoisted_5 = { class: \"acu-pagination-controls\" };\nconst _hoisted_6 = [\"disabled\"];\nconst _hoisted_7 = [\"disabled\"];\nconst _hoisted_8 = { class: \"acu-page-list\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"acu-page-ellipsis\"\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = [\"disabled\"];\nconst _hoisted_13 = {\n    key: 0,\n    class: \"acu-pagination-jump\"\n};\nconst _hoisted_14 = [\"max\"];\nimport { ref, computed, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Pagination',\n    props: {\n        currentPage: {},\n        totalPages: {},\n        totalItems: {},\n        maxVisiblePages: { default: 5 },\n        showTotal: { type: Boolean, default: true },\n        showJumper: { type: Boolean, default: true }\n    },\n    emits: [\"update:currentPage\", \"pageChange\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * Pagination \n         *\n         * \n         * - \n         * - /\n         * - /\n         * - /\n         * - \n         *\n         * \n         * - \n         * - \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs\n        // ============================================================\n        /**  */\n        const jumpPage = ref(props.currentPage);\n        // ============================================================\n        // Computed\n        // ============================================================\n        /**\n         * \n         * \n         * 1. \n         * 2. \n         *    - 1\n         *    - 1\n         *    -  maxVisiblePages \n         *    -  '...' \n         */\n        const pageList = computed(() => {\n            const pages = [];\n            const total = props.totalPages;\n            const current = props.currentPage;\n            const maxVisible = props.maxVisiblePages;\n            //  0  1\n            if (total <= 0) {\n                return [1];\n            }\n            if (total === 1) {\n                return [1];\n            }\n            // \n            if (total <= maxVisible + 2) {\n                for (let i = 1; i <= total; i++) {\n                    pages.push(i);\n                }\n                return pages;\n            }\n            // \n            const halfVisible = Math.floor(maxVisible / 2);\n            let start = Math.max(2, current - halfVisible);\n            let end = Math.min(total - 1, current + halfVisible);\n            // \n            const visibleCount = end - start + 1;\n            if (visibleCount < maxVisible) {\n                if (start === 2) {\n                    // \n                    end = Math.min(total - 1, start + maxVisible - 1);\n                }\n                else if (end === total - 1) {\n                    // \n                    start = Math.max(2, end - maxVisible + 1);\n                }\n            }\n            // \n            // \n            pages.push(1);\n            // \n            if (start > 2) {\n                pages.push('...');\n            }\n            // \n            for (let i = start; i <= end; i++) {\n                pages.push(i);\n            }\n            // \n            if (end < total - 1) {\n                pages.push('...');\n            }\n            // \n            pages.push(total);\n            return pages;\n        });\n        // ============================================================\n        // Watchers\n        // ============================================================\n        //  currentPage \n        watch(() => props.currentPage, newPage => {\n            jumpPage.value = newPage;\n        });\n        // ============================================================\n        // Methods\n        // ============================================================\n        /**\n         * \n         * @param page \n         */\n        const goToPage = (page) => {\n            // \n            if (page < 1 || page > props.totalPages) {\n                return;\n            }\n            // \n            if (page === props.currentPage) {\n                return;\n            }\n            // \n            emit('update:currentPage', page);\n            emit('pageChange', page);\n            // \n            jumpPage.value = page;\n        };\n        /**\n         * \n         */\n        const validateJumpPage = () => {\n            if (!jumpPage.value || jumpPage.value < 1) {\n                jumpPage.value = 1;\n            }\n            else if (jumpPage.value > props.totalPages) {\n                jumpPage.value = props.totalPages;\n            }\n            // \n            jumpPage.value = Math.floor(jumpPage.value);\n        };\n        /**\n         * \n         */\n        const handleJump = () => {\n            validateJumpPage();\n            goToPage(jumpPage.value);\n        };\n        // ============================================================\n        // Expose\n        // ============================================================\n        __expose({\n            /**  */\n            goToPage,\n            /**  */\n            goToFirst: () => goToPage(1),\n            /**  */\n            goToLast: () => goToPage(props.totalPages),\n            /**  */\n            goPrev: () => goToPage(props.currentPage - 1),\n            /**  */\n            goNext: () => goToPage(props.currentPage + 1),\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"span\", _hoisted_3, [\n                        _cache[5] || (_cache[5] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                        _createElementVNode(\"strong\", null, _toDisplayString(__props.currentPage), 1 /* TEXT */),\n                        _createTextVNode(\" / \" + _toDisplayString(__props.totalPages) + \"  \", 1 /* TEXT */)\n                    ]),\n                    (__props.showTotal)\n                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, \" ( \" + _toDisplayString(__props.totalItems) + \" ) \", 1 /* TEXT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-btn acu-btn-icon\", { disabled: __props.currentPage <= 1 }]),\n                        disabled: __props.currentPage <= 1,\n                        title: \"\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (goToPage(1)))\n                    }, [...(_cache[6] || (_cache[6] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-angle-double-left\" }, null, -1 /* CACHED */)\n                        ]))], 10 /* CLASS, PROPS */, _hoisted_6),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-btn acu-btn-icon\", { disabled: __props.currentPage <= 1 }]),\n                        disabled: __props.currentPage <= 1,\n                        title: \"\",\n                        onClick: _cache[1] || (_cache[1] = ($event) => (goToPage(__props.currentPage - 1)))\n                    }, [...(_cache[7] || (_cache[7] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-angle-left\" }, null, -1 /* CACHED */)\n                        ]))], 10 /* CLASS, PROPS */, _hoisted_7),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_8, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(pageList.value, (page, index) => {\n                            return (_openBlock(), _createElementBlock(_Fragment, { key: index }, [\n                                _createCommentVNode(\"  \"),\n                                (page === '...')\n                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_9, [...(_cache[8] || (_cache[8] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-ellipsis-h\" }, null, -1 /* CACHED */)\n                                        ]))]))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"button\", {\n                                            class: _normalizeClass([\"acu-btn acu-btn-page\", { active: page === __props.currentPage }]),\n                                            onClick: ($event) => (goToPage(page))\n                                        }, _toDisplayString(page), 11 /* TEXT, CLASS, PROPS */, _hoisted_10)\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                            ], 64 /* STABLE_FRAGMENT */));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-btn acu-btn-icon\", { disabled: __props.currentPage >= __props.totalPages }]),\n                        disabled: __props.currentPage >= __props.totalPages,\n                        title: \"\",\n                        onClick: _cache[2] || (_cache[2] = ($event) => (goToPage(__props.currentPage + 1)))\n                    }, [...(_cache[9] || (_cache[9] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-angle-right\" }, null, -1 /* CACHED */)\n                        ]))], 10 /* CLASS, PROPS */, _hoisted_11),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-btn acu-btn-icon\", { disabled: __props.currentPage >= __props.totalPages }]),\n                        disabled: __props.currentPage >= __props.totalPages,\n                        title: \"\",\n                        onClick: _cache[3] || (_cache[3] = ($event) => (goToPage(__props.totalPages)))\n                    }, [...(_cache[10] || (_cache[10] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-angle-double-right\" }, null, -1 /* CACHED */)\n                        ]))], 10 /* CLASS, PROPS */, _hoisted_12)\n                ]),\n                _createCommentVNode(\"  \"),\n                (__props.showJumper)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [\n                        _cache[11] || (_cache[11] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((jumpPage).value = $event)),\n                            type: \"number\",\n                            min: \"1\",\n                            max: __props.totalPages,\n                            class: \"acu-input-sm\",\n                            onKeydown: _withKeys(handleJump, [\"enter\"]),\n                            onBlur: validateJumpPage\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_14), [\n                            [\n                                _vModelText,\n                                jumpPage.value,\n                                void 0,\n                                { number: true }\n                            ]\n                        ]),\n                        _cache[12] || (_cache[12] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-btn acu-btn-sm\",\n                            onClick: handleJump\n                        }, \"GO\")\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"acu-search-input-wrapper\" };\nconst _hoisted_2 = [\"placeholder\"];\nconst _hoisted_3 = {\n    key: 0,\n    class: \"acu-search-result\"\n};\nconst _hoisted_4 = {\n    key: 1,\n    class: \"no-result\"\n};\nimport { ref, watch, onMounted } from 'vue';\nimport { useDebounceFn } from '@vueuse/core';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SearchBox',\n    props: {\n        modelValue: {},\n        resultCount: {},\n        debounce: { default: 300 },\n        autofocus: { type: Boolean, default: false },\n        placeholder: { default: '...' },\n        showResultCount: { type: Boolean, default: true }\n    },\n    emits: [\"update:modelValue\", \"search\", \"clear\", \"searchImmediate\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * SearchBox \n         *\n         * \n         * - \n         * - \n         * - \n         * - Escape Enter \n         * - \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs\n        // ============================================================\n        const inputRef = ref();\n        const searchTerm = ref(props.modelValue);\n        const isFocused = ref(false);\n        // ============================================================\n        // VueUse Composables\n        // ============================================================\n        // \n        if (props.autofocus) {\n            onMounted(() => {\n                inputRef.value?.focus();\n            });\n        }\n        // \n        const debouncedSearch = useDebounceFn((value) => {\n            emit('update:modelValue', value);\n            emit('search', value);\n        }, props.debounce);\n        // ============================================================\n        // Watchers\n        // ============================================================\n        // \n        watch(searchTerm, value => {\n            debouncedSearch(value);\n        });\n        // \n        watch(() => props.modelValue, value => {\n            if (value !== searchTerm.value) {\n                searchTerm.value = value;\n            }\n        });\n        // ============================================================\n        // Methods\n        // ============================================================\n        /**\n         * \n         */\n        const handleClear = () => {\n            searchTerm.value = '';\n            emit('update:modelValue', '');\n            emit('search', '');\n            emit('clear');\n            // \n            inputRef.value?.focus();\n        };\n        /**\n         * Enter \n         */\n        const handleEnter = () => {\n            // \n            emit('update:modelValue', searchTerm.value);\n            emit('search', searchTerm.value);\n            emit('searchImmediate', searchTerm.value);\n        };\n        /**\n         * \n         */\n        const focus = () => {\n            inputRef.value?.focus();\n        };\n        /**\n         * \n         */\n        const blur = () => {\n            inputRef.value?.blur();\n        };\n        /**\n         * \n         */\n        const selectAll = () => {\n            inputRef.value?.select();\n        };\n        // ============================================================\n        // Expose\n        // ============================================================\n        __expose({\n            /**  */\n            focus,\n            /**  */\n            blur,\n            /**  */\n            clear: handleClear,\n            /**  */\n            selectAll,\n            /**  */\n            inputRef,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"acu-search-box\", { focused: isFocused.value, 'has-value': searchTerm.value }])\n            }, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\"  \"),\n                    _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-search acu-search-icon\" }, null, -1 /* CACHED */)),\n                    _createCommentVNode(\"  \"),\n                    _withDirectives(_createElementVNode(\"input\", {\n                        ref_key: \"inputRef\",\n                        ref: inputRef,\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((searchTerm).value = $event)),\n                        type: \"text\",\n                        class: \"acu-search-input\",\n                        placeholder: __props.placeholder,\n                        onFocus: _cache[1] || (_cache[1] = ($event) => (isFocused.value = true)),\n                        onBlur: _cache[2] || (_cache[2] = ($event) => (isFocused.value = false)),\n                        onKeydown: [\n                            _withKeys(handleClear, [\"escape\"]),\n                            _withKeys(handleEnter, [\"enter\"])\n                        ]\n                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_2), [\n                        [_vModelText, searchTerm.value]\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createVNode(_Transition, { name: \"acu-fade\" }, {\n                        default: _withCtx(() => [\n                            (searchTerm.value)\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 0,\n                                    class: \"acu-search-clear\",\n                                    title: \"\",\n                                    onClick: handleClear\n                                }, [...(_cache[3] || (_cache[3] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _: 1 /* STABLE */\n                    })\n                ]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_Transition, { name: \"acu-fade\" }, {\n                    default: _withCtx(() => [\n                        (__props.showResultCount && __props.resultCount !== undefined)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                                (__props.resultCount > 0)\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                        _cache[5] || (_cache[5] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                        _createElementVNode(\"strong\", null, _toDisplayString(__props.resultCount), 1 /* TEXT */),\n                                        _cache[6] || (_cache[6] = _createTextVNode(\"  \", -1 /* CACHED */))\n                                    ], 64 /* STABLE_FRAGMENT */))\n                                    : (searchTerm.value)\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, \"\"))\n                                        : _createCommentVNode(\"v-if\", true)\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-body\" };\nconst _hoisted_2 = { class: \"acu-settings-section\" };\nconst _hoisted_3 = { class: \"acu-settings-group\" };\nconst _hoisted_4 = { class: \"acu-purge-range-row\" };\nconst _hoisted_5 = { class: \"acu-settings-section\" };\nconst _hoisted_6 = { class: \"acu-table-selector acu-table-selector-compact\" };\nconst _hoisted_7 = { class: \"acu-table-selector-header\" };\nconst _hoisted_8 = { class: \"acu-table-selector-list\" };\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = [\"checked\", \"onChange\"];\nconst _hoisted_11 = { class: \"table-name\" };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"acu-table-selector-empty\"\n};\nconst _hoisted_13 = { class: \"acu-table-selector-footer\" };\nconst _hoisted_14 = { class: \"acu-modal-footer\" };\nconst _hoisted_15 = [\"disabled\"];\nconst _hoisted_16 = {\n    key: 0,\n    class: \"fas fa-spinner fa-spin\"\n};\nconst _hoisted_17 = {\n    key: 1,\n    class: \"fas fa-trash-alt\"\n};\nimport { onClickOutside } from '@vueuse/core';\nimport { computed, ref, watch } from 'vue';\nimport { useDataPersistence } from '../../composables/useDataPersistence';\nimport { toast } from '../../composables/useToast';\nimport { getTableData } from '../../utils';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AdvancedPurgeDialog',\n    props: {\n        visible: { type: Boolean },\n        initialStartFloor: { default: undefined },\n        initialEndFloor: { default: undefined }\n    },\n    emits: [\"update:visible\", \"confirm\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * AdvancedPurgeDialog - \n         *\n         * :\n         * - \n         * - -\n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs & State\n        // ============================================================\n        const dialogRef = ref();\n        const startInputRef = ref();\n        const endInputRef = ref();\n        const startFloor = ref(null);\n        const endFloor = ref(null);\n        const selectedTableKeys = ref([]);\n        const availableTables = ref([]);\n        const isExecuting = ref(false);\n        // ============================================================\n        // Composables\n        // ============================================================\n        const { purgeTableDataByRange } = useDataPersistence();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const isAllSelected = computed(() => {\n            if (availableTables.value.length === 0)\n                return false;\n            return selectedTableKeys.value.length === availableTables.value.length;\n        });\n        /**  */\n        const canConfirm = computed(() => {\n            if (startFloor.value === null || endFloor.value === null)\n                return false;\n            if (isNaN(startFloor.value) || isNaN(endFloor.value))\n                return false;\n            if (startFloor.value < 0 || endFloor.value < 0)\n                return false;\n            if (startFloor.value > endFloor.value)\n                return false;\n            if (selectedTableKeys.value.length === 0)\n                return false;\n            return true;\n        });\n        // ============================================================\n        //  & \n        // ============================================================\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                // \n                startFloor.value = props.initialStartFloor ?? null;\n                endFloor.value = props.initialEndFloor ?? null;\n                selectedTableKeys.value = [];\n                isExecuting.value = false;\n                // \n                loadAvailableTables();\n                // \n            }\n        });\n        // \n        onClickOutside(dialogRef, () => {\n            if (!isExecuting.value) {\n                handleClose();\n            }\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function loadAvailableTables() {\n            try {\n                const rawData = getTableData();\n                if (!rawData) {\n                    availableTables.value = [];\n                    return;\n                }\n                const tables = [];\n                Object.keys(rawData).forEach(key => {\n                    if (!key.startsWith('sheet_'))\n                        return;\n                    const sheet = rawData[key];\n                    if (sheet && typeof sheet === 'object' && sheet.name) {\n                        tables.push({\n                            key,\n                            name: sheet.name,\n                        });\n                    }\n                });\n                availableTables.value = tables;\n            }\n            catch (e) {\n                console.warn('[ACU] :', e);\n                availableTables.value = [];\n            }\n        }\n        /**  */\n        function toggleTableSelection(key) {\n            const idx = selectedTableKeys.value.indexOf(key);\n            if (idx === -1) {\n                selectedTableKeys.value.push(key);\n            }\n            else {\n                selectedTableKeys.value.splice(idx, 1);\n            }\n        }\n        /**  */\n        function handleSelectAll() {\n            selectedTableKeys.value = availableTables.value.map(t => t.key);\n        }\n        /**  */\n        function handleDeselectAll() {\n            selectedTableKeys.value = [];\n        }\n        /**  */\n        function focusEndInput() {\n            endInputRef.value?.focus();\n        }\n        /**  */\n        function handleClose() {\n            emit('update:visible', false);\n        }\n        /**  */\n        async function handleConfirm() {\n            if (!canConfirm.value || isExecuting.value)\n                return;\n            isExecuting.value = true;\n            try {\n                const result = await purgeTableDataByRange(selectedTableKeys.value, startFloor.value, endFloor.value);\n                if (result.changed) {\n                    const tableNames = selectedTableKeys.value\n                        .map(k => availableTables.value.find(t => t.key === k)?.name || k)\n                        .join(', ');\n                    toast.success(` ${result.changedCount}  (${tableNames})`);\n                    emit('confirm', {\n                        changedCount: result.changedCount,\n                        tables: selectedTableKeys.value,\n                    });\n                    handleClose();\n                }\n                else {\n                    toast.info('');\n                }\n            }\n            catch (e) {\n                console.error('[ACU] :', e);\n                toast.error(': ' + (e instanceof Error ? e.message : String(e)));\n            }\n            finally {\n                isExecuting.value = false;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", {\n                        ref_key: \"dialogRef\",\n                        ref: dialogRef,\n                        class: \"acu-modal acu-advanced-purge-modal\"\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", { class: \"acu-modal-header\" }, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-back\",\n                                onClick: handleClose\n                            }, [...(_cache[3] || (_cache[3] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-arrow-left\" }, null, -1 /* CACHED */)\n                                ]))]),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, \"\", -1 /* CACHED */)),\n                            _cache[5] || (_cache[5] = _createElementVNode(\"span\", null, null, -1 /* CACHED */))\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_2, [\n                                _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-layer-group\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_3, [\n                                    _createElementVNode(\"div\", _hoisted_4, [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            ref_key: \"startInputRef\",\n                                            ref: startInputRef,\n                                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((startFloor).value = $event)),\n                                            type: \"number\",\n                                            class: \"acu-purge-input\",\n                                            placeholder: \"\",\n                                            min: \"0\",\n                                            onKeydown: _withKeys(focusEndInput, [\"enter\"])\n                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                            [\n                                                _vModelText,\n                                                startFloor.value,\n                                                void 0,\n                                                { number: true }\n                                            ]\n                                        ]),\n                                        _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"acu-purge-separator\" }, \"\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            ref_key: \"endInputRef\",\n                                            ref: endInputRef,\n                                            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((endFloor).value = $event)),\n                                            type: \"number\",\n                                            class: \"acu-purge-input\",\n                                            placeholder: \"\",\n                                            min: \"0\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [\n                                                _vModelText,\n                                                endFloor.value,\n                                                void 0,\n                                                { number: true }\n                                            ]\n                                        ])\n                                    ]),\n                                    _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"acu-purge-range-hint\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }),\n                                        _createTextVNode(\"  Chat  0  \")\n                                    ], -1 /* CACHED */))\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-table\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_6, [\n                                    _createElementVNode(\"div\", _hoisted_7, [\n                                        _createElementVNode(\"button\", {\n                                            class: _normalizeClass([\"acu-quick-select-btn\", { active: isAllSelected.value }]),\n                                            onClick: handleSelectAll\n                                        }, [...(_cache[9] || (_cache[9] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-check-double\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))], 2 /* CLASS */),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-quick-select-btn\",\n                                            onClick: handleDeselectAll\n                                        }, [...(_cache[10] || (_cache[10] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_8, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableTables.value, (table) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: table.key,\n                                                class: _normalizeClass([\"acu-table-selector-item\", { 'is-selected': selectedTableKeys.value.includes(table.key) }]),\n                                                onClick: ($event) => (toggleTableSelection(table.key))\n                                            }, [\n                                                _createElementVNode(\"input\", {\n                                                    type: \"checkbox\",\n                                                    checked: selectedTableKeys.value.includes(table.key),\n                                                    onClick: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"stop\"])),\n                                                    onChange: ($event) => (toggleTableSelection(table.key))\n                                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_10),\n                                                _createElementVNode(\"span\", _hoisted_11, _toDisplayString(table.name), 1 /* TEXT */)\n                                            ], 10 /* CLASS, PROPS */, _hoisted_9));\n                                        }), 128 /* KEYED_FRAGMENT */)),\n                                        (availableTables.value.length === 0)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [...(_cache[11] || (_cache[11] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-inbox\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_13, \" : \" + _toDisplayString(selectedTableKeys.value.length) + \"/\" + _toDisplayString(availableTables.value.length) + \"  \", 1 /* TEXT */)\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _cache[13] || (_cache[13] = _createElementVNode(\"div\", { class: \"acu-purge-warning\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-exclamation-triangle\" }),\n                                _createElementVNode(\"span\", null, \"\")\n                            ], -1 /* CACHED */))\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_14, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn secondary\",\n                                onClick: handleClose\n                            }, \"\"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn danger\",\n                                disabled: !canConfirm.value || isExecuting.value,\n                                onClick: handleConfirm\n                            }, [\n                                (isExecuting.value)\n                                    ? (_openBlock(), _createElementBlock(\"i\", _hoisted_16))\n                                    : (_openBlock(), _createElementBlock(\"i\", _hoisted_17)),\n                                _createTextVNode(\" \" + _toDisplayString(isExecuting.value ? '...' : ''), 1 /* TEXT */)\n                            ], 8 /* PROPS */, _hoisted_15)\n                        ])\n                    ], 512 /* NEED_PATCH */)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AdvancedPurgeDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AdvancedPurgeDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-crop-dialog\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-title\" };\nconst _hoisted_4 = { class: \"acu-modal-body acu-crop-body\" };\nconst _hoisted_5 = { class: \"acu-crop-preview-wrapper\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"acu-crop-placeholder\"\n};\nconst _hoisted_7 = { class: \"acu-crop-controls\" };\nconst _hoisted_8 = { class: \"acu-crop-control-row\" };\nconst _hoisted_9 = [\"value\"];\nconst _hoisted_10 = { class: \"acu-crop-value\" };\nconst _hoisted_11 = { class: \"acu-crop-control-row\" };\nconst _hoisted_12 = [\"value\"];\nconst _hoisted_13 = { class: \"acu-crop-value\" };\nconst _hoisted_14 = { class: \"acu-crop-control-row\" };\nconst _hoisted_15 = [\"value\"];\nconst _hoisted_16 = { class: \"acu-crop-value\" };\nconst _hoisted_17 = { class: \"acu-crop-upload-section\" };\nconst _hoisted_18 = { class: \"acu-modal-footer\" };\nimport { computed, ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AvatarCropDialog',\n    props: {\n        visible: { type: Boolean, default: false },\n        imageUrl: { default: '' },\n        name: { default: '' },\n        initialOffsetX: { default: 50 },\n        initialOffsetY: { default: 50 },\n        initialScale: { default: 150 }\n    },\n    emits: [\"close\", \"apply\", \"upload\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * AvatarCropDialog.vue - \n         *\n         * \n         * - \n         * -  X/Y \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // \n        // ============================================================\n        const offsetX = ref(props.initialOffsetX);\n        const offsetY = ref(props.initialOffsetY);\n        const scale = ref(props.initialScale);\n        const fileInputRef = ref(null);\n        const previewRef = ref(null);\n        // \n        const isDragging = ref(false);\n        const dragStartX = ref(0);\n        const dragStartY = ref(0);\n        const dragStartOffsetX = ref(0);\n        const dragStartOffsetY = ref(0);\n        // ============================================================\n        // \n        // ============================================================\n        const previewStyle = computed(() => {\n            if (!props.imageUrl)\n                return {};\n            return {\n                backgroundImage: `url('${props.imageUrl}')`,\n                backgroundPosition: `${offsetX.value}% ${offsetY.value}%`,\n                backgroundSize: `${scale.value}%`,\n            };\n        });\n        // ============================================================\n        // \n        // ============================================================\n        function handleClose() {\n            emit('close');\n        }\n        function applyAndClose() {\n            emit('apply', {\n                offsetX: offsetX.value,\n                offsetY: offsetY.value,\n                scale: scale.value,\n            });\n        }\n        function resetValues() {\n            offsetX.value = 50;\n            offsetY.value = 50;\n            scale.value = 150;\n        }\n        function triggerUpload() {\n            fileInputRef.value?.click();\n        }\n        function handleFileSelect(event) {\n            const input = event.target;\n            const file = input.files?.[0];\n            if (file) {\n                emit('upload', file);\n            }\n            input.value = '';\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function handleDragStart(e) {\n            if (!props.imageUrl)\n                return;\n            isDragging.value = true;\n            dragStartX.value = e.clientX;\n            dragStartY.value = e.clientY;\n            dragStartOffsetX.value = offsetX.value;\n            dragStartOffsetY.value = offsetY.value;\n            // \n            const parentDoc = window.parent?.document || document;\n            parentDoc.addEventListener('mousemove', handleDragMove);\n            parentDoc.addEventListener('mouseup', handleDragEnd);\n        }\n        /**  */\n        function handleTouchStart(e) {\n            if (!props.imageUrl || e.touches.length !== 1)\n                return;\n            const touch = e.touches[0];\n            isDragging.value = true;\n            dragStartX.value = touch.clientX;\n            dragStartY.value = touch.clientY;\n            dragStartOffsetX.value = offsetX.value;\n            dragStartOffsetY.value = offsetY.value;\n            // \n            const parentDoc = window.parent?.document || document;\n            parentDoc.addEventListener('touchmove', handleTouchMove, { passive: false });\n            parentDoc.addEventListener('touchend', handleTouchEnd);\n        }\n        /**  */\n        function handleDragMove(e) {\n            if (!isDragging.value)\n                return;\n            const deltaX = e.clientX - dragStartX.value;\n            const deltaY = e.clientY - dragStartY.value;\n            updateOffset(deltaX, deltaY);\n        }\n        /**  */\n        function handleTouchMove(e) {\n            if (!isDragging.value || e.touches.length !== 1)\n                return;\n            e.preventDefault(); // \n            const touch = e.touches[0];\n            const deltaX = touch.clientX - dragStartX.value;\n            const deltaY = touch.clientY - dragStartY.value;\n            updateOffset(deltaX, deltaY);\n        }\n        /**  */\n        function updateOffset(deltaX, deltaY) {\n            // \n            //  120px 0-100%\n            //  120px  100% \n            const sensitivity = 0.8; // \n            const previewSize = 120;\n            // \n            const newOffsetX = dragStartOffsetX.value - (deltaX / previewSize) * 100 * sensitivity;\n            const newOffsetY = dragStartOffsetY.value - (deltaY / previewSize) * 100 * sensitivity;\n            //  0-100 \n            offsetX.value = Math.max(0, Math.min(100, Math.round(newOffsetX)));\n            offsetY.value = Math.max(0, Math.min(100, Math.round(newOffsetY)));\n        }\n        /**  */\n        function handleDragEnd() {\n            isDragging.value = false;\n            const parentDoc = window.parent?.document || document;\n            parentDoc.removeEventListener('mousemove', handleDragMove);\n            parentDoc.removeEventListener('mouseup', handleDragEnd);\n        }\n        /**  */\n        function handleTouchEnd() {\n            isDragging.value = false;\n            const parentDoc = window.parent?.document || document;\n            parentDoc.removeEventListener('touchmove', handleTouchMove);\n            parentDoc.removeEventListener('touchend', handleTouchEnd);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                offsetX.value = props.initialOffsetX;\n                offsetY.value = props.initialOffsetY;\n                scale.value = props.initialScale;\n            }\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-crop-modal-overlay\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _createElementVNode(\"span\", _hoisted_3, [\n                                _cache[3] || (_cache[3] = _createElementVNode(\"i\", { class: \"fas fa-crop-simple\" }, null, -1 /* CACHED */)),\n                                _createTextVNode(\"  - \" + _toDisplayString(__props.name), 1 /* TEXT */)\n                            ]),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, [...(_cache[4] || (_cache[4] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                ]))])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createCommentVNode(\"  -  \"),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createElementVNode(\"div\", {\n                                    ref_key: \"previewRef\",\n                                    ref: previewRef,\n                                    class: _normalizeClass([\"acu-crop-preview\", { 'is-dragging': isDragging.value }]),\n                                    style: _normalizeStyle(previewStyle.value),\n                                    onMousedown: handleDragStart,\n                                    onTouchstart: _withModifiers(handleTouchStart, [\"prevent\"])\n                                }, [\n                                    _createCommentVNode(\"  \"),\n                                    (!__props.imageUrl)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [...(_cache[5] || (_cache[5] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-image\" }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                            ]))]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 38 /* CLASS, STYLE, NEED_HYDRATION */)\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                _createCommentVNode(\" X  \"),\n                                _createElementVNode(\"div\", _hoisted_8, [\n                                    _cache[6] || (_cache[6] = _createElementVNode(\"label\", { class: \"acu-crop-label\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-arrows-left-right\" }),\n                                        _createTextVNode(\" X \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"input\", {\n                                        type: \"range\",\n                                        class: \"acu-crop-slider\",\n                                        min: \"0\",\n                                        max: \"100\",\n                                        value: offsetX.value,\n                                        onInput: _cache[0] || (_cache[0] = ($event) => (offsetX.value = Number($event.target.value)))\n                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_9),\n                                    _createElementVNode(\"span\", _hoisted_10, _toDisplayString(offsetX.value) + \"%\", 1 /* TEXT */)\n                                ]),\n                                _createCommentVNode(\" Y  \"),\n                                _createElementVNode(\"div\", _hoisted_11, [\n                                    _cache[7] || (_cache[7] = _createElementVNode(\"label\", { class: \"acu-crop-label\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-arrows-up-down\" }),\n                                        _createTextVNode(\" Y \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"input\", {\n                                        type: \"range\",\n                                        class: \"acu-crop-slider\",\n                                        min: \"0\",\n                                        max: \"100\",\n                                        value: offsetY.value,\n                                        onInput: _cache[1] || (_cache[1] = ($event) => (offsetY.value = Number($event.target.value)))\n                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_12),\n                                    _createElementVNode(\"span\", _hoisted_13, _toDisplayString(offsetY.value) + \"%\", 1 /* TEXT */)\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_14, [\n                                    _cache[8] || (_cache[8] = _createElementVNode(\"label\", { class: \"acu-crop-label\" }, [\n                                        _createElementVNode(\"i\", { class: \"fas fa-magnifying-glass-plus\" }),\n                                        _createTextVNode(\"  \")\n                                    ], -1 /* CACHED */)),\n                                    _createElementVNode(\"input\", {\n                                        type: \"range\",\n                                        class: \"acu-crop-slider\",\n                                        min: \"100\",\n                                        max: \"300\",\n                                        value: scale.value,\n                                        onInput: _cache[2] || (_cache[2] = ($event) => (scale.value = Number($event.target.value)))\n                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_15),\n                                    _createElementVNode(\"span\", _hoisted_16, _toDisplayString(scale.value) + \"%\", 1 /* TEXT */)\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_17, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-modal-btn secondary\",\n                                    onClick: _withModifiers(triggerUpload, [\"stop\"])\n                                }, [...(_cache[9] || (_cache[9] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-upload\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"input\", {\n                                    ref_key: \"fileInputRef\",\n                                    ref: fileInputRef,\n                                    type: \"file\",\n                                    accept: \"image/*\",\n                                    style: { \"display\": \"none\" },\n                                    onChange: handleFileSelect\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_18, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn secondary\",\n                                onClick: _withModifiers(resetValues, [\"stop\"])\n                            }, \"\"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn primary\",\n                                onClick: _withModifiers(applyAndClose, [\"stop\"])\n                            }, \"\")\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AvatarCropDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AvatarCropDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, withModifiers as _withModifiers, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = { class: \"acu-node-config-panel\" };\nconst _hoisted_2 = { class: \"acu-node-config-header\" };\nconst _hoisted_3 = { class: \"acu-node-config-body\" };\nconst _hoisted_4 = { class: \"acu-node-fullname\" };\nconst _hoisted_5 = { class: \"acu-char-selector\" };\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = { class: \"acu-node-preview\" };\nconst _hoisted_8 = { class: \"acu-node-config-actions\" };\nimport { computed, ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'NodeLabelDialog',\n    props: {\n        visible: { type: Boolean, default: false },\n        fullName: { default: '' },\n        initialIndices: { default: () => [] }\n    },\n    emits: [\"close\", \"apply\", \"reset\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * NodeLabelDialog.vue - \n         *\n         * \n         * - \n         * - \n         * - \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const selectedIndices = ref(new Set());\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function isEnglishName(name) {\n            return /^[A-Za-z\\s'-]+$/.test(name) && name.includes(' ');\n        }\n        /**\n         * \n         * - \n         * - \n         */\n        function getDisplayCharsFromName(fullName) {\n            if (!fullName)\n                return [];\n            if (isEnglishName(fullName)) {\n                return fullName.split(' ').filter(Boolean);\n            }\n            return fullName.split('');\n        }\n        /**\n         * \n         */\n        function getDefaultIndicesFromName(fullName) {\n            const chars = getDisplayCharsFromName(fullName);\n            if (isEnglishName(fullName)) {\n                // \n                return [0];\n            }\n            // \n            return chars.length > 0 ? [chars.length - 1] : [];\n        }\n        /**\n         * \n         */\n        function getDefaultLabel(fullName) {\n            if (isEnglishName(fullName)) {\n                // \n                const firstName = fullName.split(' ')[0];\n                return firstName.length > 6 ? firstName.slice(0, 6) : firstName;\n            }\n            // \n            return fullName.length > 0 ? fullName[fullName.length - 1] : fullName;\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const displayChars = computed(() => getDisplayCharsFromName(props.fullName));\n        /**  */\n        const previewLabel = computed(() => {\n            if (!props.fullName)\n                return '';\n            const chars = displayChars.value;\n            const selectedChars = Array.from(selectedIndices.value)\n                .sort((a, b) => a - b)\n                .map(i => chars[i])\n                .filter(Boolean);\n            if (selectedChars.length === 0) {\n                return getDefaultLabel(props.fullName);\n            }\n            // \n            if (isEnglishName(props.fullName)) {\n                return selectedChars.join(' ');\n            }\n            return selectedChars.join('');\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function toggleCharSelection(index) {\n            const newSet = new Set(selectedIndices.value);\n            if (newSet.has(index)) {\n                newSet.delete(index);\n            }\n            else {\n                newSet.add(index);\n            }\n            selectedIndices.value = newSet;\n        }\n        /**  */\n        function applyAndClose() {\n            emit('apply', {\n                displayLabel: previewLabel.value,\n                selectedIndices: Array.from(selectedIndices.value),\n            });\n            emit('close');\n        }\n        /**  */\n        function resetToFullName() {\n            emit('reset');\n            emit('close');\n        }\n        /**  */\n        function handleClose() {\n            emit('close');\n        }\n        // ============================================================\n        // \n        // ============================================================\n        // \n        watch(() => [props.visible, props.fullName, props.initialIndices], ([visible]) => {\n            if (visible) {\n                if (props.initialIndices && props.initialIndices.length > 0) {\n                    selectedIndices.value = new Set(props.initialIndices);\n                }\n                else {\n                    selectedIndices.value = new Set(getDefaultIndicesFromName(props.fullName));\n                }\n            }\n        }, { immediate: true });\n        // ============================================================\n        // \n        // ============================================================\n        __expose({\n            isEnglishName,\n            getDisplayChars: getDisplayCharsFromName,\n            getDefaultIndices: getDefaultIndicesFromName,\n            getDefaultLabel,\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-node-config-overlay\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[1] || (_cache[1] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-btn\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, [...(_cache[0] || (_cache[0] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                ]))])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createElementVNode(\"p\", _hoisted_4, \"\" + _toDisplayString(__props.fullName), 1 /* TEXT */),\n                            _cache[2] || (_cache[2] = _createElementVNode(\"p\", { class: \"acu-node-hint\" }, \"\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(displayChars.value, (char, index) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: index,\n                                        class: _normalizeClass([\"acu-char-btn\", { active: selectedIndices.value.has(index) }]),\n                                        onClick: _withModifiers(($event) => (toggleCharSelection(index)), [\"stop\"])\n                                    }, _toDisplayString(char), 11 /* TEXT, CLASS, PROPS */, _hoisted_6));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            _createElementVNode(\"p\", _hoisted_7, \"\" + _toDisplayString(previewLabel.value), 1 /* TEXT */),\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-action-btn secondary\",\n                                    onClick: _withModifiers(resetToFullName, [\"stop\"])\n                                }, \"\"),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-action-btn primary\",\n                                    onClick: _withModifiers(applyAndClose, [\"stop\"])\n                                }, \"\")\n                            ])\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./NodeLabelDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NodeLabelDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, Fragment as _Fragment, renderList as _renderList, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, createVNode as _createVNode, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-avatar-manager-dialog\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-avatar-search-bar\" };\nconst _hoisted_4 = { class: \"acu-modal-body acu-avatar-list\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"acu-avatar-loading\"\n};\nconst _hoisted_6 = { class: \"acu-avatar-empty\" };\nconst _hoisted_7 = { class: \"acu-avatar-items\" };\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = { class: \"acu-avatar-column\" };\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = {\n    key: 0,\n    class: \"acu-avatar-initial\"\n};\nconst _hoisted_12 = {\n    key: 1,\n    class: \"fas fa-camera acu-avatar-camera-hint\"\n};\nconst _hoisted_13 = { class: \"acu-avatar-info\" };\nconst _hoisted_14 = { class: \"acu-avatar-name-row\" };\nconst _hoisted_15 = { class: \"acu-avatar-name-left\" };\nconst _hoisted_16 = { class: \"acu-avatar-name\" };\nconst _hoisted_17 = {\n    key: 0,\n    class: \"acu-avatar-label-preview\"\n};\nconst _hoisted_18 = { class: \"acu-avatar-name-right\" };\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = { class: \"acu-import-dropdown\" };\nconst _hoisted_21 = [\"onClick\"];\nconst _hoisted_22 = {\n    key: 0,\n    class: \"acu-dropdown-menu\"\n};\nconst _hoisted_23 = [\"onClick\"];\nconst _hoisted_24 = [\"onClick\"];\nconst _hoisted_25 = { class: \"acu-avatar-url-row\" };\nconst _hoisted_26 = [\"value\", \"onChange\", \"onBlur\"];\nconst _hoisted_27 = { class: \"acu-avatar-alias-row\" };\nconst _hoisted_28 = [\"value\", \"onChange\", \"onBlur\"];\nconst _hoisted_29 = { class: \"acu-avatar-footer\" };\nconst _hoisted_30 = { class: \"acu-footer-left\" };\nconst _hoisted_31 = [\"disabled\"];\nconst _hoisted_32 = { class: \"acu-footer-right\" };\nconst _hoisted_33 = [\"disabled\"];\nimport { computed, onMounted, ref, toRaw, watch } from 'vue';\nimport { useAvatarManager } from '../../composables/useAvatarManager';\nimport { useToast } from '../../composables/useToast';\nimport { compressImageSquare, fileToBase64 } from '../../utils';\nimport AvatarCropDialog from './AvatarCropDialog.vue';\nimport NodeLabelDialog from './NodeLabelDialog.vue';\n//  key RelationshipGraph \nconst CHAT_VAR_GRAPH_CONFIG = 'acu_graph_config';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AvatarManagerDialog',\n    props: {\n        visible: { type: Boolean, default: false },\n        nodes: { default: () => [] }\n    },\n    emits: [\"close\", \"update\", \"label-change\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * AvatarManagerDialog.vue - \n         *\n         * \n         * - \n         * -  URL \n         * - \n         * - \n         * - \n         * - /\n         */\n        function getGraphConfig() {\n            try {\n                const chatVars = getVariables({ type: 'chat' });\n                return chatVars[CHAT_VAR_GRAPH_CONFIG] || {};\n            }\n            catch (e) {\n                console.warn('[AvatarManager] :', e);\n                return {};\n            }\n        }\n        /**  */\n        function saveGraphConfig(config) {\n            try {\n                insertOrAssignVariables({ [CHAT_VAR_GRAPH_CONFIG]: config }, { type: 'chat' });\n            }\n            catch (e) {\n                console.warn('[AvatarManager] :', e);\n            }\n        }\n        // ============================================================\n        // Props & Emits\n        // ============================================================\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // \n        // ============================================================\n        const avatarManager = useAvatarManager();\n        const toast = useToast();\n        const isLoading = ref(true);\n        const avatarList = ref([]);\n        const pendingChanges = ref(new Map());\n        const hasChanges = computed(() => pendingChanges.value.size > 0);\n        // \n        const searchQuery = ref('');\n        /**  */\n        const filteredAvatarList = computed(() => {\n            if (!searchQuery.value.trim()) {\n                return avatarList.value;\n            }\n            const query = searchQuery.value.toLowerCase().trim();\n            return avatarList.value.filter(item => {\n                // \n                if (item.name.toLowerCase().includes(query))\n                    return true;\n                // \n                if (item.aliases.some(alias => alias.toLowerCase().includes(query)))\n                    return true;\n                // \n                if (item.displayLabel?.toLowerCase().includes(query))\n                    return true;\n                return false;\n            });\n        });\n        // \n        const isDeleteMode = ref(false);\n        const selectedForDelete = ref(new Set());\n        // \n        const activeImportMenu = ref(null);\n        const fileInputRef = ref(null);\n        const currentUploadItem = ref(null);\n        // \n        const showLabelDialog = ref(false);\n        const currentLabelItem = ref(null);\n        // \n        const showCropDialog = ref(false);\n        const currentCropItem = ref(null);\n        // ============================================================\n        // \n        // ============================================================\n        async function loadAvatarList() {\n            isLoading.value = true;\n            try {\n                const list = [];\n                // \n                const graphConfig = getGraphConfig();\n                const labelsConfig = graphConfig.labels || {};\n                for (const node of props.nodes) {\n                    const record = await avatarManager.getAvatar(node.name);\n                    const avatarUrl = await avatarManager.getAvatarUrl(node.name);\n                    const hasLocalBlob = record?.blob ? true : false;\n                    // \n                    let source = null;\n                    if (hasLocalBlob) {\n                        source = 'local';\n                    }\n                    else if (record?.url) {\n                        source = 'url';\n                    }\n                    else if (avatarUrl && avatarManager.isPlayerNode(node.name)) {\n                        source = 'auto';\n                    }\n                    // \n                    const labelConfig = labelsConfig[node.name];\n                    const displayLabel = labelConfig?.displayLabel;\n                    const labelIndices = labelConfig?.selectedIndices;\n                    // \n                    const aliases = record?.aliases || [];\n                    list.push({\n                        id: node.id,\n                        name: node.name,\n                        // label \n                        label: displayLabel || node.name,\n                        type: node.type,\n                        avatarUrl,\n                        url: record?.url,\n                        offsetX: record?.offsetX ?? 50,\n                        offsetY: record?.offsetY ?? 50,\n                        scale: record?.scale ?? 150,\n                        labelIndices: labelIndices,\n                        displayLabel: displayLabel,\n                        source,\n                        hasLocalBlob,\n                        aliases,\n                        aliasesText: aliases.join(', '),\n                    });\n                }\n                avatarList.value = list;\n            }\n            catch (e) {\n                console.error('[AvatarManager] :', e);\n            }\n            finally {\n                isLoading.value = false;\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function handleClose() {\n            if (hasChanges.value) {\n                if (!confirm('')) {\n                    return;\n                }\n            }\n            pendingChanges.value.clear();\n            emit('close');\n        }\n        function getInitial(name) {\n            return name ? name.charAt(0) : '?';\n        }\n        function getSourceLabel(source) {\n            switch (source) {\n                case 'local':\n                    return '';\n                case 'url':\n                    return 'URL';\n                case 'auto':\n                    return '';\n                default:\n                    return '';\n            }\n        }\n        function getAvatarStyle(item) {\n            if (!item.avatarUrl)\n                return {};\n            return {\n                backgroundImage: `url('${item.avatarUrl}')`,\n                backgroundPosition: `${item.offsetX}% ${item.offsetY}%`,\n                backgroundSize: `${item.scale}%`,\n            };\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function toggleImportMenu(itemId) {\n            activeImportMenu.value = activeImportMenu.value === itemId ? null : itemId;\n        }\n        function closeImportMenu() {\n            activeImportMenu.value = null;\n        }\n        function importLocal(item) {\n            closeImportMenu();\n            currentUploadItem.value = item;\n            fileInputRef.value?.click();\n        }\n        function canImportFromTavern(item) {\n            // \n            if (avatarManager.isPlayerNode(item.name)) {\n                return !!avatarManager.getSillyTavernUserAvatar();\n            }\n            // NPC/\n            return !!avatarManager.getSillyTavernCharacterAvatar();\n        }\n        function importFromTavern(item) {\n            closeImportMenu();\n            let tavernUrl = null;\n            if (avatarManager.isPlayerNode(item.name)) {\n                // \n                tavernUrl = avatarManager.getSillyTavernUserAvatar();\n            }\n            else {\n                // NPC \n                tavernUrl = avatarManager.getSillyTavernCharacterAvatar();\n            }\n            if (tavernUrl) {\n                //  pending changes\n                addPendingChange(item.name, { url: tavernUrl });\n                // \n                const idx = avatarList.value.findIndex(i => i.id === item.id);\n                if (idx !== -1) {\n                    avatarList.value[idx] = {\n                        ...avatarList.value[idx],\n                        url: tavernUrl,\n                        avatarUrl: tavernUrl,\n                        source: 'url',\n                    };\n                }\n            }\n            else {\n                alert(avatarManager.isPlayerNode(item.name) ? '' : '');\n            }\n        }\n        async function handleFileSelect(event) {\n            const input = event.target;\n            const file = input.files?.[0];\n            if (!file || !currentUploadItem.value) {\n                input.value = '';\n                return;\n            }\n            const item = currentUploadItem.value;\n            try {\n                //  Cytoscape \n                const base64 = await fileToBase64(file);\n                const squareBase64 = await compressImageSquare(base64, 150, 0.85);\n                //  base64  Blob\n                const response = await fetch(squareBase64);\n                const squareBlob = await response.blob();\n                //  IndexedDBlabelIndices  IndexedDB\n                await avatarManager.saveAvatar({\n                    name: item.name,\n                    blob: squareBlob,\n                    offsetX: item.offsetX,\n                    offsetY: item.offsetY,\n                    scale: item.scale,\n                    aliases: [],\n                    updatedAt: Date.now(),\n                });\n                // \n                await loadAvatarList();\n                emit('update');\n            }\n            catch (e) {\n                console.error('[AvatarManager] :', e);\n                alert('');\n            }\n            input.value = '';\n            currentUploadItem.value = null;\n        }\n        // ============================================================\n        // URL \n        // ============================================================\n        function updateUrl(item, url) {\n            const trimmedUrl = url.trim();\n            //  pending changes\n            addPendingChange(item.name, { url: trimmedUrl || undefined });\n            // \n            const idx = avatarList.value.findIndex(i => i.id === item.id);\n            if (idx !== -1) {\n                avatarList.value[idx] = {\n                    ...avatarList.value[idx],\n                    url: trimmedUrl || undefined,\n                    avatarUrl: trimmedUrl || avatarList.value[idx].avatarUrl,\n                    source: trimmedUrl ? 'url' : avatarList.value[idx].source,\n                };\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function updateAliases(item, aliasesText) {\n            // \n            const aliases = aliasesText\n                .split(/[,\\s]+/)\n                .map(s => s.trim())\n                .filter(Boolean);\n            //  pending changes\n            addPendingChange(item.name, { aliases });\n            // \n            const idx = avatarList.value.findIndex(i => i.id === item.id);\n            if (idx !== -1) {\n                avatarList.value[idx] = {\n                    ...avatarList.value[idx],\n                    aliases,\n                    aliasesText: aliases.join(', '),\n                };\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function openLabelDialog(item) {\n            // \n            const graphConfig = getGraphConfig();\n            const labelConfig = graphConfig.labels?.[item.name];\n            //  item\n            const updatedItem = {\n                ...item,\n                labelIndices: labelConfig?.selectedIndices || [],\n                displayLabel: labelConfig?.displayLabel,\n                label: labelConfig?.displayLabel || item.name,\n            };\n            currentLabelItem.value = updatedItem;\n            showLabelDialog.value = true;\n        }\n        function closeLabelDialog() {\n            showLabelDialog.value = false;\n            currentLabelItem.value = null;\n        }\n        function applyLabel(data) {\n            if (!currentLabelItem.value) {\n                console.warn('[AvatarManager] applyLabel: currentLabelItem ');\n                return;\n            }\n            const item = currentLabelItem.value;\n            console.log('[AvatarManager] applyLabel :', item.name, '->', data.displayLabel);\n            // -  UI\n            const config = getGraphConfig();\n            if (!config.labels)\n                config.labels = {};\n            config.labels[item.name] = {\n                displayLabel: data.displayLabel,\n                selectedIndices: data.selectedIndices,\n            };\n            saveGraphConfig(config);\n            console.log('[AvatarManager] :', item.name, '->', data.displayLabel);\n            // \n            const idx = avatarList.value.findIndex(i => i.id === item.id);\n            if (idx !== -1) {\n                const updatedItem = {\n                    ...avatarList.value[idx],\n                    displayLabel: data.displayLabel,\n                    labelIndices: data.selectedIndices,\n                    label: data.displayLabel, // \n                };\n                avatarList.value[idx] = updatedItem;\n            }\n            // \n            closeLabelDialog();\n            // \n            console.log('[AvatarManager]  label-change ');\n            emit('label-change');\n        }\n        function resetLabel() {\n            if (!currentLabelItem.value) {\n                console.warn('[AvatarManager] resetLabel: currentLabelItem ');\n                return;\n            }\n            const item = currentLabelItem.value;\n            console.log('[AvatarManager] resetLabel :', item.name);\n            // \n            const config = getGraphConfig();\n            if (config.labels && config.labels[item.name]) {\n                delete config.labels[item.name];\n                saveGraphConfig(config);\n                console.log('[AvatarManager] :', item.name);\n            }\n            // \n            const idx = avatarList.value.findIndex(i => i.id === item.id);\n            if (idx !== -1) {\n                const updatedItem = {\n                    ...avatarList.value[idx],\n                    displayLabel: undefined,\n                    labelIndices: undefined,\n                    label: item.name, // \n                };\n                avatarList.value[idx] = updatedItem;\n            }\n            // \n            closeLabelDialog();\n            // \n            console.log('[AvatarManager]  label-change ');\n            emit('label-change');\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function openCropDialog(item) {\n            if (!item.avatarUrl) {\n                // \n                currentUploadItem.value = item;\n                fileInputRef.value?.click();\n                return;\n            }\n            currentCropItem.value = item;\n            showCropDialog.value = true;\n        }\n        function closeCropDialog() {\n            showCropDialog.value = false;\n            currentCropItem.value = null;\n        }\n        function applyCrop(data) {\n            if (!currentCropItem.value)\n                return;\n            const item = currentCropItem.value;\n            //  pending changes\n            addPendingChange(item.name, {\n                offsetX: data.offsetX,\n                offsetY: data.offsetY,\n                scale: data.scale,\n            });\n            // \n            const idx = avatarList.value.findIndex(i => i.id === item.id);\n            if (idx !== -1) {\n                const updatedItem = {\n                    ...avatarList.value[idx],\n                    offsetX: data.offsetX,\n                    offsetY: data.offsetY,\n                    scale: data.scale,\n                };\n                avatarList.value[idx] = updatedItem;\n                //  currentCropItem\n                currentCropItem.value = updatedItem;\n            }\n            closeCropDialog();\n        }\n        async function handleCropUpload(file) {\n            if (!currentCropItem.value)\n                return;\n            const item = currentCropItem.value;\n            try {\n                //  Cytoscape \n                const base64 = await fileToBase64(file);\n                const squareBase64 = await compressImageSquare(base64, 150, 0.85);\n                //  base64  Blob\n                const response = await fetch(squareBase64);\n                const squareBlob = await response.blob();\n                await avatarManager.saveAvatar({\n                    name: item.name,\n                    blob: squareBlob,\n                    offsetX: 50,\n                    offsetY: 50,\n                    scale: 150,\n                    aliases: [],\n                    // labelIndices  IndexedDB\n                    updatedAt: Date.now(),\n                });\n                await loadAvatarList();\n                closeCropDialog();\n                emit('update');\n            }\n            catch (e) {\n                console.error('[AvatarManager] :', e);\n                alert('');\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function enterDeleteMode() {\n            isDeleteMode.value = true;\n            selectedForDelete.value.clear();\n        }\n        function exitDeleteMode() {\n            isDeleteMode.value = false;\n            selectedForDelete.value.clear();\n        }\n        function toggleDeleteSelection(itemId) {\n            const newSet = new Set(selectedForDelete.value);\n            if (newSet.has(itemId)) {\n                newSet.delete(itemId);\n            }\n            else {\n                newSet.add(itemId);\n            }\n            selectedForDelete.value = newSet;\n        }\n        async function confirmDelete() {\n            if (selectedForDelete.value.size === 0)\n                return;\n            const names = avatarList.value.filter(i => selectedForDelete.value.has(i.id)).map(i => i.name);\n            if (!confirm(` ${names.length} \\n\\n IndexedDB `)) {\n                return;\n            }\n            try {\n                await avatarManager.deleteAvatars(names);\n                await loadAvatarList();\n                exitDeleteMode();\n                emit('update');\n            }\n            catch (e) {\n                console.error('[AvatarManager] :', e);\n                alert('');\n            }\n        }\n        // ============================================================\n        // Pending Changes \n        // ============================================================\n        function addPendingChange(name, changes) {\n            const existing = pendingChanges.value.get(name) || {};\n            pendingChanges.value.set(name, { ...existing, ...changes });\n        }\n        async function saveAll() {\n            if (pendingChanges.value.size === 0)\n                return;\n            try {\n                for (const [name, changes] of pendingChanges.value) {\n                    const existing = await avatarManager.getAvatar(name);\n                    //  changes  existing \n                    //  toRaw  Vue  IndexedDB \n                    let aliases = [];\n                    if (changes.aliases !== undefined) {\n                        aliases = [...toRaw(changes.aliases)];\n                    }\n                    else if (existing?.aliases) {\n                        aliases = [...existing.aliases];\n                    }\n                    const record = {\n                        name,\n                        blob: existing?.blob,\n                        url: changes.url !== undefined ? changes.url : existing?.url,\n                        offsetX: changes.offsetX ?? existing?.offsetX ?? 50,\n                        offsetY: changes.offsetY ?? existing?.offsetY ?? 50,\n                        scale: changes.scale ?? existing?.scale ?? 150,\n                        aliases,\n                        // labelIndices  IndexedDB\n                        updatedAt: Date.now(),\n                    };\n                    await avatarManager.saveAvatar(record);\n                }\n                pendingChanges.value.clear();\n                toast.success('');\n                emit('update');\n            }\n            catch (e) {\n                console.error('[AvatarManager] :', e);\n                toast.error(': ' + (e instanceof Error ? e.message : String(e)));\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        onMounted(() => {\n            if (props.visible) {\n                loadAvatarList();\n            }\n        });\n        watch(() => props.visible, visible => {\n            if (visible) {\n                loadAvatarList();\n            }\n            else {\n                // \n                isDeleteMode.value = false;\n                selectedForDelete.value.clear();\n                activeImportMenu.value = null;\n            }\n        });\n        // \n        watch(activeImportMenu, val => {\n            if (val) {\n                const handleClick = () => {\n                    activeImportMenu.value = null;\n                    document.removeEventListener('click', handleClick);\n                };\n                setTimeout(() => {\n                    document.addEventListener('click', handleClick);\n                }, 0);\n            }\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-avatar-manager-overlay\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-user-circle\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-search\" }, null, -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((searchQuery).value = $event)),\n                                type: \"text\",\n                                class: \"acu-avatar-search-input\",\n                                placeholder: \"...\"\n                            }, null, 512 /* NEED_PATCH */), [\n                                [_vModelText, searchQuery.value]\n                            ]),\n                            (searchQuery.value)\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 0,\n                                    class: \"acu-search-clear\",\n                                    onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (searchQuery.value = ''), [\"stop\"]))\n                                }, [...(_cache[3] || (_cache[3] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ]),\n                        _createCommentVNode(\"  -  \"),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createCommentVNode(\"  \"),\n                            (isLoading.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[5] || (_cache[5] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-spinner fa-spin\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", null, \"...\", -1 /* CACHED */)\n                                    ]))]))\n                                : (filteredAvatarList.value.length === 0)\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_6, [\n                                            _cache[6] || (_cache[6] = _createElementVNode(\"i\", { class: \"fas fa-user-slash\" }, null, -1 /* CACHED */)),\n                                            _createElementVNode(\"p\", null, _toDisplayString(searchQuery.value ? '' : ''), 1 /* TEXT */)\n                                        ])\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_7, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filteredAvatarList.value, (item) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: item.id,\n                                                    class: _normalizeClass([\"acu-avatar-item\", { selected: selectedForDelete.value.has(item.id) }])\n                                                }, [\n                                                    _createCommentVNode(\"  \"),\n                                                    (isDeleteMode.value)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", {\n                                                            key: 0,\n                                                            class: \"acu-avatar-checkbox\",\n                                                            onClick: _withModifiers(($event) => (toggleDeleteSelection(item.id)), [\"stop\"])\n                                                        }, [\n                                                            _createElementVNode(\"i\", {\n                                                                class: _normalizeClass(selectedForDelete.value.has(item.id) ? 'fas fa-check-square' : 'far fa-square')\n                                                            }, null, 2 /* CLASS */)\n                                                        ], 8 /* PROPS */, _hoisted_8))\n                                                        : _createCommentVNode(\"v-if\", true),\n                                                    _createCommentVNode(\"  +  \"),\n                                                    _createElementVNode(\"div\", _hoisted_9, [\n                                                        _createCommentVNode(\"  \"),\n                                                        _createElementVNode(\"div\", {\n                                                            class: _normalizeClass([\"acu-avatar-preview\", { 'has-image': !!item.avatarUrl }]),\n                                                            style: _normalizeStyle(getAvatarStyle(item)),\n                                                            onClick: _withModifiers(($event) => (openCropDialog(item)), [\"stop\"])\n                                                        }, [\n                                                            (!item.avatarUrl)\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, _toDisplayString(item.label), 1 /* TEXT */))\n                                                                : _createCommentVNode(\"v-if\", true),\n                                                            (!item.avatarUrl)\n                                                                ? (_openBlock(), _createElementBlock(\"i\", _hoisted_12))\n                                                                : _createCommentVNode(\"v-if\", true)\n                                                        ], 14 /* CLASS, STYLE, PROPS */, _hoisted_10),\n                                                        _createCommentVNode(\"  \"),\n                                                        (item.source)\n                                                            ? (_openBlock(), _createElementBlock(\"span\", {\n                                                                key: 0,\n                                                                class: _normalizeClass([\"acu-avatar-source\", 'acu-source-' + item.source])\n                                                            }, _toDisplayString(getSourceLabel(item.source)), 3 /* TEXT, CLASS */))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_13, [\n                                                        _createCommentVNode(\"  \"),\n                                                        _createElementVNode(\"div\", _hoisted_14, [\n                                                            _createCommentVNode(\"  +  \"),\n                                                            _createElementVNode(\"div\", _hoisted_15, [\n                                                                _createElementVNode(\"span\", _hoisted_16, _toDisplayString(item.name), 1 /* TEXT */),\n                                                                (item.displayLabel)\n                                                                    ? (_openBlock(), _createElementBlock(\"span\", _hoisted_17, \"(\" + _toDisplayString(item.displayLabel) + \")\", 1 /* TEXT */))\n                                                                    : _createCommentVNode(\"v-if\", true)\n                                                            ]),\n                                                            _createCommentVNode(\"  \"),\n                                                            _createElementVNode(\"div\", _hoisted_18, [\n                                                                _createCommentVNode(\"  \"),\n                                                                _createElementVNode(\"button\", {\n                                                                    class: \"acu-avatar-name-btn\",\n                                                                    title: \"\",\n                                                                    onClick: _withModifiers(($event) => (openLabelDialog(item)), [\"stop\"])\n                                                                }, \"  \", 8 /* PROPS */, _hoisted_19),\n                                                                _createCommentVNode(\"  \"),\n                                                                _createElementVNode(\"div\", _hoisted_20, [\n                                                                    _createElementVNode(\"button\", {\n                                                                        class: \"acu-avatar-import-btn\",\n                                                                        title: \"\",\n                                                                        onClick: _withModifiers(($event) => (toggleImportMenu(item.id)), [\"stop\"])\n                                                                    }, [...(_cache[7] || (_cache[7] = [\n                                                                            _createTextVNode(\"  \", -1 /* CACHED */),\n                                                                            _createElementVNode(\"i\", { class: \"fas fa-caret-down\" }, null, -1 /* CACHED */)\n                                                                        ]))], 8 /* PROPS */, _hoisted_21),\n                                                                    (activeImportMenu.value === item.id)\n                                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [\n                                                                            _createElementVNode(\"div\", {\n                                                                                class: \"acu-dropdown-item\",\n                                                                                onClick: _withModifiers(($event) => (importLocal(item)), [\"stop\"])\n                                                                            }, [...(_cache[8] || (_cache[8] = [\n                                                                                    _createElementVNode(\"i\", { class: \"fas fa-upload\" }, null, -1 /* CACHED */),\n                                                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                                                ]))], 8 /* PROPS */, _hoisted_23),\n                                                                            _createElementVNode(\"div\", {\n                                                                                class: _normalizeClass([\"acu-dropdown-item\", { disabled: !canImportFromTavern(item) }]),\n                                                                                onClick: _withModifiers(($event) => (importFromTavern(item)), [\"stop\"])\n                                                                            }, [...(_cache[9] || (_cache[9] = [\n                                                                                    _createElementVNode(\"i\", { class: \"fas fa-globe\" }, null, -1 /* CACHED */),\n                                                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                                                ]))], 10 /* CLASS, PROPS */, _hoisted_24)\n                                                                        ]))\n                                                                        : _createCommentVNode(\"v-if\", true)\n                                                                ])\n                                                            ])\n                                                        ]),\n                                                        _createCommentVNode(\" URL  \"),\n                                                        _createElementVNode(\"div\", _hoisted_25, [\n                                                            _cache[10] || (_cache[10] = _createElementVNode(\"span\", { class: \"acu-url-label\" }, \"URL:\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"input\", {\n                                                                type: \"text\",\n                                                                class: \"acu-avatar-url-input\",\n                                                                placeholder: \"URL...\",\n                                                                value: item.url || '',\n                                                                onChange: ($event) => (updateUrl(item, $event.target.value)),\n                                                                onBlur: ($event) => (updateUrl(item, $event.target.value))\n                                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_26)\n                                                        ]),\n                                                        _createCommentVNode(\"  \"),\n                                                        _createElementVNode(\"div\", _hoisted_27, [\n                                                            _cache[11] || (_cache[11] = _createElementVNode(\"span\", { class: \"acu-alias-label\" }, \":\", -1 /* CACHED */)),\n                                                            _createElementVNode(\"input\", {\n                                                                type: \"text\",\n                                                                class: \"acu-avatar-alias-input\",\n                                                                placeholder: \"...\",\n                                                                value: item.aliasesText || '',\n                                                                onChange: ($event) => (updateAliases(item, $event.target.value)),\n                                                                onBlur: ($event) => (updateAliases(item, $event.target.value))\n                                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_28)\n                                                        ])\n                                                    ])\n                                                ], 2 /* CLASS */));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_29, [\n                            _createElementVNode(\"div\", _hoisted_30, [\n                                (!isDeleteMode.value)\n                                    ? (_openBlock(), _createElementBlock(\"button\", {\n                                        key: 0,\n                                        class: \"acu-modal-btn secondary\",\n                                        onClick: _withModifiers(enterDeleteMode, [\"stop\"])\n                                    }, [...(_cache[12] || (_cache[12] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-trash-alt\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))]))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-modal-btn secondary\",\n                                            onClick: _withModifiers(exitDeleteMode, [\"stop\"])\n                                        }, \"\"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-modal-btn danger\",\n                                            disabled: selectedForDelete.value.size === 0,\n                                            onClick: _withModifiers(confirmDelete, [\"stop\"])\n                                        }, \"  (\" + _toDisplayString(selectedForDelete.value.size) + \") \", 9 /* TEXT, PROPS */, _hoisted_31)\n                                    ], 64 /* STABLE_FRAGMENT */))\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_32, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-modal-btn primary\",\n                                    disabled: !hasChanges.value,\n                                    onClick: _withModifiers(saveAll, [\"stop\"])\n                                }, [...(_cache[13] || (_cache[13] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-save\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))], 8 /* PROPS */, _hoisted_33)\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"input\", {\n                        ref_key: \"fileInputRef\",\n                        ref: fileInputRef,\n                        type: \"file\",\n                        accept: \"image/*\",\n                        style: { \"display\": \"none\" },\n                        onChange: handleFileSelect\n                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */),\n                    _createCommentVNode(\"  \"),\n                    _createVNode(NodeLabelDialog, {\n                        visible: showLabelDialog.value,\n                        \"full-name\": currentLabelItem.value?.name || '',\n                        \"initial-indices\": currentLabelItem.value?.labelIndices || [],\n                        onClose: closeLabelDialog,\n                        onApply: applyLabel,\n                        onReset: resetLabel\n                    }, null, 8 /* PROPS */, [\"visible\", \"full-name\", \"initial-indices\"]),\n                    _createCommentVNode(\"  \"),\n                    (showCropDialog.value)\n                        ? (_openBlock(), _createBlock(AvatarCropDialog, {\n                            key: 0,\n                            visible: showCropDialog.value,\n                            \"image-url\": currentCropItem.value?.avatarUrl || '',\n                            name: currentCropItem.value?.name || '',\n                            \"initial-offset-x\": currentCropItem.value?.offsetX ?? 50,\n                            \"initial-offset-y\": currentCropItem.value?.offsetY ?? 50,\n                            \"initial-scale\": currentCropItem.value?.scale ?? 150,\n                            onClose: closeCropDialog,\n                            onApply: applyCrop,\n                            onUpload: handleCropUpload\n                        }, null, 8 /* PROPS */, [\"visible\", \"image-url\", \"name\", \"initial-offset-x\", \"initial-offset-y\", \"initial-scale\"]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AvatarManagerDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AvatarManagerDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-widget-manager-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-body acu-widget-manager-body\" };\nconst _hoisted_4 = { class: \"acu-widget-section acu-widget-added\" };\nconst _hoisted_5 = { class: \"acu-widget-section-header\" };\nconst _hoisted_6 = { class: \"acu-widget-count\" };\nconst _hoisted_7 = [\"onDragstart\", \"onDragover\", \"onClick\"];\nconst _hoisted_8 = { class: \"acu-widget-move-btns\" };\nconst _hoisted_9 = [\"disabled\", \"onClick\"];\nconst _hoisted_10 = [\"disabled\", \"onClick\"];\nconst _hoisted_11 = { class: \"acu-widget-name\" };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"acu-widget-badge-special\"\n};\nconst _hoisted_13 = {\n    key: 0,\n    class: \"acu-widget-empty\"\n};\nconst _hoisted_14 = { class: \"acu-widget-section acu-widget-available\" };\nconst _hoisted_15 = { class: \"acu-widget-section-header\" };\nconst _hoisted_16 = { class: \"acu-widget-count\" };\nconst _hoisted_17 = { class: \"acu-widget-section-list\" };\nconst _hoisted_18 = [\"onClick\"];\nconst _hoisted_19 = { class: \"acu-widget-name\" };\nconst _hoisted_20 = {\n    key: 0,\n    class: \"acu-widget-badge-special\"\n};\nconst _hoisted_21 = { class: \"acu-widget-row-count\" };\nconst _hoisted_22 = {\n    key: 0,\n    class: \"acu-widget-empty\"\n};\nimport { computed, ref } from 'vue';\nimport { useDashboardStore } from '../../stores/useDashboardStore';\nimport { TABLE_KEYWORD_RULES } from '../../types';\n// ============================================================\n// Computed\n// ============================================================\n/**  */\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'DashboardWidgetManagerDialog',\n    props: {\n        visible: { type: Boolean },\n        tables: {}\n    },\n    emits: [\"update:visible\", \"close\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * DashboardWidgetManagerDialog - \n         *\n         * :\n         * - \"\"\"\"\n         * -  / \n         * - \n         * - /\n         * - PC\n         * -  () \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Store\n        // ============================================================\n        const dashboardStore = useDashboardStore();\n        // ============================================================\n        // State\n        // ============================================================\n        /**  ID */\n        const draggingId = ref(null);\n        /**  */\n        const dropTargetIndex = ref(null);\n        /**  DOM  */\n        const addedListRef = ref(null);\n        // ============================================================\n        // Types\n        // ============================================================\n        const specialWidgets = [\n            {\n                id: 'special_updateStatus',\n                name: '',\n                icon: 'fa-sync-alt',\n                isSpecial: true,\n                specialType: 'updateStatus',\n            },\n            {\n                id: 'special_optionsPanel',\n                name: '',\n                icon: 'fa-list-check',\n                isSpecial: true,\n                specialType: 'optionsPanel',\n            },\n        ];\n        /**  */\n        const addedItems = computed(() => {\n            return dashboardStore.enabledWidgets.map(widget => {\n                // \n                if (widget.type === 'updateStatus' || widget.type === 'optionsPanel') {\n                    const special = specialWidgets.find(s => s.specialType === widget.type);\n                    return {\n                        id: widget.id,\n                        name: special?.name || widget.title,\n                        icon: widget.icon || special?.icon || 'fa-cog',\n                        isSpecial: true,\n                        specialType: widget.type,\n                        widgetId: widget.id,\n                    };\n                }\n                // \n                const table = props.tables.find(t => t.id === widget.tableId);\n                return {\n                    id: widget.id,\n                    name: table?.name || widget.title || widget.tableId || '',\n                    icon: widget.icon || 'fa-table',\n                    isSpecial: false,\n                    rowCount: table?.rows.length,\n                    widgetId: widget.id,\n                };\n            });\n        });\n        /**  */\n        const availableItems = computed(() => {\n            const items = [];\n            // 1. \n            for (const special of specialWidgets) {\n                if (!dashboardStore.hasSpecialWidget(special.specialType)) {\n                    items.push(special);\n                }\n            }\n            // 2. \n            for (const table of props.tables) {\n                if (!dashboardStore.hasWidget(table.id)) {\n                    items.push({\n                        id: `table_${table.id}`,\n                        name: table.name,\n                        icon: getTableIcon(table.name, table.id),\n                        isSpecial: false,\n                        rowCount: table.rows.length,\n                    });\n                }\n            }\n            return items;\n        });\n        // ============================================================\n        // Methods - \n        // ============================================================\n        /**\n         * \n         */\n        function getTableIcon(tableName, tableId) {\n            const searchText = (tableName + tableId).toLowerCase();\n            for (const [key, keywords] of Object.entries(TABLE_KEYWORD_RULES)) {\n                if (keywords.some(k => searchText.includes(k.toLowerCase()))) {\n                    const iconMap = {\n                        player: 'fa-user',\n                        npc: 'fa-users',\n                        task: 'fa-tasks',\n                        item: 'fa-box',\n                        summary: 'fa-book',\n                        option: 'fa-list-check',\n                    };\n                    return iconMap[key] || 'fa-table';\n                }\n            }\n            return 'fa-table';\n        }\n        // ============================================================\n        // Methods - /\n        // ============================================================\n        /**\n         * \n         */\n        function handleAdd(item) {\n            if (item.isSpecial && item.specialType) {\n                dashboardStore.addSpecialWidget(item.specialType);\n            }\n            else {\n                //  id  tableId (: table_xxx)\n                const tableId = item.id.replace(/^table_/, '');\n                const table = props.tables.find(t => t.id === tableId);\n                dashboardStore.addWidget(tableId, table?.name);\n            }\n        }\n        /**\n         * \n         */\n        function handleRemove(item) {\n            if (item.widgetId) {\n                dashboardStore.removeWidget(item.widgetId);\n            }\n        }\n        // ============================================================\n        // Methods - \n        // ============================================================\n        /**\n         * \n         */\n        function moveUp(index) {\n            if (index <= 0)\n                return;\n            const item = addedItems.value[index];\n            if (item.widgetId) {\n                dashboardStore.moveWidget(item.widgetId, index - 1);\n            }\n        }\n        /**\n         * \n         */\n        function moveDown(index) {\n            if (index >= addedItems.value.length - 1)\n                return;\n            const item = addedItems.value[index];\n            if (item.widgetId) {\n                dashboardStore.moveWidget(item.widgetId, index + 1);\n            }\n        }\n        /**\n         * \n         */\n        function handleDragStart(e, id) {\n            draggingId.value = id;\n            if (e.dataTransfer) {\n                e.dataTransfer.effectAllowed = 'move';\n                e.dataTransfer.setData('text/plain', id);\n            }\n        }\n        /**\n         * \n         */\n        function handleDragEnd() {\n            draggingId.value = null;\n            dropTargetIndex.value = null;\n        }\n        /**\n         * \n         */\n        function handleDragOver(e, index) {\n            e.preventDefault();\n            dropTargetIndex.value = index;\n        }\n        /**\n         * \n         */\n        function handleDrop(e) {\n            e.preventDefault();\n            if (!draggingId.value || dropTargetIndex.value === null)\n                return;\n            const draggedItem = addedItems.value.find(item => item.id === draggingId.value);\n            if (draggedItem?.widgetId) {\n                dashboardStore.moveWidget(draggedItem.widgetId, dropTargetIndex.value);\n            }\n            draggingId.value = null;\n            dropTargetIndex.value = null;\n        }\n        // ============================================================\n        // Methods - \n        // ============================================================\n        function handleClose() {\n            emit('update:visible', false);\n            emit('close');\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-th-large\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  - PC  /  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _createElementVNode(\"div\", _hoisted_5, [\n                                    _cache[4] || (_cache[4] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_6, _toDisplayString(addedItems.value.length), 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", {\n                                    ref_key: \"addedListRef\",\n                                    ref: addedListRef,\n                                    class: \"acu-widget-section-list\",\n                                    onDragover: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"prevent\"])),\n                                    onDrop: handleDrop\n                                }, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(addedItems.value, (item, index) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: item.id,\n                                            class: _normalizeClass([\"acu-widget-item acu-widget-item-added\", { 'acu-widget-dragging': draggingId.value === item.id }]),\n                                            draggable: true,\n                                            onDragstart: ($event) => (handleDragStart($event, item.id)),\n                                            onDragend: handleDragEnd,\n                                            onDragover: _withModifiers(($event) => (handleDragOver($event, index)), [\"prevent\"]),\n                                            onClick: _withModifiers(($event) => (handleRemove(item)), [\"stop\"])\n                                        }, [\n                                            _createCommentVNode(\"  (6) \"),\n                                            _createElementVNode(\"div\", {\n                                                class: \"acu-widget-drag-handle\",\n                                                onMousedown: _cache[0] || (_cache[0] = _withModifiers(() => { }, [\"stop\"])),\n                                                onTouchstart: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"]))\n                                            }, [...(_cache[5] || (_cache[5] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-grip-vertical\" }, null, -1 /* CACHED */)\n                                                ]))], 32 /* NEED_HYDRATION */),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_8, [\n                                                _createElementVNode(\"button\", {\n                                                    disabled: index === 0,\n                                                    title: \"\",\n                                                    onClick: _withModifiers(($event) => (moveUp(index)), [\"stop\"])\n                                                }, [...(_cache[6] || (_cache[6] = [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-chevron-up\" }, null, -1 /* CACHED */)\n                                                    ]))], 8 /* PROPS */, _hoisted_9),\n                                                _createElementVNode(\"button\", {\n                                                    disabled: index === addedItems.value.length - 1,\n                                                    title: \"\",\n                                                    onClick: _withModifiers(($event) => (moveDown(index)), [\"stop\"])\n                                                }, [...(_cache[7] || (_cache[7] = [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-chevron-down\" }, null, -1 /* CACHED */)\n                                                    ]))], 8 /* PROPS */, _hoisted_10)\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(['fas', item.icon])\n                                            }, null, 2 /* CLASS */),\n                                            _createElementVNode(\"span\", _hoisted_11, _toDisplayString(item.name), 1 /* TEXT */),\n                                            _createCommentVNode(\"  \"),\n                                            (item.isSpecial)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_12, \"\"))\n                                                : _createCommentVNode(\"v-if\", true),\n                                            _createCommentVNode(\"  \"),\n                                            _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"acu-widget-action-hint acu-widget-hint-remove\" }, [\n                                                _createElementVNode(\"i\", { class: \"fas fa-minus-circle\" })\n                                            ], -1 /* CACHED */))\n                                        ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_7));\n                                    }), 128 /* KEYED_FRAGMENT */)),\n                                    (addedItems.value.length === 0)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [...(_cache[9] || (_cache[9] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-inbox\" }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                            ]))]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 544 /* NEED_HYDRATION, NEED_PATCH */)\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_14, [\n                                _createElementVNode(\"div\", _hoisted_15, [\n                                    _cache[10] || (_cache[10] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_16, _toDisplayString(availableItems.value.length), 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_17, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableItems.value, (item) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: item.id,\n                                            class: \"acu-widget-item acu-widget-item-available\",\n                                            onClick: _withModifiers(($event) => (handleAdd(item)), [\"stop\"])\n                                        }, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(['fas', item.icon])\n                                            }, null, 2 /* CLASS */),\n                                            _createElementVNode(\"span\", _hoisted_19, _toDisplayString(item.name), 1 /* TEXT */),\n                                            _createCommentVNode(\"  \"),\n                                            (item.isSpecial)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_20, \"\"))\n                                                : (item.rowCount !== undefined)\n                                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                        _createCommentVNode(\"  \"),\n                                                        _createElementVNode(\"span\", _hoisted_21, _toDisplayString(item.rowCount) + \"  \", 1 /* TEXT */)\n                                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                                    : _createCommentVNode(\"v-if\", true),\n                                            _createCommentVNode(\"  \"),\n                                            _cache[11] || (_cache[11] = _createElementVNode(\"span\", { class: \"acu-widget-action-hint acu-widget-hint-add\" }, [\n                                                _createElementVNode(\"i\", { class: \"fas fa-plus-circle\" })\n                                            ], -1 /* CACHED */))\n                                        ], 8 /* PROPS */, _hoisted_18));\n                                    }), 128 /* KEYED_FRAGMENT */)),\n                                    (availableItems.value.length === 0)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [...(_cache[12] || (_cache[12] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-check-circle\" }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                            ]))]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ])\n                            ])\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./DashboardWidgetManagerDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DashboardWidgetManagerDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, unref as _unref, createVNode as _createVNode, normalizeStyle as _normalizeStyle, createBlock as _createBlock, withModifiers as _withModifiers, Transition as _Transition, withCtx as _withCtx } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-header\" };\nconst _hoisted_2 = { class: \"acu-modal-title\" };\nconst _hoisted_3 = { class: \"acu-history-layout acu-pc-layout\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"acu-loading-state\"\n};\nconst _hoisted_5 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_6 = {\n    key: 2,\n    class: \"acu-history-list\"\n};\nconst _hoisted_7 = [\"open\", \"onToggle\"];\nconst _hoisted_8 = { class: \"acu-history-summary\" };\nconst _hoisted_9 = { class: \"acu-history-title\" };\nconst _hoisted_10 = { class: \"acu-history-time\" };\nconst _hoisted_11 = { class: \"acu-history-card-wrapper\" };\nconst _hoisted_12 = { class: \"acu-current-card-label\" };\nconst _hoisted_13 = {\n    key: 0,\n    class: \"acu-changes-count\"\n};\nconst _hoisted_14 = { class: \"acu-current-card\" };\nconst _hoisted_15 = { class: \"acu-history-actions\" };\nconst _hoisted_16 = [\"disabled\"];\nconst _hoisted_17 = [\"disabled\"];\nconst _hoisted_18 = { class: \"acu-config-hint\" };\nconst _hoisted_19 = { key: 0 };\nconst _hoisted_20 = { key: 1 };\nconst _hoisted_21 = { class: \"acu-history-mobile-list\" };\nconst _hoisted_22 = {\n    key: 0,\n    class: \"acu-loading-state\"\n};\nconst _hoisted_23 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_24 = {\n    key: 2,\n    class: \"acu-history-list\"\n};\nconst _hoisted_25 = [\"open\", \"onToggle\"];\nconst _hoisted_26 = { class: \"acu-history-summary\" };\nconst _hoisted_27 = { class: \"acu-history-title\" };\nconst _hoisted_28 = { class: \"acu-history-time\" };\nconst _hoisted_29 = { class: \"acu-history-card-wrapper\" };\nconst _hoisted_30 = { class: \"acu-mobile-actions\" };\nconst _hoisted_31 = { class: \"acu-mobile-history-section\" };\nconst _hoisted_32 = { class: \"acu-history-scroll\" };\nconst _hoisted_33 = {\n    key: 0,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_34 = {\n    key: 1,\n    class: \"acu-history-list\"\n};\nconst _hoisted_35 = [\"open\", \"onToggle\"];\nconst _hoisted_36 = { class: \"acu-history-summary\" };\nconst _hoisted_37 = { class: \"acu-history-title\" };\nconst _hoisted_38 = { class: \"acu-history-time\" };\nconst _hoisted_39 = { class: \"acu-history-card-wrapper\" };\nconst _hoisted_40 = { class: \"acu-mobile-current-section\" };\nconst _hoisted_41 = { class: \"acu-section-label\" };\nconst _hoisted_42 = {\n    key: 0,\n    class: \"acu-changes-count\"\n};\nconst _hoisted_43 = { class: \"acu-current-scroll\" };\nconst _hoisted_44 = { class: \"acu-mobile-actions\" };\nconst _hoisted_45 = [\"disabled\"];\nconst _hoisted_46 = [\"disabled\"];\nconst _hoisted_47 = {\n    key: 0,\n    class: \"acu-preview-overlay\"\n};\nimport { computed, ref, watch } from 'vue';\nimport { useIsMobile, useRowHistory } from '../../composables';\nimport { useConfigStore } from '../../stores/useConfigStore';\nimport { useDataStore } from '../../stores/useDataStore';\nimport DataCard from '../DataCard.vue';\n\nimport { h } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'HistoryDialog',\n    props: {\n        visible: { type: Boolean, default: false },\n        tableName: {},\n        tableId: {},\n        rowIndex: {},\n        currentRowData: { default: null },\n        titleColIndex: { default: -1 },\n        headers: { default: () => [] }\n    },\n    emits: [\"update:visible\", \"close\", \"apply\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * HistoryDialog - \n         *\n         * \n         * - 5\n         * - PC\n         * - \n         * - \n         * - \n         * - ///\n         * - \"\"\n         */\n        const props = __props;\n        const emit = __emit;\n        const configStore = useConfigStore();\n        const dataStore = useDataStore();\n        const { getSnapshots, snapshotToTableRow, tableRowToCells, formatRelativeTime, getDiff, getCurrentChatId } = useRowHistory();\n        const { isMobile } = useIsMobile();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const snapshots = ref([]);\n        /**  */\n        const isLoading = ref(false);\n        /**  */\n        const isEditMode = ref(false);\n        /**  (colIndex -> value) */\n        const tempChanges = ref(new Map());\n        /**  */\n        const undoStack = ref([]);\n        /**  */\n        const selectedSnapshot = ref(null);\n        /**  */\n        const isPreviewing = ref(false);\n        /**  */\n        const openedTableName = ref('');\n        const openedRowIndex = ref(-1);\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const cardWidth = computed(() => configStore.config.cardWidth || 280);\n        /**\n         * \n         *  ''  ''  ''/''/'' \n         *  1 null \n         */\n        const computedTitleColIndex = computed(() => {\n            // \n            if (props.titleColIndex >= 0) {\n                return props.titleColIndex;\n            }\n            //  ''  '' \n            if (props.tableName.includes('') || props.tableName.includes('')) {\n                //  ''/''/'' \n                if (props.headers.length > 0) {\n                    const idx = props.headers.findIndex(h => h && (h.includes('') || h.includes('') || h.includes('')));\n                    if (idx > 0) {\n                        return idx;\n                    }\n                }\n                //  cells \n                if (props.currentRowData) {\n                    const idx = props.currentRowData.cells.findIndex(cell => cell.key && (cell.key.includes('') || cell.key.includes('') || cell.key.includes('')));\n                    if (idx > 0) {\n                        return idx;\n                    }\n                }\n            }\n            //  1 null \n            return 1;\n        });\n        /**  +  */\n        const displayTitle = computed(() => {\n            const titleValue = getTitleValue(props.currentRowData);\n            if (titleValue) {\n                return `${props.tableName} - ${titleValue}`;\n            }\n            return props.tableName;\n        });\n        /**  */\n        const changedCols = computed(() => {\n            return new Set(tempChanges.value.keys());\n        });\n        /**  DataCard  key */\n        const changedColsKey = computed(() => {\n            return [...tempChanges.value.entries()].map(([k, v]) => `${k}:${v.substring(0, 10)}`).join(',');\n        });\n        /**  */\n        const currentRowDataWithChanges = computed(() => {\n            if (!props.currentRowData) {\n                return { index: 0, key: '', cells: [] };\n            }\n            if (tempChanges.value.size === 0) {\n                return props.currentRowData;\n            }\n            return {\n                index: props.currentRowData.index,\n                key: props.currentRowData.key,\n                cells: props.currentRowData.cells.map((cell, colIndex) => {\n                    if (tempChanges.value.has(colIndex)) {\n                        return {\n                            ...cell,\n                            value: tempChanges.value.get(colIndex),\n                        };\n                    }\n                    return cell;\n                }),\n            };\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function getTitleValue(row) {\n            if (!row)\n                return '';\n            const titleIdx = computedTitleColIndex.value;\n            if (titleIdx >= 0 && row.cells.length > titleIdx) {\n                const value = row.cells[titleIdx]?.value;\n                return value !== undefined ? String(value) : '';\n            }\n            return '';\n        }\n        /**\n         * \n         */\n        function getSnapshotDisplayTitle(snapshot) {\n            const titleIdx = computedTitleColIndex.value;\n            if (titleIdx >= 0 && snapshot.cells[titleIdx]) {\n                return snapshot.cells[titleIdx];\n            }\n            return '';\n        }\n        /**\n         *  TableRow\n         */\n        function snapshotToTableRowLocal(snapshot) {\n            if (!props.currentRowData) {\n                return { index: 0, key: '', cells: [] };\n            }\n            return snapshotToTableRow(snapshot, props.currentRowData);\n        }\n        /**\n         * \n         */\n        function getSnapshotDiff(snapshot) {\n            const currentCells = tableRowToCells(currentRowDataWithChanges.value);\n            return getDiff(snapshot, currentCells);\n        }\n        /**\n         * /\n         */\n        function handleSnapshotToggle(snapshot, event) {\n            const details = event.target;\n            if (details.open && isEditMode.value) {\n                selectedSnapshot.value = snapshot;\n            }\n        }\n        /**\n         * \n         */\n        function startEdit() {\n            isEditMode.value = true;\n            tempChanges.value = new Map();\n            undoStack.value = [];\n            selectedSnapshot.value = snapshots.value.length > 0 ? snapshots.value[0] : null;\n        }\n        /**\n         * \n         */\n        function exitEdit() {\n            isEditMode.value = false;\n            tempChanges.value = new Map();\n            undoStack.value = [];\n            selectedSnapshot.value = null;\n        }\n        /**\n         * \n         */\n        function handleHistoryCellClick(snapshot, colIndex) {\n            if (!isEditMode.value)\n                return;\n            // \n            selectedSnapshot.value = snapshot;\n            // \n            undoStack.value.push(new Map(tempChanges.value));\n            // \n            const value = snapshot.cells[colIndex];\n            if (value !== undefined) {\n                //  Map  Vue \n                const newChanges = new Map(tempChanges.value);\n                newChanges.set(colIndex, value);\n                tempChanges.value = newChanges;\n            }\n        }\n        /**\n         * \n         */\n        function applyWholeCard() {\n            if (!selectedSnapshot.value)\n                return;\n            // \n            undoStack.value.push(new Map(tempChanges.value));\n            // \n            const newChanges = new Map();\n            for (const [key, value] of Object.entries(selectedSnapshot.value.cells)) {\n                newChanges.set(Number(key), value);\n            }\n            tempChanges.value = newChanges;\n        }\n        /**\n         * \n         */\n        function undo() {\n            if (undoStack.value.length === 0)\n                return;\n            //  Map  Vue \n            tempChanges.value = new Map(undoStack.value.pop());\n        }\n        /**\n         * \n         */\n        function handlePreviewStart() {\n            isPreviewing.value = true;\n        }\n        /**\n         * \n         */\n        function handlePreviewEnd() {\n            isPreviewing.value = false;\n        }\n        /**\n         * \n         *  dataStore\n         * \n         */\n        function handleClose() {\n            // \n            if (tempChanges.value.size > 0) {\n                emit('apply', new Map(tempChanges.value));\n            }\n            emit('update:visible', false);\n            emit('close');\n        }\n        /**\n         * \n         */\n        function resetState() {\n            snapshots.value = [];\n            isEditMode.value = false;\n            tempChanges.value = new Map();\n            undoStack.value = [];\n            selectedSnapshot.value = null;\n            isPreviewing.value = false;\n        }\n        /**\n         * \n         */\n        async function loadSnapshots() {\n            isLoading.value = true;\n            try {\n                console.info('[HistoryDialog] , :', {\n                    tableName: props.tableName,\n                    tableId: props.tableId,\n                    rowIndex: props.rowIndex,\n                });\n                snapshots.value = await getSnapshots(props.tableName, props.rowIndex);\n                console.info('[HistoryDialog] :', snapshots.value.length);\n                if (snapshots.value.length > 0) {\n                    console.info('[HistoryDialog] :', snapshots.value[0]);\n                }\n            }\n            catch (e) {\n                console.error('[HistoryDialog] :', e);\n                snapshots.value = [];\n            }\n            finally {\n                isLoading.value = false;\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        //  visible \n        watch(() => props.visible, newVisible => {\n            if (newVisible) {\n                console.info('[HistoryDialog] visible  true');\n                // \n                openedTableName.value = props.tableName;\n                openedRowIndex.value = props.rowIndex;\n                // \n                resetState();\n                loadSnapshots();\n            }\n            else {\n                // \n                resetState();\n            }\n        }, { immediate: true });\n        //  props \n        watch(() => [props.tableName, props.rowIndex], ([newTableName, newRowIndex]) => {\n            if (props.visible) {\n                // \n                if (newTableName !== openedTableName.value || newRowIndex !== openedRowIndex.value) {\n                    console.info('[HistoryDialog] ');\n                    // \n                    openedTableName.value = newTableName;\n                    openedRowIndex.value = newRowIndex;\n                    // \n                    resetState();\n                    loadSnapshots();\n                }\n            }\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"acu-modal acu-history-modal\", { 'acu-mobile-edit-mode': isEditMode.value }])\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createCommentVNode(\"  \"),\n                            _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"acu-drag-handle acu-mobile-only\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_2, [\n                                _cache[0] || (_cache[0] = _createElementVNode(\"i\", { class: \"fas fa-history\" }, null, -1 /* CACHED */)),\n                                _createTextVNode(\"  - \" + _toDisplayString(displayTitle.value), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" PC \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill acu-pc-only\",\n                                onClick: handleClose\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\" PC  CSS  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", {\n                                class: \"acu-history-sidebar\",\n                                style: _normalizeStyle({ width: `${cardWidth.value + 64}px` })\n                            }, [\n                                (isLoading.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [...(_cache[2] || (_cache[2] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-spinner fa-spin\" }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"span\", null, \"...\", -1 /* CACHED */)\n                                        ]))]))\n                                    : (snapshots.value.length === 0)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[3] || (_cache[3] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-history\" }, null, -1 /* CACHED */),\n                                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                            ]))]))\n                                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(snapshots.value, (snapshot, index) => {\n                                                return (_openBlock(), _createElementBlock(\"details\", {\n                                                    key: snapshot.id || snapshot.timestamp,\n                                                    open: index === 0,\n                                                    class: \"acu-history-item\",\n                                                    onToggle: ($event) => (handleSnapshotToggle(snapshot, $event))\n                                                }, [\n                                                    _createElementVNode(\"summary\", _hoisted_8, [\n                                                        _createElementVNode(\"span\", {\n                                                            class: _normalizeClass([\"acu-history-badge\", snapshot.source])\n                                                        }, _toDisplayString(snapshot.source === 'manual' ? '' : 'AI'), 3 /* TEXT, CLASS */),\n                                                        _createElementVNode(\"span\", _hoisted_9, \" #\" + _toDisplayString(index + 1) + \" \" + _toDisplayString(getSnapshotDisplayTitle(snapshot)), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", _hoisted_10, _toDisplayString(_unref(formatRelativeTime)(snapshot.timestamp)), 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_11, [\n                                                        _createVNode(DataCard, {\n                                                            data: snapshotToTableRowLocal(snapshot),\n                                                            \"table-name\": __props.tableName,\n                                                            \"table-id\": __props.tableId,\n                                                            \"view-mode\": \"list\",\n                                                            \"show-header\": false,\n                                                            \"show-index\": false,\n                                                            \"show-history-button\": false,\n                                                            \"title-col-index\": computedTitleColIndex.value,\n                                                            \"custom-highlights\": isEditMode.value ? getSnapshotDiff(snapshot) : undefined,\n                                                            onCellClick: (rowIndex, colIndex) => handleHistoryCellClick(snapshot, colIndex)\n                                                        }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\", \"custom-highlights\", \"onCellClick\"])\n                                                    ])\n                                                ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_7));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]))\n                            ], 4 /* STYLE */),\n                            _createCommentVNode(\"  +  \"),\n                            _createElementVNode(\"div\", {\n                                class: \"acu-history-main\",\n                                style: _normalizeStyle({ width: `${cardWidth.value + 64}px` })\n                            }, [\n                                _createElementVNode(\"div\", _hoisted_12, [\n                                    _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-file-alt\" }, null, -1 /* CACHED */)),\n                                    _cache[5] || (_cache[5] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    (tempChanges.value.size > 0)\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_13, \" ( \" + _toDisplayString(tempChanges.value.size) + \" ) \", 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_14, [\n                                    (_openBlock(), _createBlock(DataCard, {\n                                        key: `current-pc-${changedColsKey.value}`,\n                                        data: currentRowDataWithChanges.value,\n                                        \"table-name\": __props.tableName,\n                                        \"table-id\": __props.tableId,\n                                        \"view-mode\": \"list\",\n                                        \"show-header\": true,\n                                        \"show-index\": true,\n                                        \"show-history-button\": false,\n                                        \"title-col-index\": computedTitleColIndex.value,\n                                        \"custom-highlights\": changedCols.value\n                                    }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\", \"custom-highlights\"]))\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_15, [\n                                    (!isEditMode.value)\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            class: \"acu-modal-btn primary acu-btn-start-edit\",\n                                            onClick: startEdit\n                                        }, [...(_cache[6] || (_cache[6] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-edit\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))]))\n                                        : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-modal-btn primary\",\n                                                disabled: !selectedSnapshot.value,\n                                                onClick: applyWholeCard\n                                            }, [...(_cache[7] || (_cache[7] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-layer-group\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_16),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-modal-btn secondary\",\n                                                disabled: undoStack.value.length === 0,\n                                                onClick: undo\n                                            }, [...(_cache[8] || (_cache[8] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_17),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-modal-btn secondary\",\n                                                onClick: exitEdit\n                                            }, [...(_cache[9] || (_cache[9] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\" \", -1 /* CACHED */)\n                                                ]))])\n                                        ], 64 /* STABLE_FRAGMENT */))\n                                ]),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_18, [\n                                    _cache[10] || (_cache[10] = _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }, null, -1 /* CACHED */)),\n                                    (!isEditMode.value)\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_19, \"\\\"\\\"\"))\n                                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_20, \"\"))\n                                ])\n                            ], 4 /* STYLE */)\n                        ]),\n                        _createCommentVNode(\"  CSS  \"),\n                        _createElementVNode(\"div\", {\n                            class: _normalizeClass([\"acu-history-layout acu-mobile-layout\", { 'acu-mobile-edit-mode': isEditMode.value }])\n                        }, [\n                            _createCommentVNode(\"  \"),\n                            (!isEditMode.value)\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                    _createElementVNode(\"div\", _hoisted_21, [\n                                        (isLoading.value)\n                                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [...(_cache[11] || (_cache[11] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-spinner fa-spin\" }, null, -1 /* CACHED */),\n                                                    _createElementVNode(\"span\", null, \"...\", -1 /* CACHED */)\n                                                ]))]))\n                                            : (snapshots.value.length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, [...(_cache[12] || (_cache[12] = [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-history\" }, null, -1 /* CACHED */),\n                                                        _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                                    ]))]))\n                                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_24, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(snapshots.value, (snapshot, index) => {\n                                                        return (_openBlock(), _createElementBlock(\"details\", {\n                                                            key: snapshot.id || snapshot.timestamp,\n                                                            open: index === 0,\n                                                            class: \"acu-history-item\",\n                                                            onToggle: ($event) => (handleSnapshotToggle(snapshot, $event))\n                                                        }, [\n                                                            _createElementVNode(\"summary\", _hoisted_26, [\n                                                                _createElementVNode(\"span\", {\n                                                                    class: _normalizeClass([\"acu-history-badge\", snapshot.source])\n                                                                }, _toDisplayString(snapshot.source === 'manual' ? '' : 'AI'), 3 /* TEXT, CLASS */),\n                                                                _createElementVNode(\"span\", _hoisted_27, \" #\" + _toDisplayString(index + 1) + \" \" + _toDisplayString(getSnapshotDisplayTitle(snapshot)), 1 /* TEXT */),\n                                                                _createElementVNode(\"span\", _hoisted_28, _toDisplayString(_unref(formatRelativeTime)(snapshot.timestamp)), 1 /* TEXT */)\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_29, [\n                                                                _createVNode(DataCard, {\n                                                                    data: snapshotToTableRowLocal(snapshot),\n                                                                    \"table-name\": __props.tableName,\n                                                                    \"table-id\": __props.tableId,\n                                                                    \"view-mode\": \"list\",\n                                                                    \"show-header\": false,\n                                                                    \"show-index\": false,\n                                                                    \"show-history-button\": false,\n                                                                    \"title-col-index\": computedTitleColIndex.value\n                                                                }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\"])\n                                                            ])\n                                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_25));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ]))\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_30, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-btn-preview\",\n                                            onTouchstart: _withModifiers(handlePreviewStart, [\"prevent\"]),\n                                            onTouchend: _withModifiers(handlePreviewEnd, [\"prevent\"]),\n                                            onMousedown: handlePreviewStart,\n                                            onMouseup: handlePreviewEnd,\n                                            onMouseleave: handlePreviewEnd\n                                        }, [...(_cache[13] || (_cache[13] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-eye\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))], 32 /* NEED_HYDRATION */),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-btn-primary\",\n                                            onClick: startEdit\n                                        }, [...(_cache[14] || (_cache[14] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-edit\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" \", -1 /* CACHED */)\n                                            ]))]),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-btn-done\",\n                                            onClick: handleClose\n                                        }, [...(_cache[15] || (_cache[15] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" \", -1 /* CACHED */)\n                                            ]))])\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_31, [\n                                        _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"acu-section-label\" }, [\n                                            _createElementVNode(\"i\", { class: \"fas fa-history\" }),\n                                            _createTextVNode(\" \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_32, [\n                                            (snapshots.value.length === 0)\n                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_33, [...(_cache[16] || (_cache[16] = [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-history\" }, null, -1 /* CACHED */),\n                                                        _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                                                    ]))]))\n                                                : (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(snapshots.value, (snapshot, index) => {\n                                                        return (_openBlock(), _createElementBlock(\"details\", {\n                                                            key: snapshot.id || snapshot.timestamp,\n                                                            open: index === 0,\n                                                            class: \"acu-history-item\",\n                                                            onToggle: ($event) => (handleSnapshotToggle(snapshot, $event))\n                                                        }, [\n                                                            _createElementVNode(\"summary\", _hoisted_36, [\n                                                                _createElementVNode(\"span\", {\n                                                                    class: _normalizeClass([\"acu-history-badge\", snapshot.source])\n                                                                }, _toDisplayString(snapshot.source === 'manual' ? '' : 'AI'), 3 /* TEXT, CLASS */),\n                                                                _createElementVNode(\"span\", _hoisted_37, \" #\" + _toDisplayString(index + 1) + \" \" + _toDisplayString(getSnapshotDisplayTitle(snapshot)), 1 /* TEXT */),\n                                                                _createElementVNode(\"span\", _hoisted_38, _toDisplayString(_unref(formatRelativeTime)(snapshot.timestamp)), 1 /* TEXT */)\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_39, [\n                                                                _createVNode(DataCard, {\n                                                                    data: snapshotToTableRowLocal(snapshot),\n                                                                    \"table-name\": __props.tableName,\n                                                                    \"table-id\": __props.tableId,\n                                                                    \"view-mode\": \"list\",\n                                                                    \"show-header\": false,\n                                                                    \"show-index\": false,\n                                                                    \"show-history-button\": false,\n                                                                    \"title-col-index\": computedTitleColIndex.value,\n                                                                    \"custom-highlights\": getSnapshotDiff(snapshot),\n                                                                    onCellClick: (rowIndex, colIndex) => handleHistoryCellClick(snapshot, colIndex)\n                                                                }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\", \"custom-highlights\", \"onCellClick\"])\n                                                            ])\n                                                        ], 40 /* PROPS, NEED_HYDRATION */, _hoisted_35));\n                                                    }), 128 /* KEYED_FRAGMENT */))\n                                                ]))\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_40, [\n                                        _createElementVNode(\"div\", _hoisted_41, [\n                                            _cache[18] || (_cache[18] = _createElementVNode(\"i\", { class: \"fas fa-file-alt\" }, null, -1 /* CACHED */)),\n                                            _cache[19] || (_cache[19] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                            (tempChanges.value.size > 0)\n                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_42, \"( \" + _toDisplayString(tempChanges.value.size) + \" )\", 1 /* TEXT */))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_43, [\n                                            (_openBlock(), _createBlock(DataCard, {\n                                                key: `current-mobile-${changedColsKey.value}`,\n                                                data: currentRowDataWithChanges.value,\n                                                \"table-name\": __props.tableName,\n                                                \"table-id\": __props.tableId,\n                                                \"view-mode\": \"list\",\n                                                \"show-header\": true,\n                                                \"show-index\": true,\n                                                \"show-history-button\": false,\n                                                \"title-col-index\": computedTitleColIndex.value,\n                                                \"custom-highlights\": changedCols.value\n                                            }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\", \"custom-highlights\"]))\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_44, [\n                                        _createElementVNode(\"button\", {\n                                            disabled: undoStack.value.length === 0,\n                                            onClick: undo\n                                        }, [...(_cache[20] || (_cache[20] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" \", -1 /* CACHED */)\n                                            ]))], 8 /* PROPS */, _hoisted_45),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-btn-primary\",\n                                            disabled: !selectedSnapshot.value,\n                                            onClick: applyWholeCard\n                                        }, [...(_cache[21] || (_cache[21] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-layer-group\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))], 8 /* PROPS */, _hoisted_46),\n                                        _createElementVNode(\"button\", { onClick: exitEdit }, [...(_cache[22] || (_cache[22] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" \", -1 /* CACHED */)\n                                            ]))]),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-btn-done\",\n                                            onClick: handleClose\n                                        }, [...(_cache[23] || (_cache[23] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\" \", -1 /* CACHED */)\n                                            ]))])\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */)),\n                            _createCommentVNode(\"  \"),\n                            _createVNode(_Transition, { name: \"preview-fade\" }, {\n                                default: _withCtx(() => [\n                                    (isPreviewing.value)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_47, [\n                                            _createVNode(DataCard, {\n                                                data: currentRowDataWithChanges.value,\n                                                \"table-name\": __props.tableName,\n                                                \"table-id\": __props.tableId,\n                                                \"view-mode\": \"list\",\n                                                \"show-header\": true,\n                                                \"show-index\": true,\n                                                \"show-history-button\": false,\n                                                \"title-col-index\": computedTitleColIndex.value\n                                            }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\"])\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ]),\n                                _: 1 /* STABLE */\n                            })\n                        ], 2 /* CLASS */)\n                    ], 2 /* CLASS */)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./HistoryDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HistoryDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-body\" };\nconst _hoisted_2 = { class: \"floor-input-group\" };\nconst _hoisted_3 = {\n    key: 0,\n    class: \"floor-info\"\n};\nconst _hoisted_4 = {\n    key: 1,\n    class: \"floor-error\"\n};\nconst _hoisted_5 = { class: \"acu-modal-footer\" };\nconst _hoisted_6 = [\"disabled\"];\nimport { onClickOutside } from '@vueuse/core';\nimport { computed, nextTick, ref, watch } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'InputFloorDialog',\n    props: {\n        visible: { type: Boolean },\n        currentFloorInfo: { default: '' },\n        maxFloor: { default: 999 }\n    },\n    emits: [\"update:visible\", \"confirm\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const dialogRef = ref();\n        const inputRef = ref();\n        const floorIndex = ref(null);\n        // \n        const isValidFloor = computed(() => {\n            if (floorIndex.value === null || floorIndex.value === undefined)\n                return false;\n            const floor = floorIndex.value;\n            //  0\n            return Number.isInteger(floor) && floor !== 0;\n        });\n        // \n        const validationError = computed(() => {\n            if (floorIndex.value === null || floorIndex.value === undefined)\n                return '';\n            if (floorIndex.value === 0)\n                return ' 0';\n            if (!Number.isInteger(floorIndex.value))\n                return '';\n            if (Math.abs(floorIndex.value) > props.maxFloor) {\n                return ` (${props.maxFloor})`;\n            }\n            return '';\n        });\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                floorIndex.value = null;\n                nextTick(() => {\n                    inputRef.value?.focus();\n                });\n            }\n        });\n        // \n        onClickOutside(dialogRef, () => {\n            handleCancel();\n        });\n        // \n        const handleConfirm = () => {\n            if (isValidFloor.value && floorIndex.value !== null) {\n                emit('confirm', floorIndex.value);\n                emit('update:visible', false);\n            }\n        };\n        // \n        const handleCancel = () => {\n            emit('update:visible', false);\n        };\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleCancel, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", {\n                        ref_key: \"dialogRef\",\n                        ref: dialogRef,\n                        class: \"acu-modal acu-input-floor-modal\"\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", { class: \"acu-modal-header\" }, [\n                            _cache[2] || (_cache[2] = _createElementVNode(\"h3\", null, [\n                                _createElementVNode(\"i\", { class: \"fas fa-layer-group\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-close\",\n                                onClick: handleCancel\n                            }, [...(_cache[1] || (_cache[1] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                ]))])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createElementVNode(\"div\", _hoisted_2, [\n                                _cache[5] || (_cache[5] = _createElementVNode(\"p\", { class: \"floor-hint\" }, \"-1 \", -1 /* CACHED */)),\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    ref_key: \"inputRef\",\n                                    ref: inputRef,\n                                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((floorIndex).value = $event)),\n                                    type: \"number\",\n                                    class: \"floor-input\",\n                                    placeholder: \": 5  -1\",\n                                    onKeydown: [\n                                        _withKeys(handleConfirm, [\"enter\"]),\n                                        _withKeys(handleCancel, [\"escape\"])\n                                    ]\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        floorIndex.value,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ]),\n                                (__props.currentFloorInfo)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                                        _cache[3] || (_cache[3] = _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", null, \": \" + _toDisplayString(__props.currentFloorInfo), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                (validationError.value)\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                                        _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-exclamation-circle\" }, null, -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", null, _toDisplayString(validationError.value), 1 /* TEXT */)\n                                    ]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn secondary\",\n                                onClick: handleCancel\n                            }, \"\"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-btn primary\",\n                                disabled: !isValidFloor.value,\n                                onClick: handleConfirm\n                            }, [...(_cache[6] || (_cache[6] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-save\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_6)\n                        ])\n                    ], 512 /* NEED_PATCH */)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./InputFloorDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./InputFloorDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, vModelCheckbox as _vModelCheckbox, normalizeClass as _normalizeClass, withModifiers as _withModifiers, vShow as _vShow, withKeys as _withKeys } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-body\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"acu-loading-state\"\n};\nconst _hoisted_3 = { class: \"acu-update-layout\" };\nconst _hoisted_4 = { class: \"acu-update-left\" };\nconst _hoisted_5 = { class: \"acu-settings-section\" };\nconst _hoisted_6 = { class: \"acu-settings-row\" };\nconst _hoisted_7 = { class: \"acu-settings-control acu-preset-control\" };\nconst _hoisted_8 = [\"value\"];\nconst _hoisted_9 = { class: \"acu-settings-row\" };\nconst _hoisted_10 = { class: \"acu-settings-control\" };\nconst _hoisted_11 = [\"value\"];\nconst _hoisted_12 = { class: \"acu-settings-section\" };\nconst _hoisted_13 = { class: \"acu-settings-row\" };\nconst _hoisted_14 = { class: \"acu-settings-control\" };\nconst _hoisted_15 = { class: \"acu-settings-row\" };\nconst _hoisted_16 = { class: \"acu-settings-control\" };\nconst _hoisted_17 = { class: \"acu-settings-row\" };\nconst _hoisted_18 = { class: \"acu-settings-control\" };\nconst _hoisted_19 = { class: \"acu-settings-row\" };\nconst _hoisted_20 = { class: \"acu-settings-control\" };\nconst _hoisted_21 = { class: \"acu-settings-section\" };\nconst _hoisted_22 = { class: \"acu-settings-row\" };\nconst _hoisted_23 = { class: \"acu-settings-control\" };\nconst _hoisted_24 = { class: \"acu-switch\" };\nconst _hoisted_25 = {\n    key: 0,\n    class: \"acu-settings-row\"\n};\nconst _hoisted_26 = { class: \"acu-settings-control\" };\nconst _hoisted_27 = { class: \"acu-switch\" };\nconst _hoisted_28 = { class: \"acu-settings-section acu-show-mobile-only\" };\nconst _hoisted_29 = { class: \"acu-collapse-indicator\" };\nconst _hoisted_30 = { class: \"acu-table-selector-mobile\" };\nconst _hoisted_31 = { class: \"acu-table-selector\" };\nconst _hoisted_32 = { class: \"acu-table-selector-header\" };\nconst _hoisted_33 = { class: \"acu-table-selector-list\" };\nconst _hoisted_34 = [\"onClick\"];\nconst _hoisted_35 = [\"checked\", \"onChange\"];\nconst _hoisted_36 = { class: \"table-name\" };\nconst _hoisted_37 = {\n    key: 0,\n    class: \"acu-table-selector-empty\"\n};\nconst _hoisted_38 = { class: \"acu-table-selector-footer\" };\nconst _hoisted_39 = {\n    key: 0,\n    style: { \"color\": \"var(--acu-title-color)\" }\n};\nconst _hoisted_40 = { class: \"acu-update-right acu-hide-mobile\" };\nconst _hoisted_41 = { class: \"acu-table-selector\" };\nconst _hoisted_42 = { class: \"acu-table-selector-header\" };\nconst _hoisted_43 = { class: \"acu-table-selector-list\" };\nconst _hoisted_44 = [\"onClick\"];\nconst _hoisted_45 = [\"checked\", \"onChange\"];\nconst _hoisted_46 = { class: \"table-name\" };\nconst _hoisted_47 = {\n    key: 0,\n    class: \"acu-table-selector-empty\"\n};\nconst _hoisted_48 = { class: \"acu-table-selector-footer\" };\nconst _hoisted_49 = {\n    key: 0,\n    style: { \"color\": \"var(--acu-title-color)\" }\n};\nconst _hoisted_50 = {\n    key: 0,\n    class: \"acu-issue-alert\"\n};\nconst _hoisted_51 = { class: \"acu-update-action-group\" };\nconst _hoisted_52 = [\"disabled\"];\nconst _hoisted_53 = {\n    key: 0,\n    class: \"fas fa-spinner fa-spin\"\n};\nconst _hoisted_54 = {\n    key: 1,\n    class: \"fas fa-hand-sparkles\"\n};\nconst _hoisted_55 = { class: \"acu-mini-dialog acu-preset-save-dialog\" };\nconst _hoisted_56 = { class: \"acu-mini-dialog-header\" };\nconst _hoisted_57 = { class: \"acu-mini-dialog-body\" };\nconst _hoisted_58 = {\n    key: 0,\n    class: \"acu-duplicate-warning\"\n};\nconst _hoisted_59 = { class: \"acu-preset-summary\" };\nconst _hoisted_60 = { class: \"acu-preset-summary-list\" };\nconst _hoisted_61 = { class: \"acu-mini-dialog-footer\" };\nconst _hoisted_62 = [\"disabled\"];\nimport { onClickOutside } from '@vueuse/core';\nimport { computed, reactive, ref, watch } from 'vue';\nimport { useDbSettings } from '../../composables/useDbSettings';\nimport { toast } from '../../composables/useToast';\nimport { useUpdatePresets } from '../../composables/useUpdatePresets';\nimport { useDataStore } from '../../stores/useDataStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ManualUpdateDialog',\n    props: {\n        visible: { type: Boolean }\n    },\n    emits: [\"update:visible\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * ManualUpdateDialog - \n         *\n         * :\n         * - 4\n         * - //\n         * - PC\n         * - \n         * - \n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs & State\n        // ============================================================\n        const dialogRef = ref();\n        const isLoading = ref(true);\n        const isUpdating = ref(false);\n        // \n        const localSettings = reactive({\n            autoUpdateThreshold: undefined,\n            autoUpdateFrequency: undefined,\n            updateBatchSize: undefined,\n            skipUpdateFloors: undefined,\n        });\n        // \n        const selectedPresetId = ref('');\n        const autoFixPresetId = ref('');\n        const showSavePresetDialog = ref(false);\n        const newPresetName = ref('');\n        // \n        const autoTriggerEnabled = ref(false);\n        const autoExecuteEnabled = ref(false);\n        // \n        const availableTables = ref([]);\n        const selectedTableNames = ref([]);\n        const tableSelectorExpanded = ref(false);\n        // ============================================================\n        // Composables & Stores\n        // ============================================================\n        const { settings, loadSettings, saveSettings, executeManualUpdate, getTableList, executeWithPreset } = useDbSettings();\n        const presetsManager = useUpdatePresets();\n        const dataStore = useDataStore();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const presets = computed(() => presetsManager.presets.value);\n        /**  */\n        const hasIntegrityIssues = computed(() => dataStore.hasIntegrityIssues);\n        /**  */\n        const integritySummary = computed(() => dataStore.getIntegritySummary());\n        /**  */\n        const duplicatePresetWarning = computed(() => {\n            const name = newPresetName.value.trim();\n            if (!name)\n                return false;\n            return presetsManager.findPresetByName(name) !== null;\n        });\n        /**  */\n        const isAllSelected = computed(() => {\n            if (availableTables.value.length === 0)\n                return false;\n            return selectedTableNames.value.length === availableTables.value.length;\n        });\n        /** / */\n        const isOnlySummarySelected = computed(() => {\n            const summaryTables = availableTables.value.filter(t => t.isSummaryOrOutline);\n            if (summaryTables.length === 0)\n                return false;\n            if (selectedTableNames.value.length !== summaryTables.length)\n                return false;\n            return summaryTables.every(t => selectedTableNames.value.includes(t.name));\n        });\n        // ============================================================\n        //  & \n        // ============================================================\n        // \n        watch(() => props.visible, async (visible) => {\n            if (visible) {\n                isLoading.value = true;\n                try {\n                    await loadSettings();\n                    // \n                    Object.assign(localSettings, {\n                        autoUpdateThreshold: settings.value.autoUpdateThreshold,\n                        autoUpdateFrequency: settings.value.autoUpdateFrequency,\n                        updateBatchSize: settings.value.updateBatchSize,\n                        skipUpdateFloors: settings.value.skipUpdateFloors,\n                    });\n                    // \n                    presetsManager.loadPresets();\n                    const autoFixId = presetsManager.autoFixPreset.value?.id;\n                    autoFixPresetId.value = autoFixId || '';\n                    // \n                    autoTriggerEnabled.value = presetsManager.globalAutoTriggerEnabled.value;\n                    autoExecuteEnabled.value = presetsManager.globalAutoExecuteEnabled.value;\n                    // \n                    const activePreset = presetsManager.activePreset.value;\n                    if (activePreset) {\n                        selectedTableNames.value = activePreset.autoTrigger.updateTargetTables || [];\n                    }\n                    // \n                    availableTables.value = getTableList();\n                }\n                catch (error) {\n                    console.error('[ACU] :', error);\n                    toast.error('');\n                }\n                finally {\n                    isLoading.value = false;\n                }\n            }\n        }, { immediate: true });\n        // \n        onClickOutside(dialogRef, () => {\n            handleClose();\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function handleClose() {\n            showSavePresetDialog.value = false;\n            emit('update:visible', false);\n        }\n        /**\n         * \n         */\n        async function handleSettingChange(key, value) {\n            if (value === undefined || isNaN(value))\n                return;\n            try {\n                await saveSettings({ [key]: value });\n                console.info(`[ACU]  ${key} :`, value);\n            }\n            catch (error) {\n                console.error(`[ACU]  ${key} :`, error);\n                toast.error('');\n            }\n        }\n        /**\n         * \n         */\n        async function handlePresetChange() {\n            if (!selectedPresetId.value)\n                return;\n            const preset = presets.value.find((p) => p.id === selectedPresetId.value);\n            if (preset) {\n                // \n                Object.assign(localSettings, preset.settings);\n                // \n                selectedTableNames.value = preset.autoTrigger.updateTargetTables || [];\n                // \n                await saveSettings(preset.settings);\n                presetsManager.setActivePreset(selectedPresetId.value);\n                toast.success('');\n            }\n        }\n        /**\n         * \n         */\n        function handleAutoFixPresetChange() {\n            presetsManager.setAutoFixPreset(autoFixPresetId.value || null);\n            toast.info(autoFixPresetId.value ? '' : '');\n        }\n        /**\n         * \n         */\n        function handleSaveNewPreset() {\n            const name = newPresetName.value.trim();\n            if (!name)\n                return;\n            const { preset, isNew } = presetsManager.createOrUpdatePreset(name, {\n                autoUpdateThreshold: localSettings.autoUpdateThreshold,\n                updateBatchSize: localSettings.updateBatchSize,\n                skipUpdateFloors: localSettings.skipUpdateFloors,\n                autoUpdateFrequency: localSettings.autoUpdateFrequency,\n            }, {\n                enabled: autoTriggerEnabled.value,\n                onEmptyCell: true,\n                onIndexGap: true,\n                targetTables: ['', ''],\n                updateTargetTables: selectedTableNames.value,\n            });\n            showSavePresetDialog.value = false;\n            newPresetName.value = '';\n            if (isNew) {\n                toast.success(`\"${name}\"`);\n            }\n            else {\n                toast.success(`\"${name}\"`);\n            }\n        }\n        /**\n         * \n         */\n        function handleDeletePreset() {\n            if (!selectedPresetId.value)\n                return;\n            const targetId = selectedPresetId.value;\n            const preset = presets.value.find((p) => p.id === targetId);\n            if (!preset)\n                return;\n            if (confirm(`\"${preset.name}\"`)) {\n                presetsManager.deletePreset(selectedPresetId.value);\n                selectedPresetId.value = '';\n                toast.success('');\n            }\n        }\n        /**\n         * \n         */\n        function handleAutoTriggerChange() {\n            // \n            presetsManager.setGlobalAutoTrigger(autoTriggerEnabled.value);\n            // \n            if (selectedPresetId.value) {\n                presetsManager.updatePreset(selectedPresetId.value, {\n                    autoTrigger: {\n                        enabled: autoTriggerEnabled.value,\n                        onEmptyCell: true,\n                        onIndexGap: true,\n                        targetTables: ['', ''],\n                        updateTargetTables: selectedTableNames.value,\n                    },\n                });\n            }\n            // \n            if (!autoTriggerEnabled.value) {\n                autoExecuteEnabled.value = false;\n                presetsManager.setAutoFixPreset(null);\n                // \n                dataStore.clearIntegrityIssues();\n            }\n        }\n        /**\n         * \n         */\n        function handleAutoExecuteChange() {\n            // \n            presetsManager.setGlobalAutoExecute(autoExecuteEnabled.value);\n            if (autoExecuteEnabled.value) {\n                // \n                if (!autoFixPresetId.value && presets.value.length > 0) {\n                    // \n                    autoFixPresetId.value = presets.value[0].id;\n                    presetsManager.setAutoFixPreset(autoFixPresetId.value);\n                    toast.info(`\"${presets.value[0].name}\"`);\n                }\n                else if (presets.value.length === 0) {\n                    toast.warning('');\n                    autoExecuteEnabled.value = false;\n                    presetsManager.setGlobalAutoExecute(false);\n                    return;\n                }\n                else {\n                    presetsManager.setAutoFixPreset(autoFixPresetId.value);\n                }\n            }\n            else {\n                // \n                presetsManager.setAutoFixPreset(null);\n                autoFixPresetId.value = '';\n            }\n        }\n        /**\n         * \n         */\n        function toggleTableSelection(tableName) {\n            const index = selectedTableNames.value.indexOf(tableName);\n            if (index === -1) {\n                selectedTableNames.value.push(tableName);\n            }\n            else {\n                selectedTableNames.value.splice(index, 1);\n            }\n            // \n            if (selectedPresetId.value) {\n                presetsManager.updatePreset(selectedPresetId.value, {\n                    autoTrigger: {\n                        enabled: autoTriggerEnabled.value,\n                        onEmptyCell: true,\n                        onIndexGap: true,\n                        targetTables: ['', ''],\n                        updateTargetTables: selectedTableNames.value,\n                    },\n                });\n            }\n        }\n        /**\n         * \n         */\n        function handleSelectAll() {\n            if (isAllSelected.value) {\n                // \n                selectedTableNames.value = [];\n            }\n            else {\n                // \n                selectedTableNames.value = availableTables.value.map(t => t.name);\n            }\n        }\n        /**\n         * /\n         */\n        function handleSelectSummaryOnly() {\n            const summaryTables = availableTables.value.filter(t => t.isSummaryOrOutline);\n            selectedTableNames.value = summaryTables.map(t => t.name);\n        }\n        /**\n         *  API\n         */\n        async function handleExecuteUpdate() {\n            if (isUpdating.value)\n                return;\n            isUpdating.value = true;\n            try {\n                //  API + \n                const result = await executeWithPreset({\n                    autoUpdateThreshold: localSettings.autoUpdateThreshold,\n                    updateBatchSize: localSettings.updateBatchSize,\n                    skipUpdateFloors: localSettings.skipUpdateFloors,\n                    autoUpdateFrequency: localSettings.autoUpdateFrequency,\n                }, selectedTableNames.value);\n                if (result.success) {\n                    toast.success(' ');\n                }\n                else {\n                    toast.warning(' ' + (result.message || ''));\n                }\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n                toast.error('');\n            }\n            finally {\n                isUpdating.value = false;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", {\n                        ref_key: \"dialogRef\",\n                        ref: dialogRef,\n                        class: \"acu-modal acu-manual-update-modal\"\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", { class: \"acu-modal-header\" }, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-modal-back\",\n                                onClick: handleClose\n                            }, [...(_cache[20] || (_cache[20] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-arrow-left\" }, null, -1 /* CACHED */)\n                                ]))]),\n                            _cache[21] || (_cache[21] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, \"\", -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: handleClose\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_1, [\n                            _createCommentVNode(\"  \"),\n                            (isLoading.value)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [...(_cache[22] || (_cache[22] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-spinner fa-spin\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", null, \"...\", -1 /* CACHED */)\n                                    ]))]))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createCommentVNode(\" PC \"),\n                                    _createElementVNode(\"div\", _hoisted_3, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_4, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_5, [\n                                                _cache[29] || (_cache[29] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-bookmark\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_6, [\n                                                    _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\"  \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_7, [\n                                                        _withDirectives(_createElementVNode(\"select\", {\n                                                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((selectedPresetId).value = $event)),\n                                                            class: \"acu-config-select\",\n                                                            onChange: handlePresetChange\n                                                        }, [\n                                                            _cache[23] || (_cache[23] = _createElementVNode(\"option\", { value: \"\" }, \"--  --\", -1 /* CACHED */)),\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(presets.value, (preset) => {\n                                                                return (_openBlock(), _createElementBlock(\"option\", {\n                                                                    key: preset.id,\n                                                                    value: preset.id\n                                                                }, _toDisplayString(preset.name), 9 /* TEXT, PROPS */, _hoisted_8));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [_vModelSelect, selectedPresetId.value]\n                                                        ]),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-icon-btn\",\n                                                            title: \"\",\n                                                            onClick: _cache[1] || (_cache[1] = ($event) => (showSavePresetDialog.value = true))\n                                                        }, [...(_cache[24] || (_cache[24] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                                                            ]))]),\n                                                        (selectedPresetId.value)\n                                                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                                                key: 0,\n                                                                class: \"acu-icon-btn acu-btn-danger\",\n                                                                title: \"\",\n                                                                onClick: handleDeletePreset\n                                                            }, [...(_cache[25] || (_cache[25] = [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */)\n                                                                ]))]))\n                                                            : _createCommentVNode(\"v-if\", true)\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_9, [\n                                                    _cache[28] || (_cache[28] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\"  \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_10, [\n                                                        _withDirectives(_createElementVNode(\"select\", {\n                                                            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((autoFixPresetId).value = $event)),\n                                                            class: \"acu-config-select\",\n                                                            onChange: handleAutoFixPresetChange\n                                                        }, [\n                                                            _cache[27] || (_cache[27] = _createElementVNode(\"option\", { value: \"\" }, \"--  --\", -1 /* CACHED */)),\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(presets.value, (preset) => {\n                                                                return (_openBlock(), _createElementBlock(\"option\", {\n                                                                    key: preset.id,\n                                                                    value: preset.id\n                                                                }, _toDisplayString(preset.name), 9 /* TEXT, PROPS */, _hoisted_11));\n                                                            }), 128 /* KEYED_FRAGMENT */))\n                                                        ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [_vModelSelect, autoFixPresetId.value]\n                                                        ])\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_12, [\n                                                _cache[34] || (_cache[34] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-sliders-h\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createCommentVNode(\" AI \"),\n                                                _createElementVNode(\"div\", _hoisted_13, [\n                                                    _cache[30] || (_cache[30] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\" AI \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"AI\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_14, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((localSettings.autoUpdateThreshold) = $event)),\n                                                            type: \"number\",\n                                                            class: \"acu-config-input\",\n                                                            min: \"1\",\n                                                            max: \"500\",\n                                                            onChange: _cache[4] || (_cache[4] = ($event) => (handleSettingChange('autoUpdateThreshold', localSettings.autoUpdateThreshold)))\n                                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                localSettings.autoUpdateThreshold,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\" N \"),\n                                                _createElementVNode(\"div\", _hoisted_15, [\n                                                    _cache[31] || (_cache[31] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\" N \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_16, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((localSettings.autoUpdateFrequency) = $event)),\n                                                            type: \"number\",\n                                                            class: \"acu-config-input\",\n                                                            min: \"1\",\n                                                            max: \"100\",\n                                                            onChange: _cache[6] || (_cache[6] = ($event) => (handleSettingChange('autoUpdateFrequency', localSettings.autoUpdateFrequency)))\n                                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                localSettings.autoUpdateFrequency,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_17, [\n                                                    _cache[32] || (_cache[32] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\"  \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_18, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((localSettings.updateBatchSize) = $event)),\n                                                            type: \"number\",\n                                                            class: \"acu-config-input\",\n                                                            min: \"1\",\n                                                            max: \"50\",\n                                                            onChange: _cache[8] || (_cache[8] = ($event) => (handleSettingChange('updateBatchSize', localSettings.updateBatchSize)))\n                                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                localSettings.updateBatchSize,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\" X \"),\n                                                _createElementVNode(\"div\", _hoisted_19, [\n                                                    _cache[33] || (_cache[33] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\" X \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_20, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((localSettings.skipUpdateFloors) = $event)),\n                                                            type: \"number\",\n                                                            class: \"acu-config-input\",\n                                                            min: \"0\",\n                                                            max: \"20\",\n                                                            onChange: _cache[10] || (_cache[10] = ($event) => (handleSettingChange('skipUpdateFloors', localSettings.skipUpdateFloors)))\n                                                        }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                            [\n                                                                _vModelText,\n                                                                localSettings.skipUpdateFloors,\n                                                                void 0,\n                                                                { number: true }\n                                                            ]\n                                                        ])\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_21, [\n                                                _cache[39] || (_cache[39] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-magic\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createCommentVNode(\"  \"),\n                                                _createElementVNode(\"div\", _hoisted_22, [\n                                                    _cache[36] || (_cache[36] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                        _createTextVNode(\"  \"),\n                                                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_23, [\n                                                        _createElementVNode(\"label\", _hoisted_24, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((autoTriggerEnabled).value = $event)),\n                                                                type: \"checkbox\",\n                                                                onChange: handleAutoTriggerChange\n                                                            }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                                [_vModelCheckbox, autoTriggerEnabled.value]\n                                                            ]),\n                                                            _cache[35] || (_cache[35] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                        ])\n                                                    ])\n                                                ]),\n                                                _createCommentVNode(\"  \"),\n                                                (autoTriggerEnabled.value)\n                                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [\n                                                        _cache[38] || (_cache[38] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_26, [\n                                                            _createElementVNode(\"label\", _hoisted_27, [\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((autoExecuteEnabled).value = $event)),\n                                                                    type: \"checkbox\",\n                                                                    onChange: handleAutoExecuteChange\n                                                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                                    [_vModelCheckbox, autoExecuteEnabled.value]\n                                                                ]),\n                                                                _cache[37] || (_cache[37] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                            ])\n                                                        ])\n                                                    ]))\n                                                    : _createCommentVNode(\"v-if\", true)\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_28, [\n                                                _createElementVNode(\"div\", {\n                                                    class: _normalizeClass([\"acu-settings-title acu-collapsible\", { 'is-expanded': tableSelectorExpanded.value }]),\n                                                    onClick: _cache[13] || (_cache[13] = ($event) => (tableSelectorExpanded.value = !tableSelectorExpanded.value))\n                                                }, [\n                                                    _cache[40] || (_cache[40] = _createElementVNode(\"i\", { class: \"fas fa-table\" }, null, -1 /* CACHED */)),\n                                                    _cache[41] || (_cache[41] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                    _createElementVNode(\"span\", _hoisted_29, _toDisplayString(tableSelectorExpanded.value ? '' : ''), 1 /* TEXT */)\n                                                ], 2 /* CLASS */),\n                                                _withDirectives(_createElementVNode(\"div\", _hoisted_30, [\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_31, [\n                                                        _createElementVNode(\"div\", _hoisted_32, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-quick-select-btn\", { active: isAllSelected.value }]),\n                                                                onClick: handleSelectAll\n                                                            }, [...(_cache[42] || (_cache[42] = [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-check-double\" }, null, -1 /* CACHED */),\n                                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                                ]))], 2 /* CLASS */),\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-quick-select-btn\", { active: isOnlySummarySelected.value }]),\n                                                                onClick: handleSelectSummaryOnly\n                                                            }, [...(_cache[43] || (_cache[43] = [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-star\" }, null, -1 /* CACHED */),\n                                                                    _createTextVNode(\" / \", -1 /* CACHED */)\n                                                                ]))], 2 /* CLASS */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_33, [\n                                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableTables.value, (table) => {\n                                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                                    key: table.key,\n                                                                    class: _normalizeClass([\"acu-table-selector-item\", {\n                                                                            'is-summary-outline': table.isSummaryOrOutline,\n                                                                            'is-selected': selectedTableNames.value.includes(table.name),\n                                                                        }]),\n                                                                    onClick: ($event) => (toggleTableSelection(table.name))\n                                                                }, [\n                                                                    _createElementVNode(\"input\", {\n                                                                        type: \"checkbox\",\n                                                                        checked: selectedTableNames.value.includes(table.name),\n                                                                        onClick: _cache[14] || (_cache[14] = _withModifiers(() => { }, [\"stop\"])),\n                                                                        onChange: ($event) => (toggleTableSelection(table.name))\n                                                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_35),\n                                                                    _createElementVNode(\"span\", _hoisted_36, _toDisplayString(table.name), 1 /* TEXT */)\n                                                                ], 10 /* CLASS, PROPS */, _hoisted_34));\n                                                            }), 128 /* KEYED_FRAGMENT */)),\n                                                            (availableTables.value.length === 0)\n                                                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_37, [...(_cache[44] || (_cache[44] = [\n                                                                        _createElementVNode(\"i\", { class: \"fas fa-inbox\" }, null, -1 /* CACHED */),\n                                                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                                                    ]))]))\n                                                                : _createCommentVNode(\"v-if\", true)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_38, [\n                                                            _createTextVNode(\" : \" + _toDisplayString(selectedTableNames.value.length) + \"/\" + _toDisplayString(availableTables.value.length) + \"  \", 1 /* TEXT */),\n                                                            (selectedTableNames.value.length === 0)\n                                                                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_39, \"()\"))\n                                                                : _createCommentVNode(\"v-if\", true)\n                                                        ])\n                                                    ])\n                                                ], 512 /* NEED_PATCH */), [\n                                                    [_vShow, tableSelectorExpanded.value]\n                                                ])\n                                            ])\n                                        ]),\n                                        _createCommentVNode(\"  (PC) \"),\n                                        _createElementVNode(\"div\", _hoisted_40, [\n                                            _createElementVNode(\"div\", _hoisted_41, [\n                                                _createElementVNode(\"div\", _hoisted_42, [\n                                                    _createElementVNode(\"button\", {\n                                                        class: _normalizeClass([\"acu-quick-select-btn\", { active: isAllSelected.value }]),\n                                                        onClick: handleSelectAll\n                                                    }, [...(_cache[45] || (_cache[45] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-check-double\" }, null, -1 /* CACHED */),\n                                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                                        ]))], 2 /* CLASS */),\n                                                    _createElementVNode(\"button\", {\n                                                        class: _normalizeClass([\"acu-quick-select-btn\", { active: isOnlySummarySelected.value }]),\n                                                        onClick: handleSelectSummaryOnly\n                                                    }, [...(_cache[46] || (_cache[46] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-star\" }, null, -1 /* CACHED */),\n                                                            _createTextVNode(\" / \", -1 /* CACHED */)\n                                                        ]))], 2 /* CLASS */)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_43, [\n                                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableTables.value, (table) => {\n                                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                                            key: table.key,\n                                                            class: _normalizeClass([\"acu-table-selector-item\", {\n                                                                    'is-summary-outline': table.isSummaryOrOutline,\n                                                                    'is-selected': selectedTableNames.value.includes(table.name),\n                                                                }]),\n                                                            onClick: ($event) => (toggleTableSelection(table.name))\n                                                        }, [\n                                                            _createElementVNode(\"input\", {\n                                                                type: \"checkbox\",\n                                                                checked: selectedTableNames.value.includes(table.name),\n                                                                onClick: _cache[15] || (_cache[15] = _withModifiers(() => { }, [\"stop\"])),\n                                                                onChange: ($event) => (toggleTableSelection(table.name))\n                                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_45),\n                                                            _createElementVNode(\"span\", _hoisted_46, _toDisplayString(table.name), 1 /* TEXT */)\n                                                        ], 10 /* CLASS, PROPS */, _hoisted_44));\n                                                    }), 128 /* KEYED_FRAGMENT */)),\n                                                    (availableTables.value.length === 0)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_47, [...(_cache[47] || (_cache[47] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-inbox\" }, null, -1 /* CACHED */),\n                                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                                            ]))]))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ]),\n                                                _createElementVNode(\"div\", _hoisted_48, [\n                                                    _createTextVNode(\" : \" + _toDisplayString(selectedTableNames.value.length) + \"/\" + _toDisplayString(availableTables.value.length) + \"  \", 1 /* TEXT */),\n                                                    (selectedTableNames.value.length === 0)\n                                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_49, \"()\"))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                                ])\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    (hasIntegrityIssues.value)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_50, [\n                                            _cache[48] || (_cache[48] = _createElementVNode(\"i\", { class: \"fas fa-exclamation-triangle\" }, null, -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", null, _toDisplayString(integritySummary.value), 1 /* TEXT */)\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_51, [\n                                        _createElementVNode(\"button\", {\n                                            class: _normalizeClass([\"acu-update-btn\", { 'is-updating': isUpdating.value }]),\n                                            disabled: isUpdating.value,\n                                            onClick: handleExecuteUpdate\n                                        }, [\n                                            (isUpdating.value)\n                                                ? (_openBlock(), _createElementBlock(\"i\", _hoisted_53))\n                                                : (_openBlock(), _createElementBlock(\"i\", _hoisted_54)),\n                                            _createElementVNode(\"span\", null, _toDisplayString(isUpdating.value ? '...' : ''), 1 /* TEXT */)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_52)\n                                    ])\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ])\n                    ], 512 /* NEED_PATCH */),\n                    _createCommentVNode(\"  \"),\n                    (showSavePresetDialog.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-modal-overlay\",\n                            onClick: _cache[19] || (_cache[19] = _withModifiers(($event) => (showSavePresetDialog.value = false), [\"self\"]))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_55, [\n                                _createElementVNode(\"div\", _hoisted_56, [\n                                    _cache[50] || (_cache[50] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-mini-close\",\n                                        onClick: _cache[16] || (_cache[16] = ($event) => (showSavePresetDialog.value = false))\n                                    }, [...(_cache[49] || (_cache[49] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                        ]))])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_57, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event) => ((newPresetName).value = $event)),\n                                        type: \"text\",\n                                        class: \"acu-config-input acu-full-width\",\n                                        placeholder: \"\",\n                                        onKeyup: _withKeys(handleSaveNewPreset, [\"enter\"])\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, newPresetName.value]\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    (duplicatePresetWarning.value)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_58, [...(_cache[51] || (_cache[51] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-exclamation-circle\" }, null, -1 /* CACHED */),\n                                                _createTextVNode(\"  \", -1 /* CACHED */)\n                                            ]))]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_59, [\n                                        _cache[52] || (_cache[52] = _createElementVNode(\"div\", { class: \"acu-preset-summary-title\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"ul\", _hoisted_60, [\n                                            _createElementVNode(\"li\", null, \": \" + _toDisplayString(localSettings.autoUpdateThreshold), 1 /* TEXT */),\n                                            _createElementVNode(\"li\", null, \":  \" + _toDisplayString(localSettings.autoUpdateFrequency) + \" \", 1 /* TEXT */),\n                                            _createElementVNode(\"li\", null, \": \" + _toDisplayString(localSettings.updateBatchSize), 1 /* TEXT */),\n                                            _createElementVNode(\"li\", null, \": \" + _toDisplayString(localSettings.skipUpdateFloors), 1 /* TEXT */),\n                                            _createElementVNode(\"li\", null, \": \" + _toDisplayString(selectedTableNames.value.length ? selectedTableNames.value.join(', ') : ''), 1 /* TEXT */)\n                                        ])\n                                    ])\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_61, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-btn-secondary\",\n                                        onClick: _cache[18] || (_cache[18] = ($event) => (showSavePresetDialog.value = false))\n                                    }, \"\"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-btn-primary\",\n                                        disabled: !newPresetName.value.trim(),\n                                        onClick: handleSaveNewPreset\n                                    }, _toDisplayString(duplicatePresetWarning.value ? '' : ''), 9 /* TEXT, PROPS */, _hoisted_62)\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ManualUpdateDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ManualUpdateDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ManualUpdateDialog.vue?vue&type=style&index=0&id=acb73d8c&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-acb73d8c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, createVNode as _createVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"acu-purge-content\" };\nconst _hoisted_2 = { class: \"acu-purge-inputs\" };\nconst _hoisted_3 = { class: \"acu-purge-btns\" };\nconst _hoisted_4 = { class: \"acu-purge-btns-right\" };\nconst _hoisted_5 = [\"disabled\"];\nimport { onClickOutside } from '@vueuse/core';\nimport { computed, ref, watch } from 'vue';\nimport { toast } from '../../composables/useToast';\nimport AdvancedPurgeDialog from './AdvancedPurgeDialog.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PurgeRangeDialog',\n    props: {\n        visible: { type: Boolean },\n        maxFloor: { default: 999 }\n    },\n    emits: [\"update:visible\", \"confirm\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const dialogRef = ref();\n        const startInputRef = ref();\n        const endInputRef = ref();\n        const startFloor = ref(null);\n        const endFloor = ref(null);\n        const hasInputError = ref(false);\n        const showAdvancedDialog = ref(false);\n        /**\n         *  ()\n         * \n         */\n        function getDefaultFloorRange() {\n            let ST = window.SillyTavern || (window.parent ? window.parent.SillyTavern : null);\n            if (!ST && window.top && window.top.SillyTavern) {\n                ST = window.top.SillyTavern;\n            }\n            let targetIdx = -1;\n            let lastIdx = 0;\n            if (ST && ST.chat) {\n                lastIdx = Math.max(0, ST.chat.length - 1);\n                // : \n                for (let i = ST.chat.length - 1; i >= 0; i--) {\n                    const msg = ST.chat[i];\n                    if (!msg.is_user && msg.TavernDB_ACU_IsolatedData) {\n                        // \n                        const tags = Object.keys(msg.TavernDB_ACU_IsolatedData);\n                        let hasRealData = false;\n                        for (const tag of tags) {\n                            const tagData = msg.TavernDB_ACU_IsolatedData[tag];\n                            if (tagData && tagData.independentData && Object.keys(tagData.independentData).length > 0) {\n                                hasRealData = true;\n                                break;\n                            }\n                        }\n                        if (hasRealData) {\n                            targetIdx = i;\n                            break;\n                        }\n                    }\n                }\n            }\n            // \n            const defaultStart = targetIdx !== -1 ? targetIdx : lastIdx;\n            const defaultEnd = targetIdx !== -1 ? targetIdx : lastIdx;\n            return { start: defaultStart, end: defaultEnd };\n        }\n        // \n        const canConfirm = computed(() => {\n            if (startFloor.value === null || endFloor.value === null)\n                return false;\n            if (isNaN(startFloor.value) || isNaN(endFloor.value))\n                return false;\n            if (startFloor.value < 0 || endFloor.value < 0)\n                return false;\n            if (startFloor.value > endFloor.value)\n                return false;\n            return true;\n        });\n        //  - \n        watch(() => props.visible, visible => {\n            if (visible) {\n                // \n                const defaultRange = getDefaultFloorRange();\n                startFloor.value = defaultRange.start;\n                endFloor.value = defaultRange.end;\n                hasInputError.value = false;\n                // \n            }\n        });\n        // \n        onClickOutside(dialogRef, () => {\n            handleCancel();\n        });\n        // \n        const focusEndInput = () => {\n            endInputRef.value?.focus();\n        };\n        // \n        const handleConfirm = () => {\n            if (canConfirm.value && startFloor.value !== null && endFloor.value !== null) {\n                emit('confirm', startFloor.value, endFloor.value);\n                emit('update:visible', false);\n            }\n            else {\n                // \n                hasInputError.value = true;\n                setTimeout(() => {\n                    hasInputError.value = false;\n                }, 500);\n                toast.warning(' (Start <= End)');\n            }\n        };\n        // \n        const handleCancel = () => {\n            emit('update:visible', false);\n        };\n        // \n        const handleOpenAdvanced = () => {\n            showAdvancedDialog.value = true;\n        };\n        // \n        const handleAdvancedConfirm = () => {\n            // \n            emit('update:visible', false);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                (__props.visible)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"acu-modal-container acu-purge-overlay\",\n                        onClick: _withModifiers(handleCancel, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", {\n                            ref_key: \"dialogRef\",\n                            ref: dialogRef,\n                            class: \"acu-modal acu-purge-range-modal\"\n                        }, [\n                            _createCommentVNode(\"  \"),\n                            _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"acu-purge-title\" }, \"\", -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_1, [\n                                _createCommentVNode(\"  \"),\n                                _cache[4] || (_cache[4] = _createElementVNode(\"div\", { class: \"acu-purge-icon\" }, [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-eraser\" })\n                                ], -1 /* CACHED */)),\n                                _createCommentVNode(\"  \"),\n                                _cache[5] || (_cache[5] = _createElementVNode(\"p\", { class: \"acu-purge-hint\" }, [\n                                    _createTextVNode(\" \"),\n                                    _createElementVNode(\"br\"),\n                                    _createElementVNode(\"span\", { class: \"acu-purge-hint-sub\" }, \"( - )\")\n                                ], -1 /* CACHED */)),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_2, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        ref_key: \"startInputRef\",\n                                        ref: startInputRef,\n                                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((startFloor).value = $event)),\n                                        type: \"number\",\n                                        class: \"acu-purge-input\",\n                                        placeholder: \"Start\",\n                                        min: \"0\",\n                                        onKeydown: _withKeys(focusEndInput, [\"enter\"])\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            startFloor.value,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ]),\n                                    _cache[3] || (_cache[3] = _createElementVNode(\"span\", { class: \"acu-purge-separator\" }, \"-\", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        ref_key: \"endInputRef\",\n                                        ref: endInputRef,\n                                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((endFloor).value = $event)),\n                                        type: \"number\",\n                                        class: \"acu-purge-input\",\n                                        placeholder: \"End\",\n                                        min: \"0\",\n                                        onKeydown: _withKeys(handleConfirm, [\"enter\"])\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            endFloor.value,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_3, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-purge-btn acu-purge-btn-advanced\",\n                                    onClick: handleOpenAdvanced\n                                }, [...(_cache[6] || (_cache[6] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-cogs\" }, null, -1 /* CACHED */),\n                                        _createTextVNode(\"  \", -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"div\", _hoisted_4, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-purge-btn acu-purge-btn-cancel\",\n                                        onClick: handleCancel\n                                    }, \"\"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-purge-btn acu-purge-btn-confirm\",\n                                        disabled: !canConfirm.value,\n                                        onClick: handleConfirm\n                                    }, \"  \", 8 /* PROPS */, _hoisted_5)\n                                ])\n                            ])\n                        ], 512 /* NEED_PATCH */)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createVNode(AdvancedPurgeDialog, {\n                    visible: showAdvancedDialog.value,\n                    \"onUpdate:visible\": _cache[2] || (_cache[2] = ($event) => ((showAdvancedDialog).value = $event)),\n                    \"initial-start-floor\": startFloor.value ?? undefined,\n                    \"initial-end-floor\": endFloor.value ?? undefined,\n                    onConfirm: handleAdvancedConfirm\n                }, null, 8 /* PROPS */, [\"visible\", \"initial-start-floor\", \"initial-end-floor\"])\n            ], 64 /* STABLE_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./PurgeRangeDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PurgeRangeDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withModifiers as _withModifiers, openBlock as _openBlock, createBlock as _createBlock, normalizeClass as _normalizeClass, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-row-edit-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-title\" };\nconst _hoisted_4 = { class: \"acu-modal-body\" };\nconst _hoisted_5 = { class: \"acu-row-edit-content\" };\nimport { computed, watch } from 'vue';\nimport { useConfigStore } from '../../stores/useConfigStore';\nimport DataCard from '../DataCard.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'RowEditDialog',\n    props: {\n        visible: { type: Boolean, default: false },\n        tableName: {},\n        tableId: {},\n        rowIndex: {},\n        currentRowData: { default: null },\n        titleColIndex: { default: 1 }\n    },\n    emits: [\"update:visible\", \"close\", \"showHistory\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * RowEditDialog - \n         *\n         * \n         * - \n         * -  DataCard \n         * - \n         * - \n         */\n        const props = __props;\n        //  Teleport \n        const configStore = useConfigStore();\n        const themeClass = computed(() => `acu-theme-${configStore.theme}`);\n        const emit = __emit;\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const displayTitle = computed(() => {\n            if (!props.currentRowData)\n                return props.tableName;\n            const titleIdx = props.titleColIndex;\n            if (titleIdx >= 0 && props.currentRowData.cells.length > titleIdx) {\n                const value = props.currentRowData.cells[titleIdx]?.value;\n                if (value) {\n                    return `${props.tableName} - ${value}`;\n                }\n            }\n            return `${props.tableName} -  ${props.rowIndex + 1} `;\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function handleClose() {\n            emit('update:visible', false);\n            emit('close');\n        }\n        /**  */\n        function handleSave() {\n            // DataCard \n            handleClose();\n        }\n        /**  */\n        function handleShowHistory() {\n            emit('showHistory');\n        }\n        // \n        watch(() => props.visible, newVal => {\n            if (!newVal) {\n                // \n            }\n        });\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: _normalizeClass([\"acu-modal-container acu-row-edit-modal-container\", themeClass.value]),\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _createCommentVNode(\"  \"),\n                            _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"acu-drag-handle acu-mobile-only\" }, null, -1 /* CACHED */)),\n                            _createElementVNode(\"span\", _hoisted_3, [\n                                _cache[0] || (_cache[0] = _createElementVNode(\"i\", { class: \"fas fa-edit\" }, null, -1 /* CACHED */)),\n                                _createTextVNode(\"  - \" + _toDisplayString(displayTitle.value), 1 /* TEXT */)\n                            ]),\n                            _createCommentVNode(\" PC \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill acu-pc-only\",\n                                onClick: _withModifiers(handleSave, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _createCommentVNode(\"  DataCard  \"),\n                                (__props.currentRowData)\n                                    ? (_openBlock(), _createBlock(DataCard, {\n                                        key: 0,\n                                        data: __props.currentRowData,\n                                        \"table-name\": __props.tableName,\n                                        \"table-id\": __props.tableId,\n                                        \"view-mode\": \"list\",\n                                        \"show-header\": true,\n                                        \"show-index\": true,\n                                        \"show-history-button\": true,\n                                        \"title-col-index\": __props.titleColIndex,\n                                        onShowHistory: handleShowHistory\n                                    }, null, 8 /* PROPS */, [\"data\", \"table-name\", \"table-id\", \"title-col-index\"]))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ])\n                        ])\n                    ])\n                ], 2 /* CLASS */))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./RowEditDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RowEditDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, Fragment as _Fragment, normalizeStyle as _normalizeStyle, vModelText as _vModelText, withDirectives as _withDirectives, vModelRadio as _vModelRadio } from \"vue\";\nconst _hoisted_1 = { class: \"acu-ball-appearance-panel\" };\nconst _hoisted_2 = { class: \"acu-ball-preview-fixed\" };\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = {\n    key: 3,\n    class: \"fa-solid fa-image\"\n};\nconst _hoisted_5 = { class: \"acu-ball-scroll-content\" };\nconst _hoisted_6 = { class: \"acu-settings-section\" };\nconst _hoisted_7 = { class: \"acu-settings-title-row\" };\nconst _hoisted_8 = { class: \"acu-preview-buttons\" };\nconst _hoisted_9 = { class: \"acu-anim-grid\" };\nconst _hoisted_10 = { class: \"acu-settings-section\" };\nconst _hoisted_11 = { class: \"acu-settings-group\" };\nconst _hoisted_12 = { class: \"acu-settings-row\" };\nconst _hoisted_13 = { class: \"acu-settings-control acu-color-picker-inline\" };\nconst _hoisted_14 = { class: \"acu-settings-row\" };\nconst _hoisted_15 = { class: \"acu-settings-label\" };\nconst _hoisted_16 = { class: \"hint\" };\nconst _hoisted_17 = { class: \"acu-settings-control\" };\nconst _hoisted_18 = { class: \"acu-settings-section\" };\nconst _hoisted_19 = { class: \"acu-settings-group\" };\nconst _hoisted_20 = { class: \"acu-settings-row\" };\nconst _hoisted_21 = { class: \"acu-settings-control acu-color-picker-inline\" };\nconst _hoisted_22 = { class: \"acu-settings-row\" };\nconst _hoisted_23 = { class: \"acu-settings-label\" };\nconst _hoisted_24 = { class: \"hint\" };\nconst _hoisted_25 = { class: \"acu-settings-control\" };\nconst _hoisted_26 = { class: \"acu-settings-section\" };\nconst _hoisted_27 = { class: \"acu-settings-group\" };\nconst _hoisted_28 = { class: \"acu-settings-row\" };\nconst _hoisted_29 = { class: \"acu-settings-label\" };\nconst _hoisted_30 = { class: \"hint\" };\nconst _hoisted_31 = { class: \"acu-settings-control\" };\nconst _hoisted_32 = { class: \"acu-settings-section\" };\nconst _hoisted_33 = { class: \"acu-icon-type-row\" };\nconst _hoisted_34 = {\n    key: 0,\n    class: \"acu-icon-input-area\"\n};\nconst _hoisted_35 = { class: \"acu-icon-input\" };\nconst _hoisted_36 = {\n    key: 1,\n    class: \"acu-icon-input-area\"\n};\nconst _hoisted_37 = { class: \"acu-emoji-input\" };\nconst _hoisted_38 = { class: \"acu-icon-input-area\" };\nconst _hoisted_39 = { class: \"acu-image-preview-row\" };\nconst _hoisted_40 = { class: \"acu-image-actions\" };\nimport { computed, reactive, ref, watch } from 'vue';\nimport { DEFAULT_BALL_APPEARANCE, useBallAppearanceStore, useUIStore } from '../../stores';\nimport { compressImage, fileToBase64, hexToRgba } from '../../utils';\n// ============================================================\n// Store\n// ============================================================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'BallAppearancePanel',\n    setup(__props) {\n        const ballStore = useBallAppearanceStore();\n        const uiStore = useUIStore();\n        // ============================================================\n        // \n        // ============================================================\n        const localAppearance = reactive({ ...ballStore.appearance });\n        /**  */\n        const isPreviewAnimating = ref(false);\n        const isPreviewNotify = ref(false);\n        /**  input ref */\n        const imageInputRef = ref();\n        // ============================================================\n        //  Store\n        // ============================================================\n        watch(localAppearance, newVal => {\n            ballStore.updateAppearance(newVal);\n        }, { deep: true });\n        // ============================================================\n        // \n        // ============================================================\n        const previewClasses = computed(() => ({\n            'p-anim-ripple': isPreviewAnimating.value && localAppearance.notifyAnimation === 'ripple',\n            'p-anim-arc': isPreviewAnimating.value && localAppearance.notifyAnimation === 'arc',\n            'p-notify': isPreviewNotify.value,\n        }));\n        const previewStyle = computed(() => ({\n            '--ball-size': `${localAppearance.size}px`,\n            '--ball-border-color': localAppearance.borderColor,\n            '--ball-border-color-rgba': hexToRgba(localAppearance.borderColor, localAppearance.borderOpacity),\n            '--ball-bg-color': hexToRgba(localAppearance.bgColor, localAppearance.bgOpacity),\n        }));\n        /**  */\n        const imagePreviewStyle = computed(() => {\n            if (!localAppearance.content)\n                return {};\n            return {\n                backgroundImage: `url('${localAppearance.content}')`,\n                backgroundPosition: `${localAppearance.imageOffsetX ?? 50}% ${localAppearance.imageOffsetY ?? 50}%`,\n                backgroundSize: `${localAppearance.imageScale ?? 150}%`,\n                backgroundRepeat: 'no-repeat',\n            };\n        });\n        // ============================================================\n        // \n        // ============================================================\n        function playPreviewAnim() {\n            isPreviewAnimating.value = true;\n            isPreviewNotify.value = false;\n            setTimeout(() => {\n                isPreviewAnimating.value = false;\n            }, 3000);\n        }\n        function playNotifyEffect() {\n            isPreviewNotify.value = true;\n            isPreviewAnimating.value = false;\n            setTimeout(() => {\n                isPreviewNotify.value = false;\n            }, 3000);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  -  */\n        function handleImageBtnClick() {\n            localAppearance.type = 'image';\n            imageInputRef.value?.click();\n        }\n        async function handleImageUpload(event) {\n            const input = event.target;\n            const file = input.files?.[0];\n            if (!file)\n                return;\n            try {\n                let base64 = await fileToBase64(file);\n                //  100x100 \n                base64 = await compressImage(base64, 100, 0.8);\n                localAppearance.content = base64;\n                // \n                localAppearance.imageOffsetX = 50;\n                localAppearance.imageOffsetY = 50;\n                localAppearance.imageScale = 150;\n                // \n                openCropDialog();\n            }\n            catch (e) {\n                console.error('[ACU] :', e);\n            }\n            //  input\n            input.value = '';\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function openCropDialog() {\n            if (localAppearance.content) {\n                uiStore.openAvatarCropDialog({\n                    imageUrl: localAppearance.content,\n                    name: '',\n                    initialOffsetX: localAppearance.imageOffsetX ?? 50,\n                    initialOffsetY: localAppearance.imageOffsetY ?? 50,\n                    initialScale: localAppearance.imageScale ?? 150,\n                }, {\n                    onApply: (data) => {\n                        localAppearance.imageOffsetX = data.offsetX;\n                        localAppearance.imageOffsetY = data.offsetY;\n                        localAppearance.imageScale = data.scale;\n                    },\n                    onUpload: async (file) => {\n                        try {\n                            let base64 = await fileToBase64(file);\n                            base64 = await compressImage(base64, 100, 0.8);\n                            localAppearance.content = base64;\n                            // \n                            localAppearance.imageOffsetX = 50;\n                            localAppearance.imageOffsetY = 50;\n                            localAppearance.imageScale = 150;\n                        }\n                        catch (e) {\n                            console.error('[ACU] :', e);\n                        }\n                    },\n                });\n            }\n        }\n        /**  */\n        function clearImage() {\n            localAppearance.content = '';\n            localAppearance.imageOffsetX = 50;\n            localAppearance.imageOffsetY = 50;\n            localAppearance.imageScale = 150;\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function resetToDefault() {\n            Object.assign(localAppearance, DEFAULT_BALL_APPEARANCE);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  -  position: absolute \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"button\", {\n                        class: \"acu-reset-mini-btn\",\n                        title: \"\",\n                        onClick: _withModifiers(resetToDefault, [\"stop\"])\n                    }, [...(_cache[13] || (_cache[13] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"acu-ball-preview\", previewClasses.value]),\n                        style: _normalizeStyle(previewStyle.value)\n                    }, [\n                        (localAppearance.type === 'icon')\n                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                key: 0,\n                                class: _normalizeClass(['fa-solid', localAppearance.content])\n                            }, null, 2 /* CLASS */))\n                            : (localAppearance.type === 'emoji')\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createTextVNode(_toDisplayString(localAppearance.content), 1 /* TEXT */)\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (localAppearance.type === 'image' && localAppearance.content)\n                                    ? (_openBlock(), _createElementBlock(\"img\", {\n                                        key: 2,\n                                        src: localAppearance.content,\n                                        alt: \"\"\n                                    }, null, 8 /* PROPS */, _hoisted_3))\n                                    : (_openBlock(), _createElementBlock(\"i\", _hoisted_4))\n                    ], 6 /* CLASS, STYLE */)\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_5, [\n                    _createCommentVNode(\"  -  \"),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-bell\" }),\n                                _createTextVNode(\" AI  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-tool-btn\",\n                                    onClick: _withModifiers(playPreviewAnim, [\"stop\"])\n                                }, \" \"),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-tool-btn\",\n                                    onClick: _withModifiers(playNotifyEffect, [\"stop\"])\n                                }, \" \")\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_9, [\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-anim-option\", { active: localAppearance.notifyAnimation === 'ripple' }]),\n                                onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (localAppearance.notifyAnimation = 'ripple'), [\"stop\"]))\n                            }, [...(_cache[15] || (_cache[15] = [\n                                    _createElementVNode(\"span\", { class: \"acu-anim-icon\" }, \"\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"acu-anim-name\" }, \"\", -1 /* CACHED */)\n                                ]))], 2 /* CLASS */),\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-anim-option\", { active: localAppearance.notifyAnimation === 'arc' }]),\n                                onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (localAppearance.notifyAnimation = 'arc'), [\"stop\"]))\n                            }, [...(_cache[16] || (_cache[16] = [\n                                    _createElementVNode(\"span\", { class: \"acu-anim-icon\" }, \"\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"acu-anim-name\" }, \"\", -1 /* CACHED */)\n                                ]))], 2 /* CLASS */)\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_10, [\n                        _cache[19] || (_cache[19] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-palette\" }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_11, [\n                            _createElementVNode(\"div\", _hoisted_12, [\n                                _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_13, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((localAppearance.borderColor) = $event)),\n                                        type: \"text\",\n                                        class: \"acu-color-input\",\n                                        placeholder: \"#RRGGBB\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, localAppearance.borderColor]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((localAppearance.borderColor) = $event)),\n                                        type: \"color\",\n                                        class: \"acu-color-swatch\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, localAppearance.borderColor]\n                                    ])\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_14, [\n                                _createElementVNode(\"div\", _hoisted_15, [\n                                    _cache[18] || (_cache[18] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_16, _toDisplayString(localAppearance.borderOpacity) + \"%\", 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_17, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((localAppearance.borderOpacity) = $event)),\n                                        type: \"range\",\n                                        min: \"0\",\n                                        max: \"100\",\n                                        step: \"5\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            localAppearance.borderOpacity,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_18, [\n                        _cache[22] || (_cache[22] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-fill-drip\" }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_19, [\n                            _createElementVNode(\"div\", _hoisted_20, [\n                                _cache[20] || (_cache[20] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_21, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((localAppearance.bgColor) = $event)),\n                                        type: \"text\",\n                                        class: \"acu-color-input\",\n                                        placeholder: \"#RRGGBB\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, localAppearance.bgColor]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((localAppearance.bgColor) = $event)),\n                                        type: \"color\",\n                                        class: \"acu-color-swatch\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, localAppearance.bgColor]\n                                    ])\n                                ])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_22, [\n                                _createElementVNode(\"div\", _hoisted_23, [\n                                    _cache[21] || (_cache[21] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_24, _toDisplayString(localAppearance.bgOpacity) + \"%\", 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_25, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((localAppearance.bgOpacity) = $event)),\n                                        type: \"range\",\n                                        min: \"0\",\n                                        max: \"100\",\n                                        step: \"5\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            localAppearance.bgOpacity,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_26, [\n                        _cache[24] || (_cache[24] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-expand-arrows-alt\" }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_27, [\n                            _createElementVNode(\"div\", _hoisted_28, [\n                                _createElementVNode(\"div\", _hoisted_29, [\n                                    _cache[23] || (_cache[23] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_30, _toDisplayString(localAppearance.size) + \"px\", 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_31, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((localAppearance.size) = $event)),\n                                        type: \"range\",\n                                        min: \"40\",\n                                        max: \"100\",\n                                        step: \"2\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            localAppearance.size,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_32, [\n                        _cache[35] || (_cache[35] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-icons\" }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createCommentVNode(\"  -  \"),\n                        _createElementVNode(\"div\", _hoisted_33, [\n                            _createElementVNode(\"label\", {\n                                class: _normalizeClass([\"acu-icon-btn\", { active: localAppearance.type === 'icon' }])\n                            }, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event) => ((localAppearance.type) = $event)),\n                                    type: \"radio\",\n                                    value: \"icon\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelRadio, localAppearance.type]\n                                ]),\n                                _cache[25] || (_cache[25] = _createElementVNode(\"i\", { class: \"fa-solid fa-icons\" }, null, -1 /* CACHED */)),\n                                _cache[26] || (_cache[26] = _createElementVNode(\"span\", null, \"FA\", -1 /* CACHED */))\n                            ], 2 /* CLASS */),\n                            _createElementVNode(\"label\", {\n                                class: _normalizeClass([\"acu-icon-btn\", { active: localAppearance.type === 'emoji' }])\n                            }, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event) => ((localAppearance.type) = $event)),\n                                    type: \"radio\",\n                                    value: \"emoji\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [_vModelRadio, localAppearance.type]\n                                ]),\n                                _cache[27] || (_cache[27] = _createElementVNode(\"span\", { class: \"emoji-icon\" }, \"\", -1 /* CACHED */)),\n                                _cache[28] || (_cache[28] = _createElementVNode(\"span\", null, \"Emoji\", -1 /* CACHED */))\n                            ], 2 /* CLASS */),\n                            _createCommentVNode(\"  -  \"),\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-icon-btn\", { active: localAppearance.type === 'image' }]),\n                                onClick: _withModifiers(handleImageBtnClick, [\"stop\"])\n                            }, [\n                                _createElementVNode(\"input\", {\n                                    ref_key: \"imageInputRef\",\n                                    ref: imageInputRef,\n                                    type: \"file\",\n                                    accept: \"image/*\",\n                                    hidden: \"\",\n                                    onChange: handleImageUpload\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */),\n                                _cache[29] || (_cache[29] = _createElementVNode(\"i\", { class: \"fa-solid fa-image\" }, null, -1 /* CACHED */)),\n                                _cache[30] || (_cache[30] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                            ], 2 /* CLASS */)\n                        ]),\n                        _createCommentVNode(\" /Emoji \"),\n                        (localAppearance.type === 'icon')\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [\n                                _createElementVNode(\"div\", _hoisted_35, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event) => ((localAppearance.content) = $event)),\n                                        placeholder: \"fa-layer-group\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelText, localAppearance.content]\n                                    ]),\n                                    _cache[31] || (_cache[31] = _createElementVNode(\"span\", { class: \"acu-input-hint\" }, \" FontAwesome \", -1 /* CACHED */))\n                                ])\n                            ]))\n                            : (localAppearance.type === 'emoji')\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_36, [\n                                    _createElementVNode(\"div\", _hoisted_37, [\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event) => ((localAppearance.content) = $event)),\n                                            placeholder: \"\"\n                                        }, null, 512 /* NEED_PATCH */), [\n                                            [_vModelText, localAppearance.content]\n                                        ]),\n                                        _cache[32] || (_cache[32] = _createElementVNode(\"span\", { class: \"acu-input-hint\" }, \" Emoji \", -1 /* CACHED */))\n                                    ])\n                                ]))\n                                : (localAppearance.type === 'image' && localAppearance.content)\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"div\", _hoisted_38, [\n                                            _createElementVNode(\"div\", _hoisted_39, [\n                                                _createElementVNode(\"div\", {\n                                                    class: \"acu-preview-thumb-wrapper\",\n                                                    style: _normalizeStyle(imagePreviewStyle.value),\n                                                    onClick: _withModifiers(openCropDialog, [\"stop\"])\n                                                }, [...(_cache[33] || (_cache[33] = [\n                                                        _createElementVNode(\"span\", { class: \"acu-edit-hint\" }, [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-crop-simple\" })\n                                                        ], -1 /* CACHED */)\n                                                    ]))], 4 /* STYLE */),\n                                                _createElementVNode(\"div\", _hoisted_40, [\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"acu-adjust-btn\",\n                                                        onClick: _withModifiers(openCropDialog, [\"stop\"])\n                                                    }, [...(_cache[34] || (_cache[34] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-crop-simple\" }, null, -1 /* CACHED */),\n                                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                                        ]))])\n                                                ])\n                                            ])\n                                        ])\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    : _createCommentVNode(\"v-if\", true)\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./BallAppearancePanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./BallAppearancePanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, withModifiers as _withModifiers, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-button-config-panel\" };\nconst _hoisted_2 = { class: \"acu-settings-row\" };\nconst _hoisted_3 = { class: \"acu-settings-control\" };\nconst _hoisted_4 = { class: \"acu-config-section acu-visible-area\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"acu-btn-visible-grid\"\n};\nconst _hoisted_6 = [\"title\", \"onClick\", \"onDragstart\", \"onDragover\", \"onDrop\"];\nconst _hoisted_7 = {\n    key: 0,\n    class: \"required-dot\"\n};\nconst _hoisted_8 = [\"title\", \"onClick\"];\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_11 = { class: \"acu-config-section acu-hidden-area\" };\nconst _hoisted_12 = {\n    key: 0,\n    class: \"acu-btn-hidden-grid\"\n};\nconst _hoisted_13 = [\"title\", \"onClick\"];\nconst _hoisted_14 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_15 = { class: \"picker-header\" };\nconst _hoisted_16 = { class: \"picker-content\" };\nconst _hoisted_17 = { class: \"picker-hint\" };\nconst _hoisted_18 = { class: \"picker-options\" };\nconst _hoisted_19 = [\"onClick\"];\nimport { computed, ref } from 'vue';\nimport { NAV_BUTTONS, useConfigStore } from '../../stores/useConfigStore';\n/**\n * \n */\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'NavButtonConfigPanel',\n    setup(__props) {\n        /**\n         * NavButtonConfigPanel - \n         *\n         * :\n         * - \n         * -  UI\n         * - \n         * - \n         * - \n         *\n         * :\n         * - \"\"\n         */\n        const configStore = useConfigStore();\n        /**  */\n        const getButtonIcon = (btnId) => {\n            const btn = NAV_BUTTONS.find(b => b.id === btnId);\n            return btn?.icon || 'fa-circle';\n        };\n        /**\n         * \n         */\n        const getButtonLabel = (btnId) => {\n            const btn = NAV_BUTTONS.find(b => b.id === btnId);\n            return btn?.label || btnId;\n        };\n        /**\n         * \n         */\n        const visibleButtonCards = computed(() => {\n            const order = configStore.config.buttonOrder;\n            const visible = configStore.config.visibleButtons;\n            const groups = configStore.config.buttonGroups || [];\n            // \n            const sortedVisible = order.filter(id => visible.includes(id));\n            return sortedVisible.map(id => {\n                const btn = NAV_BUTTONS.find(b => b.id === id);\n                const group = groups.find(g => g.primaryId === id);\n                return {\n                    id,\n                    icon: btn?.icon || 'fa-circle',\n                    label: btn?.label || id,\n                    secondaryId: group?.secondaryId || null,\n                };\n            });\n        });\n        /**\n         * \n         * - \n         * - \n         */\n        const hiddenButtons = computed(() => {\n            const visible = configStore.config.visibleButtons;\n            const groups = configStore.config.buttonGroups || [];\n            const usedSecondaries = groups.map(g => g.secondaryId).filter(Boolean);\n            return NAV_BUTTONS.filter(btn => !btn.hidden && !visible.includes(btn.id) && !usedSecondaries.includes(btn.id));\n        });\n        /**\n         * \n         * - \n         * - \n         */\n        const availableSecondaryButtons = computed(() => {\n            const groups = configStore.config.buttonGroups || [];\n            const usedSecondaries = groups.map(g => g.secondaryId).filter(Boolean);\n            return NAV_BUTTONS.filter(btn => {\n                // \n                if (btn.id === currentPickerTarget.value)\n                    return false;\n                // \n                if (usedSecondaries.includes(btn.id))\n                    return false;\n                return true;\n            });\n        });\n        // ============================================================\n        // \n        // ============================================================\n        const draggedIndex = ref(null);\n        const handleDragStart = (e, index) => {\n            draggedIndex.value = index;\n            if (e.dataTransfer) {\n                e.dataTransfer.effectAllowed = 'move';\n                e.dataTransfer.setData('text/plain', String(index));\n            }\n            e.target.classList.add('dragging');\n        };\n        const handleDragOver = (e, index) => {\n            e.preventDefault();\n            if (draggedIndex.value === null || draggedIndex.value === index)\n                return;\n            const items = document.querySelectorAll('.acu-button-card');\n            items.forEach(item => item.classList.remove('drop-target'));\n            e.currentTarget.classList.add('drop-target');\n        };\n        const handleDrop = (e, targetIndex) => {\n            e.preventDefault();\n            if (draggedIndex.value === null || draggedIndex.value === targetIndex)\n                return;\n            //  buttonOrder \n            const currentOrder = [...configStore.config.buttonOrder];\n            const visibleIds = configStore.config.visibleButtons;\n            //  order \n            const visibleInOrder = currentOrder.filter(id => visibleIds.includes(id));\n            const [removed] = visibleInOrder.splice(draggedIndex.value, 1);\n            visibleInOrder.splice(targetIndex, 0, removed);\n            //  + \n            const hiddenInOrder = currentOrder.filter(id => !visibleIds.includes(id));\n            configStore.setButtonOrder([...visibleInOrder, ...hiddenInOrder]);\n            // \n            const items = document.querySelectorAll('.acu-button-card');\n            items.forEach(item => item.classList.remove('drop-target'));\n            draggedIndex.value = null;\n        };\n        const handleDragEnd = (e) => {\n            e.target.classList.remove('dragging');\n            const items = document.querySelectorAll('.acu-button-card');\n            items.forEach(item => item.classList.remove('drop-target'));\n            draggedIndex.value = null;\n        };\n        // ============================================================\n        // /\n        // ============================================================\n        const handleShowButton = (btnId) => {\n            const currentVisible = [...configStore.config.visibleButtons];\n            const currentOrder = [...configStore.config.buttonOrder];\n            //  visibleButtons\n            if (!currentVisible.includes(btnId)) {\n                currentVisible.push(btnId);\n                configStore.setVisibleButtons(currentVisible);\n            }\n            //  buttonOrder \n            if (!currentOrder.includes(btnId)) {\n                //  settings \n                const settingsIndex = currentOrder.indexOf('settings');\n                if (settingsIndex >= 0) {\n                    currentOrder.splice(settingsIndex, 0, btnId);\n                }\n                else {\n                    currentOrder.push(btnId);\n                }\n                configStore.setButtonOrder(currentOrder);\n            }\n        };\n        const handleHideButton = (btnId) => {\n            if (btnId === 'settings')\n                return; // \n            const current = [...configStore.config.visibleButtons];\n            const index = current.indexOf(btnId);\n            if (index > -1) {\n                current.splice(index, 1);\n                configStore.setVisibleButtons(current);\n            }\n        };\n        // ============================================================\n        // \n        // ============================================================\n        const attachmentPickerVisible = ref(false);\n        const currentPickerTarget = ref('');\n        const openAttachmentPicker = (primaryId) => {\n            currentPickerTarget.value = primaryId;\n            attachmentPickerVisible.value = true;\n        };\n        const closeAttachmentPicker = () => {\n            attachmentPickerVisible.value = false;\n            currentPickerTarget.value = '';\n        };\n        const handleSelectSecondary = (secondaryId) => {\n            configStore.addButtonGroup(currentPickerTarget.value, secondaryId);\n            closeAttachmentPicker();\n        };\n        const handleRemoveSecondary = (primaryId) => {\n            configStore.removeButtonGroupSecondary(primaryId);\n        };\n        // ============================================================\n        // \n        // ============================================================\n        const handleReset = () => {\n            configStore.resetButtonConfig();\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  -  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                        _createTextVNode(\"  \"),\n                        _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                    ], -1 /* CACHED */)),\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"button\", {\n                            class: _normalizeClass([\"acu-switch\", { active: _unref(configStore).longPressDirectExec }]),\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(($event) => (_unref(configStore).toggleLongPressDirectExec()), [\"stop\"]))\n                        }, null, 2 /* CLASS */)\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createElementVNode(\"h4\", null, [\n                        _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-th-large\" }, null, -1 /* CACHED */)),\n                        _createTextVNode(\"  (\" + _toDisplayString(visibleButtonCards.value.length) + \") \", 1 /* TEXT */),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-btn-text acu-btn-reset\",\n                            onClick: _withModifiers(handleReset, [\"stop\"])\n                        }, [...(_cache[3] || (_cache[3] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" \", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    (visibleButtonCards.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(visibleButtonCards.value, (card, index) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: card.id,\n                                    class: _normalizeClass([\"acu-btn-config-item\", { 'is-required': card.id === 'settings' }]),\n                                    title: card.label + (card.id === 'settings' ? ' ()' : ' ()'),\n                                    draggable: \"true\",\n                                    onClick: _withModifiers(($event) => (handleHideButton(card.id)), [\"stop\"]),\n                                    onDragstart: ($event) => (handleDragStart($event, index)),\n                                    onDragover: _withModifiers(($event) => (handleDragOver($event, index)), [\"prevent\"]),\n                                    onDrop: ($event) => (handleDrop($event, index)),\n                                    onDragend: handleDragEnd\n                                }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass([['fas', card.icon], \"btn-icon\"])\n                                    }, null, 2 /* CLASS */),\n                                    _createCommentVNode(\"  \"),\n                                    (card.id === 'settings')\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_7))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\" / \"),\n                                    (card.secondaryId)\n                                        ? (_openBlock(), _createElementBlock(\"div\", {\n                                            key: 1,\n                                            class: \"attachment-indicator\",\n                                            title: ': ' + getButtonLabel(card.secondaryId) + ' ()',\n                                            onClick: _withModifiers(($event) => (handleRemoveSecondary(card.id)), [\"stop\"])\n                                        }, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(['fas', getButtonIcon(card.secondaryId)])\n                                            }, null, 2 /* CLASS */)\n                                        ], 8 /* PROPS */, _hoisted_8))\n                                        : (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 2,\n                                            class: \"attachment-add-btn\",\n                                            title: '',\n                                            onClick: _withModifiers(($event) => (openAttachmentPicker(card.id)), [\"stop\"])\n                                        }, [...(_cache[5] || (_cache[5] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                                            ]))], 8 /* PROPS */, _hoisted_9))\n                                ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_6));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [...(_cache[6] || (_cache[6] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-exclamation-triangle\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]))\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_11, [\n                    _createElementVNode(\"h4\", null, [\n                        _cache[7] || (_cache[7] = _createElementVNode(\"i\", { class: \"fas fa-eye-slash\" }, null, -1 /* CACHED */)),\n                        _createTextVNode(\"  (\" + _toDisplayString(hiddenButtons.value.length) + \") \", 1 /* TEXT */)\n                    ]),\n                    (hiddenButtons.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(hiddenButtons.value, (btn) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: btn.id,\n                                    class: \"acu-btn-hidden-item\",\n                                    title: btn.label + ' ()',\n                                    onClick: _withModifiers(($event) => (handleShowButton(btn.id)), [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(['fas', btn.icon])\n                                    }, null, 2 /* CLASS */)\n                                ], 8 /* PROPS */, _hoisted_13));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [...(_cache[8] || (_cache[8] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-check-circle\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]))\n                ]),\n                _createCommentVNode(\"  \"),\n                (attachmentPickerVisible.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"acu-attachment-picker-overlay\",\n                        onClick: _withModifiers(closeAttachmentPicker, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: \"acu-attachment-picker\",\n                            onClick: _cache[1] || (_cache[1] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_15, [\n                                _cache[10] || (_cache[10] = _createElementVNode(\"h4\", null, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    class: \"btn-close\",\n                                    onClick: _withModifiers(closeAttachmentPicker, [\"stop\"])\n                                }, [...(_cache[9] || (_cache[9] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_16, [\n                                _createElementVNode(\"p\", _hoisted_17, \" \\\"\" + _toDisplayString(getButtonLabel(currentPickerTarget.value)) + \"\\\" \", 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_18, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableSecondaryButtons.value, (btn) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: btn.id,\n                                            class: \"picker-option\",\n                                            onClick: _withModifiers(($event) => (handleSelectSecondary(btn.id)), [\"stop\"])\n                                        }, [\n                                            _createElementVNode(\"i\", {\n                                                class: _normalizeClass(['fas', btn.icon])\n                                            }, null, 2 /* CLASS */),\n                                            _createElementVNode(\"span\", null, _toDisplayString(btn.label), 1 /* TEXT */)\n                                        ], 8 /* PROPS */, _hoisted_19));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ])\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"acu-config-hint acu-config-hint-fixed\" }, [\n                    _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }),\n                    _createElementVNode(\"span\", null, \"    +\")\n                ], -1 /* CACHED */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./NavButtonConfigPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./NavButtonConfigPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./NavButtonConfigPanel.vue?vue&type=style&index=0&id=5b5624ec&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5b5624ec\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"acu-tab-config-panel\" };\nconst _hoisted_2 = { class: \"acu-config-section acu-visible-area\" };\nconst _hoisted_3 = [\"onClick\", \"onDragstart\", \"onDragover\", \"onDrop\"];\nconst _hoisted_4 = {\n    key: 1,\n    class: \"tab-type-badge-mini\"\n};\nconst _hoisted_5 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_6 = { class: \"acu-config-section acu-hidden-area\" };\nconst _hoisted_7 = {\n    key: 0,\n    class: \"acu-tab-hidden-list\"\n};\nconst _hoisted_8 = [\"title\", \"onClick\"];\nconst _hoisted_9 = { class: \"tab-name\" };\nconst _hoisted_10 = {\n    key: 1,\n    class: \"tab-type-badge\"\n};\nconst _hoisted_11 = {\n    key: 1,\n    class: \"acu-empty-hint\"\n};\nimport { computed, ref } from 'vue';\nimport { useConfigStore } from '../../stores/useConfigStore';\nimport { useDataStore } from '../../stores/useDataStore';\nimport { TAB_DASHBOARD, TAB_OPTIONS, TAB_RELATIONSHIP_GRAPH, useUIStore } from '../../stores/useUIStore';\nimport { isCharacterTable, processJsonData } from '../../utils';\n/**\n * \n *  sheetId  Tab ID App.vue  tabList \n */\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TabConfigPanel',\n    setup(__props) {\n        /**\n         * TabConfigPanel - \n         *\n         * :\n         * - TabTab\n         * - \n         * - \n         * - \n         * - \n         *\n         * :\n         * - \"\"\n         *\n         *  sheetId  Tab ID App.vue  tabList \n         */\n        const configStore = useConfigStore();\n        /**\n         * \n         * - \"\"\n         * - (0)\n         * - \n         */\n        const gridStyle = computed(() => {\n            const cols = configStore.config.gridColumns;\n            if (cols === 0) {\n                //  90px\n                return { gridTemplateColumns: 'repeat(auto-fill, minmax(90px, 1fr))' };\n            }\n            // \n            return { gridTemplateColumns: `repeat(${cols}, 1fr)` };\n        });\n        const uiStore = useUIStore();\n        const dataStore = useDataStore();\n        /** Tab  */\n        const allTabs = computed(() => {\n            const tabs = [];\n            // \n            if (configStore.config.showDashboard) {\n                tabs.push({\n                    id: TAB_DASHBOARD,\n                    name: '',\n                    icon: 'fas fa-home',\n                    type: 'dashboard',\n                });\n            }\n            //  stagedData  sheetId  ID App.vue \n            const staged = dataStore.stagedData;\n            if (staged) {\n                const processed = processJsonData(staged);\n                if (processed) {\n                    for (const [tableName, tableData] of Object.entries(processed)) {\n                        const sheetId = tableData.key; //  sheetId  ID\n                        const isOptions = tableName.includes('');\n                        tabs.push({\n                            id: sheetId,\n                            name: tableName,\n                            icon: isOptions ? 'fas fa-sliders-h' : undefined,\n                            type: isOptions ? 'special' : 'normal',\n                        });\n                    }\n                }\n            }\n            // \n            const hasCharacterTables = tabs.some(t => t.type === 'normal' && isCharacterTable(t.name, t.id));\n            if (hasCharacterTables) {\n                tabs.push({\n                    id: TAB_RELATIONSHIP_GRAPH,\n                    name: '',\n                    icon: 'fas fa-project-diagram',\n                    type: 'graph',\n                });\n            }\n            // \n            const hasOptionsTables = tabs.some(t => t.type === 'special');\n            if (hasOptionsTables) {\n                tabs.push({\n                    id: TAB_OPTIONS,\n                    name: '',\n                    icon: 'fas fa-sliders-h',\n                    type: 'options',\n                });\n            }\n            return tabs;\n        });\n        /**\n         *  Tab \n         * -  visibleTabs \n         * -  visibleTabs \n         */\n        const visibleTabItems = computed(() => {\n            const visibleIds = uiStore.visibleTabs;\n            // \n            if (!visibleIds || visibleIds.length === 0) {\n                return [];\n            }\n            //  visibleTabs \n            return visibleIds\n                .map(id => allTabs.value.find(tab => tab.id === id))\n                .filter((tab) => tab !== undefined);\n        });\n        /**\n         *  Tab \n         * -  visibleTabs Tab\n         * -  visibleTabs  Tab\n         */\n        const hiddenTabItems = computed(() => {\n            const visibleIds = uiStore.visibleTabs;\n            //  Tab\n            if (!visibleIds || visibleIds.length === 0) {\n                return allTabs.value;\n            }\n            //  visibleTabs  Tab\n            return allTabs.value.filter(tab => !visibleIds.includes(tab.id));\n        });\n        /**\n         *  Tab\n         * - dashboard: \n         * - graph: \n         * - options: \n         * special\"\"\n         */\n        const isAggregateTab = (type) => {\n            return type === 'dashboard' || type === 'graph' || type === 'options';\n        };\n        /**\n         * \n         */\n        const getTypeBadge = (type) => {\n            switch (type) {\n                case 'dashboard':\n                    return '';\n                case 'graph':\n                    return '';\n                case 'options':\n                    return '';\n                default:\n                    return '';\n            }\n        };\n        // ============================================================\n        // \n        // ============================================================\n        const draggedIndex = ref(null);\n        const handleDragStart = (e, index) => {\n            draggedIndex.value = index;\n            if (e.dataTransfer) {\n                e.dataTransfer.effectAllowed = 'move';\n                e.dataTransfer.setData('text/plain', String(index));\n            }\n            //  dragging \n        };\n        const handleDragOver = (e, index) => {\n            e.preventDefault();\n            if (draggedIndex.value === null || draggedIndex.value === index)\n                return;\n            // \n        };\n        const handleDrop = (e, targetIndex) => {\n            e.preventDefault();\n            if (draggedIndex.value === null || draggedIndex.value === targetIndex)\n                return;\n            //  Tab ID\n            let currentOrder = [...uiStore.visibleTabs];\n            if (currentOrder.length === 0) {\n                currentOrder = allTabs.value.map(t => t.id);\n            }\n            // \n            const [removed] = currentOrder.splice(draggedIndex.value, 1);\n            currentOrder.splice(targetIndex, 0, removed);\n            uiStore.setVisibleTabs(currentOrder);\n            // \n            const items = document.querySelectorAll('.acu-tab-config-btn');\n            items.forEach(item => item.classList.remove('drop-target'));\n            draggedIndex.value = null;\n        };\n        const handleDragEnd = () => {\n            draggedIndex.value = null;\n        };\n        // ============================================================\n        // /\n        // ============================================================\n        /**\n         *  Tab \n         */\n        const handleShow = (tabId) => {\n            const currentVisible = [...uiStore.visibleTabs];\n            if (!currentVisible.includes(tabId)) {\n                // \n                currentVisible.push(tabId);\n                uiStore.setVisibleTabs(currentVisible);\n            }\n        };\n        /**\n         *  Tab \n         */\n        const handleHide = (tabId) => {\n            const currentVisible = [...uiStore.visibleTabs];\n            // \"\" Tab\n            if (currentVisible.length === 0) {\n                const allIds = allTabs.value.map(t => t.id);\n                const filtered = allIds.filter(id => id !== tabId);\n                //  Tab\n                if (filtered.length > 0) {\n                    uiStore.setVisibleTabs(filtered);\n                }\n                return;\n            }\n            const index = currentVisible.indexOf(tabId);\n            if (index > -1) {\n                //  Tab\n                if (currentVisible.length > 1) {\n                    currentVisible.splice(index, 1);\n                    uiStore.setVisibleTabs(currentVisible);\n                }\n            }\n        };\n        /**\n         * \n         * Tab\n         */\n        const handleReset = () => {\n            // Tab\n            const allIds = allTabs.value.map(t => t.id);\n            uiStore.setVisibleTabs(allIds);\n        };\n        /**\n         * \n         * Tab\n         */\n        const handleClearAll = () => {\n            uiStore.setVisibleTabs([]);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  Tab \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"h4\", null, [\n                        _cache[1] || (_cache[1] = _createElementVNode(\"i\", { class: \"fas fa-eye\" }, null, -1 /* CACHED */)),\n                        _createTextVNode(\"  (\" + _toDisplayString(visibleTabItems.value.length) + \") \", 1 /* TEXT */),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-btn-text acu-btn-reset\",\n                            onClick: _withModifiers(handleReset, [\"stop\"])\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" \", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    (visibleTabItems.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-tab-visible-grid\",\n                            style: _normalizeStyle(gridStyle.value)\n                        }, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(visibleTabItems.value, (tab, index) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: tab.id,\n                                    class: _normalizeClass([\"acu-nav-btn acu-tab-config-btn\", {\n                                            'acu-nav-btn-special': isAggregateTab(tab.type),\n                                            dragging: draggedIndex.value === index,\n                                        }]),\n                                    draggable: \"true\",\n                                    title: '',\n                                    onClick: _withModifiers(($event) => (handleHide(tab.id)), [\"stop\"]),\n                                    onDragstart: ($event) => (handleDragStart($event, index)),\n                                    onDragover: _withModifiers(($event) => (handleDragOver($event, index)), [\"prevent\"]),\n                                    onDrop: ($event) => (handleDrop($event, index)),\n                                    onDragend: handleDragEnd\n                                }, [\n                                    (tab.icon)\n                                        ? (_openBlock(), _createElementBlock(\"i\", {\n                                            key: 0,\n                                            class: _normalizeClass(tab.icon)\n                                        }, null, 2 /* CLASS */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createElementVNode(\"span\", null, _toDisplayString(tab.name), 1 /* TEXT */),\n                                    (isAggregateTab(tab.type))\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(getTypeBadge(tab.type)), 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_3));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ], 4 /* STYLE */))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[2] || (_cache[2] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"Tab\", -1 /* CACHED */)\n                            ]))]))\n                ]),\n                _createCommentVNode(\"  Tab \"),\n                _createElementVNode(\"div\", _hoisted_6, [\n                    _createElementVNode(\"h4\", null, [\n                        _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fas fa-eye-slash\" }, null, -1 /* CACHED */)),\n                        _createTextVNode(\"  (\" + _toDisplayString(hiddenTabItems.value.length) + \") \", 1 /* TEXT */),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-btn-text acu-btn-clear\",\n                            title: \"Tab\",\n                            onClick: _withModifiers(handleClearAll, [\"stop\"])\n                        }, [...(_cache[3] || (_cache[3] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-angle-double-down\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\"  \", -1 /* CACHED */)\n                            ]))])\n                    ]),\n                    (hiddenTabItems.value.length > 0)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(hiddenTabItems.value, (tab) => {\n                                return (_openBlock(), _createElementBlock(\"button\", {\n                                    key: tab.id,\n                                    class: _normalizeClass([\"acu-tab-hidden-item\", { 'is-special': isAggregateTab(tab.type) }]),\n                                    title: ' ' + tab.name,\n                                    onClick: _withModifiers(($event) => (handleShow(tab.id)), [\"stop\"])\n                                }, [\n                                    (tab.icon)\n                                        ? (_openBlock(), _createElementBlock(\"i\", {\n                                            key: 0,\n                                            class: _normalizeClass([tab.icon, \"tab-icon\"])\n                                        }, null, 2 /* CLASS */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createElementVNode(\"span\", _hoisted_9, _toDisplayString(tab.name), 1 /* TEXT */),\n                                    (isAggregateTab(tab.type))\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, _toDisplayString(getTypeBadge(tab.type)), 1 /* TEXT */))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _cache[5] || (_cache[5] = _createElementVNode(\"i\", { class: \"fas fa-plus add-icon\" }, null, -1 /* CACHED */))\n                                ], 10 /* CLASS, PROPS */, _hoisted_8));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [...(_cache[6] || (_cache[6] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-check-circle\" }, null, -1 /* CACHED */),\n                                _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)\n                            ]))]))\n                ]),\n                _createCommentVNode(\"  \"),\n                _cache[7] || (_cache[7] = _createElementVNode(\"div\", { class: \"acu-config-hint acu-config-hint-fixed\" }, [\n                    _createElementVNode(\"i\", { class: \"fas fa-info-circle\" }),\n                    _createElementVNode(\"span\", null, \"/ | \")\n                ], -1 /* CACHED */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TabConfigPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TabConfigPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TabConfigPanel.vue?vue&type=style&index=0&id=c81c3978&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-c81c3978\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vShow as _vShow, withDirectives as _withDirectives, unref as _unref, vModelSelect as _vModelSelect, vModelText as _vModelText, withKeys as _withKeys } from \"vue\";\nconst _hoisted_1 = { class: \"acu-theme-panel\" };\nconst _hoisted_2 = { class: \"acu-preset-header\" };\nconst _hoisted_3 = { class: \"acu-settings-row\" };\nconst _hoisted_4 = { class: \"acu-settings-control acu-preset-control\" };\nconst _hoisted_5 = { class: \"acu-preset-selected-name\" };\nconst _hoisted_6 = { class: \"acu-preset-dropdown-menu\" };\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = { class: \"acu-preset-option-name\" };\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = { class: \"acu-theme-scroll-content\" };\nconst _hoisted_11 = { class: \"acu-settings-section\" };\nconst _hoisted_12 = { class: \"acu-settings-group\" };\nconst _hoisted_13 = { class: \"acu-settings-row\" };\nconst _hoisted_14 = { class: \"acu-settings-control\" };\nconst _hoisted_15 = [\"value\"];\nconst _hoisted_16 = { class: \"acu-settings-section\" };\nconst _hoisted_17 = { class: \"acu-settings-group\" };\nconst _hoisted_18 = { class: \"acu-settings-row\" };\nconst _hoisted_19 = { class: \"acu-settings-control acu-color-picker-inline\" };\nconst _hoisted_20 = { class: \"acu-settings-row\" };\nconst _hoisted_21 = { class: \"acu-settings-control acu-color-picker-inline\" };\nconst _hoisted_22 = { class: \"acu-settings-row\" };\nconst _hoisted_23 = { class: \"acu-settings-control acu-color-picker-inline\" };\nconst _hoisted_24 = { class: \"acu-settings-section\" };\nconst _hoisted_25 = { class: \"acu-var-groups-container\" };\nconst _hoisted_26 = [\"onClick\"];\nconst _hoisted_27 = { class: \"acu-var-count\" };\nconst _hoisted_28 = { class: \"acu-var-group-body\" };\nconst _hoisted_29 = { class: \"acu-var-label\" };\nconst _hoisted_30 = { class: \"acu-var-control\" };\nconst _hoisted_31 = [\"onClick\"];\nconst _hoisted_32 = [\"value\", \"onChange\"];\nconst _hoisted_33 = [\"value\", \"onChange\"];\nconst _hoisted_34 = { class: \"acu-settings-section\" };\nconst _hoisted_35 = { class: \"acu-settings-group\" };\nconst _hoisted_36 = { class: \"acu-settings-row\" };\nconst _hoisted_37 = { class: \"acu-settings-label\" };\nconst _hoisted_38 = { class: \"hint\" };\nconst _hoisted_39 = { class: \"acu-settings-control acu-css-actions\" };\nconst _hoisted_40 = { class: \"dialog-actions\" };\nconst _hoisted_41 = [\"disabled\"];\nimport { computed, nextTick, onMounted, onUnmounted, ref, watch } from 'vue';\nimport { THEMES, useConfigStore } from '../../stores/useConfigStore';\nimport { useThemeStore } from '../../stores/useThemeStore';\nimport { THEME_VAR_GROUPS } from '../../types';\n// ============================================================\n// Stores\n// ============================================================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ThemePanel',\n    setup(__props) {\n        const themeStore = useThemeStore();\n        const configStore = useConfigStore();\n        // ============================================================\n        //  Store \n        // ============================================================\n        //  Pinia  getter \n        function getPresetList() {\n            return themeStore.presets || [];\n        }\n        function getActivePresetId() {\n            return themeStore.activePresetId;\n        }\n        function setActivePresetId(id) {\n            themeStore.activePresetId = id;\n        }\n        function getCurrentThemeVars() {\n            return themeStore.currentThemeVars || {};\n        }\n        function getCurrentHighlight() {\n            return themeStore.currentHighlight;\n        }\n        function getCustomCSS() {\n            return themeStore.customCSS || '';\n        }\n        // ============================================================\n        // State\n        // ============================================================\n        /**  */\n        const manualColorHex = ref('#d35400');\n        const aiColorHex = ref('#3498db');\n        const titleColorHex = ref('#d35400');\n        /**  */\n        const selectedTheme = ref('retro');\n        /**  */\n        const expandedGroups = ref([]);\n        /**  */\n        const isDropdownOpen = ref(false);\n        /**  */\n        const newPresetName = ref('');\n        /**  */\n        const showSaveDialog = ref(false);\n        /**  CSS  */\n        const customCSSText = ref('');\n        /**  */\n        const fileInputRef = ref();\n        /**  */\n        const presetNameInputRef = ref();\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const selectedPresetName = computed(() => {\n            const activeId = getActivePresetId();\n            if (!activeId)\n                return '';\n            const preset = getPresetList().find(p => p.id === activeId);\n            return preset?.name || '';\n        });\n        // ============================================================\n        // \n        // ============================================================\n        onMounted(() => {\n            // \n            themeStore.loadFromStorage();\n            // \n            syncColorInputs();\n            // \n            selectedTheme.value = configStore.config.theme || 'retro';\n            //  CSS\n            customCSSText.value = getCustomCSS();\n            // \n            document.addEventListener('click', handleOutsideClick);\n        });\n        onUnmounted(() => {\n            document.removeEventListener('click', handleOutsideClick);\n        });\n        //  store \n        watch(() => getCurrentHighlight(), () => syncColorInputs(), { deep: true });\n        watch(() => configStore.config.theme, newTheme => {\n            selectedTheme.value = newTheme || 'retro';\n        });\n        // ============================================================\n        // \n        // ============================================================\n        function syncColorInputs() {\n            manualColorHex.value = themeStore.manualHighlightColor;\n            aiColorHex.value = themeStore.aiHighlightColor;\n            titleColorHex.value = themeStore.titleColor;\n        }\n        function handleOutsideClick(e) {\n            const target = e.target;\n            if (!target.closest('.acu-preset-dropdown')) {\n                isDropdownOpen.value = false;\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function toggleDropdown() {\n            isDropdownOpen.value = !isDropdownOpen.value;\n        }\n        function selectDefaultPreset() {\n            setActivePresetId(null);\n            // \n            themeStore.clearThemeVars();\n            syncColorInputs();\n            customCSSText.value = '';\n            themeStore.clearCustomCSS();\n            isDropdownOpen.value = false;\n            if (window.toastr) {\n                window.toastr.success('');\n            }\n        }\n        function selectPreset(presetId) {\n            themeStore.applyPreset(presetId);\n            syncColorInputs();\n            customCSSText.value = getCustomCSS();\n            selectedTheme.value = configStore.config.theme || 'retro';\n            isDropdownOpen.value = false;\n            if (window.toastr) {\n                window.toastr.success('');\n            }\n        }\n        function confirmDeletePreset(presetId) {\n            const preset = getPresetList().find(p => p.id === presetId);\n            if (!preset)\n                return;\n            if (confirm(`${preset.name}`)) {\n                themeStore.deletePreset(presetId);\n                if (window.toastr) {\n                    window.toastr.info('');\n                }\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function openSaveDialog() {\n            showSaveDialog.value = true;\n            newPresetName.value = '';\n            nextTick(() => {\n                presetNameInputRef.value?.focus();\n            });\n        }\n        function closeSaveDialog() {\n            showSaveDialog.value = false;\n            newPresetName.value = '';\n        }\n        function confirmSavePreset() {\n            const name = newPresetName.value.trim();\n            if (!name)\n                return;\n            themeStore.saveCurrentToPreset(name);\n            closeSaveDialog();\n            if (window.toastr) {\n                window.toastr.success(`${name}`);\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function onThemeChange() {\n            configStore.setTheme(selectedTheme.value);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function onManualColorChange() {\n            themeStore.setManualHighlightColor('custom', manualColorHex.value);\n        }\n        function onAiColorChange() {\n            themeStore.setAiHighlightColor('custom', aiColorHex.value);\n        }\n        function onTitleColorChange() {\n            themeStore.setTitleColor('custom', titleColorHex.value);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        function toggleGroup(groupId) {\n            const index = expandedGroups.value.indexOf(groupId);\n            if (index > -1) {\n                expandedGroups.value.splice(index, 1);\n            }\n            else {\n                expandedGroups.value.push(groupId);\n            }\n        }\n        function getGroupModifiedCount(group) {\n            const vars = getCurrentThemeVars();\n            return group.vars.filter(v => vars[v.key]).length;\n        }\n        function hasThemeVar(key) {\n            const vars = getCurrentThemeVars();\n            return !!vars[key];\n        }\n        function getVarValue(key) {\n            const vars = getCurrentThemeVars();\n            return vars[key] || '';\n        }\n        function getVarColorValue(key) {\n            const value = getVarValue(key);\n            //  hex \n            if (value && value.startsWith('#') && (value.length === 4 || value.length === 7)) {\n                return value;\n            }\n            return '#888888'; // \n        }\n        function setVar(key, value) {\n            if (value.trim()) {\n                themeStore.setThemeVar(key, value.trim());\n            }\n            else {\n                themeStore.removeThemeVar(key);\n            }\n        }\n        function resetVar(key) {\n            themeStore.removeThemeVar(key);\n        }\n        // ============================================================\n        //  CSS\n        // ============================================================\n        function saveCSS() {\n            themeStore.setCustomCSS(customCSSText.value);\n        }\n        function clearCSS() {\n            if (confirm(' CSS ')) {\n                customCSSText.value = '';\n                themeStore.clearCustomCSS();\n            }\n        }\n        function exportCSS() {\n            const data = {\n                type: 'acu_theme_config',\n                version: '1.0',\n                timestamp: new Date().toISOString(),\n                theme: selectedTheme.value,\n                highlight: getCurrentHighlight(),\n                themeVars: getCurrentThemeVars(),\n                customCSS: getCustomCSS(),\n            };\n            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n            const url = URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = `acu-theme-${Date.now()}.json`;\n            a.click();\n            URL.revokeObjectURL(url);\n            if (window.toastr) {\n                window.toastr.success('');\n            }\n        }\n        function importCSS() {\n            fileInputRef.value?.click();\n        }\n        function handleFileImport(event) {\n            const file = event.target.files?.[0];\n            if (!file)\n                return;\n            const reader = new FileReader();\n            reader.onload = e => {\n                try {\n                    const content = e.target?.result;\n                    //  JSON\n                    if (file.name.endsWith('.json')) {\n                        const data = JSON.parse(content);\n                        if (data.type === 'acu_theme_config') {\n                            // \n                            if (data.theme) {\n                                selectedTheme.value = data.theme;\n                                configStore.setTheme(data.theme);\n                            }\n                            // \n                            if (data.highlight) {\n                                const highlight = getCurrentHighlight();\n                                highlight.manualColor = data.highlight.manualColor || 'custom';\n                                highlight.manualHex = data.highlight.manualHex;\n                                highlight.aiColor = data.highlight.aiColor || 'custom';\n                                highlight.aiHex = data.highlight.aiHex;\n                                highlight.titleColor = data.highlight.titleColor || 'custom';\n                                highlight.titleHex = data.highlight.titleHex;\n                            }\n                            if (data.themeVars) {\n                                const vars = getCurrentThemeVars();\n                                Object.assign(vars, data.themeVars);\n                            }\n                            if (data.customCSS) {\n                                customCSSText.value = data.customCSS;\n                                themeStore.setCustomCSS(data.customCSS);\n                            }\n                            syncColorInputs();\n                            if (window.toastr) {\n                                window.toastr.success('');\n                            }\n                        }\n                        else {\n                            throw new Error('');\n                        }\n                    }\n                    else {\n                        //  CSS \n                        customCSSText.value = content;\n                        themeStore.setCustomCSS(content);\n                        if (window.toastr) {\n                            window.toastr.success('CSS ');\n                        }\n                    }\n                }\n                catch (err) {\n                    console.error('[ThemePanel] :', err);\n                    if (window.toastr) {\n                        window.toastr.error('');\n                    }\n                }\n            };\n            reader.readAsText(file);\n            //  input\n            event.target.value = '';\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                            _createTextVNode(\"  \"),\n                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", {\n                                class: _normalizeClass([\"acu-preset-dropdown\", { open: isDropdownOpen.value }])\n                            }, [\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-preset-dropdown-btn\",\n                                    onClick: _withModifiers(toggleDropdown, [\"stop\"])\n                                }, [\n                                    _createElementVNode(\"span\", _hoisted_5, _toDisplayString(selectedPresetName.value), 1 /* TEXT */),\n                                    _cache[10] || (_cache[10] = _createElementVNode(\"i\", { class: \"fas fa-chevron-down\" }, null, -1 /* CACHED */))\n                                ]),\n                                _withDirectives(_createElementVNode(\"div\", _hoisted_6, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", {\n                                        class: _normalizeClass([\"acu-preset-option\", { active: !getActivePresetId() }]),\n                                        onClick: _withModifiers(selectDefaultPreset, [\"stop\"])\n                                    }, [...(_cache[11] || (_cache[11] = [\n                                            _createElementVNode(\"span\", { class: \"acu-preset-option-name\" }, \"\", -1 /* CACHED */)\n                                        ]))], 2 /* CLASS */),\n                                    _createCommentVNode(\"  \"),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getPresetList(), (preset) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: preset.id,\n                                            class: _normalizeClass([\"acu-preset-option\", { active: getActivePresetId() === preset.id }]),\n                                            onClick: _withModifiers(($event) => (selectPreset(preset.id)), [\"stop\"])\n                                        }, [\n                                            _createElementVNode(\"span\", _hoisted_8, _toDisplayString(preset.name), 1 /* TEXT */),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-preset-delete-btn\",\n                                                title: \"\",\n                                                onClick: _withModifiers(($event) => (confirmDeletePreset(preset.id)), [\"stop\"])\n                                            }, [...(_cache[12] || (_cache[12] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                                ]))], 8 /* PROPS */, _hoisted_9)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_7));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ], 512 /* NEED_PATCH */), [\n                                    [_vShow, isDropdownOpen.value]\n                                ])\n                            ], 2 /* CLASS */),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-btn acu-btn-primary acu-btn-save\",\n                                onClick: _withModifiers(openSaveDialog, [\"stop\"])\n                            }, [...(_cache[13] || (_cache[13] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-save\" }, null, -1 /* CACHED */),\n                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                ]))])\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_10, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_11, [\n                        _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-palette\" }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_12, [\n                            _createElementVNode(\"div\", _hoisted_13, [\n                                _cache[15] || (_cache[15] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                    _createTextVNode(\"  \"),\n                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_14, [\n                                    _withDirectives(_createElementVNode(\"select\", {\n                                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((selectedTheme).value = $event)),\n                                        class: \"acu-select\",\n                                        onChange: onThemeChange\n                                    }, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(THEMES), (theme) => {\n                                            return (_openBlock(), _createElementBlock(\"option\", {\n                                                key: theme.id,\n                                                value: theme.id\n                                            }, _toDisplayString(theme.name), 9 /* TEXT, PROPS */, _hoisted_15));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelSelect, selectedTheme.value]\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_16, [\n                        _cache[20] || (_cache[20] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-highlighter\" }),\n                            _createTextVNode(\"  \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_17, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_18, [\n                                _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                    _createTextVNode(\"  \"),\n                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_19, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((manualColorHex).value = $event)),\n                                        type: \"text\",\n                                        class: \"acu-color-input\",\n                                        placeholder: \"#RRGGBB\",\n                                        onChange: onManualColorChange\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, manualColorHex.value]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((manualColorHex).value = $event)),\n                                        type: \"color\",\n                                        class: \"acu-color-swatch\",\n                                        onChange: onManualColorChange\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, manualColorHex.value]\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\" AI  \"),\n                            _createElementVNode(\"div\", _hoisted_20, [\n                                _cache[18] || (_cache[18] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                    _createTextVNode(\" AI  \"),\n                                    _createElementVNode(\"span\", { class: \"hint\" }, \"AI \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_21, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((aiColorHex).value = $event)),\n                                        type: \"text\",\n                                        class: \"acu-color-input\",\n                                        placeholder: \"#RRGGBB\",\n                                        onChange: onAiColorChange\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, aiColorHex.value]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((aiColorHex).value = $event)),\n                                        type: \"color\",\n                                        class: \"acu-color-swatch\",\n                                        onChange: onAiColorChange\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, aiColorHex.value]\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_22, [\n                                _cache[19] || (_cache[19] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                    _createTextVNode(\"  \"),\n                                    _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_23, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((titleColorHex).value = $event)),\n                                        type: \"text\",\n                                        class: \"acu-color-input\",\n                                        placeholder: \"#RRGGBB\",\n                                        onChange: onTitleColorChange\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, titleColorHex.value]\n                                    ]),\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((titleColorHex).value = $event)),\n                                        type: \"color\",\n                                        class: \"acu-color-swatch\",\n                                        onChange: onTitleColorChange\n                                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                        [_vModelText, titleColorHex.value]\n                                    ])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_24, [\n                        _cache[22] || (_cache[22] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-paint-brush\" }),\n                            _createTextVNode(\"  \"),\n                            _createElementVNode(\"span\", {\n                                class: \"hint\",\n                                style: { \"margin-left\": \"auto\", \"font-weight\": \"normal\" }\n                            }, \" CSS \")\n                        ], -1 /* CACHED */)),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_25, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(THEME_VAR_GROUPS), (group, index) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: group.id,\n                                    class: _normalizeClass([\"acu-var-group\", { first: index === 0, last: index === _unref(THEME_VAR_GROUPS).length - 1 }])\n                                }, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"acu-var-group-header\",\n                                        onClick: _withModifiers(($event) => (toggleGroup(group.id)), [\"stop\"])\n                                    }, [\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(['fas', group.icon])\n                                        }, null, 2 /* CLASS */),\n                                        _createElementVNode(\"span\", null, _toDisplayString(group.name), 1 /* TEXT */),\n                                        _createElementVNode(\"span\", _hoisted_27, _toDisplayString(getGroupModifiedCount(group)) + \"/\" + _toDisplayString(group.vars.length), 1 /* TEXT */),\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(['fas', expandedGroups.value.includes(group.id) ? 'fa-chevron-up' : 'fa-chevron-down'])\n                                        }, null, 2 /* CLASS */)\n                                    ], 8 /* PROPS */, _hoisted_26),\n                                    _withDirectives(_createElementVNode(\"div\", _hoisted_28, [\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(group.vars, (v) => {\n                                            return (_openBlock(), _createElementBlock(\"div\", {\n                                                key: v.key,\n                                                class: \"acu-var-row\"\n                                            }, [\n                                                _createElementVNode(\"div\", _hoisted_29, _toDisplayString(v.label), 1 /* TEXT */),\n                                                _createElementVNode(\"div\", _hoisted_30, [\n                                                    (hasThemeVar(v.key))\n                                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                                            key: 0,\n                                                            class: \"acu-var-reset\",\n                                                            title: \"\",\n                                                            onClick: _withModifiers(($event) => (resetVar(v.key)), [\"stop\"])\n                                                        }, [...(_cache[21] || (_cache[21] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */)\n                                                            ]))], 8 /* PROPS */, _hoisted_31))\n                                                        : _createCommentVNode(\"v-if\", true),\n                                                    _createElementVNode(\"input\", {\n                                                        value: getVarValue(v.key),\n                                                        type: \"text\",\n                                                        class: \"acu-color-input\",\n                                                        placeholder: \"\",\n                                                        onChange: e => setVar(v.key, e.target.value)\n                                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_32),\n                                                    _createElementVNode(\"input\", {\n                                                        value: getVarColorValue(v.key),\n                                                        type: \"color\",\n                                                        class: \"acu-color-swatch\",\n                                                        onChange: e => setVar(v.key, e.target.value)\n                                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_33)\n                                                ])\n                                            ]));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ], 512 /* NEED_PATCH */), [\n                                        [_vShow, expandedGroups.value.includes(group.id)]\n                                    ])\n                                ], 2 /* CLASS */));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ])\n                    ]),\n                    _createCommentVNode(\"  CSS \"),\n                    _createElementVNode(\"div\", _hoisted_34, [\n                        _cache[28] || (_cache[28] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fas fa-code\" }),\n                            _createTextVNode(\"  CSS \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_35, [\n                            _createElementVNode(\"div\", _hoisted_36, [\n                                _createElementVNode(\"div\", _hoisted_37, [\n                                    _cache[23] || (_cache[23] = _createTextVNode(\" CSS  \", -1 /* CACHED */)),\n                                    _createElementVNode(\"span\", _hoisted_38, _toDisplayString(customCSSText.value.length) + \" \", 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_39, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-tool-btn\",\n                                        onClick: _withModifiers(exportCSS, [\"stop\"])\n                                    }, [...(_cache[24] || (_cache[24] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-download\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-tool-btn\",\n                                        onClick: _withModifiers(importCSS, [\"stop\"])\n                                    }, [...(_cache[25] || (_cache[25] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-upload\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-tool-btn acu-btn-danger\",\n                                        onClick: _withModifiers(clearCSS, [\"stop\"])\n                                    }, [...(_cache[26] || (_cache[26] = [\n                                            _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */),\n                                            _createTextVNode(\"  \", -1 /* CACHED */)\n                                        ]))])\n                                ])\n                            ]),\n                            _cache[27] || (_cache[27] = _createElementVNode(\"div\", { class: \"acu-css-hint\" }, [\n                                _createElementVNode(\"p\", null, \"\"),\n                                _createElementVNode(\"code\", null, \".acu-wrapper\"),\n                                _createTextVNode(),\n                                _createElementVNode(\"code\", null, \".acu-floating-ball\"),\n                                _createTextVNode(),\n                                _createElementVNode(\"code\", null, \".acu-main-panel\"),\n                                _createElementVNode(\"code\", null, \".acu-modal\"),\n                                _createTextVNode(),\n                                _createElementVNode(\"code\", null, \".acu-tab-bar\"),\n                                _createTextVNode(),\n                                _createElementVNode(\"code\", null, \".acu-data-card\")\n                            ], -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"textarea\", {\n                                \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => ((customCSSText).value = $event)),\n                                class: \"acu-css-editor\",\n                                placeholder: \"/*  CSS */\",\n                                rows: \"8\",\n                                onChange: saveCSS\n                            }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                [_vModelText, customCSSText.value]\n                            ])\n                        ])\n                    ])\n                ]),\n                _createCommentVNode(\"  \"),\n                (showSaveDialog.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 0,\n                        class: \"acu-preset-save-modal\",\n                        onClick: _withModifiers(closeSaveDialog, [\"stop\"])\n                    }, [\n                        _createElementVNode(\"div\", {\n                            class: \"acu-preset-save-dialog\",\n                            onClick: _cache[9] || (_cache[9] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _cache[29] || (_cache[29] = _createElementVNode(\"div\", { class: \"dialog-title\" }, \"\", -1 /* CACHED */)),\n                            _withDirectives(_createElementVNode(\"input\", {\n                                ref_key: \"presetNameInputRef\",\n                                ref: presetNameInputRef,\n                                \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event) => ((newPresetName).value = $event)),\n                                type: \"text\",\n                                class: \"dialog-input\",\n                                placeholder: \"...\",\n                                onKeyup: _withKeys(confirmSavePreset, [\"enter\"])\n                            }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                [_vModelText, newPresetName.value]\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_40, [\n                                _createElementVNode(\"button\", {\n                                    class: \"btn-cancel\",\n                                    onClick: _withModifiers(closeSaveDialog, [\"stop\"])\n                                }, \"\"),\n                                _createElementVNode(\"button\", {\n                                    class: \"btn-confirm\",\n                                    disabled: !newPresetName.value.trim(),\n                                    onClick: _withModifiers(confirmSavePreset, [\"stop\"])\n                                }, \"\", 8 /* PROPS */, _hoisted_41)\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"input\", {\n                    ref_key: \"fileInputRef\",\n                    ref: fileInputRef,\n                    type: \"file\",\n                    accept: \".json,.css,.txt\",\n                    style: { \"display\": \"none\" },\n                    onChange: handleFileImport\n                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ThemePanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ThemePanel.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, normalizeClass as _normalizeClass, unref as _unref, createVNode as _createVNode, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal-title\" };\nconst _hoisted_2 = { class: \"acu-modal-body\" };\nconst _hoisted_3 = { class: \"acu-settings-section\" };\nconst _hoisted_4 = { class: \"acu-settings-group\" };\nconst _hoisted_5 = { class: \"acu-settings-row\" };\nconst _hoisted_6 = { class: \"acu-settings-control acu-font-control\" };\nconst _hoisted_7 = [\"value\"];\nconst _hoisted_8 = { class: \"acu-settings-row\" };\nconst _hoisted_9 = { class: \"acu-settings-control\" };\nconst _hoisted_10 = { class: \"acu-settings-row\" };\nconst _hoisted_11 = { class: \"acu-settings-label\" };\nconst _hoisted_12 = { class: \"hint\" };\nconst _hoisted_13 = { class: \"acu-settings-control\" };\nconst _hoisted_14 = { class: \"acu-settings-row\" };\nconst _hoisted_15 = { class: \"acu-settings-label\" };\nconst _hoisted_16 = { class: \"hint\" };\nconst _hoisted_17 = { class: \"acu-settings-control\" };\nconst _hoisted_18 = { class: \"acu-settings-row\" };\nconst _hoisted_19 = { class: \"acu-settings-label\" };\nconst _hoisted_20 = { class: \"hint\" };\nconst _hoisted_21 = { class: \"acu-settings-control\" };\nconst _hoisted_22 = { class: \"acu-settings-row\" };\nconst _hoisted_23 = { class: \"acu-settings-label\" };\nconst _hoisted_24 = { class: \"hint\" };\nconst _hoisted_25 = { class: \"acu-settings-control\" };\nconst _hoisted_26 = { class: \"acu-settings-section\" };\nconst _hoisted_27 = { class: \"acu-settings-group\" };\nconst _hoisted_28 = { class: \"acu-settings-section\" };\nconst _hoisted_29 = { class: \"acu-settings-group\" };\nconst _hoisted_30 = { class: \"acu-settings-row\" };\nconst _hoisted_31 = { class: \"acu-settings-control\" };\nconst _hoisted_32 = { class: \"acu-settings-row\" };\nconst _hoisted_33 = { class: \"acu-settings-control\" };\nconst _hoisted_34 = { class: \"acu-settings-row\" };\nconst _hoisted_35 = { class: \"acu-settings-control\" };\nconst _hoisted_36 = { class: \"acu-settings-row\" };\nconst _hoisted_37 = { class: \"acu-settings-control\" };\nconst _hoisted_38 = { class: \"acu-settings-row\" };\nconst _hoisted_39 = { class: \"acu-settings-control\" };\nconst _hoisted_40 = {\n    key: 0,\n    class: \"acu-settings-row\"\n};\nconst _hoisted_41 = { class: \"acu-settings-label\" };\nconst _hoisted_42 = { class: \"hint\" };\nconst _hoisted_43 = { class: \"acu-settings-control\" };\nconst _hoisted_44 = { class: \"acu-settings-section\" };\nconst _hoisted_45 = { class: \"acu-settings-group\" };\nconst _hoisted_46 = { class: \"acu-settings-row\" };\nconst _hoisted_47 = { class: \"acu-settings-control\" };\nconst _hoisted_48 = { class: \"acu-mini-dialog-header\" };\nconst _hoisted_49 = { class: \"acu-mini-dialog-body\" };\nconst _hoisted_50 = { class: \"acu-font-form\" };\nconst _hoisted_51 = { class: \"acu-form-row\" };\nconst _hoisted_52 = { class: \"acu-form-row\" };\nconst _hoisted_53 = { class: \"acu-mini-dialog-footer\" };\nconst _hoisted_54 = [\"disabled\"];\nimport { onClickOutside } from '@vueuse/core';\nimport { computed, reactive, ref, watch } from 'vue';\nimport { useCellLock } from '../../composables';\nimport { useBallAppearanceStore, useConfigStore } from '../../stores/useConfigStore';\nimport { useUIStore } from '../../stores/useUIStore';\nimport BallAppearancePanel from '../settings/BallAppearancePanel.vue';\nimport NavButtonConfigPanel from '../settings/NavButtonConfigPanel.vue';\nimport TabConfigPanel from '../settings/TabConfigPanel.vue';\nimport ThemePanel from '../settings/ThemePanel.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SettingsDialog',\n    props: {\n        visible: { type: Boolean }\n    },\n    emits: [\"update:visible\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs & State\n        // ============================================================\n        const dialogRef = ref();\n        const headerRef = ref();\n        const configStore = useConfigStore();\n        const ballStore = useBallAppearanceStore();\n        const uiStore = useUIStore();\n        const cellLock = useCellLock();\n        // \n        const showAddFontDialog = ref(false);\n        const newFontName = ref('');\n        const newFontUrl = ref('');\n        /**  */\n        const currentPanel = ref('main');\n        //  - \n        const localConfig = reactive({ ...configStore.config });\n        //  store\n        watch(localConfig, newConfig => {\n            configStore.updateConfig(newConfig);\n        }, { deep: true });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const panelTitle = computed(() => {\n            switch (currentPanel.value) {\n                case 'tabConfig':\n                    return '';\n                case 'buttonConfig':\n                    return '';\n                case 'ballAppearance':\n                    return '';\n                case 'themeConfig':\n                    return '';\n                default:\n                    return '';\n            }\n        });\n        /**  */\n        const panelIcon = computed(() => {\n            switch (currentPanel.value) {\n                case 'tabConfig':\n                    return 'fas fa-table';\n                case 'buttonConfig':\n                    return 'fas fa-ellipsis-h';\n                case 'ballAppearance':\n                    return 'fas fa-circle';\n                case 'themeConfig':\n                    return 'fas fa-palette';\n                default:\n                    return 'fas fa-cog';\n            }\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const goToPanel = (panel) => {\n            currentPanel.value = panel;\n        };\n        /**  */\n        const goBack = () => {\n            currentPanel.value = 'main';\n        };\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const handleEnterLockMode = () => {\n            // \n            cellLock.initPendingLocks();\n            // \n            uiStore.isLockEditMode = true;\n            // \n            emit('update:visible', false);\n        };\n        // ============================================================\n        //  & \n        // ============================================================\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                Object.assign(localConfig, configStore.config);\n                currentPanel.value = 'main'; // \n            }\n        });\n        // \n        onClickOutside(dialogRef, () => {\n            handleCancel();\n        });\n        // ============================================================\n        // \n        // ============================================================\n        // \n        const handleClose = () => {\n            emit('update:visible', false);\n        };\n        // \n        const handleCancel = () => {\n            emit('update:visible', false);\n        };\n        // ============================================================\n        // \n        // ============================================================\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const allFonts = computed(() => ballStore.allFonts);\n        /**  */\n        const canAddFont = computed(() => {\n            return newFontName.value.trim() && newFontUrl.value.trim();\n        });\n        /**  */\n        const handleAddFont = () => {\n            if (!canAddFont.value)\n                return;\n            const fontName = newFontName.value.trim();\n            //  CSS font-family  fallback\n            const fontFamily = `'${fontName}', sans-serif`;\n            ballStore.addFont({\n                name: fontName,\n                fontFamily: fontFamily,\n                importUrl: newFontUrl.value.trim(),\n            });\n            // \n            newFontName.value = '';\n            newFontUrl.value = '';\n            showAddFontDialog.value = false;\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"modal\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-modal-container\",\n                            onClick: _withModifiers(handleCancel, [\"self\"])\n                        }, [\n                            _createElementVNode(\"div\", {\n                                ref_key: \"dialogRef\",\n                                ref: dialogRef,\n                                class: \"acu-modal acu-settings-modal\"\n                            }, [\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", {\n                                    ref_key: \"headerRef\",\n                                    ref: headerRef,\n                                    class: \"acu-modal-header\"\n                                }, [\n                                    _createCommentVNode(\"  \"),\n                                    (currentPanel.value !== 'main')\n                                        ? (_openBlock(), _createElementBlock(\"button\", {\n                                            key: 0,\n                                            class: \"acu-modal-back\",\n                                            onClick: _withModifiers(goBack, [\"stop\"])\n                                        }, [...(_cache[24] || (_cache[24] = [\n                                                _createElementVNode(\"i\", { class: \"fas fa-arrow-left\" }, null, -1 /* CACHED */)\n                                            ]))]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createElementVNode(\"span\", _hoisted_1, _toDisplayString(panelTitle.value), 1 /* TEXT */),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-close-pill\",\n                                        onClick: _withModifiers(handleClose, [\"stop\"])\n                                    }, \"\")\n                                ], 512 /* NEED_PATCH */),\n                                _createCommentVNode(\"  \"),\n                                _createElementVNode(\"div\", _hoisted_2, [\n                                    _createCommentVNode(\" ============  ============ \"),\n                                    (currentPanel.value === 'main')\n                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                            _createCommentVNode(\" \"),\n                                            _createElementVNode(\"div\", _hoisted_3, [\n                                                _cache[33] || (_cache[33] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-palette\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_4, [\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_5, [\n                                                        _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_6, [\n                                                            _withDirectives(_createElementVNode(\"select\", {\n                                                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localConfig.fontFamily) = $event))\n                                                            }, [\n                                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(allFonts.value, (font) => {\n                                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                                        key: font.id,\n                                                                        value: font.id\n                                                                    }, _toDisplayString(font.name), 9 /* TEXT, PROPS */, _hoisted_7));\n                                                                }), 128 /* KEYED_FRAGMENT */))\n                                                            ], 512 /* NEED_PATCH */), [\n                                                                [_vModelSelect, localConfig.fontFamily]\n                                                            ]),\n                                                            _createElementVNode(\"button\", {\n                                                                class: \"acu-add-font-btn\",\n                                                                title: \"\",\n                                                                onClick: _cache[1] || (_cache[1] = _withModifiers(($event) => (showAddFontDialog.value = true), [\"stop\"]))\n                                                            }, [...(_cache[25] || (_cache[25] = [\n                                                                    _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                                                                ]))])\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_8, [\n                                                        _cache[28] || (_cache[28] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_9, [\n                                                            _withDirectives(_createElementVNode(\"select\", {\n                                                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((localConfig.layout) = $event))\n                                                            }, [...(_cache[27] || (_cache[27] = [\n                                                                    _createElementVNode(\"option\", { value: \"vertical\" }, \"\", -1 /* CACHED */),\n                                                                    _createElementVNode(\"option\", { value: \"horizontal\" }, \"\", -1 /* CACHED */)\n                                                                ]))], 512 /* NEED_PATCH */), [\n                                                                [_vModelSelect, localConfig.layout]\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_10, [\n                                                        _createElementVNode(\"div\", _hoisted_11, [\n                                                            _cache[29] || (_cache[29] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_12, _toDisplayString(localConfig.fontSize) + \"px\", 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_13, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((localConfig.fontSize) = $event)),\n                                                                type: \"range\",\n                                                                min: \"12\",\n                                                                max: \"18\",\n                                                                step: \"1\"\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [\n                                                                    _vModelText,\n                                                                    localConfig.fontSize,\n                                                                    void 0,\n                                                                    { number: true }\n                                                                ]\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_14, [\n                                                        _createElementVNode(\"div\", _hoisted_15, [\n                                                            _cache[30] || (_cache[30] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_16, _toDisplayString(localConfig.cardWidth) + \"px\", 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_17, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((localConfig.cardWidth) = $event)),\n                                                                type: \"range\",\n                                                                min: \"200\",\n                                                                max: \"400\",\n                                                                step: \"10\"\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [\n                                                                    _vModelText,\n                                                                    localConfig.cardWidth,\n                                                                    void 0,\n                                                                    { number: true }\n                                                                ]\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_18, [\n                                                        _createElementVNode(\"div\", _hoisted_19, [\n                                                            _cache[31] || (_cache[31] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_20, _toDisplayString(localConfig.gridColumns === 0 ? '' : `${localConfig.gridColumns} `), 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_21, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((localConfig.gridColumns) = $event)),\n                                                                type: \"range\",\n                                                                min: \"0\",\n                                                                max: \"6\",\n                                                                step: \"1\"\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [\n                                                                    _vModelText,\n                                                                    localConfig.gridColumns,\n                                                                    void 0,\n                                                                    { number: true }\n                                                                ]\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_22, [\n                                                        _createElementVNode(\"div\", _hoisted_23, [\n                                                            _cache[32] || (_cache[32] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                            _createElementVNode(\"span\", _hoisted_24, _toDisplayString(localConfig.itemsPerPage) + \" \", 1 /* TEXT */)\n                                                        ]),\n                                                        _createElementVNode(\"div\", _hoisted_25, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((localConfig.itemsPerPage) = $event)),\n                                                                type: \"range\",\n                                                                min: \"10\",\n                                                                max: \"100\",\n                                                                step: \"10\"\n                                                            }, null, 512 /* NEED_PATCH */), [\n                                                                [\n                                                                    _vModelText,\n                                                                    localConfig.itemsPerPage,\n                                                                    void 0,\n                                                                    { number: true }\n                                                                ]\n                                                            ])\n                                                        ])\n                                                    ])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\" \"),\n                                            _createElementVNode(\"div\", _hoisted_26, [\n                                                _cache[38] || (_cache[38] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-columns\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_27, [\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"acu-settings-row acu-nav-row\",\n                                                        onClick: _cache[7] || (_cache[7] = ($event) => (goToPanel('tabConfig')))\n                                                    }, [...(_cache[34] || (_cache[34] = [\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                                _createTextVNode(\"  \"),\n                                                                _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                                            ], -1 /* CACHED */)\n                                                        ]))]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"acu-settings-row acu-nav-row\",\n                                                        onClick: _cache[8] || (_cache[8] = ($event) => (goToPanel('buttonConfig')))\n                                                    }, [...(_cache[35] || (_cache[35] = [\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                                _createTextVNode(\"  \"),\n                                                                _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                                            ], -1 /* CACHED */)\n                                                        ]))]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"acu-settings-row acu-nav-row\",\n                                                        onClick: _cache[9] || (_cache[9] = ($event) => (goToPanel('ballAppearance')))\n                                                    }, [...(_cache[36] || (_cache[36] = [\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                                _createTextVNode(\"  \"),\n                                                                _createElementVNode(\"span\", { class: \"hint\" }, \"AI\")\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                                            ], -1 /* CACHED */)\n                                                        ]))]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"acu-settings-row acu-nav-row\",\n                                                        onClick: _cache[10] || (_cache[10] = ($event) => (goToPanel('themeConfig')))\n                                                    }, [...(_cache[37] || (_cache[37] = [\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                                _createTextVNode(\"  \"),\n                                                                _createElementVNode(\"span\", { class: \"hint\" }, \"CSS\")\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                                            ], -1 /* CACHED */)\n                                                        ]))])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_28, [\n                                                _cache[46] || (_cache[46] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-sliders-h\" }),\n                                                    _createTextVNode(\"  \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_29, [\n                                                    _createCommentVNode(\"  () \"),\n                                                    _createElementVNode(\"div\", _hoisted_30, [\n                                                        _cache[39] || (_cache[39] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_31, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-switch\", { active: localConfig.showPagination }]),\n                                                                onClick: _cache[11] || (_cache[11] = ($event) => (localConfig.showPagination = !localConfig.showPagination))\n                                                            }, null, 2 /* CLASS */)\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_32, [\n                                                        _cache[40] || (_cache[40] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_33, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-switch\", { active: localConfig.limitLongText }]),\n                                                                onClick: _cache[12] || (_cache[12] = ($event) => (localConfig.limitLongText = !localConfig.limitLongText))\n                                                            }, null, 2 /* CLASS */)\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_34, [\n                                                        _cache[41] || (_cache[41] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_35, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-switch\", { active: localConfig.lockPanel }]),\n                                                                onClick: _cache[13] || (_cache[13] = ($event) => (localConfig.lockPanel = !localConfig.lockPanel))\n                                                            }, null, 2 /* CLASS */)\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", _hoisted_36, [\n                                                        _cache[42] || (_cache[42] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\"  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_37, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-switch\", { active: localConfig.purgeConfirmation }]),\n                                                                onClick: _cache[14] || (_cache[14] = ($event) => (localConfig.purgeConfirmation = !localConfig.purgeConfirmation))\n                                                            }, null, 2 /* CLASS */)\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\" Tab \"),\n                                                    _createElementVNode(\"div\", _hoisted_38, [\n                                                        _cache[43] || (_cache[43] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\" Tab \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \"Tab\")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_39, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-switch\", { active: localConfig.collapseTabBar }]),\n                                                                onClick: _cache[15] || (_cache[15] = ($event) => (localConfig.collapseTabBar = !localConfig.collapseTabBar))\n                                                            }, null, 2 /* CLASS */)\n                                                        ])\n                                                    ]),\n                                                    _createCommentVNode(\"  \"),\n                                                    (_unref(uiStore).isMobile)\n                                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_40, [\n                                                            _createElementVNode(\"div\", _hoisted_41, [\n                                                                _cache[44] || (_cache[44] = _createTextVNode(\"  \", -1 /* CACHED */)),\n                                                                _createElementVNode(\"span\", _hoisted_42, _toDisplayString(localConfig.mobileSafeAreaBottom ?? 50) + \"px\", 1 /* TEXT */)\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_43, [\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event) => ((localConfig.mobileSafeAreaBottom) = $event)),\n                                                                    type: \"range\",\n                                                                    min: \"0\",\n                                                                    max: \"150\",\n                                                                    step: \"10\"\n                                                                }, null, 512 /* NEED_PATCH */), [\n                                                                    [\n                                                                        _vModelText,\n                                                                        localConfig.mobileSafeAreaBottom,\n                                                                        void 0,\n                                                                        { number: true }\n                                                                    ]\n                                                                ])\n                                                            ])\n                                                        ]))\n                                                        : _createCommentVNode(\"v-if\", true),\n                                                    _createCommentVNode(\"  \"),\n                                                    _createElementVNode(\"div\", {\n                                                        class: \"acu-settings-row acu-nav-row\",\n                                                        onClick: handleEnterLockMode\n                                                    }, [...(_cache[45] || (_cache[45] = [\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                                _createTextVNode(\"  \"),\n                                                                _createElementVNode(\"span\", { class: \"hint\" }, \" AI \")\n                                                            ], -1 /* CACHED */),\n                                                            _createElementVNode(\"div\", { class: \"acu-settings-control\" }, [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-chevron-right\" })\n                                                            ], -1 /* CACHED */)\n                                                        ]))])\n                                                ])\n                                            ]),\n                                            _createCommentVNode(\" Swipe  \"),\n                                            _createElementVNode(\"div\", _hoisted_44, [\n                                                _cache[48] || (_cache[48] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-hand-pointer\" }),\n                                                    _createTextVNode(\" Swipe  \")\n                                                ], -1 /* CACHED */)),\n                                                _createElementVNode(\"div\", _hoisted_45, [\n                                                    _createCommentVNode(\" Swipe  \"),\n                                                    _createElementVNode(\"div\", _hoisted_46, [\n                                                        _cache[47] || (_cache[47] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                                            _createTextVNode(\" Swipe  \"),\n                                                            _createElementVNode(\"span\", { class: \"hint\" }, \" roll \")\n                                                        ], -1 /* CACHED */)),\n                                                        _createElementVNode(\"div\", _hoisted_47, [\n                                                            _createElementVNode(\"button\", {\n                                                                class: _normalizeClass([\"acu-switch\", { active: localConfig.clearTableOnSwipe }]),\n                                                                onClick: _cache[17] || (_cache[17] = ($event) => (localConfig.clearTableOnSwipe = !localConfig.clearTableOnSwipe))\n                                                            }, null, 2 /* CLASS */)\n                                                        ])\n                                                    ])\n                                                ])\n                                            ])\n                                        ], 64 /* STABLE_FRAGMENT */))\n                                        : (currentPanel.value === 'tabConfig')\n                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                _createCommentVNode(\" ============ Tab  ============ \"),\n                                                _createVNode(TabConfigPanel)\n                                            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                            : (currentPanel.value === 'buttonConfig')\n                                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                                    _createCommentVNode(\" ============  ============ \"),\n                                                    _createVNode(NavButtonConfigPanel)\n                                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                                : (currentPanel.value === 'ballAppearance')\n                                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n                                                        _createCommentVNode(\" ============  ============ \"),\n                                                        _createVNode(BallAppearancePanel)\n                                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                                    : (currentPanel.value === 'themeConfig')\n                                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 4 }, [\n                                                            _createCommentVNode(\" ============  ============ \"),\n                                                            _createVNode(ThemePanel)\n                                                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                                        : _createCommentVNode(\"v-if\", true)\n                                ]),\n                                _createCommentVNode(\" ============  Teleport ============ \"),\n                                _createVNode(_Transition, { name: \"modal\" }, {\n                                    default: _withCtx(() => [\n                                        (showAddFontDialog.value)\n                                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                                key: 0,\n                                                class: \"acu-font-dialog-overlay\",\n                                                onClick: _cache[23] || (_cache[23] = _withModifiers(($event) => (showAddFontDialog.value = false), [\"self\"]))\n                                            }, [\n                                                _createElementVNode(\"div\", {\n                                                    class: \"acu-mini-dialog acu-add-font-dialog\",\n                                                    onClick: _cache[22] || (_cache[22] = _withModifiers(() => { }, [\"stop\"]))\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_48, [\n                                                        _cache[50] || (_cache[50] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-mini-close\",\n                                                            onClick: _cache[18] || (_cache[18] = _withModifiers(($event) => (showAddFontDialog.value = false), [\"stop\"]))\n                                                        }, [...(_cache[49] || (_cache[49] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                                            ]))])\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_49, [\n                                                        _createElementVNode(\"div\", _hoisted_50, [\n                                                            _createElementVNode(\"div\", _hoisted_51, [\n                                                                _cache[51] || (_cache[51] = _createElementVNode(\"label\", null, \"\", -1 /* CACHED */)),\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event) => ((newFontName).value = $event)),\n                                                                    type: \"text\",\n                                                                    placeholder: \"\"\n                                                                }, null, 512 /* NEED_PATCH */), [\n                                                                    [_vModelText, newFontName.value]\n                                                                ])\n                                                            ]),\n                                                            _createElementVNode(\"div\", _hoisted_52, [\n                                                                _cache[52] || (_cache[52] = _createElementVNode(\"label\", null, \"\", -1 /* CACHED */)),\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    \"onUpdate:modelValue\": _cache[20] || (_cache[20] = ($event) => ((newFontUrl).value = $event)),\n                                                                    type: \"text\",\n                                                                    placeholder: \"@import URL  CDN \"\n                                                                }, null, 512 /* NEED_PATCH */), [\n                                                                    [_vModelText, newFontUrl.value]\n                                                                ])\n                                                            ])\n                                                        ])\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_53, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-btn-secondary\",\n                                                            onClick: _cache[21] || (_cache[21] = _withModifiers(($event) => (showAddFontDialog.value = false), [\"stop\"]))\n                                                        }, \"\"),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-btn-primary\",\n                                                            disabled: !canAddFont.value,\n                                                            onClick: _withModifiers(handleAddFont, [\"stop\"])\n                                                        }, \"\", 8 /* PROPS */, _hoisted_54)\n                                                    ])\n                                                ])\n                                            ]))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _: 1 /* STABLE */\n                                }),\n                                _createCommentVNode(\"  \"),\n                                _cache[53] || (_cache[53] = _createElementVNode(\"div\", { class: \"acu-bottom-spacer\" }, \" ACU Visualizer 7.1.3 \", -1 /* CACHED */))\n                            ], 512 /* NEED_PATCH */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SettingsDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SettingsDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SettingsDialog.vue?vue&type=style&index=0&id=24569f77&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-24569f77\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = { class: \"acu-modal acu-widget-actions-modal\" };\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-body\" };\nconst _hoisted_4 = { class: \"acu-settings-section\" };\nconst _hoisted_5 = { class: \"acu-settings-group\" };\nconst _hoisted_6 = { class: \"acu-settings-label\" };\nconst _hoisted_7 = { class: \"hint\" };\nconst _hoisted_8 = { class: \"acu-settings-control\" };\nconst _hoisted_9 = { class: \"acu-switch\" };\nconst _hoisted_10 = [\"checked\", \"onChange\"];\nconst _hoisted_11 = { class: \"acu-settings-section\" };\nconst _hoisted_12 = { class: \"acu-settings-title\" };\nconst _hoisted_13 = { class: \"acu-settings-group\" };\nconst _hoisted_14 = {\n    key: 0,\n    class: \"acu-empty-hint\"\n};\nconst _hoisted_15 = {\n    key: 1,\n    class: \"acu-selected-actions-list\"\n};\nconst _hoisted_16 = { class: \"acu-settings-label\" };\nconst _hoisted_17 = { class: \"acu-settings-control\" };\nconst _hoisted_18 = [\"onClick\"];\nimport { computed, ref, watch } from 'vue';\nimport { useDashboardStore } from '../../stores/useDashboardStore';\nimport { WIDGET_ACTIONS } from '../../types';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'WidgetActionsDialog',\n    props: {\n        visible: { type: Boolean },\n        widgetId: {},\n        currentActions: { default: () => [] }\n    },\n    emits: [\"update:visible\", \"close\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const dashboardStore = useDashboardStore();\n        // \n        const selectedActions = ref([]);\n        //  ( settings  goToTable)\n        const availableActions = computed(() => {\n            return Object.values(WIDGET_ACTIONS).filter(action => action.id !== 'settings' && action.id !== 'goToTable');\n        });\n        // \n        watch(() => props.visible, visible => {\n            if (visible) {\n                //  settings  goToTable\n                selectedActions.value = props.currentActions.filter(id => id !== 'settings' && id !== 'goToTable');\n            }\n        }, { immediate: true });\n        // \n        function isActionSelected(actionId) {\n            return selectedActions.value.includes(actionId);\n        }\n        // \n        function toggleAction(actionId) {\n            const index = selectedActions.value.indexOf(actionId);\n            if (index > -1) {\n                selectedActions.value.splice(index, 1);\n            }\n            else {\n                selectedActions.value.push(actionId);\n            }\n        }\n        // \n        function removeAction(actionId) {\n            const index = selectedActions.value.indexOf(actionId);\n            if (index > -1) {\n                selectedActions.value.splice(index, 1);\n            }\n        }\n        // \n        function getActionIcon(actionId) {\n            return WIDGET_ACTIONS[actionId]?.icon || 'fa-question';\n        }\n        // \n        function getActionLabel(actionId) {\n            return WIDGET_ACTIONS[actionId]?.label || actionId;\n        }\n        // \n        function handleClose() {\n            //  store\n            if (props.widgetId) {\n                dashboardStore.updateWidget(props.widgetId, { actions: selectedActions.value });\n            }\n            emit('update:visible', false);\n            emit('close');\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-plus\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-bolt\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_5, [\n                                    _createCommentVNode(\"  -  \"),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableActions.value, (action) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: action.id,\n                                            class: \"acu-settings-row\"\n                                        }, [\n                                            _createElementVNode(\"div\", _hoisted_6, [\n                                                _createElementVNode(\"span\", null, [\n                                                    _createElementVNode(\"i\", {\n                                                        class: _normalizeClass(['fas', action.icon]),\n                                                        style: { \"margin-right\": \"8px\", \"color\": \"var(--acu-title-color)\" }\n                                                    }, null, 2 /* CLASS */),\n                                                    _createTextVNode(\" \" + _toDisplayString(action.label), 1 /* TEXT */)\n                                                ]),\n                                                _createElementVNode(\"span\", _hoisted_7, _toDisplayString(action.tooltip), 1 /* TEXT */)\n                                            ]),\n                                            _createElementVNode(\"div\", _hoisted_8, [\n                                                _createCommentVNode(\"  acu-switch  \"),\n                                                _createElementVNode(\"label\", _hoisted_9, [\n                                                    _createElementVNode(\"input\", {\n                                                        type: \"checkbox\",\n                                                        checked: isActionSelected(action.id),\n                                                        onChange: ($event) => (toggleAction(action.id))\n                                                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_10),\n                                                    _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"slider\" }, null, -1 /* CACHED */))\n                                                ])\n                                            ])\n                                        ]));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_11, [\n                                _createElementVNode(\"div\", _hoisted_12, [\n                                    _cache[3] || (_cache[3] = _createElementVNode(\"i\", { class: \"fas fa-eye\" }, null, -1 /* CACHED */)),\n                                    _createTextVNode(\"  (\" + _toDisplayString(selectedActions.value.length) + \") \", 1 /* TEXT */)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_13, [\n                                    (selectedActions.value.length === 0)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, \"\"))\n                                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(selectedActions.value, (actionId) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: actionId,\n                                                    class: \"acu-settings-row\"\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_16, [\n                                                        _createElementVNode(\"span\", null, [\n                                                            _createElementVNode(\"i\", {\n                                                                class: _normalizeClass(['fas', getActionIcon(actionId)]),\n                                                                style: { \"margin-right\": \"8px\", \"color\": \"var(--acu-title-color)\" }\n                                                            }, null, 2 /* CLASS */),\n                                                            _createTextVNode(\" \" + _toDisplayString(getActionLabel(actionId)), 1 /* TEXT */)\n                                                        ])\n                                                    ]),\n                                                    _createElementVNode(\"div\", _hoisted_17, [\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-icon-btn acu-btn-danger\",\n                                                            onClick: _withModifiers(($event) => (removeAction(actionId)), [\"stop\"]),\n                                                            title: \"\"\n                                                        }, [...(_cache[4] || (_cache[4] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                                            ]))], 8 /* PROPS */, _hoisted_18)\n                                                    ])\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]))\n                                ])\n                            ])\n                        ])\n                    ])\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./WidgetActionsDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WidgetActionsDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, vModelCheckbox as _vModelCheckbox, withKeys as _withKeys, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n    ref: \"dialogRef\",\n    class: \"acu-modal acu-widget-settings-modal\"\n};\nconst _hoisted_2 = { class: \"acu-modal-header\" };\nconst _hoisted_3 = { class: \"acu-modal-body\" };\nconst _hoisted_4 = { class: \"acu-settings-section\" };\nconst _hoisted_5 = { class: \"acu-settings-group\" };\nconst _hoisted_6 = { class: \"acu-settings-row\" };\nconst _hoisted_7 = { class: \"acu-settings-control\" };\nconst _hoisted_8 = [\"value\"];\nconst _hoisted_9 = { class: \"acu-settings-section\" };\nconst _hoisted_10 = { class: \"acu-settings-group\" };\nconst _hoisted_11 = { class: \"acu-settings-row\" };\nconst _hoisted_12 = { class: \"acu-settings-control\" };\nconst _hoisted_13 = [\"value\"];\nconst _hoisted_14 = {\n    key: 0,\n    class: \"acu-selected-tags\"\n};\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = { class: \"acu-settings-section\" };\nconst _hoisted_17 = { class: \"acu-settings-group\" };\nconst _hoisted_18 = { class: \"acu-settings-row\" };\nconst _hoisted_19 = { class: \"acu-settings-control\" };\nconst _hoisted_20 = [\"value\"];\nconst _hoisted_21 = {\n    key: 0,\n    class: \"acu-selected-tags\"\n};\nconst _hoisted_22 = [\"onClick\"];\nconst _hoisted_23 = { class: \"acu-settings-row column\" };\nconst _hoisted_24 = { class: \"acu-preset-control\" };\nconst _hoisted_25 = [\"value\"];\nconst _hoisted_26 = { class: \"acu-settings-row column\" };\nconst _hoisted_27 = { class: \"acu-tag-definitions\" };\nconst _hoisted_28 = { class: \"acu-tag-definition-row\" };\nconst _hoisted_29 = [\"onUpdate:modelValue\"];\nconst _hoisted_30 = { class: \"acu-checkbox-inline\" };\nconst _hoisted_31 = [\"onUpdate:modelValue\"];\nconst _hoisted_32 = [\"onClick\"];\nconst _hoisted_33 = [\"onUpdate:modelValue\"];\nconst _hoisted_34 = { class: \"acu-modal acu-small-modal\" };\nconst _hoisted_35 = { class: \"acu-modal-header\" };\nconst _hoisted_36 = { class: \"acu-modal-body\" };\nconst _hoisted_37 = { class: \"acu-settings-row\" };\nconst _hoisted_38 = { class: \"acu-settings-control\" };\nconst _hoisted_39 = { class: \"acu-modal-actions\" };\nconst _hoisted_40 = [\"disabled\"];\nimport { computed, reactive, ref, watch } from 'vue';\nimport { useDashboardStore } from '../../stores/useDashboardStore';\n\nimport { h } from 'vue';\nconst PRESET_STORAGE_KEY = 'acu_tag_definition_presets';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'WidgetSettingsDialog',\n    props: {\n        visible: { type: Boolean },\n        widgetId: {},\n        widgetConfig: { default: null },\n        tableHeaders: { default: () => [] }\n    },\n    emits: [\"update:visible\", \"close\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const dashboardStore = useDashboardStore();\n        // ============  ============\n        const tagPresets = ref([]);\n        const selectedTagPresetId = ref('');\n        const showSavePresetDialog = ref(false);\n        const newPresetName = ref('');\n        // \n        function loadTagPresets() {\n            try {\n                const stored = localStorage.getItem(PRESET_STORAGE_KEY);\n                if (stored) {\n                    tagPresets.value = JSON.parse(stored);\n                }\n            }\n            catch (e) {\n                console.warn(':', e);\n            }\n        }\n        //  localStorage\n        function saveTagPresetsToStorage() {\n            try {\n                localStorage.setItem(PRESET_STORAGE_KEY, JSON.stringify(tagPresets.value));\n            }\n            catch (e) {\n                console.warn(':', e);\n            }\n        }\n        // \n        function handleTagPresetChange() {\n            if (!selectedTagPresetId.value)\n                return;\n            const preset = tagPresets.value.find(p => p.id === selectedTagPresetId.value);\n            if (preset) {\n                // \n                localConfig.interactiveTagConfig.tagDefinitions = preset.tagDefinitions.map(t => ({\n                    ...t,\n                    id: `tag_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`, // ID\n                }));\n            }\n        }\n        // \n        function handleSaveTagPreset() {\n            if (!newPresetName.value.trim())\n                return;\n            const newPreset = {\n                id: `preset_${Date.now()}`,\n                name: newPresetName.value.trim(),\n                tagDefinitions: localConfig.interactiveTagConfig.tagDefinitions.map(t => ({ ...t })),\n            };\n            tagPresets.value.push(newPreset);\n            saveTagPresetsToStorage();\n            selectedTagPresetId.value = newPreset.id;\n            showSavePresetDialog.value = false;\n            newPresetName.value = '';\n        }\n        // \n        function handleDeleteTagPreset() {\n            if (!selectedTagPresetId.value)\n                return;\n            const index = tagPresets.value.findIndex(p => p.id === selectedTagPresetId.value);\n            if (index > -1) {\n                tagPresets.value.splice(index, 1);\n                saveTagPresetsToStorage();\n                selectedTagPresetId.value = '';\n            }\n        }\n        // ============  ============\n        const selectedDisplayColumn = ref('');\n        const selectedInteractiveColumn = ref('');\n        // \n        const availableDisplayColumns = computed(() => {\n            return props.tableHeaders.filter(h => !localConfig.displayTagColumns.includes(h));\n        });\n        // \n        const availableInteractiveColumns = computed(() => {\n            return props.tableHeaders.filter(h => !localConfig.interactiveTagConfig.sourceColumns.includes(h));\n        });\n        // \n        function handleDisplayColumnSelect() {\n            if (selectedDisplayColumn.value) {\n                localConfig.displayTagColumns.push(selectedDisplayColumn.value);\n                selectedDisplayColumn.value = '';\n            }\n        }\n        // \n        function removeDisplayColumn(col) {\n            const index = localConfig.displayTagColumns.indexOf(col);\n            if (index > -1) {\n                localConfig.displayTagColumns.splice(index, 1);\n            }\n        }\n        // \n        function handleInteractiveColumnSelect() {\n            if (selectedInteractiveColumn.value) {\n                localConfig.interactiveTagConfig.sourceColumns.push(selectedInteractiveColumn.value);\n                selectedInteractiveColumn.value = '';\n            }\n        }\n        // \n        function removeInteractiveColumn(col) {\n            const index = localConfig.interactiveTagConfig.sourceColumns.indexOf(col);\n            if (index > -1) {\n                localConfig.interactiveTagConfig.sourceColumns.splice(index, 1);\n            }\n        }\n        // ============  ============\n        const localConfig = reactive({\n            titleColumn: '',\n            displayTagColumns: [],\n            interactiveTagConfig: {\n                sourceColumns: [],\n                tagDefinitions: [],\n            },\n        });\n        // \n        watch(() => props.visible, visible => {\n            if (visible && props.widgetConfig) {\n                loadTagPresets(); // \n                selectedTagPresetId.value = '';\n                localConfig.titleColumn = props.widgetConfig.titleColumn || '';\n                localConfig.displayTagColumns = [...(props.widgetConfig.displayTagColumns || [])];\n                localConfig.interactiveTagConfig = {\n                    sourceColumns: [...(props.widgetConfig.interactiveTagConfig?.sourceColumns || [])],\n                    tagDefinitions: (props.widgetConfig.interactiveTagConfig?.tagDefinitions || []).map(t => ({ ...t })),\n                };\n            }\n        }, { immediate: true });\n        // \n        watch(localConfig, () => {\n            if (props.visible && props.widgetId) {\n                saveConfig();\n            }\n        }, { deep: true });\n        /**  */\n        function addTagDefinition() {\n            const newTag = {\n                id: `tag_${Date.now()}`,\n                label: '',\n                promptTemplate: '',\n                isFixed: false,\n            };\n            localConfig.interactiveTagConfig.tagDefinitions.push(newTag);\n        }\n        /**  */\n        function removeTagDefinition(index) {\n            localConfig.interactiveTagConfig.tagDefinitions.splice(index, 1);\n        }\n        /**  store */\n        function saveConfig() {\n            if (!props.widgetId)\n                return;\n            dashboardStore.updateWidget(props.widgetId, {\n                titleColumn: localConfig.titleColumn || undefined,\n                displayTagColumns: localConfig.displayTagColumns.length > 0 ? localConfig.displayTagColumns : undefined,\n                interactiveTagConfig: localConfig.interactiveTagConfig.sourceColumns.length > 0 ||\n                    localConfig.interactiveTagConfig.tagDefinitions.length > 0\n                    ? localConfig.interactiveTagConfig\n                    : undefined,\n            });\n        }\n        /**  */\n        function handleClose() {\n            emit('update:visible', false);\n            emit('close');\n        }\n        return (_ctx, _cache) => {\n            return (__props.visible)\n                ? (_openBlock(), _createElementBlock(\"div\", {\n                    key: 0,\n                    class: \"acu-modal-container acu-center-modal\",\n                    onClick: _withModifiers(handleClose, [\"self\"])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[9] || (_cache[9] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, [\n                                _createElementVNode(\"i\", { class: \"fas fa-cog\" }),\n                                _createTextVNode(\"  \")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-close-pill\",\n                                onClick: _withModifiers(handleClose, [\"stop\"])\n                            }, \"\")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _cache[12] || (_cache[12] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-heading\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_5, [\n                                    _createElementVNode(\"div\", _hoisted_6, [\n                                        _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_7, [\n                                            _withDirectives(_createElementVNode(\"select\", {\n                                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((localConfig.titleColumn) = $event)),\n                                                class: \"acu-select\"\n                                            }, [\n                                                _cache[10] || (_cache[10] = _createElementVNode(\"option\", { value: \"\" }, \"\", -1 /* CACHED */)),\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.tableHeaders, (header) => {\n                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                        key: header,\n                                                        value: header\n                                                    }, _toDisplayString(header), 9 /* TEXT, PROPS */, _hoisted_8));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ], 512 /* NEED_PATCH */), [\n                                                [_vModelSelect, localConfig.titleColumn]\n                                            ])\n                                        ])\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_9, [\n                                _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-tags\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_10, [\n                                    _createElementVNode(\"div\", _hoisted_11, [\n                                        _cache[14] || (_cache[14] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_12, [\n                                            _withDirectives(_createElementVNode(\"select\", {\n                                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((selectedDisplayColumn).value = $event)),\n                                                class: \"acu-select\",\n                                                onChange: handleDisplayColumnSelect\n                                            }, [\n                                                _cache[13] || (_cache[13] = _createElementVNode(\"option\", { value: \"\" }, \"...\", -1 /* CACHED */)),\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableDisplayColumns.value, (header) => {\n                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                        key: header,\n                                                        value: header\n                                                    }, _toDisplayString(header), 9 /* TEXT, PROPS */, _hoisted_13));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                [_vModelSelect, selectedDisplayColumn.value]\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    (localConfig.displayTagColumns.length > 0)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(localConfig.displayTagColumns, (col) => {\n                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                    key: col,\n                                                    class: \"acu-selected-tag\"\n                                                }, [\n                                                    _createTextVNode(_toDisplayString(col) + \" \", 1 /* TEXT */),\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"acu-tag-remove\",\n                                                        onClick: _withModifiers(($event) => (removeDisplayColumn(col)), [\"stop\"])\n                                                    }, [...(_cache[15] || (_cache[15] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                                        ]))], 8 /* PROPS */, _hoisted_15)\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_16, [\n                                _cache[28] || (_cache[28] = _createElementVNode(\"div\", { class: \"acu-settings-title\" }, [\n                                    _createElementVNode(\"i\", { class: \"fas fa-hand-pointer\" }),\n                                    _createTextVNode(\"  \")\n                                ], -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_17, [\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_18, [\n                                        _cache[18] || (_cache[18] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_19, [\n                                            _withDirectives(_createElementVNode(\"select\", {\n                                                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((selectedInteractiveColumn).value = $event)),\n                                                class: \"acu-select\",\n                                                onChange: handleInteractiveColumnSelect\n                                            }, [\n                                                _cache[17] || (_cache[17] = _createElementVNode(\"option\", { value: \"\" }, \"...\", -1 /* CACHED */)),\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(availableInteractiveColumns.value, (header) => {\n                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                        key: header,\n                                                        value: header\n                                                    }, _toDisplayString(header), 9 /* TEXT, PROPS */, _hoisted_20));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                [_vModelSelect, selectedInteractiveColumn.value]\n                                            ])\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    (localConfig.interactiveTagConfig.sourceColumns.length > 0)\n                                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_21, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(localConfig.interactiveTagConfig.sourceColumns, (col) => {\n                                                return (_openBlock(), _createElementBlock(\"span\", {\n                                                    key: col,\n                                                    class: \"acu-selected-tag\"\n                                                }, [\n                                                    _createTextVNode(_toDisplayString(col) + \" \", 1 /* TEXT */),\n                                                    _createElementVNode(\"button\", {\n                                                        class: \"acu-tag-remove\",\n                                                        onClick: _withModifiers(($event) => (removeInteractiveColumn(col)), [\"stop\"])\n                                                    }, [...(_cache[19] || (_cache[19] = [\n                                                            _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                                        ]))], 8 /* PROPS */, _hoisted_22)\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ]))\n                                        : _createCommentVNode(\"v-if\", true),\n                                    _createCommentVNode(\"  -  \"),\n                                    _createElementVNode(\"div\", _hoisted_23, [\n                                        _cache[23] || (_cache[23] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_24, [\n                                            _withDirectives(_createElementVNode(\"select\", {\n                                                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((selectedTagPresetId).value = $event)),\n                                                class: \"acu-select\",\n                                                onChange: handleTagPresetChange\n                                            }, [\n                                                _cache[20] || (_cache[20] = _createElementVNode(\"option\", { value: \"\" }, \"--  --\", -1 /* CACHED */)),\n                                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(tagPresets.value, (preset) => {\n                                                    return (_openBlock(), _createElementBlock(\"option\", {\n                                                        key: preset.id,\n                                                        value: preset.id\n                                                    }, _toDisplayString(preset.name), 9 /* TEXT, PROPS */, _hoisted_25));\n                                                }), 128 /* KEYED_FRAGMENT */))\n                                            ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                [_vModelSelect, selectedTagPresetId.value]\n                                            ]),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-icon-btn\",\n                                                title: \"\",\n                                                onClick: _cache[4] || (_cache[4] = _withModifiers(($event) => (showSavePresetDialog.value = true), [\"stop\"]))\n                                            }, [...(_cache[21] || (_cache[21] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                                                ]))]),\n                                            (selectedTagPresetId.value)\n                                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                                    key: 0,\n                                                    class: \"acu-icon-btn acu-btn-danger\",\n                                                    title: \"\",\n                                                    onClick: _withModifiers(handleDeleteTagPreset, [\"stop\"])\n                                                }, [...(_cache[22] || (_cache[22] = [\n                                                        _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */)\n                                                    ]))]))\n                                                : _createCommentVNode(\"v-if\", true)\n                                        ])\n                                    ]),\n                                    _createCommentVNode(\"  \"),\n                                    _createElementVNode(\"div\", _hoisted_26, [\n                                        _cache[27] || (_cache[27] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"span\", { class: \"hint\" }, \"\")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_27, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(localConfig.interactiveTagConfig?.tagDefinitions || [], (tag, index) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: tag.id,\n                                                    class: \"acu-tag-definition-item\"\n                                                }, [\n                                                    _createElementVNode(\"div\", _hoisted_28, [\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": ($event) => ((tag.label) = $event),\n                                                            type: \"text\",\n                                                            class: \"acu-input tag-label\",\n                                                            placeholder: \"\"\n                                                        }, null, 8 /* PROPS */, _hoisted_29), [\n                                                            [_vModelText, tag.label]\n                                                        ]),\n                                                        _createElementVNode(\"label\", _hoisted_30, [\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": ($event) => ((tag.isFixed) = $event),\n                                                                type: \"checkbox\"\n                                                            }, null, 8 /* PROPS */, _hoisted_31), [\n                                                                [_vModelCheckbox, tag.isFixed]\n                                                            ]),\n                                                            _cache[24] || (_cache[24] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                                                        ]),\n                                                        _createElementVNode(\"button\", {\n                                                            class: \"acu-btn-icon danger\",\n                                                            title: \"\",\n                                                            onClick: _withModifiers(($event) => (removeTagDefinition(index)), [\"stop\"])\n                                                        }, [...(_cache[25] || (_cache[25] = [\n                                                                _createElementVNode(\"i\", { class: \"fas fa-trash\" }, null, -1 /* CACHED */)\n                                                            ]))], 8 /* PROPS */, _hoisted_32)\n                                                    ]),\n                                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                                        \"onUpdate:modelValue\": ($event) => ((tag.promptTemplate) = $event),\n                                                        class: \"acu-textarea prompt-template\",\n                                                        placeholder: \"{{value}}, {{rowTitle}}, {{playerName}}\",\n                                                        rows: \"2\"\n                                                    }, null, 8 /* PROPS */, _hoisted_33), [\n                                                        [_vModelText, tag.promptTemplate]\n                                                    ])\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */)),\n                                            _createElementVNode(\"button\", {\n                                                class: \"acu-btn-add\",\n                                                onClick: _withModifiers(addTagDefinition, [\"stop\"])\n                                            }, [...(_cache[26] || (_cache[26] = [\n                                                    _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */),\n                                                    _createTextVNode(\"  \", -1 /* CACHED */)\n                                                ]))])\n                                        ])\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\"  \"),\n                            _cache[29] || (_cache[29] = _createStaticVNode(\"<div class=\\\"acu-config-hint\\\"><i class=\\\"fas fa-lightbulb\\\"></i><div><strong></strong><ul><li><code>{{value}}</code> - </li><li><code>{{rowTitle}}</code> - </li><li><code>{{playerName}}</code> - </li></ul></div></div>\", 1))\n                        ])\n                    ], 512 /* NEED_PATCH */),\n                    _createCommentVNode(\"  \"),\n                    (showSavePresetDialog.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-modal-container acu-center-modal\",\n                            onClick: _cache[8] || (_cache[8] = _withModifiers(($event) => (showSavePresetDialog.value = false), [\"self\"]))\n                        }, [\n                            _createElementVNode(\"div\", _hoisted_34, [\n                                _createElementVNode(\"div\", _hoisted_35, [\n                                    _cache[30] || (_cache[30] = _createElementVNode(\"span\", { class: \"acu-modal-title\" }, \"\", -1 /* CACHED */)),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-close-pill\",\n                                        onClick: _cache[5] || (_cache[5] = _withModifiers(($event) => (showSavePresetDialog.value = false), [\"stop\"]))\n                                    }, \"\")\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_36, [\n                                    _createElementVNode(\"div\", _hoisted_37, [\n                                        _cache[31] || (_cache[31] = _createElementVNode(\"div\", { class: \"acu-settings-label\" }, \"\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_38, [\n                                            _withDirectives(_createElementVNode(\"input\", {\n                                                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((newPresetName).value = $event)),\n                                                type: \"text\",\n                                                class: \"acu-input\",\n                                                placeholder: \"\",\n                                                onKeyup: _withKeys(handleSaveTagPreset, [\"enter\"])\n                                            }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                                [_vModelText, newPresetName.value]\n                                            ])\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_39, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-modal-btn secondary\",\n                                            onClick: _cache[7] || (_cache[7] = _withModifiers(($event) => (showSavePresetDialog.value = false), [\"stop\"]))\n                                        }, \"\"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"acu-modal-btn primary\",\n                                            disabled: !newPresetName.value.trim(),\n                                            onClick: _withModifiers(handleSaveTagPreset, [\"stop\"])\n                                        }, \"  \", 8 /* PROPS */, _hoisted_40)\n                                    ])\n                                ])\n                            ])\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]))\n                : _createCommentVNode(\"v-if\", true);\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./WidgetSettingsDialog.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WidgetSettingsDialog.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"acu-action-bar\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"acu-action-btn-wrapper acu-lock-mode-btns\"\n};\nconst _hoisted_3 = {\n    key: 0,\n    class: \"acu-lock-count\"\n};\nconst _hoisted_4 = [\"title\", \"onClick\", \"onMousedown\", \"onTouchstartPassive\"];\nconst _hoisted_5 = {\n    key: 0,\n    class: \"secondary-indicator\"\n};\nconst _hoisted_6 = [\"title\", \"onClick\"];\nimport { computed, ref } from 'vue';\nimport { useCellLock } from '../composables';\nimport { NAV_BUTTONS, useConfigStore } from '../stores/useConfigStore';\nimport { useUIStore } from '../stores/useUIStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ActionBar',\n    props: {\n        hasChanges: { type: Boolean, default: false },\n        isPinned: { type: Boolean, default: false }\n    },\n    emits: [\"save\", \"saveAs\", \"refresh\", \"manualUpdate\", \"purge\", \"pin\", \"toggle\", \"settings\", \"openNative\", \"finishLockEdit\", \"cancelLockEdit\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * ActionBar - \n         *\n         * :\n         * -  configStore \n         * -  + \n         * - \n         * - \n         * - \n         *\n         * :\n         * - \n         */\n        const props = __props;\n        const emit = __emit;\n        const configStore = useConfigStore();\n        const uiStore = useUIStore();\n        const cellLock = useCellLock();\n        // ============================================================\n        // \n        // ============================================================\n        /**  ID  */\n        const sortedVisibleButtonIds = computed(() => {\n            return configStore.sortedVisibleButtons;\n        });\n        /**\n         *  ID\n         * @param buttonId  ID\n         */\n        const getSecondaryId = (buttonId) => {\n            return configStore.getSecondaryButtonId(buttonId);\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const hasSecondary = (buttonId) => {\n            return getSecondaryId(buttonId) !== null;\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const getButtonIcon = (buttonId) => {\n            const btn = NAV_BUTTONS.find(b => b.id === buttonId);\n            return btn?.icon || 'fa-circle';\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const getButtonLabel = (buttonId) => {\n            const btn = NAV_BUTTONS.find(b => b.id === buttonId);\n            return btn?.label || buttonId;\n        };\n        /**\n         *  title\n         * @param buttonId  ID\n         */\n        const getButtonTitle = (buttonId) => {\n            const label = getButtonLabel(buttonId);\n            const secondaryId = getSecondaryId(buttonId);\n            if (secondaryId) {\n                const secondaryLabel = getButtonLabel(secondaryId);\n                return `${label} (: ${secondaryLabel})`;\n            }\n            return label;\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const getButtonClass = (buttonId) => {\n            const classes = [];\n            // \n            if (buttonId === 'purge') {\n                classes.push('acu-btn-danger');\n            }\n            // \n            if (buttonId === 'pin') {\n                classes.push('acu-btn-toggle');\n                if (props.isPinned) {\n                    classes.push('active');\n                }\n            }\n            // \n            if (buttonId === 'save' && props.hasChanges) {\n                classes.push('has-changes');\n            }\n            // \n            if (hasSecondary(buttonId)) {\n                classes.push('has-secondary');\n            }\n            return classes;\n        };\n        // ============================================================\n        // \n        // ============================================================\n        let longPressTimer = null;\n        const isLongPress = ref(false);\n        const popupButtonId = ref(null);\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const startLongPress = (buttonId) => {\n            const secondaryId = getSecondaryId(buttonId);\n            console.log('[ACU ActionBar] startLongPress:', buttonId, 'secondaryId:', secondaryId, 'groups:', configStore.buttonGroups);\n            if (!secondaryId) {\n                console.log('[ACU ActionBar] No secondary button for:', buttonId);\n                return;\n            }\n            isLongPress.value = false;\n            longPressTimer = setTimeout(() => {\n                isLongPress.value = true;\n                console.log('[ACU ActionBar] Long press triggered for:', buttonId, 'directExec:', configStore.longPressDirectExec);\n                // \n                if (configStore.longPressDirectExec) {\n                    // \n                    console.log('[ACU ActionBar] Direct exec:', secondaryId);\n                    emitAction(secondaryId);\n                }\n                else {\n                    // \n                    console.log('[ACU ActionBar] Popup button:', secondaryId);\n                    popupButtonId.value = buttonId;\n                    // 3\n                    setTimeout(() => {\n                        if (popupButtonId.value === buttonId) {\n                            popupButtonId.value = null;\n                        }\n                    }, 3000);\n                }\n            }, 600);\n        };\n        /**\n         * \n         */\n        const endLongPress = () => {\n            if (longPressTimer) {\n                clearTimeout(longPressTimer);\n                longPressTimer = null;\n            }\n        };\n        /**\n         * \n         * @param primaryId  ID\n         */\n        const handleSecondaryClick = (primaryId) => {\n            const secondaryId = getSecondaryId(primaryId);\n            if (secondaryId) {\n                emitAction(secondaryId);\n            }\n            popupButtonId.value = null;\n        };\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         * @param actionId  ID\n         */\n        const emitAction = (actionId) => {\n            switch (actionId) {\n                case 'save':\n                    emit('save');\n                    break;\n                case 'saveAs':\n                    emit('saveAs');\n                    break;\n                case 'refresh':\n                    emit('refresh');\n                    break;\n                case 'manualUpdate':\n                    emit('manualUpdate');\n                    break;\n                case 'purge':\n                    emit('purge');\n                    break;\n                case 'pin':\n                    emit('pin');\n                    break;\n                case 'toggle':\n                    emit('toggle');\n                    break;\n                case 'settings':\n                    emit('settings');\n                    break;\n                case 'openNative':\n                    emit('openNative');\n                    break;\n                default:\n                    console.warn(`[ActionBar]  ID: ${actionId}`);\n            }\n        };\n        /**\n         * \n         * @param buttonId  ID\n         */\n        const handleClick = (buttonId) => {\n            // \n            if (isLongPress.value) {\n                isLongPress.value = false;\n                return;\n            }\n            emitAction(buttonId);\n        };\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        const handleFinishLockEdit = () => {\n            emit('finishLockEdit');\n        };\n        /**\n         * \n         */\n        const handleCancelLockEdit = () => {\n            emit('cancelLockEdit');\n        };\n        /**\n         * \n         */\n        const toggleShowLockedOnly = () => {\n            uiStore.showLockedOnly = !uiStore.showLockedOnly;\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                (_unref(uiStore).isLockEditMode)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                        _createElementVNode(\"button\", {\n                            class: \"acu-action-btn acu-btn-primary\",\n                            title: \"\",\n                            onClick: _withModifiers(handleFinishLockEdit, [\"stop\"])\n                        }, [...(_cache[0] || (_cache[0] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-check\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: \"acu-action-btn acu-btn-secondary\",\n                            title: \"\",\n                            onClick: _withModifiers(handleCancelLockEdit, [\"stop\"])\n                        }, [...(_cache[1] || (_cache[1] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                            ]))]),\n                        _createElementVNode(\"button\", {\n                            class: _normalizeClass([\"acu-action-btn\", { 'acu-btn-active': _unref(uiStore).showLockedOnly }]),\n                            title: \"\",\n                            onClick: _withModifiers(toggleShowLockedOnly, [\"stop\"])\n                        }, [...(_cache[2] || (_cache[2] = [\n                                _createElementVNode(\"i\", { class: \"fas fa-filter\" }, null, -1 /* CACHED */)\n                            ]))], 2 /* CLASS */),\n                        (_unref(cellLock).pendingLockCount.value > 0)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(_unref(cellLock).pendingLockCount.value), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\"  \"),\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(sortedVisibleButtonIds.value, (btnId) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: btnId,\n                                class: \"acu-action-btn-wrapper\"\n                            }, [\n                                _createElementVNode(\"button\", {\n                                    class: _normalizeClass([\"acu-action-btn\", getButtonClass(btnId)]),\n                                    title: getButtonTitle(btnId),\n                                    onClick: ($event) => (handleClick(btnId)),\n                                    onMousedown: ($event) => (startLongPress(btnId)),\n                                    onMouseup: endLongPress,\n                                    onMouseleave: endLongPress,\n                                    onTouchstartPassive: ($event) => (startLongPress(btnId)),\n                                    onTouchend: endLongPress\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(['fas', getButtonIcon(btnId)])\n                                    }, null, 2 /* CLASS */),\n                                    _createCommentVNode(\"  \"),\n                                    (hasSecondary(btnId))\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5))\n                                        : _createCommentVNode(\"v-if\", true)\n                                ], 42 /* CLASS, PROPS, NEED_HYDRATION */, _hoisted_4),\n                                _createCommentVNode(\"  \"),\n                                _createVNode(_Transition, { name: \"popup\" }, {\n                                    default: _withCtx(() => [\n                                        (popupButtonId.value === btnId && getSecondaryId(btnId))\n                                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                                key: 0,\n                                                class: \"acu-action-btn acu-popup-btn\",\n                                                title: getButtonLabel(getSecondaryId(btnId)),\n                                                onClick: _withModifiers(($event) => (handleSecondaryClick(btnId)), [\"stop\"])\n                                            }, [\n                                                _createElementVNode(\"i\", {\n                                                    class: _normalizeClass(['fas', getButtonIcon(getSecondaryId(btnId))])\n                                                }, null, 2 /* CLASS */)\n                                            ], 8 /* PROPS */, _hoisted_6))\n                                            : _createCommentVNode(\"v-if\", true)\n                                    ]),\n                                    _: 2 /* DYNAMIC */\n                                }, 1024 /* DYNAMIC_SLOTS */)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ], 64 /* STABLE_FRAGMENT */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ActionBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ActionBar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ActionBar.vue?vue&type=style&index=0&id=6bd4486e&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6bd4486e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, renderSlot as _renderSlot } from \"vue\";\nconst _hoisted_1 = { class: \"acu-sortable-list\" };\nconst _hoisted_2 = [\"onClick\"];\nconst _hoisted_3 = { class: \"acu-sort-controls\" };\nconst _hoisted_4 = [\"disabled\", \"onClick\"];\nconst _hoisted_5 = [\"disabled\", \"onClick\"];\nconst _hoisted_6 = { class: \"acu-item-content\" };\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = {\n    key: 0,\n    class: \"acu-sortable-empty\"\n};\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SortableList',\n    props: {\n        items: {},\n        selectedId: { default: '' },\n        showRemove: { type: Boolean, default: true }\n    },\n    emits: [\"reorder\", \"remove\", \"select\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * SortableList - \n         *\n         * :\n         * -  Bug\n         * - \n         * - \n         * - \n         *\n         * :\n         * - \n         * - \n         */\n        /**  */\n        const props = __props;\n        const emit = __emit;\n        /**\n         * \n         * @param index \n         */\n        const moveUp = (index) => {\n            if (index === 0)\n                return;\n            const newItems = [...props.items];\n            [newItems[index - 1], newItems[index]] = [newItems[index], newItems[index - 1]];\n            emit('reorder', newItems);\n        };\n        /**\n         * \n         * @param index \n         */\n        const moveDown = (index) => {\n            if (index === props.items.length - 1)\n                return;\n            const newItems = [...props.items];\n            [newItems[index], newItems[index + 1]] = [newItems[index + 1], newItems[index]];\n            emit('reorder', newItems);\n        };\n        /**\n         * \n         * @param index \n         */\n        const remove = (index) => {\n            emit('remove', props.items[index]);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.items, (item, index) => {\n                    return (_openBlock(), _createElementBlock(\"div\", {\n                        key: item.id,\n                        class: _normalizeClass([\"acu-sortable-item\", { selected: __props.selectedId === item.id }]),\n                        onClick: ($event) => (emit('select', item))\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createElementVNode(\"button\", {\n                                class: \"acu-sort-btn\",\n                                disabled: index === 0,\n                                title: \"\",\n                                onClick: _withModifiers(($event) => (moveUp(index)), [\"stop\"])\n                            }, [...(_cache[0] || (_cache[0] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-chevron-up\" }, null, -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_4),\n                            _createElementVNode(\"button\", {\n                                class: \"acu-sort-btn\",\n                                disabled: index === __props.items.length - 1,\n                                title: \"\",\n                                onClick: _withModifiers(($event) => (moveDown(index)), [\"stop\"])\n                            }, [...(_cache[1] || (_cache[1] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-chevron-down\" }, null, -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_5)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            (item.icon)\n                                ? (_openBlock(), _createElementBlock(\"i\", {\n                                    key: 0,\n                                    class: _normalizeClass(['fas', item.icon])\n                                }, null, 2 /* CLASS */))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"span\", null, _toDisplayString(item.name || item.label), 1 /* TEXT */)\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        (__props.showRemove)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                class: \"acu-remove-btn\",\n                                title: \"\",\n                                onClick: _withModifiers(($event) => (remove(index)), [\"stop\"])\n                            }, [...(_cache[2] || (_cache[2] = [\n                                    _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                ]))], 8 /* PROPS */, _hoisted_7))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 10 /* CLASS, PROPS */, _hoisted_2));\n                }), 128 /* KEYED_FRAGMENT */)),\n                _createCommentVNode(\"  \"),\n                (__props.items.length === 0)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                        _renderSlot(_ctx.$slots, \"empty\", {}, () => [\n                            _cache[3] || (_cache[3] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */))\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SortableList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SortableList.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SortableList.vue?vue&type=style&index=0&id=23a88fea&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-23a88fea\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acu-toast-message\" };\nimport { computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'Toast',\n    props: {\n        visible: { type: Boolean },\n        message: {},\n        type: { default: 'info' }\n    },\n    setup(__props) {\n        const props = __props;\n        const typeClass = computed(() => `acu-toast-${props.type}`);\n        const iconClass = computed(() => {\n            switch (props.type) {\n                case 'success':\n                    return 'fas fa-check-circle';\n                case 'error':\n                    return 'fas fa-times-circle';\n                case 'warning':\n                    return 'fas fa-exclamation-triangle';\n                case 'info':\n                default:\n                    return 'fas fa-info-circle';\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"toast\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: _normalizeClass([\"acu-toast\", typeClass.value])\n                        }, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(iconClass.value)\n                            }, null, 2 /* CLASS */),\n                            _createElementVNode(\"span\", _hoisted_1, _toDisplayString(__props.message), 1 /* TEXT */)\n                        ], 2 /* CLASS */))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./Toast.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Toast.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, withModifiers as _withModifiers, unref as _unref, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"acu-relationship-graph\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"acu-graph-legend\"\n};\nconst _hoisted_3 = { class: \"label\" };\nconst _hoisted_4 = { class: \"acu-graph-toolbar\" };\nconst _hoisted_5 = {\n    key: 1,\n    class: \"acu-graph-empty\"\n};\nconst _hoisted_6 = { class: \"acu-node-config-panel\" };\nconst _hoisted_7 = { class: \"acu-node-config-header\" };\nconst _hoisted_8 = { class: \"acu-node-config-body\" };\nconst _hoisted_9 = { class: \"acu-node-fullname\" };\nconst _hoisted_10 = { class: \"acu-char-selector\" };\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = { class: \"acu-node-preview\" };\nconst _hoisted_13 = { class: \"acu-node-config-actions\" };\nimport cytoscape from 'cytoscape';\nimport fcose from 'cytoscape-fcose';\n// @ts-expect-error - cytoscape-node-html-label \nimport nodeHtmlLabel from 'cytoscape-node-html-label';\nimport { computed, onBeforeUnmount, onMounted, ref, watch } from 'vue';\nimport { useAvatarManager } from '../composables/useAvatarManager';\nimport { TAB_DASHBOARD, useConfigStore, useUIStore } from '../stores';\nimport { getCore, getRelationLegend, parseEmbeddedRelationships, parseRelationshipTable } from '../utils';\nimport { AvatarManagerDialog } from './dialogs';\n/**  */\nconst CHAT_VAR_GRAPH_CONFIG = 'acu_graph_config';\n/**  */\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'RelationshipGraph',\n    props: {\n        relationshipTable: { default: null },\n        characterTables: { default: () => [] },\n        factionTable: { default: null },\n        showLegend: { type: Boolean, default: true },\n        initialLayout: { default: 'fcose' }\n    },\n    emits: [\"node-click\", \"edge-click\"],\n    setup(__props, { expose: __expose, emit: __emit }) {\n        /**\n         * RelationshipGraph.vue - \n         *\n         *  Cytoscape.js \n         * - \n         * - \n         * - \n         * - \n         */\n        cytoscape.use(fcose);\n        //  node-html-label  HTML \n        nodeHtmlLabel(cytoscape);\n        // Stores\n        const configStore = useConfigStore();\n        const uiStore = useUIStore();\n        // \n        const avatarManager = useAvatarManager();\n        /**  */\n        const avatarCache = ref(new Map());\n        /**  ->  */\n        const aliasMap = ref(new Map());\n        // ============================================================\n        // Props & Emits\n        // ============================================================\n        const props = __props;\n        const emit = __emit;\n        // ============================================================\n        // Refs\n        // ============================================================\n        const containerRef = ref(null);\n        let cy = null;\n        /**  */\n        const layoutMode = ref(props.initialLayout);\n        /**  */\n        const showNodeConfig = ref(false);\n        /**  */\n        const showAvatarManager = ref(false);\n        /**  ID */\n        const configNodeId = ref(null);\n        /**  */\n        const configNodeFullName = ref('');\n        /**  */\n        const configSelectedIndices = ref(new Set());\n        /** ID */\n        const centerNodeId = ref(null);\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  key */\n        function getGraphConfig() {\n            try {\n                const chatVars = getVariables({ type: 'chat' });\n                const config = chatVars[CHAT_VAR_GRAPH_CONFIG] || {};\n                //  positions  layoutPositions fcose\n                if (config.positions && !config.layoutPositions) {\n                    console.info('[RelationshipGraph]  fcose');\n                    config.layoutPositions = {\n                        fcose: config.positions,\n                    };\n                    delete config.positions;\n                    // \n                    saveGraphConfig(config);\n                }\n                return config;\n            }\n            catch (e) {\n                console.warn('[RelationshipGraph] :', e);\n                return {};\n            }\n        }\n        /**  */\n        function saveGraphConfig(config) {\n            try {\n                insertOrAssignVariables({ [CHAT_VAR_GRAPH_CONFIG]: config }, { type: 'chat' });\n            }\n            catch (e) {\n                console.warn('[RelationshipGraph] :', e);\n            }\n        }\n        /**  */\n        function hasSavedPositions(layout) {\n            const targetLayout = layout || layoutMode.value;\n            const config = getGraphConfig();\n            console.info(`[RelationshipGraph] hasSavedPositions(${targetLayout}):`, {\n                layoutPositions: config.layoutPositions ? Object.keys(config.layoutPositions) : 'undefined',\n                targetLayoutData: config.layoutPositions?.[targetLayout]\n                    ? Object.keys(config.layoutPositions[targetLayout]).length + ' '\n                    : '',\n            });\n            const positions = config.layoutPositions?.[targetLayout];\n            return !!(positions && Object.keys(positions).length > 0);\n        }\n        /**  */\n        function getSavedPositions(layout) {\n            const targetLayout = layout || layoutMode.value;\n            return getGraphConfig().layoutPositions?.[targetLayout];\n        }\n        // ============================================================\n        // CSS \n        // ============================================================\n        /**\n         *  CSS \n         * Cytoscape  CSS \n         *\n         *  class  .acu-wrapper  :root \n         *  CSS \n         */\n        function getCssVar(varName, fallback) {\n            try {\n                const parentDoc = window.parent?.document || document;\n                //  .acu-wrapper\n                const wrapper = parentDoc.querySelector('.acu-wrapper');\n                if (wrapper) {\n                    const computed = getComputedStyle(wrapper).getPropertyValue(varName).trim();\n                    if (computed)\n                        return computed;\n                }\n                //  documentElement\n                const rootComputed = getComputedStyle(parentDoc.documentElement).getPropertyValue(varName).trim();\n                return rootComputed || fallback;\n            }\n            catch {\n                return fallback;\n            }\n        }\n        /**  */\n        function getThemeColors() {\n            return {\n                textMain: getCssVar('--acu-text-main', '#333333'),\n                textSub: getCssVar('--acu-text-sub', '#666666'),\n                cardBg: getCssVar('--acu-card-bg', '#ffffff'),\n                border: getCssVar('--acu-border', '#e0e0e0'),\n                titleColor: getCssVar('--acu-title-color', '#d35400'), // \n                bgPanel: getCssVar('--acu-bg-panel', '#e6e2d3'), // \n                btnBg: getCssVar('--acu-btn-bg', '#dcd0c0'), //  - NPC\n                highlight: getCssVar('--acu-highlight', '#d35400'), //  - \n                fontFamily: getCssVar('--acu-font-family', 'Source Han Sans SC, sans-serif'), // \n            };\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const legend = computed(() => getRelationLegend());\n        /**  */\n        const parsedData = computed(() => {\n            console.info('[RelationshipGraph]  - props:', {\n                relationshipTable: props.relationshipTable?.name,\n                characterTablesCount: props.characterTables?.length,\n                characterTablesNames: props.characterTables?.map(t => t.name),\n                factionTable: props.factionTable?.name,\n                aliasMapSize: aliasMap.value.size,\n            });\n            // \n            const result = parseRelationshipTable(props.relationshipTable, props.characterTables, props.factionTable, aliasMap.value);\n            console.info('[RelationshipGraph] :', {\n                nodeCount: result.nodeCount,\n                edgeCount: result.edgeCount,\n                warnings: result.warnings,\n            });\n            // \n            if (result.nodeCount === 0 && props.characterTables && props.characterTables.length > 0) {\n                console.info('[RelationshipGraph] ');\n                const embeddedResult = parseEmbeddedRelationships(props.characterTables, props.factionTable, aliasMap.value);\n                console.info('[RelationshipGraph] :', {\n                    nodeCount: embeddedResult.nodeCount,\n                    edgeCount: embeddedResult.edgeCount,\n                    warnings: embeddedResult.warnings,\n                });\n                return embeddedResult;\n            }\n            return result;\n        });\n        /**  */\n        const hasData = computed(() => {\n            return parsedData.value.nodeCount > 0;\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function handleBackToDashboard() {\n            uiStore.setActiveTab(TAB_DASHBOARD);\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         * \n         */\n        function getLayoutConfig(mode) {\n            switch (mode) {\n                case 'circle':\n                    //  concentric \n                    return {\n                        name: 'concentric',\n                        concentric: (node) => {\n                            // \n                            if (centerNodeId.value && node.id() === centerNodeId.value)\n                                return 100;\n                            // \n                            if (!centerNodeId.value && node.data('type') === 'protagonist')\n                                return 100;\n                            // \n                            return 1;\n                        },\n                        levelWidth: () => 1, // \n                        minNodeSpacing: 80,\n                        animate: true,\n                        animationDuration: 500,\n                        fit: true,\n                        padding: 30,\n                    };\n                case 'dagre':\n                    // dagre  breadthfirst \n                    return {\n                        name: 'breadthfirst',\n                        directed: true,\n                        padding: 30,\n                        spacingFactor: 1.5,\n                        animate: true,\n                        animationDuration: 300,\n                    };\n                case 'fcose':\n                default:\n                    // fcose: cose \n                    return {\n                        name: 'fcose',\n                        quality: 'proof', // 'draft' | 'default' | 'proof' - \n                        randomize: true, // \n                        animate: true,\n                        animationDuration: 500,\n                        fit: true,\n                        padding: 30,\n                        // \n                        nodeSeparation: 100, // \n                        idealEdgeLength: 150, // \n                        // \n                        edgeElasticity: 0.45, // \n                        nestingFactor: 0.1, // \n                        gravity: 0.25, // \n                        gravityRange: 3.8, // \n                        // \n                        numIter: 2500, // \n                        tile: true, // \n                        tilingPaddingVertical: 10,\n                        tilingPaddingHorizontal: 10,\n                    };\n            }\n        }\n        // ============================================================\n        // Cytoscape \n        // ============================================================\n        /**\n         *  Cytoscape \n         */\n        function initCytoscape() {\n            if (!containerRef.value)\n                return;\n            // Cytoscape  CSS \n            const colors = getThemeColors();\n            // \n            const savedPositions = getSavedPositions();\n            const savedCount = savedPositions ? Object.keys(savedPositions).length : 0;\n            //  nodeCount elements.group \n            const currentNodeCount = parsedData.value.nodeCount;\n            //  >=  80% \n            // \n            const hasPositions = savedCount > 0 && currentNodeCount > 0 && savedCount >= currentNodeCount * 0.8;\n            console.info('[RelationshipGraph] :', {\n                : savedCount,\n                : currentNodeCount,\n                : hasPositions,\n            });\n            // \n            const elementsWithData = parsedData.value.elements.map(el => {\n                const nodeId = el.data?.id;\n                //  source  source/target\n                const isNode = nodeId && !el.data?.source;\n                if (isNode) {\n                    //  URL \n                    const avatarData = avatarCache.value.get(nodeId);\n                    // \n                    let position = undefined;\n                    if (hasPositions && savedPositions) {\n                        if (savedPositions[nodeId]) {\n                            // \n                            console.info('[RelationshipGraph] :', nodeId, savedPositions[nodeId]);\n                            position = savedPositions[nodeId];\n                        }\n                        else {\n                            //  (0,0)\n                            position = {\n                                x: (Math.random() - 0.5) * 200,\n                                y: (Math.random() - 0.5) * 200,\n                            };\n                        }\n                    }\n                    // \n                    const fullName = el.data?.fullName || el.data?.id || '';\n                    return {\n                        ...el,\n                        data: {\n                            ...el.data,\n                            avatarUrl: avatarData?.url || undefined,\n                            avatarOffsetX: avatarData?.offsetX ?? 50,\n                            avatarOffsetY: avatarData?.offsetY ?? 50,\n                            avatarScale: avatarData?.scale ?? 150,\n                            fullName: fullName, //  fullName \n                        },\n                        ...(position ? { position } : {}),\n                    };\n                }\n                return el;\n            });\n            cy = cytoscape({\n                container: containerRef.value,\n                elements: elementsWithData,\n                style: [\n                    // NPC - \n                    {\n                        selector: 'node',\n                        style: {\n                            label: 'data(label)',\n                            'text-valign': 'center', // \n                            'text-halign': 'center', // \n                            'text-wrap': 'wrap', // \n                            'text-max-width': '46px', // \n                            'background-color': colors.btnBg, // \n                            color: colors.textMain, // \n                            // \n                            'font-size': (node) => {\n                                const label = node.data('label') || '';\n                                const len = label.length;\n                                if (len <= 1)\n                                    return '20px';\n                                if (len <= 2)\n                                    return '16px';\n                                if (len <= 3)\n                                    return '13px';\n                                if (len <= 4)\n                                    return '11px';\n                                return '10px'; // 5\n                            },\n                            'font-weight': 'bold',\n                            width: 50,\n                            height: 50,\n                            'border-width': 1.5, // \n                            'border-color': colors.textMain, // \n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'node.protagonist',\n                        style: {\n                            'background-color': colors.highlight, // \n                            color: colors.textMain, // \n                            'border-width': 1.5, // \n                            'border-color': colors.textMain, // \n                            //  (50x50) \n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'node.character',\n                        style: {\n                        // \n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'node.faction',\n                        style: {\n                            'background-color': colors.btnBg,\n                            color: colors.textMain,\n                            'border-width': 1.5,\n                            'border-color': colors.textMain,\n                            shape: 'round-rectangle',\n                            width: 70,\n                            height: 35,\n                            'font-size': '14px',\n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'node.unknown',\n                        style: {\n                            'background-color': colors.btnBg,\n                            color: colors.textMain,\n                            'border-width': 1.5,\n                            'border-color': colors.textMain,\n                        },\n                    },\n                    //  -  nodeHtmlLabel  HTML \n                    // Cytoscape \n                    // \n                    {\n                        selector: 'node[avatarUrl]',\n                        style: {\n                            //  HTML label \n                            'background-color': 'transparent',\n                            'background-opacity': 0,\n                            'border-width': 0,\n                            // \n                            width: 50,\n                            height: 50,\n                            //  Canvas  HTML label \n                            label: '',\n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'edge',\n                        style: {\n                            'curve-style': 'bezier',\n                            'target-arrow-shape': 'triangle',\n                            'target-arrow-color': 'data(color)',\n                            'line-color': 'data(color)',\n                            'line-style': 'solid',\n                            width: 2.5,\n                            label: 'data(label)',\n                            'font-size': '10px',\n                            'text-rotation': 'autorotate',\n                            'text-margin-y': -8,\n                            color: '#fff', // \n                            'text-background-color': 'data(color)', // \n                            'text-background-opacity': 0.95,\n                            'text-background-padding': '3px',\n                            'text-background-shape': 'roundrectangle', // \n                            // \n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'edge[lineStyle = \"dashed\"]',\n                        style: {\n                            'line-style': 'dashed',\n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'edge[?bidirectional]', // bidirectional = true\n                        style: {\n                            'source-arrow-shape': 'triangle', // \n                            'source-arrow-color': 'data(color)',\n                            'curve-style': 'straight', // \n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'node:selected',\n                        style: {\n                            'border-width': 4,\n                            'border-color': '#FFC107',\n                            'overlay-opacity': 0.2,\n                            'overlay-color': '#FFC107',\n                        },\n                    },\n                    //  - \n                    {\n                        selector: 'edge:selected',\n                        style: {\n                            width: 4,\n                            'line-color': '#FFC107',\n                            'target-arrow-color': '#FFC107',\n                        },\n                    },\n                ],\n                //  preset \n                layout: hasPositions ? { name: 'preset' } : getLayoutConfig(layoutMode.value),\n                // \n                userZoomingEnabled: true,\n                userPanningEnabled: true,\n                boxSelectionEnabled: false,\n                minZoom: 0.3,\n                maxZoom: 3,\n            });\n            //  - \n            cy.on('tap', 'node', evt => {\n                const node = evt.target;\n                const nodeId = node.id();\n                const nodeType = node.data('type') || 'unknown';\n                // \n                if (layoutMode.value === 'circle') {\n                    setCenterNode(nodeId);\n                }\n                emit('node-click', {\n                    id: nodeId,\n                    type: nodeType,\n                });\n            });\n            //  -  id  label\n            cy.on('dbltap', 'node', evt => {\n                const node = evt.target;\n                openNodeConfig(node.id(), node.id()); // id \n            });\n            cy.on('tap', 'edge', evt => {\n                const edge = evt.target;\n                emit('edge-click', {\n                    source: edge.source().id(),\n                    target: edge.target().id(),\n                    relation: edge.data('label') || '',\n                });\n            });\n            //  - \n            // cy.on('dragfree', 'node', () => {\n            //   saveNodePositions();\n            // });\n            //  preset \n            if (hasPositions) {\n                cy.fit(undefined, 30);\n            }\n            // \n            applyLabelConfig();\n            //  nodeHtmlLabel  HTML \n            //  CSS \n            cy.nodeHtmlLabel([\n                {\n                    query: 'node[avatarUrl]',\n                    halign: 'center',\n                    valign: 'center',\n                    halignBox: 'center',\n                    valignBox: 'center',\n                    tpl: (data) => {\n                        const avatarUrl = data.avatarUrl || '';\n                        const offsetX = data.avatarOffsetX ?? 50;\n                        const offsetY = data.avatarOffsetY ?? 50;\n                        const scale = data.avatarScale ?? 150;\n                        const fullName = data.fullName || data.id || '';\n                        //  CSS\n                        return `\n          <div class=\"acu-graph-avatar-wrapper\">\n            <div class=\"acu-graph-avatar\" style=\"\n              background-image: url('${avatarUrl}');\n              background-position: ${offsetX}% ${offsetY}%;\n              background-size: ${scale}%;\n              background-repeat: no-repeat;\n            \"></div>\n            <div class=\"acu-graph-avatar-name\">${fullName}</div>\n          </div>\n        `;\n                    },\n                },\n            ]);\n        }\n        /**\n         * \n         */\n        function updateGraph() {\n            if (!cy)\n                return;\n            cy.elements().remove();\n            cy.add(parsedData.value.elements);\n            cy.layout(getLayoutConfig(layoutMode.value)).run();\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function zoomIn() {\n            if (!cy)\n                return;\n            cy.zoom(cy.zoom() * 1.2);\n        }\n        /**  */\n        function zoomOut() {\n            if (!cy)\n                return;\n            cy.zoom(cy.zoom() / 1.2);\n        }\n        /**  */\n        function fitToView() {\n            cy?.fit(undefined, 30);\n        }\n        /**  */\n        function setCenterNode(nodeId) {\n            if (!cy)\n                return;\n            // \n            if (centerNodeId.value === nodeId)\n                return;\n            console.info(`[RelationshipGraph] : ${centerNodeId.value || '()'}  ${nodeId}`);\n            centerNodeId.value = nodeId;\n            // \n            const layout = cy.layout(getLayoutConfig('circle'));\n            layout.run();\n        }\n        /**  -  */\n        function setLayout(mode) {\n            if (!cy)\n                return;\n            // \n            if (mode === layoutMode.value)\n                return;\n            const previousLayout = layoutMode.value;\n            // \n            // \n            // 1. \n            layoutMode.value = mode;\n            console.info(`[RelationshipGraph] : ${previousLayout}  ${mode}`);\n            // 2. \n            const hasPositions = hasSavedPositions(mode);\n            console.info(`[RelationshipGraph]  [${mode}] : ${hasPositions}`);\n            if (hasPositions) {\n                //   \n                console.info(`[RelationshipGraph]  [${mode}] `);\n                restoreNodePositions(mode);\n            }\n            else {\n                //   \n                console.info(`[RelationshipGraph] [${mode}] `);\n                const layout = cy.layout(getLayoutConfig(mode));\n                layout.run();\n            }\n        }\n        /**  */\n        function refresh() {\n            updateGraph();\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function saveNodePositions(targetLayout) {\n            if (!cy)\n                return;\n            const layout = targetLayout || layoutMode.value;\n            const positions = {};\n            let allZero = true; //  (0, 0)\n            cy.nodes().forEach(node => {\n                const pos = node.position();\n                //  NaN\n                if (pos && isFinite(pos.x) && isFinite(pos.y)) {\n                    positions[node.id()] = { x: pos.x, y: pos.y };\n                    //  (0, 0)\n                    if (pos.x !== 0 || pos.y !== 0) {\n                        allZero = false;\n                    }\n                }\n            });\n            //  (0, 0)\n            if (allZero && Object.keys(positions).length > 0) {\n                console.warn('[RelationshipGraph]  (0, 0)');\n                return;\n            }\n            // \n            const firstNodeId = Object.keys(positions)[0];\n            const firstPos = positions[firstNodeId];\n            console.info(`[RelationshipGraph]  [${layout}]:`, Object.keys(positions).length, ` ( \"${firstNodeId}\": ${firstPos?.x?.toFixed(0)}, ${firstPos?.y?.toFixed(0)})`);\n            const config = getGraphConfig();\n            if (!config.layoutPositions) {\n                config.layoutPositions = {};\n            }\n            config.layoutPositions[layout] = positions;\n            saveGraphConfig(config);\n        }\n        /**  */\n        function restoreNodePositions(targetLayout) {\n            if (!cy)\n                return false;\n            const layout = targetLayout || layoutMode.value;\n            const positions = getSavedPositions(layout);\n            if (!positions)\n                return false;\n            // \n            const firstNodeId = Object.keys(positions)[0];\n            const firstSavedPos = positions[firstNodeId];\n            console.info(`[RelationshipGraph]  [${layout}]  ${Object.keys(positions).length}  ( \"${firstNodeId}\": =${firstSavedPos?.x?.toFixed(0)}, ${firstSavedPos?.y?.toFixed(0)})`);\n            let hasRestored = false;\n            let restoredCount = 0;\n            cy.nodes().forEach(node => {\n                const nodeId = node.id();\n                const savedPos = positions[nodeId];\n                if (savedPos) {\n                    const beforePos = node.position();\n                    //  savedPos \n                    console.info(`[RelationshipGraph]  \"${nodeId}\": =(${savedPos.x?.toFixed?.(0) ?? savedPos.x}, ${savedPos.y?.toFixed?.(0) ?? savedPos.y}), =(${beforePos.x.toFixed(0)}, ${beforePos.y.toFixed(0)})`);\n                    node.position({ x: savedPos.x, y: savedPos.y });\n                    const afterPos = node.position();\n                    console.info(`[RelationshipGraph]  \"${nodeId}\": (${beforePos.x.toFixed(0)}, ${beforePos.y.toFixed(0)})  (${afterPos.x.toFixed(0)}, ${afterPos.y.toFixed(0)})`);\n                    hasRestored = true;\n                    restoredCount++;\n                }\n            });\n            if (hasRestored) {\n                console.info(`[RelationshipGraph]  [${layout}]  ${restoredCount} `);\n                cy.fit(undefined, 30);\n            }\n            return hasRestored;\n        }\n        /**  */\n        function clearSavedPositions() {\n            const config = getGraphConfig();\n            if (config.layoutPositions) {\n                delete config.layoutPositions[layoutMode.value];\n                saveGraphConfig(config);\n            }\n            //  layoutMode.value \n            const currentLayout = layoutMode.value;\n            console.info(`[RelationshipGraph]  [${currentLayout}] `);\n            // \n            const layout = cy?.layout(getLayoutConfig(currentLayout));\n            layout?.one('layoutstop', () => {\n                // \n                saveNodePositions(currentLayout);\n            });\n            layout?.run();\n        }\n        /**  */\n        function saveLayoutManually() {\n            saveNodePositions();\n            // \n            const btn = document.querySelector('.acu-graph-btn[title=\"\"]');\n            if (btn) {\n                btn.classList.add('saved');\n                setTimeout(() => btn.classList.remove('saved'), 1000);\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function getLabelConfig() {\n            const config = getGraphConfig();\n            return config.labels || {};\n        }\n        /**  */\n        function saveLabelConfig(labelConfig) {\n            const config = getGraphConfig();\n            config.labels = labelConfig;\n            saveGraphConfig(config);\n        }\n        /**\n         * \n         */\n        function isEnglishName(name) {\n            // \n            return /^[A-Za-z\\s'-]+$/.test(name) && name.includes(' ');\n        }\n        /**\n         * \n         * - : \n         * - : \n         */\n        function getDefaultLabel(fullName) {\n            if (isEnglishName(fullName)) {\n                // \n                const firstName = fullName.split(' ')[0];\n                return firstName.length > 6 ? firstName.slice(0, 6) : firstName;\n            }\n            // \n            return fullName.length > 0 ? fullName[fullName.length - 1] : fullName;\n        }\n        /**\n         * \n         */\n        function getDefaultIndices(fullName) {\n            const chars = getDisplayChars(fullName);\n            if (isEnglishName(fullName)) {\n                // \n                return [0];\n            }\n            // \n            return chars.length > 0 ? [chars.length - 1] : [];\n        }\n        /**\n         * \n         * - \n         * - \n         */\n        function getDisplayChars(fullName) {\n            if (isEnglishName(fullName)) {\n                return fullName.split(' ').filter(Boolean);\n            }\n            return fullName.split('');\n        }\n        /**  */\n        function applyLabelConfig() {\n            if (!cy)\n                return;\n            const config = getLabelConfig();\n            cy.nodes().forEach(node => {\n                const nodeId = node.id();\n                const nodeConfig = config[nodeId];\n                if (nodeConfig && nodeConfig.displayLabel) {\n                    // \n                    node.data('label', nodeConfig.displayLabel);\n                }\n                else {\n                    // node.id() \n                    node.data('label', nodeId);\n                }\n            });\n            console.info('[RelationshipGraph] :', Object.keys(config).length, '');\n        }\n        /**  */\n        function openNodeConfig(nodeId, fullName) {\n            configNodeId.value = nodeId;\n            configNodeFullName.value = fullName;\n            // \n            const config = getLabelConfig();\n            const nodeConfig = config[nodeId];\n            if (nodeConfig && nodeConfig.selectedIndices) {\n                configSelectedIndices.value = new Set(nodeConfig.selectedIndices);\n            }\n            else {\n                // \n                configSelectedIndices.value = new Set(getDefaultIndices(fullName));\n            }\n            showNodeConfig.value = true;\n        }\n        /**  */\n        function toggleCharSelection(index) {\n            const newSet = new Set(configSelectedIndices.value);\n            if (newSet.has(index)) {\n                newSet.delete(index);\n            }\n            else {\n                newSet.add(index);\n            }\n            configSelectedIndices.value = newSet;\n        }\n        /**  */\n        function getPreviewLabel() {\n            if (!configNodeFullName.value)\n                return '';\n            const chars = getDisplayChars(configNodeFullName.value);\n            const selectedChars = Array.from(configSelectedIndices.value)\n                .sort((a, b) => a - b)\n                .map(i => chars[i])\n                .filter(Boolean);\n            if (selectedChars.length === 0) {\n                return getDefaultLabel(configNodeFullName.value);\n            }\n            // \n            if (isEnglishName(configNodeFullName.value)) {\n                return selectedChars.join(' ');\n            }\n            return selectedChars.join('');\n        }\n        /**  */\n        function applyAndClose() {\n            if (!configNodeId.value || !configNodeFullName.value) {\n                closeNodeConfig();\n                return;\n            }\n            const displayLabel = getPreviewLabel();\n            const selectedIndices = Array.from(configSelectedIndices.value);\n            // \n            const config = getLabelConfig();\n            config[configNodeId.value] = {\n                displayLabel,\n                selectedIndices,\n            };\n            saveLabelConfig(config);\n            // \n            if (cy) {\n                const node = cy.getElementById(configNodeId.value);\n                if (node) {\n                    node.data('label', displayLabel);\n                }\n            }\n            closeNodeConfig();\n        }\n        /**  */\n        function resetToFullName() {\n            if (!configNodeId.value || !configNodeFullName.value)\n                return;\n            // \n            const config = getLabelConfig();\n            delete config[configNodeId.value];\n            saveLabelConfig(config);\n            // \n            if (cy) {\n                const node = cy.getElementById(configNodeId.value);\n                if (node) {\n                    node.data('label', configNodeFullName.value);\n                }\n            }\n            closeNodeConfig();\n        }\n        /**  */\n        function closeNodeConfig() {\n            showNodeConfig.value = false;\n            configNodeId.value = null;\n            configSelectedIndices.value = new Set();\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const avatarManagerNodes = computed(() => {\n            if (!parsedData.value || !parsedData.value.elements)\n                return [];\n            //  elements \n            return parsedData.value.elements\n                .filter(el => !el.data.source && !el.data.target) //  source/target\n                .map(el => ({\n                id: el.data.id,\n                // name  id NodeLabelDialog\n                name: el.data.id,\n                // label \n                label: el.data.label || el.data.id,\n                type: el.data.type || 'character',\n            }));\n        });\n        /**  */\n        function openAvatarManager() {\n            showAvatarManager.value = true;\n            //  has-modal \n            const { $ } = getCore();\n            $('.acu-data-display').addClass('has-modal');\n        }\n        /**  */\n        function closeAvatarManager() {\n            showAvatarManager.value = false;\n            //  has-modal \n            const { $ } = getCore();\n            $('.acu-data-display').removeClass('has-modal');\n        }\n        /**  */\n        async function loadAliasMap() {\n            try {\n                const map = await avatarManager.getAliasMap();\n                aliasMap.value = map;\n                console.info(`[RelationshipGraph] : ${map.size} `);\n            }\n            catch (e) {\n                console.warn('[RelationshipGraph] :', e);\n            }\n        }\n        /**  */\n        async function preloadAvatars() {\n            const nodes = parsedData.value.elements.filter(el => !el.data.source && !el.data.target);\n            const cache = new Map();\n            for (const node of nodes) {\n                const nodeName = node.data.id;\n                if (!nodeName)\n                    continue;\n                try {\n                    const url = await avatarManager.getAvatarUrl(nodeName);\n                    if (url) {\n                        // \n                        const displayConfig = await avatarManager.getAvatarDisplayConfig(nodeName);\n                        cache.set(nodeName, {\n                            url,\n                            offsetX: displayConfig.offsetX,\n                            offsetY: displayConfig.offsetY,\n                            scale: displayConfig.scale,\n                        });\n                    }\n                }\n                catch (e) {\n                    console.warn(`[RelationshipGraph] : ${nodeName}`, e);\n                }\n            }\n            avatarCache.value = cache;\n            console.info(`[RelationshipGraph] : ${cache.size}/${nodes.length}`);\n        }\n        /**  */\n        async function handleAvatarUpdate() {\n            console.log('[RelationshipGraph] handleAvatarUpdate ');\n            // \n            await loadAliasMap();\n            await preloadAvatars();\n            if (cy) {\n                // \n                cy.nodes().forEach(node => {\n                    const nodeName = node.id();\n                    const avatarData = avatarCache.value.get(nodeName);\n                    if (avatarData) {\n                        node.data('avatarUrl', avatarData.url);\n                        node.data('avatarOffsetX', avatarData.offsetX);\n                        node.data('avatarOffsetY', avatarData.offsetY);\n                        node.data('avatarScale', avatarData.scale);\n                    }\n                    else {\n                        node.removeData('avatarUrl');\n                        node.removeData('avatarOffsetX');\n                        node.removeData('avatarOffsetY');\n                        node.removeData('avatarScale');\n                    }\n                });\n                // - \n                applyLabelConfig();\n                // \n                cy.nodes().trigger('data');\n                // \n                cy.style().update();\n            }\n        }\n        /**  */\n        function handleLabelChange() {\n            console.log('[RelationshipGraph] handleLabelChange ');\n            if (cy) {\n                // \n                applyLabelConfig();\n                // \n                cy.style().update();\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const isInitialized = ref(false);\n        onMounted(async () => {\n            // \n            await loadAliasMap();\n            // \n            if (hasData.value) {\n                await preloadAvatars();\n                initCytoscape();\n                isInitialized.value = true;\n            }\n        });\n        // \n        watch(hasData, async (newValue) => {\n            if (newValue && !isInitialized.value && containerRef.value) {\n                console.info('[RelationshipGraph] ...');\n                await preloadAvatars();\n                console.info('[RelationshipGraph] ');\n                initCytoscape();\n                isInitialized.value = true;\n            }\n        }, { immediate: true });\n        onBeforeUnmount(() => {\n            // \n            cy?.destroy();\n            cy = null;\n        });\n        // \n        watch(() => props.relationshipTable, () => {\n            if (cy) {\n                updateGraph();\n            }\n        }, { deep: true });\n        //  - \n        watch(() => configStore.config.theme, () => {\n            if (cy) {\n                //  nextTick  setTimeout  CSS \n                setTimeout(() => {\n                    updateNodeColors();\n                }, 50);\n            }\n        });\n        /**\n         * \n         */\n        function updateNodeColors() {\n            if (!cy)\n                return;\n            const colors = getThemeColors();\n            //  - \n            cy.style()\n                .selector('node')\n                .style({\n                'background-color': colors.btnBg, // \n                color: colors.textMain, // \n                'border-width': 1.5, // \n                'border-color': colors.textMain, // \n            })\n                .selector('node.protagonist')\n                .style({\n                'background-color': colors.highlight, // \n                color: colors.textMain,\n                'border-width': 1.5,\n                'border-color': colors.textMain,\n            })\n                .selector('node.faction')\n                .style({\n                'background-color': colors.btnBg,\n                color: colors.textMain,\n                'border-width': 1.5,\n                'border-color': colors.textMain,\n            })\n                .selector('node.unknown')\n                .style({\n                'background-color': colors.btnBg,\n                color: colors.textMain,\n                'border-width': 1.5,\n                'border-color': colors.textMain,\n            })\n                .update();\n        }\n        // \n        __expose({\n            fitToView,\n            zoomIn,\n            zoomOut,\n            setLayout,\n            refresh,\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                (__props.showLegend)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(legend.value, (item) => {\n                            return (_openBlock(), _createElementBlock(\"div\", {\n                                key: item.level,\n                                class: \"acu-legend-item\"\n                            }, [\n                                _createElementVNode(\"span\", {\n                                    class: \"dot\",\n                                    style: _normalizeStyle({ backgroundColor: item.color })\n                                }, null, 4 /* STYLE */),\n                                _createElementVNode(\"span\", _hoisted_3, _toDisplayString(item.emoji) + \" \" + _toDisplayString(item.name), 1 /* TEXT */)\n                            ]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", {\n                    ref_key: \"containerRef\",\n                    ref: containerRef,\n                    class: \"acu-graph-container\"\n                }, null, 512 /* NEED_PATCH */),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createElementVNode(\"button\", {\n                        class: \"acu-graph-btn\",\n                        title: \"\",\n                        onClick: zoomIn\n                    }, [...(_cache[3] || (_cache[3] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-plus\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"button\", {\n                        class: \"acu-graph-btn\",\n                        title: \"\",\n                        onClick: zoomOut\n                    }, [...(_cache[4] || (_cache[4] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-minus\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"button\", {\n                        class: \"acu-graph-btn\",\n                        title: \"\",\n                        onClick: fitToView\n                    }, [...(_cache[5] || (_cache[5] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-compress-arrows-alt\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-graph-btn\", { active: layoutMode.value === 'fcose' }]),\n                        title: \"\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (setLayout('fcose')))\n                    }, [...(_cache[6] || (_cache[6] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-project-diagram\" }, null, -1 /* CACHED */)\n                        ]))], 2 /* CLASS */),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-graph-btn\", { active: layoutMode.value === 'circle' }]),\n                        title: \"\",\n                        onClick: _cache[1] || (_cache[1] = ($event) => (setLayout('circle')))\n                    }, [...(_cache[7] || (_cache[7] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-circle-notch\" }, null, -1 /* CACHED */)\n                        ]))], 2 /* CLASS */),\n                    _createElementVNode(\"button\", {\n                        class: _normalizeClass([\"acu-graph-btn\", { active: layoutMode.value === 'dagre' }]),\n                        title: \"\",\n                        onClick: _cache[2] || (_cache[2] = ($event) => (setLayout('dagre')))\n                    }, [...(_cache[8] || (_cache[8] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-sitemap\" }, null, -1 /* CACHED */)\n                        ]))], 2 /* CLASS */),\n                    _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"acu-toolbar-divider\" }, null, -1 /* CACHED */)),\n                    _createElementVNode(\"button\", {\n                        class: \"acu-graph-btn\",\n                        title: \"\",\n                        onClick: saveLayoutManually\n                    }, [...(_cache[9] || (_cache[9] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-save\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"button\", {\n                        class: \"acu-graph-btn\",\n                        title: \"\",\n                        onClick: clearSavedPositions\n                    }, [...(_cache[10] || (_cache[10] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-undo\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _cache[14] || (_cache[14] = _createElementVNode(\"span\", { class: \"acu-toolbar-divider\" }, null, -1 /* CACHED */)),\n                    _createElementVNode(\"button\", {\n                        class: \"acu-graph-btn\",\n                        title: \"\",\n                        onClick: openAvatarManager\n                    }, [...(_cache[11] || (_cache[11] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-user-circle\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _cache[15] || (_cache[15] = _createElementVNode(\"span\", { class: \"acu-toolbar-divider\" }, null, -1 /* CACHED */)),\n                    _createElementVNode(\"button\", {\n                        class: \"acu-graph-btn\",\n                        title: \"\",\n                        onClick: _withModifiers(handleBackToDashboard, [\"stop\"])\n                    }, [...(_cache[12] || (_cache[12] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-arrow-left\" }, null, -1 /* CACHED */)\n                        ]))])\n                ]),\n                _createCommentVNode(\"  \"),\n                (!hasData.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[16] || (_cache[16] = [\n                            _createElementVNode(\"i\", { class: \"fas fa-project-diagram\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"p\", null, \"\", -1 /* CACHED */),\n                            _createElementVNode(\"p\", { class: \"hint\" }, \"\\\"\\\"\", -1 /* CACHED */)\n                        ]))]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(AvatarManagerDialog), {\n                    visible: showAvatarManager.value,\n                    nodes: avatarManagerNodes.value,\n                    onClose: closeAvatarManager,\n                    onUpdate: handleAvatarUpdate,\n                    onLabelChange: handleLabelChange\n                }, null, 8 /* PROPS */, [\"visible\", \"nodes\"]),\n                _createCommentVNode(\"  -  \"),\n                (showNodeConfig.value)\n                    ? (_openBlock(), _createElementBlock(\"div\", {\n                        key: 2,\n                        class: \"acu-node-config-overlay\",\n                        onClick: _withModifiers(closeNodeConfig, [\"self\"])\n                    }, [\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                _cache[18] || (_cache[18] = _createElementVNode(\"span\", null, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    class: \"acu-close-btn\",\n                                    onClick: _withModifiers(closeNodeConfig, [\"stop\"])\n                                }, [...(_cache[17] || (_cache[17] = [\n                                        _createElementVNode(\"i\", { class: \"fas fa-times\" }, null, -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _createElementVNode(\"p\", _hoisted_9, \"\" + _toDisplayString(configNodeFullName.value), 1 /* TEXT */),\n                                _cache[19] || (_cache[19] = _createElementVNode(\"p\", { class: \"acu-node-hint\" }, \"\", -1 /* CACHED */)),\n                                _createElementVNode(\"div\", _hoisted_10, [\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(getDisplayChars(configNodeFullName.value), (char, index) => {\n                                        return (_openBlock(), _createElementBlock(\"button\", {\n                                            key: index,\n                                            class: _normalizeClass([\"acu-char-btn\", { active: configSelectedIndices.value.has(index) }]),\n                                            onClick: _withModifiers(($event) => (toggleCharSelection(index)), [\"stop\"])\n                                        }, _toDisplayString(char), 11 /* TEXT, CLASS, PROPS */, _hoisted_11));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ]),\n                                _createElementVNode(\"p\", _hoisted_12, \"\" + _toDisplayString(getPreviewLabel()), 1 /* TEXT */),\n                                _createElementVNode(\"div\", _hoisted_13, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-action-btn secondary\",\n                                        onClick: _withModifiers(resetToFullName, [\"stop\"])\n                                    }, \"\"),\n                                    _createElementVNode(\"button\", {\n                                        class: \"acu-action-btn primary\",\n                                        onClick: _withModifiers(applyAndClose, [\"stop\"])\n                                    }, \"\")\n                                ])\n                            ])\n                        ])\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./RelationshipGraph.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RelationshipGraph.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./RelationshipGraph.vue?vue&type=style&index=0&id=b32a3978&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeStyle as _normalizeStyle, Transition as _Transition, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = [\"title\", \"onClick\"];\nimport { computed } from 'vue';\nimport { useDataStore } from '../stores/useDataStore';\nimport { TAB_DASHBOARD, TAB_OPTIONS, TAB_RELATIONSHIP_GRAPH, useUIStore } from '../stores/useUIStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TabsPopup',\n    props: {\n        visible: { type: Boolean },\n        tabs: {},\n        activeTab: {},\n        gridColumns: { default: 'repeat(auto-fill, minmax(90px, 1fr))' },\n        showDashboard: { type: Boolean, default: true },\n        showRelationshipGraph: { type: Boolean, default: false },\n        showOptionsPanel: { type: Boolean, default: false }\n    },\n    emits: [\"close\", \"tab-click\"],\n    setup(__props, { emit: __emit }) {\n        /**\n         * TabsPopup - Tab \n         *\n         * :\n         * - Tab Tab\n         * -  Tab \n         * -  TabBar \n         * -  useUIStore  visibleTabs  Tab TabBar \n         *\n         * :\n         * - MainPanel \"Tab\"\n         */\n        const props = __props;\n        const emit = __emit;\n        const dataStore = useDataStore();\n        const uiStore = useUIStore();\n        /**\n         *  Tab (//)\n         */\n        function isSpecialTab(tabId) {\n            return tabId === TAB_DASHBOARD || tabId === TAB_OPTIONS || tabId === TAB_RELATIONSHIP_GRAPH;\n        }\n        /**\n         *  Tab \n         */\n        function createTabObject(tabId) {\n            if (tabId === TAB_DASHBOARD) {\n                return { id: TAB_DASHBOARD, name: '', icon: 'fas fa-home' };\n            }\n            if (tabId === TAB_RELATIONSHIP_GRAPH) {\n                return { id: TAB_RELATIONSHIP_GRAPH, name: '', icon: 'fas fa-project-diagram' };\n            }\n            if (tabId === TAB_OPTIONS) {\n                return { id: TAB_OPTIONS, name: '', icon: 'fas fa-sliders-h' };\n            }\n            return props.tabs.find(t => t.id === tabId);\n        }\n        /**\n         *  Tab \n         * -  visibleTabs  ->  ->  -> \n         * -  visibleTabs \n         *\n         *  TabBar.vue  allVisibleTabs \n         */\n        const allVisibleTabs = computed(() => {\n            const visibleTabs = uiStore.visibleTabs;\n            // 1. \n            if (!visibleTabs || visibleTabs.length === 0) {\n                const tabs = [];\n                // \n                if (props.showDashboard) {\n                    tabs.push({ id: TAB_DASHBOARD, name: '', icon: 'fas fa-home' });\n                }\n                // \n                tabs.push(...props.tabs);\n                // \n                if (props.showRelationshipGraph) {\n                    tabs.push({ id: TAB_RELATIONSHIP_GRAPH, name: '', icon: 'fas fa-project-diagram' });\n                }\n                // \n                if (props.showOptionsPanel) {\n                    tabs.push({ id: TAB_OPTIONS, name: '', icon: 'fas fa-sliders-h' });\n                }\n                return tabs;\n            }\n            // 2. \n            return visibleTabs\n                .map(tabId => createTabObject(tabId))\n                .filter((tab) => {\n                //  undefined  Tab\n                if (!tab)\n                    return false;\n                if (tab.id === TAB_DASHBOARD && !props.showDashboard)\n                    return false;\n                if (tab.id === TAB_RELATIONSHIP_GRAPH && !props.showRelationshipGraph)\n                    return false;\n                if (tab.id === TAB_OPTIONS && !props.showOptionsPanel)\n                    return false;\n                return true;\n            });\n        });\n        /**\n         *  Tab \n         * @param tabName Tab \n         */\n        function hasTabIssues(tabName) {\n            return dataStore.hasTableIssues(tabName);\n        }\n        /**\n         *  Tab  AI \n         * @param tabName Tab \n         */\n        function hasTabAiChanges(tabName) {\n            return dataStore.hasTableAiChanges(tabName);\n        }\n        /**\n         *  Tab \n         * @param tabId Tab ID\n         */\n        const handleTabClick = (tabId) => {\n            emit('tab-click', tabId);\n            emit('close');\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(_Transition, { name: \"hidden-popup\" }, {\n                default: _withCtx(() => [\n                    (__props.visible)\n                        ? (_openBlock(), _createElementBlock(\"div\", {\n                            key: 0,\n                            class: \"acu-tabs-popup\",\n                            onClick: _cache[0] || (_cache[0] = _withModifiers(() => { }, [\"stop\"]))\n                        }, [\n                            _createElementVNode(\"div\", {\n                                class: \"popup-tabs-grid\",\n                                style: _normalizeStyle({ '--acu-nav-cols': __props.gridColumns })\n                            }, [\n                                _createCommentVNode(\"  Tab  \"),\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(allVisibleTabs.value, (tab) => {\n                                    return (_openBlock(), _createElementBlock(\"button\", {\n                                        key: tab.id,\n                                        class: _normalizeClass([\"acu-nav-btn\", {\n                                                'acu-nav-btn-special': isSpecialTab(tab.id),\n                                                active: __props.activeTab === tab.id,\n                                                'has-issues': !isSpecialTab(tab.id) && hasTabIssues(tab.name),\n                                                'has-ai-changes': !isSpecialTab(tab.id) && !hasTabIssues(tab.name) && hasTabAiChanges(tab.name),\n                                            }]),\n                                        title: tab.name,\n                                        onClick: _withModifiers(($event) => (handleTabClick(tab.id)), [\"stop\"])\n                                    }, [\n                                        (tab.icon)\n                                            ? (_openBlock(), _createElementBlock(\"i\", {\n                                                key: 0,\n                                                class: _normalizeClass(tab.icon)\n                                            }, null, 2 /* CLASS */))\n                                            : _createCommentVNode(\"v-if\", true),\n                                        _createElementVNode(\"span\", null, _toDisplayString(tab.name), 1 /* TEXT */)\n                                    ], 10 /* CLASS, PROPS */, _hoisted_1));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ], 4 /* STYLE */)\n                        ]))\n                        : _createCommentVNode(\"v-if\", true)\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TabsPopup.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TabsPopup.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TabsPopup.vue?vue&type=style&index=0&id=07936994&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.26_typescript@6.0.0-dev.20250807__webpack@5.104.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-07936994\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, normalizeStyle as _normalizeStyle, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, Fragment as _Fragment, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, withCtx as _withCtx, normalizeClass as _normalizeClass } from \"vue\";\nimport { computed, nextTick, onMounted, onUnmounted, provide, reactive, ref, watch, watchEffect } from 'vue';\n// \nimport { ContextMenu, Dashboard, DataTable, FloatingBall, MainPanel, OptionsPanel, RelationshipGraph, TabBar, TabsPopup, Toast, } from './components';\nimport { AvatarCropDialog, DashboardWidgetManagerDialog, HistoryDialog, InputFloorDialog, ManualUpdateDialog, PurgeRangeDialog, RowEditDialog, SettingsDialog, WidgetActionsDialog, WidgetSettingsDialog, } from './components/dialogs';\n// Store \nimport { useConfigStore } from './stores/useConfigStore';\nimport { useDataStore } from './stores/useDataStore';\nimport { TAB_DASHBOARD, TAB_OPTIONS, TAB_RELATIONSHIP_GRAPH, useUIStore } from './stores/useUIStore';\n// Composables \nimport { useApiCallbacks } from './composables/useApiCallbacks';\nimport { useCoreActions } from './composables/useCoreActions';\nimport { useDataPersistence } from './composables/useDataPersistence';\nimport { useParentStyleInjection } from './composables/useParentStyleInjection';\nimport { useRowHistory } from './composables/useRowHistory';\nimport { useSwipeEnhancement } from './composables/useSwipeEnhancement';\nimport { toast, useToast } from './composables/useToast';\nimport { useTouchScrollFix } from './composables/useTouchScrollFix';\n// \nimport { isCharacterTable, processJsonData } from './utils';\n\nimport { h } from 'vue';\n// ============================================================\n// Store \n// ============================================================\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        /**\n         * App.vue - ACU \n         *\n         * \n         */\n        const uiStore = useUIStore();\n        const dataStore = useDataStore();\n        const configStore = useConfigStore();\n        // ============================================================\n        // Composables\n        // ============================================================\n        const { init: initStyles, cleanup: cleanupStyles } = useParentStyleInjection();\n        const { saveToDatabase, getTableData, purgeFloorRange: executePurgeFloorRange, stopAutoSave } = useDataPersistence();\n        const { state: toastState } = useToast();\n        // - \n        useTouchScrollFix();\n        // API - \n        useApiCallbacks();\n        // Swipe -  onMounted \n        const swipeEnhancement = useSwipeEnhancement();\n        // init()  onMounted  DOM \n        // ============================================================\n        // Refs\n        // ============================================================\n        const floatingBallRef = ref();\n        const mainPanelRef = ref();\n        // ============================================================\n        // Provide ()\n        // ============================================================\n        //  DataTable \n        provide('allTables', () => processedTables.value);\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        const searchTerm = ref('');\n        /**  */\n        const isContentHidden = ref(false);\n        /**  */\n        const showSettingsDialog = ref(false);\n        const showInputFloorDialog = ref(false);\n        const showPurgeRangeDialog = ref(false);\n        const showManualUpdateDialog = ref(false);\n        const showHistoryDialog = ref(false);\n        const showTabsPopup = ref(false);\n        /**  */\n        const historyDialogData = reactive({\n            tableName: '',\n            tableId: '',\n            rowIndex: 0,\n            currentRowData: null,\n            titleColIndex: 1, // \n        });\n        /**  */\n        const contextMenuState = reactive({\n            visible: false,\n            x: 0,\n            y: 0,\n            tableId: '',\n            tableName: '',\n            rowIndex: 0,\n            isDeleting: false,\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  class */\n        const appClasses = computed(() => [\n            `acu-theme-${configStore.config.theme}`,\n            `acu-font-${configStore.config.fontFamily.replace(/\\s+/g, '-').toLowerCase()}`,\n            {\n                'acu-mobile': uiStore.isMobile,\n                'acu-layout-horizontal': configStore.config.layout === 'horizontal',\n                'acu-layout-vertical': configStore.config.layout === 'vertical',\n            },\n        ]);\n        /**  */\n        const panelTitle = computed(() => {\n            if (uiStore.activeTab === TAB_DASHBOARD)\n                return 'ACU ';\n            if (uiStore.activeTab === TAB_OPTIONS)\n                return 'ACU ';\n            return `ACU - ${uiStore.activeTab || ''}`;\n        });\n        /**  */\n        const processedTables = computed(() => {\n            const staged = dataStore.stagedData;\n            if (!staged)\n                return [];\n            //  processJsonData \n            // : { sheetId: { name: string, content: string[][] } }\n            // : { tableName: { key: sheetId, headers: string[], rows: string[][] } }\n            const processed = processJsonData(staged);\n            if (!processed)\n                return [];\n            return Object.entries(processed).map(([tableName, tableData]) => {\n                const { key: sheetId, headers, rows: rawRows } = tableData;\n                //  string[][]  TableRow[] \n                const rows = rawRows.map((rowData, rowIndex) => {\n                    // rowData  string[]  headers  cells\n                    const cells = rowData.map((cellValue, colIndex) => ({\n                        colIndex,\n                        key: headers[colIndex] || `col_${colIndex}`,\n                        value: String(cellValue ?? ''),\n                    }));\n                    return {\n                        index: rowIndex,\n                        key: `${tableName}-row-${rowIndex}`,\n                        cells,\n                    };\n                });\n                return {\n                    id: sheetId, //  sheetId  ID\n                    name: tableName,\n                    headers: headers.map(h => String(h)), //  headers \n                    rows,\n                };\n            });\n        });\n        /** Tab  */\n        const tabList = computed(() => {\n            return processedTables.value.map(table => ({\n                id: table.id,\n                name: table.name,\n                icon: getTableIcon(table.name),\n            }));\n        });\n        /**  */\n        const hasOptionsTabs = computed(() => {\n            return processedTables.value.some(t => t.name.includes('') || t.name.toLowerCase().includes('option'));\n        });\n        /** Tab */\n        const isTabBarCollapsed = computed(() => {\n            return configStore.config.collapseTabBar === true;\n        });\n        /**  */\n        const optionsTables = computed(() => {\n            return processedTables.value.filter(t => t.name.includes('') || t.name.toLowerCase().includes('option'));\n        });\n        /**  Tab  */\n        const hasRelationshipData = computed(() => {\n            return processedTables.value.some(t => isCharacterTable(t.name, t.id));\n        });\n        /**\n         * \n         */\n        const relationshipTableData = computed(() => {\n            return (processedTables.value.find(t => {\n                const name = t.name.toLowerCase();\n                const id = t.id.toLowerCase();\n                return name.includes('') || id.includes('relationship') || id.includes('relation');\n            }) || null);\n        });\n        /**\n         * \n         */\n        const characterTablesData = computed(() => {\n            return processedTables.value.filter(t => isCharacterTable(t.name, t.id));\n        });\n        /**\n         * \n         */\n        const factionTableData = computed(() => {\n            const keywords = ['', 'faction', '', 'organization', ''];\n            return (processedTables.value.find(t => {\n                const name = t.name.toLowerCase();\n                const id = t.id.toLowerCase();\n                return keywords.some(kw => name.includes(kw) || id.includes(kw));\n            }) || null);\n        });\n        /**  */\n        const currentTable = computed(() => {\n            if (!uiStore.activeTab)\n                return null;\n            return processedTables.value.find(t => t.id === uiStore.activeTab) || null;\n        });\n        /**  */\n        const currentTargetFloor = computed(() => {\n            //  dataStore \n            return 0; //  dataStore \n        });\n        /**  */\n        const maxFloorIndex = computed(() => {\n            // \n            const chat = window.SillyTavern?.chat;\n            return Array.isArray(chat) ? chat.length - 1 : 0;\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**  */\n        function getTableIcon(tableName) {\n            const name = tableName.toLowerCase();\n            if (name.includes('') || name.includes('player'))\n                return 'fas fa-user';\n            if (name.includes('npc') || name.includes(''))\n                return 'fas fa-users';\n            if (name.includes('') || name.includes('quest'))\n                return 'fas fa-tasks';\n            if (name.includes('') || name.includes('item'))\n                return 'fas fa-box-open';\n            if (name.includes('') || name.includes('skill'))\n                return 'fas fa-magic';\n            if (name.includes('') || name.includes('equip'))\n                return 'fas fa-shield-alt';\n            if (name.includes('') || name.includes('status'))\n                return 'fas fa-heart';\n            if (name.includes('') || name.includes('event'))\n                return 'fas fa-calendar-alt';\n            if (name.includes('') || name.includes('option'))\n                return 'fas fa-sliders-h';\n            return 'fas fa-table';\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  -  */\n        function handleBallClick() {\n            uiStore.openPanel();\n            isContentHidden.value = false;\n            console.info('[ACU] ');\n        }\n        /**  -  */\n        function handleBallDoubleClick() {\n            floatingBallRef.value?.setDocked(true);\n            console.info('[ACU] ');\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function handlePanelClose() {\n            uiStore.closePanel();\n            console.info('[ACU] ');\n        }\n        /**  */\n        function handleHideContent() {\n            isContentHidden.value = !isContentHidden.value;\n        }\n        /**  */\n        function handleToggle() {\n            uiStore.isCollapsed = true;\n            console.info('[ACU] ');\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /** Tab  */\n        function handleTabChange(tabId) {\n            //  Tab MainPanel \n            if (tabId && mainPanelRef.value) {\n                mainPanelRef.value.exitCenteredMode();\n            }\n            // 1. Tab\n            const dataAreaEl = mainPanelRef.value?.getDataAreaElement();\n            if (dataAreaEl) {\n                dataAreaEl.style.height = '';\n                dataAreaEl.style.minHeight = '';\n                dataAreaEl.style.maxHeight = '';\n            }\n            uiStore.setActiveTab(tabId);\n            searchTerm.value = '';\n            // Bug2: tab\n            isContentHidden.value = false;\n            console.info(`[ACU]  Tab: ${tabId}`);\n            // 2.  DOM \n            //  setTimeout  rAF\n            nextTick(() => {\n                //  50ms \n                setTimeout(() => {\n                    requestAnimationFrame(() => {\n                        restoreTableHeight(tabId);\n                    });\n                }, 50);\n            });\n        }\n        /**\n         * \n         * @param tabId Tab ID\n         */\n        function restoreTableHeight(tabId) {\n            const dataAreaEl = mainPanelRef.value?.getDataAreaElement();\n            if (!dataAreaEl)\n                return;\n            const savedHeight = uiStore.getTableHeight(tabId);\n            if (savedHeight) {\n                // \n                dataAreaEl.style.height = `${savedHeight}px`;\n                console.info(`[ACU] : ${tabId} = ${savedHeight}px`);\n            }\n            else {\n                // \n                mainPanelRef.value?.resetHeight();\n            }\n        }\n        /** Tab  */\n        function handleTabsReorder(newOrder) {\n            uiStore.setTableOrder(newOrder);\n            console.info('[ACU] Tab ');\n        }\n        /** Tab - /Tab */\n        function handleCollapseTabClick() {\n            showTabsPopup.value = !showTabsPopup.value;\n            console.info(`[ACU] Tab: ${showTabsPopup.value ? '' : ''}`);\n        }\n        /** Tab - Tab */\n        function handleTabsPopupClick(tabId) {\n            showTabsPopup.value = false;\n            handleTabChange(tabId);\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function handleNavigateToTable(tableId) {\n            // 1. Tab\n            const dataAreaEl = mainPanelRef.value?.getDataAreaElement();\n            if (dataAreaEl) {\n                dataAreaEl.style.height = '';\n                dataAreaEl.style.minHeight = '';\n                dataAreaEl.style.maxHeight = '';\n            }\n            uiStore.setActiveTab(tableId);\n            console.info(`[ACU] : ${tableId}`);\n            // 2. \n            nextTick(() => {\n                setTimeout(() => {\n                    requestAnimationFrame(() => {\n                        restoreTableHeight(tableId);\n                    });\n                }, 50);\n            });\n        }\n        /**  -  Tab */\n        function handleShowRelationshipGraph() {\n            if (hasRelationshipData.value) {\n                uiStore.setActiveTab(TAB_RELATIONSHIP_GRAPH);\n                console.info('[ACU]  Tab');\n            }\n            else {\n                toast.warning('');\n            }\n        }\n        /**  */\n        function handleDashboardAction(actionId, tableId) {\n            switch (actionId) {\n                case 'clear':\n                    // \n                    showPurgeRangeDialog.value = true;\n                    break;\n                case 'undo':\n                    // \n                    handleUndo();\n                    break;\n                case 'manualUpdate':\n                    // \n                    handleManualUpdate();\n                    break;\n                default:\n                    console.log('[ACU Dashboard] :', actionId, tableId);\n            }\n        }\n        /**  */\n        function handleTableClose() {\n            uiStore.setActiveTab(TAB_DASHBOARD);\n            console.info('[ACU] ');\n        }\n        /**  -  MainPanel  */\n        function handleHeightDragStart(event, handleEl) {\n            //  MainPanel \n            const dataAreaEl = mainPanelRef.value?.getDataAreaElement();\n            if (!dataAreaEl)\n                return;\n            // \n            if (event.button !== 0)\n                return;\n            event.preventDefault();\n            event.stopPropagation();\n            //  handleEl \n            handleEl.setPointerCapture(event.pointerId);\n            const startY = event.clientY;\n            const startHeight = dataAreaEl.offsetHeight;\n            const handlePointerMove = (moveE) => {\n                const dy = startY - moveE.clientY;\n                let newHeight = startHeight + dy;\n                // \n                const minHeight = 200;\n                const parentHeight = window.parent?.innerHeight ?? window.innerHeight;\n                const maxHeight = parentHeight * 0.8;\n                newHeight = Math.max(minHeight, Math.min(maxHeight, newHeight));\n                dataAreaEl.style.height = `${newHeight}px`;\n            };\n            const handlePointerUp = (upE) => {\n                handleEl.releasePointerCapture(upE.pointerId);\n                handleEl.removeEventListener('pointermove', handlePointerMove);\n                handleEl.removeEventListener('pointerup', handlePointerUp);\n                // \n                const currentTabName = uiStore.activeTab;\n                if (currentTabName && dataAreaEl) {\n                    const finalHeight = dataAreaEl.offsetHeight;\n                    uiStore.setTableHeight(currentTabName, finalHeight);\n                    console.info(`[ACU] : ${currentTabName} = ${finalHeight}px`);\n                }\n            };\n            handleEl.addEventListener('pointermove', handlePointerMove);\n            handleEl.addEventListener('pointerup', handlePointerUp);\n        }\n        /**  -  MainPanel  */\n        function handleHeightReset() {\n            // \n            const currentTabName = uiStore.activeTab;\n            if (currentTabName) {\n                uiStore.resetTableHeight(currentTabName);\n                console.info(`[ACU] : ${currentTabName}`);\n            }\n            mainPanelRef.value?.resetHeight();\n            console.info('[ACU] ');\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        async function loadData() {\n            const data = getTableData();\n            if (data) {\n                // setStagedData \n                const processedData = dataStore.setStagedData(data);\n                //  AI \n                dataStore.saveSnapshot(processedData);\n                // \n                const allTableIds = Object.keys(data).filter(k => k.startsWith('sheet_'));\n                uiStore.syncNewTablesToVisibleTabs(allTableIds);\n                // AI\n                dataStore.clearChanges(true);\n            }\n        }\n        /**  */\n        async function handleRefresh() {\n            try {\n                await loadData();\n                console.info('[ACU] ');\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n            }\n        }\n        /**  */\n        async function handleSave() {\n            try {\n                // \n                dataStore.saveLastState();\n                //  commitDeletes = true\n                const success = await saveToDatabase(null, false, true);\n                if (success) {\n                    console.info('[ACU] ');\n                    // \n                    await loadData();\n                }\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n            }\n        }\n        /**  */\n        function handleUndo() {\n            if (!dataStore.hasUndoData) {\n                toast.warning('');\n                return;\n            }\n            // \n            //  manualDiffMap hasUnsavedChanges  true\n            const success = dataStore.undoToLastSave();\n            if (success) {\n                toast.success('');\n                console.info('[ACU] , hasUnsavedChanges:', dataStore.hasUnsavedChanges);\n            }\n            else {\n                toast.error('');\n            }\n        }\n        /**  */\n        function handleCellClick(tableId, rowIndex, colIndex) {\n            console.info(`[ACU] : ${tableId}[${rowIndex}][${colIndex}]`);\n        }\n        /**  */\n        function handleRowClick(tableId, row) {\n            console.info(`[ACU] : ${tableId}[${row.index}]`);\n        }\n        /**  */\n        async function handleInsertRow(tableId, afterIndex) {\n            console.info(`[ACU] : ${tableId}  ${afterIndex} `);\n            //  sheetIdtableId  sheetId\n            const table = processedTables.value.find(t => t.id === tableId);\n            if (!table) {\n                console.warn('[ACU] :', tableId);\n                return;\n            }\n            // \n            const { insertRow } = useCoreActions();\n            await insertRow(tableId, afterIndex);\n            // \n            await loadData();\n        }\n        /**  */\n        function handleToggleDelete(tableId, rowIndex) {\n            // DataCard  tableName  rowKey\n            const table = processedTables.value.find(t => t.id === tableId);\n            const tableName = table?.name || tableId;\n            const rowKey = `${tableName}-row-${rowIndex}`;\n            dataStore.toggleDelete(rowKey);\n            console.info(`[ACU] : ${rowKey}`);\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function handleContextMenu(event, tableId, rowIndex) {\n            //  rowKey DataCard \n            const table = processedTables.value.find(t => t.id === tableId);\n            const tableName = table?.name || tableId;\n            const rowKey = `${tableName}-row-${rowIndex}`;\n            contextMenuState.visible = true;\n            contextMenuState.x = event.clientX;\n            contextMenuState.y = event.clientY;\n            contextMenuState.tableId = tableId;\n            contextMenuState.tableName = tableName;\n            contextMenuState.rowIndex = rowIndex;\n            contextMenuState.isDeleting = dataStore.pendingDeletes.has(rowKey);\n        }\n        /**  -  */\n        function handleContextInsertRow() {\n            handleInsertRow(contextMenuState.tableId, contextMenuState.rowIndex);\n            contextMenuState.visible = false;\n        }\n        /**  -  */\n        function handleContextCopy() {\n            const table = processedTables.value.find(t => t.id === contextMenuState.tableId);\n            const row = table?.rows[contextMenuState.rowIndex];\n            if (row) {\n                const text = row.cells.map(c => `${c.key}: ${c.value}`).join('\\n');\n                navigator.clipboard.writeText(text).then(() => {\n                    console.info('[ACU] ');\n                });\n            }\n            contextMenuState.visible = false;\n        }\n        /**  -  */\n        function handleContextDelete() {\n            handleToggleDelete(contextMenuState.tableId, contextMenuState.rowIndex);\n            contextMenuState.visible = false;\n        }\n        /**  -  */\n        function handleContextUndoDelete() {\n            handleToggleDelete(contextMenuState.tableId, contextMenuState.rowIndex);\n            contextMenuState.visible = false;\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function handleShowHistory(tableId, tableName, rowIndex, rowData) {\n            historyDialogData.tableId = tableId;\n            historyDialogData.tableName = tableName;\n            historyDialogData.rowIndex = rowIndex;\n            historyDialogData.currentRowData = rowData;\n            //  titleColIndex DataTable.vue \n            const table = processedTables.value.find(t => t.id === tableId);\n            if (table && (tableName.includes('') || tableName.includes(''))) {\n                const idx = table.headers.findIndex(h => h && (h.includes('') || h.includes('') || h.includes('')));\n                historyDialogData.titleColIndex = idx > 0 ? idx : 1;\n            }\n            else {\n                historyDialogData.titleColIndex = 1;\n            }\n            showHistoryDialog.value = true;\n            console.info(`[ACU] : ${tableName}[${rowIndex}], titleColIndex=${historyDialogData.titleColIndex}`);\n        }\n        /**  */\n        async function handleHistoryApply(changes) {\n            const { tableId, tableName, rowIndex, currentRowData } = historyDialogData;\n            if (!currentRowData || changes.size === 0) {\n                showHistoryDialog.value = false;\n                return;\n            }\n            // \n            const { saveSnapshot, getCurrentChatId } = useRowHistory();\n            const chatId = getCurrentChatId();\n            if (chatId) {\n                await saveSnapshot(tableName, rowIndex, tableRowToCells(currentRowData), 'manual');\n                console.info('[ACU] ');\n            }\n            // \n            for (const [colIndex, value] of changes) {\n                dataStore.updateCell(tableName, rowIndex, colIndex, value, { skipHistory: true });\n            }\n            console.info(`[ACU] : ${changes.size} `);\n            showHistoryDialog.value = false;\n        }\n        /**  TableRow  cells  */\n        function tableRowToCells(row) {\n            const cells = {};\n            row.cells.forEach((cell, index) => {\n                cells[index] = String(cell.value);\n            });\n            return cells;\n        }\n        // ============================================================\n        //  - \n        // ============================================================\n        /**  */\n        function handleSettingsSave() {\n            console.info('[ACU] ');\n        }\n        /**  -  */\n        function handleManualUpdate() {\n            showManualUpdateDialog.value = true;\n        }\n        /**  */\n        function handleOpenNative() {\n            try {\n                const w = window.parent || window;\n                const api = w.AutoCardUpdaterAPI || window.AutoCardUpdaterAPI;\n                if (api && typeof api.openVisualizer === 'function') {\n                    api.openVisualizer();\n                    console.info('[ACU] ');\n                }\n                else {\n                    console.warn('[ACU] AutoCardUpdaterAPI.openVisualizer ');\n                }\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n            }\n        }\n        /**  */\n        async function handleSaveToFloor(floorIndex) {\n            try {\n                const success = await saveToDatabase(null, false, false, floorIndex);\n                if (success) {\n                    console.info(`[ACU]  ${floorIndex} `);\n                }\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n            }\n        }\n        /**  */\n        async function handlePurgeRange(startFloor, endFloor) {\n            try {\n                await executePurgeFloorRange(startFloor, endFloor);\n                console.info(`[ACU]  ${startFloor}  ${endFloor} `);\n                // \n                await loadData();\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n            }\n        }\n        // ============================================================\n        // \n        // ============================================================\n        onMounted(async () => {\n            console.info('[ACU] App ');\n            // \n            initStyles();\n            //  Swipe  onMounted  DOM \n            try {\n                swipeEnhancement.init();\n                console.info('[ACU] Swipe ');\n            }\n            catch (error) {\n                console.error('[ACU] Swipe :', error);\n            }\n            // \n            uiStore.setMobile(window.innerWidth <= 768);\n            // \n            window.addEventListener('resize', () => {\n                uiStore.setMobile(window.innerWidth <= 768);\n            });\n            // \n            try {\n                await loadData();\n                uiStore.setInitialized(true);\n                //  Tab\n                //  6.4.1 tab\n                // \n                let isCenteredMode = false;\n                try {\n                    const winConfigRaw = localStorage.getItem('acu_win_config');\n                    const winConfig = winConfigRaw ? JSON.parse(winConfigRaw) : null;\n                    // \n                    if (winConfig?.isCentered === true) {\n                        isCenteredMode = true;\n                        //  activeTab  null\n                        uiStore.setActiveTab(null);\n                        // \n                        uiStore.isCollapsed = false;\n                        console.info('[ACU]  Tab');\n                    }\n                }\n                catch (e) {\n                    // \n                }\n                //  activeTab \n                if (!isCenteredMode && !uiStore.activeTab && processedTables.value.length > 0) {\n                    uiStore.setActiveTab(TAB_DASHBOARD);\n                }\n            }\n            catch (error) {\n                console.error('[ACU] :', error);\n            }\n        });\n        onUnmounted(() => {\n            console.info('[ACU] App ');\n            //  ()\n            stopAutoSave();\n            // \n            cleanupStyles();\n        });\n        // ============================================================\n        // \n        // ============================================================\n        /**\n         *  ACU \n         * @param target \n         * @returns  ACU  true\n         */\n        function isInsideACU(target) {\n            const parentDoc = window.parent?.document || document;\n            //  InlineEditor\n            if (parentDoc.querySelector('.acu-inline-editor')) {\n                console.info('[ACU]  InlineEditor ');\n                return true;\n            }\n            // \n            if (parentDoc.querySelector('.acu-editing-lock')) {\n                console.info('[ACU] ');\n                return true;\n            }\n            // textarea  input \n            const activeElement = parentDoc.activeElement;\n            if (activeElement && (activeElement.tagName === 'TEXTAREA' || activeElement.tagName === 'INPUT')) {\n                //  ACU  ACU \n                if (activeElement.closest('.acu-wrapper') || activeElement.closest('.acu-inline-editor')) {\n                    console.info('[ACU]  ACU ');\n                    return true;\n                }\n            }\n            // \n            if (showSettingsDialog.value ||\n                showInputFloorDialog.value ||\n                showPurgeRangeDialog.value ||\n                showManualUpdateDialog.value ||\n                showHistoryDialog.value) {\n                return true;\n            }\n            // \n            return !!(target.closest('.acu-wrapper') || // \n                target.closest('.acu-floating-ball-vue') || // \n                target.closest('.acu-context-menu') || // \n                target.closest('.acu-modal-overlay') || // \n                target.closest('.acu-modal') || // \n                target.closest('.acu-modal-container') || // \n                target.closest('.acu-history-modal') || // \n                target.closest('.acu-dialog') || // \n                target.closest('[class*=\"acu-settings\"]') || // \n                target.closest('#acu_visualizer_vue-root') || // Vue \n                target.closest('.acu-inline-editor') || // \n                target.closest('.acu-editing-lock') || // \n                target.closest('.acu-edit-textarea') // \n            );\n        }\n        //  onClickOutside \n        //  document \n        onMounted(() => {\n            const parentDoc = window.parent?.document || document;\n            const handleClickOutside = (event) => {\n                // \n                if (!uiStore.isPanelVisible || uiStore.isPinned) {\n                    return;\n                }\n                const target = event.target;\n                //  ACU \n                if (isInsideACU(target)) {\n                    return;\n                }\n                // \n                uiStore.closePanel();\n                console.info('[ACU] ');\n            };\n            // \n            parentDoc.addEventListener('click', handleClickOutside);\n            // \n            onUnmounted(() => {\n                parentDoc.removeEventListener('click', handleClickOutside);\n            });\n        });\n        // ============================================================\n        // \n        // ============================================================\n        //  CSS \n        watchEffect(() => {\n            const safeArea = configStore.config.mobileSafeAreaBottom ?? 50;\n            if (window.parent?.document?.documentElement) {\n                window.parent.document.documentElement.style.setProperty('--acu-safe-area-bottom', `${safeArea}px`);\n            }\n        });\n        //  diffMap\n        watch(() => dataStore.stagedData, newData => {\n            if (newData) {\n                dataStore.generateDiffMap(newData);\n            }\n        }, { deep: true });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"acu-app\", appClasses.value])\n            }, [\n                _createCommentVNode(\"  () \"),\n                _createCommentVNode(\" :style  iframe  src/ \"),\n                _createVNode(_unref(FloatingBall), {\n                    ref_key: \"floatingBallRef\",\n                    ref: floatingBallRef,\n                    style: _normalizeStyle({ display: _unref(uiStore).isPanelVisible ? 'none' : 'block' })\n                }, null, 8 /* PROPS */, [\"style\"]),\n                _createCommentVNode(\"  \"),\n                _createCommentVNode(\" :style  iframe  src/ \"),\n                _createVNode(_unref(MainPanel), {\n                    ref_key: \"mainPanelRef\",\n                    ref: mainPanelRef,\n                    style: _normalizeStyle({ display: _unref(uiStore).isPanelVisible ? 'flex' : 'none' }),\n                    title: panelTitle.value,\n                    theme: _unref(configStore).config.theme,\n                    layout: _unref(configStore).config.layout,\n                    \"is-collapsed\": _unref(uiStore).isCollapsed,\n                    \"is-pinned\": _unref(uiStore).isPinned,\n                    \"is-content-hidden\": isContentHidden.value,\n                    \"lock-panel\": _unref(configStore).config.lockPanel,\n                    \"has-changes\": _unref(dataStore).hasUnsavedChanges,\n                    onRefresh: handleRefresh,\n                    onSave: handleSave,\n                    onSaveAs: _cache[3] || (_cache[3] = ($event) => (showInputFloorDialog.value = true)),\n                    onUndo: handleUndo,\n                    onManualUpdate: handleManualUpdate,\n                    onPurge: _cache[4] || (_cache[4] = ($event) => (showPurgeRangeDialog.value = true)),\n                    onOpenNative: handleOpenNative,\n                    onSettings: _cache[5] || (_cache[5] = ($event) => (showSettingsDialog.value = true)),\n                    onTogglePin: _unref(uiStore).togglePin,\n                    onToggle: handleToggle,\n                    onClose: handlePanelClose,\n                    onHideContent: handleHideContent,\n                    onCollapseTab: handleCollapseTabClick\n                }, {\n                    tabs: _withCtx(() => [\n                        (!isTabBarCollapsed.value)\n                            ? (_openBlock(), _createBlock(_unref(TabBar), {\n                                key: 0,\n                                tabs: tabList.value,\n                                \"active-tab\": _unref(uiStore).activeTab,\n                                \"show-dashboard\": true,\n                                \"has-options-tabs\": hasOptionsTabs.value,\n                                \"has-relationship-graph\": hasRelationshipData.value,\n                                \"is-editing-order\": _unref(uiStore).isEditingOrder,\n                                \"grid-columns\": _unref(configStore).gridColumnsCss,\n                                onTabChange: handleTabChange,\n                                onOrderChange: handleTabsReorder,\n                                onExitEditing: _cache[0] || (_cache[0] = ($event) => (_unref(uiStore).setEditingOrder(false)))\n                            }, null, 8 /* PROPS */, [\"tabs\", \"active-tab\", \"has-options-tabs\", \"has-relationship-graph\", \"is-editing-order\", \"grid-columns\"]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    \"tabs-popup\": _withCtx(() => [\n                        _createVNode(_unref(TabsPopup), {\n                            visible: showTabsPopup.value,\n                            tabs: tabList.value,\n                            \"active-tab\": _unref(uiStore).activeTab,\n                            \"grid-columns\": _unref(configStore).gridColumnsCss,\n                            \"show-dashboard\": true,\n                            \"show-options-panel\": hasOptionsTabs.value,\n                            \"show-relationship-graph\": hasRelationshipData.value,\n                            onTabClick: handleTabsPopupClick,\n                            onClose: _cache[1] || (_cache[1] = ($event) => (showTabsPopup.value = false))\n                        }, null, 8 /* PROPS */, [\"visible\", \"tabs\", \"active-tab\", \"grid-columns\", \"show-options-panel\", \"show-relationship-graph\"])\n                    ]),\n                    default: _withCtx(() => [\n                        _createCommentVNode(\"  \"),\n                        (_unref(uiStore).activeTab === _unref(TAB_DASHBOARD))\n                            ? (_openBlock(), _createBlock(_unref(Dashboard), {\n                                key: 0,\n                                tables: processedTables.value,\n                                onNavigate: handleNavigateToTable,\n                                onRowClick: handleRowClick,\n                                onShowRelationshipGraph: handleShowRelationshipGraph,\n                                onAction: handleDashboardAction,\n                                onHeightDragStart: handleHeightDragStart,\n                                onHeightReset: handleHeightReset\n                            }, null, 8 /* PROPS */, [\"tables\"]))\n                            : (_unref(uiStore).activeTab === _unref(TAB_OPTIONS))\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _createVNode(_unref(OptionsPanel), {\n                                        tables: optionsTables.value,\n                                        onCellClick: handleCellClick,\n                                        onToggleDelete: handleToggleDelete\n                                    }, null, 8 /* PROPS */, [\"tables\"])\n                                ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                : (_unref(uiStore).activeTab === _unref(TAB_RELATIONSHIP_GRAPH))\n                                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                        _createCommentVNode(\"  \"),\n                                        _createVNode(_unref(RelationshipGraph), {\n                                            \"relationship-table\": relationshipTableData.value,\n                                            \"character-tables\": characterTablesData.value,\n                                            \"faction-table\": factionTableData.value,\n                                            \"show-legend\": true\n                                        }, null, 8 /* PROPS */, [\"relationship-table\", \"character-tables\", \"faction-table\"])\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                    : (currentTable.value)\n                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n                                            _createCommentVNode(\"  \"),\n                                            (_openBlock(), _createBlock(_unref(DataTable), {\n                                                key: currentTable.value.id,\n                                                \"table-id\": currentTable.value.id,\n                                                \"table-name\": currentTable.value.name,\n                                                rows: currentTable.value.rows,\n                                                headers: currentTable.value.headers,\n                                                \"search-term\": searchTerm.value,\n                                                onCellClick: handleCellClick,\n                                                onInsertRow: handleInsertRow,\n                                                onToggleDelete: handleToggleDelete,\n                                                onContextMenu: handleContextMenu,\n                                                onSearchChange: _cache[2] || (_cache[2] = ($event) => (searchTerm.value = $event)),\n                                                onClose: handleTableClose,\n                                                onHeightDragStart: handleHeightDragStart,\n                                                onHeightReset: handleHeightReset,\n                                                onShowHistory: handleShowHistory\n                                            }, null, 8 /* PROPS */, [\"table-id\", \"table-name\", \"rows\", \"headers\", \"search-term\"]))\n                                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                                        : (_openBlock(), _createElementBlock(_Fragment, { key: 4 }, [\n                                            _createCommentVNode(\"  \"),\n                                            _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"acu-no-data\" }, [\n                                                _createElementVNode(\"i\", { class: \"fas fa-inbox\" }),\n                                                _createElementVNode(\"p\", null, \"\")\n                                            ], -1 /* CACHED */))\n                                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                    ]),\n                    _: 1 /* STABLE */\n                }, 8 /* PROPS */, [\"style\", \"title\", \"theme\", \"layout\", \"is-collapsed\", \"is-pinned\", \"is-content-hidden\", \"lock-panel\", \"has-changes\", \"onTogglePin\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(ContextMenu), {\n                    visible: contextMenuState.visible,\n                    \"onUpdate:visible\": _cache[6] || (_cache[6] = ($event) => ((contextMenuState.visible) = $event)),\n                    x: contextMenuState.x,\n                    y: contextMenuState.y,\n                    \"table-id\": contextMenuState.tableId,\n                    \"table-name\": contextMenuState.tableName,\n                    \"row-index\": contextMenuState.rowIndex,\n                    onInsertRow: handleContextInsertRow,\n                    onCopy: handleContextCopy,\n                    onDelete: handleContextDelete,\n                    onUndoDelete: handleContextUndoDelete\n                }, null, 8 /* PROPS */, [\"visible\", \"x\", \"y\", \"table-id\", \"table-name\", \"row-index\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(SettingsDialog), {\n                    visible: showSettingsDialog.value,\n                    \"onUpdate:visible\": _cache[7] || (_cache[7] = ($event) => ((showSettingsDialog).value = $event)),\n                    onSave: handleSettingsSave\n                }, null, 8 /* PROPS */, [\"visible\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(InputFloorDialog), {\n                    visible: showInputFloorDialog.value,\n                    \"onUpdate:visible\": _cache[8] || (_cache[8] = ($event) => ((showInputFloorDialog).value = $event)),\n                    \"current-floor\": currentTargetFloor.value,\n                    onConfirm: handleSaveToFloor\n                }, null, 8 /* PROPS */, [\"visible\", \"current-floor\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(PurgeRangeDialog), {\n                    visible: showPurgeRangeDialog.value,\n                    \"onUpdate:visible\": _cache[9] || (_cache[9] = ($event) => ((showPurgeRangeDialog).value = $event)),\n                    \"max-floor\": maxFloorIndex.value,\n                    onConfirm: handlePurgeRange\n                }, null, 8 /* PROPS */, [\"visible\", \"max-floor\"]),\n                _createCommentVNode(\"  \"),\n                _createVNode(_unref(ManualUpdateDialog), {\n                    visible: showManualUpdateDialog.value,\n                    \"onUpdate:visible\": _cache[10] || (_cache[10] = ($event) => ((showManualUpdateDialog).value = $event))\n                }, null, 8 /* PROPS */, [\"visible\"]),\n                _createCommentVNode(\"  (DataTable ) \"),\n                _createVNode(_unref(HistoryDialog), {\n                    visible: showHistoryDialog.value,\n                    \"onUpdate:visible\": _cache[11] || (_cache[11] = ($event) => ((showHistoryDialog).value = $event)),\n                    \"table-name\": historyDialogData.tableName,\n                    \"table-id\": historyDialogData.tableId,\n                    \"row-index\": historyDialogData.rowIndex,\n                    \"current-row-data\": historyDialogData.currentRowData,\n                    \"title-col-index\": historyDialogData.titleColIndex,\n                    onApply: handleHistoryApply\n                }, null, 8 /* PROPS */, [\"visible\", \"table-name\", \"table-id\", \"row-index\", \"current-row-data\", \"title-col-index\"]),\n                _createCommentVNode(\"  (Dashboard ) \"),\n                _createVNode(_unref(RowEditDialog), {\n                    visible: _unref(uiStore).rowEditDialog.visible,\n                    \"onUpdate:visible\": _cache[12] || (_cache[12] = ($event) => ((_unref(uiStore).rowEditDialog.visible) = $event)),\n                    \"table-name\": _unref(uiStore).rowEditDialog.props.tableName,\n                    \"table-id\": _unref(uiStore).rowEditDialog.props.tableId,\n                    \"row-index\": _unref(uiStore).rowEditDialog.props.rowIndex,\n                    \"current-row-data\": _unref(uiStore).rowEditDialog.props.currentRowData,\n                    onClose: _unref(uiStore).closeRowEditDialog,\n                    onShowHistory: _unref(uiStore).switchFromRowEditToHistory\n                }, null, 8 /* PROPS */, [\"visible\", \"table-name\", \"table-id\", \"row-index\", \"current-row-data\", \"onClose\", \"onShowHistory\"]),\n                _createCommentVNode(\"  (Dashboard ) \"),\n                _createVNode(_unref(HistoryDialog), {\n                    visible: _unref(uiStore).dashboardHistoryDialog.visible,\n                    \"onUpdate:visible\": _cache[13] || (_cache[13] = ($event) => ((_unref(uiStore).dashboardHistoryDialog.visible) = $event)),\n                    \"table-name\": _unref(uiStore).dashboardHistoryDialog.props.tableName,\n                    \"table-id\": _unref(uiStore).dashboardHistoryDialog.props.tableId,\n                    \"row-index\": _unref(uiStore).dashboardHistoryDialog.props.rowIndex,\n                    \"current-row-data\": _unref(uiStore).dashboardHistoryDialog.props.currentRowData,\n                    \"title-col-index\": _unref(uiStore).dashboardHistoryDialog.props.titleColIndex,\n                    onClose: _unref(uiStore).closeDashboardHistoryDialog\n                }, null, 8 /* PROPS */, [\"visible\", \"table-name\", \"table-id\", \"row-index\", \"current-row-data\", \"title-col-index\", \"onClose\"]),\n                _createCommentVNode(\"  (Dashboard ) \"),\n                _createVNode(_unref(WidgetSettingsDialog), {\n                    visible: _unref(uiStore).widgetSettingsDialog.visible,\n                    \"onUpdate:visible\": _cache[14] || (_cache[14] = ($event) => ((_unref(uiStore).widgetSettingsDialog.visible) = $event)),\n                    \"widget-id\": _unref(uiStore).widgetSettingsDialog.props.widgetId,\n                    \"widget-config\": _unref(uiStore).widgetSettingsDialog.props.widgetConfig,\n                    \"table-headers\": _unref(uiStore).widgetSettingsDialog.props.tableHeaders,\n                    onClose: _unref(uiStore).closeWidgetSettingsDialog\n                }, null, 8 /* PROPS */, [\"visible\", \"widget-id\", \"widget-config\", \"table-headers\", \"onClose\"]),\n                _createCommentVNode(\"  () \"),\n                _createVNode(_unref(AvatarCropDialog), {\n                    visible: _unref(uiStore).avatarCropDialog.visible,\n                    \"image-url\": _unref(uiStore).avatarCropDialog.props.imageUrl,\n                    name: _unref(uiStore).avatarCropDialog.props.name,\n                    \"initial-offset-x\": _unref(uiStore).avatarCropDialog.props.initialOffsetX,\n                    \"initial-offset-y\": _unref(uiStore).avatarCropDialog.props.initialOffsetY,\n                    \"initial-scale\": _unref(uiStore).avatarCropDialog.props.initialScale,\n                    onClose: _unref(uiStore).closeAvatarCropDialog,\n                    onApply: _unref(uiStore).handleAvatarCropApply,\n                    onUpload: _unref(uiStore).handleAvatarCropUpload\n                }, null, 8 /* PROPS */, [\"visible\", \"image-url\", \"name\", \"initial-offset-x\", \"initial-offset-y\", \"initial-scale\", \"onClose\", \"onApply\", \"onUpload\"]),\n                _createCommentVNode(\"  (Dashboard ) \"),\n                _createVNode(_unref(DashboardWidgetManagerDialog), {\n                    visible: _unref(uiStore).widgetManagerDialog.visible,\n                    \"onUpdate:visible\": _cache[15] || (_cache[15] = ($event) => ((_unref(uiStore).widgetManagerDialog.visible) = $event)),\n                    tables: processedTables.value,\n                    onClose: _unref(uiStore).closeWidgetManagerDialog\n                }, null, 8 /* PROPS */, [\"visible\", \"tables\", \"onClose\"]),\n                _createCommentVNode(\"  (Dashboard ) \"),\n                _createVNode(_unref(WidgetActionsDialog), {\n                    visible: _unref(uiStore).widgetActionsDialog.visible,\n                    \"onUpdate:visible\": _cache[16] || (_cache[16] = ($event) => ((_unref(uiStore).widgetActionsDialog.visible) = $event)),\n                    \"widget-id\": _unref(uiStore).widgetActionsDialog.props.widgetId,\n                    \"current-actions\": _unref(uiStore).widgetActionsDialog.props.currentActions,\n                    onClose: _unref(uiStore).closeWidgetActionsDialog\n                }, null, 8 /* PROPS */, [\"visible\", \"widget-id\", \"current-actions\", \"onClose\"]),\n                _createCommentVNode(\"  Toast  \"),\n                _createVNode(_unref(Toast), {\n                    visible: _unref(toastState).visible,\n                    message: _unref(toastState).message,\n                    type: _unref(toastState).type\n                }, null, 8 /* PROPS */, [\"visible\", \"message\", \"type\"])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/**\n * useTouchScrollFix.ts - \n *\n *  v2\n *  document \n *\n * 6.4.1.ts:4489-4544\n */\n\nimport { onMounted, onUnmounted, ref } from 'vue';\n\n/**\n *  Composable\n *\n * \n * - \n * - \n * - \n *\n *  Vue \n */\nexport function useTouchScrollFix() {\n  // \n  const startX = ref(0);\n  const startY = ref(0);\n\n  // \n  let touchStartHandler: ((e: TouchEvent) => void) | null = null;\n  let touchMoveHandler: ((e: TouchEvent) => void) | null = null;\n\n  /**\n   * touchstart \n   * \n   */\n  function handleTouchStart(e: TouchEvent) {\n    const target = e.target as HTMLElement;\n\n    // \n    if (!target.closest?.('.acu-layout-horizontal .acu-panel-content')) {\n      return;\n    }\n\n    const touch = e.touches[0];\n    startX.value = touch.clientX;\n    startY.value = touch.clientY;\n  }\n\n  /**\n   * touchmove \n   * \n   */\n  function handleTouchMove(e: TouchEvent) {\n    const target = e.target as HTMLElement;\n\n    // \n    if (!target.closest?.('.acu-layout-horizontal .acu-panel-content')) {\n      return;\n    }\n\n    // \n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || (target as HTMLElement).isContentEditable) {\n      return;\n    }\n\n    // \n    // \n    let node: HTMLElement | null = target;\n    let shouldAllowScroll = false;\n\n    while (node && node.classList && !node.classList.contains('acu-panel-content')) {\n      // \n      if (node.scrollHeight > node.clientHeight) {\n        const style = window.getComputedStyle(node);\n        if (['auto', 'scroll'].includes(style.overflowY)) {\n          // \n          shouldAllowScroll = true;\n          break;\n        }\n      }\n      node = node.parentElement;\n    }\n\n    // \n    if (shouldAllowScroll) {\n      return;\n    }\n\n    // \n    const touch = e.touches[0];\n    const dx = touch.clientX - startX.value;\n    const dy = touch.clientY - startY.value;\n\n    // \n    // \n    if (Math.abs(dy) > Math.abs(dx)) {\n      if (e.cancelable) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  /**\n   * \n   */\n  function install() {\n    const pDoc = window.parent?.document;\n    if (!pDoc) {\n      console.warn('[ACU]  document');\n      return;\n    }\n\n    // \n    touchStartHandler = handleTouchStart;\n    touchMoveHandler = handleTouchMove;\n\n    //  capture: true \n    //  passive: false  preventDefault\n    pDoc.addEventListener('touchstart', touchStartHandler, { capture: true, passive: false });\n    pDoc.addEventListener('touchmove', touchMoveHandler, { capture: true, passive: false });\n\n    console.info('[ACU] composable ');\n  }\n\n  /**\n   * \n   */\n  function uninstall() {\n    const pDoc = window.parent?.document;\n    if (!pDoc) return;\n\n    if (touchStartHandler) {\n      pDoc.removeEventListener('touchstart', touchStartHandler, { capture: true } as EventListenerOptions);\n      touchStartHandler = null;\n    }\n\n    if (touchMoveHandler) {\n      pDoc.removeEventListener('touchmove', touchMoveHandler, { capture: true } as EventListenerOptions);\n      touchMoveHandler = null;\n    }\n\n    console.info('[ACU] ');\n  }\n\n  // \n  onMounted(() => {\n    install();\n  });\n\n  onUnmounted(() => {\n    uninstall();\n  });\n\n  // \n  return {\n    install,\n    uninstall,\n  };\n}\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","/**\n * ACU  - Vue \n *\n *  iframe \n * Vue  document\n *\n *  API  Vue Composables\n *  App.vue  Tab \n */\n\nimport { createPinia } from 'pinia';\nimport { createApp, type App as VueApp } from 'vue';\nimport App from './App.vue';\nimport { getCore } from './utils/index';\n\n// jQuery  -  jQuery \n(window as any).$ = (window.parent as any).$;\n\nconst SCRIPT_ID = 'acu-parent-container';\nconst MAX_DATA_RETRIES = 10;\n\n// \nconst STORAGE_KEYS = {\n  WIN_CONFIG: 'acu_win_config',\n  ACTIVE_TAB: 'acu_active_tab',\n  UI_COLLAPSE: 'acu_ui_collapse_state',\n} as const;\n\n/**\n *  6.4.1\n *\n *  Dashboard \n * \n * 1.  Tab\n * 2. \n *\n *  Vue  Pinia store \n */\nfunction checkAndResetCenteredMode(): void {\n  try {\n    const winConfigRaw = localStorage.getItem(STORAGE_KEYS.WIN_CONFIG);\n\n    // 1\n    if (!winConfigRaw) {\n      // \n      const defaultConfig = { width: 400, left: '50%', bottom: '50%', isCentered: true };\n      localStorage.setItem(STORAGE_KEYS.WIN_CONFIG, JSON.stringify(defaultConfig));\n      //  activeTab\n      localStorage.removeItem(STORAGE_KEYS.ACTIVE_TAB);\n      // \n      localStorage.setItem(STORAGE_KEYS.UI_COLLAPSE, 'false');\n      console.info('[ACU]  activeTab');\n      return;\n    }\n\n    // 2\n    const winConfig = JSON.parse(winConfigRaw);\n    if (winConfig?.isCentered === true) {\n      //  activeTab\n      localStorage.removeItem(STORAGE_KEYS.ACTIVE_TAB);\n      // \n      localStorage.setItem(STORAGE_KEYS.UI_COLLAPSE, 'false');\n      console.info('[ACU]  activeTab');\n    }\n  } catch (e) {\n    // \n    const defaultConfig = { width: 400, left: '50%', bottom: '50%', isCentered: true };\n    localStorage.setItem(STORAGE_KEYS.WIN_CONFIG, JSON.stringify(defaultConfig));\n    localStorage.removeItem(STORAGE_KEYS.ACTIVE_TAB);\n    localStorage.setItem(STORAGE_KEYS.UI_COLLAPSE, 'false');\n    console.warn('[ACU]  win_config :', e);\n  }\n}\n\n// Vue  ()\nlet vueApp: VueApp | null = null;\nlet mountContainer: HTMLElement | null = null;\n\n//  ID ()\nlet initCheckTimerId: ReturnType<typeof setTimeout> | null = null;\n\n//  ()\nlet isShuttingDown = false;\n\n/**\n *  Vue \n */\nfunction initVueApp() {\n  const parentDoc = window.parent.document;\n\n  // \n  const existingRoot = parentDoc.getElementById(SCRIPT_ID);\n  if (existingRoot) {\n    console.warn('[ACU] Vue ');\n    return;\n  }\n\n  //  - ID  'acu-parent-container'\n  mountContainer = parentDoc.createElement('div');\n  mountContainer.id = SCRIPT_ID;\n  parentDoc.body.appendChild(mountContainer);\n\n  //  Pinia \n  const pinia = createPinia();\n\n  //  Vue \n  vueApp = createApp(App);\n  vueApp.use(pinia);\n\n  // \n  //  API  App.vue  composables\n  //  Vue  Tab \n  vueApp.mount(mountContainer);\n\n  console.info(`[ACU] Vue  (${SCRIPT_ID})`);\n}\n\n/**\n *  API \n */\nfunction waitForApiAndInit() {\n  //  Vue \n  //  Pinia store  activeTab \n  checkAndResetCenteredMode();\n\n  let dataCheckRetries = 0;\n\n  const checkApi = () => {\n    // \n    if (isShuttingDown) {\n      console.info('[ACU]  API ');\n      return;\n    }\n\n    const { $, getDB } = getCore();\n    const api = getDB();\n\n    //  API  jQuery \n    if (api && typeof api.exportTableAsJson === 'function' && $) {\n      // \n      const data = api.exportTableAsJson();\n      const hasData = data && Object.keys(data).length > 0;\n\n      // \n      if (!hasData && dataCheckRetries < MAX_DATA_RETRIES) {\n        dataCheckRetries++;\n        console.info(`[ACU] API ... (${dataCheckRetries}/${MAX_DATA_RETRIES})`);\n        initCheckTimerId = setTimeout(checkApi, 1000);\n        return;\n      }\n\n      //  ID\n      initCheckTimerId = null;\n\n      //  Vue \n      initVueApp();\n    } else {\n      // API \n      initCheckTimerId = setTimeout(checkApi, 1000);\n    }\n  };\n\n  checkApi();\n}\n\n/**\n *  Vue \n *\n *  API  Vue Composables\n *  Vue \n */\nfunction cleanup() {\n  console.info('[ACU] ...');\n\n  // \n  isShuttingDown = true;\n\n  // \n  if (initCheckTimerId !== null) {\n    clearTimeout(initCheckTimerId);\n    initCheckTimerId = null;\n    console.info('[ACU] ');\n  }\n\n  //  Vue \n  // composables \n  if (vueApp) {\n    vueApp.unmount();\n    vueApp = null;\n    console.info('[ACU] Vue ');\n  }\n\n  // \n  if (mountContainer) {\n    mountContainer.remove();\n    mountContainer = null;\n    console.info('[ACU] ');\n  }\n\n  console.info('[ACU] ');\n}\n\n// ============================================================\n// \n// ============================================================\n\n$(() => {\n  console.info(`[ACU] : ${SCRIPT_ID}`);\n\n  //  API \n  waitForApiAndInit();\n\n  //  ( pagehide  unload)\n  $(window).on('pagehide', () => {\n    console.info('[ACU] ');\n    cleanup();\n  });\n});\n"],"names":["content","__esModule","default","module","id","locals","exports","add","___CSS_LOADER_EXPORT___","push","Vue","listToStyles","parentId","list","styles","newStyles","i","length","item","part","css","media","sourceMap","parts","hasDocument","document","DEBUG","Error","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","ssrIdKey","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","type","appendChild","obj","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","filter","Boolean","join","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","sfc","props","target","__vccOpts","key","val","cssMapping","base64","data","concat","sourceMapping","state","ref","visible","message","timer","show","duration","value","clearTimeout","setTimeout","hide","success","error","warning","info","useToast","toast","cssWithMappingToString","toString","this","map","needLayer","modules","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","fn","getCurrentScope","onScopeDispose","window","WorkerGlobalScope","globalThis","getIsIOS","_a","_b","maxTouchPoints","args","toRef","readonly","customRef","set","Promise","resolve","reject","apply","thisArg","then","catch","invoke","ms","maxTimer","lastRejector","_clearTimeout","timer2","lastInvoker","toValue","maxDuration","maxWait","rejectOnCancel","Array","isArray","cacheStringFunction","cache","create","str","hyphenateRE","camelizeRE","replace","_","c","toUpperCase","getLifeCycleTarget","getCurrentInstance","source","cb","eventFilter","watchOptions","watch","watchPausable","initialState","pause","resume","isActive","extendFilter","stop","objectRef","isRef","toRefs","result","from","v","replaceRef","copy","newObject","setPrototypeOf","getPrototypeOf","interval","immediate","immediateCallback","isPending","shallowRef","clear","start","shallowReadonly","defaultWindow","defaultNavigator","location","unrefElement","elRef","plain","$el","cleanups","cleanup","forEach","firstParamTargets","computed","e","every","stopWatch","unref","raw_targets","raw_events","raw_listeners","raw_options","optionsClone","flatMap","el","event","listener","addEventListener","removeEventListener","register","flush","_iOSWorkaround","handler","ignore","capture","detectIframe","controls","cancel","trigger","listenerOptions","passive","body","children","documentElement","shouldListen","shouldIgnore","some","target2","querySelectorAll","composedPath","includes","Element","vm","$","subTree","shapeFlag","hasMultipleRoots","child","checkMultipleRoots","detail","isProcessingClick","activeElement","tagName","contains","useSupported","callback","isMounted","instance","onMounted","useMounted","usePermission","permissionDesc","isSupported","permissionStatus","desc","name","query","_promise","wrapper","reset","async","_prev","createSingletonPromise","permissions","toRaw","read","copiedDuring","legacy","isClipboardApiSupported","permissionRead","permissionWrite","text","copied","timeout","isAllowed","status","useLegacy","clipboard","readText","_c","getSelection","writeText","ta","style","position","opacity","select","execCommand","legacyCopy","_global","self","globalKey","handlers","getHandlers","getSSRHandler","fallback","guessSerializerType","rawInit","Set","Map","Date","Number","isNaN","StorageSerializers","boolean","write","String","object","parse","number","parseFloat","any","string","entries","date","toISOString","customStorageEventName","defaults","storage","deep","listenToStorageChanges","writeDefaults","mergeDefaults","shallow","onError","console","initOnMounted","keyComputed","_a2","localStorage","serializer","pauseWatch","resumeWatch","newValue","oldValue","getItem","dispatchWriteEvent","removeItem","serialized","setItem","firstMounted","onStorageCustomEvent","ev","payload","storageArea","dispatchEvent","Storage","StorageEvent","CustomEvent","serializedData","rawValue","nextTick","sync","observerOptions","observer","disconnect","targets","_targets","els","ResizeObserver","_el","observe","selection","ranges","rangeCount","getRangeAt","getRangesFromSelection","rects","range","getBoundingClientRect","POSITIVE_INFINITY","SCRIPT_ID","DEFAULT_BALL_APPEARANCE","size","notifyAnimation","borderColor","borderOpacity","bgColor","bgOpacity","NAV_BUTTONS","icon","label","DEFAULT_VISIBLE_BUTTONS","DEFAULT_BUTTON_ORDER","DEFAULT_BUTTON_GROUPS","DEFAULT_CONFIG","theme","fontFamily","cardWidth","fontSize","itemsPerPage","highlightNew","highlightColor","highlightManualColor","highlightAiColor","customTitleColor","titleColor","layout","limitLongText","showDashboard","showPagination","lockPanel","purgeConfirmation","gridColumns","autoSave","autoSaveDelay","visibleButtons","buttonOrder","buttonGroups","longPressDirectExec","clearTableOnSwipe","collapseTabBar","mobileSafeAreaBottom","THEMES","FONTS","HIGHLIGHT_COLORS","orange","main","bg","red","blue","green","purple","teal","pink","lime","indigo","cyan","brown","grey","useConfigStore","config","fontFamilyValue","font","find","f","hexToColorObj","hex","normalizedHex","startsWith","parseInt","slice","g","b","highlightColorObj","highlightManualColorObj","customHighlightManualHex","colorKey","highlightAiColorObj","customHighlightAiHex","titleColorObj","customTitleHex","gridColumnsCss","updateConfig","updates","sortedVisibleButtons","order","hiddenButtons","usedSecondaries","secondaryId","btn","hidden","hasHiddenButtons","resetConfig","setTheme","themeId","setFontFamily","fontId","setLayout","setHighlightColor","setHighlightManualColor","setHighlightAiColor","setTitleColor","toggleHighlightNew","toggleCustomTitleColor","toggleShowDashboard","toggleShowPagination","toggleLockPanel","toggleLimitLongText","setVisibleButtons","buttons","setButtonOrder","isButtonVisible","buttonId","toggleButtonVisibility","current","indexOf","splice","getButtonConfig","setButtonGroups","groups","addButtonGroup","primaryId","log","removeButtonGroupSecondary","getSecondaryButtonId","group","isSecondaryButton","toggleLongPressDirectExec","setLongPressDirectExec","resetButtonConfig","useBallAppearanceStore","appearance","customFonts","isLoaded","saveToScriptVariables","getVariables","replaceVariables","warn","newVars","script_id","configVersion","ballAppearance","fontImportUrls","importUrl","allFonts","hexToRgba","exec","cssVariables","app","loadFromScriptVariables","scriptVars","updateAppearance","setIcon","setSize","Math","max","min","setBorderColor","color","setBgColor","setNotifyAnimation","animation","resetAppearance","addFont","newFont","now","removeFont","findIndex","THEME_VAR_CSS_MAP","bgNav","bgPanel","cardBg","tableHead","tableHover","badgeBg","inputBg","menuBg","overlayBg","textMain","textSub","menuText","border","btnBg","btnHover","btnActiveBg","btnActiveText","shadow","THEME_VAR_GROUPS","vars","WIDGET_ACTIONS","goToTable","tooltip","undo","manualUpdate","relationshipGraph","settings","nativeEdit","WIDGET_TEMPLATES","npc","title","displayColumns","maxRows","actions","colSpan","displayStyle","task","character","TABLE_KEYWORD_RULES","STORAGE_KEY_THEME_PRESETS","STORAGE_KEY_CUSTOM_CSS","DEFAULT_HIGHLIGHT_CONFIG","manualColor","manualHex","aiColor","aiHex","titleHex","hexToBgRgba","getColorValue","customHex","preset","useThemeStore","presets","activePresetId","currentThemeVars","currentHighlight","customCSS","configStore","baseTheme","manualHighlightColor","aiHighlightColor","titleBgColor","activePreset","p","saveToStorage","themePresets","syncToConfigStore","syncFromConfigStore","createPreset","createdAt","themeVars","highlight","updatePreset","presetId","getInjectedStyles","cssVar","loadFromStorage","presetsJson","savedCSS","saveCurrentToPreset","deletePreset","applyPreset","renamePreset","newName","setManualHighlightColor","setAiHighlightColor","setThemeVar","removeThemeVar","clearThemeVars","setCustomCSS","clearCustomCSS","getFullInjectedCSS","RELATION_TYPES","level","keywords","COMPLEX_RELATION","matchesType","word","kw","getRelationColor","relationWords","words","split","w","trim","t","typeName","isComplex","matchedLevels","hasPositive","l","has","hasNegative","priority","shouldUseDashedLine","note","relation","cleanRelationText","getCellValue","row","colIndex","cell","cells","resolveAlias","aliasMap","findColumnIndex","headers","possibleNames","lowerHeaders","h","idx","isCharacterTable","tableName","tableId","getDefaultLabel","fullName","firstName","parseRelationshipTable","relationshipTable","characterTables","factionTable","warnings","nodes","edges","nodeIds","rows","elements","nodeCount","edgeCount","sourceIdx","targetIdx","relationIdx","noteIdx","protagonistNames","characterNames","factionNames","table","isProtagonist","nameIdx","addNode","nodeType","getNodeType","defaultLabel","classes","rowIndex","rawSource","rawTarget","colorResult","lineStyle","parseEmbeddedRelationships","edgeIndex","allCharacterNames","edgeCache","relationColIdx","sourceName","relationText","parsedRelations","results","segments","s","segment","cleanSegment","bracketMatch","match","multiTargetMatch","target1","relations","cleanedRelation","commaMultiTargetMatch","targetsText","relationsText","singleTargetMatch","colonMatch","parseEmbeddedRelationship","parsed","edgeKey","useDashed","cached","notes","priorityOrder","currentPriority","processedPairs","pairKey","sort","reverseKey","reverseEdge","isBidirectional","bidirectional","fileToBase64","file","reader","FileReader","readAsDataURL","onload","onerror","compressImage","maxWidth","quality","img","Image","canvas","scale","width","height","ctx","getContext","drawImage","toDataURL","src","compressImageSquare","minDim","sx","sy","getCore","parent","jQuery","getDB","AutoCardUpdaterAPI","getTableData","api","exportTableAsJson","processJsonData","tables","sheetId","sheet","keys","STYLE_ID_PREFIX","DYNAMIC_FONT_ID","THEME_CUSTOM_ID","useParentStyleInjection","themeStore","getParentDoc","scriptId","getScriptId","baseStyleEl","dynamicStyleEl","fontStyleEl","themeCustomStyleEl","isInitialized","injectFontStyles","parentDoc","styleId","getElementById","styleEl","getFontFamilyValue","textContent","updateDynamicVariables","dynamicCSS","bigint","hexToRgb","updateThemeCustomStyles","applyTheme","targetTheme","classList","applyLayout","display","targetLayout","applyFont","init","injectBaseStyles","createDynamicStyleElement","createThemeCustomStyleElement","newConfig","newFontId","onUnmounted","applyAllStyles","STORAGE_KEY_PREFIX","PRIMARY_KEYS","getCurrentContextFingerprint","SillyTavern","chatId","characterId","chat","getStorageKey","ctxId","persistedLocks","pendingLocks","currentContextId","useCellLock","loadLocks","stored","_lastAccess","saveLocks","dataToSave","allKeys","keyWithTime","time","toDelete","cleanupOldContexts","getRowKey","pkField","fieldIndex","rebuildRow","lock","fields","_fullRow","_snapshot","_fields","fill","field","pendingLockCount","count","tableLocks","values","initPendingLocks","toggleCellLock","rowKey","fieldName","newLocks","locks","countLocks","toggleRowLock","snapshot","savePendingLocks","discardPendingLocks","isCellLockedPending","isRowLockedPending","getLockedFieldsPending","hasRowAnyLockPending","isCellLocked","isRowLocked","applyLocks","tableContent","modified","restored","rowIndexMap","newRow","colIdx","updateLockedValue","updated","STORE_NAME","dbInstance","initDB","request","indexedDB","open","onsuccess","onupgradeneeded","db","objectStoreNames","store","createObjectStore","keyPath","autoIncrement","createIndex","unique","addSnapshot","transaction","objectStore","getAll","deleteSnapshot","delete","getCurrentChatId","ST","top","firstMsg","chat_id","makeRowKey","areCellsEqual","keysA","keysB","useRowHistory","isLoading","saveSnapshot","sorted","timestamp","MAX_SNAPSHOTS_PER_ROW","getSnapshots","snapshots","snapshotToTableRow","templateRow","tableRowToCells","getDiff","oldSnapshot","newCells","changedCols","formatRelativeTime","diff","floor","toLocaleDateString","month","day","hour","minute","clearCurrentChatHistory","tx","openCursor","IDBKeyRange","only","deletedCount","cursor","continue","oncomplete","indexColumnName","checkEmptyCell","checkIndexGap","isSummaryOrOutlineTable","extractNumber","extractTableNameFromKey","rowMatch","cellMatch","extractRowIndexFromKey","checkTableIntegrity","snapshotSheet","aiChangedRows","issues","hasIssues","snapshotRowCount","currentRowCount","newRowStartContentIndex","newRowEndContentIndex","indexColIdx","lastSnapshotIndex","contentRowIndex","cellValue","issueType","description","currentValue","currentIndex","expectedValue","prevContentRowIndex","prevIndex","STORAGE_KEYS","normalizeValue","strValue","useDataStore","stagedData","lastSavedData","aiDiffMap","reactive","manualDiffMap","diffMap","merged","pendingDeletes","isSaving","targetFloorInfo","integrityChecker","mergedConfig","issuesByTable","allIssues","problematicTables","issueStats","emptyCount","gapCount","issue","total","emptyCell","indexGap","checkIntegrity","newIssuesMap","tableAiRows","snapSheetId","hasTableIssues","getTableIssues","clearIssues","getSummaryText","stats","useTableIntegrityCheck","cellLock","integrityIssues","hasIntegrityIssues","integrityStats","hasPendingDeletes","hasUnsavedChanges","hasChanges","hasUndoData","loadSnapshot","clearSnapshot","getCellKey","getSillyTavern","getSnapshotCellValue","syncToStagedData","tableRows","newContent","rowData","clearChanges","clearDeletes","processToTableData","rawData","rowIdx","filterDeletedRows","realIdx","writeToFloor","floorIndex","targetMsg","finalKey","configKey","settingsStr","dataIsolationEnabled","dataIsolationCode","getIsolationConfigKey","TavernDB_ACU_IsolatedData","existingKeys","independentData","modifiedKeys","updateGroupKeys","tagData","sheetsToSave","syncWorldbook","syncWorldbookEntries","createIfNeeded","syncErr","saveChatDebounced","saveChat","toggleDelete","getCellChangeType","cellId","getRowChangeType","colCount","cols","hasManual","hasAi","cellKey","getStagedData","loadFromDatabase","modifiedData","totalRestored","processed","setStagedData","generateDiffMap","currentData","snapData","currentSheet","snapSheet","currentRow","snapRow","realRowIdx","maxCols","saveToDatabase","savedToFloor","filteredData","targetFloor","msg","is_user","isAuto","reason","findTargetFloor","errMsg","saveToFloor","purgeFloorRange","startFloor","endFloor","maxIdx","safeStartFloor","safeEndFloor","keysToDelete","purgedCount","messageModified","insertRow","afterIndex","updateCell","skipHistory","chat_metadata","substring","rowBeforeEdit","latest","err","toggleDeleteRow","markForDelete","unmarkForDelete","hasTableAiChanges","getTablesWithAiChanges","tablesSet","tableNameParts","isRowChanged","isRowPendingDelete","isPendingDelete","isCellChanged","saveLastState","currentSnapshot","undoToLastSave","restoredData","newDiffKeys","restoredSheet","restoredRow","clearUndoCache","getUndoData","getIntegritySummary","clearIntegrityIssues","TAB_DASHBOARD","TAB_OPTIONS","TAB_RELATIONSHIP_GRAPH","useUIStore","isCollapsed","isPinned","activeTab","tableOrder","tableHeights","tableStyles","reverseTables","ballPosition","x","y","innerHeight","visibleTabs","tabOrder","currentPage","searchTerm","scrollTop","isEditingOrder","isContentHidden","isMobile","isLockEditMode","showLockedOnly","rowEditDialog","currentRowData","widgetSettingsDialog","widgetId","widgetConfig","tableHeaders","dashboardHistoryDialog","titleColIndex","avatarCropDialog","imageUrl","initialOffsetX","initialOffsetY","initialScale","avatarCropOnApply","avatarCropOnUpload","widgetManagerDialog","widgetActionsDialog","currentActions","isPanelVisible","isDashboardActive","isOptionsActive","currentSearchTerm","isHorizontalLayout","getSortedTabIds","allTabIds","closeAvatarCropDialog","reverseOrderTables","toggleCollapse","togglePin","setActiveTab","tabName","setTableOrder","setTableHeight","resetTableHeight","heights","getTableHeight","setTableStyle","getTableStyle","toggleTableReverse","isTableReversed","setCurrentPage","page","setSearchTerm","term","saveScrollTop","enterEditingOrder","exitEditingOrder","setEditingOrder","setMobile","newLayout","toggleLayout","closePanel","openPanel","setInitialized","updateSaveBtnState","$btn","addClass","removeClass","autoFitPanelHeight","force","$panel","currentTab","contentHeight","scrollHeight","maxHeight","newHeight","saveBallPosition","getBallPosition","resetBallPosition","parentHeight","setVisibleTabs","tabs","isTabVisible","tabId","toggleTabVisibility","resetVisibleTabs","setTabOrder","moveTab","newIndex","currentOrder","newOrder","showTab","hideTab","resetTabConfig","syncNewTablesToVisibleTabs","allTableIds","newTabIds","openRowEditDialog","closeRowEditDialog","openWidgetSettingsDialog","closeWidgetSettingsDialog","openDashboardHistoryDialog","closeDashboardHistoryDialog","switchFromRowEditToHistory","openAvatarCropDialog","callbacks","onApply","onUpload","handleAvatarCropApply","handleAvatarCropUpload","openWidgetManagerDialog","closeWidgetManagerDialog","openWidgetActionsDialog","closeWidgetActionsDialog","findDatabaseSettingsKey","direct80","direct70","readFromLocalStorage","raw","writeToLocalStorage","existing","useDbSettings","saveSettings","newSettings","mergedSettings","updateSettings","executeManualUpdate","triggerUpdate","loadSettings","getSettings","apiSettings","localSettings","updateSetting","getTableList","isSummaryOrOutline","executeWithPreset","presetSettings","targetTableNames","silent","autoUpdateThreshold","updateBatchSize","skipUpdateFloors","autoUpdateFrequency","z","UpdateSettingsSchema","AutoTriggerConfigSchema","enabled","onEmptyCell","onIndexGap","targetTables","array","updateTargetTables","UpdatePresetSchema","autoTrigger","optional","transform","PresetStorageSchema","nullable","autoFixPresetId","globalAutoTriggerEnabled","globalAutoExecuteEnabled","STORAGE_KEY","DEFAULT_PRESET","getScriptVariables","useUpdatePresets","autoFixPreset","hasPresets","loadPresets","safeParse","savePresets","saveScriptVariables","findPresetByName","trimmedName","random","substr","createOrUpdatePreset","isNew","setActivePreset","setAutoFixPreset","duplicatePreset","createFromCurrent","currentSettings","getPresetSettings","setGlobalAutoTrigger","setGlobalAutoExecute","tableUpdateCallback","tableFillStartCallback","isShuttingDown","useApiCallbacks","dataStore","uiStore","presetsManager","dbSettings","lastIssueNotifyTime","isAutoUpdating","registerCallbacks","registerTableUpdateCallback","newData","checkAndNotifyIssues","registerTableFillStartCallback","unregisterCallbacks","unregisterTableUpdateCallback","unregisterTableFillStartCallback","shouldTrigger","summary","findACUSettingsKey","v100Key","anyKey","CHAT_SHEET_GUIDE_FIELD","TABLE_ORDER_FIELD","LEGACY_KEYS","useDataPersistence","executeCoreSave","dataToUse","commitDeletes","targetIndex","finalData","settingsKey","targetMsgIndex","guideData","out","mate","version","headerRow","uid","sourceData","initNode","insertNode","updateNode","deleteNode","uiSentinel","contextDepth","updateFrequency","batchSize","skipFloors","exportConfig","splitByRow","entryName","entryType","preventRecursion","injectionTemplate","buildSheetGuideData","container","tags","updatedAt","updateSheetGuide","_savedToFloor","directErr","autoSaveStop","setupAutoSave","delay","debounce","migrateLegacyData","legacyDataFound","dataType","tableData","skipRender","$saveBtn","originalIcon","html","savedData","savedFloor","startIdx","endIdx","changesCount","latestData","purgeTableDataByRange","sheetKeys","changed","changedCount","removeKeyFromArray","arr","next","changedAny","msgChanged","tagKey","TavernDB_ACU_IndependentData","TavernDB_ACU_ModifiedKeys","TavernDB_ACU_UpdateGroupKeys","TavernDB_ACU_Data","TavernDB_ACU_SummaryData","stopAutoSave","initDataPersistence","useCoreActions","tableKey","copyContent","parentWin","TavernHelper","triggerSlash","safeContent","textArea","left","prompt","$card","$cell","closest","deleteKey","append","setInput","textarea","currentVal","newVal","Event","bubbles","focus","editCell","cellData","context","doc","freshData","attr","$displayTarget","hasClass","badgeStyle","getBadgeStyle","MOBILE_REGEX","checkIsMobileLayout","innerWidth","useIsMobile","checkMobile","isTouchDevice","useDraggableWithSnap","initialX","initialY","edgePadding","elementWidth","onPositionChange","useParentWindow","getTargetWindow","getScreenSize","targetWindow","wasDragging","dragStartX","dragStartY","draggingElement","isDragging","pointerTypes","preventDefault","stopPropagation","exact","onMove","onEnd","onStart","initialValue","axis","containerElement","handle","draggingHandle","pressedDelta","filterEvent","pointerType","handleEvent","move","disabled","targetRect","clientX","scrollWidth","clientY","end","button","containerRect","pos","scrollLeft","useDraggable","_position","mouseX","mouseY","dx","abs","dy","screenWidth","screenHeight","useSwipeEnhancement","isProcessing","cleanupFns","touchStartX","touchStartY","isSwiping","clearFloorData","willTriggerNewGeneration","swipe_id","swipes","handleSwipeClearOnly","win","getSillyTavernContext","lastIndex","lastMessage","swipes_length","hasData","isolatedData","hasACUData","handleSwipe","clearEnabled","initMobileListener","chatContainer","handleTouchStart","touch","touches","handleTouchMove","deltaX","deltaY","allMessages","isTouchOnLastMessage","getConfig","initDesktopListener","urlCache","useAvatarManager","isReady","saveAvatar","record","URL","revokeObjectURL","put","getAvatar","getAllAvatars","getSillyTavernUserAvatar","$userMes","last","$avatar","first","userAvatar","getPlayerNameFromTable","isPlayerNode","playerPatterns","lowerName","pattern","playerName","resolvePrimaryName","all","aliases","deleteAvatar","deleteAvatars","names","completed","hasAvatar","getKey","getStats","items","totalSizeBytes","reduce","sum","blob","totalSizeMB","toFixed","clearAll","url","getAvatarUrl","createObjectURL","primaryName","stAvatar","getAvatarDisplayConfig","offsetX","offsetY","getSillyTavernCharacterAvatar","$aiMes","characterAvatar","addAlias","alias","removeAlias","getAliasMap","getAliases","setAliases","getDisplayLabel","setDisplayLabel","_name","_labelIndices","getDisplayChars","Intl","Segmenter","segmenter","granularity","extractVersionNumber","findHighestVersionKey","matchedKeys","dbConfigCache","checkIsSummaryOrOutline","getLastUpdatedPosition","sheetKey","isSummary","currentIsolationKey","wasUpdated","msgIdentity","TavernDB_ACU_Identity","isLegacyMatch","aiFloor","m","chatIndex","hasHistory","useTableUpdateStatus","statusList","lastRefreshTime","currentTotalAiFloors","currentTotalFloors","refresh","userscripts","extensionSettings","__userscripts","settingsContainer","versionPrefix","globalMetaKey","activeIsolationCode","metaRaw","meta","profileSettingsKey","profileSettings","profRaw","isolationCode","localKey","getDbGlobalSettings","template","getTableTemplate","profileTemplateKey","templateRaw","getTemplateFromSettings","totalFloors","totalAiFloors","orderNo","_acu_orderNo","Infinity","tableDataEntry","templateEntry","rawFreq","effectiveFreq","unrecordedFloors","effectiveFrequency","lastUpdatedAiFloor","lastUpdatedChatIndex","formatLastUpdate","getUnrecordedClass","ratio","DEFAULT_DASHBOARD_CONFIG","widgets","columns","showStats","useDashboardStore","enabledWidgets","allWidgets","saveConfig","currentVars","acu_dashboard_config","addWidget","templateKey","searchText","defaultActions","lowerSearchText","newWidget","updateWidget","widget","assign","addSpecialWidget","widgetType","specialConfig","updateStatus","optionsPanel","loadConfig","matchRules","tableInfo","rule","initDefaultWidgets","removeWidget","toggleWidget","moveWidget","setWidgetActions","findWidgetByTableId","hasWidget","hasSpecialWidget","removeSpecialWidget","_hoisted_1","_hoisted_2","class","_hoisted_3","__name","setup","__props","expose","__expose","ballAppearanceStore","issueTooltip","imageStyle","backgroundImage","backgroundPosition","imageOffsetX","imageOffsetY","backgroundSize","imageScale","backgroundRepeat","isAiNotifying","notifyTimer","ballClasses","docked","isDocked","ballStyle","positionStyle","getTargetWindowSize","ballRef","clickTimer","defaultPos","winHeight","getDefaultPosition","newX","newY","handleClick","winWidth","ballSize","padding","needUpdate","resetPosition","defaultY","setDocked","triggerAiNotify","getAppearance","_ctx","_cache","ref_key","onClick","emits","emit","__emit","getButtonClass","$event","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","WINDOW_CONFIG_KEY","panelType","visibleIds","settingsIndex","collapseIndex","isHiddenPopupVisible","toggleHiddenPopup","handleHiddenButtonClick","emitButtonAction","isRefreshing","getButtonStyle","background","longPressTimer","isLongPress","popupButtonId","getSecondaryId","getButtonIcon","getButtonLabel","getButtonTitle","startLongPress","endLongPress","actionId","handleFinishLockEdit","handleCancelLockEdit","toggleShowLockedOnly","panelRef","dataAreaRef","navContainerRef","resizeHandleRef","DEFAULT_CENTERED_CONFIG","bottom","isCentered","preCheckSavedWin","needResetToCenter","windowConfig","getMobileSafeBottomMargin","hasTouch","mobileUA","isSmallScreen","isMobileDevice","validateAndFixWindowPosition","parentWidth","resetToCenter","newLeft","newBottom","safeBottomMargin","minSafeBottom","maxLeft","handleHeaderPointerDown","navEl","startX","startY","rect","startLeft","winH","startBottom","handlePointerMove","moveE","originalEvent","maxBottom","handlePointerUp","off","preventClick","clickE","on","watchEffect","savedWin","setProperty","leftValue","bottomValue","removeProperty","contentInnerRef","isManualHeight","panelHeight","panelTypeRef","showPaginationRef","resizeEl","startWidthResize","autoHeight","recalculate","recalculateHeight","contentRef","minHeight","maxHeightRatio","headerHeight","paginationHeight","contentPadding","onHeightChange","getParentHeight","getMaxHeight","getPanelType","getShowPagination","entry","maxH","contentRect","paginationH","totalHeight","newType","heightStyle","maximize","useSmartHeight","startWidth","newWidth","getPanelElement","getDataAreaElement","getCurrentHeight","exitCenteredMode","resetHeight","requestAnimationFrame","maxAllowed","contentEl","naturalHeight","firstElementChild","offsetHeight","finalHeight","collapsed","pinned","$slots","onMousedown","onMouseup","onMouseleave","onTouchstartPassive","onTouchend","active","HiddenButtonsPopup","onClose","onButtonClick","hasOptionsTabs","hasRelationshipGraph","sortedTabs","isSpecialTab","allVisibleTabs","createTabObject","tab","hasTabIssues","getTabTooltip","draggedTab","dropTargetTab","newTabs","handleDragEnd","getCurrentOrder","getVisibleTabs","draggable","onDragstart","dataTransfer","effectAllowed","setData","onDragover","onDrop","fromIndex","toIndex","removed","onDragend","detectedType","badgeClass","displayValue","textareaRef","localValue","hasSaved","hasTextSelection","checkTextSelection","autoResize","currentHeight","originalVisibility","visibility","handleSave","originalValue","handleKeydown","shiftKey","initialHeight","len","setSelectionRange","onBeforeUnmount","onPointerdown","onBlur","onKeydown","onTouchstart","onTouchmove","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","isChanged","viewMode","showIndex","showHeader","showHistoryButton","customHighlights","cardRef","editingCell","pullTopRef","pullBottomRef","swipeLeftRef","swipeRightRef","showEdgeHint","edgeHintTimer","isDeleting","titleCell","displayCells","isFullWidthCell","gridCells","fullWidthCells","currentRowLockKey","isCurrentRowLocked","isTitleLocked","getCellChangeClass","changeType","rowHighlightClass","isSelecting","shouldBlockInteraction","wasSelecting","selectionEndTimer","selectedText","clearSelection","removeAllRanges","useSelectionGuardEnhanced","gestureType","atStart","atEnd","checkScrollEdge","lengthX","lengthY","onInsertRow","onToggleDelete","horizontalThreshold","verticalThreshold","edgeThreshold","longPressDelay","longPressCancelThreshold","threshold","isSelectingVueUse","scrolledToEdge","directionLocked","gestureLocked","initialScrollHeight","initialClientHeight","initialIsShortCard","parentScrollStart","parentScrollContainer","shouldBlockClick","isSelectionMode","currentTarget","clientHeight","clientWidth","hasNativeSelection","scrollContainer","nativeSelection","cancelable","newGestureType","isPullDown","displayWidth","handleTouchEnd","_e","isShortCard","isPullUp","oldEl","useCardGestures","pullHeight","absY","pullOpacity","swipeWidth","absX","swipeOpacity","handleScroll","getCellLockClass","isLocked","handleRowLock","isNowLocked","handleCellClick","handleTitleClick","handleCellSave","handleContextMenu","onContextmenu","onScroll","InlineEditor","onSave","onCancel","Badge","optionTables","getOptionItems","optionItem","optIdx","tag","tagIdx","handleRefresh","colspan","isEditing","allTables","rowCount","displayRows","displayTitle","bodyClass","filteredActionsNoSettings","getDisplayValue","titleColumn","colName","firstCell","getLabel","getValue","getDisplayTags","displayTagColumns","column","TAG_SEPARATORS","getInteractiveTags","tagConfig","interactiveTagConfig","sourceColumns","tagDefinitions","matchedDef","def","matchedDefinition","defaultTag","promptTemplate","isFixed","getTagTooltip","preview","handleInteractiveTagClick","rowTitle","name1","getPlayerName","handleConfigActions","getActionIcon","getActionTooltip","handleAction","openTableEditor","openVisualizer","openModal","openNativeEditor","handleNavigate","handleStatusTableClick","handleTitleTextClick","handleTitleAreaClick","handleRowClick","startResize","newColSpan","handleDragStart","handleDrop","TableStatusBoard","onTableClick","EmbeddedOptionsPanel","onNavigate","fixed","dashboardStore","editingActionsWidgetId","draggingWidgetId","dropTargetId","gridRef","heightHandleRef","heightTouchTimer","availableTables","allActions","editingWidgetConfig","getTableById","enterEditMode","exitEditMode","openWidgetManager","handleRemoveWidget","handleResizeWidget","isActionEnabled","targetWidgetId","targetWidget","handleHeightDragStart","handleHeightReset","handleHeightTouchEnd","handleRowEdit","handleWidgetAction","autoAddDefaultWidgets","onDblclick","placeholder","DashboardWidget","onRowClick","onRowEdit","onAction","onRemove","onResize","onConfigActions","onDragStart","onDragEnd","action","checked","onChange","emptyText","containerRef","localSearchTerm","isReversed","filteredRows","getChangePriority","sortedRows","aChangeType","bChangeType","aPriority","bPriority","totalPages","ceil","paginatedRows","totalRows","deletingCount","shouldShowPagination","paginationList","pages","toggleReverse","toggleViewMode","handleClose","handleSearchInput","clearSearch","goToPage","scrollTo","behavior","lastHeightTouchTime","newTerm","newMode","newTotal","onInput","DataCard","onCellClick","onContextMenu","onShowHistory","isMatrix","optionColIndices","isMatrixMode","commonTags","cellText","currentHeaderTag","allTags","validCells","targetText","handleOptionHover","isHover","handleBackToDashboard","onMouseover","onMouseout","menuRef","menuStyle","parentWindow","viewportWidth","viewportHeight","clickOutsideHandler","rightClickHandler","close","handleInsertRow","handleCopy","handleDelete","handleUndoDelete","tabindex","initialStartFloor","initialEndFloor","dialogRef","startInputRef","endInputRef","selectedTableKeys","isExecuting","isAllSelected","canConfirm","toggleTableSelection","handleSelectAll","handleDeselectAll","focusEndInput","handleConfirm","tableNames","loadAvailableTables","fileInputRef","previewRef","dragStartOffsetX","dragStartOffsetY","previewStyle","applyAndClose","resetValues","triggerUpload","click","handleFileSelect","input","files","handleDragMove","updateOffset","newOffsetX","newOffsetY","round","accept","initialIndices","selectedIndices","isEnglishName","getDisplayCharsFromName","getDefaultIndicesFromName","chars","displayChars","previewLabel","selectedChars","displayLabel","resetToFullName","getDefaultIndices","char","newSet","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","CHAT_VAR_GRAPH_CONFIG","getGraphConfig","saveGraphConfig","insertOrAssignVariables","avatarManager","avatarList","pendingChanges","searchQuery","filteredAvatarList","isDeleteMode","selectedForDelete","activeImportMenu","currentUploadItem","showLabelDialog","currentLabelItem","showCropDialog","currentCropItem","loadAvatarList","labelsConfig","labels","node","avatarUrl","hasLocalBlob","labelConfig","labelIndices","aliasesText","confirm","getSourceLabel","getAvatarStyle","closeImportMenu","canImportFromTavern","squareBase64","response","fetch","squareBlob","alert","updateUrl","trimmedUrl","addPendingChange","updateAliases","closeLabelDialog","applyLabel","updatedItem","resetLabel","closeCropDialog","applyCrop","handleCropUpload","enterDeleteMode","exitDeleteMode","confirmDelete","changes","saveAll","selected","itemId","graphConfig","tavernUrl","NodeLabelDialog","onReset","AvatarCropDialog","draggingId","dropTargetIndex","addedListRef","specialWidgets","isSpecial","specialType","addedItems","special","availableItems","getTableIcon","player","option","draggedItem","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","isEditMode","tempChanges","undoStack","selectedSnapshot","isPreviewing","openedTableName","openedRowIndex","computedTitleColIndex","titleValue","titleIdx","getTitleValue","changedColsKey","currentRowDataWithChanges","getSnapshotDisplayTitle","snapshotToTableRowLocal","getSnapshotDiff","currentCells","handleSnapshotToggle","startEdit","exitEdit","handleHistoryCellClick","newChanges","applyWholeCard","pop","handlePreviewStart","handlePreviewEnd","resetState","loadSnapshots","newVisible","newTableName","newRowIndex","onToggle","currentFloorInfo","maxFloor","inputRef","isValidFloor","isInteger","validationError","handleCancel","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","isUpdating","selectedPresetId","showSavePresetDialog","newPresetName","autoTriggerEnabled","autoExecuteEnabled","selectedTableNames","tableSelectorExpanded","integritySummary","duplicatePresetWarning","isOnlySummarySelected","summaryTables","handleSettingChange","handlePresetChange","handleAutoFixPresetChange","handleSaveNewPreset","handleDeletePreset","targetId","handleAutoTriggerChange","handleAutoExecuteChange","handleSelectSummaryOnly","handleExecuteUpdate","autoFixId","onKeyup","hasInputError","showAdvancedDialog","defaultRange","lastIdx","hasRealData","getDefaultFloorRange","handleOpenAdvanced","handleAdvancedConfirm","AdvancedPurgeDialog","onConfirm","themeClass","handleShowHistory","ballStore","localAppearance","isPreviewAnimating","isPreviewNotify","imageInputRef","previewClasses","imagePreviewStyle","playPreviewAnim","playNotifyEffect","handleImageBtnClick","handleImageUpload","openCropDialog","resetToDefault","alt","step","btnId","visibleButtonCards","availableSecondaryButtons","currentPickerTarget","draggedIndex","attachmentPickerVisible","closeAttachmentPicker","handleReset","card","visibleInOrder","hiddenInOrder","currentVisible","gridStyle","gridTemplateColumns","allTabs","staged","isOptions","visibleTabItems","hiddenTabItems","isAggregateTab","getTypeBadge","allIds","handleClearAll","dragging","filtered","getPresetList","getActivePresetId","getCurrentThemeVars","getCurrentHighlight","getCustomCSS","manualColorHex","aiColorHex","titleColorHex","selectedTheme","expandedGroups","isDropdownOpen","showSaveDialog","customCSSText","presetNameInputRef","selectedPresetName","activeId","syncColorInputs","handleOutsideClick","toggleDropdown","selectDefaultPreset","toastr","openSaveDialog","closeSaveDialog","confirmSavePreset","onThemeChange","onManualColorChange","onAiColorChange","onTitleColorChange","getGroupModifiedCount","getVarValue","getVarColorValue","setVar","saveCSS","clearCSS","exportCSS","Blob","href","download","importCSS","handleFileImport","endsWith","readAsText","newTheme","groupId","headerRef","showAddFontDialog","newFontName","newFontUrl","currentPanel","localConfig","panelTitle","goToPanel","panel","goBack","handleEnterLockMode","canAddFont","handleAddFont","fontName","TabConfigPanel","NavButtonConfigPanel","BallAppearancePanel","ThemePanel","selectedActions","availableActions","getActionLabel","PRESET_STORAGE_KEY","tagPresets","selectedTagPresetId","saveTagPresetsToStorage","handleTagPresetChange","handleSaveTagPreset","newPreset","handleDeleteTagPreset","selectedDisplayColumn","selectedInteractiveColumn","availableDisplayColumns","availableInteractiveColumns","handleDisplayColumnSelect","handleInteractiveColumnSelect","addTagDefinition","newTag","loadTagPresets","header","col","typeClass","iconClass","showLegend","initialLayout","avatarCache","cy","layoutMode","showNodeConfig","showAvatarManager","configNodeId","configNodeFullName","configSelectedIndices","centerNodeId","positions","layoutPositions","fcose","getSavedPositions","getCssVar","varName","getComputedStyle","getPropertyValue","getThemeColors","legend","emojiMap","S","A","B","C","D","E","emoji","getRelationLegend","parsedData","characterTablesCount","characterTablesNames","aliasMapSize","embeddedResult","getLayoutConfig","mode","concentric","levelWidth","minNodeSpacing","animate","animationDuration","fit","directed","spacingFactor","randomize","nodeSeparation","idealEdgeLength","edgeElasticity","nestingFactor","gravity","gravityRange","numIter","tile","tilingPaddingVertical","tilingPaddingHorizontal","initCytoscape","colors","savedPositions","savedCount","currentNodeCount","hasPositions","elementsWithData","nodeId","avatarData","avatarOffsetX","avatarOffsetY","avatarScale","selector","shape","userZoomingEnabled","userPanningEnabled","boxSelectionEnabled","minZoom","maxZoom","evt","run","setCenterNode","nodeConfig","getLabelConfig","openNodeConfig","edge","applyLabelConfig","nodeHtmlLabel","halign","valign","halignBox","valignBox","tpl","updateGraph","zoomIn","zoom","zoomOut","fitToView","previousLayout","targetLayoutData","hasSavedPositions","firstNodeId","firstSavedPos","hasRestored","restoredCount","savedPos","beforePos","afterPos","restoreNodePositions","saveNodePositions","allZero","isFinite","firstPos","clearSavedPositions","currentLayout","one","saveLayoutManually","saveLabelConfig","getPreviewLabel","closeNodeConfig","avatarManagerNodes","openAvatarManager","closeAvatarManager","loadAliasMap","preloadAvatars","nodeName","displayConfig","handleAvatarUpdate","removeData","handleLabelChange","destroy","updateNodeColors","backgroundColor","AvatarManagerDialog","onUpdate","onLabelChange","showRelationshipGraph","showOptionsPanel","initStyles","cleanupStyles","executePurgeFloorRange","toastState","touchStartHandler","touchMoveHandler","isContentEditable","shouldAllowScroll","overflowY","parentElement","install","pDoc","uninstall","useTouchScrollFix","swipeEnhancement","floatingBallRef","mainPanelRef","provide","processedTables","showSettingsDialog","showInputFloorDialog","showPurgeRangeDialog","showManualUpdateDialog","showHistoryDialog","showTabsPopup","historyDialogData","contextMenuState","appClasses","rawRows","tabList","isTabBarCollapsed","optionsTables","hasRelationshipData","relationshipTableData","characterTablesData","factionTableData","currentTable","currentTargetFloor","maxFloorIndex","handlePanelClose","handleHideContent","handleToggle","handleTabChange","dataAreaEl","restoreTableHeight","savedHeight","handleTabsReorder","handleCollapseTabClick","handleTabsPopupClick","handleNavigateToTable","handleShowRelationshipGraph","handleDashboardAction","handleUndo","handleManualUpdate","handleTableClose","handleEl","setPointerCapture","pointerId","startHeight","upE","releasePointerCapture","currentTabName","loadData","processedData","handleToggleDelete","handleContextInsertRow","handleContextCopy","handleContextDelete","handleContextUndoDelete","handleHistoryApply","handleSettingsSave","handleOpenNative","handleSaveToFloor","handlePurgeRange","isCenteredMode","winConfigRaw","winConfig","handleClickOutside","isInsideACU","safeArea","FloatingBall","MainPanel","onRefresh","onSaveAs","onUndo","onManualUpdate","onPurge","onOpenNative","onSettings","onTogglePin","onHideContent","onCollapseTab","TabBar","onTabChange","onOrderChange","onExitEditing","TabsPopup","onTabClick","Dashboard","onShowRelationshipGraph","onHeightDragStart","onHeightReset","OptionsPanel","RelationshipGraph","DataTable","onSearchChange","ContextMenu","onCopy","onDelete","onUndoDelete","SettingsDialog","InputFloorDialog","PurgeRangeDialog","ManualUpdateDialog","HistoryDialog","RowEditDialog","WidgetSettingsDialog","DashboardWidgetManagerDialog","WidgetActionsDialog","Toast","vueApp","mountContainer","initCheckTimerId","waitForApiAndInit","defaultConfig","checkAndResetCenteredMode","dataCheckRetries","checkApi","pinia","createApp","App","use","mount","initVueApp","unmount"],"ignoreList":[],"sourceRoot":""}
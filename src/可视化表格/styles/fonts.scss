// ============================================
// ACU Visualizer - Fonts
// 字体导入与配置
// ============================================

// =========================================
// 1. 字体源导入 (Font Imports)
// 使用 zeoseven.com 字体 API
// =========================================

// 默认字体：思源黑体 (Source Han Sans SC)
@import url('https://fontsapi.zeoseven.com/69/main/result.css');

// 寒蝉全圆体 (HanChanQuanYuan)
@import url('https://fontsapi.zeoseven.com/3/main/result.css');

// Maple Mono
@import url('https://fontsapi.zeoseven.com/442/main/result.css');

// 汇文明朝 (HuiWenMingChao)
@import url('https://fontsapi.zeoseven.com/256/main/result.css');

// Cooper 正楷 (Cooper Zhengkai)
@import url('https://fontsapi.zeoseven.com/482/main/result.css');

// YFFYT
@import url('https://fontsapi.zeoseven.com/446/main/result.css');

// Fusion Pixel
@import url('https://fontsapi.zeoseven.com/570/main/result.css');

// 霞鹜文楷 (LXGW WenKai)
@import url('https://fontsapi.zeoseven.com/292/main/result.css');

// 朱雀仿宋 (Zhuque Fangsong)
@import url('https://fontsapi.zeoseven.com/7/main/result.css');

// =========================================
// 2. 字体映射配置 (Font Mapping)
// =========================================

// 字体 ID 到字体名称的映射
// 注意：字体名称必须与 zeoseven.com API 返回的实际 font-family 名称完全一致
$font-names: (
  'hanchan': 'HanChanQuanYuan',
  'maple': 'Maple Mono',
  'huiwen': 'Huiwen-mincho',
  'cooper': 'Cooper Zhengkai',
  'yffyt': 'YFFYT',
  'fusion': 'Fusion Pixel 12px M latin',
  'lxgw': 'LXGW WenKai',
  'siyuan': 'Source Han Sans SC',
  'zhuque': 'Zhuque Fangsong (technical preview)',
);

// 默认字体栈
$font-stack-default:
  'Source Han Sans SC',
  -apple-system,
  BlinkMacSystemFont,
  'Segoe UI',
  Roboto,
  'Helvetica Neue',
  Arial,
  sans-serif;

// =========================================
// 3. 基础字体样式 (Base Font Styles)
// =========================================
// 【修复】删除此处的默认变量定义
// 因为 .acu-wrapper 是 .acu-app 的子元素，这里的定义会覆盖 .acu-app 上用户选择的字体
// 改为在使用变量时添加 fallback 来处理默认值
// .acu-wrapper {
//   --acu-font-family: #{$font-stack-default};
// }

// =========================================
// 4. 字体切换 (Font Switching)
// 通过 data-font 属性或类名切换字体
// =========================================

// 通过 data-font 属性切换
@each $font-id, $font-name in $font-names {
  .acu-wrapper[data-font='#{$font-id}'] {
    --acu-font-family: '#{$font-name}', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }
}

// 通过类名切换（备用方案）
// 注意：CSS 自定义属性不支持 !important，使用会导致整个声明无效
@each $font-id, $font-name in $font-names {
  .acu-font-#{$font-id} {
    --acu-font-family: '#{$font-name}', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }
}

// =========================================
// 5. 需要应用字体的元素 (Font Targets)
// =========================================
// 全局字体应用 - 所有 ACU 组件继承
// 【修复】添加 fallback，当变量未定义时使用默认字体栈
.acu-wrapper,
.acu-wrapper *,
.acu-modal-container,
.acu-modal-container *,
#acu-ghost-preview {
  font-family: var(--acu-font-family, #{$font-stack-default});
}

// =========================================
// 6. 字体大小预设 (Font Size Presets)
// =========================================
$font-sizes: (
  'xs': 11px,
  'sm': 12px,
  'base': 13px,
  'md': 14px,
  'lg': 15px,
  'xl': 16px,
  '2xl': 18px,
  '3xl': 20px,
);

// 生成字体大小工具类
@each $size-name, $size-value in $font-sizes {
  .acu-text-#{$size-name} {
    font-size: $size-value;
  }
}

// =========================================
// 7. 字体粗细预设 (Font Weight Presets)
// =========================================
.acu-font-normal {
  font-weight: 400;
}

.acu-font-medium {
  font-weight: 500;
}

.acu-font-semibold {
  font-weight: 600;
}

.acu-font-bold {
  font-weight: 700;
}

.acu-font-extrabold {
  font-weight: 800;
}

// =========================================
// 8. 行高预设 (Line Height Presets)
// =========================================

// =========================================
// 9. 特殊字体样式 (Special Font Styles)
// =========================================

// 标题样式
.acu-title {
  font-weight: 700;
  color: var(--acu-title-color);
  line-height: 1.35;
}

// 副标题样式

// 标签样式

// 数值样式

// 代码/等宽字体

// =========================================
// 10. 像素字体特殊处理 (Pixel Font Handling)
// Fusion Pixel 等像素字体需要禁用抗锯齿
// =========================================
.acu-wrapper[data-font='fusion'],
.acu-font-fusion {
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: unset;
  font-smooth: never;
  text-rendering: optimizeSpeed;
}

// =========================================
// Table Selector - 表格选择器
// 用于手动更新弹窗中选择要更新的表格
// =========================================

// 并排布局容器 (PC端) - 使用 flex 实现左右独立滚动
.acu-update-layout {
  display: flex;
  gap: 0; // 移除间距，使用边框分隔

  @media (max-width: 768px) {
    flex-direction: column;
  }
}

// 左侧：参数设置区域（独立滚动）
.acu-update-left {
  flex: 1;
  min-width: 0;
  max-height: calc(80vh - 120px); // 减去头部和按钮区高度
  overflow-y: auto;
  padding-right: 16px;

  // 滚动条 - 防御酒馆主题污染
  scrollbar-width: thin !important;
  scrollbar-color: var(--acu-border) transparent !important;

  &::-webkit-scrollbar {
    width: 4px !important;
    height: 4px !important;
  }
  &::-webkit-scrollbar-track {
    background: transparent !important;
  }
  &::-webkit-scrollbar-thumb {
    background: var(--acu-border) !important;
    border-radius: 2px !important;

    &:hover {
      background: var(--acu-text-sub) !important;
    }
  }
  &::-webkit-scrollbar-corner {
    background: transparent !important;
  }

  @media (max-width: 768px) {
    max-height: none;
    padding-right: 0;
  }
}

// 右侧：表格选择区域（独立滚动）
.acu-update-right {
  width: 260px; // 增大宽度
  flex-shrink: 0;
  border-left: 1px solid var(--acu-border);
  padding-left: 20px;
  display: flex;
  flex-direction: column;

  @media (max-width: 768px) {
    display: none;
  }
}

// 表格选择器容器
.acu-table-selector {
  background: var(--acu-card-bg);
  border: 1px solid var(--acu-border);
  border-radius: 12px;
  overflow: hidden;

  // 头部（快捷按钮区）- 按钮靠右
  &-header {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    padding: 10px 12px;
    border-bottom: 1px solid var(--acu-border);
    background: var(--acu-table-head);
    justify-content: flex-end; // 按钮靠右
  }

  // 表格列表
  &-list {
    max-height: 280px;
    overflow-y: auto;
    padding: 8px;

    // 滚动条 - 防御酒馆主题污染
    scrollbar-width: thin !important;
    scrollbar-color: var(--acu-border) transparent !important;

    &::-webkit-scrollbar {
      width: 6px !important;
      height: 6px !important;
    }
    &::-webkit-scrollbar-track {
      background: transparent !important;
    }
    &::-webkit-scrollbar-thumb {
      background: var(--acu-border) !important;
      border-radius: 3px !important;

      &:hover {
        background: var(--acu-text-sub) !important;
      }
    }
    &::-webkit-scrollbar-corner {
      background: transparent !important;
    }
  }

  // 单个表格项
  &-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 10px;
    border-radius: 8px;
    cursor: pointer;
    transition: background 0.15s;
    user-select: none;

    &:hover {
      background: var(--acu-table-hover);
    }

    // 小型开关样式（用于表格选择器）
    .acu-switch.small {
      transform: scale(0.65);
      transform-origin: center;
      margin: 0 -4px; // 补偿缩放后的边距
      flex-shrink: 0;
    }

    // 复选框 - 防御酒馆主题污染（保留兼容旧代码）
    input[type='checkbox']:not(.acu-switch input) {
      // 恢复原生外观
      appearance: checkbox !important;
      -webkit-appearance: checkbox !important;
      -moz-appearance: checkbox !important;
      // 基础样式
      width: 16px !important;
      height: 16px !important;
      min-width: 16px !important;
      min-height: 16px !important;
      margin: 0 !important;
      padding: 0 !important;
      cursor: pointer !important;
      accent-color: var(--acu-title-color) !important;
      // 防御性属性 - 清除酒馆可能的自定义样式
      background: none !important;
      background-color: transparent !important;
      background-image: none !important;
      border: revert !important;
      outline: none !important;
      box-shadow: none !important;
      vertical-align: middle !important;
      flex-shrink: 0 !important;
      position: relative !important;
      // 清除酒馆可能的伪元素
      &::before,
      &::after {
        content: none !important;
        display: none !important;
      }
    }

    // 表格名称
    .table-name {
      flex: 1;
      font-size: 13px;
      color: var(--acu-text-main);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    // 总结表/大纲表标识
    &.is-summary-outline {
      .table-name::after {
        content: '★';
        color: var(--acu-title-color);
        margin-left: 4px;
        font-size: 10px;
      }
    }

    // 选中状态
    &.is-selected {
      background: var(--acu-title-color-bg);
    }
  }

  // 底部统计
  &-footer {
    padding: 8px 12px;
    border-top: 1px solid var(--acu-border);
    font-size: 12px;
    color: var(--acu-text-sub);
    text-align: center;
  }

  // 空状态
  &-empty {
    padding: 20px;
    text-align: center;
    color: var(--acu-text-sub);
    font-size: 13px;

    i {
      display: block;
      font-size: 24px;
      margin-bottom: 8px;
      opacity: 0.5;
    }
  }
}

// 快捷选择按钮
.acu-quick-select-btn {
  padding: 4px 10px;
  font-size: 11px;
  border-radius: 6px;
  border: 1px solid var(--acu-border);
  background: var(--acu-btn-bg);
  color: var(--acu-text-main);
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;

  &:hover {
    background: var(--acu-btn-hover);
  }

  &.active {
    background: var(--acu-title-color-bg);
    border-color: var(--acu-title-color);
    color: var(--acu-title-color);
  }

  i {
    margin-right: 4px;
    font-size: 10px;
  }
}

// 移动端折叠式表格选择
.acu-table-selector-mobile {
  margin-top: 12px;

  .acu-table-selector {
    margin-top: 8px;
  }

}

// 折叠标题（移动端）
.acu-collapsible {
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;

  .acu-collapse-indicator {
    font-size: 12px;
    color: var(--acu-text-sub);
    transition: transform 0.2s;
  }

  &.is-expanded .acu-collapse-indicator {
    transform: rotate(180deg);
  }
}

// 响应式辅助类
.acu-hide-mobile {
  @media (max-width: 768px) {
    display: none !important;
  }
}

.acu-show-mobile-only {
  display: none;

  @media (max-width: 768px) {
    display: block;
  }
}

// 手动更新弹窗宽度调整 (PC端扩大)
.acu-manual-update-modal {
  @media (min-width: 769px) {
    max-width: 800px; // 增大宽度

    // PC端取消整体滚动，让左右区域各自滚动
    .acu-modal-body {
      overflow: visible;
      max-height: none;
      padding: 20px;
    }
  }
}

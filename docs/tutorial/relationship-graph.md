# 关系图

这里介绍关系图的节点操作、连线配置等功能。

## 视频教程

将您的视频文件（例如 `graph.mp4`）放入 `docs/public/videos/` 文件夹，然后使用以下代码引用：

<video controls width="100%" preload="metadata">
  <source src="/videos/graph.mp4" type="video/mp4">
  您的浏览器不支持 video 标签。
</video>

## 自动解析规则

关系图会自动扫描符合以下命名规则的表格数据：

### 1. 表格识别

| 表格类型 | 表名关键词（包含其一即可） | 必需列名（包含其一即可） |
|----------|-------------------------|-------------------------|
| **人物表** | `人物`, `角色`, `npc`, `character`, `主角` | `姓名`, `name`, `名称`, `角色名` |
| **关系表** | `关系`, `relationship`, `relation` | `source/源`, `target/目标` |
| **势力表** | `势力`, `faction`, `组织`, `阵营` | `名称`, `name`, `势力名` |

### 2. 列名识别

| 数据类型 | 对应列名关键词（包含其一即可） | 说明 |
|----------|-----------------------------|------|
| **人际关系** | `人际关系`, `关系`, `relationship` | 位于人物表中，用于解析内嵌关系 |
| **势力归属** | `所属`, `势力`, `阵营`, `身份`, `职业` | 位于人物表中，用于解析角色所属势力 |
| **源节点** | `source`, `源`, `主体`, `from` | 位于关系表中 |
| **目标节点** | `target`, `目标`, `客体`, `to` | 位于关系表中 |
| **关系词** | `关系`, `relation`, `关系词` | 位于关系表中 |
| **备注** | `备注`, `note`, `说明` | 位于关系表中 |

## 匹配规则自查

如果你的关系解析不正确，请检查是否符合以下格式：

**通用规则**（在人物表的“人际关系”列或势力表中均可使用）：

| 模式 | 格式 | 示例 | 解析结果 |
|------|------|------|----------|
| **标准格式** | `{目标}的{关系}` | 小红的哥哥 | 目标：小红，关系：哥哥 |
| **多目标** | `{A}、{B}的{关系}` | 小明、小红的朋友 | 目标：[小明, 小红]，关系：朋友 |
| **多关系** | `{目标}的{关系A}、{关系B}` | 小红的朋友、同学 | 目标：小红，关系：[朋友, 同学] |
| **混合模式** | `{目标}：{关系A}、{关系B}` | 小红：朋友、同学 | 目标：小红，关系：[朋友, 同学] |
| **双向模式** | `{A}与{B}的{关系}` | 我与小红的朋友 | 目标：[我, 小红]，关系：朋友 |
| **备注模式** | `{目标}的{关系}（{备注}）` | 小明的死对头（暗中） | 目标：小明，关系：死对头，备注：暗中 |
| **势力关系** | `与{势力}{关系}` | 与胜和敌对 | 目标：胜和，关系：敌对 |
| **冒号格式** | `{目标}：{关系}` | 藏剑山庄：盟友 | 目标：藏剑山庄，关系：盟友 |
| **反向冒号** | `{关系}：{目标}` | 盟友：藏剑山庄 | 目标：藏剑山庄，关系：盟友（需开启智能识别） |
